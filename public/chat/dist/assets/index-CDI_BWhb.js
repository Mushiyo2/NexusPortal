(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var z$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dL(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var l_={exports:{}},qd={},u_={exports:{}},xn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g1;function hL(){if(g1)return xn;g1=1;var e=Symbol.for("react.element"),n=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function p(j){return j===null||typeof j!="object"?null:(j=f&&j[f]||j["@@iterator"],typeof j=="function"?j:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,g={};function y(j,Z,ie){this.props=j,this.context=Z,this.refs=g,this.updater=ie||m}y.prototype.isReactComponent={},y.prototype.setState=function(j,Z){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,Z,"setState")},y.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function S(){}S.prototype=y.prototype;function C(j,Z,ie){this.props=j,this.context=Z,this.refs=g,this.updater=ie||m}var T=C.prototype=new S;T.constructor=C,E(T,y.prototype),T.isPureReactComponent=!0;var I=Array.isArray,L=Object.prototype.hasOwnProperty,D={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function R(j,Z,ie){var fe,te={},le=null,Me=null;if(Z!=null)for(fe in Z.ref!==void 0&&(Me=Z.ref),Z.key!==void 0&&(le=""+Z.key),Z)L.call(Z,fe)&&!O.hasOwnProperty(fe)&&(te[fe]=Z[fe]);var ae=arguments.length-2;if(ae===1)te.children=ie;else if(1<ae){for(var he=Array(ae),pe=0;pe<ae;pe++)he[pe]=arguments[pe+2];te.children=he}if(j&&j.defaultProps)for(fe in ae=j.defaultProps,ae)te[fe]===void 0&&(te[fe]=ae[fe]);return{$$typeof:e,type:j,key:le,ref:Me,props:te,_owner:D.current}}function k(j,Z){return{$$typeof:e,type:j.type,key:Z,ref:j.ref,props:j.props,_owner:j._owner}}function P(j){return typeof j=="object"&&j!==null&&j.$$typeof===e}function G(j){var Z={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ie){return Z[ie]})}var V=/\/+/g;function H(j,Z){return typeof j=="object"&&j!==null&&j.key!=null?G(""+j.key):Z.toString(36)}function F(j,Z,ie,fe,te){var le=typeof j;(le==="undefined"||le==="boolean")&&(j=null);var Me=!1;if(j===null)Me=!0;else switch(le){case"string":case"number":Me=!0;break;case"object":switch(j.$$typeof){case e:case n:Me=!0}}if(Me)return Me=j,te=te(Me),j=fe===""?"."+H(Me,0):fe,I(te)?(ie="",j!=null&&(ie=j.replace(V,"$&/")+"/"),F(te,Z,ie,"",function(pe){return pe})):te!=null&&(P(te)&&(te=k(te,ie+(!te.key||Me&&Me.key===te.key?"":(""+te.key).replace(V,"$&/")+"/")+j)),Z.push(te)),1;if(Me=0,fe=fe===""?".":fe+":",I(j))for(var ae=0;ae<j.length;ae++){le=j[ae];var he=fe+H(le,ae);Me+=F(le,Z,ie,he,te)}else if(he=p(j),typeof he=="function")for(j=he.call(j),ae=0;!(le=j.next()).done;)le=le.value,he=fe+H(le,ae++),Me+=F(le,Z,ie,he,te);else if(le==="object")throw Z=String(j),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return Me}function z(j,Z,ie){if(j==null)return j;var fe=[],te=0;return F(j,fe,"","",function(le){return Z.call(ie,le,te++)}),fe}function K(j){if(j._status===-1){var Z=j._result;Z=Z(),Z.then(function(ie){(j._status===0||j._status===-1)&&(j._status=1,j._result=ie)},function(ie){(j._status===0||j._status===-1)&&(j._status=2,j._result=ie)}),j._status===-1&&(j._status=0,j._result=Z)}if(j._status===1)return j._result.default;throw j._result}var ee={current:null},$={transition:null},Q={ReactCurrentDispatcher:ee,ReactCurrentBatchConfig:$,ReactCurrentOwner:D};function ne(){throw Error("act(...) is not supported in production builds of React.")}return xn.Children={map:z,forEach:function(j,Z,ie){z(j,function(){Z.apply(this,arguments)},ie)},count:function(j){var Z=0;return z(j,function(){Z++}),Z},toArray:function(j){return z(j,function(Z){return Z})||[]},only:function(j){if(!P(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},xn.Component=y,xn.Fragment=t,xn.Profiler=i,xn.PureComponent=C,xn.StrictMode=r,xn.Suspense=l,xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,xn.act=ne,xn.cloneElement=function(j,Z,ie){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var fe=E({},j.props),te=j.key,le=j.ref,Me=j._owner;if(Z!=null){if(Z.ref!==void 0&&(le=Z.ref,Me=D.current),Z.key!==void 0&&(te=""+Z.key),j.type&&j.type.defaultProps)var ae=j.type.defaultProps;for(he in Z)L.call(Z,he)&&!O.hasOwnProperty(he)&&(fe[he]=Z[he]===void 0&&ae!==void 0?ae[he]:Z[he])}var he=arguments.length-2;if(he===1)fe.children=ie;else if(1<he){ae=Array(he);for(var pe=0;pe<he;pe++)ae[pe]=arguments[pe+2];fe.children=ae}return{$$typeof:e,type:j.type,key:te,ref:le,props:fe,_owner:Me}},xn.createContext=function(j){return j={$$typeof:s,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:a,_context:j},j.Consumer=j},xn.createElement=R,xn.createFactory=function(j){var Z=R.bind(null,j);return Z.type=j,Z},xn.createRef=function(){return{current:null}},xn.forwardRef=function(j){return{$$typeof:o,render:j}},xn.isValidElement=P,xn.lazy=function(j){return{$$typeof:d,_payload:{_status:-1,_result:j},_init:K}},xn.memo=function(j,Z){return{$$typeof:u,type:j,compare:Z===void 0?null:Z}},xn.startTransition=function(j){var Z=$.transition;$.transition={};try{j()}finally{$.transition=Z}},xn.unstable_act=ne,xn.useCallback=function(j,Z){return ee.current.useCallback(j,Z)},xn.useContext=function(j){return ee.current.useContext(j)},xn.useDebugValue=function(){},xn.useDeferredValue=function(j){return ee.current.useDeferredValue(j)},xn.useEffect=function(j,Z){return ee.current.useEffect(j,Z)},xn.useId=function(){return ee.current.useId()},xn.useImperativeHandle=function(j,Z,ie){return ee.current.useImperativeHandle(j,Z,ie)},xn.useInsertionEffect=function(j,Z){return ee.current.useInsertionEffect(j,Z)},xn.useLayoutEffect=function(j,Z){return ee.current.useLayoutEffect(j,Z)},xn.useMemo=function(j,Z){return ee.current.useMemo(j,Z)},xn.useReducer=function(j,Z,ie){return ee.current.useReducer(j,Z,ie)},xn.useRef=function(j){return ee.current.useRef(j)},xn.useState=function(j){return ee.current.useState(j)},xn.useSyncExternalStore=function(j,Z,ie){return ee.current.useSyncExternalStore(j,Z,ie)},xn.useTransition=function(){return ee.current.useTransition()},xn.version="18.3.1",xn}var E1;function Sy(){return E1||(E1=1,u_.exports=hL()),u_.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y1;function fL(){if(y1)return qd;y1=1;var e=Sy(),n=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function s(o,l,u){var d,f={},p=null,m=null;u!==void 0&&(p=""+u),l.key!==void 0&&(p=""+l.key),l.ref!==void 0&&(m=l.ref);for(d in l)r.call(l,d)&&!a.hasOwnProperty(d)&&(f[d]=l[d]);if(o&&o.defaultProps)for(d in l=o.defaultProps,l)f[d]===void 0&&(f[d]=l[d]);return{$$typeof:n,type:o,key:p,ref:m,props:f,_owner:i.current}}return qd.Fragment=t,qd.jsx=s,qd.jsxs=s,qd}var C1;function vL(){return C1||(C1=1,l_.exports=fL()),l_.exports}var yh=vL(),N=Sy();const v=dL(N);var yv={},c_={exports:{}},la={},d_={exports:{}},h_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b1;function pL(){return b1||(b1=1,function(e){function n($,Q){var ne=$.length;$.push(Q);e:for(;0<ne;){var j=ne-1>>>1,Z=$[j];if(0<i(Z,Q))$[j]=Q,$[ne]=Z,ne=j;else break e}}function t($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var Q=$[0],ne=$.pop();if(ne!==Q){$[0]=ne;e:for(var j=0,Z=$.length,ie=Z>>>1;j<ie;){var fe=2*(j+1)-1,te=$[fe],le=fe+1,Me=$[le];if(0>i(te,ne))le<Z&&0>i(Me,te)?($[j]=Me,$[le]=ne,j=le):($[j]=te,$[fe]=ne,j=fe);else if(le<Z&&0>i(Me,ne))$[j]=Me,$[le]=ne,j=le;else break e}}return Q}function i($,Q){var ne=$.sortIndex-Q.sortIndex;return ne!==0?ne:$.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],u=[],d=1,f=null,p=3,m=!1,E=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T($){for(var Q=t(u);Q!==null;){if(Q.callback===null)r(u);else if(Q.startTime<=$)r(u),Q.sortIndex=Q.expirationTime,n(l,Q);else break;Q=t(u)}}function I($){if(g=!1,T($),!E)if(t(l)!==null)E=!0,K(L);else{var Q=t(u);Q!==null&&ee(I,Q.startTime-$)}}function L($,Q){E=!1,g&&(g=!1,S(R),R=-1),m=!0;var ne=p;try{for(T(Q),f=t(l);f!==null&&(!(f.expirationTime>Q)||$&&!G());){var j=f.callback;if(typeof j=="function"){f.callback=null,p=f.priorityLevel;var Z=j(f.expirationTime<=Q);Q=e.unstable_now(),typeof Z=="function"?f.callback=Z:f===t(l)&&r(l),T(Q)}else r(l);f=t(l)}if(f!==null)var ie=!0;else{var fe=t(u);fe!==null&&ee(I,fe.startTime-Q),ie=!1}return ie}finally{f=null,p=ne,m=!1}}var D=!1,O=null,R=-1,k=5,P=-1;function G(){return!(e.unstable_now()-P<k)}function V(){if(O!==null){var $=e.unstable_now();P=$;var Q=!0;try{Q=O(!0,$)}finally{Q?H():(D=!1,O=null)}}else D=!1}var H;if(typeof C=="function")H=function(){C(V)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,z=F.port2;F.port1.onmessage=V,H=function(){z.postMessage(null)}}else H=function(){y(V,0)};function K($){O=$,D||(D=!0,H())}function ee($,Q){R=y(function(){$(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){E||m||(E=!0,K(L))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return t(l)},e.unstable_next=function($){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var ne=p;p=Q;try{return $()}finally{p=ne}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,Q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ne=p;p=$;try{return Q()}finally{p=ne}},e.unstable_scheduleCallback=function($,Q,ne){var j=e.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?j+ne:j):ne=j,$){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ne+Z,$={id:d++,callback:Q,priorityLevel:$,startTime:ne,expirationTime:Z,sortIndex:-1},ne>j?($.sortIndex=ne,n(u,$),t(l)===null&&$===t(u)&&(g?(S(R),R=-1):g=!0,ee(I,ne-j))):($.sortIndex=Z,n(l,$),E||m||(E=!0,K(L))),$},e.unstable_shouldYield=G,e.unstable_wrapCallback=function($){var Q=p;return function(){var ne=p;p=Q;try{return $.apply(this,arguments)}finally{p=ne}}}}(h_)),h_}var S1;function mL(){return S1||(S1=1,d_.exports=pL()),d_.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T1;function _L(){if(T1)return la;T1=1;var e=Sy(),n=mL();function t(c){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+c,_=1;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_]);return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(c,h){s(c,h),s(c+"Capture",h)}function s(c,h){for(i[c]=h,c=0;c<h.length;c++)r.add(h[c])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},f={};function p(c){return l.call(f,c)?!0:l.call(d,c)?!1:u.test(c)?f[c]=!0:(d[c]=!0,!1)}function m(c,h,_,b){if(_!==null&&_.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return b?!1:_!==null?!_.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function E(c,h,_,b){if(h===null||typeof h>"u"||m(c,h,_,b))return!0;if(b)return!1;if(_!==null)switch(_.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function g(c,h,_,b,w,U,q){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=b,this.attributeNamespace=w,this.mustUseProperty=_,this.propertyName=c,this.type=h,this.sanitizeURL=U,this.removeEmptyString=q}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){y[c]=new g(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var h=c[0];y[h]=new g(h,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){y[c]=new g(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){y[c]=new g(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){y[c]=new g(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){y[c]=new g(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){y[c]=new g(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){y[c]=new g(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){y[c]=new g(c,5,!1,c.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function C(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var h=c.replace(S,C);y[h]=new g(h,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var h=c.replace(S,C);y[h]=new g(h,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var h=c.replace(S,C);y[h]=new g(h,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){y[c]=new g(c,1,!1,c.toLowerCase(),null,!1,!1)}),y.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){y[c]=new g(c,1,!1,c.toLowerCase(),null,!0,!0)});function T(c,h,_,b){var w=y.hasOwnProperty(h)?y[h]:null;(w!==null?w.type!==0:b||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(E(h,_,w,b)&&(_=null),b||w===null?p(h)&&(_===null?c.removeAttribute(h):c.setAttribute(h,""+_)):w.mustUseProperty?c[w.propertyName]=_===null?w.type===3?!1:"":_:(h=w.attributeName,b=w.attributeNamespace,_===null?c.removeAttribute(h):(w=w.type,_=w===3||w===4&&_===!0?"":""+_,b?c.setAttributeNS(b,h,_):c.setAttribute(h,_))))}var I=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),D=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),G=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),ee=Symbol.for("react.offscreen"),$=Symbol.iterator;function Q(c){return c===null||typeof c!="object"?null:(c=$&&c[$]||c["@@iterator"],typeof c=="function"?c:null)}var ne=Object.assign,j;function Z(c){if(j===void 0)try{throw Error()}catch(_){var h=_.stack.trim().match(/\n( *(at )?)/);j=h&&h[1]||""}return`
`+j+c}var ie=!1;function fe(c,h){if(!c||ie)return"";ie=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(Oe){var b=Oe}Reflect.construct(c,[],h)}else{try{h.call()}catch(Oe){b=Oe}c.call(h.prototype)}else{try{throw Error()}catch(Oe){b=Oe}c()}}catch(Oe){if(Oe&&b&&typeof Oe.stack=="string"){for(var w=Oe.stack.split(`
`),U=b.stack.split(`
`),q=w.length-1,re=U.length-1;1<=q&&0<=re&&w[q]!==U[re];)re--;for(;1<=q&&0<=re;q--,re--)if(w[q]!==U[re]){if(q!==1||re!==1)do if(q--,re--,0>re||w[q]!==U[re]){var oe=`
`+w[q].replace(" at new "," at ");return c.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",c.displayName)),oe}while(1<=q&&0<=re);break}}}finally{ie=!1,Error.prepareStackTrace=_}return(c=c?c.displayName||c.name:"")?Z(c):""}function te(c){switch(c.tag){case 5:return Z(c.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return c=fe(c.type,!1),c;case 11:return c=fe(c.type.render,!1),c;case 1:return c=fe(c.type,!0),c;default:return""}}function le(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case O:return"Fragment";case D:return"Portal";case k:return"Profiler";case R:return"StrictMode";case H:return"Suspense";case F:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case G:return(c.displayName||"Context")+".Consumer";case P:return(c._context.displayName||"Context")+".Provider";case V:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case z:return h=c.displayName||null,h!==null?h:le(c.type)||"Memo";case K:h=c._payload,c=c._init;try{return le(c(h))}catch{}}return null}function Me(c){var h=c.type;switch(c.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=h.render,c=c.displayName||c.name||"",h.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return le(h);case 8:return h===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function ae(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function he(c){var h=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function pe(c){var h=he(c)?"checked":"value",_=Object.getOwnPropertyDescriptor(c.constructor.prototype,h),b=""+c[h];if(!c.hasOwnProperty(h)&&typeof _<"u"&&typeof _.get=="function"&&typeof _.set=="function"){var w=_.get,U=_.set;return Object.defineProperty(c,h,{configurable:!0,get:function(){return w.call(this)},set:function(q){b=""+q,U.call(this,q)}}),Object.defineProperty(c,h,{enumerable:_.enumerable}),{getValue:function(){return b},setValue:function(q){b=""+q},stopTracking:function(){c._valueTracker=null,delete c[h]}}}}function Ne(c){c._valueTracker||(c._valueTracker=pe(c))}function _e(c){if(!c)return!1;var h=c._valueTracker;if(!h)return!0;var _=h.getValue(),b="";return c&&(b=he(c)?c.checked?"true":"false":c.value),c=b,c!==_?(h.setValue(c),!0):!1}function ge(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function me(c,h){var _=h.checked;return ne({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:_??c._wrapperState.initialChecked})}function Le(c,h){var _=h.defaultValue==null?"":h.defaultValue,b=h.checked!=null?h.checked:h.defaultChecked;_=ae(h.value!=null?h.value:_),c._wrapperState={initialChecked:b,initialValue:_,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function Qe(c,h){h=h.checked,h!=null&&T(c,"checked",h,!1)}function Pe(c,h){Qe(c,h);var _=ae(h.value),b=h.type;if(_!=null)b==="number"?(_===0&&c.value===""||c.value!=_)&&(c.value=""+_):c.value!==""+_&&(c.value=""+_);else if(b==="submit"||b==="reset"){c.removeAttribute("value");return}h.hasOwnProperty("value")?De(c,h.type,_):h.hasOwnProperty("defaultValue")&&De(c,h.type,ae(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(c.defaultChecked=!!h.defaultChecked)}function Ge(c,h,_){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var b=h.type;if(!(b!=="submit"&&b!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+c._wrapperState.initialValue,_||h===c.value||(c.value=h),c.defaultValue=h}_=c.name,_!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,_!==""&&(c.name=_)}function De(c,h,_){(h!=="number"||ge(c.ownerDocument)!==c)&&(_==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+_&&(c.defaultValue=""+_))}var tt=Array.isArray;function Ue(c,h,_,b){if(c=c.options,h){h={};for(var w=0;w<_.length;w++)h["$"+_[w]]=!0;for(_=0;_<c.length;_++)w=h.hasOwnProperty("$"+c[_].value),c[_].selected!==w&&(c[_].selected=w),w&&b&&(c[_].defaultSelected=!0)}else{for(_=""+ae(_),h=null,w=0;w<c.length;w++){if(c[w].value===_){c[w].selected=!0,b&&(c[w].defaultSelected=!0);return}h!==null||c[w].disabled||(h=c[w])}h!==null&&(h.selected=!0)}}function Ye(c,h){if(h.dangerouslySetInnerHTML!=null)throw Error(t(91));return ne({},h,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function yt(c,h){var _=h.value;if(_==null){if(_=h.children,h=h.defaultValue,_!=null){if(h!=null)throw Error(t(92));if(tt(_)){if(1<_.length)throw Error(t(93));_=_[0]}h=_}h==null&&(h=""),_=h}c._wrapperState={initialValue:ae(_)}}function Nt(c,h){var _=ae(h.value),b=ae(h.defaultValue);_!=null&&(_=""+_,_!==c.value&&(c.value=_),h.defaultValue==null&&c.defaultValue!==_&&(c.defaultValue=_)),b!=null&&(c.defaultValue=""+b)}function Rt(c){var h=c.textContent;h===c._wrapperState.initialValue&&h!==""&&h!==null&&(c.value=h)}function st(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Be(c,h){return c==null||c==="http://www.w3.org/1999/xhtml"?st(h):c==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var nt,qe=function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,_,b,w){MSApp.execUnsafeLocalFunction(function(){return c(h,_,b,w)})}:c}(function(c,h){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=h;else{for(nt=nt||document.createElement("div"),nt.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=nt.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;h.firstChild;)c.appendChild(h.firstChild)}});function rn(c,h){if(h){var _=c.firstChild;if(_&&_===c.lastChild&&_.nodeType===3){_.nodeValue=h;return}}c.textContent=h}var it={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ct=["Webkit","ms","Moz","O"];Object.keys(it).forEach(function(c){Ct.forEach(function(h){h=h+c.charAt(0).toUpperCase()+c.substring(1),it[h]=it[c]})});function Je(c,h,_){return h==null||typeof h=="boolean"||h===""?"":_||typeof h!="number"||h===0||it.hasOwnProperty(c)&&it[c]?(""+h).trim():h+"px"}function pt(c,h){c=c.style;for(var _ in h)if(h.hasOwnProperty(_)){var b=_.indexOf("--")===0,w=Je(_,h[_],b);_==="float"&&(_="cssFloat"),b?c.setProperty(_,w):c[_]=w}}var Ut=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pt(c,h){if(h){if(Ut[c]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(t(137,c));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(t(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(t(61))}if(h.style!=null&&typeof h.style!="object")throw Error(t(62))}}function Ht(c,h){if(c.indexOf("-")===-1)return typeof h.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bt=null;function qt(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Lt=null,wt=null,Et=null;function xe(c){if(c=Rd(c)){if(typeof Lt!="function")throw Error(t(280));var h=c.stateNode;h&&(h=kf(h),Lt(c.stateNode,c.type,h))}}function ye(c){wt?Et?Et.push(c):Et=[c]:wt=c}function Ze(){if(wt){var c=wt,h=Et;if(Et=wt=null,xe(c),h)for(c=0;c<h.length;c++)xe(h[c])}}function St(c,h){return c(h)}function Ot(){}var an=!1;function xt(c,h,_){if(an)return c(h,_);an=!0;try{return St(c,h,_)}finally{an=!1,(wt!==null||Et!==null)&&(Ot(),Ze())}}function dt(c,h){var _=c.stateNode;if(_===null)return null;var b=kf(_);if(b===null)return null;_=b[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(c=c.type,b=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!b;break e;default:c=!1}if(c)return null;if(_&&typeof _!="function")throw Error(t(231,h,typeof _));return _}var Jt=!1;if(o)try{var ln={};Object.defineProperty(ln,"passive",{get:function(){Jt=!0}}),window.addEventListener("test",ln,ln),window.removeEventListener("test",ln,ln)}catch{Jt=!1}function Bt(c,h,_,b,w,U,q,re,oe){var Oe=Array.prototype.slice.call(arguments,3);try{h.apply(_,Oe)}catch(rt){this.onError(rt)}}var En=!1,Mn=null,Ke=!1,ht=null,Fe={onError:function(c){En=!0,Mn=c}};function Dt(c,h,_,b,w,U,q,re,oe){En=!1,Mn=null,Bt.apply(Fe,arguments)}function Gt(c,h,_,b,w,U,q,re,oe){if(Dt.apply(this,arguments),En){if(En){var Oe=Mn;En=!1,Mn=null}else throw Error(t(198));Ke||(Ke=!0,ht=Oe)}}function zt(c){var h=c,_=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,h.flags&4098&&(_=h.return),c=h.return;while(c)}return h.tag===3?_:null}function fn(c){if(c.tag===13){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function Dn(c){if(zt(c)!==c)throw Error(t(188))}function Vn(c){var h=c.alternate;if(!h){if(h=zt(c),h===null)throw Error(t(188));return h!==c?null:c}for(var _=c,b=h;;){var w=_.return;if(w===null)break;var U=w.alternate;if(U===null){if(b=w.return,b!==null){_=b;continue}break}if(w.child===U.child){for(U=w.child;U;){if(U===_)return Dn(w),c;if(U===b)return Dn(w),h;U=U.sibling}throw Error(t(188))}if(_.return!==b.return)_=w,b=U;else{for(var q=!1,re=w.child;re;){if(re===_){q=!0,_=w,b=U;break}if(re===b){q=!0,b=w,_=U;break}re=re.sibling}if(!q){for(re=U.child;re;){if(re===_){q=!0,_=U,b=w;break}if(re===b){q=!0,b=U,_=w;break}re=re.sibling}if(!q)throw Error(t(189))}}if(_.alternate!==b)throw Error(t(190))}if(_.tag!==3)throw Error(t(188));return _.stateNode.current===_?c:h}function ot(c){return c=Vn(c),c!==null?se(c):null}function se(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var h=se(c);if(h!==null)return h;c=c.sibling}return null}var ze=n.unstable_scheduleCallback,mt=n.unstable_cancelCallback,vn=n.unstable_shouldYield,Sn=n.unstable_requestPaint,sn=n.unstable_now,zn=n.unstable_getCurrentPriorityLevel,hr=n.unstable_ImmediatePriority,fr=n.unstable_UserBlockingPriority,It=n.unstable_NormalPriority,pn=n.unstable_LowPriority,gn=n.unstable_IdlePriority,on=null,br=null;function oi(c){if(br&&typeof br.onCommitFiberRoot=="function")try{br.onCommitFiberRoot(on,c,void 0,(c.current.flags&128)===128)}catch{}}var Sr=Math.clz32?Math.clz32:$u,Bo=Math.log,no=Math.LN2;function $u(c){return c>>>=0,c===0?32:31-(Bo(c)/no|0)|0}var ws=64,Rs=4194304;function as(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function ma(c,h){var _=c.pendingLanes;if(_===0)return 0;var b=0,w=c.suspendedLanes,U=c.pingedLanes,q=_&268435455;if(q!==0){var re=q&~w;re!==0?b=as(re):(U&=q,U!==0&&(b=as(U)))}else q=_&~w,q!==0?b=as(q):U!==0&&(b=as(U));if(b===0)return 0;if(h!==0&&h!==b&&!(h&w)&&(w=b&-b,U=h&-h,w>=U||w===16&&(U&4194240)!==0))return h;if(b&4&&(b|=_&16),h=c.entangledLanes,h!==0)for(c=c.entanglements,h&=b;0<h;)_=31-Sr(h),w=1<<_,b|=c[_],h&=~w;return b}function Wu(c,h){switch(c){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fd(c,h){for(var _=c.suspendedLanes,b=c.pingedLanes,w=c.expirationTimes,U=c.pendingLanes;0<U;){var q=31-Sr(U),re=1<<q,oe=w[q];oe===-1?(!(re&_)||re&b)&&(w[q]=Wu(re,h)):oe<=h&&(c.expiredLanes|=re),U&=~re}}function Qu(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function vd(){var c=ws;return ws<<=1,!(ws&4194240)&&(ws=64),c}function Hl(c){for(var h=[],_=0;31>_;_++)h.push(c);return h}function ro(c,h,_){c.pendingLanes|=h,h!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,h=31-Sr(h),c[h]=_}function pd(c,h){var _=c.pendingLanes&~h;c.pendingLanes=h,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=h,c.mutableReadLanes&=h,c.entangledLanes&=h,h=c.entanglements;var b=c.eventTimes;for(c=c.expirationTimes;0<_;){var w=31-Sr(_),U=1<<w;h[w]=0,b[w]=-1,c[w]=-1,_&=~U}}function Go(c,h){var _=c.entangledLanes|=h;for(c=c.entanglements;_;){var b=31-Sr(_),w=1<<b;w&h|c[b]&h&&(c[b]|=h),_&=~w}}var qn=0;function Yu(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var Xu,Zu,Ju,md,ec,tc=!1,Vo=[],ss=null,Ba=null,os=null,An=new Map,hn=new Map,be=[],ce="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kt(c,h){switch(c){case"focusin":case"focusout":ss=null;break;case"dragenter":case"dragleave":Ba=null;break;case"mouseover":case"mouseout":os=null;break;case"pointerover":case"pointerout":An.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":hn.delete(h.pointerId)}}function Mt(c,h,_,b,w,U){return c===null||c.nativeEvent!==U?(c={blockedOn:h,domEventName:_,eventSystemFlags:b,nativeEvent:U,targetContainers:[w]},h!==null&&(h=Rd(h),h!==null&&Zu(h)),c):(c.eventSystemFlags|=b,h=c.targetContainers,w!==null&&h.indexOf(w)===-1&&h.push(w),c)}function Yt(c,h,_,b,w){switch(h){case"focusin":return ss=Mt(ss,c,h,_,b,w),!0;case"dragenter":return Ba=Mt(Ba,c,h,_,b,w),!0;case"mouseover":return os=Mt(os,c,h,_,b,w),!0;case"pointerover":var U=w.pointerId;return An.set(U,Mt(An.get(U)||null,c,h,_,b,w)),!0;case"gotpointercapture":return U=w.pointerId,hn.set(U,Mt(hn.get(U)||null,c,h,_,b,w)),!0}return!1}function tr(c){var h=Bl(c.target);if(h!==null){var _=zt(h);if(_!==null){if(h=_.tag,h===13){if(h=fn(_),h!==null){c.blockedOn=h,ec(c.priority,function(){Ju(_)});return}}else if(h===3&&_.stateNode.current.memoizedState.isDehydrated){c.blockedOn=_.tag===3?_.stateNode.containerInfo:null;return}}}c.blockedOn=null}function Rn(c){if(c.blockedOn!==null)return!1;for(var h=c.targetContainers;0<h.length;){var _=km(c.domEventName,c.eventSystemFlags,h[0],c.nativeEvent);if(_===null){_=c.nativeEvent;var b=new _.constructor(_.type,_);bt=b,_.target.dispatchEvent(b),bt=null}else return h=Rd(_),h!==null&&Zu(h),c.blockedOn=_,!1;h.shift()}return!0}function Cf(c,h,_){Rn(c)&&_.delete(h)}function k3(){tc=!1,ss!==null&&Rn(ss)&&(ss=null),Ba!==null&&Rn(Ba)&&(Ba=null),os!==null&&Rn(os)&&(os=null),An.forEach(Cf),hn.forEach(Cf)}function _d(c,h){c.blockedOn===h&&(c.blockedOn=null,tc||(tc=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,k3)))}function gd(c){function h(w){return _d(w,c)}if(0<Vo.length){_d(Vo[0],c);for(var _=1;_<Vo.length;_++){var b=Vo[_];b.blockedOn===c&&(b.blockedOn=null)}}for(ss!==null&&_d(ss,c),Ba!==null&&_d(Ba,c),os!==null&&_d(os,c),An.forEach(h),hn.forEach(h),_=0;_<be.length;_++)b=be[_],b.blockedOn===c&&(b.blockedOn=null);for(;0<be.length&&(_=be[0],_.blockedOn===null);)tr(_),_.blockedOn===null&&be.shift()}var nc=I.ReactCurrentBatchConfig,bf=!0;function P3(c,h,_,b){var w=qn,U=nc.transition;nc.transition=null;try{qn=1,Um(c,h,_,b)}finally{qn=w,nc.transition=U}}function x3(c,h,_,b){var w=qn,U=nc.transition;nc.transition=null;try{qn=4,Um(c,h,_,b)}finally{qn=w,nc.transition=U}}function Um(c,h,_,b){if(bf){var w=km(c,h,_,b);if(w===null)Zm(c,h,b,Sf,_),Kt(c,b);else if(Yt(w,c,h,_,b))b.stopPropagation();else if(Kt(c,b),h&4&&-1<ce.indexOf(c)){for(;w!==null;){var U=Rd(w);if(U!==null&&Xu(U),U=km(c,h,_,b),U===null&&Zm(c,h,b,Sf,_),U===w)break;w=U}w!==null&&b.stopPropagation()}else Zm(c,h,b,null,_)}}var Sf=null;function km(c,h,_,b){if(Sf=null,c=qt(b),c=Bl(c),c!==null)if(h=zt(c),h===null)c=null;else if(_=h.tag,_===13){if(c=fn(h),c!==null)return c;c=null}else if(_===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;c=null}else h!==c&&(c=null);return Sf=c,null}function ib(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zn()){case hr:return 1;case fr:return 4;case It:case pn:return 16;case gn:return 536870912;default:return 16}default:return 16}}var zo=null,Pm=null,Tf=null;function ab(){if(Tf)return Tf;var c,h=Pm,_=h.length,b,w="value"in zo?zo.value:zo.textContent,U=w.length;for(c=0;c<_&&h[c]===w[c];c++);var q=_-c;for(b=1;b<=q&&h[_-b]===w[U-b];b++);return Tf=w.slice(c,1<b?1-b:void 0)}function Nf(c){var h=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&h===13&&(c=13)):c=h,c===10&&(c=13),32<=c||c===13?c:0}function If(){return!0}function sb(){return!1}function _a(c){function h(_,b,w,U,q){this._reactName=_,this._targetInst=w,this.type=b,this.nativeEvent=U,this.target=q,this.currentTarget=null;for(var re in c)c.hasOwnProperty(re)&&(_=c[re],this[re]=_?_(U):U[re]);return this.isDefaultPrevented=(U.defaultPrevented!=null?U.defaultPrevented:U.returnValue===!1)?If:sb,this.isPropagationStopped=sb,this}return ne(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _=this.nativeEvent;_&&(_.preventDefault?_.preventDefault():typeof _.returnValue!="unknown"&&(_.returnValue=!1),this.isDefaultPrevented=If)},stopPropagation:function(){var _=this.nativeEvent;_&&(_.stopPropagation?_.stopPropagation():typeof _.cancelBubble!="unknown"&&(_.cancelBubble=!0),this.isPropagationStopped=If)},persist:function(){},isPersistent:If}),h}var rc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xm=_a(rc),Ed=ne({},rc,{view:0,detail:0}),F3=_a(Ed),Fm,Hm,yd,Mf=ne({},Ed,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gm,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==yd&&(yd&&c.type==="mousemove"?(Fm=c.screenX-yd.screenX,Hm=c.screenY-yd.screenY):Hm=Fm=0,yd=c),Fm)},movementY:function(c){return"movementY"in c?c.movementY:Hm}}),ob=_a(Mf),H3=ne({},Mf,{dataTransfer:0}),B3=_a(H3),G3=ne({},Ed,{relatedTarget:0}),Bm=_a(G3),V3=ne({},rc,{animationName:0,elapsedTime:0,pseudoElement:0}),z3=_a(V3),j3=ne({},rc,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),q3=_a(j3),K3=ne({},rc,{data:0}),lb=_a(K3),$3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},W3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Q3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Y3(c){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(c):(c=Q3[c])?!!h[c]:!1}function Gm(){return Y3}var X3=ne({},Ed,{key:function(c){if(c.key){var h=$3[c.key]||c.key;if(h!=="Unidentified")return h}return c.type==="keypress"?(c=Nf(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?W3[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gm,charCode:function(c){return c.type==="keypress"?Nf(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Nf(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),Z3=_a(X3),J3=ne({},Mf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ub=_a(J3),eD=ne({},Ed,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gm}),tD=_a(eD),nD=ne({},rc,{propertyName:0,elapsedTime:0,pseudoElement:0}),rD=_a(nD),iD=ne({},Mf,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),aD=_a(iD),sD=[9,13,27,32],Vm=o&&"CompositionEvent"in window,Cd=null;o&&"documentMode"in document&&(Cd=document.documentMode);var oD=o&&"TextEvent"in window&&!Cd,cb=o&&(!Vm||Cd&&8<Cd&&11>=Cd),db=" ",hb=!1;function fb(c,h){switch(c){case"keyup":return sD.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vb(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var ic=!1;function lD(c,h){switch(c){case"compositionend":return vb(h);case"keypress":return h.which!==32?null:(hb=!0,db);case"textInput":return c=h.data,c===db&&hb?null:c;default:return null}}function uD(c,h){if(ic)return c==="compositionend"||!Vm&&fb(c,h)?(c=ab(),Tf=Pm=zo=null,ic=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return cb&&h.locale!=="ko"?null:h.data;default:return null}}var cD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pb(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h==="input"?!!cD[c.type]:h==="textarea"}function mb(c,h,_,b){ye(b),h=Df(h,"onChange"),0<h.length&&(_=new xm("onChange","change",null,_,b),c.push({event:_,listeners:h}))}var bd=null,Sd=null;function dD(c){Ub(c,0)}function Af(c){var h=uc(c);if(_e(h))return c}function hD(c,h){if(c==="change")return h}var _b=!1;if(o){var zm;if(o){var jm="oninput"in document;if(!jm){var gb=document.createElement("div");gb.setAttribute("oninput","return;"),jm=typeof gb.oninput=="function"}zm=jm}else zm=!1;_b=zm&&(!document.documentMode||9<document.documentMode)}function Eb(){bd&&(bd.detachEvent("onpropertychange",yb),Sd=bd=null)}function yb(c){if(c.propertyName==="value"&&Af(Sd)){var h=[];mb(h,Sd,c,qt(c)),xt(dD,h)}}function fD(c,h,_){c==="focusin"?(Eb(),bd=h,Sd=_,bd.attachEvent("onpropertychange",yb)):c==="focusout"&&Eb()}function vD(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Af(Sd)}function pD(c,h){if(c==="click")return Af(h)}function mD(c,h){if(c==="input"||c==="change")return Af(h)}function _D(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var ls=typeof Object.is=="function"?Object.is:_D;function Td(c,h){if(ls(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var _=Object.keys(c),b=Object.keys(h);if(_.length!==b.length)return!1;for(b=0;b<_.length;b++){var w=_[b];if(!l.call(h,w)||!ls(c[w],h[w]))return!1}return!0}function Cb(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function bb(c,h){var _=Cb(c);c=0;for(var b;_;){if(_.nodeType===3){if(b=c+_.textContent.length,c<=h&&b>=h)return{node:_,offset:h-c};c=b}e:{for(;_;){if(_.nextSibling){_=_.nextSibling;break e}_=_.parentNode}_=void 0}_=Cb(_)}}function Sb(c,h){return c&&h?c===h?!0:c&&c.nodeType===3?!1:h&&h.nodeType===3?Sb(c,h.parentNode):"contains"in c?c.contains(h):c.compareDocumentPosition?!!(c.compareDocumentPosition(h)&16):!1:!1}function Tb(){for(var c=window,h=ge();h instanceof c.HTMLIFrameElement;){try{var _=typeof h.contentWindow.location.href=="string"}catch{_=!1}if(_)c=h.contentWindow;else break;h=ge(c.document)}return h}function qm(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h&&(h==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||h==="textarea"||c.contentEditable==="true")}function gD(c){var h=Tb(),_=c.focusedElem,b=c.selectionRange;if(h!==_&&_&&_.ownerDocument&&Sb(_.ownerDocument.documentElement,_)){if(b!==null&&qm(_)){if(h=b.start,c=b.end,c===void 0&&(c=h),"selectionStart"in _)_.selectionStart=h,_.selectionEnd=Math.min(c,_.value.length);else if(c=(h=_.ownerDocument||document)&&h.defaultView||window,c.getSelection){c=c.getSelection();var w=_.textContent.length,U=Math.min(b.start,w);b=b.end===void 0?U:Math.min(b.end,w),!c.extend&&U>b&&(w=b,b=U,U=w),w=bb(_,U);var q=bb(_,b);w&&q&&(c.rangeCount!==1||c.anchorNode!==w.node||c.anchorOffset!==w.offset||c.focusNode!==q.node||c.focusOffset!==q.offset)&&(h=h.createRange(),h.setStart(w.node,w.offset),c.removeAllRanges(),U>b?(c.addRange(h),c.extend(q.node,q.offset)):(h.setEnd(q.node,q.offset),c.addRange(h)))}}for(h=[],c=_;c=c.parentNode;)c.nodeType===1&&h.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<h.length;_++)c=h[_],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var ED=o&&"documentMode"in document&&11>=document.documentMode,ac=null,Km=null,Nd=null,$m=!1;function Nb(c,h,_){var b=_.window===_?_.document:_.nodeType===9?_:_.ownerDocument;$m||ac==null||ac!==ge(b)||(b=ac,"selectionStart"in b&&qm(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),Nd&&Td(Nd,b)||(Nd=b,b=Df(Km,"onSelect"),0<b.length&&(h=new xm("onSelect","select",null,h,_),c.push({event:h,listeners:b}),h.target=ac)))}function wf(c,h){var _={};return _[c.toLowerCase()]=h.toLowerCase(),_["Webkit"+c]="webkit"+h,_["Moz"+c]="moz"+h,_}var sc={animationend:wf("Animation","AnimationEnd"),animationiteration:wf("Animation","AnimationIteration"),animationstart:wf("Animation","AnimationStart"),transitionend:wf("Transition","TransitionEnd")},Wm={},Ib={};o&&(Ib=document.createElement("div").style,"AnimationEvent"in window||(delete sc.animationend.animation,delete sc.animationiteration.animation,delete sc.animationstart.animation),"TransitionEvent"in window||delete sc.transitionend.transition);function Rf(c){if(Wm[c])return Wm[c];if(!sc[c])return c;var h=sc[c],_;for(_ in h)if(h.hasOwnProperty(_)&&_ in Ib)return Wm[c]=h[_];return c}var Mb=Rf("animationend"),Ab=Rf("animationiteration"),wb=Rf("animationstart"),Rb=Rf("transitionend"),Ob=new Map,Db="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jo(c,h){Ob.set(c,h),a(h,[c])}for(var Qm=0;Qm<Db.length;Qm++){var Ym=Db[Qm],yD=Ym.toLowerCase(),CD=Ym[0].toUpperCase()+Ym.slice(1);jo(yD,"on"+CD)}jo(Mb,"onAnimationEnd"),jo(Ab,"onAnimationIteration"),jo(wb,"onAnimationStart"),jo("dblclick","onDoubleClick"),jo("focusin","onFocus"),jo("focusout","onBlur"),jo(Rb,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Id="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Id));function Lb(c,h,_){var b=c.type||"unknown-event";c.currentTarget=_,Gt(b,h,void 0,c),c.currentTarget=null}function Ub(c,h){h=(h&4)!==0;for(var _=0;_<c.length;_++){var b=c[_],w=b.event;b=b.listeners;e:{var U=void 0;if(h)for(var q=b.length-1;0<=q;q--){var re=b[q],oe=re.instance,Oe=re.currentTarget;if(re=re.listener,oe!==U&&w.isPropagationStopped())break e;Lb(w,re,Oe),U=oe}else for(q=0;q<b.length;q++){if(re=b[q],oe=re.instance,Oe=re.currentTarget,re=re.listener,oe!==U&&w.isPropagationStopped())break e;Lb(w,re,Oe),U=oe}}}if(Ke)throw c=ht,Ke=!1,ht=null,c}function gr(c,h){var _=h[i0];_===void 0&&(_=h[i0]=new Set);var b=c+"__bubble";_.has(b)||(kb(h,c,2,!1),_.add(b))}function Xm(c,h,_){var b=0;h&&(b|=4),kb(_,c,b,h)}var Of="_reactListening"+Math.random().toString(36).slice(2);function Md(c){if(!c[Of]){c[Of]=!0,r.forEach(function(_){_!=="selectionchange"&&(bD.has(_)||Xm(_,!1,c),Xm(_,!0,c))});var h=c.nodeType===9?c:c.ownerDocument;h===null||h[Of]||(h[Of]=!0,Xm("selectionchange",!1,h))}}function kb(c,h,_,b){switch(ib(h)){case 1:var w=P3;break;case 4:w=x3;break;default:w=Um}_=w.bind(null,h,_,c),w=void 0,!Jt||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(w=!0),b?w!==void 0?c.addEventListener(h,_,{capture:!0,passive:w}):c.addEventListener(h,_,!0):w!==void 0?c.addEventListener(h,_,{passive:w}):c.addEventListener(h,_,!1)}function Zm(c,h,_,b,w){var U=b;if(!(h&1)&&!(h&2)&&b!==null)e:for(;;){if(b===null)return;var q=b.tag;if(q===3||q===4){var re=b.stateNode.containerInfo;if(re===w||re.nodeType===8&&re.parentNode===w)break;if(q===4)for(q=b.return;q!==null;){var oe=q.tag;if((oe===3||oe===4)&&(oe=q.stateNode.containerInfo,oe===w||oe.nodeType===8&&oe.parentNode===w))return;q=q.return}for(;re!==null;){if(q=Bl(re),q===null)return;if(oe=q.tag,oe===5||oe===6){b=U=q;continue e}re=re.parentNode}}b=b.return}xt(function(){var Oe=U,rt=qt(_),lt=[];e:{var et=Ob.get(c);if(et!==void 0){var kt=xm,$t=c;switch(c){case"keypress":if(Nf(_)===0)break e;case"keydown":case"keyup":kt=Z3;break;case"focusin":$t="focus",kt=Bm;break;case"focusout":$t="blur",kt=Bm;break;case"beforeblur":case"afterblur":kt=Bm;break;case"click":if(_.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":kt=ob;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":kt=B3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":kt=tD;break;case Mb:case Ab:case wb:kt=z3;break;case Rb:kt=rD;break;case"scroll":kt=F3;break;case"wheel":kt=aD;break;case"copy":case"cut":case"paste":kt=q3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":kt=ub}var Xt=(h&4)!==0,Hr=!Xt&&c==="scroll",Ee=Xt?et!==null?et+"Capture":null:et;Xt=[];for(var ue=Oe,Te;ue!==null;){Te=ue;var gt=Te.stateNode;if(Te.tag===5&&gt!==null&&(Te=gt,Ee!==null&&(gt=dt(ue,Ee),gt!=null&&Xt.push(Ad(ue,gt,Te)))),Hr)break;ue=ue.return}0<Xt.length&&(et=new kt(et,$t,null,_,rt),lt.push({event:et,listeners:Xt}))}}if(!(h&7)){e:{if(et=c==="mouseover"||c==="pointerover",kt=c==="mouseout"||c==="pointerout",et&&_!==bt&&($t=_.relatedTarget||_.fromElement)&&(Bl($t)||$t[io]))break e;if((kt||et)&&(et=rt.window===rt?rt:(et=rt.ownerDocument)?et.defaultView||et.parentWindow:window,kt?($t=_.relatedTarget||_.toElement,kt=Oe,$t=$t?Bl($t):null,$t!==null&&(Hr=zt($t),$t!==Hr||$t.tag!==5&&$t.tag!==6)&&($t=null)):(kt=null,$t=Oe),kt!==$t)){if(Xt=ob,gt="onMouseLeave",Ee="onMouseEnter",ue="mouse",(c==="pointerout"||c==="pointerover")&&(Xt=ub,gt="onPointerLeave",Ee="onPointerEnter",ue="pointer"),Hr=kt==null?et:uc(kt),Te=$t==null?et:uc($t),et=new Xt(gt,ue+"leave",kt,_,rt),et.target=Hr,et.relatedTarget=Te,gt=null,Bl(rt)===Oe&&(Xt=new Xt(Ee,ue+"enter",$t,_,rt),Xt.target=Te,Xt.relatedTarget=Hr,gt=Xt),Hr=gt,kt&&$t)t:{for(Xt=kt,Ee=$t,ue=0,Te=Xt;Te;Te=oc(Te))ue++;for(Te=0,gt=Ee;gt;gt=oc(gt))Te++;for(;0<ue-Te;)Xt=oc(Xt),ue--;for(;0<Te-ue;)Ee=oc(Ee),Te--;for(;ue--;){if(Xt===Ee||Ee!==null&&Xt===Ee.alternate)break t;Xt=oc(Xt),Ee=oc(Ee)}Xt=null}else Xt=null;kt!==null&&Pb(lt,et,kt,Xt,!1),$t!==null&&Hr!==null&&Pb(lt,Hr,$t,Xt,!0)}}e:{if(et=Oe?uc(Oe):window,kt=et.nodeName&&et.nodeName.toLowerCase(),kt==="select"||kt==="input"&&et.type==="file")var en=hD;else if(pb(et))if(_b)en=mD;else{en=vD;var mn=fD}else(kt=et.nodeName)&&kt.toLowerCase()==="input"&&(et.type==="checkbox"||et.type==="radio")&&(en=pD);if(en&&(en=en(c,Oe))){mb(lt,en,_,rt);break e}mn&&mn(c,et,Oe),c==="focusout"&&(mn=et._wrapperState)&&mn.controlled&&et.type==="number"&&De(et,"number",et.value)}switch(mn=Oe?uc(Oe):window,c){case"focusin":(pb(mn)||mn.contentEditable==="true")&&(ac=mn,Km=Oe,Nd=null);break;case"focusout":Nd=Km=ac=null;break;case"mousedown":$m=!0;break;case"contextmenu":case"mouseup":case"dragend":$m=!1,Nb(lt,_,rt);break;case"selectionchange":if(ED)break;case"keydown":case"keyup":Nb(lt,_,rt)}var _n;if(Vm)e:{switch(c){case"compositionstart":var bn="onCompositionStart";break e;case"compositionend":bn="onCompositionEnd";break e;case"compositionupdate":bn="onCompositionUpdate";break e}bn=void 0}else ic?fb(c,_)&&(bn="onCompositionEnd"):c==="keydown"&&_.keyCode===229&&(bn="onCompositionStart");bn&&(cb&&_.locale!=="ko"&&(ic||bn!=="onCompositionStart"?bn==="onCompositionEnd"&&ic&&(_n=ab()):(zo=rt,Pm="value"in zo?zo.value:zo.textContent,ic=!0)),mn=Df(Oe,bn),0<mn.length&&(bn=new lb(bn,c,null,_,rt),lt.push({event:bn,listeners:mn}),_n?bn.data=_n:(_n=vb(_),_n!==null&&(bn.data=_n)))),(_n=oD?lD(c,_):uD(c,_))&&(Oe=Df(Oe,"onBeforeInput"),0<Oe.length&&(rt=new lb("onBeforeInput","beforeinput",null,_,rt),lt.push({event:rt,listeners:Oe}),rt.data=_n))}Ub(lt,h)})}function Ad(c,h,_){return{instance:c,listener:h,currentTarget:_}}function Df(c,h){for(var _=h+"Capture",b=[];c!==null;){var w=c,U=w.stateNode;w.tag===5&&U!==null&&(w=U,U=dt(c,_),U!=null&&b.unshift(Ad(c,U,w)),U=dt(c,h),U!=null&&b.push(Ad(c,U,w))),c=c.return}return b}function oc(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function Pb(c,h,_,b,w){for(var U=h._reactName,q=[];_!==null&&_!==b;){var re=_,oe=re.alternate,Oe=re.stateNode;if(oe!==null&&oe===b)break;re.tag===5&&Oe!==null&&(re=Oe,w?(oe=dt(_,U),oe!=null&&q.unshift(Ad(_,oe,re))):w||(oe=dt(_,U),oe!=null&&q.push(Ad(_,oe,re)))),_=_.return}q.length!==0&&c.push({event:h,listeners:q})}var SD=/\r\n?/g,TD=/\u0000|\uFFFD/g;function xb(c){return(typeof c=="string"?c:""+c).replace(SD,`
`).replace(TD,"")}function Lf(c,h,_){if(h=xb(h),xb(c)!==h&&_)throw Error(t(425))}function Uf(){}var Jm=null,e0=null;function t0(c,h){return c==="textarea"||c==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var n0=typeof setTimeout=="function"?setTimeout:void 0,ND=typeof clearTimeout=="function"?clearTimeout:void 0,Fb=typeof Promise=="function"?Promise:void 0,ID=typeof queueMicrotask=="function"?queueMicrotask:typeof Fb<"u"?function(c){return Fb.resolve(null).then(c).catch(MD)}:n0;function MD(c){setTimeout(function(){throw c})}function r0(c,h){var _=h,b=0;do{var w=_.nextSibling;if(c.removeChild(_),w&&w.nodeType===8)if(_=w.data,_==="/$"){if(b===0){c.removeChild(w),gd(h);return}b--}else _!=="$"&&_!=="$?"&&_!=="$!"||b++;_=w}while(_);gd(h)}function qo(c){for(;c!=null;c=c.nextSibling){var h=c.nodeType;if(h===1||h===3)break;if(h===8){if(h=c.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return c}function Hb(c){c=c.previousSibling;for(var h=0;c;){if(c.nodeType===8){var _=c.data;if(_==="$"||_==="$!"||_==="$?"){if(h===0)return c;h--}else _==="/$"&&h++}c=c.previousSibling}return null}var lc=Math.random().toString(36).slice(2),Os="__reactFiber$"+lc,wd="__reactProps$"+lc,io="__reactContainer$"+lc,i0="__reactEvents$"+lc,AD="__reactListeners$"+lc,wD="__reactHandles$"+lc;function Bl(c){var h=c[Os];if(h)return h;for(var _=c.parentNode;_;){if(h=_[io]||_[Os]){if(_=h.alternate,h.child!==null||_!==null&&_.child!==null)for(c=Hb(c);c!==null;){if(_=c[Os])return _;c=Hb(c)}return h}c=_,_=c.parentNode}return null}function Rd(c){return c=c[Os]||c[io],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function uc(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(t(33))}function kf(c){return c[wd]||null}var a0=[],cc=-1;function Ko(c){return{current:c}}function Er(c){0>cc||(c.current=a0[cc],a0[cc]=null,cc--)}function vr(c,h){cc++,a0[cc]=c.current,c.current=h}var $o={},ki=Ko($o),ra=Ko(!1),Gl=$o;function dc(c,h){var _=c.type.contextTypes;if(!_)return $o;var b=c.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===h)return b.__reactInternalMemoizedMaskedChildContext;var w={},U;for(U in _)w[U]=h[U];return b&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=h,c.__reactInternalMemoizedMaskedChildContext=w),w}function ia(c){return c=c.childContextTypes,c!=null}function Pf(){Er(ra),Er(ki)}function Bb(c,h,_){if(ki.current!==$o)throw Error(t(168));vr(ki,h),vr(ra,_)}function Gb(c,h,_){var b=c.stateNode;if(h=h.childContextTypes,typeof b.getChildContext!="function")return _;b=b.getChildContext();for(var w in b)if(!(w in h))throw Error(t(108,Me(c)||"Unknown",w));return ne({},_,b)}function xf(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||$o,Gl=ki.current,vr(ki,c),vr(ra,ra.current),!0}function Vb(c,h,_){var b=c.stateNode;if(!b)throw Error(t(169));_?(c=Gb(c,h,Gl),b.__reactInternalMemoizedMergedChildContext=c,Er(ra),Er(ki),vr(ki,c)):Er(ra),vr(ra,_)}var ao=null,Ff=!1,s0=!1;function zb(c){ao===null?ao=[c]:ao.push(c)}function RD(c){Ff=!0,zb(c)}function Wo(){if(!s0&&ao!==null){s0=!0;var c=0,h=qn;try{var _=ao;for(qn=1;c<_.length;c++){var b=_[c];do b=b(!0);while(b!==null)}ao=null,Ff=!1}catch(w){throw ao!==null&&(ao=ao.slice(c+1)),ze(hr,Wo),w}finally{qn=h,s0=!1}}return null}var hc=[],fc=0,Hf=null,Bf=0,Ga=[],Va=0,Vl=null,so=1,oo="";function zl(c,h){hc[fc++]=Bf,hc[fc++]=Hf,Hf=c,Bf=h}function jb(c,h,_){Ga[Va++]=so,Ga[Va++]=oo,Ga[Va++]=Vl,Vl=c;var b=so;c=oo;var w=32-Sr(b)-1;b&=~(1<<w),_+=1;var U=32-Sr(h)+w;if(30<U){var q=w-w%5;U=(b&(1<<q)-1).toString(32),b>>=q,w-=q,so=1<<32-Sr(h)+w|_<<w|b,oo=U+c}else so=1<<U|_<<w|b,oo=c}function o0(c){c.return!==null&&(zl(c,1),jb(c,1,0))}function l0(c){for(;c===Hf;)Hf=hc[--fc],hc[fc]=null,Bf=hc[--fc],hc[fc]=null;for(;c===Vl;)Vl=Ga[--Va],Ga[Va]=null,oo=Ga[--Va],Ga[Va]=null,so=Ga[--Va],Ga[Va]=null}var ga=null,Ea=null,Tr=!1,us=null;function qb(c,h){var _=Ka(5,null,null,0);_.elementType="DELETED",_.stateNode=h,_.return=c,h=c.deletions,h===null?(c.deletions=[_],c.flags|=16):h.push(_)}function Kb(c,h){switch(c.tag){case 5:var _=c.type;return h=h.nodeType!==1||_.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(c.stateNode=h,ga=c,Ea=qo(h.firstChild),!0):!1;case 6:return h=c.pendingProps===""||h.nodeType!==3?null:h,h!==null?(c.stateNode=h,ga=c,Ea=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(_=Vl!==null?{id:so,overflow:oo}:null,c.memoizedState={dehydrated:h,treeContext:_,retryLane:1073741824},_=Ka(18,null,null,0),_.stateNode=h,_.return=c,c.child=_,ga=c,Ea=null,!0):!1;default:return!1}}function u0(c){return(c.mode&1)!==0&&(c.flags&128)===0}function c0(c){if(Tr){var h=Ea;if(h){var _=h;if(!Kb(c,h)){if(u0(c))throw Error(t(418));h=qo(_.nextSibling);var b=ga;h&&Kb(c,h)?qb(b,_):(c.flags=c.flags&-4097|2,Tr=!1,ga=c)}}else{if(u0(c))throw Error(t(418));c.flags=c.flags&-4097|2,Tr=!1,ga=c}}}function $b(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;ga=c}function Gf(c){if(c!==ga)return!1;if(!Tr)return $b(c),Tr=!0,!1;var h;if((h=c.tag!==3)&&!(h=c.tag!==5)&&(h=c.type,h=h!=="head"&&h!=="body"&&!t0(c.type,c.memoizedProps)),h&&(h=Ea)){if(u0(c))throw Wb(),Error(t(418));for(;h;)qb(c,h),h=qo(h.nextSibling)}if($b(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(t(317));e:{for(c=c.nextSibling,h=0;c;){if(c.nodeType===8){var _=c.data;if(_==="/$"){if(h===0){Ea=qo(c.nextSibling);break e}h--}else _!=="$"&&_!=="$!"&&_!=="$?"||h++}c=c.nextSibling}Ea=null}}else Ea=ga?qo(c.stateNode.nextSibling):null;return!0}function Wb(){for(var c=Ea;c;)c=qo(c.nextSibling)}function vc(){Ea=ga=null,Tr=!1}function d0(c){us===null?us=[c]:us.push(c)}var OD=I.ReactCurrentBatchConfig;function Od(c,h,_){if(c=_.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(_._owner){if(_=_._owner,_){if(_.tag!==1)throw Error(t(309));var b=_.stateNode}if(!b)throw Error(t(147,c));var w=b,U=""+c;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===U?h.ref:(h=function(q){var re=w.refs;q===null?delete re[U]:re[U]=q},h._stringRef=U,h)}if(typeof c!="string")throw Error(t(284));if(!_._owner)throw Error(t(290,c))}return c}function Vf(c,h){throw c=Object.prototype.toString.call(h),Error(t(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c))}function Qb(c){var h=c._init;return h(c._payload)}function Yb(c){function h(Ee,ue){if(c){var Te=Ee.deletions;Te===null?(Ee.deletions=[ue],Ee.flags|=16):Te.push(ue)}}function _(Ee,ue){if(!c)return null;for(;ue!==null;)h(Ee,ue),ue=ue.sibling;return null}function b(Ee,ue){for(Ee=new Map;ue!==null;)ue.key!==null?Ee.set(ue.key,ue):Ee.set(ue.index,ue),ue=ue.sibling;return Ee}function w(Ee,ue){return Ee=nl(Ee,ue),Ee.index=0,Ee.sibling=null,Ee}function U(Ee,ue,Te){return Ee.index=Te,c?(Te=Ee.alternate,Te!==null?(Te=Te.index,Te<ue?(Ee.flags|=2,ue):Te):(Ee.flags|=2,ue)):(Ee.flags|=1048576,ue)}function q(Ee){return c&&Ee.alternate===null&&(Ee.flags|=2),Ee}function re(Ee,ue,Te,gt){return ue===null||ue.tag!==6?(ue=n_(Te,Ee.mode,gt),ue.return=Ee,ue):(ue=w(ue,Te),ue.return=Ee,ue)}function oe(Ee,ue,Te,gt){var en=Te.type;return en===O?rt(Ee,ue,Te.props.children,gt,Te.key):ue!==null&&(ue.elementType===en||typeof en=="object"&&en!==null&&en.$$typeof===K&&Qb(en)===ue.type)?(gt=w(ue,Te.props),gt.ref=Od(Ee,ue,Te),gt.return=Ee,gt):(gt=hv(Te.type,Te.key,Te.props,null,Ee.mode,gt),gt.ref=Od(Ee,ue,Te),gt.return=Ee,gt)}function Oe(Ee,ue,Te,gt){return ue===null||ue.tag!==4||ue.stateNode.containerInfo!==Te.containerInfo||ue.stateNode.implementation!==Te.implementation?(ue=r_(Te,Ee.mode,gt),ue.return=Ee,ue):(ue=w(ue,Te.children||[]),ue.return=Ee,ue)}function rt(Ee,ue,Te,gt,en){return ue===null||ue.tag!==7?(ue=Xl(Te,Ee.mode,gt,en),ue.return=Ee,ue):(ue=w(ue,Te),ue.return=Ee,ue)}function lt(Ee,ue,Te){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return ue=n_(""+ue,Ee.mode,Te),ue.return=Ee,ue;if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case L:return Te=hv(ue.type,ue.key,ue.props,null,Ee.mode,Te),Te.ref=Od(Ee,null,ue),Te.return=Ee,Te;case D:return ue=r_(ue,Ee.mode,Te),ue.return=Ee,ue;case K:var gt=ue._init;return lt(Ee,gt(ue._payload),Te)}if(tt(ue)||Q(ue))return ue=Xl(ue,Ee.mode,Te,null),ue.return=Ee,ue;Vf(Ee,ue)}return null}function et(Ee,ue,Te,gt){var en=ue!==null?ue.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number")return en!==null?null:re(Ee,ue,""+Te,gt);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case L:return Te.key===en?oe(Ee,ue,Te,gt):null;case D:return Te.key===en?Oe(Ee,ue,Te,gt):null;case K:return en=Te._init,et(Ee,ue,en(Te._payload),gt)}if(tt(Te)||Q(Te))return en!==null?null:rt(Ee,ue,Te,gt,null);Vf(Ee,Te)}return null}function kt(Ee,ue,Te,gt,en){if(typeof gt=="string"&&gt!==""||typeof gt=="number")return Ee=Ee.get(Te)||null,re(ue,Ee,""+gt,en);if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case L:return Ee=Ee.get(gt.key===null?Te:gt.key)||null,oe(ue,Ee,gt,en);case D:return Ee=Ee.get(gt.key===null?Te:gt.key)||null,Oe(ue,Ee,gt,en);case K:var mn=gt._init;return kt(Ee,ue,Te,mn(gt._payload),en)}if(tt(gt)||Q(gt))return Ee=Ee.get(Te)||null,rt(ue,Ee,gt,en,null);Vf(ue,gt)}return null}function $t(Ee,ue,Te,gt){for(var en=null,mn=null,_n=ue,bn=ue=0,ci=null;_n!==null&&bn<Te.length;bn++){_n.index>bn?(ci=_n,_n=null):ci=_n.sibling;var Qn=et(Ee,_n,Te[bn],gt);if(Qn===null){_n===null&&(_n=ci);break}c&&_n&&Qn.alternate===null&&h(Ee,_n),ue=U(Qn,ue,bn),mn===null?en=Qn:mn.sibling=Qn,mn=Qn,_n=ci}if(bn===Te.length)return _(Ee,_n),Tr&&zl(Ee,bn),en;if(_n===null){for(;bn<Te.length;bn++)_n=lt(Ee,Te[bn],gt),_n!==null&&(ue=U(_n,ue,bn),mn===null?en=_n:mn.sibling=_n,mn=_n);return Tr&&zl(Ee,bn),en}for(_n=b(Ee,_n);bn<Te.length;bn++)ci=kt(_n,Ee,bn,Te[bn],gt),ci!==null&&(c&&ci.alternate!==null&&_n.delete(ci.key===null?bn:ci.key),ue=U(ci,ue,bn),mn===null?en=ci:mn.sibling=ci,mn=ci);return c&&_n.forEach(function(rl){return h(Ee,rl)}),Tr&&zl(Ee,bn),en}function Xt(Ee,ue,Te,gt){var en=Q(Te);if(typeof en!="function")throw Error(t(150));if(Te=en.call(Te),Te==null)throw Error(t(151));for(var mn=en=null,_n=ue,bn=ue=0,ci=null,Qn=Te.next();_n!==null&&!Qn.done;bn++,Qn=Te.next()){_n.index>bn?(ci=_n,_n=null):ci=_n.sibling;var rl=et(Ee,_n,Qn.value,gt);if(rl===null){_n===null&&(_n=ci);break}c&&_n&&rl.alternate===null&&h(Ee,_n),ue=U(rl,ue,bn),mn===null?en=rl:mn.sibling=rl,mn=rl,_n=ci}if(Qn.done)return _(Ee,_n),Tr&&zl(Ee,bn),en;if(_n===null){for(;!Qn.done;bn++,Qn=Te.next())Qn=lt(Ee,Qn.value,gt),Qn!==null&&(ue=U(Qn,ue,bn),mn===null?en=Qn:mn.sibling=Qn,mn=Qn);return Tr&&zl(Ee,bn),en}for(_n=b(Ee,_n);!Qn.done;bn++,Qn=Te.next())Qn=kt(_n,Ee,bn,Qn.value,gt),Qn!==null&&(c&&Qn.alternate!==null&&_n.delete(Qn.key===null?bn:Qn.key),ue=U(Qn,ue,bn),mn===null?en=Qn:mn.sibling=Qn,mn=Qn);return c&&_n.forEach(function(cL){return h(Ee,cL)}),Tr&&zl(Ee,bn),en}function Hr(Ee,ue,Te,gt){if(typeof Te=="object"&&Te!==null&&Te.type===O&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case L:e:{for(var en=Te.key,mn=ue;mn!==null;){if(mn.key===en){if(en=Te.type,en===O){if(mn.tag===7){_(Ee,mn.sibling),ue=w(mn,Te.props.children),ue.return=Ee,Ee=ue;break e}}else if(mn.elementType===en||typeof en=="object"&&en!==null&&en.$$typeof===K&&Qb(en)===mn.type){_(Ee,mn.sibling),ue=w(mn,Te.props),ue.ref=Od(Ee,mn,Te),ue.return=Ee,Ee=ue;break e}_(Ee,mn);break}else h(Ee,mn);mn=mn.sibling}Te.type===O?(ue=Xl(Te.props.children,Ee.mode,gt,Te.key),ue.return=Ee,Ee=ue):(gt=hv(Te.type,Te.key,Te.props,null,Ee.mode,gt),gt.ref=Od(Ee,ue,Te),gt.return=Ee,Ee=gt)}return q(Ee);case D:e:{for(mn=Te.key;ue!==null;){if(ue.key===mn)if(ue.tag===4&&ue.stateNode.containerInfo===Te.containerInfo&&ue.stateNode.implementation===Te.implementation){_(Ee,ue.sibling),ue=w(ue,Te.children||[]),ue.return=Ee,Ee=ue;break e}else{_(Ee,ue);break}else h(Ee,ue);ue=ue.sibling}ue=r_(Te,Ee.mode,gt),ue.return=Ee,Ee=ue}return q(Ee);case K:return mn=Te._init,Hr(Ee,ue,mn(Te._payload),gt)}if(tt(Te))return $t(Ee,ue,Te,gt);if(Q(Te))return Xt(Ee,ue,Te,gt);Vf(Ee,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"?(Te=""+Te,ue!==null&&ue.tag===6?(_(Ee,ue.sibling),ue=w(ue,Te),ue.return=Ee,Ee=ue):(_(Ee,ue),ue=n_(Te,Ee.mode,gt),ue.return=Ee,Ee=ue),q(Ee)):_(Ee,ue)}return Hr}var pc=Yb(!0),Xb=Yb(!1),zf=Ko(null),jf=null,mc=null,h0=null;function f0(){h0=mc=jf=null}function v0(c){var h=zf.current;Er(zf),c._currentValue=h}function p0(c,h,_){for(;c!==null;){var b=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,b!==null&&(b.childLanes|=h)):b!==null&&(b.childLanes&h)!==h&&(b.childLanes|=h),c===_)break;c=c.return}}function _c(c,h){jf=c,h0=mc=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&h&&(aa=!0),c.firstContext=null)}function za(c){var h=c._currentValue;if(h0!==c)if(c={context:c,memoizedValue:h,next:null},mc===null){if(jf===null)throw Error(t(308));mc=c,jf.dependencies={lanes:0,firstContext:c}}else mc=mc.next=c;return h}var jl=null;function m0(c){jl===null?jl=[c]:jl.push(c)}function Zb(c,h,_,b){var w=h.interleaved;return w===null?(_.next=_,m0(h)):(_.next=w.next,w.next=_),h.interleaved=_,lo(c,b)}function lo(c,h){c.lanes|=h;var _=c.alternate;for(_!==null&&(_.lanes|=h),_=c,c=c.return;c!==null;)c.childLanes|=h,_=c.alternate,_!==null&&(_.childLanes|=h),_=c,c=c.return;return _.tag===3?_.stateNode:null}var Qo=!1;function _0(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jb(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function uo(c,h){return{eventTime:c,lane:h,tag:0,payload:null,callback:null,next:null}}function Yo(c,h,_){var b=c.updateQueue;if(b===null)return null;if(b=b.shared,Kn&2){var w=b.pending;return w===null?h.next=h:(h.next=w.next,w.next=h),b.pending=h,lo(c,_)}return w=b.interleaved,w===null?(h.next=h,m0(b)):(h.next=w.next,w.next=h),b.interleaved=h,lo(c,_)}function qf(c,h,_){if(h=h.updateQueue,h!==null&&(h=h.shared,(_&4194240)!==0)){var b=h.lanes;b&=c.pendingLanes,_|=b,h.lanes=_,Go(c,_)}}function eS(c,h){var _=c.updateQueue,b=c.alternate;if(b!==null&&(b=b.updateQueue,_===b)){var w=null,U=null;if(_=_.firstBaseUpdate,_!==null){do{var q={eventTime:_.eventTime,lane:_.lane,tag:_.tag,payload:_.payload,callback:_.callback,next:null};U===null?w=U=q:U=U.next=q,_=_.next}while(_!==null);U===null?w=U=h:U=U.next=h}else w=U=h;_={baseState:b.baseState,firstBaseUpdate:w,lastBaseUpdate:U,shared:b.shared,effects:b.effects},c.updateQueue=_;return}c=_.lastBaseUpdate,c===null?_.firstBaseUpdate=h:c.next=h,_.lastBaseUpdate=h}function Kf(c,h,_,b){var w=c.updateQueue;Qo=!1;var U=w.firstBaseUpdate,q=w.lastBaseUpdate,re=w.shared.pending;if(re!==null){w.shared.pending=null;var oe=re,Oe=oe.next;oe.next=null,q===null?U=Oe:q.next=Oe,q=oe;var rt=c.alternate;rt!==null&&(rt=rt.updateQueue,re=rt.lastBaseUpdate,re!==q&&(re===null?rt.firstBaseUpdate=Oe:re.next=Oe,rt.lastBaseUpdate=oe))}if(U!==null){var lt=w.baseState;q=0,rt=Oe=oe=null,re=U;do{var et=re.lane,kt=re.eventTime;if((b&et)===et){rt!==null&&(rt=rt.next={eventTime:kt,lane:0,tag:re.tag,payload:re.payload,callback:re.callback,next:null});e:{var $t=c,Xt=re;switch(et=h,kt=_,Xt.tag){case 1:if($t=Xt.payload,typeof $t=="function"){lt=$t.call(kt,lt,et);break e}lt=$t;break e;case 3:$t.flags=$t.flags&-65537|128;case 0:if($t=Xt.payload,et=typeof $t=="function"?$t.call(kt,lt,et):$t,et==null)break e;lt=ne({},lt,et);break e;case 2:Qo=!0}}re.callback!==null&&re.lane!==0&&(c.flags|=64,et=w.effects,et===null?w.effects=[re]:et.push(re))}else kt={eventTime:kt,lane:et,tag:re.tag,payload:re.payload,callback:re.callback,next:null},rt===null?(Oe=rt=kt,oe=lt):rt=rt.next=kt,q|=et;if(re=re.next,re===null){if(re=w.shared.pending,re===null)break;et=re,re=et.next,et.next=null,w.lastBaseUpdate=et,w.shared.pending=null}}while(!0);if(rt===null&&(oe=lt),w.baseState=oe,w.firstBaseUpdate=Oe,w.lastBaseUpdate=rt,h=w.shared.interleaved,h!==null){w=h;do q|=w.lane,w=w.next;while(w!==h)}else U===null&&(w.shared.lanes=0);$l|=q,c.lanes=q,c.memoizedState=lt}}function tS(c,h,_){if(c=h.effects,h.effects=null,c!==null)for(h=0;h<c.length;h++){var b=c[h],w=b.callback;if(w!==null){if(b.callback=null,b=_,typeof w!="function")throw Error(t(191,w));w.call(b)}}}var Dd={},Ds=Ko(Dd),Ld=Ko(Dd),Ud=Ko(Dd);function ql(c){if(c===Dd)throw Error(t(174));return c}function g0(c,h){switch(vr(Ud,h),vr(Ld,c),vr(Ds,Dd),c=h.nodeType,c){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:Be(null,"");break;default:c=c===8?h.parentNode:h,h=c.namespaceURI||null,c=c.tagName,h=Be(h,c)}Er(Ds),vr(Ds,h)}function gc(){Er(Ds),Er(Ld),Er(Ud)}function nS(c){ql(Ud.current);var h=ql(Ds.current),_=Be(h,c.type);h!==_&&(vr(Ld,c),vr(Ds,_))}function E0(c){Ld.current===c&&(Er(Ds),Er(Ld))}var Or=Ko(0);function $f(c){for(var h=c;h!==null;){if(h.tag===13){var _=h.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||_.data==="$?"||_.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if(h.flags&128)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var y0=[];function C0(){for(var c=0;c<y0.length;c++)y0[c]._workInProgressVersionPrimary=null;y0.length=0}var Wf=I.ReactCurrentDispatcher,b0=I.ReactCurrentBatchConfig,Kl=0,Dr=null,Zr=null,li=null,Qf=!1,kd=!1,Pd=0,DD=0;function Pi(){throw Error(t(321))}function S0(c,h){if(h===null)return!1;for(var _=0;_<h.length&&_<c.length;_++)if(!ls(c[_],h[_]))return!1;return!0}function T0(c,h,_,b,w,U){if(Kl=U,Dr=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Wf.current=c===null||c.memoizedState===null?PD:xD,c=_(b,w),kd){U=0;do{if(kd=!1,Pd=0,25<=U)throw Error(t(301));U+=1,li=Zr=null,h.updateQueue=null,Wf.current=FD,c=_(b,w)}while(kd)}if(Wf.current=Zf,h=Zr!==null&&Zr.next!==null,Kl=0,li=Zr=Dr=null,Qf=!1,h)throw Error(t(300));return c}function N0(){var c=Pd!==0;return Pd=0,c}function Ls(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return li===null?Dr.memoizedState=li=c:li=li.next=c,li}function ja(){if(Zr===null){var c=Dr.alternate;c=c!==null?c.memoizedState:null}else c=Zr.next;var h=li===null?Dr.memoizedState:li.next;if(h!==null)li=h,Zr=c;else{if(c===null)throw Error(t(310));Zr=c,c={memoizedState:Zr.memoizedState,baseState:Zr.baseState,baseQueue:Zr.baseQueue,queue:Zr.queue,next:null},li===null?Dr.memoizedState=li=c:li=li.next=c}return li}function xd(c,h){return typeof h=="function"?h(c):h}function I0(c){var h=ja(),_=h.queue;if(_===null)throw Error(t(311));_.lastRenderedReducer=c;var b=Zr,w=b.baseQueue,U=_.pending;if(U!==null){if(w!==null){var q=w.next;w.next=U.next,U.next=q}b.baseQueue=w=U,_.pending=null}if(w!==null){U=w.next,b=b.baseState;var re=q=null,oe=null,Oe=U;do{var rt=Oe.lane;if((Kl&rt)===rt)oe!==null&&(oe=oe.next={lane:0,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null}),b=Oe.hasEagerState?Oe.eagerState:c(b,Oe.action);else{var lt={lane:rt,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null};oe===null?(re=oe=lt,q=b):oe=oe.next=lt,Dr.lanes|=rt,$l|=rt}Oe=Oe.next}while(Oe!==null&&Oe!==U);oe===null?q=b:oe.next=re,ls(b,h.memoizedState)||(aa=!0),h.memoizedState=b,h.baseState=q,h.baseQueue=oe,_.lastRenderedState=b}if(c=_.interleaved,c!==null){w=c;do U=w.lane,Dr.lanes|=U,$l|=U,w=w.next;while(w!==c)}else w===null&&(_.lanes=0);return[h.memoizedState,_.dispatch]}function M0(c){var h=ja(),_=h.queue;if(_===null)throw Error(t(311));_.lastRenderedReducer=c;var b=_.dispatch,w=_.pending,U=h.memoizedState;if(w!==null){_.pending=null;var q=w=w.next;do U=c(U,q.action),q=q.next;while(q!==w);ls(U,h.memoizedState)||(aa=!0),h.memoizedState=U,h.baseQueue===null&&(h.baseState=U),_.lastRenderedState=U}return[U,b]}function rS(){}function iS(c,h){var _=Dr,b=ja(),w=h(),U=!ls(b.memoizedState,w);if(U&&(b.memoizedState=w,aa=!0),b=b.queue,A0(oS.bind(null,_,b,c),[c]),b.getSnapshot!==h||U||li!==null&&li.memoizedState.tag&1){if(_.flags|=2048,Fd(9,sS.bind(null,_,b,w,h),void 0,null),ui===null)throw Error(t(349));Kl&30||aS(_,h,w)}return w}function aS(c,h,_){c.flags|=16384,c={getSnapshot:h,value:_},h=Dr.updateQueue,h===null?(h={lastEffect:null,stores:null},Dr.updateQueue=h,h.stores=[c]):(_=h.stores,_===null?h.stores=[c]:_.push(c))}function sS(c,h,_,b){h.value=_,h.getSnapshot=b,lS(h)&&uS(c)}function oS(c,h,_){return _(function(){lS(h)&&uS(c)})}function lS(c){var h=c.getSnapshot;c=c.value;try{var _=h();return!ls(c,_)}catch{return!0}}function uS(c){var h=lo(c,1);h!==null&&fs(h,c,1,-1)}function cS(c){var h=Ls();return typeof c=="function"&&(c=c()),h.memoizedState=h.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xd,lastRenderedState:c},h.queue=c,c=c.dispatch=kD.bind(null,Dr,c),[h.memoizedState,c]}function Fd(c,h,_,b){return c={tag:c,create:h,destroy:_,deps:b,next:null},h=Dr.updateQueue,h===null?(h={lastEffect:null,stores:null},Dr.updateQueue=h,h.lastEffect=c.next=c):(_=h.lastEffect,_===null?h.lastEffect=c.next=c:(b=_.next,_.next=c,c.next=b,h.lastEffect=c)),c}function dS(){return ja().memoizedState}function Yf(c,h,_,b){var w=Ls();Dr.flags|=c,w.memoizedState=Fd(1|h,_,void 0,b===void 0?null:b)}function Xf(c,h,_,b){var w=ja();b=b===void 0?null:b;var U=void 0;if(Zr!==null){var q=Zr.memoizedState;if(U=q.destroy,b!==null&&S0(b,q.deps)){w.memoizedState=Fd(h,_,U,b);return}}Dr.flags|=c,w.memoizedState=Fd(1|h,_,U,b)}function hS(c,h){return Yf(8390656,8,c,h)}function A0(c,h){return Xf(2048,8,c,h)}function fS(c,h){return Xf(4,2,c,h)}function vS(c,h){return Xf(4,4,c,h)}function pS(c,h){if(typeof h=="function")return c=c(),h(c),function(){h(null)};if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function mS(c,h,_){return _=_!=null?_.concat([c]):null,Xf(4,4,pS.bind(null,h,c),_)}function w0(){}function _S(c,h){var _=ja();h=h===void 0?null:h;var b=_.memoizedState;return b!==null&&h!==null&&S0(h,b[1])?b[0]:(_.memoizedState=[c,h],c)}function gS(c,h){var _=ja();h=h===void 0?null:h;var b=_.memoizedState;return b!==null&&h!==null&&S0(h,b[1])?b[0]:(c=c(),_.memoizedState=[c,h],c)}function ES(c,h,_){return Kl&21?(ls(_,h)||(_=vd(),Dr.lanes|=_,$l|=_,c.baseState=!0),h):(c.baseState&&(c.baseState=!1,aa=!0),c.memoizedState=_)}function LD(c,h){var _=qn;qn=_!==0&&4>_?_:4,c(!0);var b=b0.transition;b0.transition={};try{c(!1),h()}finally{qn=_,b0.transition=b}}function yS(){return ja().memoizedState}function UD(c,h,_){var b=el(c);if(_={lane:b,action:_,hasEagerState:!1,eagerState:null,next:null},CS(c))bS(h,_);else if(_=Zb(c,h,_,b),_!==null){var w=Ki();fs(_,c,b,w),SS(_,h,b)}}function kD(c,h,_){var b=el(c),w={lane:b,action:_,hasEagerState:!1,eagerState:null,next:null};if(CS(c))bS(h,w);else{var U=c.alternate;if(c.lanes===0&&(U===null||U.lanes===0)&&(U=h.lastRenderedReducer,U!==null))try{var q=h.lastRenderedState,re=U(q,_);if(w.hasEagerState=!0,w.eagerState=re,ls(re,q)){var oe=h.interleaved;oe===null?(w.next=w,m0(h)):(w.next=oe.next,oe.next=w),h.interleaved=w;return}}catch{}finally{}_=Zb(c,h,w,b),_!==null&&(w=Ki(),fs(_,c,b,w),SS(_,h,b))}}function CS(c){var h=c.alternate;return c===Dr||h!==null&&h===Dr}function bS(c,h){kd=Qf=!0;var _=c.pending;_===null?h.next=h:(h.next=_.next,_.next=h),c.pending=h}function SS(c,h,_){if(_&4194240){var b=h.lanes;b&=c.pendingLanes,_|=b,h.lanes=_,Go(c,_)}}var Zf={readContext:za,useCallback:Pi,useContext:Pi,useEffect:Pi,useImperativeHandle:Pi,useInsertionEffect:Pi,useLayoutEffect:Pi,useMemo:Pi,useReducer:Pi,useRef:Pi,useState:Pi,useDebugValue:Pi,useDeferredValue:Pi,useTransition:Pi,useMutableSource:Pi,useSyncExternalStore:Pi,useId:Pi,unstable_isNewReconciler:!1},PD={readContext:za,useCallback:function(c,h){return Ls().memoizedState=[c,h===void 0?null:h],c},useContext:za,useEffect:hS,useImperativeHandle:function(c,h,_){return _=_!=null?_.concat([c]):null,Yf(4194308,4,pS.bind(null,h,c),_)},useLayoutEffect:function(c,h){return Yf(4194308,4,c,h)},useInsertionEffect:function(c,h){return Yf(4,2,c,h)},useMemo:function(c,h){var _=Ls();return h=h===void 0?null:h,c=c(),_.memoizedState=[c,h],c},useReducer:function(c,h,_){var b=Ls();return h=_!==void 0?_(h):h,b.memoizedState=b.baseState=h,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:h},b.queue=c,c=c.dispatch=UD.bind(null,Dr,c),[b.memoizedState,c]},useRef:function(c){var h=Ls();return c={current:c},h.memoizedState=c},useState:cS,useDebugValue:w0,useDeferredValue:function(c){return Ls().memoizedState=c},useTransition:function(){var c=cS(!1),h=c[0];return c=LD.bind(null,c[1]),Ls().memoizedState=c,[h,c]},useMutableSource:function(){},useSyncExternalStore:function(c,h,_){var b=Dr,w=Ls();if(Tr){if(_===void 0)throw Error(t(407));_=_()}else{if(_=h(),ui===null)throw Error(t(349));Kl&30||aS(b,h,_)}w.memoizedState=_;var U={value:_,getSnapshot:h};return w.queue=U,hS(oS.bind(null,b,U,c),[c]),b.flags|=2048,Fd(9,sS.bind(null,b,U,_,h),void 0,null),_},useId:function(){var c=Ls(),h=ui.identifierPrefix;if(Tr){var _=oo,b=so;_=(b&~(1<<32-Sr(b)-1)).toString(32)+_,h=":"+h+"R"+_,_=Pd++,0<_&&(h+="H"+_.toString(32)),h+=":"}else _=DD++,h=":"+h+"r"+_.toString(32)+":";return c.memoizedState=h},unstable_isNewReconciler:!1},xD={readContext:za,useCallback:_S,useContext:za,useEffect:A0,useImperativeHandle:mS,useInsertionEffect:fS,useLayoutEffect:vS,useMemo:gS,useReducer:I0,useRef:dS,useState:function(){return I0(xd)},useDebugValue:w0,useDeferredValue:function(c){var h=ja();return ES(h,Zr.memoizedState,c)},useTransition:function(){var c=I0(xd)[0],h=ja().memoizedState;return[c,h]},useMutableSource:rS,useSyncExternalStore:iS,useId:yS,unstable_isNewReconciler:!1},FD={readContext:za,useCallback:_S,useContext:za,useEffect:A0,useImperativeHandle:mS,useInsertionEffect:fS,useLayoutEffect:vS,useMemo:gS,useReducer:M0,useRef:dS,useState:function(){return M0(xd)},useDebugValue:w0,useDeferredValue:function(c){var h=ja();return Zr===null?h.memoizedState=c:ES(h,Zr.memoizedState,c)},useTransition:function(){var c=M0(xd)[0],h=ja().memoizedState;return[c,h]},useMutableSource:rS,useSyncExternalStore:iS,useId:yS,unstable_isNewReconciler:!1};function cs(c,h){if(c&&c.defaultProps){h=ne({},h),c=c.defaultProps;for(var _ in c)h[_]===void 0&&(h[_]=c[_]);return h}return h}function R0(c,h,_,b){h=c.memoizedState,_=_(b,h),_=_==null?h:ne({},h,_),c.memoizedState=_,c.lanes===0&&(c.updateQueue.baseState=_)}var Jf={isMounted:function(c){return(c=c._reactInternals)?zt(c)===c:!1},enqueueSetState:function(c,h,_){c=c._reactInternals;var b=Ki(),w=el(c),U=uo(b,w);U.payload=h,_!=null&&(U.callback=_),h=Yo(c,U,w),h!==null&&(fs(h,c,w,b),qf(h,c,w))},enqueueReplaceState:function(c,h,_){c=c._reactInternals;var b=Ki(),w=el(c),U=uo(b,w);U.tag=1,U.payload=h,_!=null&&(U.callback=_),h=Yo(c,U,w),h!==null&&(fs(h,c,w,b),qf(h,c,w))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var _=Ki(),b=el(c),w=uo(_,b);w.tag=2,h!=null&&(w.callback=h),h=Yo(c,w,b),h!==null&&(fs(h,c,b,_),qf(h,c,b))}};function TS(c,h,_,b,w,U,q){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(b,U,q):h.prototype&&h.prototype.isPureReactComponent?!Td(_,b)||!Td(w,U):!0}function NS(c,h,_){var b=!1,w=$o,U=h.contextType;return typeof U=="object"&&U!==null?U=za(U):(w=ia(h)?Gl:ki.current,b=h.contextTypes,U=(b=b!=null)?dc(c,w):$o),h=new h(_,U),c.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Jf,c.stateNode=h,h._reactInternals=c,b&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=w,c.__reactInternalMemoizedMaskedChildContext=U),h}function IS(c,h,_,b){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(_,b),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(_,b),h.state!==c&&Jf.enqueueReplaceState(h,h.state,null)}function O0(c,h,_,b){var w=c.stateNode;w.props=_,w.state=c.memoizedState,w.refs={},_0(c);var U=h.contextType;typeof U=="object"&&U!==null?w.context=za(U):(U=ia(h)?Gl:ki.current,w.context=dc(c,U)),w.state=c.memoizedState,U=h.getDerivedStateFromProps,typeof U=="function"&&(R0(c,h,U,_),w.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(h=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),h!==w.state&&Jf.enqueueReplaceState(w,w.state,null),Kf(c,_,w,b),w.state=c.memoizedState),typeof w.componentDidMount=="function"&&(c.flags|=4194308)}function Ec(c,h){try{var _="",b=h;do _+=te(b),b=b.return;while(b);var w=_}catch(U){w=`
Error generating stack: `+U.message+`
`+U.stack}return{value:c,source:h,stack:w,digest:null}}function D0(c,h,_){return{value:c,source:null,stack:_??null,digest:h??null}}function L0(c,h){try{console.error(h.value)}catch(_){setTimeout(function(){throw _})}}var HD=typeof WeakMap=="function"?WeakMap:Map;function MS(c,h,_){_=uo(-1,_),_.tag=3,_.payload={element:null};var b=h.value;return _.callback=function(){sv||(sv=!0,W0=b),L0(c,h)},_}function AS(c,h,_){_=uo(-1,_),_.tag=3;var b=c.type.getDerivedStateFromError;if(typeof b=="function"){var w=h.value;_.payload=function(){return b(w)},_.callback=function(){L0(c,h)}}var U=c.stateNode;return U!==null&&typeof U.componentDidCatch=="function"&&(_.callback=function(){L0(c,h),typeof b!="function"&&(Zo===null?Zo=new Set([this]):Zo.add(this));var q=h.stack;this.componentDidCatch(h.value,{componentStack:q!==null?q:""})}),_}function wS(c,h,_){var b=c.pingCache;if(b===null){b=c.pingCache=new HD;var w=new Set;b.set(h,w)}else w=b.get(h),w===void 0&&(w=new Set,b.set(h,w));w.has(_)||(w.add(_),c=JD.bind(null,c,h,_),h.then(c,c))}function RS(c){do{var h;if((h=c.tag===13)&&(h=c.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return c;c=c.return}while(c!==null);return null}function OS(c,h,_,b,w){return c.mode&1?(c.flags|=65536,c.lanes=w,c):(c===h?c.flags|=65536:(c.flags|=128,_.flags|=131072,_.flags&=-52805,_.tag===1&&(_.alternate===null?_.tag=17:(h=uo(-1,1),h.tag=2,Yo(_,h,1))),_.lanes|=1),c)}var BD=I.ReactCurrentOwner,aa=!1;function qi(c,h,_,b){h.child=c===null?Xb(h,null,_,b):pc(h,c.child,_,b)}function DS(c,h,_,b,w){_=_.render;var U=h.ref;return _c(h,w),b=T0(c,h,_,b,U,w),_=N0(),c!==null&&!aa?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~w,co(c,h,w)):(Tr&&_&&o0(h),h.flags|=1,qi(c,h,b,w),h.child)}function LS(c,h,_,b,w){if(c===null){var U=_.type;return typeof U=="function"&&!t_(U)&&U.defaultProps===void 0&&_.compare===null&&_.defaultProps===void 0?(h.tag=15,h.type=U,US(c,h,U,b,w)):(c=hv(_.type,null,b,h,h.mode,w),c.ref=h.ref,c.return=h,h.child=c)}if(U=c.child,!(c.lanes&w)){var q=U.memoizedProps;if(_=_.compare,_=_!==null?_:Td,_(q,b)&&c.ref===h.ref)return co(c,h,w)}return h.flags|=1,c=nl(U,b),c.ref=h.ref,c.return=h,h.child=c}function US(c,h,_,b,w){if(c!==null){var U=c.memoizedProps;if(Td(U,b)&&c.ref===h.ref)if(aa=!1,h.pendingProps=b=U,(c.lanes&w)!==0)c.flags&131072&&(aa=!0);else return h.lanes=c.lanes,co(c,h,w)}return U0(c,h,_,b,w)}function kS(c,h,_){var b=h.pendingProps,w=b.children,U=c!==null?c.memoizedState:null;if(b.mode==="hidden")if(!(h.mode&1))h.memoizedState={baseLanes:0,cachePool:null,transitions:null},vr(Cc,ya),ya|=_;else{if(!(_&1073741824))return c=U!==null?U.baseLanes|_:_,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:c,cachePool:null,transitions:null},h.updateQueue=null,vr(Cc,ya),ya|=c,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=U!==null?U.baseLanes:_,vr(Cc,ya),ya|=b}else U!==null?(b=U.baseLanes|_,h.memoizedState=null):b=_,vr(Cc,ya),ya|=b;return qi(c,h,w,_),h.child}function PS(c,h){var _=h.ref;(c===null&&_!==null||c!==null&&c.ref!==_)&&(h.flags|=512,h.flags|=2097152)}function U0(c,h,_,b,w){var U=ia(_)?Gl:ki.current;return U=dc(h,U),_c(h,w),_=T0(c,h,_,b,U,w),b=N0(),c!==null&&!aa?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~w,co(c,h,w)):(Tr&&b&&o0(h),h.flags|=1,qi(c,h,_,w),h.child)}function xS(c,h,_,b,w){if(ia(_)){var U=!0;xf(h)}else U=!1;if(_c(h,w),h.stateNode===null)tv(c,h),NS(h,_,b),O0(h,_,b,w),b=!0;else if(c===null){var q=h.stateNode,re=h.memoizedProps;q.props=re;var oe=q.context,Oe=_.contextType;typeof Oe=="object"&&Oe!==null?Oe=za(Oe):(Oe=ia(_)?Gl:ki.current,Oe=dc(h,Oe));var rt=_.getDerivedStateFromProps,lt=typeof rt=="function"||typeof q.getSnapshotBeforeUpdate=="function";lt||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(re!==b||oe!==Oe)&&IS(h,q,b,Oe),Qo=!1;var et=h.memoizedState;q.state=et,Kf(h,b,q,w),oe=h.memoizedState,re!==b||et!==oe||ra.current||Qo?(typeof rt=="function"&&(R0(h,_,rt,b),oe=h.memoizedState),(re=Qo||TS(h,_,re,b,et,oe,Oe))?(lt||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(h.flags|=4194308)):(typeof q.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=b,h.memoizedState=oe),q.props=b,q.state=oe,q.context=Oe,b=re):(typeof q.componentDidMount=="function"&&(h.flags|=4194308),b=!1)}else{q=h.stateNode,Jb(c,h),re=h.memoizedProps,Oe=h.type===h.elementType?re:cs(h.type,re),q.props=Oe,lt=h.pendingProps,et=q.context,oe=_.contextType,typeof oe=="object"&&oe!==null?oe=za(oe):(oe=ia(_)?Gl:ki.current,oe=dc(h,oe));var kt=_.getDerivedStateFromProps;(rt=typeof kt=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(re!==lt||et!==oe)&&IS(h,q,b,oe),Qo=!1,et=h.memoizedState,q.state=et,Kf(h,b,q,w);var $t=h.memoizedState;re!==lt||et!==$t||ra.current||Qo?(typeof kt=="function"&&(R0(h,_,kt,b),$t=h.memoizedState),(Oe=Qo||TS(h,_,Oe,b,et,$t,oe)||!1)?(rt||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(b,$t,oe),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(b,$t,oe)),typeof q.componentDidUpdate=="function"&&(h.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof q.componentDidUpdate!="function"||re===c.memoizedProps&&et===c.memoizedState||(h.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||re===c.memoizedProps&&et===c.memoizedState||(h.flags|=1024),h.memoizedProps=b,h.memoizedState=$t),q.props=b,q.state=$t,q.context=oe,b=Oe):(typeof q.componentDidUpdate!="function"||re===c.memoizedProps&&et===c.memoizedState||(h.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||re===c.memoizedProps&&et===c.memoizedState||(h.flags|=1024),b=!1)}return k0(c,h,_,b,U,w)}function k0(c,h,_,b,w,U){PS(c,h);var q=(h.flags&128)!==0;if(!b&&!q)return w&&Vb(h,_,!1),co(c,h,U);b=h.stateNode,BD.current=h;var re=q&&typeof _.getDerivedStateFromError!="function"?null:b.render();return h.flags|=1,c!==null&&q?(h.child=pc(h,c.child,null,U),h.child=pc(h,null,re,U)):qi(c,h,re,U),h.memoizedState=b.state,w&&Vb(h,_,!0),h.child}function FS(c){var h=c.stateNode;h.pendingContext?Bb(c,h.pendingContext,h.pendingContext!==h.context):h.context&&Bb(c,h.context,!1),g0(c,h.containerInfo)}function HS(c,h,_,b,w){return vc(),d0(w),h.flags|=256,qi(c,h,_,b),h.child}var P0={dehydrated:null,treeContext:null,retryLane:0};function x0(c){return{baseLanes:c,cachePool:null,transitions:null}}function BS(c,h,_){var b=h.pendingProps,w=Or.current,U=!1,q=(h.flags&128)!==0,re;if((re=q)||(re=c!==null&&c.memoizedState===null?!1:(w&2)!==0),re?(U=!0,h.flags&=-129):(c===null||c.memoizedState!==null)&&(w|=1),vr(Or,w&1),c===null)return c0(h),c=h.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(h.mode&1?c.data==="$!"?h.lanes=8:h.lanes=1073741824:h.lanes=1,null):(q=b.children,c=b.fallback,U?(b=h.mode,U=h.child,q={mode:"hidden",children:q},!(b&1)&&U!==null?(U.childLanes=0,U.pendingProps=q):U=fv(q,b,0,null),c=Xl(c,b,_,null),U.return=h,c.return=h,U.sibling=c,h.child=U,h.child.memoizedState=x0(_),h.memoizedState=P0,c):F0(h,q));if(w=c.memoizedState,w!==null&&(re=w.dehydrated,re!==null))return GD(c,h,q,b,re,w,_);if(U){U=b.fallback,q=h.mode,w=c.child,re=w.sibling;var oe={mode:"hidden",children:b.children};return!(q&1)&&h.child!==w?(b=h.child,b.childLanes=0,b.pendingProps=oe,h.deletions=null):(b=nl(w,oe),b.subtreeFlags=w.subtreeFlags&14680064),re!==null?U=nl(re,U):(U=Xl(U,q,_,null),U.flags|=2),U.return=h,b.return=h,b.sibling=U,h.child=b,b=U,U=h.child,q=c.child.memoizedState,q=q===null?x0(_):{baseLanes:q.baseLanes|_,cachePool:null,transitions:q.transitions},U.memoizedState=q,U.childLanes=c.childLanes&~_,h.memoizedState=P0,b}return U=c.child,c=U.sibling,b=nl(U,{mode:"visible",children:b.children}),!(h.mode&1)&&(b.lanes=_),b.return=h,b.sibling=null,c!==null&&(_=h.deletions,_===null?(h.deletions=[c],h.flags|=16):_.push(c)),h.child=b,h.memoizedState=null,b}function F0(c,h){return h=fv({mode:"visible",children:h},c.mode,0,null),h.return=c,c.child=h}function ev(c,h,_,b){return b!==null&&d0(b),pc(h,c.child,null,_),c=F0(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function GD(c,h,_,b,w,U,q){if(_)return h.flags&256?(h.flags&=-257,b=D0(Error(t(422))),ev(c,h,q,b)):h.memoizedState!==null?(h.child=c.child,h.flags|=128,null):(U=b.fallback,w=h.mode,b=fv({mode:"visible",children:b.children},w,0,null),U=Xl(U,w,q,null),U.flags|=2,b.return=h,U.return=h,b.sibling=U,h.child=b,h.mode&1&&pc(h,c.child,null,q),h.child.memoizedState=x0(q),h.memoizedState=P0,U);if(!(h.mode&1))return ev(c,h,q,null);if(w.data==="$!"){if(b=w.nextSibling&&w.nextSibling.dataset,b)var re=b.dgst;return b=re,U=Error(t(419)),b=D0(U,b,void 0),ev(c,h,q,b)}if(re=(q&c.childLanes)!==0,aa||re){if(b=ui,b!==null){switch(q&-q){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=w&(b.suspendedLanes|q)?0:w,w!==0&&w!==U.retryLane&&(U.retryLane=w,lo(c,w),fs(b,c,w,-1))}return e_(),b=D0(Error(t(421))),ev(c,h,q,b)}return w.data==="$?"?(h.flags|=128,h.child=c.child,h=eL.bind(null,c),w._reactRetry=h,null):(c=U.treeContext,Ea=qo(w.nextSibling),ga=h,Tr=!0,us=null,c!==null&&(Ga[Va++]=so,Ga[Va++]=oo,Ga[Va++]=Vl,so=c.id,oo=c.overflow,Vl=h),h=F0(h,b.children),h.flags|=4096,h)}function GS(c,h,_){c.lanes|=h;var b=c.alternate;b!==null&&(b.lanes|=h),p0(c.return,h,_)}function H0(c,h,_,b,w){var U=c.memoizedState;U===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:b,tail:_,tailMode:w}:(U.isBackwards=h,U.rendering=null,U.renderingStartTime=0,U.last=b,U.tail=_,U.tailMode=w)}function VS(c,h,_){var b=h.pendingProps,w=b.revealOrder,U=b.tail;if(qi(c,h,b.children,_),b=Or.current,b&2)b=b&1|2,h.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&GS(c,_,h);else if(c.tag===19)GS(c,_,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}b&=1}if(vr(Or,b),!(h.mode&1))h.memoizedState=null;else switch(w){case"forwards":for(_=h.child,w=null;_!==null;)c=_.alternate,c!==null&&$f(c)===null&&(w=_),_=_.sibling;_=w,_===null?(w=h.child,h.child=null):(w=_.sibling,_.sibling=null),H0(h,!1,w,_,U);break;case"backwards":for(_=null,w=h.child,h.child=null;w!==null;){if(c=w.alternate,c!==null&&$f(c)===null){h.child=w;break}c=w.sibling,w.sibling=_,_=w,w=c}H0(h,!0,_,null,U);break;case"together":H0(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function tv(c,h){!(h.mode&1)&&c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2)}function co(c,h,_){if(c!==null&&(h.dependencies=c.dependencies),$l|=h.lanes,!(_&h.childLanes))return null;if(c!==null&&h.child!==c.child)throw Error(t(153));if(h.child!==null){for(c=h.child,_=nl(c,c.pendingProps),h.child=_,_.return=h;c.sibling!==null;)c=c.sibling,_=_.sibling=nl(c,c.pendingProps),_.return=h;_.sibling=null}return h.child}function VD(c,h,_){switch(h.tag){case 3:FS(h),vc();break;case 5:nS(h);break;case 1:ia(h.type)&&xf(h);break;case 4:g0(h,h.stateNode.containerInfo);break;case 10:var b=h.type._context,w=h.memoizedProps.value;vr(zf,b._currentValue),b._currentValue=w;break;case 13:if(b=h.memoizedState,b!==null)return b.dehydrated!==null?(vr(Or,Or.current&1),h.flags|=128,null):_&h.child.childLanes?BS(c,h,_):(vr(Or,Or.current&1),c=co(c,h,_),c!==null?c.sibling:null);vr(Or,Or.current&1);break;case 19:if(b=(_&h.childLanes)!==0,c.flags&128){if(b)return VS(c,h,_);h.flags|=128}if(w=h.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),vr(Or,Or.current),b)break;return null;case 22:case 23:return h.lanes=0,kS(c,h,_)}return co(c,h,_)}var zS,B0,jS,qS;zS=function(c,h){for(var _=h.child;_!==null;){if(_.tag===5||_.tag===6)c.appendChild(_.stateNode);else if(_.tag!==4&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===h)break;for(;_.sibling===null;){if(_.return===null||_.return===h)return;_=_.return}_.sibling.return=_.return,_=_.sibling}},B0=function(){},jS=function(c,h,_,b){var w=c.memoizedProps;if(w!==b){c=h.stateNode,ql(Ds.current);var U=null;switch(_){case"input":w=me(c,w),b=me(c,b),U=[];break;case"select":w=ne({},w,{value:void 0}),b=ne({},b,{value:void 0}),U=[];break;case"textarea":w=Ye(c,w),b=Ye(c,b),U=[];break;default:typeof w.onClick!="function"&&typeof b.onClick=="function"&&(c.onclick=Uf)}Pt(_,b);var q;_=null;for(Oe in w)if(!b.hasOwnProperty(Oe)&&w.hasOwnProperty(Oe)&&w[Oe]!=null)if(Oe==="style"){var re=w[Oe];for(q in re)re.hasOwnProperty(q)&&(_||(_={}),_[q]="")}else Oe!=="dangerouslySetInnerHTML"&&Oe!=="children"&&Oe!=="suppressContentEditableWarning"&&Oe!=="suppressHydrationWarning"&&Oe!=="autoFocus"&&(i.hasOwnProperty(Oe)?U||(U=[]):(U=U||[]).push(Oe,null));for(Oe in b){var oe=b[Oe];if(re=w!=null?w[Oe]:void 0,b.hasOwnProperty(Oe)&&oe!==re&&(oe!=null||re!=null))if(Oe==="style")if(re){for(q in re)!re.hasOwnProperty(q)||oe&&oe.hasOwnProperty(q)||(_||(_={}),_[q]="");for(q in oe)oe.hasOwnProperty(q)&&re[q]!==oe[q]&&(_||(_={}),_[q]=oe[q])}else _||(U||(U=[]),U.push(Oe,_)),_=oe;else Oe==="dangerouslySetInnerHTML"?(oe=oe?oe.__html:void 0,re=re?re.__html:void 0,oe!=null&&re!==oe&&(U=U||[]).push(Oe,oe)):Oe==="children"?typeof oe!="string"&&typeof oe!="number"||(U=U||[]).push(Oe,""+oe):Oe!=="suppressContentEditableWarning"&&Oe!=="suppressHydrationWarning"&&(i.hasOwnProperty(Oe)?(oe!=null&&Oe==="onScroll"&&gr("scroll",c),U||re===oe||(U=[])):(U=U||[]).push(Oe,oe))}_&&(U=U||[]).push("style",_);var Oe=U;(h.updateQueue=Oe)&&(h.flags|=4)}},qS=function(c,h,_,b){_!==b&&(h.flags|=4)};function Hd(c,h){if(!Tr)switch(c.tailMode){case"hidden":h=c.tail;for(var _=null;h!==null;)h.alternate!==null&&(_=h),h=h.sibling;_===null?c.tail=null:_.sibling=null;break;case"collapsed":_=c.tail;for(var b=null;_!==null;)_.alternate!==null&&(b=_),_=_.sibling;b===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:b.sibling=null}}function xi(c){var h=c.alternate!==null&&c.alternate.child===c.child,_=0,b=0;if(h)for(var w=c.child;w!==null;)_|=w.lanes|w.childLanes,b|=w.subtreeFlags&14680064,b|=w.flags&14680064,w.return=c,w=w.sibling;else for(w=c.child;w!==null;)_|=w.lanes|w.childLanes,b|=w.subtreeFlags,b|=w.flags,w.return=c,w=w.sibling;return c.subtreeFlags|=b,c.childLanes=_,h}function zD(c,h,_){var b=h.pendingProps;switch(l0(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xi(h),null;case 1:return ia(h.type)&&Pf(),xi(h),null;case 3:return b=h.stateNode,gc(),Er(ra),Er(ki),C0(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(c===null||c.child===null)&&(Gf(h)?h.flags|=4:c===null||c.memoizedState.isDehydrated&&!(h.flags&256)||(h.flags|=1024,us!==null&&(X0(us),us=null))),B0(c,h),xi(h),null;case 5:E0(h);var w=ql(Ud.current);if(_=h.type,c!==null&&h.stateNode!=null)jS(c,h,_,b,w),c.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!b){if(h.stateNode===null)throw Error(t(166));return xi(h),null}if(c=ql(Ds.current),Gf(h)){b=h.stateNode,_=h.type;var U=h.memoizedProps;switch(b[Os]=h,b[wd]=U,c=(h.mode&1)!==0,_){case"dialog":gr("cancel",b),gr("close",b);break;case"iframe":case"object":case"embed":gr("load",b);break;case"video":case"audio":for(w=0;w<Id.length;w++)gr(Id[w],b);break;case"source":gr("error",b);break;case"img":case"image":case"link":gr("error",b),gr("load",b);break;case"details":gr("toggle",b);break;case"input":Le(b,U),gr("invalid",b);break;case"select":b._wrapperState={wasMultiple:!!U.multiple},gr("invalid",b);break;case"textarea":yt(b,U),gr("invalid",b)}Pt(_,U),w=null;for(var q in U)if(U.hasOwnProperty(q)){var re=U[q];q==="children"?typeof re=="string"?b.textContent!==re&&(U.suppressHydrationWarning!==!0&&Lf(b.textContent,re,c),w=["children",re]):typeof re=="number"&&b.textContent!==""+re&&(U.suppressHydrationWarning!==!0&&Lf(b.textContent,re,c),w=["children",""+re]):i.hasOwnProperty(q)&&re!=null&&q==="onScroll"&&gr("scroll",b)}switch(_){case"input":Ne(b),Ge(b,U,!0);break;case"textarea":Ne(b),Rt(b);break;case"select":case"option":break;default:typeof U.onClick=="function"&&(b.onclick=Uf)}b=w,h.updateQueue=b,b!==null&&(h.flags|=4)}else{q=w.nodeType===9?w:w.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=st(_)),c==="http://www.w3.org/1999/xhtml"?_==="script"?(c=q.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof b.is=="string"?c=q.createElement(_,{is:b.is}):(c=q.createElement(_),_==="select"&&(q=c,b.multiple?q.multiple=!0:b.size&&(q.size=b.size))):c=q.createElementNS(c,_),c[Os]=h,c[wd]=b,zS(c,h,!1,!1),h.stateNode=c;e:{switch(q=Ht(_,b),_){case"dialog":gr("cancel",c),gr("close",c),w=b;break;case"iframe":case"object":case"embed":gr("load",c),w=b;break;case"video":case"audio":for(w=0;w<Id.length;w++)gr(Id[w],c);w=b;break;case"source":gr("error",c),w=b;break;case"img":case"image":case"link":gr("error",c),gr("load",c),w=b;break;case"details":gr("toggle",c),w=b;break;case"input":Le(c,b),w=me(c,b),gr("invalid",c);break;case"option":w=b;break;case"select":c._wrapperState={wasMultiple:!!b.multiple},w=ne({},b,{value:void 0}),gr("invalid",c);break;case"textarea":yt(c,b),w=Ye(c,b),gr("invalid",c);break;default:w=b}Pt(_,w),re=w;for(U in re)if(re.hasOwnProperty(U)){var oe=re[U];U==="style"?pt(c,oe):U==="dangerouslySetInnerHTML"?(oe=oe?oe.__html:void 0,oe!=null&&qe(c,oe)):U==="children"?typeof oe=="string"?(_!=="textarea"||oe!=="")&&rn(c,oe):typeof oe=="number"&&rn(c,""+oe):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(i.hasOwnProperty(U)?oe!=null&&U==="onScroll"&&gr("scroll",c):oe!=null&&T(c,U,oe,q))}switch(_){case"input":Ne(c),Ge(c,b,!1);break;case"textarea":Ne(c),Rt(c);break;case"option":b.value!=null&&c.setAttribute("value",""+ae(b.value));break;case"select":c.multiple=!!b.multiple,U=b.value,U!=null?Ue(c,!!b.multiple,U,!1):b.defaultValue!=null&&Ue(c,!!b.multiple,b.defaultValue,!0);break;default:typeof w.onClick=="function"&&(c.onclick=Uf)}switch(_){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}}b&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return xi(h),null;case 6:if(c&&h.stateNode!=null)qS(c,h,c.memoizedProps,b);else{if(typeof b!="string"&&h.stateNode===null)throw Error(t(166));if(_=ql(Ud.current),ql(Ds.current),Gf(h)){if(b=h.stateNode,_=h.memoizedProps,b[Os]=h,(U=b.nodeValue!==_)&&(c=ga,c!==null))switch(c.tag){case 3:Lf(b.nodeValue,_,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&Lf(b.nodeValue,_,(c.mode&1)!==0)}U&&(h.flags|=4)}else b=(_.nodeType===9?_:_.ownerDocument).createTextNode(b),b[Os]=h,h.stateNode=b}return xi(h),null;case 13:if(Er(Or),b=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(Tr&&Ea!==null&&h.mode&1&&!(h.flags&128))Wb(),vc(),h.flags|=98560,U=!1;else if(U=Gf(h),b!==null&&b.dehydrated!==null){if(c===null){if(!U)throw Error(t(318));if(U=h.memoizedState,U=U!==null?U.dehydrated:null,!U)throw Error(t(317));U[Os]=h}else vc(),!(h.flags&128)&&(h.memoizedState=null),h.flags|=4;xi(h),U=!1}else us!==null&&(X0(us),us=null),U=!0;if(!U)return h.flags&65536?h:null}return h.flags&128?(h.lanes=_,h):(b=b!==null,b!==(c!==null&&c.memoizedState!==null)&&b&&(h.child.flags|=8192,h.mode&1&&(c===null||Or.current&1?Jr===0&&(Jr=3):e_())),h.updateQueue!==null&&(h.flags|=4),xi(h),null);case 4:return gc(),B0(c,h),c===null&&Md(h.stateNode.containerInfo),xi(h),null;case 10:return v0(h.type._context),xi(h),null;case 17:return ia(h.type)&&Pf(),xi(h),null;case 19:if(Er(Or),U=h.memoizedState,U===null)return xi(h),null;if(b=(h.flags&128)!==0,q=U.rendering,q===null)if(b)Hd(U,!1);else{if(Jr!==0||c!==null&&c.flags&128)for(c=h.child;c!==null;){if(q=$f(c),q!==null){for(h.flags|=128,Hd(U,!1),b=q.updateQueue,b!==null&&(h.updateQueue=b,h.flags|=4),h.subtreeFlags=0,b=_,_=h.child;_!==null;)U=_,c=b,U.flags&=14680066,q=U.alternate,q===null?(U.childLanes=0,U.lanes=c,U.child=null,U.subtreeFlags=0,U.memoizedProps=null,U.memoizedState=null,U.updateQueue=null,U.dependencies=null,U.stateNode=null):(U.childLanes=q.childLanes,U.lanes=q.lanes,U.child=q.child,U.subtreeFlags=0,U.deletions=null,U.memoizedProps=q.memoizedProps,U.memoizedState=q.memoizedState,U.updateQueue=q.updateQueue,U.type=q.type,c=q.dependencies,U.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),_=_.sibling;return vr(Or,Or.current&1|2),h.child}c=c.sibling}U.tail!==null&&sn()>bc&&(h.flags|=128,b=!0,Hd(U,!1),h.lanes=4194304)}else{if(!b)if(c=$f(q),c!==null){if(h.flags|=128,b=!0,_=c.updateQueue,_!==null&&(h.updateQueue=_,h.flags|=4),Hd(U,!0),U.tail===null&&U.tailMode==="hidden"&&!q.alternate&&!Tr)return xi(h),null}else 2*sn()-U.renderingStartTime>bc&&_!==1073741824&&(h.flags|=128,b=!0,Hd(U,!1),h.lanes=4194304);U.isBackwards?(q.sibling=h.child,h.child=q):(_=U.last,_!==null?_.sibling=q:h.child=q,U.last=q)}return U.tail!==null?(h=U.tail,U.rendering=h,U.tail=h.sibling,U.renderingStartTime=sn(),h.sibling=null,_=Or.current,vr(Or,b?_&1|2:_&1),h):(xi(h),null);case 22:case 23:return J0(),b=h.memoizedState!==null,c!==null&&c.memoizedState!==null!==b&&(h.flags|=8192),b&&h.mode&1?ya&1073741824&&(xi(h),h.subtreeFlags&6&&(h.flags|=8192)):xi(h),null;case 24:return null;case 25:return null}throw Error(t(156,h.tag))}function jD(c,h){switch(l0(h),h.tag){case 1:return ia(h.type)&&Pf(),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return gc(),Er(ra),Er(ki),C0(),c=h.flags,c&65536&&!(c&128)?(h.flags=c&-65537|128,h):null;case 5:return E0(h),null;case 13:if(Er(Or),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(t(340));vc()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return Er(Or),null;case 4:return gc(),null;case 10:return v0(h.type._context),null;case 22:case 23:return J0(),null;case 24:return null;default:return null}}var nv=!1,Fi=!1,qD=typeof WeakSet=="function"?WeakSet:Set,Vt=null;function yc(c,h){var _=c.ref;if(_!==null)if(typeof _=="function")try{_(null)}catch(b){kr(c,h,b)}else _.current=null}function G0(c,h,_){try{_()}catch(b){kr(c,h,b)}}var KS=!1;function KD(c,h){if(Jm=bf,c=Tb(),qm(c)){if("selectionStart"in c)var _={start:c.selectionStart,end:c.selectionEnd};else e:{_=(_=c.ownerDocument)&&_.defaultView||window;var b=_.getSelection&&_.getSelection();if(b&&b.rangeCount!==0){_=b.anchorNode;var w=b.anchorOffset,U=b.focusNode;b=b.focusOffset;try{_.nodeType,U.nodeType}catch{_=null;break e}var q=0,re=-1,oe=-1,Oe=0,rt=0,lt=c,et=null;t:for(;;){for(var kt;lt!==_||w!==0&&lt.nodeType!==3||(re=q+w),lt!==U||b!==0&&lt.nodeType!==3||(oe=q+b),lt.nodeType===3&&(q+=lt.nodeValue.length),(kt=lt.firstChild)!==null;)et=lt,lt=kt;for(;;){if(lt===c)break t;if(et===_&&++Oe===w&&(re=q),et===U&&++rt===b&&(oe=q),(kt=lt.nextSibling)!==null)break;lt=et,et=lt.parentNode}lt=kt}_=re===-1||oe===-1?null:{start:re,end:oe}}else _=null}_=_||{start:0,end:0}}else _=null;for(e0={focusedElem:c,selectionRange:_},bf=!1,Vt=h;Vt!==null;)if(h=Vt,c=h.child,(h.subtreeFlags&1028)!==0&&c!==null)c.return=h,Vt=c;else for(;Vt!==null;){h=Vt;try{var $t=h.alternate;if(h.flags&1024)switch(h.tag){case 0:case 11:case 15:break;case 1:if($t!==null){var Xt=$t.memoizedProps,Hr=$t.memoizedState,Ee=h.stateNode,ue=Ee.getSnapshotBeforeUpdate(h.elementType===h.type?Xt:cs(h.type,Xt),Hr);Ee.__reactInternalSnapshotBeforeUpdate=ue}break;case 3:var Te=h.stateNode.containerInfo;Te.nodeType===1?Te.textContent="":Te.nodeType===9&&Te.documentElement&&Te.removeChild(Te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(gt){kr(h,h.return,gt)}if(c=h.sibling,c!==null){c.return=h.return,Vt=c;break}Vt=h.return}return $t=KS,KS=!1,$t}function Bd(c,h,_){var b=h.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var w=b=b.next;do{if((w.tag&c)===c){var U=w.destroy;w.destroy=void 0,U!==void 0&&G0(h,_,U)}w=w.next}while(w!==b)}}function rv(c,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var _=h=h.next;do{if((_.tag&c)===c){var b=_.create;_.destroy=b()}_=_.next}while(_!==h)}}function V0(c){var h=c.ref;if(h!==null){var _=c.stateNode;switch(c.tag){case 5:c=_;break;default:c=_}typeof h=="function"?h(c):h.current=c}}function $S(c){var h=c.alternate;h!==null&&(c.alternate=null,$S(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&(delete h[Os],delete h[wd],delete h[i0],delete h[AD],delete h[wD])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function WS(c){return c.tag===5||c.tag===3||c.tag===4}function QS(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||WS(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function z0(c,h,_){var b=c.tag;if(b===5||b===6)c=c.stateNode,h?_.nodeType===8?_.parentNode.insertBefore(c,h):_.insertBefore(c,h):(_.nodeType===8?(h=_.parentNode,h.insertBefore(c,_)):(h=_,h.appendChild(c)),_=_._reactRootContainer,_!=null||h.onclick!==null||(h.onclick=Uf));else if(b!==4&&(c=c.child,c!==null))for(z0(c,h,_),c=c.sibling;c!==null;)z0(c,h,_),c=c.sibling}function j0(c,h,_){var b=c.tag;if(b===5||b===6)c=c.stateNode,h?_.insertBefore(c,h):_.appendChild(c);else if(b!==4&&(c=c.child,c!==null))for(j0(c,h,_),c=c.sibling;c!==null;)j0(c,h,_),c=c.sibling}var Ci=null,ds=!1;function Xo(c,h,_){for(_=_.child;_!==null;)YS(c,h,_),_=_.sibling}function YS(c,h,_){if(br&&typeof br.onCommitFiberUnmount=="function")try{br.onCommitFiberUnmount(on,_)}catch{}switch(_.tag){case 5:Fi||yc(_,h);case 6:var b=Ci,w=ds;Ci=null,Xo(c,h,_),Ci=b,ds=w,Ci!==null&&(ds?(c=Ci,_=_.stateNode,c.nodeType===8?c.parentNode.removeChild(_):c.removeChild(_)):Ci.removeChild(_.stateNode));break;case 18:Ci!==null&&(ds?(c=Ci,_=_.stateNode,c.nodeType===8?r0(c.parentNode,_):c.nodeType===1&&r0(c,_),gd(c)):r0(Ci,_.stateNode));break;case 4:b=Ci,w=ds,Ci=_.stateNode.containerInfo,ds=!0,Xo(c,h,_),Ci=b,ds=w;break;case 0:case 11:case 14:case 15:if(!Fi&&(b=_.updateQueue,b!==null&&(b=b.lastEffect,b!==null))){w=b=b.next;do{var U=w,q=U.destroy;U=U.tag,q!==void 0&&(U&2||U&4)&&G0(_,h,q),w=w.next}while(w!==b)}Xo(c,h,_);break;case 1:if(!Fi&&(yc(_,h),b=_.stateNode,typeof b.componentWillUnmount=="function"))try{b.props=_.memoizedProps,b.state=_.memoizedState,b.componentWillUnmount()}catch(re){kr(_,h,re)}Xo(c,h,_);break;case 21:Xo(c,h,_);break;case 22:_.mode&1?(Fi=(b=Fi)||_.memoizedState!==null,Xo(c,h,_),Fi=b):Xo(c,h,_);break;default:Xo(c,h,_)}}function XS(c){var h=c.updateQueue;if(h!==null){c.updateQueue=null;var _=c.stateNode;_===null&&(_=c.stateNode=new qD),h.forEach(function(b){var w=tL.bind(null,c,b);_.has(b)||(_.add(b),b.then(w,w))})}}function hs(c,h){var _=h.deletions;if(_!==null)for(var b=0;b<_.length;b++){var w=_[b];try{var U=c,q=h,re=q;e:for(;re!==null;){switch(re.tag){case 5:Ci=re.stateNode,ds=!1;break e;case 3:Ci=re.stateNode.containerInfo,ds=!0;break e;case 4:Ci=re.stateNode.containerInfo,ds=!0;break e}re=re.return}if(Ci===null)throw Error(t(160));YS(U,q,w),Ci=null,ds=!1;var oe=w.alternate;oe!==null&&(oe.return=null),w.return=null}catch(Oe){kr(w,h,Oe)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)ZS(h,c),h=h.sibling}function ZS(c,h){var _=c.alternate,b=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(hs(h,c),Us(c),b&4){try{Bd(3,c,c.return),rv(3,c)}catch(Xt){kr(c,c.return,Xt)}try{Bd(5,c,c.return)}catch(Xt){kr(c,c.return,Xt)}}break;case 1:hs(h,c),Us(c),b&512&&_!==null&&yc(_,_.return);break;case 5:if(hs(h,c),Us(c),b&512&&_!==null&&yc(_,_.return),c.flags&32){var w=c.stateNode;try{rn(w,"")}catch(Xt){kr(c,c.return,Xt)}}if(b&4&&(w=c.stateNode,w!=null)){var U=c.memoizedProps,q=_!==null?_.memoizedProps:U,re=c.type,oe=c.updateQueue;if(c.updateQueue=null,oe!==null)try{re==="input"&&U.type==="radio"&&U.name!=null&&Qe(w,U),Ht(re,q);var Oe=Ht(re,U);for(q=0;q<oe.length;q+=2){var rt=oe[q],lt=oe[q+1];rt==="style"?pt(w,lt):rt==="dangerouslySetInnerHTML"?qe(w,lt):rt==="children"?rn(w,lt):T(w,rt,lt,Oe)}switch(re){case"input":Pe(w,U);break;case"textarea":Nt(w,U);break;case"select":var et=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!U.multiple;var kt=U.value;kt!=null?Ue(w,!!U.multiple,kt,!1):et!==!!U.multiple&&(U.defaultValue!=null?Ue(w,!!U.multiple,U.defaultValue,!0):Ue(w,!!U.multiple,U.multiple?[]:"",!1))}w[wd]=U}catch(Xt){kr(c,c.return,Xt)}}break;case 6:if(hs(h,c),Us(c),b&4){if(c.stateNode===null)throw Error(t(162));w=c.stateNode,U=c.memoizedProps;try{w.nodeValue=U}catch(Xt){kr(c,c.return,Xt)}}break;case 3:if(hs(h,c),Us(c),b&4&&_!==null&&_.memoizedState.isDehydrated)try{gd(h.containerInfo)}catch(Xt){kr(c,c.return,Xt)}break;case 4:hs(h,c),Us(c);break;case 13:hs(h,c),Us(c),w=c.child,w.flags&8192&&(U=w.memoizedState!==null,w.stateNode.isHidden=U,!U||w.alternate!==null&&w.alternate.memoizedState!==null||($0=sn())),b&4&&XS(c);break;case 22:if(rt=_!==null&&_.memoizedState!==null,c.mode&1?(Fi=(Oe=Fi)||rt,hs(h,c),Fi=Oe):hs(h,c),Us(c),b&8192){if(Oe=c.memoizedState!==null,(c.stateNode.isHidden=Oe)&&!rt&&c.mode&1)for(Vt=c,rt=c.child;rt!==null;){for(lt=Vt=rt;Vt!==null;){switch(et=Vt,kt=et.child,et.tag){case 0:case 11:case 14:case 15:Bd(4,et,et.return);break;case 1:yc(et,et.return);var $t=et.stateNode;if(typeof $t.componentWillUnmount=="function"){b=et,_=et.return;try{h=b,$t.props=h.memoizedProps,$t.state=h.memoizedState,$t.componentWillUnmount()}catch(Xt){kr(b,_,Xt)}}break;case 5:yc(et,et.return);break;case 22:if(et.memoizedState!==null){t1(lt);continue}}kt!==null?(kt.return=et,Vt=kt):t1(lt)}rt=rt.sibling}e:for(rt=null,lt=c;;){if(lt.tag===5){if(rt===null){rt=lt;try{w=lt.stateNode,Oe?(U=w.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none"):(re=lt.stateNode,oe=lt.memoizedProps.style,q=oe!=null&&oe.hasOwnProperty("display")?oe.display:null,re.style.display=Je("display",q))}catch(Xt){kr(c,c.return,Xt)}}}else if(lt.tag===6){if(rt===null)try{lt.stateNode.nodeValue=Oe?"":lt.memoizedProps}catch(Xt){kr(c,c.return,Xt)}}else if((lt.tag!==22&&lt.tag!==23||lt.memoizedState===null||lt===c)&&lt.child!==null){lt.child.return=lt,lt=lt.child;continue}if(lt===c)break e;for(;lt.sibling===null;){if(lt.return===null||lt.return===c)break e;rt===lt&&(rt=null),lt=lt.return}rt===lt&&(rt=null),lt.sibling.return=lt.return,lt=lt.sibling}}break;case 19:hs(h,c),Us(c),b&4&&XS(c);break;case 21:break;default:hs(h,c),Us(c)}}function Us(c){var h=c.flags;if(h&2){try{e:{for(var _=c.return;_!==null;){if(WS(_)){var b=_;break e}_=_.return}throw Error(t(160))}switch(b.tag){case 5:var w=b.stateNode;b.flags&32&&(rn(w,""),b.flags&=-33);var U=QS(c);j0(c,U,w);break;case 3:case 4:var q=b.stateNode.containerInfo,re=QS(c);z0(c,re,q);break;default:throw Error(t(161))}}catch(oe){kr(c,c.return,oe)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function $D(c,h,_){Vt=c,JS(c)}function JS(c,h,_){for(var b=(c.mode&1)!==0;Vt!==null;){var w=Vt,U=w.child;if(w.tag===22&&b){var q=w.memoizedState!==null||nv;if(!q){var re=w.alternate,oe=re!==null&&re.memoizedState!==null||Fi;re=nv;var Oe=Fi;if(nv=q,(Fi=oe)&&!Oe)for(Vt=w;Vt!==null;)q=Vt,oe=q.child,q.tag===22&&q.memoizedState!==null?n1(w):oe!==null?(oe.return=q,Vt=oe):n1(w);for(;U!==null;)Vt=U,JS(U),U=U.sibling;Vt=w,nv=re,Fi=Oe}e1(c)}else w.subtreeFlags&8772&&U!==null?(U.return=w,Vt=U):e1(c)}}function e1(c){for(;Vt!==null;){var h=Vt;if(h.flags&8772){var _=h.alternate;try{if(h.flags&8772)switch(h.tag){case 0:case 11:case 15:Fi||rv(5,h);break;case 1:var b=h.stateNode;if(h.flags&4&&!Fi)if(_===null)b.componentDidMount();else{var w=h.elementType===h.type?_.memoizedProps:cs(h.type,_.memoizedProps);b.componentDidUpdate(w,_.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var U=h.updateQueue;U!==null&&tS(h,U,b);break;case 3:var q=h.updateQueue;if(q!==null){if(_=null,h.child!==null)switch(h.child.tag){case 5:_=h.child.stateNode;break;case 1:_=h.child.stateNode}tS(h,q,_)}break;case 5:var re=h.stateNode;if(_===null&&h.flags&4){_=re;var oe=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":oe.autoFocus&&_.focus();break;case"img":oe.src&&(_.src=oe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var Oe=h.alternate;if(Oe!==null){var rt=Oe.memoizedState;if(rt!==null){var lt=rt.dehydrated;lt!==null&&gd(lt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Fi||h.flags&512&&V0(h)}catch(et){kr(h,h.return,et)}}if(h===c){Vt=null;break}if(_=h.sibling,_!==null){_.return=h.return,Vt=_;break}Vt=h.return}}function t1(c){for(;Vt!==null;){var h=Vt;if(h===c){Vt=null;break}var _=h.sibling;if(_!==null){_.return=h.return,Vt=_;break}Vt=h.return}}function n1(c){for(;Vt!==null;){var h=Vt;try{switch(h.tag){case 0:case 11:case 15:var _=h.return;try{rv(4,h)}catch(oe){kr(h,_,oe)}break;case 1:var b=h.stateNode;if(typeof b.componentDidMount=="function"){var w=h.return;try{b.componentDidMount()}catch(oe){kr(h,w,oe)}}var U=h.return;try{V0(h)}catch(oe){kr(h,U,oe)}break;case 5:var q=h.return;try{V0(h)}catch(oe){kr(h,q,oe)}}}catch(oe){kr(h,h.return,oe)}if(h===c){Vt=null;break}var re=h.sibling;if(re!==null){re.return=h.return,Vt=re;break}Vt=h.return}}var WD=Math.ceil,iv=I.ReactCurrentDispatcher,q0=I.ReactCurrentOwner,qa=I.ReactCurrentBatchConfig,Kn=0,ui=null,Wr=null,bi=0,ya=0,Cc=Ko(0),Jr=0,Gd=null,$l=0,av=0,K0=0,Vd=null,sa=null,$0=0,bc=1/0,ho=null,sv=!1,W0=null,Zo=null,ov=!1,Jo=null,lv=0,zd=0,Q0=null,uv=-1,cv=0;function Ki(){return Kn&6?sn():uv!==-1?uv:uv=sn()}function el(c){return c.mode&1?Kn&2&&bi!==0?bi&-bi:OD.transition!==null?(cv===0&&(cv=vd()),cv):(c=qn,c!==0||(c=window.event,c=c===void 0?16:ib(c.type)),c):1}function fs(c,h,_,b){if(50<zd)throw zd=0,Q0=null,Error(t(185));ro(c,_,b),(!(Kn&2)||c!==ui)&&(c===ui&&(!(Kn&2)&&(av|=_),Jr===4&&tl(c,bi)),oa(c,b),_===1&&Kn===0&&!(h.mode&1)&&(bc=sn()+500,Ff&&Wo()))}function oa(c,h){var _=c.callbackNode;fd(c,h);var b=ma(c,c===ui?bi:0);if(b===0)_!==null&&mt(_),c.callbackNode=null,c.callbackPriority=0;else if(h=b&-b,c.callbackPriority!==h){if(_!=null&&mt(_),h===1)c.tag===0?RD(i1.bind(null,c)):zb(i1.bind(null,c)),ID(function(){!(Kn&6)&&Wo()}),_=null;else{switch(Yu(b)){case 1:_=hr;break;case 4:_=fr;break;case 16:_=It;break;case 536870912:_=gn;break;default:_=It}_=h1(_,r1.bind(null,c))}c.callbackPriority=h,c.callbackNode=_}}function r1(c,h){if(uv=-1,cv=0,Kn&6)throw Error(t(327));var _=c.callbackNode;if(Sc()&&c.callbackNode!==_)return null;var b=ma(c,c===ui?bi:0);if(b===0)return null;if(b&30||b&c.expiredLanes||h)h=dv(c,b);else{h=b;var w=Kn;Kn|=2;var U=s1();(ui!==c||bi!==h)&&(ho=null,bc=sn()+500,Ql(c,h));do try{XD();break}catch(re){a1(c,re)}while(!0);f0(),iv.current=U,Kn=w,Wr!==null?h=0:(ui=null,bi=0,h=Jr)}if(h!==0){if(h===2&&(w=Qu(c),w!==0&&(b=w,h=Y0(c,w))),h===1)throw _=Gd,Ql(c,0),tl(c,b),oa(c,sn()),_;if(h===6)tl(c,b);else{if(w=c.current.alternate,!(b&30)&&!QD(w)&&(h=dv(c,b),h===2&&(U=Qu(c),U!==0&&(b=U,h=Y0(c,U))),h===1))throw _=Gd,Ql(c,0),tl(c,b),oa(c,sn()),_;switch(c.finishedWork=w,c.finishedLanes=b,h){case 0:case 1:throw Error(t(345));case 2:Yl(c,sa,ho);break;case 3:if(tl(c,b),(b&130023424)===b&&(h=$0+500-sn(),10<h)){if(ma(c,0)!==0)break;if(w=c.suspendedLanes,(w&b)!==b){Ki(),c.pingedLanes|=c.suspendedLanes&w;break}c.timeoutHandle=n0(Yl.bind(null,c,sa,ho),h);break}Yl(c,sa,ho);break;case 4:if(tl(c,b),(b&4194240)===b)break;for(h=c.eventTimes,w=-1;0<b;){var q=31-Sr(b);U=1<<q,q=h[q],q>w&&(w=q),b&=~U}if(b=w,b=sn()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*WD(b/1960))-b,10<b){c.timeoutHandle=n0(Yl.bind(null,c,sa,ho),b);break}Yl(c,sa,ho);break;case 5:Yl(c,sa,ho);break;default:throw Error(t(329))}}}return oa(c,sn()),c.callbackNode===_?r1.bind(null,c):null}function Y0(c,h){var _=Vd;return c.current.memoizedState.isDehydrated&&(Ql(c,h).flags|=256),c=dv(c,h),c!==2&&(h=sa,sa=_,h!==null&&X0(h)),c}function X0(c){sa===null?sa=c:sa.push.apply(sa,c)}function QD(c){for(var h=c;;){if(h.flags&16384){var _=h.updateQueue;if(_!==null&&(_=_.stores,_!==null))for(var b=0;b<_.length;b++){var w=_[b],U=w.getSnapshot;w=w.value;try{if(!ls(U(),w))return!1}catch{return!1}}}if(_=h.child,h.subtreeFlags&16384&&_!==null)_.return=h,h=_;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function tl(c,h){for(h&=~K0,h&=~av,c.suspendedLanes|=h,c.pingedLanes&=~h,c=c.expirationTimes;0<h;){var _=31-Sr(h),b=1<<_;c[_]=-1,h&=~b}}function i1(c){if(Kn&6)throw Error(t(327));Sc();var h=ma(c,0);if(!(h&1))return oa(c,sn()),null;var _=dv(c,h);if(c.tag!==0&&_===2){var b=Qu(c);b!==0&&(h=b,_=Y0(c,b))}if(_===1)throw _=Gd,Ql(c,0),tl(c,h),oa(c,sn()),_;if(_===6)throw Error(t(345));return c.finishedWork=c.current.alternate,c.finishedLanes=h,Yl(c,sa,ho),oa(c,sn()),null}function Z0(c,h){var _=Kn;Kn|=1;try{return c(h)}finally{Kn=_,Kn===0&&(bc=sn()+500,Ff&&Wo())}}function Wl(c){Jo!==null&&Jo.tag===0&&!(Kn&6)&&Sc();var h=Kn;Kn|=1;var _=qa.transition,b=qn;try{if(qa.transition=null,qn=1,c)return c()}finally{qn=b,qa.transition=_,Kn=h,!(Kn&6)&&Wo()}}function J0(){ya=Cc.current,Er(Cc)}function Ql(c,h){c.finishedWork=null,c.finishedLanes=0;var _=c.timeoutHandle;if(_!==-1&&(c.timeoutHandle=-1,ND(_)),Wr!==null)for(_=Wr.return;_!==null;){var b=_;switch(l0(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&Pf();break;case 3:gc(),Er(ra),Er(ki),C0();break;case 5:E0(b);break;case 4:gc();break;case 13:Er(Or);break;case 19:Er(Or);break;case 10:v0(b.type._context);break;case 22:case 23:J0()}_=_.return}if(ui=c,Wr=c=nl(c.current,null),bi=ya=h,Jr=0,Gd=null,K0=av=$l=0,sa=Vd=null,jl!==null){for(h=0;h<jl.length;h++)if(_=jl[h],b=_.interleaved,b!==null){_.interleaved=null;var w=b.next,U=_.pending;if(U!==null){var q=U.next;U.next=w,b.next=q}_.pending=b}jl=null}return c}function a1(c,h){do{var _=Wr;try{if(f0(),Wf.current=Zf,Qf){for(var b=Dr.memoizedState;b!==null;){var w=b.queue;w!==null&&(w.pending=null),b=b.next}Qf=!1}if(Kl=0,li=Zr=Dr=null,kd=!1,Pd=0,q0.current=null,_===null||_.return===null){Jr=1,Gd=h,Wr=null;break}e:{var U=c,q=_.return,re=_,oe=h;if(h=bi,re.flags|=32768,oe!==null&&typeof oe=="object"&&typeof oe.then=="function"){var Oe=oe,rt=re,lt=rt.tag;if(!(rt.mode&1)&&(lt===0||lt===11||lt===15)){var et=rt.alternate;et?(rt.updateQueue=et.updateQueue,rt.memoizedState=et.memoizedState,rt.lanes=et.lanes):(rt.updateQueue=null,rt.memoizedState=null)}var kt=RS(q);if(kt!==null){kt.flags&=-257,OS(kt,q,re,U,h),kt.mode&1&&wS(U,Oe,h),h=kt,oe=Oe;var $t=h.updateQueue;if($t===null){var Xt=new Set;Xt.add(oe),h.updateQueue=Xt}else $t.add(oe);break e}else{if(!(h&1)){wS(U,Oe,h),e_();break e}oe=Error(t(426))}}else if(Tr&&re.mode&1){var Hr=RS(q);if(Hr!==null){!(Hr.flags&65536)&&(Hr.flags|=256),OS(Hr,q,re,U,h),d0(Ec(oe,re));break e}}U=oe=Ec(oe,re),Jr!==4&&(Jr=2),Vd===null?Vd=[U]:Vd.push(U),U=q;do{switch(U.tag){case 3:U.flags|=65536,h&=-h,U.lanes|=h;var Ee=MS(U,oe,h);eS(U,Ee);break e;case 1:re=oe;var ue=U.type,Te=U.stateNode;if(!(U.flags&128)&&(typeof ue.getDerivedStateFromError=="function"||Te!==null&&typeof Te.componentDidCatch=="function"&&(Zo===null||!Zo.has(Te)))){U.flags|=65536,h&=-h,U.lanes|=h;var gt=AS(U,re,h);eS(U,gt);break e}}U=U.return}while(U!==null)}l1(_)}catch(en){h=en,Wr===_&&_!==null&&(Wr=_=_.return);continue}break}while(!0)}function s1(){var c=iv.current;return iv.current=Zf,c===null?Zf:c}function e_(){(Jr===0||Jr===3||Jr===2)&&(Jr=4),ui===null||!($l&268435455)&&!(av&268435455)||tl(ui,bi)}function dv(c,h){var _=Kn;Kn|=2;var b=s1();(ui!==c||bi!==h)&&(ho=null,Ql(c,h));do try{YD();break}catch(w){a1(c,w)}while(!0);if(f0(),Kn=_,iv.current=b,Wr!==null)throw Error(t(261));return ui=null,bi=0,Jr}function YD(){for(;Wr!==null;)o1(Wr)}function XD(){for(;Wr!==null&&!vn();)o1(Wr)}function o1(c){var h=d1(c.alternate,c,ya);c.memoizedProps=c.pendingProps,h===null?l1(c):Wr=h,q0.current=null}function l1(c){var h=c;do{var _=h.alternate;if(c=h.return,h.flags&32768){if(_=jD(_,h),_!==null){_.flags&=32767,Wr=_;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Jr=6,Wr=null;return}}else if(_=zD(_,h,ya),_!==null){Wr=_;return}if(h=h.sibling,h!==null){Wr=h;return}Wr=h=c}while(h!==null);Jr===0&&(Jr=5)}function Yl(c,h,_){var b=qn,w=qa.transition;try{qa.transition=null,qn=1,ZD(c,h,_,b)}finally{qa.transition=w,qn=b}return null}function ZD(c,h,_,b){do Sc();while(Jo!==null);if(Kn&6)throw Error(t(327));_=c.finishedWork;var w=c.finishedLanes;if(_===null)return null;if(c.finishedWork=null,c.finishedLanes=0,_===c.current)throw Error(t(177));c.callbackNode=null,c.callbackPriority=0;var U=_.lanes|_.childLanes;if(pd(c,U),c===ui&&(Wr=ui=null,bi=0),!(_.subtreeFlags&2064)&&!(_.flags&2064)||ov||(ov=!0,h1(It,function(){return Sc(),null})),U=(_.flags&15990)!==0,_.subtreeFlags&15990||U){U=qa.transition,qa.transition=null;var q=qn;qn=1;var re=Kn;Kn|=4,q0.current=null,KD(c,_),ZS(_,c),gD(e0),bf=!!Jm,e0=Jm=null,c.current=_,$D(_),Sn(),Kn=re,qn=q,qa.transition=U}else c.current=_;if(ov&&(ov=!1,Jo=c,lv=w),U=c.pendingLanes,U===0&&(Zo=null),oi(_.stateNode),oa(c,sn()),h!==null)for(b=c.onRecoverableError,_=0;_<h.length;_++)w=h[_],b(w.value,{componentStack:w.stack,digest:w.digest});if(sv)throw sv=!1,c=W0,W0=null,c;return lv&1&&c.tag!==0&&Sc(),U=c.pendingLanes,U&1?c===Q0?zd++:(zd=0,Q0=c):zd=0,Wo(),null}function Sc(){if(Jo!==null){var c=Yu(lv),h=qa.transition,_=qn;try{if(qa.transition=null,qn=16>c?16:c,Jo===null)var b=!1;else{if(c=Jo,Jo=null,lv=0,Kn&6)throw Error(t(331));var w=Kn;for(Kn|=4,Vt=c.current;Vt!==null;){var U=Vt,q=U.child;if(Vt.flags&16){var re=U.deletions;if(re!==null){for(var oe=0;oe<re.length;oe++){var Oe=re[oe];for(Vt=Oe;Vt!==null;){var rt=Vt;switch(rt.tag){case 0:case 11:case 15:Bd(8,rt,U)}var lt=rt.child;if(lt!==null)lt.return=rt,Vt=lt;else for(;Vt!==null;){rt=Vt;var et=rt.sibling,kt=rt.return;if($S(rt),rt===Oe){Vt=null;break}if(et!==null){et.return=kt,Vt=et;break}Vt=kt}}}var $t=U.alternate;if($t!==null){var Xt=$t.child;if(Xt!==null){$t.child=null;do{var Hr=Xt.sibling;Xt.sibling=null,Xt=Hr}while(Xt!==null)}}Vt=U}}if(U.subtreeFlags&2064&&q!==null)q.return=U,Vt=q;else e:for(;Vt!==null;){if(U=Vt,U.flags&2048)switch(U.tag){case 0:case 11:case 15:Bd(9,U,U.return)}var Ee=U.sibling;if(Ee!==null){Ee.return=U.return,Vt=Ee;break e}Vt=U.return}}var ue=c.current;for(Vt=ue;Vt!==null;){q=Vt;var Te=q.child;if(q.subtreeFlags&2064&&Te!==null)Te.return=q,Vt=Te;else e:for(q=ue;Vt!==null;){if(re=Vt,re.flags&2048)try{switch(re.tag){case 0:case 11:case 15:rv(9,re)}}catch(en){kr(re,re.return,en)}if(re===q){Vt=null;break e}var gt=re.sibling;if(gt!==null){gt.return=re.return,Vt=gt;break e}Vt=re.return}}if(Kn=w,Wo(),br&&typeof br.onPostCommitFiberRoot=="function")try{br.onPostCommitFiberRoot(on,c)}catch{}b=!0}return b}finally{qn=_,qa.transition=h}}return!1}function u1(c,h,_){h=Ec(_,h),h=MS(c,h,1),c=Yo(c,h,1),h=Ki(),c!==null&&(ro(c,1,h),oa(c,h))}function kr(c,h,_){if(c.tag===3)u1(c,c,_);else for(;h!==null;){if(h.tag===3){u1(h,c,_);break}else if(h.tag===1){var b=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Zo===null||!Zo.has(b))){c=Ec(_,c),c=AS(h,c,1),h=Yo(h,c,1),c=Ki(),h!==null&&(ro(h,1,c),oa(h,c));break}}h=h.return}}function JD(c,h,_){var b=c.pingCache;b!==null&&b.delete(h),h=Ki(),c.pingedLanes|=c.suspendedLanes&_,ui===c&&(bi&_)===_&&(Jr===4||Jr===3&&(bi&130023424)===bi&&500>sn()-$0?Ql(c,0):K0|=_),oa(c,h)}function c1(c,h){h===0&&(c.mode&1?(h=Rs,Rs<<=1,!(Rs&130023424)&&(Rs=4194304)):h=1);var _=Ki();c=lo(c,h),c!==null&&(ro(c,h,_),oa(c,_))}function eL(c){var h=c.memoizedState,_=0;h!==null&&(_=h.retryLane),c1(c,_)}function tL(c,h){var _=0;switch(c.tag){case 13:var b=c.stateNode,w=c.memoizedState;w!==null&&(_=w.retryLane);break;case 19:b=c.stateNode;break;default:throw Error(t(314))}b!==null&&b.delete(h),c1(c,_)}var d1;d1=function(c,h,_){if(c!==null)if(c.memoizedProps!==h.pendingProps||ra.current)aa=!0;else{if(!(c.lanes&_)&&!(h.flags&128))return aa=!1,VD(c,h,_);aa=!!(c.flags&131072)}else aa=!1,Tr&&h.flags&1048576&&jb(h,Bf,h.index);switch(h.lanes=0,h.tag){case 2:var b=h.type;tv(c,h),c=h.pendingProps;var w=dc(h,ki.current);_c(h,_),w=T0(null,h,b,c,w,_);var U=N0();return h.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,ia(b)?(U=!0,xf(h)):U=!1,h.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,_0(h),w.updater=Jf,h.stateNode=w,w._reactInternals=h,O0(h,b,c,_),h=k0(null,h,b,!0,U,_)):(h.tag=0,Tr&&U&&o0(h),qi(null,h,w,_),h=h.child),h;case 16:b=h.elementType;e:{switch(tv(c,h),c=h.pendingProps,w=b._init,b=w(b._payload),h.type=b,w=h.tag=rL(b),c=cs(b,c),w){case 0:h=U0(null,h,b,c,_);break e;case 1:h=xS(null,h,b,c,_);break e;case 11:h=DS(null,h,b,c,_);break e;case 14:h=LS(null,h,b,cs(b.type,c),_);break e}throw Error(t(306,b,""))}return h;case 0:return b=h.type,w=h.pendingProps,w=h.elementType===b?w:cs(b,w),U0(c,h,b,w,_);case 1:return b=h.type,w=h.pendingProps,w=h.elementType===b?w:cs(b,w),xS(c,h,b,w,_);case 3:e:{if(FS(h),c===null)throw Error(t(387));b=h.pendingProps,U=h.memoizedState,w=U.element,Jb(c,h),Kf(h,b,null,_);var q=h.memoizedState;if(b=q.element,U.isDehydrated)if(U={element:b,isDehydrated:!1,cache:q.cache,pendingSuspenseBoundaries:q.pendingSuspenseBoundaries,transitions:q.transitions},h.updateQueue.baseState=U,h.memoizedState=U,h.flags&256){w=Ec(Error(t(423)),h),h=HS(c,h,b,_,w);break e}else if(b!==w){w=Ec(Error(t(424)),h),h=HS(c,h,b,_,w);break e}else for(Ea=qo(h.stateNode.containerInfo.firstChild),ga=h,Tr=!0,us=null,_=Xb(h,null,b,_),h.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling;else{if(vc(),b===w){h=co(c,h,_);break e}qi(c,h,b,_)}h=h.child}return h;case 5:return nS(h),c===null&&c0(h),b=h.type,w=h.pendingProps,U=c!==null?c.memoizedProps:null,q=w.children,t0(b,w)?q=null:U!==null&&t0(b,U)&&(h.flags|=32),PS(c,h),qi(c,h,q,_),h.child;case 6:return c===null&&c0(h),null;case 13:return BS(c,h,_);case 4:return g0(h,h.stateNode.containerInfo),b=h.pendingProps,c===null?h.child=pc(h,null,b,_):qi(c,h,b,_),h.child;case 11:return b=h.type,w=h.pendingProps,w=h.elementType===b?w:cs(b,w),DS(c,h,b,w,_);case 7:return qi(c,h,h.pendingProps,_),h.child;case 8:return qi(c,h,h.pendingProps.children,_),h.child;case 12:return qi(c,h,h.pendingProps.children,_),h.child;case 10:e:{if(b=h.type._context,w=h.pendingProps,U=h.memoizedProps,q=w.value,vr(zf,b._currentValue),b._currentValue=q,U!==null)if(ls(U.value,q)){if(U.children===w.children&&!ra.current){h=co(c,h,_);break e}}else for(U=h.child,U!==null&&(U.return=h);U!==null;){var re=U.dependencies;if(re!==null){q=U.child;for(var oe=re.firstContext;oe!==null;){if(oe.context===b){if(U.tag===1){oe=uo(-1,_&-_),oe.tag=2;var Oe=U.updateQueue;if(Oe!==null){Oe=Oe.shared;var rt=Oe.pending;rt===null?oe.next=oe:(oe.next=rt.next,rt.next=oe),Oe.pending=oe}}U.lanes|=_,oe=U.alternate,oe!==null&&(oe.lanes|=_),p0(U.return,_,h),re.lanes|=_;break}oe=oe.next}}else if(U.tag===10)q=U.type===h.type?null:U.child;else if(U.tag===18){if(q=U.return,q===null)throw Error(t(341));q.lanes|=_,re=q.alternate,re!==null&&(re.lanes|=_),p0(q,_,h),q=U.sibling}else q=U.child;if(q!==null)q.return=U;else for(q=U;q!==null;){if(q===h){q=null;break}if(U=q.sibling,U!==null){U.return=q.return,q=U;break}q=q.return}U=q}qi(c,h,w.children,_),h=h.child}return h;case 9:return w=h.type,b=h.pendingProps.children,_c(h,_),w=za(w),b=b(w),h.flags|=1,qi(c,h,b,_),h.child;case 14:return b=h.type,w=cs(b,h.pendingProps),w=cs(b.type,w),LS(c,h,b,w,_);case 15:return US(c,h,h.type,h.pendingProps,_);case 17:return b=h.type,w=h.pendingProps,w=h.elementType===b?w:cs(b,w),tv(c,h),h.tag=1,ia(b)?(c=!0,xf(h)):c=!1,_c(h,_),NS(h,b,w),O0(h,b,w,_),k0(null,h,b,!0,c,_);case 19:return VS(c,h,_);case 22:return kS(c,h,_)}throw Error(t(156,h.tag))};function h1(c,h){return ze(c,h)}function nL(c,h,_,b){this.tag=c,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ka(c,h,_,b){return new nL(c,h,_,b)}function t_(c){return c=c.prototype,!(!c||!c.isReactComponent)}function rL(c){if(typeof c=="function")return t_(c)?1:0;if(c!=null){if(c=c.$$typeof,c===V)return 11;if(c===z)return 14}return 2}function nl(c,h){var _=c.alternate;return _===null?(_=Ka(c.tag,h,c.key,c.mode),_.elementType=c.elementType,_.type=c.type,_.stateNode=c.stateNode,_.alternate=c,c.alternate=_):(_.pendingProps=h,_.type=c.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=c.flags&14680064,_.childLanes=c.childLanes,_.lanes=c.lanes,_.child=c.child,_.memoizedProps=c.memoizedProps,_.memoizedState=c.memoizedState,_.updateQueue=c.updateQueue,h=c.dependencies,_.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},_.sibling=c.sibling,_.index=c.index,_.ref=c.ref,_}function hv(c,h,_,b,w,U){var q=2;if(b=c,typeof c=="function")t_(c)&&(q=1);else if(typeof c=="string")q=5;else e:switch(c){case O:return Xl(_.children,w,U,h);case R:q=8,w|=8;break;case k:return c=Ka(12,_,h,w|2),c.elementType=k,c.lanes=U,c;case H:return c=Ka(13,_,h,w),c.elementType=H,c.lanes=U,c;case F:return c=Ka(19,_,h,w),c.elementType=F,c.lanes=U,c;case ee:return fv(_,w,U,h);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case P:q=10;break e;case G:q=9;break e;case V:q=11;break e;case z:q=14;break e;case K:q=16,b=null;break e}throw Error(t(130,c==null?c:typeof c,""))}return h=Ka(q,_,h,w),h.elementType=c,h.type=b,h.lanes=U,h}function Xl(c,h,_,b){return c=Ka(7,c,b,h),c.lanes=_,c}function fv(c,h,_,b){return c=Ka(22,c,b,h),c.elementType=ee,c.lanes=_,c.stateNode={isHidden:!1},c}function n_(c,h,_){return c=Ka(6,c,null,h),c.lanes=_,c}function r_(c,h,_){return h=Ka(4,c.children!==null?c.children:[],c.key,h),h.lanes=_,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}function iL(c,h,_,b,w){this.tag=h,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hl(0),this.expirationTimes=Hl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hl(0),this.identifierPrefix=b,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function i_(c,h,_,b,w,U,q,re,oe){return c=new iL(c,h,_,re,oe),h===1?(h=1,U===!0&&(h|=8)):h=0,U=Ka(3,null,null,h),c.current=U,U.stateNode=c,U.memoizedState={element:b,isDehydrated:_,cache:null,transitions:null,pendingSuspenseBoundaries:null},_0(U),c}function aL(c,h,_){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:b==null?null:""+b,children:c,containerInfo:h,implementation:_}}function f1(c){if(!c)return $o;c=c._reactInternals;e:{if(zt(c)!==c||c.tag!==1)throw Error(t(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(ia(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(t(171))}if(c.tag===1){var _=c.type;if(ia(_))return Gb(c,_,h)}return h}function v1(c,h,_,b,w,U,q,re,oe){return c=i_(_,b,!0,c,w,U,q,re,oe),c.context=f1(null),_=c.current,b=Ki(),w=el(_),U=uo(b,w),U.callback=h??null,Yo(_,U,w),c.current.lanes=w,ro(c,w,b),oa(c,b),c}function vv(c,h,_,b){var w=h.current,U=Ki(),q=el(w);return _=f1(_),h.context===null?h.context=_:h.pendingContext=_,h=uo(U,q),h.payload={element:c},b=b===void 0?null:b,b!==null&&(h.callback=b),c=Yo(w,h,q),c!==null&&(fs(c,w,q,U),qf(c,w,q)),q}function pv(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function p1(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var _=c.retryLane;c.retryLane=_!==0&&_<h?_:h}}function a_(c,h){p1(c,h),(c=c.alternate)&&p1(c,h)}function sL(){return null}var m1=typeof reportError=="function"?reportError:function(c){console.error(c)};function s_(c){this._internalRoot=c}mv.prototype.render=s_.prototype.render=function(c){var h=this._internalRoot;if(h===null)throw Error(t(409));vv(c,h,null,null)},mv.prototype.unmount=s_.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var h=c.containerInfo;Wl(function(){vv(null,c,null,null)}),h[io]=null}};function mv(c){this._internalRoot=c}mv.prototype.unstable_scheduleHydration=function(c){if(c){var h=md();c={blockedOn:null,target:c,priority:h};for(var _=0;_<be.length&&h!==0&&h<be[_].priority;_++);be.splice(_,0,c),_===0&&tr(c)}};function o_(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function _v(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function _1(){}function oL(c,h,_,b,w){if(w){if(typeof b=="function"){var U=b;b=function(){var Oe=pv(q);U.call(Oe)}}var q=v1(h,b,c,0,null,!1,!1,"",_1);return c._reactRootContainer=q,c[io]=q.current,Md(c.nodeType===8?c.parentNode:c),Wl(),q}for(;w=c.lastChild;)c.removeChild(w);if(typeof b=="function"){var re=b;b=function(){var Oe=pv(oe);re.call(Oe)}}var oe=i_(c,0,!1,null,null,!1,!1,"",_1);return c._reactRootContainer=oe,c[io]=oe.current,Md(c.nodeType===8?c.parentNode:c),Wl(function(){vv(h,oe,_,b)}),oe}function gv(c,h,_,b,w){var U=_._reactRootContainer;if(U){var q=U;if(typeof w=="function"){var re=w;w=function(){var oe=pv(q);re.call(oe)}}vv(h,q,c,w)}else q=oL(_,h,c,w,b);return pv(q)}Xu=function(c){switch(c.tag){case 3:var h=c.stateNode;if(h.current.memoizedState.isDehydrated){var _=as(h.pendingLanes);_!==0&&(Go(h,_|1),oa(h,sn()),!(Kn&6)&&(bc=sn()+500,Wo()))}break;case 13:Wl(function(){var b=lo(c,1);if(b!==null){var w=Ki();fs(b,c,1,w)}}),a_(c,1)}},Zu=function(c){if(c.tag===13){var h=lo(c,134217728);if(h!==null){var _=Ki();fs(h,c,134217728,_)}a_(c,134217728)}},Ju=function(c){if(c.tag===13){var h=el(c),_=lo(c,h);if(_!==null){var b=Ki();fs(_,c,h,b)}a_(c,h)}},md=function(){return qn},ec=function(c,h){var _=qn;try{return qn=c,h()}finally{qn=_}},Lt=function(c,h,_){switch(h){case"input":if(Pe(c,_),h=_.name,_.type==="radio"&&h!=null){for(_=c;_.parentNode;)_=_.parentNode;for(_=_.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<_.length;h++){var b=_[h];if(b!==c&&b.form===c.form){var w=kf(b);if(!w)throw Error(t(90));_e(b),Pe(b,w)}}}break;case"textarea":Nt(c,_);break;case"select":h=_.value,h!=null&&Ue(c,!!_.multiple,h,!1)}},St=Z0,Ot=Wl;var lL={usingClientEntryPoint:!1,Events:[Rd,uc,kf,ye,Ze,Z0]},jd={findFiberByHostInstance:Bl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uL={bundleType:jd.bundleType,version:jd.version,rendererPackageName:jd.rendererPackageName,rendererConfig:jd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=ot(c),c===null?null:c.stateNode},findFiberByHostInstance:jd.findFiberByHostInstance||sL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ev=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ev.isDisabled&&Ev.supportsFiber)try{on=Ev.inject(uL),br=Ev}catch{}}return la.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lL,la.createPortal=function(c,h){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!o_(h))throw Error(t(200));return aL(c,h,null,_)},la.createRoot=function(c,h){if(!o_(c))throw Error(t(299));var _=!1,b="",w=m1;return h!=null&&(h.unstable_strictMode===!0&&(_=!0),h.identifierPrefix!==void 0&&(b=h.identifierPrefix),h.onRecoverableError!==void 0&&(w=h.onRecoverableError)),h=i_(c,1,!1,null,null,_,!1,b,w),c[io]=h.current,Md(c.nodeType===8?c.parentNode:c),new s_(h)},la.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(t(188)):(c=Object.keys(c).join(","),Error(t(268,c)));return c=ot(h),c=c===null?null:c.stateNode,c},la.flushSync=function(c){return Wl(c)},la.hydrate=function(c,h,_){if(!_v(h))throw Error(t(200));return gv(null,c,h,!0,_)},la.hydrateRoot=function(c,h,_){if(!o_(c))throw Error(t(405));var b=_!=null&&_.hydratedSources||null,w=!1,U="",q=m1;if(_!=null&&(_.unstable_strictMode===!0&&(w=!0),_.identifierPrefix!==void 0&&(U=_.identifierPrefix),_.onRecoverableError!==void 0&&(q=_.onRecoverableError)),h=v1(h,null,c,1,_??null,w,!1,U,q),c[io]=h.current,Md(c),b)for(c=0;c<b.length;c++)_=b[c],w=_._getVersion,w=w(_._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[_,w]:h.mutableSourceEagerHydrationData.push(_,w);return new mv(h)},la.render=function(c,h,_){if(!_v(h))throw Error(t(200));return gv(null,c,h,!1,_)},la.unmountComponentAtNode=function(c){if(!_v(c))throw Error(t(40));return c._reactRootContainer?(Wl(function(){gv(null,null,c,!1,function(){c._reactRootContainer=null,c[io]=null})}),!0):!1},la.unstable_batchedUpdates=Z0,la.unstable_renderSubtreeIntoContainer=function(c,h,_,b){if(!_v(_))throw Error(t(200));if(c==null||c._reactInternals===void 0)throw Error(t(38));return gv(c,h,_,!1,b)},la.version="18.3.1-next-f1338f8080-20240426",la}var N1;function gA(){if(N1)return c_.exports;N1=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),c_.exports=_L(),c_.exports}var I1;function gL(){if(I1)return yv;I1=1;var e=gA();return yv.createRoot=e.createRoot,yv.hydrateRoot=e.hydrateRoot,yv}var EL=gL(),vg=function(e,n){return vg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},vg(e,n)};function EA(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");vg(e,n);function t(){this.constructor=e}e.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}var x=function(){return x=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},x.apply(this,arguments)};function Ty(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]]);return t}function Wt(e,n,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(d){try{u(r.next(d))}catch(f){s(f)}}function l(d){try{u(r.throw(d))}catch(f){s(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,l)}u((r=r.apply(e,n||[])).next())})}function Qt(e,n){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=o(0),s.throw=o(1),s.return=o(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(u){return function(d){return l([u,d])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){t.label=u[1];break}if(u[0]===6&&t.label<a[1]){t.label=a[1],a=u;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(u);break}a[2]&&t.ops.pop(),t.trys.pop();continue}u=n.call(e,t)}catch(d){u=[6,d],i=0}finally{r=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Ae(e,n,t){if(t||arguments.length===2)for(var r=0,i=n.length,a;r<i;r++)(a||!(r in n))&&(a||(a=Array.prototype.slice.call(n,0,r)),a[r]=n[r]);return e.concat(a||Array.prototype.slice.call(n))}const Kd={reactions:"reactions",message_search_v3:"message_search_v3",enable_og_tag:"enable_og_tag",enable_message_threading:"enable_message_threading",allow_broadcast_channel:"allow_broadcast_channel",allow_super_group_channel:"allow_super_group_channel"},yL={reactions:"reactions",moderation_group:"moderation_group",message_search_v3:"message_search_v3",data_export:"data_export",migration:"migration",delivery_receipt:"delivery_receipt",auto_thumbnail:"auto_thumbnail",image_moderation:"image_moderation",super_group_channel:"super_group_channel",announcement:"announcement",moderation_open:"moderation_open",desk:"desk",bot_interface:"bot_interface",auto_trans:"auto_trans"},CL="modulepreload",bL=function(e){return"/chat/"+e},M1={},Xv=function(n,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(t.map(l=>{if(l=bL(l),l in M1)return;M1[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":CL,u||(f.as="script"),f.crossOrigin="",f.href=l,o&&f.setAttribute("nonce",o),document.head.appendChild(f),u)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return n().catch(a)})};var pg=function(e,n){return pg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},pg(e,n)};function B(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=e}pg(e,n),e.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}var W=function(){return W=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},W.apply(this,arguments)};function SL(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]])}return t}function A(e,n,t,r){return new(t||(t=Promise))(function(i,a){function s(u){try{l(r.next(u))}catch(d){a(d)}}function o(u){try{l(r.throw(u))}catch(d){a(d)}}function l(u){var d;u.done?i(u.value):(d=u.value,d instanceof t?d:new t(function(f){f(d)})).then(s,o)}l((r=r.apply(e,[])).next())})}function M(e,n){var t,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=o(0),s.throw=o(1),s.return=o(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(l){return function(u){return function(d){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,d[0]&&(a=0)),a;)try{if(t=1,r&&(i=2&d[0]?r.return:d[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,d[1])).done)return i;switch(r=0,i&&(d=[2&d[0],i.value]),d[0]){case 0:case 1:i=d;break;case 4:return a.label++,{value:d[1],done:!1};case 5:a.label++,r=d[1],d=[0];continue;case 7:d=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||d[0]!==6&&d[0]!==2)){a=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){a.label=d[1];break}if(d[0]===6&&a.label<i[1]){a.label=i[1],i=d;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(d);break}i[2]&&a.ops.pop(),a.trys.pop();continue}d=n.call(e,a)}catch(f){d=[6,f],r=0}finally{t=i=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([l,u])}}}function je(e){var n=typeof Symbol=="function"&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function ft(e,n){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var r,i,a=t.call(e),s=[];try{for(;(n===void 0||n-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(o){i={error:o}}finally{try{r&&!r.done&&(t=a.return)&&t.call(a)}finally{if(i)throw i.error}}return s}function At(e,n,t){if(arguments.length===2)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))}var at,yA="4.16.0",yl=function(){function e(){}return Object.defineProperty(e,"OS_VERSION",{get:function(){return typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.replace(/,/g,"."):"noAgent"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SDK_VERSION",{get:function(){return yA},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SDK_MAJOR_VERSION",{get:function(){return e.SDK_VERSION.split(".")[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL",{get:function(){return 100},enumerable:!1,configurable:!0}),Object.defineProperty(e,"INTERNAL_CALL",{get:function(){return"ic"},enumerable:!1,configurable:!0}),e}();(function(e){e[e.NON_AUTHORIZED=400108]="NON_AUTHORIZED",e[e.INVALID_TOKEN=400111]="INVALID_TOKEN",e[e.NOT_FOUND_IN_DATABASE=400201]="NOT_FOUND_IN_DATABASE",e[e.USER_AUTH_DEACTIVATED=400300]="USER_AUTH_DEACTIVATED",e[e.USER_AUTH_DELETED_OR_NOT_FOUND=400301]="USER_AUTH_DELETED_OR_NOT_FOUND",e[e.SESSION_TOKEN_EXPIRED=400302]="SESSION_TOKEN_EXPIRED",e[e.APPLICATION_NOT_FOUND=400304]="APPLICATION_NOT_FOUND",e[e.SESSION_KEY_EXPIRED=400309]="SESSION_KEY_EXPIRED",e[e.SESSION_REVOKED=400310]="SESSION_REVOKED",e[e.INVALID_SESSION_TYPE=400312]="INVALID_SESSION_TYPE",e[e.INVALID_AUTH_FOR_SERVICE=400313]="INVALID_AUTH_FOR_SERVICE",e[e.STAT_UPLOAD_NOT_ALLOWED=403200]="STAT_UPLOAD_NOT_ALLOWED",e[e.NOT_SUPPORTED_PINNED_MESSAGE_IN_REVIEW_MESSAGE=400940]="NOT_SUPPORTED_PINNED_MESSAGE_IN_REVIEW_MESSAGE",e[e.INTERNAL_SERVER_ERROR=500901]="INTERNAL_SERVER_ERROR",e[e.RATE_LIMIT_EXCEEDED=500910]="RATE_LIMIT_EXCEEDED",e[e.INVALID_REQUIRED_FORM_VALUE=400105]="INVALID_REQUIRED_FORM_VALUE",e[e.UNKNOWN_SERVER_ERROR=900200]="UNKNOWN_SERVER_ERROR",e[e.NOT_SUPPORTED_FEATURE_IN_IN_REVIEW_MESSAGE=901500]="NOT_SUPPORTED_FEATURE_IN_IN_REVIEW_MESSAGE",e[e.ERR_DUPLICATED_DATA=400202]="ERR_DUPLICATED_DATA",e[e.DEBUG_MODE_REQUIRED=7e5]="DEBUG_MODE_REQUIRED",e[e.LOST_INSTANCE=700100]="LOST_INSTANCE",e[e.CONNECTION_RENEW=700102]="CONNECTION_RENEW",e[e.INVALID_CONNECTION_STATE_TRANSITION=700200]="INVALID_CONNECTION_STATE_TRANSITION",e[e.INVALID_COMMAND=700700]="INVALID_COMMAND",e[e.XMLHTTPREQUEST_NOT_SUPPORTED=700800]="XMLHTTPREQUEST_NOT_SUPPORTED",e[e.UNKNOWN_ERROR=77e4]="UNKNOWN_ERROR",e[e.INVALID_INITIALIZATION=800100]="INVALID_INITIALIZATION",e[e.CONNECTION_REQUIRED=800101]="CONNECTION_REQUIRED",e[e.CONNECTION_CANCELED=800102]="CONNECTION_CANCELED",e[e.INVALID_PARAMETER=800110]="INVALID_PARAMETER",e[e.NOT_SUPPORTED_ERROR=800111]="NOT_SUPPORTED_ERROR",e[e.NETWORK_ERROR=800120]="NETWORK_ERROR",e[e.NETWORK_ROUTING_ERROR=800121]="NETWORK_ROUTING_ERROR",e[e.MALFORMED_DATA=800130]="MALFORMED_DATA",e[e.MALFORMED_ERROR_DATA=800140]="MALFORMED_ERROR_DATA",e[e.WRONG_CHANNEL_TYPE=800150]="WRONG_CHANNEL_TYPE",e[e.MARK_AS_READ_RATE_LIMIT_EXCEEDED=800160]="MARK_AS_READ_RATE_LIMIT_EXCEEDED",e[e.QUERY_IN_PROGRESS=800170]="QUERY_IN_PROGRESS",e[e.ACK_TIMEOUT=800180]="ACK_TIMEOUT",e[e.LOGIN_TIMEOUT=800190]="LOGIN_TIMEOUT",e[e.WEBSOCKET_CONNECTION_CLOSED=800200]="WEBSOCKET_CONNECTION_CLOSED",e[e.WEBSOCKET_CONNECTION_FAILED=800210]="WEBSOCKET_CONNECTION_FAILED",e[e.REQUEST_FAILED=800220]="REQUEST_FAILED",e[e.FILE_UPLOAD_CANCEL_FAILED=800230]="FILE_UPLOAD_CANCEL_FAILED",e[e.REQUEST_CANCELED=800240]="REQUEST_CANCELED",e[e.REQUEST_DUPLICATED=800250]="REQUEST_DUPLICATED",e[e.FILE_SIZE_LIMIT_EXCEEDED=800260]="FILE_SIZE_LIMIT_EXCEEDED",e[e.ERR_UPLOAD_STAT_RETRY_COUNT_EXCEEDED=800270]="ERR_UPLOAD_STAT_RETRY_COUNT_EXCEEDED",e[e.SESSION_TOKEN_REQUEST_FAILED=800500]="SESSION_TOKEN_REQUEST_FAILED",e[e.SESSION_TOKEN_REFRESHED=800501]="SESSION_TOKEN_REFRESHED",e[e.SESSION_TOKEN_REFRESH_FAILED=800502]="SESSION_TOKEN_REFRESH_FAILED",e[e.COLLECTION_DISPOSED=800600]="COLLECTION_DISPOSED",e[e.DATABASE_ERROR=800700]="DATABASE_ERROR",e[e.USER_DEACTIVATED=900021]="USER_DEACTIVATED",e[e.CHANNEL_IS_FROZEN=900050]="CHANNEL_IS_FROZEN",e[e.RECEIVER_USER_DEACTIVATED=900081]="RECEIVER_USER_DEACTIVATED"})(at||(at={}));var Hi,vu,zr,mg,Ch,Ai=function(e){return!(e instanceof J&&!e.shouldThrowOutside)},J=function(e){function n(t){var r=t.code,i=r===void 0?0:r,a=t.message,s=a===void 0?"":a,o=e.call(this,s)||this;return o.shouldThrowOutside=!1,o._detail="",o.name="SendbirdError",o.code=i,Object.setPrototypeOf(o,n.prototype),o}return B(n,e),Object.defineProperty(n.prototype,"detail",{get:function(){return this._detail},enumerable:!1,configurable:!0}),n.prototype.setDetail=function(t){this._detail=t},Object.defineProperty(n.prototype,"isInvalidTokenError",{get:function(){return this.code===at.INVALID_TOKEN},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionExpiredError",{get:function(){return this.isSessionTokenExpiredError||this.isSessionKeyExpiredError},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionTokenExpiredError",{get:function(){return this.code===at.SESSION_TOKEN_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionKeyExpiredError",{get:function(){return this.code===at.SESSION_KEY_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionInvalidatedError",{get:function(){return this.isSessionRevokedError||this.isUserAuthDeactivedError||this.isUserAuthDeletedOrNotFoundError},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionRevokedError",{get:function(){return this.code===at.SESSION_REVOKED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isUserAuthDeactivedError",{get:function(){return this.code===at.USER_AUTH_DEACTIVATED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isUserAuthDeletedOrNotFoundError",{get:function(){return this.code===at.USER_AUTH_DELETED_OR_NOT_FOUND},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isNetworkError",{get:function(){return this.code===at.NETWORK_ERROR||this.code===at.NETWORK_ROUTING_ERROR},enumerable:!1,configurable:!0}),Object.defineProperty(n,"debugModeRequired",{get:function(){return new n({code:at.DEBUG_MODE_REQUIRED,message:"Cannot run this operation in production mode."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"lostInstance",{get:function(){return new n({code:at.LOST_INSTANCE,message:"Instance ID is missing. It should belong to an instance."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"invalidCommand",{get:function(){return new n({code:at.INVALID_COMMAND,message:"Cannot send invalid command."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"unknown",{get:function(){return new n({code:at.UNKNOWN_ERROR,message:"Unknown error occurred."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"connectionRenew",{get:function(){return new n({code:at.CONNECTION_RENEW,message:"Connection restarts."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"invalidConnectionStateTransition",{get:function(){return new n({code:at.INVALID_CONNECTION_STATE_TRANSITION,message:"Invalid connection state transition."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"xmlHttpRequestNotSupported",{get:function(){return new n({code:at.XMLHTTPREQUEST_NOT_SUPPORTED,message:"Cannot upload file. XMLHttpRequest is not defined in this environment."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"connectionRequired",{get:function(){return new n({code:at.CONNECTION_REQUIRED,message:"Connection is required."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"connectionCanceled",{get:function(){return new n({code:at.CONNECTION_CANCELED,message:"Connection is canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"invalidParameters",{get:function(){return new n({code:at.INVALID_PARAMETER,message:"Invalid parameters."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"notSupportedError",{get:function(){return new n({code:at.NOT_SUPPORTED_ERROR,message:"Given parameters are not supported."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"channelTypeNotSupportedError",{get:function(){return new n({code:at.NOT_SUPPORTED_ERROR,message:"Called method is not supported in the current channel's channel type."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"networkError",{get:function(){return new n({code:at.NETWORK_ERROR,message:"There was a network error."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"markAsReadAllRateLimitExceeded",{get:function(){return new n({code:at.MARK_AS_READ_RATE_LIMIT_EXCEEDED,message:"markAsRead rate limit exceeded."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"queryInProgress",{get:function(){return new n({code:at.QUERY_IN_PROGRESS,message:"Query in progress."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"noAckTimeout",{get:function(){return new n({code:at.ACK_TIMEOUT,message:"Command received no ack."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"loginTimeout",{get:function(){return new n({code:at.LOGIN_TIMEOUT,message:"Connection timeout."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"connectionClosed",{get:function(){return new n({code:at.WEBSOCKET_CONNECTION_CLOSED,message:"Connection is closed. Please reconnect."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"requestFailed",{get:function(){return new n({code:at.REQUEST_FAILED,message:"Request failed."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"tooManyRequests",{get:function(){return new n({code:at.REQUEST_DUPLICATED,message:"Too many requests."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"alreadyConnectedAsAnotherUser",{get:function(){return new n({code:at.REQUEST_FAILED,message:"Already logged in as a different user. Call disconnect() first."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"fileUploadCanceled",{get:function(){return new n({code:at.FILE_UPLOAD_CANCEL_FAILED,message:"File upload has been canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"requestCanceled",{get:function(){return new n({code:at.REQUEST_CANCELED,message:"Request has been canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"sessionTokenRefreshFailed",{get:function(){return new n({code:at.SESSION_TOKEN_REFRESH_FAILED,message:"Failed to refresh the session key."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"sessionTokenRequestFailed",{get:function(){return new n({code:at.SESSION_TOKEN_REQUEST_FAILED,message:"Failed to get the session token."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"databaseError",{get:function(){return new n({code:at.DATABASE_ERROR,message:"Database error."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"fileSizeLimitExceededError",{get:function(){return new n({code:at.FILE_SIZE_LIMIT_EXCEEDED,message:"File size exceeds the file size limit."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"statLogUploadLimitExceededError",{get:function(){return new n({code:at.ERR_UPLOAD_STAT_RETRY_COUNT_EXCEEDED,message:"The upload request failed due to the retry count being exceeded."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"malformedDataError",{get:function(){return new n({code:at.MALFORMED_DATA,message:"Malformed data."})},enumerable:!1,configurable:!0}),n.prototype.throwOutside=function(){throw this.shouldThrowOutside=!0,this},n}(Error),TL=[at.CONNECTION_REQUIRED,at.NETWORK_ERROR,at.ACK_TIMEOUT,at.WEBSOCKET_CONNECTION_CLOSED,at.WEBSOCKET_CONNECTION_FAILED,at.FILE_UPLOAD_CANCEL_FAILED,at.REQUEST_CANCELED,at.INTERNAL_SERVER_ERROR,at.RATE_LIMIT_EXCEEDED,at.UNKNOWN_SERVER_ERROR,at.USER_DEACTIVATED,at.CHANNEL_IS_FROZEN,at.RECEIVER_USER_DEACTIVATED],NL=[at.WEBSOCKET_CONNECTION_CLOSED,at.WEBSOCKET_CONNECTION_FAILED,at.CONNECTION_REQUIRED,at.CHANNEL_IS_FROZEN],CA=function(e,n){if(e!==n){var t=W({},e),r=W({},n);return(!t.hasOwnProperty("messageId")||!r.hasOwnProperty("messageId")||t.messageId===r.messageId)&&(!t.hasOwnProperty("reqId")||!r.hasOwnProperty("reqId")||t.reqId===r.reqId)&&(t.hasOwnProperty("messageId")&&delete t.messageId,t.hasOwnProperty("reqId")&&delete t.reqId,r.hasOwnProperty("messageId")&&delete r.messageId,r.hasOwnProperty("reqId")&&delete r.reqId,JSON.stringify(t)===JSON.stringify(r))}return!0},X=function(e,n,t){return t===void 0&&(t=!1),!(!t||!sf(n))||(typeof e!="string"?typeof e=="object"?tn(e,n):IL(e,n):typeof n===e)},tn=function(e,n,t){return t===void 0&&(t=!1),!(!t||!sf(n))||Object.values(e).includes(n)},IL=function(e,n){return n instanceof e},nn=function(e,n,t){return t===void 0&&(t=!1),!(!t||!sf(n))||Array.isArray(n)&&n.every(function(r){return X(e,r)})},A1=function(e,n){return n===void 0&&(n=!1),!(!n||!sf(e))||typeof e=="number"&&e.toString().length===13},ML=function(e){return e>0&&TL.indexOf(e)>=0},mp=function(e){return e>0&&NL.indexOf(e)>=0},jr=function(e,n){if(n===void 0&&(n=!1),n&&sf(e))return!0;var t=typeof e=="object"&&e!==null&&e.hasOwnProperty("name")&&typeof e.name=="string"&&e.hasOwnProperty("uri")&&typeof e.uri=="string"&&e.hasOwnProperty("type")&&typeof e.type=="string";if(!t){if(typeof Blob<"u")return e instanceof Blob;if(typeof File<"u")return e instanceof File}return t},AL=function(e,n){if(e===n)return!0;if(e==null||n==null||e.length!==n.length)return!1;for(var t=At([],ft(e),!1).sort(),r=At([],ft(n),!1).sort(),i=0;i<t.length;++i)if(t[i]!==r[i])return!1;return!0},sf=function(e){return e==null},bA=function(){function e(n){var t=n===void 0?{}:n,r=t.useMemberInfoInMessage,i=r===void 0||r,a=t.typingIndicatorInvalidateTime,s=a===void 0?1e4:a,o=t.typingIndicatorThrottle,l=o===void 0?1e3:o,u=t.websocketResponseTimeout,d=u===void 0?1e4:u,f=t.websocketPayloadDecompression,p=f===void 0||f,m=t.sessionTokenRefreshTimeout,E=m===void 0?60:m;this._useMemberInfoInMessage=!0,this._typingIndicatorInvalidateTime=1e4,this._typingIndicatorThrottle=1e3,this._websocketResponseTimeout=1e4,this._sessionTokenRefreshTimeout=60,this._useMemberInfoInMessage=i,this._typingIndicatorInvalidateTime=s,this._typingIndicatorThrottle=l,this._websocketResponseTimeout=d,this._sessionTokenRefreshTimeout=E,this.websocketPayloadDecompression=p}return Object.defineProperty(e.prototype,"useMemberInfoInMessage",{get:function(){return this._useMemberInfoInMessage},set:function(n){X("boolean",n)&&(this._useMemberInfoInMessage=n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"typingIndicatorInvalidateTime",{get:function(){return this._typingIndicatorInvalidateTime},set:function(n){X("number",n)&&(this._typingIndicatorInvalidateTime=n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"typingIndicatorThrottle",{get:function(){return this._typingIndicatorThrottle},set:function(n){X("number",n)&&n>=1e3&&n<=9e3&&(this._typingIndicatorThrottle=n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"websocketResponseTimeout",{get:function(){return this._websocketResponseTimeout},set:function(n){X("number",n)&&n>=5e3&&n<=3e4&&(this._websocketResponseTimeout=n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionTokenRefreshTimeout",{get:function(){return this._sessionTokenRefreshTimeout},set:function(n){X("number",n)&&(n<60?n=60:n>1800&&(n=1800),this._sessionTokenRefreshTimeout=n)},enumerable:!1,configurable:!0}),e}(),SA={encrypt:function(e){return e},decrypt:function(e){return e}},w1=function(){function e(n){var t=n.store;this._preference=new Map,this._store=t}return e.prototype._savePreferenceKeys=function(){return A(this,void 0,void 0,function(){return M(this,function(n){switch(n.label){case 0:return[4,this._store.set({key:this._keysAddress,value:At([],ft(this._preference.keys()),!1)})];case 1:return n.sent(),[2]}})})},e.prototype.init=function(n,t){var r;return t===void 0&&(t=1),A(this,void 0,void 0,function(){var i,a,s,o,l,u,d,f,p,m;return M(this,function(E){switch(E.label){case 0:return this._version=t,this._keysAddress=n,i="".concat(n,".metadata.version"),[4,this._store.get(i)];case 1:return a=E.sent(),[4,this._store.get(n)];case 2:return s=(r=E.sent())!==null&&r!==void 0?r:[],!a||a.version<this._version?[4,this._resetPreferenceData(s,i)]:[3,4];case 3:return E.sent(),[3,11];case 4:E.trys.push([4,9,10,11]),o=je(s),l=o.next(),E.label=5;case 5:return l.done?[3,8]:(u=l.value,[4,this._store.get(u)]);case 6:(d=E.sent())&&this._preference.set(u,d),E.label=7;case 7:return l=o.next(),[3,5];case 8:return[3,11];case 9:return f=E.sent(),p={error:f},[3,11];case 10:try{l&&!l.done&&(m=o.return)&&m.call(o)}finally{if(p)throw p.error}return[7];case 11:return[2]}})})},e.prototype._resetPreferenceData=function(n,t){return A(this,void 0,void 0,function(){return M(this,function(r){switch(r.label){case 0:return this._preference=new Map,[4,this._store.removeMany(n)];case 1:return r.sent(),[4,this._store.set({key:t,value:{version:this._version}})];case 2:return r.sent(),[2]}})})},e.prototype.get=function(n){return A(this,void 0,void 0,function(){return M(this,function(t){return[2,this._preference.get(n)]})})},e.prototype.set=function(n,t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){switch(i.label){case 0:return r=!this._preference.has(n),[4,this._store.set({key:n,value:t})];case 1:return i.sent(),this._preference.set(n,t),r?[4,this._savePreferenceKeys()]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}})})},e.prototype.remove=function(n){return A(this,void 0,void 0,function(){return M(this,function(t){switch(t.label){case 0:return[4,this._store.remove(n)];case 1:return t.sent(),this._preference.delete(n),[4,this._savePreferenceKeys()];case 2:return t.sent(),[2]}})})},e.prototype.clear=function(){return A(this,void 0,void 0,function(){return M(this,function(n){switch(n.label){case 0:return[4,this._store.removeMany(At([],ft(this._preference.keys()),!1))];case 1:return n.sent(),this._preference.clear(),[4,this._savePreferenceKeys()];case 2:return n.sent(),[2]}})})},e}(),wL=function(){function e(n){var t=n.encryption,r=n.store,i=n.localCacheEnabled,a=n.localCacheConfig;this.store=r,this.preference=new w1({store:r}),this.encryption=t??SA,this.localCacheEnabled=i,this.localCacheConfig=a}return e.prototype.replaceStore=function(n){this.store=n,this.preference=new w1({store:n})},e}();(function(e){e.SUCCESS="success",e.PENDING="pending",e.ERROR="error"})(Hi||(Hi={})),function(e){e.DEFAULT="default",e.ALL="all",e.MENTION_ONLY="mention_only",e.OFF="off"}(vu||(vu={})),function(e){e.FCM="gcm",e.APNS="apns",e.UNKNOWN="unknown"}(zr||(zr={})),function(e){e.ALTERNATIVE="alternative",e.DEFAULT="default"}(mg||(mg={})),function(e){e.CUSTOM="custom",e.MESSAGE_COLLECTION_ACCESSED_AT="messagecollection_accessed_at"}(Ch||(Ch={}));var _p,RL=function(){function e(n){var t=n.channel,r=n.cachedMessageCount;this._cachedMessageCount=0,this._channel=t,this._cachedMessageCount=r}return Object.defineProperty(e.prototype,"channel",{get:function(){return this._channel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cachedMessageCount",{get:function(){return this._cachedMessageCount},enumerable:!1,configurable:!0}),e}(),TA=function(){function e(n){var t=n===void 0?{}:n,r=t.maxSize,i=r===void 0?256:r,a=t.clearOrder,s=a===void 0?Ch.MESSAGE_COLLECTION_ACCESSED_AT:a,o=t.customClearOrderComparator,l=t.enableAutoResend,u=l===void 0||l;this._clearOrderComparatorUseMessageCollectionAccessedAt=function(d,f){return d.channel.messageCollectionLastAccessedAt===f.channel.messageCollectionLastAccessedAt?d.channel.lastMessage&&!f.channel.lastMessage?1:!d.channel.lastMessage&&f.channel.lastMessage?-1:d.channel.lastMessage||f.channel.lastMessage?d.channel.lastMessage.createdAt-f.channel.lastMessage.createdAt:0:d.channel.messageCollectionLastAccessedAt>f.channel.messageCollectionLastAccessedAt?1:-1},this._maxSize=Math.max(i,64),o?(this._clearOrder=s,this._customClearOrderComparator=o):this._clearOrder=Ch.MESSAGE_COLLECTION_ACCESSED_AT,this._enableAutoResend=u}return Object.defineProperty(e.prototype,"maxSize",{get:function(){return this._maxSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clearOrder",{get:function(){return this._clearOrder},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clearOrderComparator",{get:function(){var n;return this._clearOrder===Ch.MESSAGE_COLLECTION_ACCESSED_AT?this._clearOrderComparatorUseMessageCollectionAccessedAt:(n=this._customClearOrderComparator)!==null&&n!==void 0?n:this._clearOrderComparatorUseMessageCollectionAccessedAt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableAutoResend",{get:function(){return this._enableAutoResend},enumerable:!1,configurable:!0}),e}();(function(e){e.FEED="feed",e.CHAT="chat",e.CHAT_API="chat_api"})(_p||(_p={}));var cn,ri,Ya,ir,mi,$c,gi,Ar,Ns,yn,R1,_g,gg,OL=function(){function e(){this.isRefreshing=!1}return Object.defineProperty(e.prototype,"hasSession",{get:function(){return!!this.sessionKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasChatServicePermission",{get:function(){var n;return!!(!((n=this.services)===null||n===void 0)&&n.includes(_p.CHAT))},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this.authToken=void 0,this.sessionKey=void 0,this.services=[]},e}(),Ro=function(){var e=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),(n==="x"?t:3&t|8).toString(16)})},O1=function(){function e(n){var t=n.container;this._container={},this._container=t,this.key=Ro()}return e.prototype._register=function(n,t,r){var i;return n in this._container||(this._container[n]=new Map),(i=this._container[n])===null||i===void 0||i.set(this.key,{occurence:t,handler:r}),this},e.prototype.on=function(n,t){return this._register(n,-1,t)},e.prototype.once=function(n,t){return this._register(n,1,t)},e.prototype.close=function(){var n=this;Object.keys(this._container).forEach(function(t){var r;(r=n._container[t])===null||r===void 0||r.delete(n.key)})},e}(),ku=function(){function e(){this._container={}}return e.prototype.on=function(n,t){return new O1({container:this._container}).on(n,t)},e.prototype.once=function(n,t){return new O1({container:this._container}).once(n,t)},e.prototype.dispatch=function(n,t){var r,i,a=this._container[n];if(a){var s=[];try{for(var o=je(a.keys()),l=o.next();!l.done;l=o.next()){var u=l.value,d=a.get(u);d.handler(t),d.occurence>0&&(d.occurence--,d.occurence===0&&s.push(u))}}catch(f){r={error:f}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}s.forEach(function(f){return a.delete(f)})}},e}(),DL=function(){function e(){this._dispatcher=new ku}return e.prototype.on=function(n){return this._dispatcher.on("event",n)},e.prototype.once=function(n){return this._dispatcher.once("event",n)},e.prototype.dispatch=function(n){this._dispatcher.dispatch("event",n)},e}(),ar=function(){},Xe=function(e){var n={};return e&&Object.keys(e).forEach(function(t){e[t]===void 0||Number.isNaN(e[t])||e[t]===null||(n[t]=e[t])}),n},_t=function(e){if(e!=null){if(typeof e=="object"){if(Array.isArray(e)){for(var n=At([],ft(e),!1),t=0;t<n.length;t++)n[t]=_t(n[t]);return n}return Object.keys(e).forEach(function(r){e[r]===null&&delete e[r]}),e}return e}};(function(e){e.BASE="base",e.GROUP="group",e.OPEN="open",e.FEED="feed"})(cn||(cn={})),function(e){e.OPERATOR="operator",e.NONE="none"}(ri||(ri={})),function(e){e.MUTED="muted",e.UNMUTED="unmuted"}(Ya||(Ya={})),function(e){e.BASE="base",e.USER="user",e.FILE="file",e.ADMIN="admin"}(ir||(ir={})),function(e){e.ALL="",e.USER="MESG",e.FILE="FILE",e.ADMIN="ADMM"}(mi||(mi={})),function(e){e.USER="MESG",e.FILE="FILE",e.ADMIN="ADMM"}($c||($c={})),function(e){e.USERS="users",e.CHANNEL="channel"}(gi||(gi={})),function(e){e.ALL="all",e.NONE="none",e.ONLY_REPLY_TO_CHANNEL="only_reply_to_channel"}(Ar||(Ar={})),function(e){e.DEFAULT="default",e.SUPPRESS="suppress"}(Ns||(Ns={})),function(e){e.PENDING="pending",e.SCHEDULED="scheduled",e.SUCCEEDED="succeeded",e.FAILED="failed",e.CANCELED="canceled"}(yn||(yn={})),function(e){e.INREVIEW="InReview",e.APPROVED="Approved"}(R1||(R1={})),function(e){e.HIGH="high",e.NORMAL="normal",e.LOW="low"}(_g||(_g={})),function(e){e.CREATED_AT="created_at",e.UPDATED_AT="updated_at"}(gg||(gg={}));var we,Xr="v3",In="/".concat(Xr,"/users"),LL="/".concat(Xr,"/sdk/users"),UL="/".concat(Xr,"/storage/file"),Li="/".concat(Xr,"/group_channels"),kL="/".concat(Xr,"/sdk/group_channels"),Pu="/".concat(Xr,"/open_channels"),PL="/".concat(Xr,"/sdk/open_channels"),xL="/".concat(Xr,"/search"),Eg="/".concat(Xr,"/report"),FL="/".concat(Xr,"/emojis"),NA="/".concat(Xr,"/emoji_categories"),Ms="/".concat(Xr,"/polls"),IA="/".concat(Xr,"/scheduled_messages"),HL="/".concat(Xr,"/sdk/ui_kit/configuration"),BL="/".concat(Xr,"/sdk/statistics"),GL="/".concat(Xr,"/sdk/statistics/notification_statistics"),MA="/".concat(Xr,"/message_templates"),VL="/".concat(Xr,"/sdk/push_delivery"),zL="/".concat(Xr,"/forms"),jL="/".concat(Xr,"/report_category"),Nn=function(e){switch(e){case cn.FEED:case cn.GROUP:return Li;case cn.OPEN:return Pu;default:return null}},AA=function(e){switch(e){case cn.GROUP:return"".concat(Eg,"/group_channels");case cn.OPEN:return"".concat(Eg,"/open_channels");default:return null}},Wc=function(e,n,t){var r,i;switch(e){case gi.CHANNEL:return!0;case gi.USERS:if(n)try{for(var a=je(n),s=a.next();!s.done;s=a.next())if(s.value===t)return!0}catch(o){r={error:o}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}}return!1},Ny=function(e,n,t){var r,i,a,s,o=Wc((r=e.mentionType)!==null&&r!==void 0?r:null,(i=e.mentionedUserIds)!==null&&i!==void 0?i:[],t),l=Wc((a=n.mentionType)!==null&&a!==void 0?a:null,(s=n.mentionedUserIds)!==null&&s!==void 0?s:[],t);return!o&&l?1:o&&!l?-1:0},wA=function(e,n,t){var r,i=n||new FormData;for(var a in e)if(e.hasOwnProperty(a)){var s=e[a],o=t?"".concat(t,"[").concat(a,"]"):a;jr(s)?i.append(o,s,(r=s.name)!==null&&r!==void 0?r:"filename"):typeof s!="object"||s===null||Array.isArray(s)||s instanceof Blob?i.append(o,String(s)):i=wA(s,i,o)}return i};(function(e){e.GET="GET",e.POST="POST",e.PUT="PUT",e.DELETE="DELETE"})(we||(we={}));var Zn,Re=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.params={},t.requireAuth=!0,t.headers={},t.requestId=Ro(),t}return B(n,e),n.prototype.encodeParams=function(t){var r=this;return t==null||t===""?encodeURIComponent(""):Array.isArray(t)?t.map(function(i){return r.encodeParams(i)}).join(","):encodeURIComponent(typeof t=="object"?JSON.stringify(t):String(t))},Object.defineProperty(n.prototype,"query",{get:function(){var t=this,r=Xe(this.params);return"?".concat(Object.keys(r).map(function(i){return"".concat(encodeURIComponent(i),"=").concat(t.encodeParams(r[i]))}).join("&"))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"payload",{get:function(){var t=Xe(this.params);return Object.keys(t).some(function(r){return jr(t[r])})?wA(t):JSON.stringify(t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasSessionKey",{get:function(){return this.headers["Session-Key"]!==void 0},enumerable:!1,configurable:!0}),n}(ar),He=function(e){function n(t,r){var i=e.call(this)||this;return i._iid=t,i._payload=r,i}return B(n,e),Object.defineProperty(n.prototype,"payload",{get:function(){return W({},this._payload)},enumerable:!1,configurable:!0}),n.prototype.as=function(t){return new t(this._iid,this.payload)},n}(ar),qL=function(e){function n(t){var r=e.call(this)||this;return r.requestId=t,r}return B(n,e),n}(ar),Qc=function(e){function n(t){var r=t.expires_in,i=t.reason,a=i===void 0?at.SESSION_KEY_EXPIRED:i,s=t.message,o=s===void 0?"":s,l=e.call(this)||this;switch(l.expiresIn=r??0,a){case at.SESSION_KEY_EXPIRED:case at.SESSION_TOKEN_EXPIRED:case at.SESSION_REVOKED:case at.USER_AUTH_DEACTIVATED:case at.USER_AUTH_DELETED_OR_NOT_FOUND:l.error=new J({code:a,message:o})}return l}return B(n,e),Object.defineProperty(n.prototype,"invalidateSessionToken",{get:function(){var t;return!!(!((t=this.error)===null||t===void 0)&&t.isSessionTokenExpiredError)},enumerable:!1,configurable:!0}),n}(ar),Wn=function(e){function n(t,r,i,a){a===void 0&&(a="");var s,o=this;return(o=e.call(this)||this)._iid=t,o.code=r,o.payload=i,o.requestId=(s=i.req_id)!==null&&s!==void 0?s:a,o}return B(n,e),n.createFromRawMessage=function(t,r){var i=r.substring(0,4),a={};try{a=JSON.parse(r.substring(4))}catch{i="NOOP"}finally{return new n(t,i,a)}},n.prototype.convertToMessage=function(){return"".concat(this.code).concat(JSON.stringify(this.payload),`
`)},n.prototype.as=function(t){return new t(this._iid,this.code,this.payload)},n}(ar),_i=function(e){function n(t){var r,i=t.code,a=t.ackRequired,s=t.payload,o=s===void 0?{}:s,l=this;return(l=e.call(this)||this).code=i,l.payload=o,l.requestId=(r=l.payload.req_id)!==null&&r!==void 0?r:Ro(),l.ackRequired=a,l.payload.req_id=l.requestId,l}return B(n,e),n.prototype.convertToMessage=function(){return"".concat(this.code).concat(JSON.stringify(this.payload),`
`)},n}(ar),Iy=function(e){function n(t){var r=t.userId,i=t.authToken,a=t.services,s=t.expiringSession,o=s===void 0||s,l=e.call(this)||this;return l.path="".concat(In,"/").concat(r,"/session_key"),l.method=we.POST,l.params=Xe({token:i,services:a,expiring_session:!!o}),l.requireAuth=!1,l}return B(n,e),n}(Re),KL=function(e){function n(t){var r=t.authToken,i=t.expiringSession,a=i===void 0||i,s=t.requestId,o=s===void 0?void 0:s;return e.call(this,{code:"LOGI",payload:Xe({token:r,expiring_session:a?1:0,req_id:o}),ackRequired:!0})||this}return B(n,e),n}(_i),$L=function(e){function n(t,r){var i=e.call(this,t,r)||this,a=r.key,s=r.expires_at,o=r.services;return i.key=a,i.expiresAt=s,i.services=o,i}return B(n,e),n}(He),WL=function(e){function n(t,r,i){var a,s=this;return(s=e.call(this,t,"LOGI",i)||this).error=null,s.newKey=null,s.newKey=(a=i.new_key)!==null&&a!==void 0?a:null,s.error=i.error?new J(i):null,s}return B(n,e),n}(Wn),My=function(e){function n(t){var r=e.call(this)||this;return r.statLog=t,r}return B(n,e),n}(ar),RA=function(e){function n(t){var r=t.request,i=t.deferred,a=t.error,s=a===void 0?J.requestFailed:a,o=e.call(this)||this;return o.request=r,o.deferred=i,o.error=s,o}return B(n,e),n}(ar);(function(e){e.FEATURE_LOCALCACHE="feature:local_cache",e.FEATURE_LOCALCACHE_EVENT="feature:local_cache_event",e.NOTIFICATION="noti:stats",e.WEBSOCKET_CONNECT="ws:connect",e.API_RESULT="api:result"})(Zn||(Zn={}));var yg,Cu,ml,cr=function(){function e(n){var t=n.type,r=n.data,i=n.ts,a=i===void 0?Date.now():i;this.type=t,this.createdAt=a,this.data=r}return e.payloadify=function(n){return Xe({stat_type:n.type,ts:n.createdAt,data:Xe(n.data)})},e}(),Cg=function(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product=="ReactNative"},D1=function(){return!(typeof navigator>"u"||!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Windows Phone/i.test(navigator.userAgent))};(function(e){e.CHAT="chat",e.CALLS="calls",e.DESK="desk",e.LIVE="live",e.UIKIT_CHAT="uikit-chat",e.UIKIT_LIVE="uikit-live"})(yg||(yg={})),function(e){e.ANDROID="android",e.IOS="ios",e.JS="js",e.UNREAL="unreal",e.UNITY="unity",e.REACT_NATIVE="react-native",e.FLUTTER="flutter"}(Cu||(Cu={})),function(e){e.ANDROID="android",e.IOS="ios",e.WEB="web",e.MOBILE_WEB="mobile_web",e.WINDOWS="windows"}(ml||(ml={}));var QL="^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$",gp=function(){function e(){}return e.sendbirdSdkUserAgentWithExtension=function(n){var t=Cg()?Cu.REACT_NATIVE:Cu.JS,r={main_sdk_info:"chat/".concat(t,"/").concat(yl.SDK_VERSION),device_os_platform:D1()?"mobile-web":"web",os_version:yl.OS_VERSION};if(n){var i=n.sendbirdExtensions,a=n.deviceOS,s=n.customData,o=s===void 0?{}:s;a.version&&(r.os_version=a.version),a.platform&&(r.device_os_platform=a.platform),i.length>0&&(r.extension_sdk_info=i.map(function(l){var u=l.product,d=l.platform,f=l.version;return"".concat(u,"/").concat(d,"/").concat(f)}).join(",")),Object.keys(r).forEach(function(l){return delete o[l]}),Object.keys(o).length>0&&(r=W(W({},r),o))}return Object.entries(r).map(function(l){var u=ft(l,2),d=u[0],f=u[1];return"".concat(d,"=").concat(f)}).join("&")},e.userAgentWithExtension=function(n){var t=Cg()?"reactnative":"JS",r=n.sb_syncmanager?"s".concat(n.sb_syncmanager):"",i=n.sb_uikit?"u".concat(n.sb_uikit):"",a=n["device-os-platform"]?"o".concat(n["device-os-platform"]):D1()?"omobile-web":"oweb";return"".concat(t,"/c").concat(yl.SDK_VERSION,"/").concat(r,"/").concat(i,"/").concat(a)},e}(),Gi=function(){var e=this;this.promise=new Promise(function(n,t){e.resolve=n,e.reject=function(r){t(r)}})},Ep=function(e){function n(t){var r=e.call(this)||this;return r.requestId=t.requestId,r}return B(n,e),n}(ar),OA=function(e){function n(t){var r=e.call(this)||this;return r.method=we.DELETE,r.path="".concat(Nn(t.channelType),"/").concat(t.channelUrl,"/messages/").concat(t.messageId),t.messageToken&&(r.params=Xe({mesg_token:t.messageToken})),r}return B(n,e),n}(Re);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}B(n,e)})(He);var DA=function(e){function n(t,r,i){var a,s=this;return(s=e.call(this,t,"DELM",i)||this).channelUrl=i.channel_url,s.channelType=i.channel_type,s.messageId=Number(i.msg_id),s.silent=i.silent,s.messageCreatedAt=i.message_created_at?Number(i.message_created_at):-1,s.senderId=(a=i.sender_id)!==null&&a!==void 0?a:void 0,s}return B(n,e),n}(Wn),YL=function(){function e(n,t){var r=t.session,i=t.sdkState,a=t.dispatcher,s=t.logger,o=t.useFetchCompat,l=o!==void 0&&o,u=this;this._abortControl=new Map,this._shouldImportFetchCompat=!1,this._iid=n,this._session=r,this._sdkState=i,this._dispatcher=a,this._dispatcher.on(function(d){d instanceof qL&&u.cancel(d.requestId)}),this._logger=s,this._shouldImportFetchCompat=l}return e.prototype._createHeader=function(n,t){var r=this._sdkState,i=r.appId,a=r.appVersion,s=r.sendbirdRuntimeEnvironment,o=W(W({},n.headers),{SendBird:"JS,".concat(yl.OS_VERSION,",").concat(yl.SDK_VERSION,",").concat(i).concat(a?",".concat(a):""),"SB-User-Agent":gp.userAgentWithExtension(this._sdkState.extensions),"Request-Sent-Timestamp":Date.now().toString(),"SB-SDK-User-Agent":gp.sendbirdSdkUserAgentWithExtension(s)});return t||(o["Content-Type"]="application/json; charset=utf-8"),n.requireAuth&&!n.hasSessionKey&&this._session.hasSession&&(o["Session-Key"]=this._session.sessionKey),o["App-Id"]=i,this._session&&this._session.authToken&&(o["Access-Token"]=this._session.authToken),o},e.prototype._statLogApiResult=function(n,t,r){n.path.includes("/sdk/statistics")||this._dispatcher.dispatch(new My(new cr({type:Zn.API_RESULT,data:{endpoint:n.path,method:n.method,success:!r,latency:Date.now()-t,error_code:r==null?void 0:r.code,error_description:r==null?void 0:r.message}})))},e.prototype._isBodyRequired=function(n){var t=n.method;return t!==we.GET&&(t!==we.DELETE||n instanceof OA)},e.prototype.send=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,d,f,p,m,E,g,y,S,C,T,I;return M(this,function(L){switch(L.label){case 0:t=n.path,r=n.method,i=n.uploadProgressHandler,a=this._isBodyRequired(n),s=this._sdkState.api,o="".concat(s.host).concat(t).concat(a?"":n.query),l=a?n.payload:null,u=this._createHeader(n,l instanceof FormData?l:void 0),d=new AbortController,f=d.signal,this._abortControl.set(n.requestId,d),p=Date.now(),L.label=1;case 1:return L.trys.push([1,13,,14]),i?[4,Xv(()=>import("./__bundle-30577056-Bho9wAZW.js"),[])]:[3,6];case 2:m=L.sent().xmlHttpRequest,L.label=3;case 3:return L.trys.push([3,5,,6]),[4,m(this._iid,{requestId:n.requestId,method:n.method,url:o,headers:u,data:l??void 0,uploadProgressHandler:i})];case 4:return E=L.sent(),this._logger.debug("receive api response",n.requestId),this._statLogApiResult(n,p),[2,E];case 5:if(!((g=L.sent())instanceof J&&g.code===at.XMLHTTPREQUEST_NOT_SUPPORTED))throw g;return this._logger.debug("XMLHttpRequest is not available in this environment. progressHandler is ignored."),[3,6];case 6:return this._shouldImportFetchCompat&&(this._shouldImportFetchCompat=!1,(typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof global<"u"&&global||{fetch:null}).fetch=null),typeof AbortController<"u"?[3,8]:[4,Xv(()=>Promise.resolve().then(()=>V$),void 0)];case 7:L.sent(),L.label=8;case 8:return typeof fetch=="function"?[3,10]:[4,Xv(()=>import("./__bundle-46d64517-DZJ28aug.js").then(D=>D._),[])];case 9:L.sent(),L.label=10;case 10:return[4,fetch(o,{method:r,body:l,headers:u,signal:f})];case 11:return[4,(y=L.sent()).json()];case 12:if(S=L.sent(),y.ok||y.redirected)return this._logger.debug("receive api response",n.requestId),this._statLogApiResult(n,p),[2,new He(this._iid,S)];if(S){if((C=new J(S)).isSessionExpiredError){if(this._dispatcher.dispatch(new Qc({reason:C.code,message:C.message})),!(n instanceof Iy))return T=new Gi,this._dispatcher.dispatch(new RA({request:n,deferred:T,error:C})),[2,T.promise];throw C}throw C.isSessionInvalidatedError&&this._dispatcher.dispatch(new Qc({reason:C.code,message:C.message})),C}throw J.requestFailed;case 13:throw I=L.sent(),this._statLogApiResult(n,p,I),I instanceof J?(this._logger.debug("fail api request",I),I):(I==null?void 0:I.name)==="AbortError"?J.requestCanceled:(this._logger.debug("fail api request",I),J.networkError);case 14:return[2]}})})},e.prototype.cancel=function(n){this._abortControl.has(n)&&(this._abortControl.get(n).abort(),this._abortControl.delete(n)),this._dispatcher.dispatch(new Ep({requestId:n}))},e.prototype.cancelAll=function(){var n,t;try{for(var r=je(this._abortControl.values()),i=r.next();!i.done;i=r.next())i.value.abort()}catch(a){n={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(n)throw n.error}}this._abortControl.clear(),this._dispatcher.dispatch(new Ep({}))},e}(),jt=function(){};function ld(e){let n=e.length;for(;--n>=0;)e[n]=0}const Ay=256,LA=286,bh=30,Sh=15,bg=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Zv=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),XL=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),L1=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),mo=new Array(576);ld(mo);const Th=new Array(60);ld(Th);const zh=new Array(512);ld(zh);const Nh=new Array(256);ld(Nh);const wy=new Array(29);ld(wy);const yp=new Array(bh);function f_(e,n,t,r,i){this.static_tree=e,this.extra_bits=n,this.extra_base=t,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let U1,k1,P1;function v_(e,n){this.dyn_tree=e,this.max_code=0,this.stat_desc=n}ld(yp);const UA=e=>e<256?zh[e]:zh[256+(e>>>7)],jh=(e,n)=>{e.pending_buf[e.pending++]=255&n,e.pending_buf[e.pending++]=n>>>8&255},ha=(e,n,t)=>{e.bi_valid>16-t?(e.bi_buf|=n<<e.bi_valid&65535,jh(e,e.bi_buf),e.bi_buf=n>>16-e.bi_valid,e.bi_valid+=t-16):(e.bi_buf|=n<<e.bi_valid&65535,e.bi_valid+=t)},Gs=(e,n,t)=>{ha(e,t[2*n],t[2*n+1])},kA=(e,n)=>{let t=0;do t|=1&e,e>>>=1,t<<=1;while(--n>0);return t>>>1},PA=(e,n,t)=>{const r=new Array(16);let i,a,s=0;for(i=1;i<=Sh;i++)s=s+t[i-1]<<1,r[i]=s;for(a=0;a<=n;a++){let o=e[2*a+1];o!==0&&(e[2*a]=kA(r[o]++,o))}},xA=e=>{let n;for(n=0;n<LA;n++)e.dyn_ltree[2*n]=0;for(n=0;n<bh;n++)e.dyn_dtree[2*n]=0;for(n=0;n<19;n++)e.bl_tree[2*n]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},FA=e=>{e.bi_valid>8?jh(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},x1=(e,n,t,r)=>{const i=2*n,a=2*t;return e[i]<e[a]||e[i]===e[a]&&r[n]<=r[t]},p_=(e,n,t)=>{const r=e.heap[t];let i=t<<1;for(;i<=e.heap_len&&(i<e.heap_len&&x1(n,e.heap[i+1],e.heap[i],e.depth)&&i++,!x1(n,r,e.heap[i],e.depth));)e.heap[t]=e.heap[i],t=i,i<<=1;e.heap[t]=r},F1=(e,n,t)=>{let r,i,a,s,o=0;if(e.sym_next!==0)do r=255&e.pending_buf[e.sym_buf+o++],r+=(255&e.pending_buf[e.sym_buf+o++])<<8,i=e.pending_buf[e.sym_buf+o++],r===0?Gs(e,i,n):(a=Nh[i],Gs(e,a+Ay+1,n),s=bg[a],s!==0&&(i-=wy[a],ha(e,i,s)),r--,a=UA(r),Gs(e,a,t),s=Zv[a],s!==0&&(r-=yp[a],ha(e,r,s)));while(o<e.sym_next);Gs(e,256,n)},m_=(e,n)=>{const t=n.dyn_tree,r=n.stat_desc.static_tree,i=n.stat_desc.has_stree,a=n.stat_desc.elems;let s,o,l,u=-1;for(e.heap_len=0,e.heap_max=573,s=0;s<a;s++)t[2*s]!==0?(e.heap[++e.heap_len]=u=s,e.depth[s]=0):t[2*s+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=u<2?++u:0,t[2*l]=1,e.depth[l]=0,e.opt_len--,i&&(e.static_len-=r[2*l+1]);for(n.max_code=u,s=e.heap_len>>1;s>=1;s--)p_(e,t,s);l=a;do s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],p_(e,t,1),o=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=o,t[2*l]=t[2*s]+t[2*o],e.depth[l]=(e.depth[s]>=e.depth[o]?e.depth[s]:e.depth[o])+1,t[2*s+1]=t[2*o+1]=l,e.heap[1]=l++,p_(e,t,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((d,f)=>{const p=f.dyn_tree,m=f.max_code,E=f.stat_desc.static_tree,g=f.stat_desc.has_stree,y=f.stat_desc.extra_bits,S=f.stat_desc.extra_base,C=f.stat_desc.max_length;let T,I,L,D,O,R,k=0;for(D=0;D<=Sh;D++)d.bl_count[D]=0;for(p[2*d.heap[d.heap_max]+1]=0,T=d.heap_max+1;T<573;T++)I=d.heap[T],D=p[2*p[2*I+1]+1]+1,D>C&&(D=C,k++),p[2*I+1]=D,I>m||(d.bl_count[D]++,O=0,I>=S&&(O=y[I-S]),R=p[2*I],d.opt_len+=R*(D+O),g&&(d.static_len+=R*(E[2*I+1]+O)));if(k!==0){do{for(D=C-1;d.bl_count[D]===0;)D--;d.bl_count[D]--,d.bl_count[D+1]+=2,d.bl_count[C]--,k-=2}while(k>0);for(D=C;D!==0;D--)for(I=d.bl_count[D];I!==0;)L=d.heap[--T],L>m||(p[2*L+1]!==D&&(d.opt_len+=(D-p[2*L+1])*p[2*L],p[2*L+1]=D),I--)}})(e,n),PA(t,u,e.bl_count)},H1=(e,n,t)=>{let r,i,a=-1,s=n[1],o=0,l=7,u=4;for(s===0&&(l=138,u=3),n[2*(t+1)+1]=65535,r=0;r<=t;r++)i=s,s=n[2*(r+1)+1],++o<l&&i===s||(o<u?e.bl_tree[2*i]+=o:i!==0?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,a=i,s===0?(l=138,u=3):i===s?(l=6,u=3):(l=7,u=4))},B1=(e,n,t)=>{let r,i,a=-1,s=n[1],o=0,l=7,u=4;for(s===0&&(l=138,u=3),r=0;r<=t;r++)if(i=s,s=n[2*(r+1)+1],!(++o<l&&i===s)){if(o<u)do Gs(e,i,e.bl_tree);while(--o!=0);else i!==0?(i!==a&&(Gs(e,i,e.bl_tree),o--),Gs(e,16,e.bl_tree),ha(e,o-3,2)):o<=10?(Gs(e,17,e.bl_tree),ha(e,o-3,3)):(Gs(e,18,e.bl_tree),ha(e,o-11,7));o=0,a=i,s===0?(l=138,u=3):i===s?(l=6,u=3):(l=7,u=4)}};let G1=!1;const HA=(e,n,t,r)=>{ha(e,0+(r?1:0),3),FA(e),jh(e,t),jh(e,~t),t&&e.pending_buf.set(e.window.subarray(n,n+t),e.pending),e.pending+=t};var ZL=(e,n,t,r)=>{let i,a,s=0;e.level>0?(e.strm.data_type===2&&(e.strm.data_type=(o=>{let l,u=4093624447;for(l=0;l<=31;l++,u>>>=1)if(1&u&&o.dyn_ltree[2*l]!==0)return 0;if(o.dyn_ltree[18]!==0||o.dyn_ltree[20]!==0||o.dyn_ltree[26]!==0)return 1;for(l=32;l<Ay;l++)if(o.dyn_ltree[2*l]!==0)return 1;return 0})(e)),m_(e,e.l_desc),m_(e,e.d_desc),s=(o=>{let l;for(H1(o,o.dyn_ltree,o.l_desc.max_code),H1(o,o.dyn_dtree,o.d_desc.max_code),m_(o,o.bl_desc),l=18;l>=3&&o.bl_tree[2*L1[l]+1]===0;l--);return o.opt_len+=3*(l+1)+5+5+4,l})(e),i=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=i&&(i=a)):i=a=t+5,t+4<=i&&n!==-1?HA(e,n,t,r):e.strategy===4||a===i?(ha(e,2+(r?1:0),3),F1(e,mo,Th)):(ha(e,4+(r?1:0),3),((o,l,u,d)=>{let f;for(ha(o,l-257,5),ha(o,u-1,5),ha(o,d-4,4),f=0;f<d;f++)ha(o,o.bl_tree[2*L1[f]+1],3);B1(o,o.dyn_ltree,l-1),B1(o,o.dyn_dtree,u-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),F1(e,e.dyn_ltree,e.dyn_dtree)),xA(e),r&&FA(e)},JL={_tr_init:e=>{G1||((()=>{let n,t,r,i,a;const s=new Array(16);for(r=0,i=0;i<28;i++)for(wy[i]=r,n=0;n<1<<bg[i];n++)Nh[r++]=i;for(Nh[r-1]=i,a=0,i=0;i<16;i++)for(yp[i]=a,n=0;n<1<<Zv[i];n++)zh[a++]=i;for(a>>=7;i<bh;i++)for(yp[i]=a<<7,n=0;n<1<<Zv[i]-7;n++)zh[256+a++]=i;for(t=0;t<=Sh;t++)s[t]=0;for(n=0;n<=143;)mo[2*n+1]=8,n++,s[8]++;for(;n<=255;)mo[2*n+1]=9,n++,s[9]++;for(;n<=279;)mo[2*n+1]=7,n++,s[7]++;for(;n<=287;)mo[2*n+1]=8,n++,s[8]++;for(PA(mo,287,s),n=0;n<bh;n++)Th[2*n+1]=5,Th[2*n]=kA(n,5);U1=new f_(mo,bg,257,LA,Sh),k1=new f_(Th,Zv,0,bh,Sh),P1=new f_(new Array(0),XL,0,19,7)})(),G1=!0),e.l_desc=new v_(e.dyn_ltree,U1),e.d_desc=new v_(e.dyn_dtree,k1),e.bl_desc=new v_(e.bl_tree,P1),e.bi_buf=0,e.bi_valid=0,xA(e)},_tr_stored_block:HA,_tr_flush_block:ZL,_tr_tally:(e,n,t)=>(e.pending_buf[e.sym_buf+e.sym_next++]=n,e.pending_buf[e.sym_buf+e.sym_next++]=n>>8,e.pending_buf[e.sym_buf+e.sym_next++]=t,n===0?e.dyn_ltree[2*t]++:(e.matches++,n--,e.dyn_ltree[2*(Nh[t]+Ay+1)]++,e.dyn_dtree[2*UA(n)]++),e.sym_next===e.sym_end),_tr_align:e=>{ha(e,2,3),Gs(e,256,mo),(n=>{n.bi_valid===16?(jh(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=255&n.bi_buf,n.bi_buf>>=8,n.bi_valid-=8)})(e)}},Ih=(e,n,t,r)=>{let i=65535&e,a=e>>>16&65535,s=0;for(;t!==0;){s=t>2e3?2e3:t,t-=s;do i=i+n[r++]|0,a=a+i|0;while(--s);i%=65521,a%=65521}return i|a<<16};const eU=new Uint32Array((()=>{let e,n=[];for(var t=0;t<256;t++){e=t;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;n[t]=e}return n})());var hi=(e,n,t,r)=>{const i=eU,a=r+t;e^=-1;for(let s=r;s<a;s++)e=e>>>8^i[255&(e^n[s])];return~e},Iu={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},xu={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:tU,_tr_stored_block:Sg,_tr_flush_block:nU,_tr_tally:Cl,_tr_align:rU}=JL,{Z_NO_FLUSH:bl,Z_PARTIAL_FLUSH:iU,Z_FULL_FLUSH:aU,Z_FINISH:Xa,Z_BLOCK:V1,Z_OK:Si,Z_STREAM_END:z1,Z_STREAM_ERROR:Ps,Z_DATA_ERROR:sU,Z_BUF_ERROR:__,Z_DEFAULT_COMPRESSION:oU,Z_FILTERED:lU,Z_HUFFMAN_ONLY:Cv,Z_RLE:uU,Z_FIXED:cU,Z_DEFAULT_STRATEGY:dU,Z_UNKNOWN:hU,Z_DEFLATED:Cp}=xu,pu=258,$s=262,Vc=42,au=113,dh=666,su=(e,n)=>(e.msg=Iu[n],n),j1=e=>2*e-(e>4?9:0),fl=e=>{let n=e.length;for(;--n>=0;)e[n]=0},fU=e=>{let n,t,r,i=e.w_size;n=e.hash_size,r=n;do t=e.head[--r],e.head[r]=t>=i?t-i:0;while(--n);n=i,r=n;do t=e.prev[--r],e.prev[r]=t>=i?t-i:0;while(--n)};let Sl=(e,n,t)=>(n<<e.hash_shift^t)&e.hash_mask;const Na=e=>{const n=e.state;let t=n.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(e.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+t),e.next_out),e.next_out+=t,n.pending_out+=t,e.total_out+=t,e.avail_out-=t,n.pending-=t,n.pending===0&&(n.pending_out=0))},Ra=(e,n)=>{nU(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,n),e.block_start=e.strstart,Na(e.strm)},Yn=(e,n)=>{e.pending_buf[e.pending++]=n},$d=(e,n)=>{e.pending_buf[e.pending++]=n>>>8&255,e.pending_buf[e.pending++]=255&n},Tg=(e,n,t,r)=>{let i=e.avail_in;return i>r&&(i=r),i===0?0:(e.avail_in-=i,n.set(e.input.subarray(e.next_in,e.next_in+i),t),e.state.wrap===1?e.adler=Ih(e.adler,n,i,t):e.state.wrap===2&&(e.adler=hi(e.adler,n,i,t)),e.next_in+=i,e.total_in+=i,i)},BA=(e,n)=>{let t,r,i=e.max_chain_length,a=e.strstart,s=e.prev_length,o=e.nice_match;const l=e.strstart>e.w_size-$s?e.strstart-(e.w_size-$s):0,u=e.window,d=e.w_mask,f=e.prev,p=e.strstart+pu;let m=u[a+s-1],E=u[a+s];e.prev_length>=e.good_match&&(i>>=2),o>e.lookahead&&(o=e.lookahead);do if(t=n,u[t+s]===E&&u[t+s-1]===m&&u[t]===u[a]&&u[++t]===u[a+1]){a+=2,t++;do;while(u[++a]===u[++t]&&u[++a]===u[++t]&&u[++a]===u[++t]&&u[++a]===u[++t]&&u[++a]===u[++t]&&u[++a]===u[++t]&&u[++a]===u[++t]&&u[++a]===u[++t]&&a<p);if(r=pu-(p-a),a=p-pu,r>s){if(e.match_start=n,s=r,r>=o)break;m=u[a+s-1],E=u[a+s]}}while((n=f[n&d])>l&&--i!=0);return s<=e.lookahead?s:e.lookahead},Hc=e=>{const n=e.w_size;let t,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=n+(n-$s)&&(e.window.set(e.window.subarray(n,n+n-r),0),e.match_start-=n,e.strstart-=n,e.block_start-=n,e.insert>e.strstart&&(e.insert=e.strstart),fU(e),r+=n),e.strm.avail_in===0)break;if(t=Tg(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=t,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=Sl(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=Sl(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<$s&&e.strm.avail_in!==0)},GA=(e,n)=>{let t,r,i,a=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,s=0,o=e.strm.avail_in;do{if(t=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i||(i=e.strm.avail_out-i,r=e.strstart-e.block_start,t>r+e.strm.avail_in&&(t=r+e.strm.avail_in),t>i&&(t=i),t<a&&(t===0&&n!==Xa||n===bl||t!==r+e.strm.avail_in)))break;s=n===Xa&&t===r+e.strm.avail_in?1:0,Sg(e,0,0,s),e.pending_buf[e.pending-4]=t,e.pending_buf[e.pending-3]=t>>8,e.pending_buf[e.pending-2]=~t,e.pending_buf[e.pending-1]=~t>>8,Na(e.strm),r&&(r>t&&(r=t),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,t-=r),t&&(Tg(e.strm,e.strm.output,e.strm.next_out,t),e.strm.next_out+=t,e.strm.avail_out-=t,e.strm.total_out+=t)}while(s===0);return o-=e.strm.avail_in,o&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?4:n!==bl&&n!==Xa&&e.strm.avail_in===0&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(Tg(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,a=i>e.w_size?e.w_size:i,r=e.strstart-e.block_start,(r>=a||(r||n===Xa)&&n!==bl&&e.strm.avail_in===0&&r<=i)&&(t=r>i?i:r,s=n===Xa&&e.strm.avail_in===0&&t===r?1:0,Sg(e,e.block_start,t,s),e.block_start+=t,Na(e.strm)),s?3:1)},g_=(e,n)=>{let t,r;for(;;){if(e.lookahead<$s){if(Hc(e),e.lookahead<$s&&n===bl)return 1;if(e.lookahead===0)break}if(t=0,e.lookahead>=3&&(e.ins_h=Sl(e,e.ins_h,e.window[e.strstart+3-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-$s&&(e.match_length=BA(e,t)),e.match_length>=3)if(r=Cl(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do e.strstart++,e.ins_h=Sl(e,e.ins_h,e.window[e.strstart+3-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!=0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Sl(e,e.ins_h,e.window[e.strstart+1]);else r=Cl(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Ra(e,!1),e.strm.avail_out===0))return 1}return e.insert=e.strstart<2?e.strstart:2,n===Xa?(Ra(e,!0),e.strm.avail_out===0?3:4):e.sym_next&&(Ra(e,!1),e.strm.avail_out===0)?1:2},Tc=(e,n)=>{let t,r,i;for(;;){if(e.lookahead<$s){if(Hc(e),e.lookahead<$s&&n===bl)return 1;if(e.lookahead===0)break}if(t=0,e.lookahead>=3&&(e.ins_h=Sl(e,e.ins_h,e.window[e.strstart+3-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-$s&&(e.match_length=BA(e,t),e.match_length<=5&&(e.strategy===lU||e.match_length===3&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=Cl(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=Sl(e,e.ins_h,e.window[e.strstart+3-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!=0);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(Ra(e,!1),e.strm.avail_out===0))return 1}else if(e.match_available){if(r=Cl(e,0,e.window[e.strstart-1]),r&&Ra(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Cl(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,n===Xa?(Ra(e,!0),e.strm.avail_out===0?3:4):e.sym_next&&(Ra(e,!1),e.strm.avail_out===0)?1:2};function ks(e,n,t,r,i){this.good_length=e,this.max_lazy=n,this.nice_length=t,this.max_chain=r,this.func=i}const hh=[new ks(0,0,0,0,GA),new ks(4,4,8,4,g_),new ks(4,5,16,8,g_),new ks(4,6,32,32,g_),new ks(4,4,16,16,Tc),new ks(8,16,32,32,Tc),new ks(8,16,128,128,Tc),new ks(8,32,128,256,Tc),new ks(32,128,258,1024,Tc),new ks(32,258,258,4096,Tc)];function vU(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Cp,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),fl(this.dyn_ltree),fl(this.dyn_dtree),fl(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),fl(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),fl(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const fh=e=>{if(!e)return 1;const n=e.state;return!n||n.strm!==e||n.status!==Vc&&n.status!==57&&n.status!==69&&n.status!==73&&n.status!==91&&n.status!==103&&n.status!==au&&n.status!==dh?1:0},VA=e=>{if(fh(e))return su(e,Ps);e.total_in=e.total_out=0,e.data_type=hU;const n=e.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap===2?57:n.wrap?Vc:au,e.adler=n.wrap===2?0:1,n.last_flush=-2,tU(n),Si},zA=e=>{const n=VA(e);var t;return n===Si&&((t=e.state).window_size=2*t.w_size,fl(t.head),t.max_lazy_match=hh[t.level].max_lazy,t.good_match=hh[t.level].good_length,t.nice_match=hh[t.level].nice_length,t.max_chain_length=hh[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n},q1=(e,n,t,r,i,a)=>{if(!e)return Ps;let s=1;if(n===oU&&(n=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>9||t!==Cp||r<8||r>15||n<0||n>9||a<0||a>cU||r===8&&s!==1)return su(e,Ps);r===8&&(r=9);const o=new vU;return e.state=o,o.strm=e,o.status=Vc,o.wrap=s,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=n,o.strategy=a,o.method=t,zA(e)};var Mh={deflateInit:(e,n)=>q1(e,n,Cp,15,8,dU),deflateInit2:q1,deflateReset:zA,deflateResetKeep:VA,deflateSetHeader:(e,n)=>fh(e)||e.state.wrap!==2?Ps:(e.state.gzhead=n,Si),deflate:(e,n)=>{if(fh(e)||n>V1||n<0)return e?su(e,Ps):Ps;const t=e.state;if(!e.output||e.avail_in!==0&&!e.input||t.status===dh&&n!==Xa)return su(e,e.avail_out===0?__:Ps);const r=t.last_flush;if(t.last_flush=n,t.pending!==0){if(Na(e),e.avail_out===0)return t.last_flush=-1,Si}else if(e.avail_in===0&&j1(n)<=j1(r)&&n!==Xa)return su(e,__);if(t.status===dh&&e.avail_in!==0)return su(e,__);if(t.status===Vc&&t.wrap===0&&(t.status=au),t.status===Vc){let i=Cp+(t.w_bits-8<<4)<<8,a=-1;if(a=t.strategy>=Cv||t.level<2?0:t.level<6?1:t.level===6?2:3,i|=a<<6,t.strstart!==0&&(i|=32),i+=31-i%31,$d(t,i),t.strstart!==0&&($d(t,e.adler>>>16),$d(t,65535&e.adler)),e.adler=1,t.status=au,Na(e),t.pending!==0)return t.last_flush=-1,Si}if(t.status===57){if(e.adler=0,Yn(t,31),Yn(t,139),Yn(t,8),t.gzhead)Yn(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),Yn(t,255&t.gzhead.time),Yn(t,t.gzhead.time>>8&255),Yn(t,t.gzhead.time>>16&255),Yn(t,t.gzhead.time>>24&255),Yn(t,t.level===9?2:t.strategy>=Cv||t.level<2?4:0),Yn(t,255&t.gzhead.os),t.gzhead.extra&&t.gzhead.extra.length&&(Yn(t,255&t.gzhead.extra.length),Yn(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(e.adler=hi(e.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=69;else if(Yn(t,0),Yn(t,0),Yn(t,0),Yn(t,0),Yn(t,0),Yn(t,t.level===9?2:t.strategy>=Cv||t.level<2?4:0),Yn(t,3),t.status=au,Na(e),t.pending!==0)return t.last_flush=-1,Si}if(t.status===69){if(t.gzhead.extra){let i=t.pending,a=(65535&t.gzhead.extra.length)-t.gzindex;for(;t.pending+a>t.pending_buf_size;){let o=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+o),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>i&&(e.adler=hi(e.adler,t.pending_buf,t.pending-i,i)),t.gzindex+=o,Na(e),t.pending!==0)return t.last_flush=-1,Si;i=0,a-=o}let s=new Uint8Array(t.gzhead.extra);t.pending_buf.set(s.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending+=a,t.gzhead.hcrc&&t.pending>i&&(e.adler=hi(e.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=73}if(t.status===73){if(t.gzhead.name){let i,a=t.pending;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(e.adler=hi(e.adler,t.pending_buf,t.pending-a,a)),Na(e),t.pending!==0)return t.last_flush=-1,Si;a=0}i=t.gzindex<t.gzhead.name.length?255&t.gzhead.name.charCodeAt(t.gzindex++):0,Yn(t,i)}while(i!==0);t.gzhead.hcrc&&t.pending>a&&(e.adler=hi(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex=0}t.status=91}if(t.status===91){if(t.gzhead.comment){let i,a=t.pending;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(e.adler=hi(e.adler,t.pending_buf,t.pending-a,a)),Na(e),t.pending!==0)return t.last_flush=-1,Si;a=0}i=t.gzindex<t.gzhead.comment.length?255&t.gzhead.comment.charCodeAt(t.gzindex++):0,Yn(t,i)}while(i!==0);t.gzhead.hcrc&&t.pending>a&&(e.adler=hi(e.adler,t.pending_buf,t.pending-a,a))}t.status=103}if(t.status===103){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(Na(e),t.pending!==0))return t.last_flush=-1,Si;Yn(t,255&e.adler),Yn(t,e.adler>>8&255),e.adler=0}if(t.status=au,Na(e),t.pending!==0)return t.last_flush=-1,Si}if(e.avail_in!==0||t.lookahead!==0||n!==bl&&t.status!==dh){let i=t.level===0?GA(t,n):t.strategy===Cv?((a,s)=>{let o;for(;;){if(a.lookahead===0&&(Hc(a),a.lookahead===0)){if(s===bl)return 1;break}if(a.match_length=0,o=Cl(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,o&&(Ra(a,!1),a.strm.avail_out===0))return 1}return a.insert=0,s===Xa?(Ra(a,!0),a.strm.avail_out===0?3:4):a.sym_next&&(Ra(a,!1),a.strm.avail_out===0)?1:2})(t,n):t.strategy===uU?((a,s)=>{let o,l,u,d;const f=a.window;for(;;){if(a.lookahead<=pu){if(Hc(a),a.lookahead<=pu&&s===bl)return 1;if(a.lookahead===0)break}if(a.match_length=0,a.lookahead>=3&&a.strstart>0&&(u=a.strstart-1,l=f[u],l===f[++u]&&l===f[++u]&&l===f[++u])){d=a.strstart+pu;do;while(l===f[++u]&&l===f[++u]&&l===f[++u]&&l===f[++u]&&l===f[++u]&&l===f[++u]&&l===f[++u]&&l===f[++u]&&u<d);a.match_length=pu-(d-u),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=3?(o=Cl(a,1,a.match_length-3),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(o=Cl(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),o&&(Ra(a,!1),a.strm.avail_out===0))return 1}return a.insert=0,s===Xa?(Ra(a,!0),a.strm.avail_out===0?3:4):a.sym_next&&(Ra(a,!1),a.strm.avail_out===0)?1:2})(t,n):hh[t.level].func(t,n);if(i!==3&&i!==4||(t.status=dh),i===1||i===3)return e.avail_out===0&&(t.last_flush=-1),Si;if(i===2&&(n===iU?rU(t):n!==V1&&(Sg(t,0,0,!1),n===aU&&(fl(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),Na(e),e.avail_out===0))return t.last_flush=-1,Si}return n!==Xa?Si:t.wrap<=0?z1:(t.wrap===2?(Yn(t,255&e.adler),Yn(t,e.adler>>8&255),Yn(t,e.adler>>16&255),Yn(t,e.adler>>24&255),Yn(t,255&e.total_in),Yn(t,e.total_in>>8&255),Yn(t,e.total_in>>16&255),Yn(t,e.total_in>>24&255)):($d(t,e.adler>>>16),$d(t,65535&e.adler)),Na(e),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?Si:z1)},deflateEnd:e=>{if(fh(e))return Ps;const n=e.state.status;return e.state=null,n===au?su(e,sU):Si},deflateSetDictionary:(e,n)=>{let t=n.length;if(fh(e))return Ps;const r=e.state,i=r.wrap;if(i===2||i===1&&r.status!==Vc||r.lookahead)return Ps;if(i===1&&(e.adler=Ih(e.adler,n,t,0)),r.wrap=0,t>=r.w_size){i===0&&(fl(r.head),r.strstart=0,r.block_start=0,r.insert=0);let l=new Uint8Array(r.w_size);l.set(n.subarray(t-r.w_size,t),0),n=l,t=r.w_size}const a=e.avail_in,s=e.next_in,o=e.input;for(e.avail_in=t,e.next_in=0,e.input=n,Hc(r);r.lookahead>=3;){let l=r.strstart,u=r.lookahead-2;do r.ins_h=Sl(r,r.ins_h,r.window[l+3-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++;while(--u);r.strstart=l,r.lookahead=2,Hc(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=s,e.input=o,e.avail_in=a,r.wrap=i,Si},deflateInfo:"pako deflate (from Nodeca project)"};const pU=(e,n)=>Object.prototype.hasOwnProperty.call(e,n);var jA=function(e){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const t=n.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const r in t)pU(t,r)&&(e[r]=t[r])}}return e},qA=e=>{let n=0;for(let r=0,i=e.length;r<i;r++)n+=e[r].length;const t=new Uint8Array(n);for(let r=0,i=0,a=e.length;r<a;r++){let s=e[r];t.set(s,i),i+=s.length}return t};let KA=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{KA=!1}const qh=new Uint8Array(256);for(let e=0;e<256;e++)qh[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;qh[254]=qh[254]=1;var Ry=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let n,t,r,i,a,s=e.length,o=0;for(i=0;i<s;i++)t=e.charCodeAt(i),(64512&t)==55296&&i+1<s&&(r=e.charCodeAt(i+1),(64512&r)==56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),o+=t<128?1:t<2048?2:t<65536?3:4;for(n=new Uint8Array(o),a=0,i=0;a<o;i++)t=e.charCodeAt(i),(64512&t)==55296&&i+1<s&&(r=e.charCodeAt(i+1),(64512&r)==56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),t<128?n[a++]=t:t<2048?(n[a++]=192|t>>>6,n[a++]=128|63&t):t<65536?(n[a++]=224|t>>>12,n[a++]=128|t>>>6&63,n[a++]=128|63&t):(n[a++]=240|t>>>18,n[a++]=128|t>>>12&63,n[a++]=128|t>>>6&63,n[a++]=128|63&t);return n},mU=(e,n)=>{const t=n||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,n));let r,i;const a=new Array(2*t);for(i=0,r=0;r<t;){let s=e[r++];if(s<128){a[i++]=s;continue}let o=qh[s];if(o>4)a[i++]=65533,r+=o-1;else{for(s&=o===2?31:o===3?15:7;o>1&&r<t;)s=s<<6|63&e[r++],o--;o>1?a[i++]=65533:s<65536?a[i++]=s:(s-=65536,a[i++]=55296|s>>10&1023,a[i++]=56320|1023&s)}}return((s,o)=>{if(o<65534&&s.subarray&&KA)return String.fromCharCode.apply(null,s.length===o?s:s.subarray(0,o));let l="";for(let u=0;u<o;u++)l+=String.fromCharCode(s[u]);return l})(a,i)},_U=(e,n)=>{(n=n||e.length)>e.length&&(n=e.length);let t=n-1;for(;t>=0&&(192&e[t])==128;)t--;return t<0||t===0?n:t+qh[e[t]]>n?t:n},$A=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const WA=Object.prototype.toString,{Z_NO_FLUSH:gU,Z_SYNC_FLUSH:EU,Z_FULL_FLUSH:yU,Z_FINISH:CU,Z_OK:bp,Z_STREAM_END:bU,Z_DEFAULT_COMPRESSION:SU,Z_DEFAULT_STRATEGY:TU,Z_DEFLATED:NU}=xu;function Ah(e){this.options=jA({level:SU,method:NU,chunkSize:16384,windowBits:15,memLevel:8,strategy:TU},e||{});let n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new $A,this.strm.avail_out=0;let t=Mh.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(t!==bp)throw new Error(Iu[t]);if(n.header&&Mh.deflateSetHeader(this.strm,n.header),n.dictionary){let r;if(r=typeof n.dictionary=="string"?Ry(n.dictionary):WA.call(n.dictionary)==="[object ArrayBuffer]"?new Uint8Array(n.dictionary):n.dictionary,t=Mh.deflateSetDictionary(this.strm,r),t!==bp)throw new Error(Iu[t]);this._dict_set=!0}}function E_(e,n){const t=new Ah(n);if(t.push(e,!0),t.err)throw t.msg||Iu[t.err];return t.result}Ah.prototype.push=function(e,n){const t=this.strm,r=this.options.chunkSize;let i,a;if(this.ended)return!1;for(a=n===~~n?n:n===!0?CU:gU,typeof e=="string"?t.input=Ry(e):WA.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;)if(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),(a===EU||a===yU)&&t.avail_out<=6)this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;else{if(i=Mh.deflate(t,a),i===bU)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),i=Mh.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===bp;if(t.avail_out!==0){if(a>0&&t.next_out>0)this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;else if(t.avail_in===0)break}else this.onData(t.output)}return!0},Ah.prototype.onData=function(e){this.chunks.push(e)},Ah.prototype.onEnd=function(e){e===bp&&(this.result=qA(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var IU={Deflate:Ah,deflate:E_,deflateRaw:function(e,n){return(n=n||{}).raw=!0,E_(e,n)},gzip:function(e,n){return(n=n||{}).gzip=!0,E_(e,n)},constants:xu};const bv=16209;var MU=function(e,n){let t,r,i,a,s,o,l,u,d,f,p,m,E,g,y,S,C,T,I,L,D,O,R,k;const P=e.state;t=e.next_in,R=e.input,r=t+(e.avail_in-5),i=e.next_out,k=e.output,a=i-(n-e.avail_out),s=i+(e.avail_out-257),o=P.dmax,l=P.wsize,u=P.whave,d=P.wnext,f=P.window,p=P.hold,m=P.bits,E=P.lencode,g=P.distcode,y=(1<<P.lenbits)-1,S=(1<<P.distbits)-1;e:do{m<15&&(p+=R[t++]<<m,m+=8,p+=R[t++]<<m,m+=8),C=E[p&y];t:for(;;){if(T=C>>>24,p>>>=T,m-=T,T=C>>>16&255,T===0)k[i++]=65535&C;else{if(!(16&T)){if(64&T){if(32&T){P.mode=16191;break e}e.msg="invalid literal/length code",P.mode=bv;break e}C=E[(65535&C)+(p&(1<<T)-1)];continue t}for(I=65535&C,T&=15,T&&(m<T&&(p+=R[t++]<<m,m+=8),I+=p&(1<<T)-1,p>>>=T,m-=T),m<15&&(p+=R[t++]<<m,m+=8,p+=R[t++]<<m,m+=8),C=g[p&S];;){if(T=C>>>24,p>>>=T,m-=T,T=C>>>16&255,16&T){if(L=65535&C,T&=15,m<T&&(p+=R[t++]<<m,m+=8,m<T&&(p+=R[t++]<<m,m+=8)),L+=p&(1<<T)-1,L>o){e.msg="invalid distance too far back",P.mode=bv;break e}if(p>>>=T,m-=T,T=i-a,L>T){if(T=L-T,T>u&&P.sane){e.msg="invalid distance too far back",P.mode=bv;break e}if(D=0,O=f,d===0){if(D+=l-T,T<I){I-=T;do k[i++]=f[D++];while(--T);D=i-L,O=k}}else if(d<T){if(D+=l+d-T,T-=d,T<I){I-=T;do k[i++]=f[D++];while(--T);if(D=0,d<I){T=d,I-=T;do k[i++]=f[D++];while(--T);D=i-L,O=k}}}else if(D+=d-T,T<I){I-=T;do k[i++]=f[D++];while(--T);D=i-L,O=k}for(;I>2;)k[i++]=O[D++],k[i++]=O[D++],k[i++]=O[D++],I-=3;I&&(k[i++]=O[D++],I>1&&(k[i++]=O[D++]))}else{D=i-L;do k[i++]=k[D++],k[i++]=k[D++],k[i++]=k[D++],I-=3;while(I>2);I&&(k[i++]=k[D++],I>1&&(k[i++]=k[D++]))}break}if(64&T){e.msg="invalid distance code",P.mode=bv;break e}C=g[(65535&C)+(p&(1<<T)-1)]}}break}}while(t<r&&i<s);I=m>>3,t-=I,m-=I<<3,p&=(1<<m)-1,e.next_in=t,e.next_out=i,e.avail_in=t<r?r-t+5:5-(t-r),e.avail_out=i<s?s-i+257:257-(i-s),P.hold=p,P.bits=m};const Sv=15,AU=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),wU=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),RU=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),OU=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var wh=(e,n,t,r,i,a,s,o)=>{const l=o.bits;let u,d,f,p,m,E,g=0,y=0,S=0,C=0,T=0,I=0,L=0,D=0,O=0,R=0,k=null;const P=new Uint16Array(16),G=new Uint16Array(16);let V,H,F,z=null;for(g=0;g<=Sv;g++)P[g]=0;for(y=0;y<r;y++)P[n[t+y]]++;for(T=l,C=Sv;C>=1&&P[C]===0;C--);if(T>C&&(T=C),C===0)return i[a++]=20971520,i[a++]=20971520,o.bits=1,0;for(S=1;S<C&&P[S]===0;S++);for(T<S&&(T=S),D=1,g=1;g<=Sv;g++)if(D<<=1,D-=P[g],D<0)return-1;if(D>0&&(e===0||C!==1))return-1;for(G[1]=0,g=1;g<Sv;g++)G[g+1]=G[g]+P[g];for(y=0;y<r;y++)n[t+y]!==0&&(s[G[n[t+y]]++]=y);if(e===0?(k=z=s,E=20):e===1?(k=AU,z=wU,E=257):(k=RU,z=OU,E=0),R=0,y=0,g=S,m=a,I=T,L=0,f=-1,O=1<<T,p=O-1,e===1&&O>852||e===2&&O>592)return 1;for(;;){V=g-L,s[y]+1<E?(H=0,F=s[y]):s[y]>=E?(H=z[s[y]-E],F=k[s[y]-E]):(H=96,F=0),u=1<<g-L,d=1<<I,S=d;do d-=u,i[m+(R>>L)+d]=V<<24|H<<16|F;while(d!==0);for(u=1<<g-1;R&u;)u>>=1;if(u!==0?(R&=u-1,R+=u):R=0,y++,--P[g]==0){if(g===C)break;g=n[t+s[y]]}if(g>T&&(R&p)!==f){for(L===0&&(L=T),m+=S,I=g-L,D=1<<I;I+L<C&&(D-=P[I+L],!(D<=0));)I++,D<<=1;if(O+=1<<I,e===1&&O>852||e===2&&O>592)return 1;f=R&p,i[f]=T<<24|I<<16|m-a}}return R!==0&&(i[m+R]=g-L<<24|64<<16),o.bits=T,0};const{Z_FINISH:K1,Z_BLOCK:DU,Z_TREES:Tv,Z_OK:ou,Z_STREAM_END:LU,Z_NEED_DICT:UU,Z_STREAM_ERROR:Wa,Z_DATA_ERROR:$1,Z_MEM_ERROR:W1,Z_BUF_ERROR:kU,Z_DEFLATED:Q1}=xu,Jp=16180,Nv=16190,fo=16191,y_=16192,C_=16194,Iv=16199,Mv=16200,b_=16206,Nr=16209,Y1=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function PU(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const mu=e=>{if(!e)return 1;const n=e.state;return!n||n.strm!==e||n.mode<Jp||n.mode>16211?1:0},QA=e=>{if(mu(e))return Wa;const n=e.state;return e.total_in=e.total_out=n.total=0,e.msg="",n.wrap&&(e.adler=1&n.wrap),n.mode=Jp,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(852),n.distcode=n.distdyn=new Int32Array(592),n.sane=1,n.back=-1,ou},YA=e=>{if(mu(e))return Wa;const n=e.state;return n.wsize=0,n.whave=0,n.wnext=0,QA(e)},XA=(e,n)=>{let t;if(mu(e))return Wa;const r=e.state;return n<0?(t=0,n=-n):(t=5+(n>>4),n<48&&(n&=15)),n&&(n<8||n>15)?Wa:(r.window!==null&&r.wbits!==n&&(r.window=null),r.wrap=t,r.wbits=n,YA(e))},X1=(e,n)=>{if(!e)return Wa;const t=new PU;e.state=t,t.strm=e,t.window=null,t.mode=Jp;const r=XA(e,n);return r!==ou&&(e.state=null),r};let S_,T_,Z1=!0;const xU=e=>{if(Z1){S_=new Int32Array(512),T_=new Int32Array(32);let n=0;for(;n<144;)e.lens[n++]=8;for(;n<256;)e.lens[n++]=9;for(;n<280;)e.lens[n++]=7;for(;n<288;)e.lens[n++]=8;for(wh(1,e.lens,0,288,S_,0,e.work,{bits:9}),n=0;n<32;)e.lens[n++]=5;wh(2,e.lens,0,32,T_,0,e.work,{bits:5}),Z1=!1}e.lencode=S_,e.lenbits=9,e.distcode=T_,e.distbits=5},J1=(e,n,t,r)=>{let i;const a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(n.subarray(t-a.wsize,t),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(n.subarray(t-r,t-r+i),a.wnext),(r-=i)?(a.window.set(n.subarray(t-r,t),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0};var Eo={inflateReset:YA,inflateReset2:XA,inflateResetKeep:QA,inflateInit:e=>X1(e,15),inflateInit2:X1,inflate:(e,n)=>{let t,r,i,a,s,o,l,u,d,f,p,m,E,g,y,S,C,T,I,L,D,O,R=0;const k=new Uint8Array(4);let P,G;const V=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(mu(e)||!e.output||!e.input&&e.avail_in!==0)return Wa;t=e.state,t.mode===fo&&(t.mode=y_),s=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,r=e.input,o=e.avail_in,u=t.hold,d=t.bits,f=o,p=l,O=ou;e:for(;;)switch(t.mode){case Jp:if(t.wrap===0){t.mode=y_;break}for(;d<16;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(2&t.wrap&&u===35615){t.wbits===0&&(t.wbits=15),t.check=0,k[0]=255&u,k[1]=u>>>8&255,t.check=hi(t.check,k,2,0),u=0,d=0,t.mode=16181;break}if(t.head&&(t.head.done=!1),!(1&t.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",t.mode=Nr;break}if((15&u)!==Q1){e.msg="unknown compression method",t.mode=Nr;break}if(u>>>=4,d-=4,D=8+(15&u),t.wbits===0&&(t.wbits=D),D>15||D>t.wbits){e.msg="invalid window size",t.mode=Nr;break}t.dmax=1<<t.wbits,t.flags=0,e.adler=t.check=1,t.mode=512&u?16189:fo,u=0,d=0;break;case 16181:for(;d<16;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(t.flags=u,(255&t.flags)!==Q1){e.msg="unknown compression method",t.mode=Nr;break}if(57344&t.flags){e.msg="unknown header flags set",t.mode=Nr;break}t.head&&(t.head.text=u>>8&1),512&t.flags&&4&t.wrap&&(k[0]=255&u,k[1]=u>>>8&255,t.check=hi(t.check,k,2,0)),u=0,d=0,t.mode=16182;case 16182:for(;d<32;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}t.head&&(t.head.time=u),512&t.flags&&4&t.wrap&&(k[0]=255&u,k[1]=u>>>8&255,k[2]=u>>>16&255,k[3]=u>>>24&255,t.check=hi(t.check,k,4,0)),u=0,d=0,t.mode=16183;case 16183:for(;d<16;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}t.head&&(t.head.xflags=255&u,t.head.os=u>>8),512&t.flags&&4&t.wrap&&(k[0]=255&u,k[1]=u>>>8&255,t.check=hi(t.check,k,2,0)),u=0,d=0,t.mode=16184;case 16184:if(1024&t.flags){for(;d<16;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}t.length=u,t.head&&(t.head.extra_len=u),512&t.flags&&4&t.wrap&&(k[0]=255&u,k[1]=u>>>8&255,t.check=hi(t.check,k,2,0)),u=0,d=0}else t.head&&(t.head.extra=null);t.mode=16185;case 16185:if(1024&t.flags&&(m=t.length,m>o&&(m=o),m&&(t.head&&(D=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(a,a+m),D)),512&t.flags&&4&t.wrap&&(t.check=hi(t.check,r,m,a)),o-=m,a+=m,t.length-=m),t.length))break e;t.length=0,t.mode=16186;case 16186:if(2048&t.flags){if(o===0)break e;m=0;do D=r[a+m++],t.head&&D&&t.length<65536&&(t.head.name+=String.fromCharCode(D));while(D&&m<o);if(512&t.flags&&4&t.wrap&&(t.check=hi(t.check,r,m,a)),o-=m,a+=m,D)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=16187;case 16187:if(4096&t.flags){if(o===0)break e;m=0;do D=r[a+m++],t.head&&D&&t.length<65536&&(t.head.comment+=String.fromCharCode(D));while(D&&m<o);if(512&t.flags&&4&t.wrap&&(t.check=hi(t.check,r,m,a)),o-=m,a+=m,D)break e}else t.head&&(t.head.comment=null);t.mode=16188;case 16188:if(512&t.flags){for(;d<16;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(4&t.wrap&&u!==(65535&t.check)){e.msg="header crc mismatch",t.mode=Nr;break}u=0,d=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=fo;break;case 16189:for(;d<32;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}e.adler=t.check=Y1(u),u=0,d=0,t.mode=Nv;case Nv:if(t.havedict===0)return e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,t.hold=u,t.bits=d,UU;e.adler=t.check=1,t.mode=fo;case fo:if(n===DU||n===Tv)break e;case y_:if(t.last){u>>>=7&d,d-=7&d,t.mode=b_;break}for(;d<3;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}switch(t.last=1&u,u>>>=1,d-=1,3&u){case 0:t.mode=16193;break;case 1:if(xU(t),t.mode=Iv,n===Tv){u>>>=2,d-=2;break e}break;case 2:t.mode=16196;break;case 3:e.msg="invalid block type",t.mode=Nr}u>>>=2,d-=2;break;case 16193:for(u>>>=7&d,d-=7&d;d<32;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if((65535&u)!=(u>>>16^65535)){e.msg="invalid stored block lengths",t.mode=Nr;break}if(t.length=65535&u,u=0,d=0,t.mode=C_,n===Tv)break e;case C_:t.mode=16195;case 16195:if(m=t.length,m){if(m>o&&(m=o),m>l&&(m=l),m===0)break e;i.set(r.subarray(a,a+m),s),o-=m,a+=m,l-=m,s+=m,t.length-=m;break}t.mode=fo;break;case 16196:for(;d<14;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(t.nlen=257+(31&u),u>>>=5,d-=5,t.ndist=1+(31&u),u>>>=5,d-=5,t.ncode=4+(15&u),u>>>=4,d-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=Nr;break}t.have=0,t.mode=16197;case 16197:for(;t.have<t.ncode;){for(;d<3;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}t.lens[V[t.have++]]=7&u,u>>>=3,d-=3}for(;t.have<19;)t.lens[V[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,P={bits:t.lenbits},O=wh(0,t.lens,0,19,t.lencode,0,t.work,P),t.lenbits=P.bits,O){e.msg="invalid code lengths set",t.mode=Nr;break}t.have=0,t.mode=16198;case 16198:for(;t.have<t.nlen+t.ndist;){for(;R=t.lencode[u&(1<<t.lenbits)-1],y=R>>>24,S=R>>>16&255,C=65535&R,!(y<=d);){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(C<16)u>>>=y,d-=y,t.lens[t.have++]=C;else{if(C===16){for(G=y+2;d<G;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(u>>>=y,d-=y,t.have===0){e.msg="invalid bit length repeat",t.mode=Nr;break}D=t.lens[t.have-1],m=3+(3&u),u>>>=2,d-=2}else if(C===17){for(G=y+3;d<G;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}u>>>=y,d-=y,D=0,m=3+(7&u),u>>>=3,d-=3}else{for(G=y+7;d<G;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}u>>>=y,d-=y,D=0,m=11+(127&u),u>>>=7,d-=7}if(t.have+m>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=Nr;break}for(;m--;)t.lens[t.have++]=D}}if(t.mode===Nr)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=Nr;break}if(t.lenbits=9,P={bits:t.lenbits},O=wh(1,t.lens,0,t.nlen,t.lencode,0,t.work,P),t.lenbits=P.bits,O){e.msg="invalid literal/lengths set",t.mode=Nr;break}if(t.distbits=6,t.distcode=t.distdyn,P={bits:t.distbits},O=wh(2,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,P),t.distbits=P.bits,O){e.msg="invalid distances set",t.mode=Nr;break}if(t.mode=Iv,n===Tv)break e;case Iv:t.mode=Mv;case Mv:if(o>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,t.hold=u,t.bits=d,MU(e,p),s=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,r=e.input,o=e.avail_in,u=t.hold,d=t.bits,t.mode===fo&&(t.back=-1);break}for(t.back=0;R=t.lencode[u&(1<<t.lenbits)-1],y=R>>>24,S=R>>>16&255,C=65535&R,!(y<=d);){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(S&&!(240&S)){for(T=y,I=S,L=C;R=t.lencode[L+((u&(1<<T+I)-1)>>T)],y=R>>>24,S=R>>>16&255,C=65535&R,!(T+y<=d);){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}u>>>=T,d-=T,t.back+=T}if(u>>>=y,d-=y,t.back+=y,t.length=C,S===0){t.mode=16205;break}if(32&S){t.back=-1,t.mode=fo;break}if(64&S){e.msg="invalid literal/length code",t.mode=Nr;break}t.extra=15&S,t.mode=16201;case 16201:if(t.extra){for(G=t.extra;d<G;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}t.length+=u&(1<<t.extra)-1,u>>>=t.extra,d-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=16202;case 16202:for(;R=t.distcode[u&(1<<t.distbits)-1],y=R>>>24,S=R>>>16&255,C=65535&R,!(y<=d);){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(!(240&S)){for(T=y,I=S,L=C;R=t.distcode[L+((u&(1<<T+I)-1)>>T)],y=R>>>24,S=R>>>16&255,C=65535&R,!(T+y<=d);){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}u>>>=T,d-=T,t.back+=T}if(u>>>=y,d-=y,t.back+=y,64&S){e.msg="invalid distance code",t.mode=Nr;break}t.offset=C,t.extra=15&S,t.mode=16203;case 16203:if(t.extra){for(G=t.extra;d<G;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}t.offset+=u&(1<<t.extra)-1,u>>>=t.extra,d-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=Nr;break}t.mode=16204;case 16204:if(l===0)break e;if(m=p-l,t.offset>m){if(m=t.offset-m,m>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=Nr;break}m>t.wnext?(m-=t.wnext,E=t.wsize-m):E=t.wnext-m,m>t.length&&(m=t.length),g=t.window}else g=i,E=s-t.offset,m=t.length;m>l&&(m=l),l-=m,t.length-=m;do i[s++]=g[E++];while(--m);t.length===0&&(t.mode=Mv);break;case 16205:if(l===0)break e;i[s++]=t.length,l--,t.mode=Mv;break;case b_:if(t.wrap){for(;d<32;){if(o===0)break e;o--,u|=r[a++]<<d,d+=8}if(p-=l,e.total_out+=p,t.total+=p,4&t.wrap&&p&&(e.adler=t.check=t.flags?hi(t.check,i,p,s-p):Ih(t.check,i,p,s-p)),p=l,4&t.wrap&&(t.flags?u:Y1(u))!==t.check){e.msg="incorrect data check",t.mode=Nr;break}u=0,d=0}t.mode=16207;case 16207:if(t.wrap&&t.flags){for(;d<32;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(4&t.wrap&&u!==(4294967295&t.total)){e.msg="incorrect length check",t.mode=Nr;break}u=0,d=0}t.mode=16208;case 16208:O=LU;break e;case Nr:O=$1;break e;case 16210:return W1;default:return Wa}return e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,t.hold=u,t.bits=d,(t.wsize||p!==e.avail_out&&t.mode<Nr&&(t.mode<b_||n!==K1))&&J1(e,e.output,e.next_out,p-e.avail_out),f-=e.avail_in,p-=e.avail_out,e.total_in+=f,e.total_out+=p,t.total+=p,4&t.wrap&&p&&(e.adler=t.check=t.flags?hi(t.check,i,p,e.next_out-p):Ih(t.check,i,p,e.next_out-p)),e.data_type=t.bits+(t.last?64:0)+(t.mode===fo?128:0)+(t.mode===Iv||t.mode===C_?256:0),(f===0&&p===0||n===K1)&&O===ou&&(O=kU),O},inflateEnd:e=>{if(mu(e))return Wa;let n=e.state;return n.window&&(n.window=null),e.state=null,ou},inflateGetHeader:(e,n)=>{if(mu(e))return Wa;const t=e.state;return 2&t.wrap?(t.head=n,n.done=!1,ou):Wa},inflateSetDictionary:(e,n)=>{const t=n.length;let r,i,a;return mu(e)?Wa:(r=e.state,r.wrap!==0&&r.mode!==Nv?Wa:r.mode===Nv&&(i=1,i=Ih(i,n,t,0),i!==r.check)?$1:(a=J1(e,n,t,t),a?(r.mode=16210,W1):(r.havedict=1,ou)))},inflateInfo:"pako inflate (from Nodeca project)"},FU=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const ZA=Object.prototype.toString,{Z_NO_FLUSH:HU,Z_FINISH:BU,Z_OK:Rh,Z_STREAM_END:N_,Z_NEED_DICT:I_,Z_STREAM_ERROR:GU,Z_DATA_ERROR:eT,Z_MEM_ERROR:VU}=xu;function Oh(e){this.options=jA({chunkSize:65536,windowBits:15,to:""},e||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),!(n.windowBits>=0&&n.windowBits<16)||e&&e.windowBits||(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(15&n.windowBits||(n.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new $A,this.strm.avail_out=0;let t=Eo.inflateInit2(this.strm,n.windowBits);if(t!==Rh)throw new Error(Iu[t]);if(this.header=new FU,Eo.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=Ry(n.dictionary):ZA.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(t=Eo.inflateSetDictionary(this.strm,n.dictionary),t!==Rh)))throw new Error(Iu[t])}function M_(e,n){const t=new Oh(n);if(t.push(e),t.err)throw t.msg||Iu[t.err];return t.result}Oh.prototype.push=function(e,n){const t=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,s,o;if(this.ended)return!1;for(s=n===~~n?n:n===!0?BU:HU,ZA.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),a=Eo.inflate(t,s),a===I_&&i&&(a=Eo.inflateSetDictionary(t,i),a===Rh?a=Eo.inflate(t,s):a===eT&&(a=I_));t.avail_in>0&&a===N_&&t.state.wrap>0&&e[t.next_in]!==0;)Eo.inflateReset(t),a=Eo.inflate(t,s);switch(a){case GU:case eT:case I_:case VU:return this.onEnd(a),this.ended=!0,!1}if(o=t.avail_out,t.next_out&&(t.avail_out===0||a===N_))if(this.options.to==="string"){let l=_U(t.output,t.next_out),u=t.next_out-l,d=mU(t.output,l);t.next_out=u,t.avail_out=r-u,u&&t.output.set(t.output.subarray(l,l+u),0),this.onData(d)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(a!==Rh||o!==0){if(a===N_)return a=Eo.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(t.avail_in===0)break}}return!0},Oh.prototype.onData=function(e){this.chunks.push(e)},Oh.prototype.onEnd=function(e){e===Rh&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=qA(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var zU={Inflate:Oh,inflate:M_,inflateRaw:function(e,n){return(n=n||{}).raw=!0,M_(e,n)},ungzip:M_,constants:xu};const{Deflate:jU,deflate:qU,deflateRaw:KU,gzip:$U}=IU,{Inflate:WU,inflate:QU,inflateRaw:YU,ungzip:XU}=zU;var Vs,ZU={Deflate:jU,deflate:qU,deflateRaw:KU,gzip:$U,Inflate:WU,inflate:QU,inflateRaw:YU,ungzip:XU,constants:xu},A_=function(e){return A(void 0,void 0,void 0,function(){var n;return M(this,function(t){return n=ZU.ungzip(e),[2,String.fromCharCode.apply(null,n)]})})};(function(e){e.CONNECTING="CONNECTING",e.OPEN="OPEN",e.CLOSED="CLOSED"})(Vs||(Vs={}));var On,JU=function(e){function n(t,r){var i=r.sdkState,a=r.dispatcher,s=r.logger,o=e.call(this)||this;return o.lastActive=0,o._iid=t,o._sdkState=i,o._dispatcher=a,o._logger=s,o}return B(n,e),Object.defineProperty(n.prototype,"isOpen",{get:function(){return this.connectionState===Vs.OPEN},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"connectionState",{get:function(){if(this._ws)switch(this._ws.readyState){case 0:return Vs.CONNECTING;case 1:return Vs.OPEN}return Vs.CLOSED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ws",{get:function(){var t;return(t=this._ws)!==null&&t!==void 0?t:null},enumerable:!1,configurable:!0}),n.prototype._handleMessage=function(t){var r=this;t.split(`
`).forEach(function(i){if(i){var a=Wn.createFromRawMessage(r._iid,i);if(r._logger.debug("receive websocket event",a),a.code==="LOGI")r.dispatch("message",a);else if(a.code==="PONG")r.dispatch("pong");else if(a.code==="EXPR"){if(a.payload){var s=new Qc(a.payload);s.expiresIn>=0&&r._dispatcher.dispatch(s)}}else a.code==="NOOP"||r.dispatch("message",a)}})},n.prototype.connect=function(t,r){return r===void 0&&(r=""),A(this,void 0,void 0,function(){var i=this;return M(this,function(a){return this._ws=new WebSocket(t,encodeURIComponent(r)),this._ws.onopen=function(){i._logger.debug("websocket open"),i.dispatch("open")},this._ws.onmessage=function(s){return A(i,void 0,void 0,function(){var o,l,u,d,f,p,m,E=this;return M(this,function(g){switch(g.label){case 0:return!((m=this._sdkState.websocket)===null||m===void 0)&&m.compression?s.data instanceof Blob?((o=new FileReader).readAsArrayBuffer(s.data),o.onloadend=function(){return A(E,void 0,void 0,function(){var y,S;return M(this,function(C){switch(C.label){case 0:return C.trys.push([0,2,,3]),[4,A_(o.result)];case 1:return y=C.sent(),this._handleMessage(y),[3,3];case 2:return S=C.sent(),this.error(S),[3,3];case 3:return[2]}})})},[3,12]):[3,1]:[3,13];case 1:if(!(s.data instanceof ArrayBuffer))return[3,6];g.label=2;case 2:return g.trys.push([2,4,,5]),[4,A_(new Uint8Array(s.data))];case 3:return f=g.sent(),this._handleMessage(f),[3,5];case 4:return l=g.sent(),this.error(l),[3,5];case 5:return[3,12];case 6:if(!(typeof Buffer<"u"&&s.data instanceof Buffer))return[3,11];g.label=7;case 7:return g.trys.push([7,9,,10]),u=s.data,d=u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength),[4,A_(d)];case 8:return f=g.sent(),this._handleMessage(f),[3,10];case 9:return p=g.sent(),this.error(p),[3,10];case 10:return[3,12];case 11:typeof s.data=="string"&&this._handleMessage(s.data),g.label=12;case 12:return[3,14];case 13:this._handleMessage(s.data),g.label=14;case 14:return[2]}})})},this._ws.onerror=function(){i._logger.debug("websocket error"),i.dispatch("error",J.networkError)},this._ws.onclose=function(){i._logger.debug("websocket close"),i.dispatch("close")},this.lastActive=Date.now(),[2]})})},n.prototype.disconnect=function(){var t=this;return new Promise(function(r){t._logger.debug("websocket disconnect"),t._ws?(t._ws.onopen=jt,t._ws.onmessage=jt,t._ws.onerror=jt,t.connectionState!==Vs.CLOSED?(t._ws.onclose=function(){t.dispatch("close"),r()},t._ws.close(),t._ws=void 0):r()):r()})},n.prototype.send=function(t){if(!this._ws)throw J.connectionClosed;t.code!=="PING"?this.dispatch("ping-refresh"):this._logger.debug("send ping",t),this._ws.send(t.convertToMessage())},n.prototype.error=function(t){this._logger.debug("websocket error",t),this.dispatch("error",t)},n}(ku),JA=function(e){function n(t){var r=t.all,i=t.feed,a=t.custom_types,s=t.ts,o=e.call(this)||this;return o.all=r,o.feed=i,o.customTypes=a,o.ts=s,o}return B(n,e),n}(ar),ek=function(){function e(n,t){var r=t.session,i=t.sdkState,a=t.dispatcher,s=t.logger,o=t.useFetchCompat,l=o!==void 0&&o,u=this;this._ackStateMap=new Map,this._sdkState=i,this._dispatcher=a,this._logger=s,this.apiClient=new YL(n,{session:r,sdkState:i,dispatcher:a,logger:s,useFetchCompat:l}),this.websocketClient=new JU(n,{sdkState:i,dispatcher:a,logger:s}),this.websocketClient.on("message",function(d){if(d.payload.unread_cnt&&u._dispatcher.dispatch(new JA(d.payload.unread_cnt)),d.requestId){if(u._ackStateMap.has(d.requestId)){var f=u._ackStateMap.get(d.requestId);d.code!=="EROR"?f.resolve(d):f.reject(new J({code:d.payload.code,message:d.payload.message}))}}else u._dispatcher.dispatch(d)}).on("close",function(){u._ackStateMap.forEach(function(d){d.reject(J.connectionClosed)}),u._ackStateMap.clear()})}return e.prototype._sendApiRequest=function(n){return A(this,void 0,void 0,function(){return M(this,function(t){switch(t.label){case 0:return[4,this.apiClient.send(n)];case 1:return[2,t.sent()]}})})},e.prototype._sendWebsocketRequest=function(n){return A(this,void 0,void 0,function(){var t,r,i,a=this;return M(this,function(s){if(!this._sdkState.websocket)throw J.connectionRequired;if(t=new Gi,n.ackRequired){i=function(o,l){a._ackStateMap.has(n.requestId)&&(a._ackStateMap.delete(n.requestId),r&&(clearTimeout(r),r=null),o?(a._logger.debug("fail websocket request",n.requestId,o),t.reject(o)):(a._logger.debug("receive websocket ack",n.requestId,n),a._logger.debug("receive websocket ack",l),t.resolve(l)))};try{r=setTimeout(function(){return i(J.noAckTimeout)},this._sdkState.websocket.responseTimeout),this._ackStateMap.set(n.requestId,{resolve:function(o){return i(void 0,o)},reject:function(o){return i(o)}}),this.websocketClient.send(n)}catch(o){i(o)}}else try{this.websocketClient.send(n),t.resolve()}catch(o){t.reject(o)}return[2,t.promise]})})},e.prototype.send=function(n){return A(this,void 0,void 0,function(){return M(this,function(t){switch(t.label){case 0:return n instanceof Re?[4,this._sendApiRequest(n)]:[3,2];case 1:case 3:return[2,t.sent()];case 2:return n instanceof _i?[4,this._sendWebsocketRequest(n)]:[3,4];case 4:throw J.invalidParameters}})})},e.prototype.cancel=function(n){this.apiClient.cancel(n)},e.prototype.cancelAll=function(){this.apiClient.cancelAll()},e}();(function(e){e[e.NONE=0]="NONE",e[e.INITIALIZED=1]="INITIALIZED",e[e.CONNECTING=2]="CONNECTING",e[e.CONNECTED=3]="CONNECTED",e[e.RECONNECTING=4]="RECONNECTING",e[e.INTERNAL_DISCONNECTED=5]="INTERNAL_DISCONNECTED",e[e.EXTERNAL_DISCONNECTED=6]="EXTERNAL_DISCONNECTED",e[e.LOGOUT=7]="LOGOUT"})(On||(On={}));var _u,gu,pa=function(e){function n(t){var r=t.stateType,i=e.call(this)||this;return i.stateType=r,i}return B(n,e),n}(ar),ew=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return B(n,e),n}(ar),Ng=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return B(n,e),n}(ar),tw=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return B(n,e),n}(ar),tT=function(){function e(n){var t,r,i,a;this.isEnabled=(t=n.enabled)!==null&&t!==void 0&&t,this.feedChannels=(r=n.feed_channels)!==null&&r!==void 0?r:{},this.templateListToken=(i=n.template_list_token)!==null&&i!==void 0?i:null,this.settingsUpdatedAt=(a=n.settings_updated_at)!==null&&a!==void 0?a:0}return e.payloadify=function(n){return Xe(_t({enabled:n.isEnabled,feed_channels:n.feedChannels,template_list_token:n.templateListToken,settings_updated_at:n.settingsUpdatedAt}))},e}(),Oy=function(e){return"sendbird@".concat(e,"/changelog_include_chat_notifications")},nT=function(){function e(n){var t;this.lastUpdatedAt=(t=n.last_updated_at)!==null&&t!==void 0?t:0}return e.payloadify=function(n){return Xe(_t({last_updated_at:n.lastUpdatedAt}))},e}(),rT=function(){function e(n){var t;this.token=(t=n.template_list_token)!==null&&t!==void 0?t:""}return e.payloadify=function(n){return Xe(_t({template_list_token:n.token}))},e}(),Av=function(){function e(n){n===void 0&&(n={min_stat_count:100,min_interval:10800,max_stat_count_per_request:1e3,lower_threshold:10,request_delay_range:180}),this.minStatCount=n.min_stat_count,this.minInterval=1e3*n.min_interval,this.maxStatCountPerRequest=n.max_stat_count_per_request,this.lowerThreshold=n.lower_threshold,this.requestDelayRange=1e3*n.request_delay_range}return e.payloadify=function(n){return Xe(_t({min_stat_count:n.minStatCount,min_interval:n.minInterval/1e3,max_stat_count_per_request:n.maxStatCountPerRequest,lower_threshold:n.lowerThreshold,request_delay_range:n.requestDelayRange/1e3}))},e}(),w_=function(){function e(n){n===void 0&&(n={default:{min_stat_count:100,min_interval:10800,max_stat_count_per_request:1e3,lower_threshold:10,request_delay_range:180}}),this.default=new Av(n.default),this.realTime=new Av(n.realtime)}return e.payloadify=function(n){return Xe(_t({default:Av.payloadify(n.default),realtime:Av.payloadify(n.realTime)}))},e}(),iT=1048576,tk=5;(function(e){e[e.NONE=0]="NONE",e[e.INCLUDE_REPLY=1]="INCLUDE_REPLY",e[e.EXCLUDE_REPLY=2]="EXCLUDE_REPLY",e[e.INCLUDE_REPLY_TO_CHANNEL=3]="INCLUDE_REPLY_TO_CHANNEL"})(_u||(_u={})),function(e){e[e.NONE=0]="NONE",e[e.INCLUDE_REPLY=1]="INCLUDE_REPLY",e[e.EXCLUDE_REPLY=2]="EXCLUDE_REPLY",e[e.INCLUDE_REPLY_TO_CHANNEL=3]="INCLUDE_REPLY_TO_CHANNEL"}(gu||(gu={}));var aT=function(){function e(n){var t,r,i,a,s,o,l,u;n===void 0&&(n={}),this.emojiHash=n.emoji_hash||"",this.uploadSizeLimit=n.file_upload_size_limit?n.file_upload_size_limit*iT:Number.MAX_SAFE_INTEGER,this.useReaction=!!n.use_reaction,this.applicationAttributes=(t=n.application_attributes)!==null&&t!==void 0?t:[],this.premiumFeatureList=(r=n.premium_feature_list)!==null&&r!==void 0?r:[],this.deviceTokenCache=this.applicationAttributes.includes("sdk_device_token_cache"),this.enabledChannelMemberShipHistory=this.applicationAttributes.includes("channel_membership_history"),this.multipleFilesMessageFileCountLimit=(i=n.multiple_file_send_max_size)!==null&&i!==void 0?i:5,this.allowSdkStatsUpload=(a=n.allow_sdk_log_ingestion)===null||a===void 0||a,this.unreadCountThreadingPolicy=(s=n.unread_cnt_threading_policy)!==null&&s!==void 0?s:_u.NONE,this.lastMessageThreadingPolicy=(o=n.last_msg_threading_policy)!==null&&o!==void 0?o:gu.NONE,this.uikitConfigInfo=new nT((l=n.uikit_config)!==null&&l!==void 0?l:{}),this.notificationInfo=n.notifications?new tT(n.notifications):null,this.messageTemplateInfo=n.message_template?new rT(n.message_template):null,this.statConfigInfo=n.log_publish_config?new w_(n.log_publish_config):new w_,this.disableSuperGroupMack=(u=n.disable_supergroup_mack)!==null&&u!==void 0&&u}return e.payloadify=function(n){return Xe(_t({emoji_hash:n.emojiHash,file_upload_size_limit:n.uploadSizeLimit/iT,application_attributes:n.applicationAttributes,premium_feature_list:n.premiumFeatureList,use_reaction:n.useReaction,allow_sdk_log_ingestion:n.allowSdkStatsUpload,unread_cnt_threading_policy:n.unreadCountThreadingPolicy,last_msg_threading_policy:n.lastMessageThreadingPolicy,uikit_config:n.uikitConfigInfo?nT.payloadify(n.uikitConfigInfo):null,notifications:n.notificationInfo?tT.payloadify(n.notificationInfo):null,message_template:n.messageTemplateInfo?rT.payloadify(n.messageTemplateInfo):null,log_publish_config:n.statConfigInfo?w_.payloadify(n.statConfigInfo):null,disable_supergroup_mack:n.disableSuperGroupMack}))},e}(),Ur=function(){function e(n){this._iid="",this._iid=n}return e.payloadify=function(n){return{}},e}(),nk=function(e){function n(t){var r=t.userId,i=t.metadata,a=e.call(this)||this;return a.method=we.POST,a.path="".concat(In,"/").concat(r,"/metadata"),a.params={metadata:i},a}return B(n,e),n}(Re),rk=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.metaData=r,i}return B(n,e),n}(He),ik=function(e){function n(t){var r=t.userId,i=t.metadata,a=t.upsert,s=e.call(this)||this;return s.method=we.PUT,s.path="".concat(In,"/").concat(r,"/metadata"),s.params={metadata:i,upsert:a},s}return B(n,e),n}(Re),ak=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.metadata=r,i}return B(n,e),n}(He),sk=function(e){function n(t){var r=t.userId,i=t.metadataKey,a=e.call(this)||this;return a.method=we.DELETE,a.path="".concat(In,"/").concat(r,"/metadata/").concat(i),a}return B(n,e),n}(Re);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}B(n,e)})(He);var ok=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=we.DELETE,i.path="".concat(In,"/").concat(r,"/metadata"),i}return B(n,e),n}(Re);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}B(n,e)})(He);var Bc,ud=function(e,n){var t=JSON.parse(JSON.stringify(e));return t._iid&&delete t._iid,n&&n(t),t},Tl=function(e,n){var t=JSON.parse(JSON.stringify(e));return t},ke=function(e){return{do:function(n){e||n()},throw:function(n){if(!e)throw n}}};(function(e){e.ONLINE="online",e.OFFLINE="offline",e.NON_AVAILABLE="nonavailable"})(Bc||(Bc={}));var Yc,dn=function(e){function n(t,r){var i,a,s,o,l,u,d,f,p,m,E,g,y=this;return(y=e.call(this,t)||this).userId=(a=(i=r.guest_id)!==null&&i!==void 0?i:r.user_id)!==null&&a!==void 0?a:"",y.nickname=(o=(s=r.nickname)!==null&&s!==void 0?s:r.name)!==null&&o!==void 0?o:"",y.plainProfileUrl=(u=(l=r.profile_url)!==null&&l!==void 0?l:r.image)!==null&&u!==void 0?u:"",y.requireAuth=(d=r.require_auth_for_profile_image)!==null&&d!==void 0&&d,y.metaData=(f=r.metadata)!==null&&f!==void 0?f:{},y.connectionStatus=Bc.NON_AVAILABLE,tn(Bc,r.is_online)?y.connectionStatus=r.is_online:X("boolean",r.is_online)&&(y.connectionStatus=r.is_online?Bc.ONLINE:Bc.OFFLINE),y.isActive=(p=r.is_active)===null||p===void 0||p,y.lastSeenAt=(m=r.last_seen_at)!==null&&m!==void 0?m:null,y.preferredLanguages=r.preferred_languages?At([],ft(r.preferred_languages),!1):null,y.friendDiscoveryKey=(E=r.friend_discovery_key)!==null&&E!==void 0?E:null,y.friendName=(g=r.friend_name)!==null&&g!==void 0?g:null,y}return B(n,e),n.payloadify=function(t){return Xe(_t(W(W({},e.payloadify.call(this,t)),{user_id:t.userId,nickname:t.nickname,profile_url:t.plainProfileUrl,require_auth_for_profile_image:t.requireAuth,metadata:t.metaData,is_online:t.connectionStatus,is_active:t.isActive,last_seen_at:t.lastSeenAt,preferred_languages:t.preferredLanguages,friend_discovery_key:t.friendDiscoveryKey,friend_name:t.friendName})))},Object.defineProperty(n.prototype,"profileUrl",{get:function(){var t=Y.of(this._iid).sessionManager;return this.requireAuth&&t.ekey?"".concat(this.plainProfileUrl,"?auth=").concat(t.ekey):this.plainProfileUrl},enumerable:!1,configurable:!0}),n.prototype.serialize=function(){return ud(this)},n.prototype._isValidMetaData=function(t){return!Array.isArray(t)&&Object.keys(t).length>0&&Object.keys(t).map(function(r){return t[r]}).every(function(r){return X("string",r)})},n.prototype._applyMetaData=function(t,r){var i=this;r===void 0&&(r=!1),Object.keys(t).forEach(function(a){r?delete i.metaData[a]:i.metaData[a]=t[a]})},n.prototype.createMetaData=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l;return M(this,function(u){switch(u.label){case 0:return ke(this._isValidMetaData(t)).throw(J.invalidParameters),r=Y.of(this._iid),i=r.sdkState,a=r.requestQueue,s=new nk({userId:i.userId,metadata:t}),[4,a.send(s)];case 1:return o=u.sent(),l=o.as(rk).metaData,this._applyMetaData(l),[2,this.metaData]}})})},n.prototype.updateMetaData=function(t,r){return r===void 0&&(r=!1),A(this,void 0,void 0,function(){var i,a,s,o,l,u;return M(this,function(d){switch(d.label){case 0:return ke(this._isValidMetaData(t)).throw(J.invalidParameters),i=Y.of(this._iid),a=i.sdkState,s=i.requestQueue,o=new ik({userId:a.userId,metadata:t,upsert:r}),[4,s.send(o)];case 1:return l=d.sent(),u=l.as(ak).metadata,this._applyMetaData(u),[2,this.metaData]}})})},n.prototype.deleteMetaData=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o;return M(this,function(l){switch(l.label){case 0:return ke(X("string",t)).throw(J.invalidParameters),r=Y.of(this._iid),i=r.sdkState,a=r.requestQueue,s=new sk({userId:i.userId,metadataKey:t}),[4,a.send(s)];case 1:return l.sent(),this._applyMetaData(((o={})[t]=!0,o),!0),[2,this.metaData]}})})},n.prototype.deleteAllMetaData=function(){return A(this,void 0,void 0,function(){var t,r,i,a;return M(this,function(s){switch(s.label){case 0:return t=Y.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new ok({userId:r.userId}),[4,i.send(a)];case 1:return s.sent(),this.metaData={},[2]}})})},n}(Ur),nw=function(e){function n(t){var r=t.userProfile,i=e.call(this)||this;return i.userProfile=r,i}return B(n,e),n}(ar),Ig=function(){function e(n,t){var r,i,a,s,o,l,u,d,f,p,m,E,g,y;this._iid=n,this.appInfo=new aT(t),this.user=new dn(n,t),this.connectedAt=(r=t.login_ts)!==null&&r!==void 0?r:0,this.firstConnectedAt=0,this.pingInterval=(i=t.ping_interval)!==null&&i!==void 0?i:15e3,this.pongTimeout=(a=t.pong_timeout)!==null&&a!==void 0?a:5e3,this.reconnectInterval=(o=(s=t.reconnect)===null||s===void 0?void 0:s.interval)!==null&&o!==void 0?o:3e3,this.reconnectMaxInterval=(u=(l=t.reconnect)===null||l===void 0?void 0:l.max_interval)!==null&&u!==void 0?u:6e4,this.reconnectRetryCount=(f=(d=t.reconnect)===null||d===void 0?void 0:d.retry_cnt)!==null&&f!==void 0?f:5,this.reconnectIntervalMultiple=(m=(p=t.reconnect)===null||p===void 0?void 0:p.mul)!==null&&m!==void 0?m:2,this.maxUnreadCountOnSuperGroup=(E=t.max_unread_cnt_on_super_group)!==null&&E!==void 0?E:100,this.profileImageEncryption=!!t.profile_image_encryption,this.concurrentCallLimit=(g=t.concurrent_call_limit)!==null&&g!==void 0?g:5,this.backOffDelay=(y=t.back_off_delay)!==null&&y!==void 0?y:100}return e.payloadify=function(n){return Xe(_t(W(W(W({},dn.payloadify(n.user)),aT.payloadify(n.appInfo)),{login_ts:n.connectedAt,ping_interval:n.pingInterval,pong_timeout:n.pongTimeout,reconnect:{interval:n.reconnectInterval,max_interval:n.reconnectMaxInterval,retry_cnt:n.reconnectRetryCount,mul:n.reconnectIntervalMultiple},max_unread_cnt_on_super_group:n.maxUnreadCountOnSuperGroup,profile_image_encryption:n.profileImageEncryption,concurrent_call_limit:n.concurrentCallLimit,back_off_delay:n.backOffDelay})))},e.prototype.apply=function(){var n=this.reconnectInterval,t=this.reconnectMaxInterval,r=this.reconnectIntervalMultiple,i=Y.of(this._iid);i.sdkState.websocket&&(i.sdkState.websocket.pingInterval=1e3*this.pingInterval,i.sdkState.websocket.pongTimeout=1e3*this.pongTimeout,i.sdkState.websocket.reconnectMaxRetry=this.reconnectRetryCount,i.sdkState.websocket.reconnectRetryStrategy={calcTimeout:function(a){return a>0?1e3*Math.min(n*Math.pow(r,a-1),t):10}}),i.appInfo=this.appInfo,i.sessionManager.currentUser=this.user,i.connectedAt=this.connectedAt,this.firstConnectedAt||(i.firstConnectedAt=this.connectedAt),i.maxSuperGroupChannelUnreadCount=this.maxUnreadCountOnSuperGroup,i.concurrentCallLimit=this.concurrentCallLimit,i.backOffDelay=this.backOffDelay,i.dispatcher.dispatch(new nw({userProfile:this}))},e}(),rw=function(e){function n(t){var r=t.request,i=r===void 0||r,a=t.features,s=a===void 0?{}:a,o=t.options,l=o===void 0?{}:o,u=t.statConfigInfo,d=e.call(this)||this;return d.request=i,d.features=W({localCache:!0,notification:!0},s),d.options=W({ingestion:!0},l),d.statConfigInfo=u,d}return B(n,e),n}(ar),Jv=function(e){function n(t,r,i){var a,s,o,l,u=this;return(u=e.call(this,t,r,i)||this).error=null,u.services=[],u.userProfile=new Ig(t,i),u.deviceTokenLastDeletedAt=(a=i.device_token_last_deleted_at)!==null&&a!==void 0?a:0,u.key=(s=i.key)!==null&&s!==void 0?s:"",u.ekey=(o=i.ekey)!==null&&o!==void 0?o:"",u.error=i.error?new J(i):null,u.services=(l=i.services)!==null&&l!==void 0?l:[],u}return B(n,e),n.asError=function(t){return new n("","LOGI",W({user_id:"",error:!0},t))},n.prototype.applyTo=function(t){return A(this,void 0,void 0,function(){var r,i,a;return M(this,function(s){switch(s.label){case 0:return this.error?[3,4]:(r=Y.of(t))?(i=r.sessionManager,a=r.dispatcher,[4,i.login(this)]):[3,2];case 1:return s.sent(),this.userProfile.apply(),a.dispatch(new rw({request:this.userProfile.appInfo.applicationAttributes.includes("allow_sdk_request_log_publish"),features:{localCache:this.userProfile.appInfo.applicationAttributes.includes("allow_sdk_feature_local_cache_log_publish"),notification:this.userProfile.appInfo.applicationAttributes.includes("allow_sdk_noti_stats_log_publish")},options:{ingestion:this.userProfile.appInfo.allowSdkStatsUpload},statConfigInfo:this.userProfile.appInfo.statConfigInfo})),[3,3];case 2:throw J.lostInstance;case 3:return[3,5];case 4:throw this.error;case 5:return[2]}})})},n}(Wn),Fu=function(){function e(){this.type=On.NONE,this.name="none"}return e.prototype.run=function(n){return A(this,void 0,void 0,function(){return M(this,function(t){return[2]})})},e.prototype.onConnect=function(n,t){return A(this,void 0,void 0,function(){return M(this,function(r){return[2]})})},e.prototype.onReconnect=function(n,t){return t.resetReconnectCount,A(this,void 0,void 0,function(){return M(this,function(r){return[2]})})},e.prototype.onDisconnect=function(n,t){return t.error,t.autoReconnect,t.cause,A(this,void 0,void 0,function(){return M(this,function(r){return[2]})})},e.prototype.onDisconnectWebSocket=function(n,t){return A(this,void 0,void 0,function(){return M(this,function(r){return[2]})})},e.prototype.onLogout=function(n,t){return A(this,void 0,void 0,function(){return M(this,function(r){return[2]})})},e}(),ut=function(e){return A(void 0,void 0,void 0,function(){var n;return M(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e()];case 1:return t.sent(),[3,3];case 2:if(!((n=t.sent())instanceof J))throw n;return n.throwOutside(),[3,3];case 3:return[2]}})})},mr=function(e){return A(void 0,void 0,void 0,function(){return M(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e()];case 1:case 2:return n.sent(),[3,3];case 3:return[2]}})})},Nl=function(e){function n(t){t===void 0&&(t={});var r,i=this;return(i=e.call(this)||this).type=On.LOGOUT,i.name="logout",i._wasPreviouslyConnected=(r=t.wasPreviouslyConnected)===null||r===void 0||r,i}return B(n,e),n.prototype.run=function(t){return A(this,void 0,void 0,function(){var r,i,a=this;return M(this,function(s){switch(s.label){case 0:return r=Date.now(),i=t.sdkState.userId,[4,t.logout()];case 1:return s.sent(),[4,t.changeState(new Dy,r)];case 2:return s.sent(),this._wasPreviouslyConnected&&ut(function(){return A(a,void 0,void 0,function(){return M(this,function(o){return t.connectionHandlers.forEach(function(l){l.onDisconnected&&l.onDisconnected(i)}),[2]})})}),[2]}})})},n}(Fu),em=function(e){function n(){var t=e.call(this)||this;return t.type=On.EXTERNAL_DISCONNECTED,t.name="externaldisconnected",t}return B(n,e),n.prototype.run=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){switch(r.label){case 0:return[4,t.disconnect()];case 1:return r.sent(),[2]}})})},n.prototype.onConnect=function(t,r){return A(this,void 0,void 0,function(){var i;return M(this,function(a){switch(a.label){case 0:return i=Date.now(),[4,t.disconnect()];case 1:return a.sent(),[4,t.changeState(new nm({authToken:r}),i)];case 2:return a.sent(),[2]}})})},n.prototype.onReconnect=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){switch(i.label){case 0:return r=Date.now(),[4,t.changeState(new Tp,r)];case 1:return i.sent(),[2]}})})},n.prototype.onLogout=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){switch(i.label){case 0:return r=Date.now(),[4,t.changeState(new Nl,r)];case 1:return i.sent(),[2]}})})},n}(Fu),Sp=function(e){function n(t){var r=t.autoReconnect,i=e.call(this)||this;return i.type=On.INTERNAL_DISCONNECTED,i.name="internaldisconnected",i._autoReconnect=!1,i._autoReconnect=r,i}return B(n,e),n.prototype.run=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){switch(i.label){case 0:return r=Date.now(),[4,t.disconnect()];case 1:return i.sent(),this._autoReconnect?[4,t.changeState(new Tp,r)]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}})})},n.prototype.onConnect=function(t,r){return A(this,void 0,void 0,function(){var i;return M(this,function(a){switch(a.label){case 0:return i=Date.now(),[4,t.disconnect()];case 1:return a.sent(),[4,t.changeState(new nm({authToken:r}),i)];case 2:return a.sent(),[2]}})})},n.prototype.onReconnect=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){switch(i.label){case 0:return r=Date.now(),[4,t.changeState(new Tp,r)];case 1:return i.sent(),[2]}})})},n.prototype.onDisconnectWebSocket=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){switch(i.label){case 0:return r=Date.now(),[4,t.changeState(new em,r)];case 1:return i.sent(),[2]}})})},n.prototype.onLogout=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){switch(i.label){case 0:return r=Date.now(),[4,t.changeState(new Nl,r)];case 1:return i.sent(),[2]}})})},n}(Fu),Yi=function(e){return A(void 0,void 0,void 0,function(){return M(this,function(n){return[2,new Promise(function(t){return setTimeout(t,e)})]})})},iw=function(){function e(){}return e.prototype.calcTimeout=function(){return 0},e}(),tm=function(e,n,t){return t===void 0&&(t=new iw),A(void 0,void 0,void 0,function(){var r,i,a,s,o,l;return M(this,function(u){switch(u.label){case 0:r=0,i=null,a=function(d){return i=d??new Error("Halted")},s=function(){r=0},u.label=1;case 1:if(!(n===-1||r<n))return[3,9];u.label=2;case 2:return u.trys.push([2,4,,8]),[4,e(a,s)];case 3:if(o=u.sent(),i)throw i;return[2,o];case 4:if(l=u.sent(),i)return[3,6];if(++r===n)throw l;return[4,Yi(t.calcTimeout(r))];case 5:return u.sent(),[3,7];case 6:throw i;case 7:return[3,8];case 8:return[3,1];case 9:throw"It should not happen."}})})},Tp=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=On.RECONNECTING,t.name="reconnecting",t._callbacks=[],t}return B(n,e),n.prototype._halt=function(t){this._haltConnect&&(this._haltConnect(t),this._haltConnect=void 0)},n.prototype._flushCallbacks=function(t){this._haltConnect=void 0,this._resetConnect=void 0,this._callbacks.forEach(function(r){return r(t)})},n.prototype.run=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u=this;return M(this,function(d){switch(d.label){case 0:r=Date.now(),i=new Gi,this._callbacks.push(function(f){return f?i.reject(f):i.resolve()}),ut(function(){return A(u,void 0,void 0,function(){return M(this,function(f){return t.connectionHandlers.forEach(function(p){p.onReconnectStarted&&p.onReconnectStarted()}),[2]})})}),d.label=1;case 1:return d.trys.push([1,4,,9]),a=t.sdkState.websocket,s=a.reconnectMaxRetry,o=a.reconnectRetryStrategy,[4,tm(function(f,p){return A(u,void 0,void 0,function(){var m;return M(this,function(E){switch(E.label){case 0:this._haltConnect=f,this._resetConnect=p,E.label=1;case 1:return E.trys.push([1,3,,4]),[4,t.connect()];case 2:return E.sent(),[3,4];case 3:if(m=E.sent(),t.clearLoginTimer(),m instanceof J){if(m.code===at.CONNECTION_CANCELED)return f(m),[2];if(m.isSessionExpiredError||m.isSessionInvalidatedError)return f(m),[2]}throw m;case 4:return[2]}})})},s,o)];case 2:return d.sent(),[4,t.changeState(new aw,r)];case 3:return d.sent(),this._flushCallbacks(),ut(function(){return A(u,void 0,void 0,function(){return M(this,function(f){return t.connectionHandlers.forEach(function(p){p.onReconnectSucceeded&&p.onReconnectSucceeded()}),[2]})})}),[3,9];case 4:return l=d.sent(),Ai(l)?[3,7]:l instanceof J?l.code===at.CONNECTION_CANCELED?[3,6]:[4,t.changeState(new Sp({autoReconnect:!1}),r)]:[3,6];case 5:d.sent(),d.label=6;case 6:return this._flushCallbacks(l),ut(function(){return A(u,void 0,void 0,function(){return M(this,function(f){return t.connectionHandlers.forEach(function(p){p.onReconnectFailed&&p.onReconnectFailed()}),[2]})})}),[3,8];case 7:throw l;case 8:return[3,9];case 9:return[2,i.promise]}})})},n.prototype.onConnect=function(t,r){return A(this,void 0,void 0,function(){var i;return M(this,function(a){return i=new Gi,this._halt(J.connectionCanceled),t.cancelConnectForRetry(),this._callbacks.push(function(){var s=Date.now();t.changeState(new nm({authToken:r}),s).then(function(){i.resolve()}).catch(function(o){i.reject(o)})}),[2,i.promise]})})},n.prototype.onReconnect=function(t,r){var i=r.resetReconnectCount,a=i!==void 0&&i;return A(this,void 0,void 0,function(){var s;return M(this,function(o){return s=new Gi,this._resetConnect&&a&&this._resetConnect(),this._callbacks.push(function(l){return l?s.reject(l):s.resolve()}),[2,s.promise]})})},n.prototype.onDisconnect=function(t,r){r._error;var i=r.autoReconnect,a=i===void 0||i;return A(this,void 0,void 0,function(){var s;return M(this,function(o){switch(o.label){case 0:return s=Date.now(),this._halt(J.connectionCanceled),[4,t.changeState(new Sp({autoReconnect:a}),s)];case 1:return o.sent(),[2]}})})},n.prototype.onDisconnectWebSocket=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){switch(i.label){case 0:return r=Date.now(),this._halt(J.connectionCanceled),[4,t.changeState(new em,r)];case 1:return i.sent(),[2]}})})},n.prototype.onLogout=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){switch(i.label){case 0:return r=Date.now(),this._halt(J.connectionCanceled),[4,t.changeState(new Nl,r)];case 1:return i.sent(),[2]}})})},n}(Fu),aw=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=On.CONNECTED,t.name="connected",t}return B(n,e),n.prototype.onReconnect=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){switch(i.label){case 0:return r=Date.now(),[4,t.disconnect()];case 1:return i.sent(),[4,t.changeState(new Tp,r)];case 2:return i.sent(),[2]}})})},n.prototype.onDisconnect=function(t,r){var i=r.autoReconnect;return A(this,void 0,void 0,function(){var a;return M(this,function(s){switch(s.label){case 0:return a=Date.now(),[4,t.changeState(new Sp({autoReconnect:i}),a)];case 1:return s.sent(),[2]}})})},n.prototype.onDisconnectWebSocket=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){switch(i.label){case 0:return r=Date.now(),[4,t.changeState(new em,r)];case 1:return i.sent(),[2]}})})},n.prototype.onLogout=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){switch(i.label){case 0:return r=Date.now(),[4,t.changeState(new Nl,r)];case 1:return i.sent(),[2]}})})},n}(Fu);(function(e){e.ExternalSetBackground="ExternalSetBackground",e.ExternalDisconnectWebSocket="ExternalDisconnectWebSocket"})(Yc||(Yc={}));var lk=function(){function e(n,t){var r=t.sdkState,i=t.cacheContext,a=t.connectionHandlers,s=t.sessionManager,o=t.websocketClient,l=t.dispatcher,u=t.logger,d=t.disableWebSocketCloseEventHandling,f=d!==void 0&&d;this._disableWebSocketCloseEventHandling=!1,this._webSocketClosedCause=null,this._logger=u,this._disableWebSocketCloseEventHandling=f,this._context=new dk(n,{sdkState:r,cacheContext:i,connectionHandlers:a,sessionManager:s,websocketClient:o,dispatcher:l,logger:u}),this._sdkState=r,this._sessionManager=s,this._websocketClient=o}return e.prototype._registerEventDispatcher=function(){var n=this;this._disableWebSocketCloseEventHandling||(this._clearEventDispatcher(),this._sessionEventDispatcherContext=this._sessionManager.on("refresh",function(){n.isConnecting||n.isConnected||(n._logger.debug("try reconnect by session key refresh"),mr(function(){return A(n,void 0,void 0,function(){return M(this,function(t){switch(t.label){case 0:return[4,this.reconnect()];case 1:return t.sent(),[2]}})})}))}),this._websocketEventDispatcherContext=this._websocketClient.on("close",function(){n._sdkState.appState!=="foreground"||n._webSocketClosedCause||mr(function(){return A(n,void 0,void 0,function(){return M(this,function(t){switch(t.label){case 0:return this._sessionManager.isSessionKeyRefreshing?[3,2]:(this._logger.debug("try reconnect by websocket connection closed"),[4,this.reconnect()]);case 1:return t.sent(),[3,4];case 2:return[4,this.disconnectWebSocket()];case 3:t.sent(),t.label=4;case 4:return[2]}})})})}))},e.prototype._clearEventDispatcher=function(){this._sessionEventDispatcherContext&&(this._sessionEventDispatcherContext.close(),this._sessionEventDispatcherContext=void 0),this._websocketEventDispatcherContext&&(this._websocketEventDispatcherContext.close(),this._websocketEventDispatcherContext=void 0)},Object.defineProperty(e.prototype,"isConnected",{get:function(){return this._context.currentState.type===On.CONNECTED},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isConnecting",{get:function(){var n=this._context.currentState;return n.type===On.CONNECTING||n.type===On.RECONNECTING},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"websocketClient",{get:function(){return this._websocketClient},enumerable:!1,configurable:!0}),e.prototype.connect=function(n){return A(this,void 0,void 0,function(){var t;return M(this,function(r){switch(r.label){case 0:return t=this._context.currentState,this._webSocketClosedCause=null,[4,t.onConnect(this._context,n)];case 1:return r.sent(),this._registerEventDispatcher(),[2]}})})},e.prototype.reconnect=function(){return A(this,void 0,void 0,function(){var n;return M(this,function(t){switch(t.label){case 0:return n=this._context.currentState,this._webSocketClosedCause=null,[4,n.onReconnect(this._context,{})];case 1:return t.sent(),[2]}})})},e.prototype.resetAndReconnect=function(){return A(this,void 0,void 0,function(){var n;return M(this,function(t){switch(t.label){case 0:return n=this._context.currentState,this._webSocketClosedCause=null,[4,n.onReconnect(this._context,{resetReconnectCount:!0})];case 1:return t.sent(),[2]}})})},e.prototype.background=function(){return A(this,void 0,void 0,function(){var n;return M(this,function(t){switch(t.label){case 0:return n=this._context.currentState,this._webSocketClosedCause=Yc.ExternalSetBackground,[4,n.onDisconnect(this._context,{autoReconnect:!1,cause:this._webSocketClosedCause})];case 1:return t.sent(),[2]}})})},e.prototype.disconnect=function(n){return A(this,void 0,void 0,function(){return M(this,function(t){switch(t.label){case 0:return[4,this._context.currentState.onDisconnect(this._context,{error:n,autoReconnect:!0,cause:this._webSocketClosedCause})];case 1:return t.sent(),[2]}})})},e.prototype.disconnectWebSocket=function(n){return n===void 0&&(n=!1),A(this,void 0,void 0,function(){var t;return M(this,function(r){switch(r.label){case 0:return t=this._context.currentState,n&&(this._webSocketClosedCause=Yc.ExternalDisconnectWebSocket),[4,t.onDisconnectWebSocket(this._context,{cause:this._webSocketClosedCause})];case 1:return r.sent(),[2]}})})},e.prototype.logout=function(n){return A(this,void 0,void 0,function(){var t;return M(this,function(r){switch(r.label){case 0:return t=this._context.currentState,this._clearEventDispatcher(),[4,t.onLogout(this._context,n)];case 1:return r.sent(),[2]}})})},e}(),nm=function(e){function n(t){var r=t.authToken,i=e.call(this)||this;return i.type=On.CONNECTING,i.name="connecting",i._authToken="",i._callbacks=[],i._authToken=r,i}return B(n,e),n.prototype._halt=function(t){this._haltConnect&&(this._haltConnect(t),this._haltConnect=void 0)},n.prototype._flushCallbacks=function(t){this._haltConnect=void 0,this._callbacks.forEach(function(r){return r(t)})},n.prototype.run=function(t){return A(this,void 0,void 0,function(){var r,i,a,s=this;return M(this,function(o){switch(o.label){case 0:r=Date.now(),i=new Gi,this._callbacks.push(function(l){return l?i.reject(l):i.resolve()}),o.label=1;case 1:return o.trys.push([1,4,,10]),[4,tm(function(l){return A(s,void 0,void 0,function(){var u;return M(this,function(d){switch(d.label){case 0:this._haltConnect=l,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,t.connect(this._authToken)];case 2:return d.sent(),[3,4];case 3:if(u=d.sent(),t.clearLoginTimer(),u instanceof J&&u.code===at.CONNECTION_CANCELED)return l(u),[2];throw u;case 4:return[2]}})})},t.sdkState.websocket.connectMaxRetry)];case 2:return o.sent(),[4,t.changeState(new aw,r)];case 3:return o.sent(),ut(function(){return A(s,void 0,void 0,function(){return M(this,function(l){return this._flushCallbacks(),t.connectionHandlers.forEach(function(u){u.onConnected&&u.onConnected(t.sdkState.userId)}),[2]})})}),[3,10];case 4:return a=o.sent(),Ai(a)?[3,8]:[4,t.disconnect()];case 5:return o.sent(),a instanceof J?a.code===at.CONNECTION_CANCELED?[3,7]:[4,t.changeState(new Dy,r)]:[3,7];case 6:o.sent(),o.label=7;case 7:return ut(function(){return A(s,void 0,void 0,function(){return M(this,function(l){return this._flushCallbacks(a),[2]})})}),[3,9];case 8:throw a;case 9:return[3,10];case 10:return[2,i.promise]}})})},n.prototype.onConnect=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){return r=new Gi,this._callbacks.push(function(a){return a?r.reject(a):r.resolve()}),[2,r.promise]})})},n.prototype.onDisconnect=function(t,r){var i=r.error,a=i===void 0?null:i,s=r.autoReconnect,o=s!==void 0&&s,l=r.cause,u=l===void 0?null:l;return A(this,void 0,void 0,function(){var d;return M(this,function(f){switch(f.label){case 0:return d=Date.now(),this._halt(a??sT(u)),t.hasSession?[4,t.changeState(new Sp({autoReconnect:o}),d)]:[3,2];case 1:return f.sent(),[3,4];case 2:return[4,t.changeState(new Nl,d)];case 3:f.sent(),f.label=4;case 4:return[2]}})})},n.prototype.onDisconnectWebSocket=function(t,r){return A(this,void 0,void 0,function(){var i;return M(this,function(a){switch(a.label){case 0:return this._halt(sT((r==null?void 0:r.cause)||null)),i=Date.now(),t.hasSession?[4,t.changeState(new em,i)]:[3,2];case 1:return a.sent(),[3,4];case 2:return[4,t.changeState(new Nl,i)];case 3:a.sent(),a.label=4;case 4:return[2]}})})},n.prototype.onLogout=function(t,r){return A(this,void 0,void 0,function(){var i;return M(this,function(a){switch(a.label){case 0:return i=Date.now(),this._halt(r??J.connectionCanceled),[4,t.changeState(new Nl,i)];case 1:return a.sent(),[2]}})})},n}(Fu);function sT(e){var n=J.connectionCanceled;if(e){var t=null;switch(e){case Yc.ExternalSetBackground:t="Connection has been canceled due to the application having externally moved to background while in ConnectingState.";break;case Yc.ExternalDisconnectWebSocket:t="Connection has been canceled because sb.disconnectWebSocket() was called while in ConnectingState."}t&&n.setDetail(t)}return n}var dl,Dy=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=On.INITIALIZED,t.name="initialized",t}return B(n,e),n.prototype.onConnect=function(t,r){return A(this,void 0,void 0,function(){var i;return M(this,function(a){switch(a.label){case 0:return i=Date.now(),[4,t.changeState(new nm({authToken:r}),i)];case 1:return a.sent(),[2]}})})},n.prototype.onLogout=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){switch(i.label){case 0:return r=Date.now(),[4,t.changeState(new Nl({wasPreviouslyConnected:!1}),r)];case 1:return i.sent(),[2]}})})},n}(Fu),uk=function(e){function n(){return e.call(this,{code:"PING",payload:{id:Date.now(),active:1},ackRequired:!1})||this}return B(n,e),n}(_i),ck=function(){function e(n){var t=n.pingDelegate,r=n.sdkState,i=n.logger;this.pingDelegate=t,this.sdkState=r,this._logger=i}return Object.defineProperty(e.prototype,"isWaiting",{get:function(){return!!this._pingTimeoutTimer},enumerable:!1,configurable:!0}),e.prototype.ping=function(){var n,t=this;if(!this.sdkState.websocket)throw J.connectionRequired;var r=new uk;try{var i=(n=this.sdkState.websocket.pongTimeout)!==null&&n!==void 0?n:5e3;this._pingTimeoutTimer=setTimeout(function(){t._logger.debug("pinger.ping() timeout"),t.pingDelegate.error()},i),this.pingDelegate.send(r),this._logger.debug("pinger.ping()")}catch(a){this._logger.debug("pinger.ping() error",a),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=void 0),this.pingDelegate.error()}return r},e.prototype.pong=function(){this._logger.debug("pinger.pong()"),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=void 0)},e.prototype.refreshTimer=function(){var n,t=this;if(!this.sdkState.websocket)throw J.connectionRequired;this._logger.debug("pinger.refreshTimer()");var r=(n=this.sdkState.websocket.pingInterval)!==null&&n!==void 0?n:15e3;this.stop(),this._pingTimer=setInterval(function(){t.ping()},r)},e.prototype.start=function(){this._logger.debug("pinger.start()"),this.refreshTimer(),this.ping()},e.prototype.stop=function(){this._logger.debug("pinger.stop()"),this._pingTimer&&(clearInterval(this._pingTimer),this._pingTimer=void 0),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=void 0)},e}(),sw=["premium_feature_list","file_upload_size_limit","application_attributes","emoji_hash","multiple_file_send_max_size","notifications","message_template"],dk=function(e){function n(t,r){var i,a=r.sdkState,s=r.cacheContext,o=r.connectionHandlers,l=r.sessionManager,u=r.websocketClient,d=r.dispatcher,f=r.logger,p=r.entryState,m=p===void 0?new Dy:p,E=this;return(E=e.call(this)||this)._stateUpdatedAt=0,E._connectingAt=0,E._connectedAt=0,E._logiReceivedAt=0,E._connectionRequestQueue=[],E._iid=t,E.sdkState=a,E.cacheContext=s,E.connectionHandlers=o,E._sessionManager=l,E._websocketClient=u,E._dispatcher=d,E._logger=f,E._currentState=m,!((i=E.sdkState.websocket)===null||i===void 0)&&i.pingerDisabled||(E._pinger=new ck({pingDelegate:{send:function(g){return E._websocketClient.send(g)},error:function(g){return E._websocketClient.error(g)}},sdkState:E.sdkState,logger:f})),E._websocketClient.on("open",function(){E._connectedAt=Date.now(),E._tryResolveConnectionRequest()}).on("message",function(g){g.code==="LOGI"&&(E.clearLoginTimer(),E._dispatcher.dispatch(g.as(Jv)))}).on("ping-refresh",function(){var g;return(g=E._pinger)===null||g===void 0?void 0:g.refreshTimer()}).on("pong",function(){var g;return(g=E._pinger)===null||g===void 0?void 0:g.pong()}).on("error",function(){var g;return(g=E._pinger)===null||g===void 0?void 0:g.stop()}).on("close",function(){E._logiProcessingTimer=setTimeout(function(){E._logiProcessingTimer=void 0,E._unresolvedLogi||E._rejectConnectionRequest(J.networkError)},500)}),E._dispatcher.on(function(g){g instanceof Jv&&(E._unresolvedLogi=g,E._tryResolveConnectionRequest())}),E}return B(n,e),Object.defineProperty(n.prototype,"currentState",{get:function(){return this._currentState},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasSession",{get:function(){return this._sessionManager.session.hasSession},enumerable:!1,configurable:!0}),n.prototype.changeState=function(t,r){return A(this,void 0,void 0,function(){return M(this,function(i){switch(i.label){case 0:return r>=this._stateUpdatedAt?(this._currentState=t,this._stateUpdatedAt=r,this._dispatcher.dispatch(new pa({stateType:t.type})),this._logger.debug("connection state changes to ".concat(t.name)),[4,this._currentState.run(this)]):[3,2];case 1:return i.sent(),[2,!0];case 2:return[2,!1]}})})},n.prototype._tryResolveConnectionRequest=function(){var t;return A(this,void 0,void 0,function(){var r;return M(this,function(i){switch(i.label){case 0:return r=this._unresolvedLogi,this._websocketClient.isOpen&&r?(this._unresolvedLogi=void 0,this._logiReceivedAt=Date.now(),r.error?[3,2]:[4,r.applyTo(this._iid)]):[3,3];case 1:return i.sent(),this._statLogConnection(),(t=this._pinger)===null||t===void 0||t.start(),this._connectionRequestQueue.forEach(function(a){return a.resolve()}),this._connectionRequestQueue=[],this.sdkState.appState="foreground",[3,3];case 2:this._sessionManager.session.authToken=void 0,r.error.isSessionExpiredError||r.error.isSessionInvalidatedError?this._dispatcher.dispatch(new Qc({reason:r.error.code,message:r.error.message})):this._logger.warn("login failed: ".concat(r.error)),this._rejectConnectionRequest(r.error),i.label=3;case 3:return[2]}})})},n.prototype._rejectConnectionRequest=function(t){var r;if((r=this._pinger)===null||r===void 0||r.stop(),this.clearLoginTimer(),this._connectionRequestQueue.length>0){var i=this._connectionRequestQueue;this._connectionRequestQueue=[],i.forEach(function(a){return a.reject(t)}),this._statLogConnection(t)}},n.prototype._url=function(){var t,r=this.sdkState,i=r.appId,a=r.appVersion,s=r.userId,o=r.extensions,l=r.sendbirdRuntimeEnvironment,u=this.cacheContext.localCacheEnabled,d=this._sessionManager.session,f=(t=this.sdkState.websocket)===null||t===void 0?void 0:t.compression,p=!!(o??{}).sb_uikit,m=gp.userAgentWithExtension(o);return"".concat(this.sdkState.websocket.host,"/?p=JS&pv=").concat(encodeURIComponent(yl.OS_VERSION),"&sv=").concat(encodeURIComponent(yl.SDK_VERSION),"&ai=").concat(i).concat(a?"&av=".concat(a):"").concat(d.hasSession?"":"&user_id=".concat(encodeURIComponent(s)),"&pmce=").concat(f?1:0,"&active=1&device_token_types=").concat(encodeURIComponent(["gcm","huawei","apns"].join(",")),"&SB-User-Agent=").concat(m,"&SB-SDK-User-Agent=").concat(encodeURIComponent(gp.sendbirdSdkUserAgentWithExtension(l)),"&Request-Sent-Timestamp=").concat(Date.now().toString(),"&include_extra_data=").concat(encodeURIComponent(String(sw))).concat(this._sessionManager.handler?"&expiring_session=1":"","&use_local_cache=").concat(u?1:0,"&include_poll_details=1").concat(p?"&uikit_config=1":"")},n.prototype._statLogConnection=function(t){var r;this._dispatcher.dispatch(new My(new cr({type:Zn.WEBSOCKET_CONNECT,data:{host_url:(r=this.sdkState.websocket)===null||r===void 0?void 0:r.host,success:!t,latency:this._connectedAt>0?this._connectedAt-this._connectingAt:Date.now()-this._connectingAt,logi_latency:this._logiReceivedAt>0?this._logiReceivedAt-this._connectingAt:void 0,error_code:t==null?void 0:t.code,error_description:t==null?void 0:t.message}})))},n.prototype.connect=function(t){var r;return t===void 0&&(t=""),A(this,void 0,void 0,function(){var i,a,s,o=this;return M(this,function(l){return this._logiProcessingTimer&&(clearTimeout(this._logiProcessingTimer),this._logiProcessingTimer=void 0,this._rejectConnectionRequest(J.connectionCanceled)),i=new Gi,this._connectionRequestQueue.push(i),this._connectionRequestQueue.length===1&&(this._connectingAt=Date.now(),this._connectedAt=0,this._logiReceivedAt=0,this._loginTimer=setTimeout(function(){o._loginTimer=void 0,o._rejectConnectionRequest(J.loginTimeout)},(r=this.sdkState.websocket)===null||r===void 0?void 0:r.responseTimeout),a=this._sessionManager.session,t&&(a.authToken=t,a.sessionKey=void 0),s=this._url(),a.sessionKey||a.authToken?this._websocketClient.connect(s,JSON.stringify(a.hasSession?{auth:a.sessionKey}:{token:a.authToken})):this._websocketClient.connect(s,JSON.stringify({}))),[2,i.promise]})})},n.prototype.cancelConnectForRetry=function(){this._dispatcher.dispatch(Jv.asError(J.connectionRenew))},n.prototype.disconnect=function(){return A(this,void 0,void 0,function(){return M(this,function(t){switch(t.label){case 0:return[4,this._websocketClient.disconnect()];case 1:return t.sent(),[2]}})})},n.prototype.logout=function(){return A(this,void 0,void 0,function(){return M(this,function(t){switch(t.label){case 0:return this.sdkState.userId=void 0,this._unresolvedLogi=void 0,[4,this.disconnect()];case 1:return t.sent(),[4,this._sessionManager.clear()];case 2:return t.sent(),[2]}})})},n.prototype.clearLoginTimer=function(){this._loginTimer&&(clearTimeout(this._loginTimer),this._loginTimer=void 0)},n}(ku),ow=function(e){function n(t){var r=t.appId,i=t.userId,a=t.includeUIKitConfig,s=a!==void 0&&a,o=t.localCacheEnabled,l=o===void 0||o,u=t.expiringSession,d=u===void 0||u,f=e.call(this)||this;return f.path="".concat(LL,"/").concat(i,"/authentication"),f.method=we.POST,f.params=Xe({expiring_session:!!d,include_logi:!0,include_extra_data:String(sw),uikit_config:s,use_local_cache:l,app_id:r}),f.requireAuth=!1,f}return B(n,e),n}(Re),hk=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.logi=new Jv(t,"LOGI",r),i}return B(n,e),n}(He);(function(e){e[e.ALL=0]="ALL",e[e.WEBSOCKET=1]="WEBSOCKET",e[e.API=2]="API"})(dl||(dl={}));var Jn,oT,fk=[Iy,ow],vk=function(){function e(n,t){var r=t.session,i=t.sdkState,a=t.dispatcher,s=t.logger,o=t.useFetchCompat,l=o!==void 0&&o,u=this;this._currentConnectionStateType=On.INITIALIZED,this._lazyCallQueue=[],this.commandRouter=new ek(n,{session:r,sdkState:i,dispatcher:a,logger:s,useFetchCompat:l}),this._session=r,this._logger=s,this._dispatcher=a,this._dispatcher.on(function(d){var f,p,m;if(d instanceof pa){var E=d.stateType;switch(u._currentConnectionStateType=E,E){case On.CONNECTED:u._resolveLazyCallQueue();break;case On.INITIALIZED:case On.INTERNAL_DISCONNECTED:case On.EXTERNAL_DISCONNECTED:case On.LOGOUT:u._rejectLazyCallQueue(!((m=u._session)===null||m===void 0)&&m.hasSession?J.connectionClosed:J.connectionRequired)}}else if(d instanceof ew)u._session.hasChatServicePermission||u._resolveLazyCallQueue(dl.API);else if(d instanceof Ng||d instanceof tw)u._rejectLazyCallQueue(J.connectionClosed);else if(d instanceof RA){var g=d.request,y=d.deferred,S=d.error;try{for(var C=je(fk),T=C.next();!T.done;T=C.next())if(g instanceof T.value)return void y.reject(S)}catch(I){f={error:I}}finally{try{T&&!T.done&&(p=C.return)&&p.call(C)}finally{if(f)throw f.error}}u._lazyCallQueue.push({command:g,deferred:y})}})}return Object.defineProperty(e.prototype,"isReady",{get:function(){return this._currentConnectionStateType===On.CONNECTED},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLazyCallActivated",{get:function(){return this._currentConnectionStateType===On.CONNECTING||this._currentConnectionStateType===On.RECONNECTING||this._session.isRefreshing},enumerable:!1,configurable:!0}),e.prototype._classifyLazyCallQueueByScope=function(n){var t,r=[],i=[];switch(n){case dl.ALL:t=null;break;case dl.WEBSOCKET:t=_i;break;case dl.API:t=Re}var a=!1;return this._lazyCallQueue.forEach(function(s){!t||s.command instanceof t||(a=!0),a?i.push(s):r.push(s)}),[r,i]},e.prototype._resolveLazyCallQueue=function(n){var t=this;n===void 0&&(n=dl.ALL);var r=ft(this._classifyLazyCallQueueByScope(n),2),i=r[0],a=r[1];this._lazyCallQueue=a,i.forEach(function(s){return A(t,void 0,void 0,function(){var o,l,u,d,f;return M(this,function(p){switch(p.label){case 0:o=s.command,l=s.deferred,(u=s.timeout)&&clearTimeout(u),p.label=1;case 1:return p.trys.push([1,3,,4]),[4,this.send(o)];case 2:return d=p.sent(),l.resolve(d),[3,4];case 3:return f=p.sent(),l.reject(f),[3,4];case 4:return[2]}})})})},e.prototype._rejectLazyCallQueue=function(n,t){var r=this;t===void 0&&(t=dl.ALL);var i=ft(this._classifyLazyCallQueueByScope(t),2),a=i[0],s=i[1];this._lazyCallQueue=s,a.forEach(function(o){return A(r,void 0,void 0,function(){var l,u;return M(this,function(d){return l=o.deferred,u=o.timeout,clearTimeout(u),l.reject(n),[2]})})})},e.prototype.send=function(n){return A(this,void 0,void 0,function(){var t,r,i=this;return M(this,function(a){switch(a.label){case 0:return n instanceof _i?this.isReady?(this._logger.debug("send websocket request",n),[4,this.commandRouter.send(n)]):[3,2]:[3,4];case 1:case 5:case 7:return[2,a.sent()];case 2:if(this.isLazyCallActivated)return this._logger.debug("wait websocket request",n),t=new Gi,this._lazyCallQueue.push({command:n,deferred:t,timeout:setTimeout(function(){return i.timeout(n.requestId)},1e4)}),[2,t.promise];throw this._logger.debug("fail websocket request"),J.connectionRequired;case 3:case 9:return[3,11];case 4:return n instanceof Re?this._session.hasSession?(this._logger.debug("send api request",n),[4,this.commandRouter.send(n)]):[3,6]:[3,10];case 6:return n.hasSessionKey?(this._logger.debug("send api request with tmp session key",n),[4,this.commandRouter.send(n)]):[3,8];case 8:if(this.isLazyCallActivated)return this._logger.debug("wait api request",n),t=new Gi,this._lazyCallQueue.push({command:n,deferred:t,timeout:setTimeout(function(){return i.timeout(n.requestId)},1e4)}),[2,t.promise];throw r=J.connectionRequired,this._logger.debug("fail api request",r),r;case 10:throw J.invalidCommand;case 11:return[2]}})})},e.prototype.forceSend=function(n){return A(this,void 0,void 0,function(){return M(this,function(t){switch(t.label){case 0:return this._logger.debug("send forced request",n),n instanceof _i||n instanceof Re?[4,this.commandRouter.send(n)]:[3,2];case 1:return[2,t.sent()];case 2:throw J.invalidCommand}})})},e.prototype.timeout=function(n){this._logger.debug("timeout request",n);var t=this._lazyCallQueue.findIndex(function(r){return r.command.requestId===n});t>-1&&(this._lazyCallQueue[t].deferred.reject(J.connectionRequired),this._lazyCallQueue.splice(t,1))},e.prototype.cancel=function(n){this._logger.debug("cancel api request",n),this.commandRouter.cancel(n)},e.prototype.cancelAll=function(){this._logger.debug("cancel all api requests"),this.commandRouter.cancelAll()},e}(),R_="sendbird@devicetokens",O_=function(){function e(n){var t=n.type,r=n.token,i=n.device_os,a=n.device_manufacturer,s=n.system_push_enabled;this.type=t,this.token=r,this.deviceOS=i,this.deviceManufacturer=a,this.systemPushEnabled=s}return e.payloadify=function(n){return Xe(_t({type:n.type,token:n.token,device_os:n.deviceOS,device_manufacturer:n.deviceManufacturer,system_push_enabled:n.systemPushEnabled}))},e}(),D_=new WeakMap,pk=function(e){function n(t){var r=t._iid,i=t.session,a=t.cacheContext,s=t.sdkState,o=t.dispatcher,l=t.requestQueue,u=t.logger,d=t.pushNotificationAckManager,f=e.call(this)||this;return f._currentConnectionStateType=On.INITIALIZED,f._isRefreshingAuthToken=!1,f.currentUser=null,f.session=i,f._iid=r,f._cacheContext=a,f._sdkState=s,f._dispatcher=o,f._requestQueue=l,f._logger=u,f._pushNotificationAckManager=d,f._deviceTokens=[],f._dispatcher.on(function(p){var m,E,g;if(p instanceof pa){var y=p.stateType;f._currentConnectionStateType=y}else if(p instanceof Qc&&f.handler&&!f.isSessionKeyRefreshing){if(f._currentConnectionStateType===On.CONNECTING)return;!((m=p.error)===null||m===void 0)&&m.isSessionInvalidatedError?f.close():(!((E=p.error)===null||E===void 0)&&E.isSessionTokenExpiredError&&f.refreshAuthToken().catch(function(S){if(Ai(S)&&f._sdkState.appState==="foreground")throw S}),!((g=p.error)===null||g===void 0)&&g.isSessionKeyExpiredError&&(f._logger.debug("session expired"),f.handler.onSessionExpired&&f.handler.onSessionExpired(),f.refreshSessionKey().catch(function(S){if(Ai(S)&&f._sdkState.appState==="foreground")throw S})))}}),f}return B(n,e),Object.defineProperty(n.prototype,"ekey",{get:function(){return D_.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"deviceTokens",{get:function(){return this._deviceTokens},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"deviceTokenLastDeletedAt",{get:function(){return this._deviceTokenLastDeletedAt},enumerable:!1,configurable:!0}),n.prototype.indexOfDeviceToken=function(t,r){return this._deviceTokens.findIndex(function(i){return i.type===t&&i.token===r})},n.prototype.hasDeviceToken=function(t,r){return this.indexOfDeviceToken(t,r)>=0},n.prototype.createRefreshWebsocketCommand=function(t,r){return new KL({authToken:t,expiringSession:!0,requestId:r})},n.prototype._refreshSessionKeyByWebSocket=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o;return M(this,function(l){switch(l.label){case 0:return r=this.createRefreshWebsocketCommand(t),[4,this._requestQueue.forceSend(r)];case 1:if(i=l.sent(),a=i.as(WL),s=a.newKey,o=a.error)throw o;return this.session.sessionKey=s??this.session.sessionKey,[2]}})})},n.prototype._refreshSessionKeyByApi=function(t){return A(this,void 0,void 0,function(){var r,i=this;return M(this,function(a){switch(a.label){case 0:return r=new Iy({userId:this._sdkState.userId,authToken:t,services:this.session.services&&this.session.services.length>0?this.session.services:void 0,expiringSession:!0}),[4,tm(function(s){return A(i,void 0,void 0,function(){var o,l,u,d,f;return M(this,function(p){switch(p.label){case 0:return p.trys.push([0,2,,3]),[4,this._requestQueue.forceSend(r)];case 1:return o=p.sent(),l=o.as($L),u=l.key,d=l.services,this.session.sessionKey=u,this.session.services=d,[3,3];case 2:if(f=p.sent(),!this._isSessionRelatedError(f))throw f;return s(f),[3,3];case 3:return[2]}})})},3)];case 1:return a.sent(),[2]}})})},n.prototype._refreshSessionKey=function(t,r){return r===void 0&&(r=!0),A(this,void 0,void 0,function(){var i,a;return M(this,function(s){switch(s.label){case 0:if(this._currentConnectionStateType!==On.CONNECTED)return[3,8];s.label=1;case 1:return s.trys.push([1,3,,8]),[4,this._refreshSessionKeyByWebSocket(t)];case 2:return s.sent(),this.complete(),[2];case 3:i=s.sent(),s.label=4;case 4:return s.trys.push([4,6,,7]),[4,this._handleSessionRefreshError(i,r)];case 5:return s.sent(),[2];case 6:return s.sent(),[3,7];case 7:return[3,8];case 8:return s.trys.push([8,10,,12]),[4,this._refreshSessionKeyByApi(t)];case 9:return s.sent(),this.complete(),[3,12];case 10:return a=s.sent(),[4,this._handleSessionRefreshError(a,r)];case 11:return s.sent(),[3,12];case 12:return[2]}})})},n.prototype._receiveNewAuthToken=function(){var t,r=this,i=new Gi;if(this._isRefreshingAuthToken=!0,this.session.sessionKey=void 0,this.session.authToken=void 0,(t=this.handler)===null||t===void 0?void 0:t.onSessionTokenRequired){var a=null,s=function(){a&&(clearTimeout(a),a=null)},o=function(u){s(),r._isRefreshingAuthToken&&(r._isRefreshingAuthToken=!1,i.resolve(u))},l=function(u){s(),r._isRefreshingAuthToken&&(r._isRefreshingAuthToken=!1,i.reject(u))};a=setTimeout(function(){return l()},1e3*this._sdkState.sessionTokenRefreshTimeout),ut(function(){return A(r,void 0,void 0,function(){var u;return M(this,function(d){return!((u=this.handler)===null||u===void 0)&&u.onSessionTokenRequired&&this.handler.onSessionTokenRequired(o,l),[2]})})})}else i.resolve(null);return i.promise},n.prototype._handleSessionRefreshError=function(t,r){return r===void 0&&(r=!1),A(this,void 0,void 0,function(){var i;return M(this,function(a){switch(a.label){case 0:return t instanceof J&&(t.isSessionTokenExpiredError||t.code===at.APPLICATION_NOT_FOUND)?(this.session.authToken=void 0,r?[4,this._receiveNewAuthToken()]:[3,6]):[3,6];case 1:return(i=a.sent())?(this.session.authToken=i,[4,this._refreshSessionKey(this.session.authToken,!1)]):[3,3];case 2:return a.sent(),[3,5];case 3:return[4,this.clear()];case 4:a.sent(),a.label=5;case 5:return[2];case 6:throw t}})})},n.prototype._isSessionRelatedError=function(t){return t instanceof J&&(t.isSessionExpiredError||t.isSessionInvalidatedError)},Object.defineProperty(n.prototype,"isSessionKeyRefreshing",{get:function(){return this.session.isRefreshing},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isRefreshingAuthToken",{get:function(){return this._isRefreshingAuthToken},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionExpiring",{get:function(){return!!this.handler},enumerable:!1,configurable:!0}),n.prototype.authenticate=function(t,r){var i;return A(this,void 0,void 0,function(){var a,s,o;return M(this,function(l){switch(l.label){case 0:return this.session.authToken=r,a=new ow({appId:this._sdkState.appId,userId:t,includeUIKitConfig:!!((i=this._sdkState.extensions)!==null&&i!==void 0?i:{}).sb_uikit,localCacheEnabled:this._cacheContext.localCacheEnabled,expiringSession:this.isSessionExpiring}),[4,this._requestQueue.commandRouter.send(a)];case 1:return s=l.sent(),(o=s.as(hk).logi).error?[3,4]:this.session.hasChatServicePermission?[3,3]:[4,o.applyTo(this._iid)];case 2:l.sent(),l.label=3;case 3:return[3,5];case 4:throw o.error;case 5:return[2]}})})},n.prototype.login=function(t){var r;return A(this,void 0,void 0,function(){var i,a,s,o,l,u,d,f;return M(this,function(p){switch(p.label){case 0:return i=t.key,a=t.ekey,s=t.services,o=t.userProfile,l=t.deviceTokenLastDeletedAt,u=l===void 0?0:l,this.session.sessionKey=i,this.session.services=s,D_.set(this,a),this._deviceTokenCacheEnabled=(r=o==null?void 0:o.appInfo)===null||r===void 0?void 0:r.deviceTokenCache,d=this._cacheContext.preference,this._deviceTokenCacheEnabled?[4,d.get(R_)]:[3,5];case 1:return!(f=p.sent())||f.lastDeletedAt<u?(this._deviceTokens=[],this._deviceTokenLastDeletedAt=u,[4,this.saveDeviceToken()]):[3,3];case 2:return p.sent(),[3,4];case 3:this._deviceTokens=f.tokens.map(function(m){return new O_(O_.payloadify(m))}),this._deviceTokenLastDeletedAt=f.lastDeletedAt,p.label=4;case 4:return[3,7];case 5:return[4,d.remove(R_)];case 6:p.sent(),p.label=7;case 7:return[2]}})})},n.prototype.complete=function(){var t=this;this.dispatch("refresh"),this._dispatcher.dispatch(new ew),ut(function(){return A(t,void 0,void 0,function(){var r;return M(this,function(i){return this._logger.debug("session refreshed"),!((r=this.handler)===null||r===void 0)&&r.onSessionRefreshed&&this.handler.onSessionRefreshed(),[2]})})})},n.prototype.error=function(t){var r=this;ut(function(){return A(r,void 0,void 0,function(){var i;return M(this,function(a){return!((i=this.handler)===null||i===void 0)&&i.onSessionError&&this.handler.onSessionError(t),[2]})})})},n.prototype.close=function(){var t=this;this.dispatch("close"),this._dispatcher.dispatch(new tw),ut(function(){return A(t,void 0,void 0,function(){var r;return M(this,function(i){return this._logger.debug("session closed"),!((r=this.handler)===null||r===void 0)&&r.onSessionClosed&&this.handler.onSessionClosed(),[2]})})})},n.prototype.refreshAuthToken=function(){return A(this,void 0,void 0,function(){var t,r;return M(this,function(i){switch(i.label){case 0:if(t=null,!this.isSessionExpiring||this.session.isRefreshing)return[3,9];this.session.isRefreshing=!0,i.label=1;case 1:return i.trys.push([1,7,8,9]),[4,this._receiveNewAuthToken()];case 2:return(t=i.sent())?(this._logger.debug("session refreshing.."),this.session.authToken=t,[4,this._refreshSessionKey(this.session.authToken)]):[3,4];case 3:return i.sent(),[3,6];case 4:return[4,this.clear()];case 5:i.sent(),i.label=6;case 6:return[3,9];case 7:throw i.sent(),r=t?J.sessionTokenRefreshFailed:J.sessionTokenRequestFailed,this._dispatcher.dispatch(new Ng),this.error(r),this._logger.debug("refresh auth token error = ",r),r;case 8:return this.session.isRefreshing=!1,[7];case 9:return[2]}})})},n.prototype.refreshSessionKey=function(){return A(this,void 0,void 0,function(){var t;return M(this,function(r){switch(r.label){case 0:if(!this.isSessionExpiring||this.session.isRefreshing)return[3,5];this.session.isRefreshing=!0,r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,this._refreshSessionKey(this.session.authToken)];case 2:return r.sent(),[3,5];case 3:throw r.sent(),t=J.sessionTokenRefreshFailed,this._dispatcher.dispatch(new Ng),this.error(t),t;case 4:return this.session.isRefreshing=!1,[7];case 5:return[2]}})})},n.prototype.setDeviceToken=function(t,r,i){if(this._deviceTokenCacheEnabled&&this.indexOfDeviceToken(t,r)<0){var a=new O_({type:t,token:r,device_os:i==null?void 0:i.deviceOS,device_manufacturer:i==null?void 0:i.deviceManufacturer,system_push_enabled:i==null?void 0:i.systemPushEnabled});return this._deviceTokens.push(a),!0}return!1},n.prototype.unsetDeviceToken=function(t,r){if(this._deviceTokenCacheEnabled){var i=this.indexOfDeviceToken(t,r);i>=0&&this._deviceTokens.splice(i,1)}},n.prototype.unsetDeviceTokens=function(t){this._deviceTokenCacheEnabled&&(this._deviceTokens=t?this._deviceTokens.filter(function(r){return r.type!==t}):[])},n.prototype.setDeviceTokenDeletedAt=function(t){t>0&&(this._deviceTokenLastDeletedAt=t)},n.prototype.saveDeviceToken=function(){return A(this,void 0,void 0,function(){return M(this,function(t){switch(t.label){case 0:return this._deviceTokenCacheEnabled?[4,this._cacheContext.preference.set(R_,{tokens:this._deviceTokens,lastDeletedAt:this._deviceTokenLastDeletedAt})]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},n.prototype.clear=function(){return A(this,void 0,void 0,function(){return M(this,function(t){switch(t.label){case 0:return this.currentUser=null,this.session.clear(),this.close(),D_.delete(this),this._deviceTokens=[],this._deviceTokenLastDeletedAt=0,[4,this.saveDeviceToken()];case 1:return t.sent(),this._pushNotificationAckManager.clear(),[2]}})})},n}(ku),lw=function(e,n){var t,r;if(e!==null&&n!==null){var i=Object.keys(e),a=Object.keys(n),s=At([],ft(new Set(At(At([],ft(i),!1),ft(a),!1))),!1),o={};try{for(var l=je(s),u=l.next();!u.done;u=l.next()){var d=u.value,f=typeof e[d],p=typeof n[d];f==="undefined"?o[d]=n[d]:p==="undefined"?o[d]=e[d]:f!==p?o[d]=n[d]:f==="object"&&e[d]&&n[d]?o[d]=lw(e[d],n[d]):o[d]=n[d]}}catch(m){t={error:m}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return o}return n};(function(e){e[e.PENDING=0]="PENDING",e[e.COLLECT_ONLY=1]="COLLECT_ONLY",e[e.ENABLED=2]="ENABLED",e[e.DISABLED=3]="DISABLED"})(Jn||(Jn={})),function(e){e.DAILY="daily",e.DEFAULT="default",e.REALTIME="realtime"}(oT||(oT={}));var Np,rm=100,Ly=function(){function e(n){var t=n.deviceId,r=n.cacheContext,i=n.requestQueue;this.queue=[],this.flushWaitQueue=[],this.enabledState=Jn.PENDING,this.isFlushing=!1,this._sentLogStats=[],this.deviceId=t,this.cacheContext=r,this.requestQueue=i,this.logInfo={deviceId:t,statLogs:[],generation:1,lastFlushedAt:0},this.limit=rm}return Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this.enabledState===Jn.ENABLED},enumerable:!1,configurable:!0}),e.prototype.init=function(n){return A(this,void 0,void 0,function(){var t;return M(this,function(r){switch(r.label){case 0:return this.key=n,[4,this.cacheContext.preference.get(this.key)];case 1:return(t=r.sent())&&(this.logInfo=t),[2]}})})},e.prototype._mergeQueue=function(){this.flushWaitQueue.length>0&&(this.queue=this.queue.concat(this.flushWaitQueue),this.flushWaitQueue=[])},e.prototype._isDuplicateStat=function(n){var t=this._sentLogStats.find(function(r){var i;return r.channelUrl===n.data.channel_url&&r.messageId===((i=n.data.notificationId)!==null&&i!==void 0?i:n.data.message_id)&&r.action===n.data.action});return t||this._sentLogStats.push({channelUrl:n.data.channel_url,messageId:n.data.message_id,action:n.data.action}),!!t},e.prototype._save=function(){return A(this,void 0,void 0,function(){var n;return M(this,function(t){switch(t.label){case 0:return n=At(At([],ft(this.queue),!1),ft(this.flushWaitQueue),!1),[4,this.cacheContext.preference.set(this.key,{deviceId:this.logInfo.deviceId,statLogs:n.map(function(r){return cr.payloadify(r)}),generation:this.logInfo.generation++,lastFlushedAt:this.logInfo.lastFlushedAt})];case 1:return t.sent(),[2]}})})},e.prototype.clear=function(){return A(this,void 0,void 0,function(){return M(this,function(n){return this.queue=[],this.flushWaitQueue=[],this.logInfo.generation=1,this._save(),[2]})})},e}(),Kh=function(e){function n(t){var r,i,a,s,o=t.type,l=t.data,u=t.ts,d=u===void 0?Date.now():u,f=e.call(this,{type:o,data:l,ts:d})||this;return f.date=new Date(d),f.key="".concat((r=f.date,i=r.getFullYear(),a=String(r.getMonth()+1).padStart(2,"0"),s=String(r.getDate()).padStart(2,"0"),"".concat(i).concat(a).concat(s)),"_").concat(o),f}return B(n,e),n}(cr),uw=function(e){function n(t){var r=t.deviceId,i=t.statLogs,a=e.call(this)||this;return a.method=we.POST,a.path="".concat(BL),a.params={device_id:r,log_entries:i.map(function(s){return cr.payloadify(s)})},a}return B(n,e),n}(Re),mk=function(e){function n(t){var r=t.deviceId,i=t.cacheContext,a=t.requestQueue;return e.call(this,{deviceId:r,cacheContext:i,requestQueue:a})||this}return B(n,e),Object.defineProperty(n.prototype,"_isSendable",{get:function(){return this.queue.length!==0&&Date.now()-this.logInfo.lastFlushedAt>=this.statConfig.minInterval},enumerable:!1,configurable:!0}),n.prototype.init=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){switch(r.label){case 0:return[4,e.prototype.init.call(this,t+".daily")];case 1:return r.sent(),this.queue=this.logInfo.statLogs.map(function(i){return new cr({type:i.stat_type,ts:i.ts,data:i.data})}),[2]}})})},n.prototype.setConfig=function(t,r){return A(this,void 0,void 0,function(){var i,a,s,o;return M(this,function(l){switch(l.label){case 0:return this.statConfig=t,this.statConfig.minInterval=864e5,this._mergeQueue(),r.localCacheStat?(this.enabledState=r.enabledStat?Jn.ENABLED:Jn.COLLECT_ONLY,[3,3]):[3,1];case 1:return this.enabledState=Jn.DISABLED,[4,this.clear()];case 2:l.sent(),l.label=3;case 3:return this.isEnabled&&this._isSendable?[4,this._getUploadStats()]:[3,9];case 4:i=l.sent(),a=Math.max(Math.floor(Math.random()*this.statConfig.requestDelayRange),100),s=0,l.label=5;case 5:return s<i.length?(o=i.slice(s,1+this.statConfig.maxStatCountPerRequest),[4,Yi(a)]):[3,9];case 6:return l.sent(),[4,this._flush(o)];case 7:l.sent(),l.label=8;case 8:return s+=this.statConfig.maxStatCountPerRequest,[3,5];case 9:return[2]}})})},n.prototype.put=function(t){return A(this,void 0,void 0,function(){var r,i,a,s;return M(this,function(o){switch(o.label){case 0:return this.enabledState===Jn.DISABLED?[2,!0]:(r=this.enabledState===Jn.PENDING||this.isFlushing?this.flushWaitQueue:this.queue,i=ft(r.filter(function(l){return l instanceof Kh&&l.key===t.key}),1),(a=i[0])?a.data=lw(a.data,t.data):r.push(t),this.enabledState===Jn.PENDING?[3,2]:[4,this._save()]);case 1:o.sent(),o.label=2;case 2:return this.isEnabled?(this._mergeQueue(),this._isSendable?[4,this._getUploadStats()]:[3,5]):[3,5];case 3:return s=o.sent(),[4,this._flush(s)];case 4:return[2,o.sent()];case 5:return[2,!0]}})})},n.prototype._getUploadStats=function(){return A(this,void 0,void 0,function(){var t;return M(this,function(r){return t=this.queue.filter(function(i){if(i instanceof Kh){var a=new Date,s=ft([i.date.getFullYear(),a.getFullYear()],2),o=s[0],l=s[1];if(o<l)return!0;if(o===l){var u=ft([i.date.getMonth(),a.getMonth()],2),d=u[0],f=u[1];if(d<f)return!0;if(d===f){var p=ft([i.date.getDate(),a.getDate()],2);return p[0]<p[1]}}}return!1}),[2,t]})})},n.prototype._flush=function(t){return A(this,void 0,void 0,function(){var r,i,a,s;return M(this,function(o){switch(o.label){case 0:if(r=!0,!(t.length>0))return[3,10];if(this.isFlushing)return[3,9];this.isFlushing=!0,o.label=1;case 1:return o.trys.push([1,4,8,9]),i=At([],ft(t),!1).slice(0,Math.min(this.limit,this.statConfig.maxStatCountPerRequest)),a=new uw({deviceId:this.deviceId,statLogs:i}),[4,this.requestQueue.send(a)];case 2:return o.sent(),this.queue=At([],ft(t),!1).slice(i.length).concat(this.flushWaitQueue),this.flushWaitQueue=[],this.limit=rm,this.logInfo.lastFlushedAt=Date.now(),[4,this._save()];case 3:return o.sent(),[3,9];case 4:return(s=o.sent())instanceof J?s.code!==at.NON_AUTHORIZED?[3,6]:[4,this.clear()]:[3,7];case 5:return o.sent(),this.enabledState=Jn.DISABLED,[3,7];case 6:s.code===at.STAT_UPLOAD_NOT_ALLOWED&&(this.enabledState=Jn.COLLECT_ONLY),o.label=7;case 7:return this.limit=this.limit+20,r=!1,[3,9];case 8:return this.isFlushing=!1,[7];case 9:return[3,11];case 10:this.isFlushing=!1,o.label=11;case 11:return[2,r]}})})},n}(Ly),_k=function(e){function n(t){var r=t.deviceId,i=t.cacheContext,a=t.requestQueue;return e.call(this,{deviceId:r,cacheContext:i,requestQueue:a})||this}return B(n,e),n.prototype._isSendable=function(t){if(t===void 0&&(t=!1),this.queue.length<this.statConfig.lowerThreshold)return!1;if(t){if(Date.now()-this.logInfo.lastFlushedAt<this.statConfig.minInterval)return!1}else if(this.queue.length<this.statConfig.minStatCount)return!1;return!0},n.prototype._filterQueueByType=function(t,r){return A(this,void 0,void 0,function(){return M(this,function(i){return[2,r?t.filter(function(a){return a.type!==Zn.FEATURE_LOCALCACHE_EVENT}):t.filter(function(a){return a.type===Zn.FEATURE_LOCALCACHE_EVENT})]})})},n.prototype.init=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){switch(r.label){case 0:return[4,e.prototype.init.call(this,t+".default")];case 1:return r.sent(),this.queue=this.logInfo.statLogs.map(function(i){return i.data=W({message_init_policy:"",starting_point:0},i.data),new cr({type:i.stat_type,ts:i.ts,data:i.data})}),[2]}})})},n.prototype.setConfig=function(t,r){return A(this,void 0,void 0,function(){var i,a,s,o;return M(this,function(l){switch(l.label){case 0:return this.statConfig=t,this._mergeQueue(),r.requestStat||r.localCacheStat?(this.enabledState=r.enabledStat?Jn.ENABLED:Jn.COLLECT_ONLY,i=void 0,r.requestStat||(i=!1),r.localCacheStat||(i=!0),i===void 0?[3,3]:(a=this,[4,this._filterQueueByType(this.queue,i)])):[3,4];case 1:return a.queue=l.sent(),s=this,[4,this._filterQueueByType(this.flushWaitQueue,i)];case 2:s.flushWaitQueue=l.sent(),this._save(),l.label=3;case 3:return[3,6];case 4:return this.enabledState=Jn.DISABLED,[4,this.clear()];case 5:l.sent(),l.label=6;case 6:return this.isEnabled&&this._isSendable(!0)?(o=Math.max(Math.floor(Math.random()*this.statConfig.requestDelayRange),100),[4,Yi(o)]):[3,9];case 7:return l.sent(),[4,this._flush(this.queue)];case 8:l.sent(),l.label=9;case 9:return[2]}})})},n.prototype.put=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){switch(i.label){case 0:return this.enabledState===Jn.DISABLED?[2,!0]:((r=this.enabledState===Jn.PENDING||this.isFlushing?this.flushWaitQueue:this.queue).push(t),this.enabledState===Jn.PENDING?[3,2]:[4,this._save()]);case 1:i.sent(),i.label=2;case 2:return this.isEnabled?(this._mergeQueue(),this._isSendable()?[4,this._flush(r)]:[3,4]):[3,4];case 3:return[2,i.sent()];case 4:return[2,!0]}})})},n.prototype._flush=function(t){return A(this,void 0,void 0,function(){var r,i,a,s;return M(this,function(o){switch(o.label){case 0:if(r=!0,!(t.length>0))return[3,10];if(this.isFlushing)return[3,9];this.isFlushing=!0,o.label=1;case 1:return o.trys.push([1,4,8,9]),i=At([],ft(t),!1).slice(0,Math.min(this.limit,this.statConfig.maxStatCountPerRequest)),a=new uw({deviceId:this.deviceId,statLogs:i}),[4,this.requestQueue.send(a)];case 2:return o.sent(),this.queue=At([],ft(t),!1).slice(i.length).concat(this.flushWaitQueue),this.flushWaitQueue=[],this.limit=rm,this.logInfo.lastFlushedAt=Date.now(),[4,this._save()];case 3:return o.sent(),[3,9];case 4:return(s=o.sent())instanceof J?s.code!==at.NON_AUTHORIZED?[3,6]:[4,this.clear()]:[3,7];case 5:return o.sent(),this.enabledState=Jn.DISABLED,[3,7];case 6:s.code===at.STAT_UPLOAD_NOT_ALLOWED&&(this.enabledState=Jn.COLLECT_ONLY),o.label=7;case 7:return this.limit=this.limit+20,r=!1,[3,9];case 8:return this.isFlushing=!1,[7];case 9:return[3,11];case 10:this.isFlushing=!1,o.label=11;case 11:return[2,r]}})})},n}(Ly),gk=function(e){function n(t){var r=t.deviceId,i=t.statLogs,a=e.call(this)||this;return a.method=we.POST,a.path="".concat(GL),a.params={device_id:r,log_entries:i.map(function(s){return cr.payloadify(s)})},a}return B(n,e),n}(Re),Ek=function(e){function n(t){var r=t.deviceId,i=t.cacheContext,a=t.requestQueue;return e.call(this,{deviceId:r,cacheContext:i,requestQueue:a})||this}return B(n,e),Object.defineProperty(n.prototype,"_isSendable",{get:function(){return this.queue.length>=this.statConfig.minStatCount&&this.queue.length>this.statConfig.lowerThreshold||this.logInfo.lastFlushedAt>0&&Date.now()-this.logInfo.lastFlushedAt>=this.statConfig.minInterval},enumerable:!1,configurable:!0}),n.prototype.init=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){switch(r.label){case 0:return[4,e.prototype.init.call(this,t+".realtime")];case 1:return r.sent(),this.queue=this.logInfo.statLogs.map(function(i){var a;return i.data=Xe(W(W({},i.data),{message_id:(a=i.data.notificationId)!==null&&a!==void 0?a:i.data.message_id,notificationId:void 0})),new cr({type:i.stat_type,ts:i.ts,data:i.data})}),this._sentLogStats=this.queue.map(function(i){var a;return{channelUrl:i.data.channelUrl,messageId:(a=i.data.notificationId)!==null&&a!==void 0?a:i.data.message_id,action:i.data.action}}),[2]}})})},n.prototype.setConfig=function(t,r){return A(this,void 0,void 0,function(){var i;return M(this,function(a){switch(a.label){case 0:return this.statConfig=t,this._mergeQueue(),r.notificationStat?(this.enabledState=r.enabledStat?Jn.ENABLED:Jn.COLLECT_ONLY,[3,3]):[3,1];case 1:return this.enabledState=Jn.DISABLED,[4,this.clear()];case 2:a.sent(),a.label=3;case 3:return this.isEnabled&&this._isSendable?(i=Math.max(Math.floor(Math.random()*this.statConfig.requestDelayRange),100),[4,Yi(i)]):[3,6];case 4:return a.sent(),[4,this._flush(this.queue)];case 5:a.sent(),a.label=6;case 6:return[2]}})})},n.prototype.put=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){switch(i.label){case 0:return this.enabledState===Jn.DISABLED?[2,!0]:(r=this.enabledState===Jn.PENDING||this.isFlushing?this.flushWaitQueue:this.queue,this._isDuplicateStat(t)?[2,!0]:(r.push(t),this.enabledState===Jn.PENDING?[3,2]:[4,this._save()]));case 1:i.sent(),i.label=2;case 2:return this.isEnabled?(this._mergeQueue(),this.isEnabled&&this._isSendable?[4,this._flush(r)]:[3,4]):[3,4];case 3:return[2,i.sent()];case 4:return[2,!0]}})})},n.prototype._flush=function(t){return A(this,void 0,void 0,function(){var r,i,a,s;return M(this,function(o){switch(o.label){case 0:if(r=!0,!(t.length>0))return[3,10];if(this.isFlushing)return[3,9];this.isFlushing=!0,o.label=1;case 1:return o.trys.push([1,4,8,9]),i=At([],ft(t),!1).slice(0,Math.min(this.limit,this.statConfig.maxStatCountPerRequest)),a=new gk({deviceId:this.deviceId,statLogs:i}),[4,this.requestQueue.send(a)];case 2:return o.sent(),this.queue=At([],ft(t),!1).slice(i.length).concat(this.flushWaitQueue),this.flushWaitQueue=[],this.limit=rm,this.logInfo.lastFlushedAt=Date.now(),[4,this._save()];case 3:return o.sent(),[3,9];case 4:return(s=o.sent())instanceof J?s.code!==at.NON_AUTHORIZED?[3,6]:[4,this.clear()]:[3,7];case 5:return o.sent(),this.enabledState=Jn.DISABLED,[3,7];case 6:s.code===at.STAT_UPLOAD_NOT_ALLOWED&&(this.enabledState=Jn.COLLECT_ONLY),o.label=7;case 7:return this.limit=this.limit+20,r=!1,[3,9];case 8:return this.isFlushing=!1,[7];case 9:return[3,11];case 10:this.isFlushing=!1,o.label=11;case 11:return[2,r]}})})},n}(Ly),yk=function(){function e(n){var t=n.cacheContext,r=n.requestQueue,i=n.dispatcher,a=n.logger;this._collectRequestStat=!0,this._collectFeatureLocalCacheStat=!0,this._collectionNotificationStat=!0,this._retryCount=0,this.deviceId=Ro(),this.cacheContext=t,this.requestQueue=r,this.dispatcher=i,this.logger=a,this._dailyStatCollector=new mk({deviceId:this.deviceId,cacheContext:this.cacheContext,requestQueue:this.requestQueue}),this._defaultStatCollector=new _k({deviceId:this.deviceId,cacheContext:this.cacheContext,requestQueue:this.requestQueue}),this._notificationStatCollector=new Ek({deviceId:this.deviceId,cacheContext:this.cacheContext,requestQueue:this.requestQueue})}return e.prototype._migration=function(){return A(this,void 0,void 0,function(){var n,t,r,i;return M(this,function(a){switch(a.label){case 0:return[4,this.cacheContext.preference.get(this.key)];case 1:return(n=a.sent())?(t=[],n.statLogs.forEach(function(s){s.stat_type===Zn.FEATURE_LOCALCACHE&&t.push(new cr({type:s.stat_type,ts:s.ts,data:s.data}))}),[4,this.cacheContext.preference.set(this.key+".daily",{deviceId:n.deviceId,statLogs:t.map(function(s){return cr.payloadify(s)}),generation:n.generation,lastFlushedAt:n.lastFlushedAt})]):[3,6];case 2:return a.sent(),r=[],n.statLogs.forEach(function(s){s.stat_type!==Zn.FEATURE_LOCALCACHE&&s.stat_type!==Zn.NOTIFICATION&&(s.stat_type===Zn.FEATURE_LOCALCACHE_EVENT&&(s.data=W({message_init_policy:"",starting_point:0},s.data)),r.push(new cr({type:s.stat_type,ts:s.ts,data:s.data})))}),[4,this.cacheContext.preference.set(this.key+".default",{deviceId:n.deviceId,statLogs:r.map(function(s){return cr.payloadify(s)}),generation:n.generation,lastFlushedAt:n.lastFlushedAt})];case 3:return a.sent(),i=[],n.statLogs.forEach(function(s){var o;s.stat_type===Zn.NOTIFICATION&&(s.data=Xe(W(W({},s.data),{message_id:(o=s.data.notificationId)!==null&&o!==void 0?o:s.data.message_id,notificationId:void 0})),i.push(new cr({type:s.stat_type,ts:s.ts,data:s.data})))}),[4,this.cacheContext.preference.set(this.key+".realtime",{deviceId:n.deviceId,statLogs:i.map(function(s){return cr.payloadify(s)}),generation:n.generation,lastFlushedAt:n.lastFlushedAt})];case 4:return a.sent(),[4,this.cacheContext.preference.remove(this.key)];case 5:a.sent(),a.label=6;case 6:return[2]}})})},e.prototype.init=function(n){return A(this,void 0,void 0,function(){var t=this;return M(this,function(r){switch(r.label){case 0:return this.key=n,[4,this._migration()];case 1:return r.sent(),[4,this._dailyStatCollector.init(this.key)];case 2:return r.sent(),[4,this._defaultStatCollector.init(this.key)];case 3:return r.sent(),[4,this._notificationStatCollector.init(this.key)];case 4:return r.sent(),this.commandEventContext||(this.commandEventContext=this.dispatcher.on(function(i){return A(t,void 0,void 0,function(){var a,s,o,l,u,d;return M(this,function(f){return i instanceof My?(a=i.statLog,this.put(a)):i instanceof rw&&(s=i.request,o=i.features,l=i.options,u=i.statConfigInfo,this._retryCount=0,this._collectRequestStat=s,this._collectFeatureLocalCacheStat=o==null?void 0:o.localCache,this._collectionNotificationStat=o==null?void 0:o.notification,this._statConfig=u,this._dailyStatCollector.setConfig(this._statConfig.default,{localCacheStat:this._collectFeatureLocalCacheStat,enabledStat:l.ingestion}),this._defaultStatCollector.setConfig(this._statConfig.default,{requestStat:this._collectRequestStat,localCacheStat:this._collectFeatureLocalCacheStat,enabledStat:l.ingestion}),this._notificationStatCollector.setConfig((d=this._statConfig.realTime)!==null&&d!==void 0?d:this._statConfig.default,{notificationStat:this._collectionNotificationStat,enabledStat:l.ingestion})),[2]})})})),[2]}})})},e.prototype.put=function(n){return A(this,void 0,void 0,function(){var t;return M(this,function(r){switch(r.label){case 0:return t=!0,n instanceof Kh?this._collectFeatureLocalCacheStat?[4,this._dailyStatCollector.put(n)]:[3,2]:[3,3];case 1:t=r.sent(),r.label=2;case 2:return[3,13];case 3:switch(n.type){case Zn.API_RESULT:case Zn.WEBSOCKET_CONNECT:return[3,4];case Zn.FEATURE_LOCALCACHE:case Zn.FEATURE_LOCALCACHE_EVENT:return[3,7];case Zn.NOTIFICATION:return[3,10]}return[3,13];case 4:return this._collectRequestStat?[4,this._defaultStatCollector.put(n)]:[3,6];case 5:t=r.sent(),r.label=6;case 6:return[3,13];case 7:return this._collectFeatureLocalCacheStat?[4,this._defaultStatCollector.put(n)]:[3,9];case 8:t=r.sent(),r.label=9;case 9:return[3,13];case 10:return this._collectionNotificationStat?[4,this._notificationStatCollector.put(n)]:[3,12];case 11:t=r.sent(),r.label=12;case 12:return[3,13];case 13:return t?this._retryCount=0:(this._retryCount++,this._retryCount>20&&(this._dailyStatCollector.enabledState=Jn.COLLECT_ONLY,this._defaultStatCollector.enabledState=Jn.COLLECT_ONLY,this._notificationStatCollector.enabledState=Jn.COLLECT_ONLY,this.logger.debug(J.statLogUploadLimitExceededError))),[2]}})})},e.prototype.close=function(){this.commandEventContext&&(this.commandEventContext.close(),this.commandEventContext=void 0)},e}(),Ck=function(){function e(n){var t=n.limit,r=t===void 0?5:t;this.workersByKey={},this.limit=r}return e.prototype.run=function(n,t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){switch(i.label){case 0:return this.workersByKey[n]||(this.workersByKey[n]=[]),this.workersByKey[n].length<this.limit?(this.workersByKey[n].push(t),[4,t()]):[3,2];case 1:return r=i.sent(),this.workersByKey[n].pop(),[2,r];case 2:throw J.tooManyRequests}})})},e.prototype.clear=function(n){this.workersByKey[n]=[]},e}();(function(e){e.DELIVERY_RECEIPT="delivery_receipt",e.PUSH_ACKNOWLEDGEMENT="push_acknowledgement"})(Np||(Np={}));var ve,bk=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t._pushAckedCache={},t}return B(n,e),n.prototype.isAcked=function(t,r){var i,a="".concat(t,"_").concat(r);return(i=this._pushAckedCache[a])!==null&&i!==void 0&&i},n.prototype.markAsAcked=function(t,r){var i="".concat(t,"_").concat(r);this._pushAckedCache[i]=!0},n.prototype.clear=function(){Y.of(this._iid).logger.debug("clear push acked cache"),this._pushAckedCache={}},n.prototype.parseData=function(t){var r,i,a,s,o=Y.of(this._iid).logger,l=t.sendbird;if(typeof l=="string")try{l=JSON.parse(l)}catch{throw o.info("push notification payload does not contain sendbird payload in JSON format."),J.malformedDataError}if(!l||typeof l!="object")throw o.info("push notification payload does not contain sendbird payload in JSON format."),J.malformedDataError;var u=(r=l.push_tracking_id)!==null&&r!==void 0?r:"",d=l.notification_message_id,f=l.notification_channel_key,p=l.notification_template_key,m=l.notification_event_deadline,E=(i=l.session_key)!==null&&i!==void 0?i:{},g=(a=E==null?void 0:E.key)!==null&&a!==void 0?a:"",y=(s=E==null?void 0:E.topics)!==null&&s!==void 0?s:[];if(typeof u!="string"||u.length===0)throw o.info("push tracking id is not available"),J.malformedDataError;if(typeof d!="string"||d.length===0)throw o.info("message id is not available"),J.malformedDataError;return{pushTrackingId:u,sessionKey:g,sessionTopics:y,messageId:d,channelKey:f,templateKey:p,notificationEventDeadline:m}},n}(Ur),zc=function(e){this.name=e.name,this._custom=e.custom,this._usedByModerationEngine=e.used_by_moderation_engine},Sk=function(e){function n(){var t=e.call(this)||this;return t.method=we.GET,t.path=jL,t}return B(n,e),n}(Re),Tk=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.reportCategories=r.categories,i}return B(n,e),n}(He),Nk=function(e){function n(t){var r=e.call(this,t)||this;return r._categories=[],r}return B(n,e),n.prototype.categories=function(){return A(this,void 0,void 0,function(){return M(this,function(t){switch(t.label){case 0:return this._categories.length!==0?[3,2]:[4,this._fetchCategories()];case 1:t.sent(),t.label=2;case 2:return[2,this._categories]}})})},n.prototype._fetchCategories=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s;return M(this,function(o){switch(o.label){case 0:return t=Y.of(this._iid).requestQueue,r=new Sk,[4,t.send(r)];case 1:return i=o.sent(),(a=i.as(Tk).reportCategories)&&(s=this._categories).push.apply(s,At([],ft(a.map(function(l){return new zc(l)})),!1)),[2]}})})},n}(Ur),Zl={},Y=function(){function e(n,t){var r,i,a,s,o,l,u,d,f;if(this.connectedAt=0,this.firstConnectedAt=0,this.connectionHandlers=new Map,this.userEventHandlers=new Map,!Zl[n]){Zl[n]=this;var p=(r=t.options)!==null&&r!==void 0?r:new bA,m=this.sdkState={appId:t.appId,appVersion:(i=t.appVersion)!==null&&i!==void 0?i:"",appState:"foreground",userId:void 0,extensions:{},api:{host:(a=t.apiHost)!==null&&a!==void 0?a:"https://api-".concat(t.appId,".sendbird.com")},websocket:{host:(s=t.websocketHost)!==null&&s!==void 0?s:"wss://ws-".concat(t.appId,".sendbird.com"),pingerDisabled:!!t.noPingpong,pingInterval:void 0,pongTimeout:void 0,connectMaxRetry:2,compression:!0,reconnectMaxRetry:-1,reconnectRetryStrategy:new iw,responseTimeout:p.websocketResponseTimeout},sessionTokenRefreshTimeout:p.sessionTokenRefreshTimeout};this.appInfo=void 0,this.subscribedUnreadMessageCount={all:0,feed:0,customTypes:{},ts:0};var E=this.logger=t.logger;this.connectedAt=0,this.firstConnectedAt=0,this.connectionHandlers=new Map,this.userEventHandlers=new Map;var g=this.cacheContext=new wL({encryption:t.encryption,store:t.store,localCacheEnabled:(o=t.localCacheEnabled)!==null&&o!==void 0&&o,localCacheConfig:(l=t.localCacheConfig)!==null&&l!==void 0?l:new TA});this.debugMode=(u=t.debugMode)!==null&&u!==void 0&&u,this.maxSuperGroupChannelUnreadCount=yl.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL,this.useMemberInfoInMessage=p.useMemberInfoInMessage,this.typingIndicatorInvalidateTime=p.typingIndicatorInvalidateTime,this.typingIndicatorThrottle=p.typingIndicatorThrottle,this.concurrentCallLimit=void 0,this.backOffDelay=void 0;var y=this.dispatcher=new DL,S=new OL;this.requestQueue=new vk(n,{session:S,sdkState:m,dispatcher:y,logger:E,useFetchCompat:t.useFetchCompat}),this.pushNotificationAckManager=new bk(n),this.sessionManager=new pk({_iid:n,session:S,cacheContext:g,sdkState:m,dispatcher:y,requestQueue:this.requestQueue,logger:E,pushNotificationAckManager:this.pushNotificationAckManager}),this.connectionManager=new lk(n,{sdkState:m,cacheContext:this.cacheContext,connectionHandlers:this.connectionHandlers,dispatcher:y,sessionManager:this.sessionManager,websocketClient:this.requestQueue.commandRouter.websocketClient,disableWebSocketCloseEventHandling:(d=t.disableWebSocketCloseEventHandling)!==null&&d!==void 0&&d,logger:E}),this.statManager=new yk({cacheContext:this.cacheContext,requestQueue:this.requestQueue,dispatcher:this.dispatcher,logger:E}),this.appStateToggleEnabled=(f=t.appStateToggleEnabled)===null||f===void 0||f,this.messageBackgroundSyncThrottleController=new Ck({limit:5}),this.reportCategoryManager=new Nk(n)}return Zl[n]}return e.of=function(n){if(Zl[n])return Zl[n];throw J.lostInstance},e.clear=function(n){Zl[n]&&delete Zl[n]},e.prototype.hasExtension=function(n){return this.sdkState.extensions&&this.sdkState.extensions[n]},e}(),im=function(){function e(){}return e.prototype.init=function(n,t){var r=t.sdkState,i=t.dispatcher,a=t.sessionManager,s=t.requestQueue,o=t.logger;t.onlineDetector;var l=t.cacheContext;this._iid=n,this._cacheContext=l,this._sdkState=r,this._dispatcher=i,this._sessionManager=a,this._requestQueue=s,this._logger=o},e}();(function(e){e.UNKNOWN="UNKNOWN",e.EVENT_CHANNEL_CREATED="EVENT_CHANNEL_CREATED",e.EVENT_CHANNEL_UPDATED="EVENT_CHANNEL_UPDATED",e.EVENT_CHANNEL_DELETED="EVENT_CHANNEL_DELETED",e.EVENT_CHANNEL_READ="EVENT_CHANNEL_READ",e.EVENT_CHANNEL_DELIVERED="EVENT_CHANNEL_DELIVERED",e.EVENT_CHANNEL_INVITED="EVENT_CHANNEL_INVITED",e.EVENT_CHANNEL_JOINED="EVENT_CHANNEL_JOINED",e.EVENT_CHANNEL_LEFT="EVENT_CHANNEL_LEFT",e.EVENT_CHANNEL_ACCEPTED_INVITE="EVENT_CHANNEL_ACCEPTED_INVITE",e.EVENT_CHANNEL_DECLINED_INVITE="EVENT_CHANNEL_DECLINED_INVITE",e.EVENT_CHANNEL_OPERATOR_UPDATED="EVENT_CHANNEL_OPERATOR_UPDATED",e.EVENT_CHANNEL_BANNED="EVENT_CHANNEL_BANNED",e.EVENT_CHANNEL_UNBANNED="EVENT_CHANNEL_UNBANNED",e.EVENT_CHANNEL_MUTED="EVENT_CHANNEL_MUTED",e.EVENT_CHANNEL_UNMUTED="EVENT_CHANNEL_UNMUTED",e.EVENT_CHANNEL_FROZEN="EVENT_CHANNEL_FROZEN",e.EVENT_CHANNEL_UNFROZEN="EVENT_CHANNEL_UNFROZEN",e.EVENT_CHANNEL_HIDDEN="EVENT_CHANNEL_HIDDEN",e.EVENT_CHANNEL_UNHIDDEN="EVENT_CHANNEL_UNHIDDEN",e.EVENT_CHANNEL_RESET_HISTORY="EVENT_CHANNEL_RESET_HISTORY",e.EVENT_CHANNEL_TYPING_STATUS_UPDATE="EVENT_CHANNEL_TYPING_STATUS_UPDATE",e.EVENT_CHANNEL_MEMBER_COUNT_UPDATED="EVENT_CHANNEL_MEMBER_COUNT_UPDATED",e.EVENT_CHANNEL_METADATA_CREATED="EVENT_CHANNEL_METADATA_CREATED",e.EVENT_CHANNEL_METADATA_UPDATED="EVENT_CHANNEL_METADATA_UPDATED",e.EVENT_CHANNEL_METADATA_DELETED="EVENT_CHANNEL_METADATA_DELETED",e.EVENT_CHANNEL_METACOUNTER_CREATED="EVENT_CHANNEL_METACOUNTER_CREATED",e.EVENT_CHANNEL_METACOUNTER_UPDATED="EVENT_CHANNEL_METACOUNTER_UPDATED",e.EVENT_CHANNEL_METACOUNTER_DELETED="EVENT_CHANNEL_METACOUNTER_DELETED",e.EVENT_MESSAGE_SENT="EVENT_MESSAGE_SENT",e.EVENT_MESSAGE_RECEIVED="EVENT_MESSAGE_RECEIVED",e.EVENT_MESSAGE_UPDATED="EVENT_MESSAGE_UPDATED",e.EVENT_PINNED_MESSAGE_UPDATED="EVENT_PINNED_MESSAGE_UPDATED",e.REQUEST_CHANNEL="REQUEST_CHANNEL",e.REQUEST_CHANNEL_CHANGELOGS="REQUEST_CHANNEL_CHANGELOGS",e.REFRESH_CHANNEL="REFRESH_CHANNEL",e.CHANNEL_LASTACCESSEDAT_UPDATED="CHANNEL_LASTACCESSEDAT_UPDATED",e.SYNC_CHANNEL_BACKGROUND="SYNC_CHANNEL_BACKGROUND",e.SYNC_CHANNEL_CHANGELOGS="SYNC_CHANNEL_CHANGELOGS",e.EVENT_MESSAGE_SENT_SUCCESS="EVENT_MESSAGE_SENT_SUCCESS",e.EVENT_MESSAGE_SENT_FAILED="EVENT_MESSAGE_SENT_FAILED",e.EVENT_MESSAGE_SENT_PENDING="EVENT_MESSAGE_SENT_PENDING",e.EVENT_MESSAGE_DELETED="EVENT_MESSAGE_DELETED",e.EVENT_MESSAGE_FEEDBACK_ADDED="EVENT_MESSAGE_FEEDBACK_ADDED",e.EVENT_MESSAGE_FEEDBACK_UPDATED="EVENT_MESSAGE_FEEDBACK_UPDATED",e.EVENT_MESSAGE_FEEDBACK_DELETED="EVENT_MESSAGE_FEEDBACK_DELETED",e.EVENT_MESSAGE_READ="EVENT_MESSAGE_READ",e.EVENT_MESSAGE_DELIVERED="EVENT_MESSAGE_DELIVERED",e.EVENT_MESSAGE_REACTION_UPDATED="EVENT_MESSAGE_REACTION_UPDATED",e.EVENT_MESSAGE_THREADINFO_UPDATED="EVENT_MESSAGE_THREADINFO_UPDATED",e.EVENT_MESSAGE_OFFSET_UPDATED="EVENT_MESSAGE_OFFSET_UPDATED",e.REQUEST_MESSAGE="REQUEST_MESSAGE",e.EVENT_THREAD_INFO_UPDATED="EVENT_THREADINFO_UPDATED",e.EVENT_POLL_UPDATED="EVENT_POLL_UPDATED",e.EVENT_POLL_VOTED="EVENT_POLL_VOTED",e.SYNC_POLL_CHANGELOGS="SYNC_POLL_CHANGELOGS",e.REQUEST_RESEND_MESSAGE="REQUEST_RESEND_MESSAGE",e.REQUEST_THREADED_MESSAGE="REQUEST_THREADED_MESSAGE",e.REQUEST_MESSAGE_CHANGELOGS="REQUEST_MESSAGE_CHANGELOGS",e.SYNC_MESSAGE_FILL="SYNC_MESSAGE_FILL",e.SYNC_MESSAGE_BACKGROUND="SYNC_MESSAGE_BACKGROUND",e.SYNC_MESSAGE_CHANGELOGS="SYNC_MESSAGE_CHANGELOGS",e.LOCAL_MESSAGE_PENDING_CREATED="LOCAL_MESSAGE_PENDING_CREATED",e.LOCAL_MESSAGE_FAILED="LOCAL_MESSAGE_FAILED",e.LOCAL_MESSAGE_CANCELED="LOCAL_MESSAGE_CANCELED",e.LOCAL_MESSAGE_RESEND_STARTED="LOCAL_MESSAGE_RESEND_STARTED"})(ve||(ve={}));var Xc;W({},ve);var _o=function(e){return e.startsWith("EVENT_")||e.startsWith("LOCAL_MESSAGE_")||e===ve.SYNC_MESSAGE_FILL||e===ve.SYNC_MESSAGE_CHANGELOGS||e===ve.SYNC_POLL_CHANGELOGS},Xn=function(e){function n(t){var r=t.messages,i=t.source,a=t.isWebSocketEventComing,s=a!==void 0&&a,o=e.call(this)||this;return o.messages=r,o.source=i,o.isWebSocketEventComing=s,o}return B(n,e),n}(ar),Uy=function(e){function n(t){var r=t.messageIds,i=t.source,a=t.isWebSocketEventComing,s=a!==void 0&&a,o=e.call(this)||this;return o.messageIds=r,o.source=i,o.isWebSocketEventComing=s,o}return B(n,e),n}(ar),cw=function(e){function n(t){var r=t.event,i=t.source,a=t.isWebSocketEventComing,s=a!==void 0&&a,o=e.call(this)||this;return o.event=r,o.source=i,o.isWebSocketEventComing=s,o}return B(n,e),n}(ar),dw=function(e){function n(t){var r=t.event,i=t.source,a=t.isWebSocketEventComing,s=a!==void 0&&a,o=e.call(this)||this;return o.event=r,o.source=i,o.isWebSocketEventComing=s,o}return B(n,e),n}(ar),hw=function(e){function n(t){var r=t.reqId,i=t.source,a=e.call(this)||this;return a.reqId=r,a.source=i,a}return B(n,e),n}(ar),fw=function(e){function n(t){var r=t.polls,i=t.source,a=e.call(this)||this;return a.polls=r,a.source=i,a}return B(n,e),n}(ar),ky=function(e){function n(t){var r=t.event,i=t.source,a=e.call(this)||this;return a.event=r,a.source=i,a}return B(n,e),n}(ar),am=function(e){function n(t){var r=t.event,i=t.source,a=e.call(this)||this;return a.event=r,a.source=i,a}return B(n,e),n}(ar);(function(e){e.OPEN="open",e.CLOSED="closed"})(Xc||(Xc={}));var vw="removed",Mg=function(e){switch(e){case"open":return Xc.OPEN;case"closed":return Xc.CLOSED;default:return null}},pw=function(e){return!e||!!e.text&&X("string",e.text)},ep=function(e){function n(t,r){var i,a,s,o,l,u,d,f=this;return(f=e.call(this,t)||this).pollId=0,f.id=0,f.text=null,f.voteCount=0,f.createdBy=null,f.createdAt=0,f.updatedAt=0,f._lastVotedAt=0,f.pollId=(i=r.poll_id)!==null&&i!==void 0?i:0,f.id=(a=r.id)!==null&&a!==void 0?a:0,f.text=(s=r.text)!==null&&s!==void 0?s:null,f.voteCount=(o=r.vote_count)!==null&&o!==void 0?o:0,f.createdBy=(l=r.created_by)!==null&&l!==void 0?l:null,f.createdAt=(u=r.created_at)!==null&&u!==void 0?u:0,f.updatedAt=(d=r.updated_at)!==null&&d!==void 0?d:0,f}return B(n,e),n.payloadify=function(t){return Xe(_t(W(W({},e.payloadify.call(this,t)),{vote_count:t.voteCount,poll_id:t.pollId,text:t.text,created_at:t.createdAt,id:t.id,created_by:t.createdBy,updated_at:t.updatedAt})))},n}(Ur),es=function(e){function n(t,r){var i,a,s,o,l,u,d,f,p,m,E,g,y,S=this;return(S=e.call(this,t)||this).id=0,S.title=null,S.createdAt=0,S.updatedAt=0,S.closeAt=-1,S.status=Xc.CLOSED,S.messageId=0,S.data=null,S.voterCount=-1,S.options=[],S.createdBy=null,S.allowUserSuggestion=!1,S.allowMultipleVotes=!1,S.votedPollOptionIds=[],S.id=(i=r.id)!==null&&i!==void 0?i:0,S.title=(a=r.title)!==null&&a!==void 0?a:null,S.createdAt=(s=r.created_at)!==null&&s!==void 0?s:0,S.updatedAt=(o=r.updated_at)!==null&&o!==void 0?o:0,S.closeAt=(l=r.close_at)!==null&&l!==void 0?l:-1,S.status=(u=Mg(r.status))!==null&&u!==void 0?u:Xc.CLOSED,S.messageId=(d=r.message_id)!==null&&d!==void 0?d:0,S.data=(f=r.data)!==null&&f!==void 0?f:null,S.voterCount=(p=r.voter_count)!==null&&p!==void 0?p:-1,S.options=r.options?r.options.map(function(C){return new ep(S._iid,C)}):[],S.createdBy=(m=r.created_by)!==null&&m!==void 0?m:null,S.allowUserSuggestion=(E=r.allow_user_suggestion)!==null&&E!==void 0&&E,S.allowMultipleVotes=(g=r.allow_multiple_votes)!==null&&g!==void 0&&g,S.votedPollOptionIds=(y=r.voted_option_ids)!==null&&y!==void 0?y:[],S}return B(n,e),n.prototype._applyPollUpdatePayload=function(t){var r,i,a,s,o,l,u,d,f=this;this.title=(r=t.title)!==null&&r!==void 0?r:this.title,this.updatedAt=(i=t.updated_at)!==null&&i!==void 0?i:this.updatedAt,this.closeAt=(a=t.close_at)!==null&&a!==void 0?a:this.closeAt,this.status=(s=Mg(t.status))!==null&&s!==void 0?s:this.status,this.data=(o=t.data)!==null&&o!==void 0?o:this.data,this.voterCount=(l=t.voter_count)!==null&&l!==void 0?l:this.voterCount,t.options&&(this.options=t.options.map(function(p){return new ep(f._iid,p)}),this.votedPollOptionIds=t.options.filter(function(p){return p.vote_count>0}).map(function(p){return p.id})),this.allowUserSuggestion=(u=t.allow_user_suggestion)!==null&&u!==void 0?u:this.allowUserSuggestion,this.allowMultipleVotes=(d=t.allow_multiple_votes)!==null&&d!==void 0?d:this.allowMultipleVotes},n.payloadify=function(t){return Xe(_t(W(W({},e.payloadify.call(this,t)),{id:t.id,title:t.title,created_at:t.createdAt,updated_at:t.updatedAt,close_at:t.closeAt,status:t.status,message_id:t.messageId,data:t.data,voter_count:t.voterCount,options:t.options.map(function(r){return ep.payloadify(r)}),created_by:t.createdBy,allow_user_suggestion:t.allowUserSuggestion,allow_multiple_votes:t.allowMultipleVotes,voted_option_ids:t.votedPollOptionIds})))},n.prototype.applyPollUpdateEvent=function(t){var r=t._payload.poll;return!(!r||this.id!==r.id||r.updated_at<this.updatedAt)&&(this._applyPollUpdatePayload(r),!0)},n.prototype.applyPollVoteEvent=function(t){if(this.id!==t.pollId)return!1;var r=this.options,i=r.map(function(o){return o.id}),a=t._payload,s=Math.floor(a.ts/1e3);return a.updated_vote_counts.forEach(function(o){var l=i.indexOf(o.option_id);if(l>-1){var u=r[l];s>=u._lastVotedAt&&(u.voteCount=o.vote_count,u._lastVotedAt=s)}}),a.req_id&&a.voted_option_ids&&(this.votedPollOptionIds=a.voted_option_ids),typeof a.voter_count=="number"&&(this.voterCount=a.voter_count),!0},n.prototype.serialize=function(){return ud(this)},n}(Ur),Uo=function(){function e(n,t){var r;this.limit=20,this._isLoading=!1,this._hasNext=!0,this._token="",this._iid=n,this.limit=(r=t.limit)!==null&&r!==void 0?r:20}return Object.defineProperty(e.prototype,"hasNext",{get:function(){return this._hasNext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get:function(){return this._isLoading},enumerable:!1,configurable:!0}),e.prototype._validate=function(){return X("number",this.limit)&&this.limit>0},e}(),Js=function(e){function n(t,r,i,a){var s=e.call(this,t,a)||this;return s.channelUrl=r,s.channelType=i,s}return B(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&X("string",this.channelUrl)&&tn(cn,this.channelType)},n}(Uo),Ik=function(e){this.pollId=0,this.messageId=0,this.pollId=e.poll_id,this.messageId=e.message_id,this._payload=e},Mk=function(e){function n(t){var r=t.title,i=t.optionTexts,a=t.data,s=t.allowUserSuggestion,o=t.allowMultipleVotes,l=t.closeAt,u=e.call(this)||this;return u.method=we.POST,u.path=Ms,u.params={title:r,options:i,data:a,allow_user_suggestion:s,allow_multiple_votes:o,close_at:l},u}return B(n,e),n}(Re),Ak=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.poll=new es(t,r),i}return B(n,e),n}(He),wk=function(e){function n(t){var r=t.channelUrl,i=t.channelType,a=t.pollId,s=e.call(this)||this;return s.method=we.GET,s.path="".concat(Ms,"/").concat(encodeURIComponent(a)),s.params={channel_url:r,channel_type:i},s}return B(n,e),n}(Re),Rk=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.poll=new es(t,r),i}return B(n,e),n}(He),Ok=function(e){function n(t){var r=t.channelUrl,i=t.channelType,a=t.pollId,s=t.pollOptionId,o=e.call(this)||this;return o.method=we.GET,o.path="".concat(Ms,"/").concat(encodeURIComponent(a),"/options/").concat(encodeURIComponent(s)),o.params={channel_url:r,channel_type:i},o}return B(n,e),n}(Re),Dk=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.pollOption=new ep(t,r),i}return B(n,e),n}(He),Lk=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.timestamp,s=t.token,o=e.call(this)||this;return o.method=we.GET,o.path="".concat(Nn(r),"/").concat(encodeURIComponent(i),"/polls/changelogs"),o.params=Xe({change_ts:a,token:s}),o}return B(n,e),n}(Re),Uk=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.updatedPolls=r.updated.map(function(a){return function(s,o){return new es(s,o)}(t,a)}),i.deletedPollIds=r.deleted.map(function(a){return a}),i.hasMore=r.has_more,i.nextToken=r.next,i}return B(n,e),n}(He),kk={title:"",optionTexts:[],data:void 0,allowUserSuggestion:void 0,allowMultipleVotes:void 0,closeAt:-1},mw=function(e){return X("string",e.title)&&(n=e.optionTexts,nn("string",n)&&n.every(function(t){return t.trim()!==""}))&&pw(e.data)&&X("boolean",e.allowUserSuggestion,!0)&&X("boolean",e.allowMultipleVotes,!0)&&X("number",e.closeAt,!0);var n},Pk={channelUrl:"",channelType:cn.BASE,pollId:0,pollOptionId:0},_w=function(e){return X("string",e.channelUrl)&&e.channelUrl!==""&&tn(cn,e.channelType)&&X("number",e.pollId)&&e.pollId>0&&X("number",e.pollOptionId)&&e.pollOptionId>0},xk={channelUrl:"",channelType:cn.BASE,pollId:0},gw=function(e){return X("string",e.channelUrl)&&e.channelUrl!==""&&tn(cn,e.channelType)&&X("number",e.pollId)},lT={},Ip=function(){function e(n,t){var r=t.sdkState,i=t.dispatcher,a=t.sessionManager,s=t.requestQueue,o=t.logger;this._iid=n,this._sdkState=r,this._sessionManager=a,this._requestQueue=s,this._dispatcher=i,this._logger=o,lT[n]=this}return e.of=function(n){return lT[n]},e.prototype.buildPollFromSerializedData=function(n){var t=Tl(n);return new es(this._iid,es.payloadify(t))},e.prototype.get=function(n){return A(this,void 0,void 0,function(){var t,r;return M(this,function(i){switch(i.label){case 0:return ke(gw(n)).throw(J.invalidParameters),t=new wk(W({},n)),[4,this._requestQueue.send(t)];case 1:return r=i.sent(),[2,r.as(Rk).poll]}})})},e.prototype.create=function(n){return A(this,void 0,void 0,function(){var t,r;return M(this,function(i){switch(i.label){case 0:return ke(mw(n)).throw(J.invalidParameters),t=new Mk(W({},n)),[4,this._requestQueue.send(t)];case 1:return r=i.sent(),[2,r.as(Ak).poll]}})})},e.prototype.getOption=function(n){return A(this,void 0,void 0,function(){var t,r;return M(this,function(i){switch(i.label){case 0:return ke(_w(n)).throw(J.invalidParameters),t=new Ok(W({},n)),[4,this._requestQueue.send(t)];case 1:return r=i.sent(),[2,r.as(Dk).pollOption]}})})},e.prototype.getPollChangeLogs=function(n,t,r,i){return i===void 0&&(i=ve.SYNC_POLL_CHANGELOGS),A(this,void 0,void 0,function(){var a,s,o,l,u,d,f;return M(this,function(p){switch(p.label){case 0:return a=new Lk(_t({channelType:t,channelUrl:n,timestamp:typeof r=="number"?r:null,token:typeof r=="string"?r:null})),[4,this._requestQueue.send(a)];case 1:return s=p.sent(),o=s.as(Uk),l=o.updatedPolls,u=o.deletedPollIds,d=o.hasMore,f=o.nextToken,l.length>0&&this._dispatcher.dispatch(new fw({polls:l,source:i})),[2,{updatedPolls:l,deletedPollIds:u,hasMore:d,token:f}]}})})},e}(),Fk=function(e){function n(t){var r=t.channelUrl,i=t.channelType,a=t.token,s=t.limit,o=e.call(this)||this;return o.method=we.GET,o.path=Ms,o.params={channel_url:r,channel_type:i,token:a,limit:s},o}return B(n,e),n}(Re),Hk=function(e){function n(t,r){var i,a=this;return(a=e.call(this,t,r)||this).polls=((i=r.polls)!==null&&i!==void 0?i:[]).map(function(s){return new es(t,s)}),a.token=r.next,a}return B(n,e),n}(He),Ew=function(e){function n(t,r){return e.call(this,t,r.channelUrl,r.channelType,r)||this}return B(n,e),n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return M(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=Y.of(this._iid).requestQueue,r=new Fk(W(W({},this),{token:this._token})),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),a=i.as(Hk),s=a.polls,o=a.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw J.queryInProgress;case 4:return[3,6];case 5:throw J.invalidParameters;case 6:return[2]}})})},n}(Js),Bk=function(e){function n(t){var r=t.channelUrl,i=t.channelType,a=t.pollId,s=t.pollOptionId,o=t.token,l=t.limit,u=e.call(this)||this;return u.method=we.GET,u.path="".concat(Ms,"/").concat(encodeURIComponent(a),"/options/").concat(encodeURIComponent(s),"/voters"),u.params={channel_url:r,channel_type:i,token:o,limit:l},u}return B(n,e),n}(Re),Gk=function(e){function n(t,r){var i,a=this;return(a=e.call(this,t,r)||this).voters=((i=r.voters)!==null&&i!==void 0?i:[]).map(function(s){return new dn(t,s)}),a.token=r.next,a}return B(n,e),n}(He),yw=function(e){function n(t,r){var i=e.call(this,t,r.channelUrl,r.channelType,r)||this;return i.pollId=r.pollId,i.pollOptionId=r.pollOptionId,i}return B(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&X("number",this.pollId)&&X("number",this.pollOptionId)},n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return M(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=Y.of(this._iid).requestQueue,r=new Bk(W(W({},this),{pollId:this.pollId,pollOptionId:this.pollOptionId,token:this._token})),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),a=i.as(Gk),s=a.voters,o=a.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw J.queryInProgress;case 4:return[3,6];case 5:throw J.invalidParameters;case 6:return[2]}})})},n}(Js),Mu,ko=function(){function e(n,t,r){var i,a;this.width=0,this.height=0,this.realWidth=0,this.realHeight=0,this._requireAuth=!1,this._iid=n,this.plainUrl=t.url,this.width=t.width,this.height=t.height,this.realWidth=(i=t.real_width)!==null&&i!==void 0?i:t.width,this.realHeight=(a=t.real_height)!==null&&a!==void 0?a:t.height,this._requireAuth=r}return e.payloadify=function(n){return Xe(_t(n instanceof e?{url:n.plainUrl,width:n.width,height:n.height,real_width:n.realWidth,real_height:n.realHeight}:{url:"",width:n.maxWidth,height:n.maxHeight,real_width:0,real_height:0}))},Object.defineProperty(e.prototype,"url",{get:function(){var n=Y.of(this._iid).sessionManager;return this._requireAuth&&n.ekey?"".concat(this.plainUrl,"?auth=").concat(n.ekey):this.plainUrl},enumerable:!1,configurable:!0}),e}(),Mp=function(e){function n(t){var r=e.call(this)||this;if(r.method=we.POST,r.path="".concat(UL),r.params=Xe({file:t.file,channel_url:t.channelUrl}),t.thumbnailSizes)for(var i=0;i<t.thumbnailSizes.length;i++){var a=t.thumbnailSizes[i],s=a.maxWidth,o=a.maxHeight;r.params["thumbnail".concat(i+1)]="".concat(s,",").concat(o)}return r.requestId=t.requestId,r}return B(n,e),n}(Re),Ap=function(e){function n(t,r){var i,a,s,o,l=this;return(l=e.call(this,t,r)||this).url=r.url,l.fileSize=(i=r.file_size)!==null&&i!==void 0?i:0,l.thumbnails=(s=(a=r.thumbnails)===null||a===void 0?void 0:a.map(function(u){return new ko(t,u,!1)}))!==null&&s!==void 0?s:[],l.requireAuth=(o=r.require_auth)!==null&&o!==void 0&&o,l}return B(n,e),n}(He),wp=function(e){function n(t,r){var i,a,s,o,l,u=this;return(u=e.call(this,t)||this).replyCount=0,u.memberCount=0,u.lastRepliedAt=0,u.updatedAt=0,u.replyCount=(i=r.reply_count)!==null&&i!==void 0?i:0,u.memberCount=(a=r.member_count)!==null&&a!==void 0?a:0,u.mostRepliedUsers=r.most_replies&&nn("object",r.most_replies)?r.most_replies.map(function(d){return new dn(u._iid,d)}):[],u.unreadReplyCount=(s=r.unread_message_count)!==null&&s!==void 0?s:0,u.isPushNotificationEnabled=typeof r.push_enabled=="number"?r.push_enabled>0:void 0,u.lastRepliedAt=(o=r.last_replied_at)!==null&&o!==void 0?o:0,u.updatedAt=(l=r.updated_at)!==null&&l!==void 0?l:0,u}return B(n,e),n.payloadify=function(t){return Xe(_t(W(W({},e.payloadify.call(this,t)),{reply_count:t.replyCount,unread_message_count:t.unreadReplyCount,member_count:t.memberCount,most_replies:Array.isArray(t.mostRepliedUsers)?t.mostRepliedUsers.map(function(r){return dn.payloadify(r)}):[],push_enabled:typeof t.isPushNotificationEnabled=="boolean"?t.isPushNotificationEnabled?1:0:void 0,last_replied_at:t.lastRepliedAt,updated_at:t.updatedAt})))},Object.defineProperty(n.prototype,"_isUpdateRequired",{get:function(){return this.unreadReplyCount===void 0||this.isPushNotificationEnabled===void 0},enumerable:!1,configurable:!0}),n.prototype._updateFrom=function(t){var r,i;this.unreadReplyCount=(r=t.unreadReplyCount)!==null&&r!==void 0?r:this.unreadReplyCount,this.isPushNotificationEnabled=(i=t.isPushNotificationEnabled)!==null&&i!==void 0?i:this.isPushNotificationEnabled},n}(Ur);(function(e){e.ADD="add",e.DELETE="delete"})(Mu||(Mu={}));var hl,Py=function(e){var n;this.messageId=0,this.operation=null,this.updatedAt=0;var t=X("string",e.msg_id)?parseInt(e.msg_id):e.msg_id,r=e.user_id,i=e.operation?e.operation.toLowerCase():null,a=e.reaction,s=e.updated_at,o=e.count,l=e.sampled_user_ids,u=(n=e.sampled_user_info)!==null&&n!==void 0?n:{};t&&X("string",r)&&X("string",i)&&tn(Mu,i)&&X("string",a)&&a&&X("number",s)&&(this.messageId=t,this.userId=r,this.key=a,this.operation=i,this.updatedAt=s,this._count=o,this._sampledUserIds=l,this._sampledUserInfoList=u)},L_=function(e){function n(t,r,i){var a,s=this;return(s=e.call(this,t)||this).userId=r,s.nickname=i.nickname,s.plainProfileUrl=i.profile_url,s.requireAuth=(a=i.require_auth_for_profile_image)!==null&&a!==void 0&&a,s}return B(n,e),Object.defineProperty(n.prototype,"profileUrl",{get:function(){var t=Y.of(this._iid).sessionManager;return this.requireAuth&&t.ekey?"".concat(this.plainProfileUrl,"?auth=").concat(t.ekey):this.plainProfileUrl},enumerable:!1,configurable:!0}),n.payloadify=function(t){return{nickname:t.nickname,profile_url:t.plainProfileUrl,require_auth_for_profile_image:t.requireAuth}},n}(Ur),Wd=function(e){function n(t,r){var i,a,s,o,l,u,d,f,p,m=this;(m=e.call(this,t)||this)._sampledUserInfoList=[],m._count=0,m._hasCurrentUserReacted=!1;var E=r.key,g=At([],ft((o=(s=r.sampled_user_ids)!==null&&s!==void 0?s:r.user_ids)!==null&&o!==void 0?o:[]),!1),y=(u=(l=r.last_ts)!==null&&l!==void 0?l:r.updated_at)!==null&&u!==void 0?u:0,S=(d=r.is_self_included)!==null&&d!==void 0?d:g.includes(Y.of(t).sdkState.userId),C=(f=r.sampled_user_info)!==null&&f!==void 0?f:{};X("string",E)&&E&&nn("string",g)&&g.length>0&&X("number",y)&&(m.key=E,m._sampledUserIds=g,m._updatedAt=y,m._count=(p=r.count)!==null&&p!==void 0?p:g.length,m._hasCurrentUserReacted=S,Object.keys(C).forEach(function(D){m._sampledUserInfoList.push(new L_(t,D,C[D]))}));var T={};try{for(var I=je(m.sampledUserIds),L=I.next();!L.done;L=I.next())T[L.value]=m.updatedAt}catch(D){i={error:D}}finally{try{L&&!L.done&&(a=I.return)&&a.call(I)}finally{if(i)throw i.error}}return m._version=T,m}return B(n,e),Object.defineProperty(n.prototype,"isEmpty",{get:function(){return this._count===0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"userIds",{get:function(){return this._sampledUserIds},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sampledUserIds",{get:function(){return this._sampledUserIds},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sampledUserInfoList",{get:function(){return this._sampledUserInfoList},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"updatedAt",{get:function(){return this._updatedAt},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasCurrentUserReacted",{get:function(){return this._hasCurrentUserReacted},enumerable:!1,configurable:!0}),n.payloadify=function(t){var r={};return t._sampledUserInfoList.forEach(function(i){r[i.userId]=L_.payloadify(i)}),Xe(_t({key:t.key,sampled_user_ids:t._sampledUserIds,sampled_user_info:r,count:t._count,is_self_included:t._hasCurrentUserReacted,last_ts:t._updatedAt}))},n.prototype.applyEvent=function(t){var r=this;if(t.key===this.key&&this.updatedAt<=t.updatedAt)if(t._sampledUserIds)this._sampledUserIds=t._sampledUserIds,this._sampledUserInfoList=[],Object.keys(t._sampledUserInfoList).forEach(function(a){r._sampledUserInfoList.push(new L_(r._iid,a,t._sampledUserInfoList[a]))}),this._count=t._count,t._hasCurrentUserReacted!==void 0&&(this._hasCurrentUserReacted=t._hasCurrentUserReacted),this._updatedAt=t.updatedAt;else{if(!this._version[t.userId]||this._version[t.userId]<=t.updatedAt){var i=this._sampledUserIds.indexOf(t.userId);switch(t.operation){case Mu.ADD:i<0&&this._sampledUserIds.push(t.userId);break;case Mu.DELETE:i>=0&&this._sampledUserIds.splice(i,1)}this._count=this._sampledUserIds.length,this._version[t.userId]=t.updatedAt}this._updatedAt=Math.max(this.updatedAt,t.updatedAt)}},n}(Ur),uT=function(){function e(n){this.secureUrl=null,this.type=null,this.width=0,this.height=0,this.alt=null,this.url=n.url,n.secure_url&&(this.secureUrl=n.secure_url),n.type&&(this.type=n.type),n.width&&(this.width=n.width),n.height&&(this.height=n.height),n.alt&&(this.alt=n.alt)}return e.payloadify=function(n){var t,r;return Xe(_t({url:n.url,secure_url:n.secureUrl,type:n.type,width:(t=n.width)!==null&&t!==void 0?t:0,height:(r=n.height)!==null&&r!==void 0?r:0,alt:n.alt}))},e}(),cT=function(){function e(n){this.title=null,this.url=null,this.description=null,this.defaultImage=null,n["og:title"]&&(this.title=n["og:title"]),n["og:url"]&&(this.url=n["og:url"]),n["og:description"]&&(this.description=n["og:description"]),n["og:image"]&&(this.defaultImage=new uT(n["og:image"]))}return e.payloadify=function(n){return Xe(_t({"og:title":n.title,"og:url":n.url,"og:description":n.description,"og:image":n.defaultImage?uT.payloadify(n.defaultImage):null}))},e}(),ts=function(){function e(n){var t,r;this.volume=0,this.name=(t=n.name)!==null&&t!==void 0?t:"default",this.volume=(r=n.volume)!==null&&r!==void 0?r:1}return e.prototype.serialize=function(){return{name:this.name,volume:this.volume}},e.payloadify=function(n){return Xe(_t({name:n.name,volume:n.volume}))},e}();(function(e){e.GOOD="good",e.BAD="bad"})(hl||(hl={}));var So=function(){function e(n){this.id=n.id,this.rating=n.rating,this.comment=n.comment}return e._getStatus=function(n){return n?"id"in n?"SUBMITTED":"NO_FEEDBACK":"NOT_APPLICABLE"},e._isSubmitted=function(n){return e._getStatus(n)==="SUBMITTED"},e._getPayloadByStatus=function(n){return n==="NO_FEEDBACK"?{}:null},e.payloadify=function(n){return Xe(_t({id:n.id,rating:n.rating,comment:n.comment}))},e}(),Zc=function(e){function n(t,r){var i,a=this;return(a=e.call(this,t,r)||this).isBlockedByMe=!1,a.role=tn(ri,r.role)?r.role:ri.NONE,a.isBlockedByMe=(i=r.is_blocked_by_me)!==null&&i!==void 0&&i,a}return B(n,e),n.payloadify=function(t){return Xe(_t(W(W({},e.payloadify.call(this,t)),{role:t.role,is_blocked_by_me:t.isBlockedByMe})))},n}(dn),qr=function(){function e(n){this.key=n.key,this.value=nn("string",n.value)?At([],ft(n.value),!1):[]}return e.payloadify=function(n){var t;return Xe(_t({key:n.key,value:(t=n.value)!==null&&t!==void 0?t:[]}))},e}(),Cw=function(e){switch(e){case ir.BASE:return"";case ir.USER:return"MESG";case ir.FILE:return"FILE";case ir.ADMIN:return"ADMM"}},bw=function(e){function n(t,r){var i,a,s,o,l,u,d,f,p,m=this;(m=e.call(this,t)||this).channelType=cn.BASE,m.messageType=ir.BASE,m.mentionType=null,m.mentionedUsers=null,m.mentionedUserIds=null,m.mentionedMessageTemplate=void 0,m.metaArrays=[],m.extendedMessage={},m.createdAt=0,m.updatedAt=0,m.channelUrl=r.channel_url,m.channelType=tn(cn,r.channel_type)?r.channel_type:cn.GROUP,r.channel&&(r.channel.channel_url&&(m.channelUrl=r.channel.channel_url),r.channel.channel_type&&(m.channelType=r.channel.channel_type)),m.data=(i=r.data)!==null&&i!==void 0?i:"",m.customType=(a=r.custom_type)!==null&&a!==void 0?a:"",m.mentionType=tn(gi,r.mention_type)?r.mention_type:null,m.mentionedUsers=r.mentioned_users?r.mentioned_users.map(function(C){return new dn(m._iid,C)}):null,m.mentionedUserIds=(s=r.mentioned_user_ids)!==null&&s!==void 0?s:null,m.mentionedUsers&&!m.mentionedUserIds&&(m.mentionedUserIds=m.mentionedUsers.map(function(C){return C.userId})),m.mentionedMessageTemplate=r.mentioned_message_template;var E=(o=r.metaarray)!==null&&o!==void 0?o:{},g=(l=r.metaarray_key_order)!==null&&l!==void 0?l:Object.keys(E).sort(function(C,T){return C.localeCompare(T)});m.metaArrays=[];for(var y=0;y<g.length;y++){var S=g[y];m.metaArrays.push(new qr({key:S,value:E[S]||[]}))}return r.sorted_metaarray&&(m.metaArrays=r.sorted_metaarray.map(function(C){return new qr(C)})),m.extendedMessage=(u=r.extended_message)!==null&&u!==void 0?u:{},m.extendedMessagePayload=r.extended_message_payload,m.createdAt=(f=(d=r.created_at)!==null&&d!==void 0?d:r.ts)!==null&&f!==void 0?f:0,m.updatedAt=(p=r.updated_at)!==null&&p!==void 0?p:0,m}return B(n,e),n.payloadify=function(t){var r,i;return Xe(_t(W(W({},e.payloadify.call(this,t)),{channel_url:t.channelUrl,channel_type:t.channelType,type:Cw(t.messageType),data:t.data,custom_type:t.customType,mention_type:t.mentionType,mentioned_user_ids:t.mentionedUserIds,mentioned_users:(r=t.mentionedUsers)===null||r===void 0?void 0:r.map(function(a){return dn.payloadify(a)}),mentioned_message_template:t.mentionedMessageTemplate,sorted_metaarray:(i=t.metaArrays)===null||i===void 0?void 0:i.map(function(a){return qr.payloadify(a)}),extended_message:t.extendedMessage,extended_message_payload:t.extendedMessagePayload,created_at:t.createdAt,updated_at:t.updatedAt})))},n.prototype.isIdentical=function(t){return!0},n.prototype.isEqual=function(t){return CA(this,t)},n.prototype.isUserMessage=function(){return this.messageType===ir.USER},n.prototype.isFileMessage=function(){return this.messageType===ir.FILE&&!Object.prototype.hasOwnProperty.call(this,"fileInfoList")},n.prototype.isMultipleFilesMessage=function(){return this.messageType===ir.FILE&&Object.prototype.hasOwnProperty.call(this,"fileInfoList")},n.prototype.isAdminMessage=function(){return this.messageType===ir.ADMIN},n.prototype.serialize=function(){return ud(this)},n.prototype.getMetaArraysByKeys=function(t){return this.metaArrays.filter(function(r){return t.includes(r.key)})},n}(Ur),Sw=function(e){function n(t,r){var i,a,s=this;return(s=e.call(this,t)||this).channelUrl=(i=r.channel_url)!==null&&i!==void 0?i:"",s.channelType=(a=r.channel_type)!==null&&a!==void 0?a:cn.GROUP,s.reader=new dn(s._iid,r.user),s.readAt=r.ts,s}return B(n,e),n}(Ur),Vk=function(e){function n(t){var r=t.channelUrl;return e.call(this,{code:"READ",ackRequired:!0,payload:{channel_url:r}})||this}return B(n,e),n}(_i);(function(e){function n(t){var r=e.call(this)||this,i=t.channelUrl,a=t.channelType,s=t.userId,o=t.notificationIds;return r.method=we.PUT,r.path="".concat(Nn(a),"/").concat(encodeURIComponent(i),"/messages/mark_as_read"),r.params=Xe(_t({user_id:s,message_ids:o})),r}return B(n,e),n})(Re);var Tw=function(e){function n(t,r,i){var a=e.call(this,t,"READ",i)||this;return a.readStatus=new Sw(t,i),a}return B(n,e),n}(Wn);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.readAt=r.ts,i.unreadMessageCount=r.unread_message_count,i}return B(n,e),n})(He);var zk=function(e){function n(t){var r=t.channelUrl,i=t.messageId;return e.call(this,{code:"READ",ackRequired:!0,payload:{channel_url:r,parent_message_id:i}})||this}return B(n,e),n}(_i),jk=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=t.pushEnabled,o=e.call(this)||this;return o.method=we.PUT,o.path="".concat(Nn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/thread_push"),o.params={push_enabled:s},o}return B(n,e),n}(Re);(function(e){function n(t,r){return e.call(this,t,r)||this}B(n,e)})(He);var qk=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=t.rating,o=t.comment,l=e.call(this)||this;return l.method=we.POST,l.path="".concat(Nn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/feedbacks"),l.params={rating:s,comment:o},l}return B(n,e),n}(Re),Kk=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.feedback=new So(r),i}return B(n,e),n}(He),$k=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=t.feedbackId,o=t.rating,l=t.comment,u=e.call(this)||this;return u.method=we.PUT,u.path="".concat(Nn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/feedbacks/").concat(s),u.params={rating:o,comment:l},u}return B(n,e),n}(Re),Wk=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.feedback=new So(r),i}return B(n,e),n}(He),Qk=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=t.feedbackId,o=e.call(this)||this;return o.method=we.DELETE,o.path="".concat(Nn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/feedbacks/").concat(s),o}return B(n,e),n}(Re);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.feedback=new So(r),i}B(n,e)})(He);var lu,dT,Ag=function(e){function n(t,r){var i,a,s,o,l,u=this;return(u=e.call(this,t)||this).plainUrl="",u.fileName=null,u.mimeType=null,u.fileSize=0,u.thumbnails=[],u._requireAuth=!1,u.plainUrl=(i=r.url)!==null&&i!==void 0?i:"",u.fileName=(a=r.file_name)!==null&&a!==void 0?a:null,u.mimeType=(s=r.file_type)!==null&&s!==void 0?s:null,u.fileSize=(o=r.file_size)!==null&&o!==void 0?o:0,u._requireAuth=(l=r.require_auth)!==null&&l!==void 0&&l,u.thumbnails=r.thumbnails?r.thumbnails.map(function(d){var f;return new ko(u._iid,typeof d=="string"?{url:d,width:0,height:0}:W(W({},d),{url:((f=d.url)!==null&&f!==void 0?f:"").split("auth=")[0]}),u._requireAuth)}):[],u}return B(n,e),n.payloadify=function(t){var r;return Xe(_t({url:t.plainUrl,file_name:t.fileName,file_type:t.mimeType,file_size:t.fileSize,thumbnails:(r=t.thumbnails)===null||r===void 0?void 0:r.map(function(i){var a;return{url:((a=i.plainUrl)!==null&&a!==void 0?a:"").split("auth=")[0],width:i.width,height:i.height,real_width:i.realWidth,real_height:i.realHeight}}),require_auth:t._requireAuth}))},Object.defineProperty(n.prototype,"url",{get:function(){var t=Y.of(this._iid).sessionManager;return this._requireAuth&&t.ekey?"".concat(this.plainUrl,"?auth=").concat(t.ekey):this.plainUrl},enumerable:!1,configurable:!0}),n}(Ur),Nw=function(e){var n=e.channelUrl,t=e.channelType,r=e.parentMessage;this.channelUrl=n,this.channelType=t,this.parentMessage=r};(function(e){e.NUMBER="number",e.ENUM="enum",e.TEXT="text",e.REGEX="regex",e.DECIMAL_PLACE="decimal_place"})(lu||(lu={})),function(e){e.TEXT="text",e.TEXTAREA="textarea",e.NUMBER="number",e.PHONE="phone",e.EMAIL="email",e.CHIP="chip"}(dT||(dT={}));var _l,Oa,hT=function(){function e(n,t){var r=t.id,i=t.name,a=t.items,s=t.version,o=t.is_submitted;this.messageId=n,this.id=r,this.name=i,this.items=a.map(function(l){return new fT(l)}).sort(function(l,u){return l.sortOrder-u.sortOrder}),this.version=s??1,this._isSubmitted=o}return Object.defineProperty(e.prototype,"isSubmitted",{get:function(){var n;return(n=this._isSubmitted)!==null&&n!==void 0?n:this.items.some(function(t){return Array.isArray(t.submittedValues)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSubmittable",{get:function(){return this.items.every(function(n){return n.required?!!(Array.isArray(n.draftValues)&&n.draftValues.length>0)&&n.isValid(n.draftValues):!(Array.isArray(n.draftValues)&&n.draftValues.length>0)||n.isValid(n.draftValues)})},enumerable:!1,configurable:!0}),e.payloadify=function(n){return Xe(_t({id:n.id,name:n.name,items:n.items.map(function(t){return fT.payloadify(t)}),version:n.version,is_submitted:n._isSubmitted}))},e.isMessageFormPayload=function(n){return!!(n!=null&&n.message_form)},e}(),fT=function(){function e(n){var t=n.id,r=n.name,i=n.required,a=n.sort_order,s=n.placeholder,o=n.style,l=n.item_type,u=n.validators,d=n.value,f=n.values;this.id=t,this.name=r,this.required=i,this.sortOrder=a,this.placeholder=s,Object.keys(o).length===0?this.style={layout:l}:this.style=Xe({layout:o.layout,options:o.options,defaultOptions:o.default_options,resultCount:o.result_count}),f?this.submittedValues=f:d&&(this.submittedValues=[d]),this._validators=u}return e.prototype.isValid=function(n){var t=this;return n.every(function(r){var i=function(a,s){return s.every(function(o){switch(o.key){case lu.NUMBER:var l=Number(a);return!(isNaN(l)||o.min&&typeof o.min!="number"||o.max&&typeof o.max!="number"||typeof o.min=="number"&&l<o.min||typeof o.max=="number"&&l>o.max);case lu.ENUM:return typeof a=="string"&&(!(o.enums&&Array.isArray(o.enums)&&o.enums.length>0&&!o.enums.includes(a))||o.allow_other);case lu.TEXT:return!(typeof a!="string"||typeof o.min_length=="number"&&a.length<o.min_length||typeof o.max_length=="number"&&a.length>o.max_length);case lu.REGEX:return!(typeof a!="string"||o.regex&&(typeof o.regex!="string"||!new RegExp(o.regex).test(a)));case lu.DECIMAL_PLACE:return a.length!==0&&(l=Number(a),!(isNaN(l)||(!o.max_decimal_place||typeof o.max_decimal_place=="number")&&o.max_decimal_place&&!function(u,d){var f=u.toString(),p=f.indexOf(".");return p===-1||f.slice(p+1).length<=d}(l,o.max_decimal_place)));default:return!0}})}(r,t._validators);return i})},e.payloadify=function(n){return Xe(_t({id:n.id,name:n.name,required:n.required,sort_order:n.sortOrder,placeholder:n.placeholder,style:Xe({layout:n.style.layout,options:n.style.options,default_options:n.style.defaultOptions,result_count:n.style.resultCount}),item_type:n.style.layout,validators:n._validators,values:n.submittedValues}))},e}(),Yk=function(e){function n(t){var r=e.call(this)||this;return r.method=we.POST,r.path="".concat(zL,"/").concat(t.formId,"/submit"),r.params=Xe({message_id:t.messageId,items:t.items}),r}return B(n,e),n}(Re);(function(e){e.PENDING="pending",e.SENT="sent",e.FAILED="failed",e.CANCELED="canceled"})(_l||(_l={})),function(e){e.PENDING="pending",e.IN_QUEUE="in_queue",e.SENT="sent",e.FAILED="failed",e.CANCELED="canceled",e.REMOVED="removed"}(Oa||(Oa={}));var Eu,Ni=function(e){function n(t,r){var i,a,s,o,l,u,d,f,p,m=this;return(m=e.call(this,t,r)||this).parentMessage=null,m.silent=!1,m.isOperatorMessage=!1,m.threadInfo=null,m.reactions=[],m.appleCriticalAlertOptions=null,m.scheduledInfo=null,m.suggestedReplies=null,m.myFeedback=null,m.myFeedbackStatus="NOT_APPLICABLE",m.messageForm=null,m._isContinuousMessages=!1,m._scheduledStatus=null,m.messageId=(a=(i=r.msg_id)!==null&&i!==void 0?i:r.message_id)!==null&&a!==void 0?a:0,m.parentMessageId=(s=typeof r.parent_message_id=="string"?parseInt(r.parent_message_id):r.parent_message_id)!==null&&s!==void 0?s:0,m.threadInfo=r.thread_info?new wp(m._iid,r.thread_info):null,r.reactions_summary?m.reactions=r.reactions_summary.map(function(E){return new Wd(t,E)}):r.reactions?m.reactions=r.reactions.map(function(E){return new Wd(t,E)}):m.reactions=[],m.ogMetaData=r.og_tag?new cT(r.og_tag):null,m.silent=(o=r.silent)!==null&&o!==void 0&&o,m.isOperatorMessage=(l=r.is_op_msg)!==null&&l!==void 0&&l,m.appleCriticalAlertOptions=r.apple_critical_alert_options?new ts(r.apple_critical_alert_options):null,typeof r.scheduled_message_id=="number"&&typeof r.scheduled_at=="number"&&r.scheduled_status&&(m.scheduledInfo={scheduledMessageId:r.scheduled_message_id,scheduledAt:r.scheduled_at},m._scheduledStatus=r.scheduled_status),m._isContinuousMessages=(u=r.is_continuous_messages)!==null&&u!==void 0&&u,m.myFeedback=So._isSubmitted(r.feedback)?new So(r.feedback):null,m.myFeedbackStatus=So._getStatus(r.feedback),m.suggestedReplies=(f=(d=r.extended_message_payload)===null||d===void 0?void 0:d.suggested_replies)!==null&&f!==void 0?f:null,m.messageForm=hT.isMessageFormPayload(r.extended_message_payload)?new hT(m.messageId,r.extended_message_payload.message_form):null,m.message=(p=r.message)!==null&&p!==void 0?p:"",m}return B(n,e),n.payloadify=function(t){var r,i;return Xe(_t(W(W({},e.payloadify.call(this,t)),{message_id:t.messageId,parent_message_id:t.parentMessageId,thread_info:t.threadInfo?wp.payloadify(t.threadInfo):null,reactions_summary:t.reactions.map(function(a){return Wd.payloadify(a)}),og_tag:t.ogMetaData?cT.payloadify(t.ogMetaData):null,silent:t.silent,is_op_msg:t.isOperatorMessage,apple_critical_alert_options:t.appleCriticalAlertOptions?ts.payloadify(t.appleCriticalAlertOptions):null,scheduled_message_id:(r=t.scheduledInfo)===null||r===void 0?void 0:r.scheduledMessageId,scheduled_at:(i=t.scheduledInfo)===null||i===void 0?void 0:i.scheduledAt,scheduled_status:t._scheduledStatus,feedback:t.myFeedback?So.payloadify(t.myFeedback):So._getPayloadByStatus(t.myFeedbackStatus),message:t.message})))},n._getParentMessageInfoPayload=function(t){return Xe(_t({type:Cw(t.messageType),ts:t.createdAt,user:t.sender?Zc.payloadify(t.sender):null,message:t.message,file:{url:t.plainUrl,name:t.name,type:t.type,require_auth:t.requireAuth},files:Array.isArray(t.fileInfoList)?t.fileInfoList.map(function(r){return Ag.payloadify(r)}):null}))},n.prototype.isIdentical=function(t){return this.messageId===t.messageId},n.prototype.applyThreadInfoUpdateEvent=function(t){return this.messageId===t.targetMessageId&&(t.threadInfo._isUpdateRequired&&this.threadInfo&&t.threadInfo._updateFrom(this.threadInfo),this.threadInfo=t.threadInfo,!0)},n.prototype._findReactionIndex=function(t){for(var r=0;r<this.reactions.length;r++)if(this.reactions[r].key===t)return r;return-1},n.prototype.applyReactionEvent=function(t){var r=Y.of(this._iid).sdkState;if(this.messageId===t.messageId)switch(t.operation){case Mu.ADD:t.userId===r.userId&&(t._hasCurrentUserReacted=!0),(i=this._findReactionIndex(t.key))!==-1?this.reactions[i].applyEvent(t):t._sampledUserIds?this.reactions.push(new Wd(this._iid,{key:t.key,sampled_user_ids:t._sampledUserIds,sampled_user_info:t._sampledUserInfoList,count:t._count,is_self_included:t._hasCurrentUserReacted,last_ts:t.updatedAt})):this.reactions.push(new Wd(this._iid,{key:t.key,user_ids:[t.userId],updated_at:t.updatedAt}));break;case Mu.DELETE:var i;(i=this._findReactionIndex(t.key))!==-1&&(t._sampledUserIds?t._count===0?this.reactions.splice(i,1):(t.userId===r.userId&&(t._hasCurrentUserReacted=!1),this.reactions[i].applyEvent(t)):(this.reactions[i].applyEvent(t),this.reactions[i].isEmpty&&this.reactions.splice(i,1)))}},n.prototype.applyParentMessage=function(t){if(!this.parentMessage)return this.parentMessage=t,!0;if(this.parentMessageId===t.messageId){var r=this.parentMessage.updatedAt;if(t.updatedAt>=r)return this.parentMessage=t,!0}return!1},n.prototype._triggerThreadInfoUpdatedEvent=function(){return A(this,void 0,void 0,function(){var t;return M(this,function(r){return(t=Y.of(this._iid).dispatcher).dispatch(new Nw({channelType:cn.GROUP,channelUrl:this.channelUrl,parentMessage:this})),t.dispatch(new Xn({messages:[this],source:ve.EVENT_MESSAGE_THREADINFO_UPDATED})),[2]})})},n.prototype.markThreadAsRead=function(){return A(this,void 0,void 0,function(){var t,r;return M(this,function(i){switch(i.label){case 0:return t=Y.of(this._iid).requestQueue,r=new zk({channelUrl:this.channelUrl,messageId:this.messageId}),[4,t.send(r)];case 1:return i.sent(),this.threadInfo&&this.threadInfo.unreadReplyCount!==0?(this.threadInfo.unreadReplyCount=0,[4,this._triggerThreadInfoUpdatedEvent()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}})})},n.prototype.setPushNotificationEnabled=function(t){return A(this,void 0,void 0,function(){var r,i;return M(this,function(a){switch(a.label){case 0:return r=Y.of(this._iid).requestQueue,i=new jk({channelUrl:this.channelUrl,channelType:this.channelType,messageId:this.messageId,pushEnabled:t}),[4,r.send(i)];case 1:return a.sent(),this.threadInfo&&this.threadInfo.isPushNotificationEnabled!==t&&(this.threadInfo.isPushNotificationEnabled=t),[2]}})})},n.prototype.submitMessageForm=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o;return M(this,function(l){switch(l.label){case 0:if(r=Y.of(this._iid).requestQueue,i=null,a=null,s=this.messageForm,!t&&s){if(!s.isSubmittable)throw new J({code:at.INVALID_PARAMETER,message:"The form is not submittable. Please check all form items are valid before submitting."});if(s.isSubmitted)throw new J({code:at.INVALID_PARAMETER,message:"The form has already been submitted."});i=s.id,a=s.items.reduce(function(u,d){return u.push({form_item_id:d.id,values:Array.isArray(d.draftValues)?d.draftValues:[]}),u},[])}else t&&(i=t.formId,a=Object.entries(t.answers).reduce(function(u,d){var f=ft(d,2),p=f[0],m=f[1],E=Number(p);if(Number.isNaN(E))throw new J({code:at.INVALID_PARAMETER,message:"Keys in answers must be numeric string."});return u.push({form_item_id:E,value:m}),u},[]));if(!i||!a)throw new J({code:at.INVALID_PARAMETER,message:"Missing one or more required inputs: formId, answers."});return o=new Yk({messageId:this.messageId,formId:i,items:a}),[4,r.send(o)];case 1:return l.sent(),[2]}})})},n.prototype.submitFeedback=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l;return M(this,function(u){switch(u.label){case 0:return r=Y.of(this._iid),i=r.requestQueue,a=r.dispatcher,s=new qk({channelUrl:this.channelUrl,channelType:this.channelType,messageId:this.messageId,rating:t.rating,comment:t.comment}),[4,i.send(s)];case 1:return o=u.sent(),l=o.as(Kk),this.myFeedback=l.feedback,this.myFeedbackStatus="SUBMITTED",a.dispatch(new Xn({messages:[this],source:ve.EVENT_MESSAGE_FEEDBACK_ADDED})),[2]}})})},n.prototype.updateFeedback=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l;return M(this,function(u){switch(u.label){case 0:return r=Y.of(this._iid),i=r.requestQueue,a=r.dispatcher,s=new $k({channelUrl:this.channelUrl,channelType:this.channelType,messageId:this.messageId,feedbackId:t.id,rating:t.rating,comment:t.comment}),[4,i.send(s)];case 1:return o=u.sent(),l=o.as(Wk),this.myFeedback=l.feedback,this.myFeedbackStatus="SUBMITTED",a.dispatch(new Xn({messages:[this],source:ve.EVENT_MESSAGE_FEEDBACK_UPDATED})),[2]}})})},n.prototype.deleteFeedback=function(t){return A(this,void 0,void 0,function(){var r,i,a,s;return M(this,function(o){switch(o.label){case 0:return r=Y.of(this._iid),i=r.requestQueue,a=r.dispatcher,s=new Qk({channelUrl:this.channelUrl,channelType:this.channelType,messageId:this.messageId,feedbackId:t}),[4,i.send(s)];case 1:return o.sent(),this.myFeedback=null,this.myFeedbackStatus="NO_FEEDBACK",a.dispatch(new Xn({messages:[this],source:ve.EVENT_MESSAGE_FEEDBACK_DELETED})),[2]}})})},n}(bw),dr=function(e){function n(t,r){var i,a,s,o,l=this;if((l=e.call(this,t,r)||this).reqId="",l.replyToChannel=!1,l.errorCode=0,l.sender=r.user?new Zc(l._iid,r.user):r.sender_id,l.reqId=(a=(i=r.req_id)!==null&&i!==void 0?i:r.request_id)!==null&&a!==void 0?a:"",l.replyToChannel=(s=r.is_reply_to_channel)!==null&&s!==void 0&&s,r.request_state&&tn(yn,r.request_state)&&(l.sendingStatus=r.request_state),!l.sendingStatus)if(l.messageId>0)l.sendingStatus=yn.SUCCEEDED;else if(l.scheduledInfo)switch(r.scheduled_status&&(l._scheduledStatus=r.scheduled_status),r.scheduled_status){case Oa.SENT:case Oa.IN_QUEUE:l.sendingStatus=yn.SUCCEEDED;break;case Oa.PENDING:l.sendingStatus=yn.SCHEDULED;break;case Oa.FAILED:case Oa.REMOVED:l.sendingStatus=yn.FAILED;break;case Oa.CANCELED:l.sendingStatus=yn.CANCELED}else l.sendingStatus=yn.PENDING;return l.errorCode=(o=r.error_code)!==null&&o!==void 0?o:0,l._messageToken=r.mesg_token,l}return B(n,e),n.payloadify=function(t){return Xe(_t(W(W({},e.payloadify.call(this,t)),{user:Zc.payloadify(t.sender),req_id:t.reqId,is_reply_to_channel:t.replyToChannel,request_state:t.sendingStatus,error_code:t.errorCode,mesg_token:t._messageToken})))},Object.defineProperty(n.prototype,"isResendable",{get:function(){return(this.sendingStatus===yn.FAILED||this.sendingStatus===yn.CANCELED)&&ML(this.errorCode)},enumerable:!1,configurable:!0}),n.prototype.isIdentical=function(t){return this.messageId>0&&t.messageId>0?this.messageId===t.messageId:this.reqId===t.reqId},n}(Ni),of={prevResultSize:0,nextResultSize:0,isInclusive:!1,reverse:!1,messageTypeFilter:mi.ALL,customTypesFilter:void 0,senderUserIdsFilter:void 0,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1},sm=function(e){return X("number",e.prevResultSize)&&X("number",e.nextResultSize)&&X("boolean",e.isInclusive)&&X("boolean",e.reverse)&&X("string",e.messageTypeFilter)&&tn(mi,e.messageTypeFilter)&&nn("string",e.customTypesFilter,!0)&&nn("string",e.senderUserIdsFilter,!0)&&X("boolean",e.includeMetaArray)&&X("boolean",e.includeReactions)&&X("boolean",e.includeParentMessageInfo)},Au=function(e){function n(t,r){var i,a,s,o=this;if((o=e.call(this,t,r)||this).translations={},o.messageType=ir.ADMIN,o.translations=(i=r.translations)!==null&&i!==void 0?i:{},r.parent_message_info){var l=r.parent_message_info;o.parentMessage=Ei(t,Xe(_t(W(W({},l),{message_id:o.parentMessageId,channel_url:o.channelUrl,channel_type:o.channelType,file:l.file,url:(a=l.file)===null||a===void 0?void 0:a.url,require_auth:(s=l.file)===null||s===void 0?void 0:s.require_auth}))))}return o}return B(n,e),n.payloadify=function(t){return Xe(_t(W(W({},e.payloadify.call(this,t)),{translations:t.translations,parent_message_info:t.parentMessage?e._getParentMessageInfoPayload.call(this,t.parentMessage):null})))},n.prototype.getThreadedMessagesByTimestamp=function(t,r){return A(this,void 0,void 0,function(){var i;return M(this,function(a){switch(a.label){case 0:return i=W(W({},of),r),ke(this.messageId>0&&X("number",t)&&sm(i)).throw(J.invalidParameters),[4,xr.of(this._iid).getThreadedMessagesByTimestamp(this,t,i)];case 1:return[2,a.sent()]}})})},n}(Ni),vT=function(){function e(n){var t,r;this.detail={},this.type=(t=n.type)!==null&&t!==void 0?t:"",this.vendor=(r=n.vendor)!==null&&r!==void 0?r:"",n.detail&&X("object",n.detail)&&!Array.isArray(n.detail)&&(this.detail=n.detail)}return e.payloadify=function(n){return Xe(_t({type:n.type,vendor:n.vendor,detail:n.detail}))},e}(),pT=function(){function e(n){this.status=n.status,n.original_message_info&&(this.originalMessageInfo={createdAt:n.original_message_info.ts,messageId:n.original_message_info.id})}return e.payloadify=function(n){return Xe({status:n.status,original_message_info:n.originalMessageInfo?{id:n.originalMessageInfo.messageId,ts:n.originalMessageInfo.createdAt}:void 0})},e}(),vi=function(e){function n(t,r){var i,a,s,o,l,u,d,f=this;if((f=e.call(this,t,r)||this).messageParams=null,f.translations={},f.translationTargetLanguages=[],f.messageSurvivalSeconds=-1,f.plugins=[],f._poll=null,f.messageType=ir.USER,f.translations=(s=r.translations)!==null&&s!==void 0?s:{},f.translationTargetLanguages=(o=r.target_langs)!==null&&o!==void 0?o:[],Object.keys(f.translations).length===0&&f.translationTargetLanguages.length>0)try{for(var p=je(f.translationTargetLanguages),m=p.next();!m.done;m=p.next()){var E=m.value;f.translations[E]=""}}catch(y){i={error:y}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}if(f.messageSurvivalSeconds=(l=r.message_survival_seconds)!==null&&l!==void 0?l:-1,f.plugins=r.plugins?r.plugins.map(function(y){return new vT(y)}):[],f._poll=r.poll?new es(f._iid,r.poll):null,r.parent_message_info){var g=r.parent_message_info;f.parentMessage=Ei(t,Xe(_t(W(W({},g),{created_at:g.ts,message_id:f.parentMessageId,channel_url:f.channelUrl,channel_type:f.channelType,file:g.file,url:(u=g.file)===null||u===void 0?void 0:u.url,require_auth:(d=g.file)===null||d===void 0?void 0:d.require_auth}))))}return r.review_info&&(f.messageReviewInfo=new pT(r.review_info)),f}return B(n,e),n.payloadify=function(t){return Xe(_t(W(W({},e.payloadify.call(this,t)),{translations:t.translations,message_survival_seconds:t.messageSurvivalSeconds,plugins:t.plugins.map(function(r){return vT.payloadify(r)}),poll:t._poll?es.payloadify(t._poll):null,parent_message_info:t.parentMessage?e._getParentMessageInfoPayload.call(this,t.parentMessage):null,review_info:t.messageReviewInfo?pT.payloadify(t.messageReviewInfo):void 0})))},n.prototype.getThreadedMessagesByTimestamp=function(t,r){return A(this,void 0,void 0,function(){var i;return M(this,function(a){switch(a.label){case 0:return i=W(W({},of),r),ke(this.messageId>0&&X("number",t)&&sm(i)).throw(J.invalidParameters),[4,xr.of(this._iid).getThreadedMessagesByTimestamp(this,t,i)];case 1:return[2,a.sent()]}})})},n.prototype.applyPoll=function(t){return!(this._poll&&this._poll.id===t.id&&this._poll.updatedAt>t.updatedAt)&&(this._poll=t,!0)},Object.defineProperty(n.prototype,"poll",{get:function(){return this._poll},enumerable:!1,configurable:!0}),n}(dr),Ua=function(e){function n(t,r){var i,a,s,o,l,u,d,f,p=this;if((p=e.call(this,t,r)||this).messageParams=null,p.fileInfoList=[],p.messageSurvivalSeconds=-1,p.messageType=ir.FILE,p.data=(s=(a=(i=r.file)===null||i===void 0?void 0:i.data)!==null&&a!==void 0?a:r.custom)!==null&&s!==void 0?s:"",p.fileInfoList=(l=(o=r.files)===null||o===void 0?void 0:o.map(function(E){return new Ag(t,E)}))!==null&&l!==void 0?l:[],p.messageSurvivalSeconds=(u=r.message_survival_seconds)!==null&&u!==void 0?u:-1,r.parent_message_info){var m=r.parent_message_info;p.parentMessage=Ei(t,Xe(_t(W(W({},m),{created_at:m.ts,message_id:p.parentMessageId,channel_url:p.channelUrl,channel_type:p.channelType,file:m.file,url:(d=m.file)===null||d===void 0?void 0:d.url,require_auth:(f=m.file)===null||f===void 0?void 0:f.require_auth}))))}return p}return B(n,e),n.prototype.getThreadedMessagesByTimestamp=function(t,r){return A(this,void 0,void 0,function(){var i;return M(this,function(a){switch(a.label){case 0:return i=W(W({},of),r),ke(this.messageId>0&&X("number",t)&&sm(i)).throw(J.invalidParameters),[4,xr.of(this._iid).getThreadedMessagesByTimestamp(this,t,i)];case 1:return[2,a.sent()]}})})},n.payloadify=function(t){var r,i,a,s,o,l;return Xe(_t(W(W({},e.payloadify.call(this,t)),{file:{name:(i=(r=t.fileInfoList[0])===null||r===void 0?void 0:r.fileName)!==null&&i!==void 0?i:"",size:(s=(a=t.fileInfoList[0])===null||a===void 0?void 0:a.fileSize)!==null&&s!==void 0?s:0,type:(l=(o=t.fileInfoList[0])===null||o===void 0?void 0:o.mimeType)!==null&&l!==void 0?l:"",data:t.data},files:Array.isArray(t.fileInfoList)?t.fileInfoList.map(function(u){return Ag.payloadify(u)}):null,message_survival_seconds:t.messageSurvivalSeconds,parent_message_info:t.parentMessage?e._getParentMessageInfoPayload.call(this,t.parentMessage):null})))},n._isMultipleFilesMessagePayload=function(t){var r=t.files;return Array.isArray(r)&&r.length>=2},n._isMultipleFilesMessageSerializedData=function(t){var r=t.fileInfoList;return Array.isArray(r)},n}(dr);(function(e){e.SENT="SENT",e.READ="READ"})(Eu||(Eu={}));var wu=function(e){function n(t,r){var i,a,s=this;if((s=e.call(this,t,r)||this).notificationData=null,s.notificationId=r.notification_message_id,s.messageType=ir.ADMIN,s.messageStatus=(i=r.message_status)!==null&&i!==void 0?i:Eu.SENT,s.priority=(a=r.priority)!==null&&a!==void 0?a:_g.NORMAL,s.notificationEventDeadline=r.notification_event_deadline,s.extendedMessage.sub_type===0)try{var o=JSON.parse(s.extendedMessage.sub_data),l=o.label,u=o.tags,d=u===void 0?[]:u,f=o.template_key,p=o.template_variables;s.notificationData={label:l,tags:d,templateKey:f,templateVariables:p}}catch{}return s}return B(n,e),n.payloadify=function(t){return Xe(_t(W(W({},e.payloadify.call(this,t)),{notification_message_id:t.notificationId,message_status:t.messageStatus,priority:t.priority,notification_event_deadline:t.notificationEventDeadline})))},n.prototype.isIdentical=function(t){return this.notificationId===t.notificationId},n}(bw),wg=function(e){if(e.notificationId)return wu.payloadify(e);switch(e.messageType){case ir.USER:return vi.payloadify(e);case ir.FILE:return e.fileInfoList?Ua.payloadify(e):Ir.payloadify(e);case ir.ADMIN:return Au.payloadify(e);default:throw J.unknown}},Ei=function(e,n){if(n.notification_message_id)return new wu(e,n);switch(n.type){case"MESG":return new vi(e,n);case"FILE":return Ua._isMultipleFilesMessagePayload(n)?new Ua(e,n):new Ir(e,n);case"ADMM":case"BRDM":return new Au(e,n);default:return null}},Ir=function(e){function n(t,r){var i,a,s,o,l,u,d,f,p,m,E,g,y,S,C=this;(C=e.call(this,t,r)||this).messageParams=null,C.plainUrl="",C.requireAuth=!1,C.thumbnails=[],C.messageSurvivalSeconds=-1,C.messageType=ir.FILE;var T=r.file;if(C.plainUrl=((a=(i=T==null?void 0:T.url)!==null&&i!==void 0?i:r.url)!==null&&a!==void 0?a:"").split("?auth=")[0],C.name=(o=(s=T==null?void 0:T.name)!==null&&s!==void 0?s:r.name)!==null&&o!==void 0?o:"File",C.size=(u=(l=T==null?void 0:T.size)!==null&&l!==void 0?l:r.size)!==null&&u!==void 0?u:0,C.data=(f=(d=T==null?void 0:T.data)!==null&&d!==void 0?d:r.custom)!==null&&f!==void 0?f:"",C.type=T?(p=T.type)!==null&&p!==void 0?p:"":(m=r.type)!==null&&m!==void 0?m:"",C.requireAuth=(E=r.require_auth)!==null&&E!==void 0&&E,C.thumbnails=r.thumbnails?r.thumbnails.map(function(L){var D;return new ko(C._iid,typeof L=="string"?{url:L,width:0,height:0}:W(W({},L),{url:((D=L.url)!==null&&D!==void 0?D:"").split("auth=")[0]}),C.requireAuth)}):[],C.messageSurvivalSeconds=(g=r.message_survival_seconds)!==null&&g!==void 0?g:-1,r.parent_message_info){var I=r.parent_message_info;C.parentMessage=Ei(t,Xe(_t(W(W({},I),{created_at:I.ts,message_id:C.parentMessageId,channel_url:C.channelUrl,channel_type:C.channelType,file:I.file,url:(y=I.file)===null||y===void 0?void 0:y.url,require_auth:(S=I.file)===null||S===void 0?void 0:S.require_auth}))))}return C}return B(n,e),n.payloadify=function(t){var r;return Xe(_t(W(W({},e.payloadify.call(this,t)),{url:t.plainUrl,require_auth:t.requireAuth,file:{name:t.name,size:t.size,type:t.type,data:t.data},thumbnails:(r=t.thumbnails)===null||r===void 0?void 0:r.map(function(i){return{url:i.plainUrl,width:i.width,height:i.height,real_width:i.realWidth,real_height:i.realHeight}}),message_survival_seconds:t.messageSurvivalSeconds,parent_message_info:t.parentMessage?e._getParentMessageInfoPayload.call(this,t.parentMessage):null})))},Object.defineProperty(n.prototype,"url",{get:function(){var t=Y.of(this._iid).sessionManager;return this.requireAuth&&t.ekey?"".concat(this.plainUrl,"?auth=").concat(t.ekey):this.plainUrl},enumerable:!1,configurable:!0}),n.prototype.getThreadedMessagesByTimestamp=function(t,r){return A(this,void 0,void 0,function(){var i;return M(this,function(a){switch(a.label){case 0:return i=W(W({},of),r),ke(this.messageId>0&&X("number",t)&&sm(i)).throw(J.invalidParameters),[4,xr.of(this._iid).getThreadedMessagesByTimestamp(this,t,i)];case 1:return[2,a.sent()]}})})},n}(dr),Rp=function(e){function n(t,r){var i=r.file,a=r.fileUrl,s=r.fileName,o=r.fileSize,l=r.mimeType,u=r.thumbnailSizes,d=r._uploadedMetaData,f=r._thumbnails,p=e.call(this,t)||this;return p._plainUrl=a,p.file=i,p.fileName=s,p.fileSize=o,p.mimeType=l,p.thumbnailSizes=u,p._uploadedMetaData=d,p._thumbnails=f,p}return B(n,e),n.getPlainUrl=function(t){return t instanceof n?t._plainUrl:t.fileUrl},Object.defineProperty(n.prototype,"fileUrl",{get:function(){var t,r=Y.of(this._iid).sessionManager;return this._plainUrl&&(!((t=this._uploadedMetaData)===null||t===void 0)&&t.requireAuth)&&r.ekey?"".concat(this._plainUrl,"?auth=").concat(r.ekey):this._plainUrl},set:function(t){this._plainUrl=t},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return{file:this.file,fileUrl:this._plainUrl,fileName:this.fileName,fileSize:this.fileSize,mimeType:this.mimeType,thumbnailSizes:this.thumbnailSizes,_thumbnails:this._thumbnails,_uploadedMetaData:this._uploadedMetaData}},n}(Ur),Xk=function(e){function n(t){var r,i,a,s,o=[];return t.mentionType===gi.USERS&&(t.mentionedUserIds?o=t.mentionedUserIds:t.mentionedUsers&&(o=t.mentionedUsers.map(function(l){return l.userId}))),e.call(this,{code:"FILE",ackRequired:!0,payload:Xe(_t({channel_url:t.channelUrl,files:t.files?Iw(t.files):null,url:t.url,name:(r=t.fileName)!==null&&r!==void 0?r:"",type:(i=t.mimeType)!==null&&i!==void 0?i:"",size:(a=t.fileSize)!==null&&a!==void 0?a:0,custom:t.data,custom_type:t.customType,thumbnails:(s=t._thumbnails)===null||s===void 0?void 0:s.map(function(l){return ko.payloadify(l)}),require_auth:t.requireAuth,metaarray:t.metaArrays,mention_type:t.mentionType,mentioned_user_ids:o,push_option:t.pushNotificationDeliveryOption&&t.pushNotificationDeliveryOption!==Ns.DEFAULT?t.pushNotificationDeliveryOption:void 0,apple_critical_alert_options:t.appleCriticalAlertOptions?ts.payloadify(t.appleCriticalAlertOptions):null,silent:t.silent,reply_to_channel:t.isReplyToChannel,parent_message_id:t.parentMessageId?t.parentMessageId:null,req_id:t.reqId,pin_message:t.isPinnedMessage,message:t.message}))})||this}return B(n,e),n}(_i),Zk=function(e){function n(t){var r,i,a=this;a=e.call(this)||this;var s=[];return t.mentionType===gi.USERS&&(t.mentionedUserIds?s=t.mentionedUserIds:t.mentionedUsers&&(s=t.mentionedUsers.map(function(o){return o.userId}))),a.method=we.POST,a.path="".concat(Nn(t.channelType),"/").concat(encodeURIComponent(t.channelUrl),"/messages"),a.params=Xe(_t({message_type:ir.FILE,user_id:t.userId,files:t.files?Iw(t.files):null,url:t.fileUrl,mention_type:t.mentionType,mentioned_user_ids:s,file_name:t.fileName,file_size:t.fileSize,file_type:t.mimeType,data:t.data,custom_type:t.customType,thumbnails:(r=t._thumbnails)===null||r===void 0?void 0:r.map(function(o){return ko.payloadify(o)}),require_auth:t.requireAuth,sorted_metaarray:(i=t.metaArrays)===null||i===void 0?void 0:i.map(function(o){return qr.payloadify(o)}),push_option:t.pushNotificationDeliveryOption,parent_message_id:t.parentMessageId?t.parentMessageId:null,apple_critical_alert_options:t.appleCriticalAlertOptions?ts.payloadify(t.appleCriticalAlertOptions):null,reply_to_channel:t.isReplyToChannel,req_id:t.reqId,pin_message:t.isPinnedMessage})),a}return B(n,e),n}(Re),xy=function(e){function n(t,r,i){var a,s,o,l,u=this;(u=e.call(this,t,"FILE",i)||this).message=i.files&&i.files.length>=2?new Ua(t,i):new Ir(t,i);var d=Y.of(t).sdkState;return u.isMentioned=Wc(u.message.mentionType,(o=(a=u.message.mentionedUserIds)!==null&&a!==void 0?a:(s=u.message.mentionedUsers)===null||s===void 0?void 0:s.map(function(f){return f.userId}))!==null&&o!==void 0?o:[],d.userId),u.forceUpdateLastMessage=(l=i.force_update_last_message)!==null&&l!==void 0&&l,u}return B(n,e),n}(Wn),Jk=function(e){function n(t,r){var i,a,s,o,l=this;(l=e.call(this,t,r)||this).message=r.files&&r.files.length>=2?new Ua(t,r):new Ir(t,r);var u=Y.of(t).sdkState;return l.isMentioned=Wc(l.message.mentionType,(s=(i=l.message.mentionedUserIds)!==null&&i!==void 0?i:(a=l.message.mentionedUsers)===null||a===void 0?void 0:a.map(function(d){return d.userId}))!==null&&s!==void 0?s:[],u.userId),l.forceUpdateLastMessage=(o=r.force_update_last_message)!==null&&o!==void 0&&o,l}return B(n,e),n}(He);function Iw(e){return e.map(function(n){var t,r;return Xe(_t({url:Rp.getPlainUrl(n),file_name:n.fileName,file_type:n.mimeType,file_size:n.fileSize,thumbnails:(t=n._thumbnails)===null||t===void 0?void 0:t.map(function(i){return ko.payloadify(i)}),require_auth:(r=n._uploadedMetaData)===null||r===void 0?void 0:r.requireAuth}))})}var Br;(function(e){e[e.PENDING=0]="PENDING",e[e.UPLOADING=1]="UPLOADING",e[e.UPLOADED=2]="UPLOADED",e[e.SENDING=3]="SENDING",e[e.FAILED=4]="FAILED"})(Br||(Br={}));var eP=function(){function e(n,t){var r=t.sdkState,i=t.dispatcher,a=t.requestQueue,s=t.onlineDetector,o=t.cacheContext,l=this;this._queueMap=new Map,this._iid=n,this._sdkState=r,this._requestQueue=a,this._cacheContext=o,this._dispatcher=i,this._dispatcher.on(function(u){u instanceof pa&&(l._connectionState=u.stateType)}),this._onlineDetector=s}return Object.defineProperty(e.prototype,"_shouldSendThroughWebSocket",{get:function(){return this._connectionState===On.CONNECTED||this._connectionState===On.CONNECTING||this._connectionState===On.RECONNECTING},enumerable:!1,configurable:!0}),e.prototype._sendFileMessage=function(n,t){return A(this,void 0,void 0,function(){var r,i,a;return M(this,function(s){switch(s.label){case 0:return r=this._createSendFileMessageRequestParams(n,t),this._shouldSendThroughWebSocket?(i=new Xk(r),[4,this._requestQueue.send(i)]):[3,2];case 1:return a=s.sent(),[2,a.as(xy).message];case 2:return i=new Zk(W(W({},r),{userId:this._sdkState.userId})),[4,this._requestQueue.send(i)];case 3:return a=s.sent(),[2,a.as(Jk).message]}})})},e.prototype._createSendFileMessageRequestParams=function(n,t){var r=W(W({},t.params),{channelUrl:n.url,channelType:n.channelType,reqId:t.requestId,url:""});if(t.multipleFileUploadInfo){var i=t.params;r.files=i.fileInfoList}else i=t.params,r.url=i.fileUrl,r.requireAuth=i.requireAuth;return r},e.prototype._resolveMessageQueue=function(n){var t;return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u,d,f,p,m,E,g;return M(this,function(y){switch(y.label){case 0:if(!(r=this._queueMap.get(n.url)))return[3,21];if(r.isResolving)return[3,20];r.isResolving=!0,i=[],a=!0,y.label=1;case 1:y.trys.push([1,15,16,17]),s=je(r.messageQueue),o=s.next(),y.label=2;case 2:if(o.done)return[3,14];switch(l=o.value,l.state){case Br.PENDING:case Br.UPLOADING:return[3,3];case Br.UPLOADED:return[3,4];case Br.FAILED:return[3,12]}return[3,13];case 3:return a=!1,i.push(l),[3,13];case 4:if(!a)return[3,10];y.label=5;case 5:return y.trys.push([5,8,,9]),l.state=Br.SENDING,[4,this._sendFileMessage(n,l)];case 6:return u=y.sent(),l.deferred.resolve(u),[4,Yi(100)];case 7:return y.sent(),[3,9];case 8:return d=y.sent(),l.deferred.reject(d),[3,9];case 9:return[3,11];case 10:i.push(l),y.label=11;case 11:return[3,13];case 12:return f=(t=l.error)!==null&&t!==void 0?t:J.unknown,l.deferred.reject(f.code===at.REQUEST_CANCELED?J.fileUploadCanceled:f),[3,13];case 13:return o=s.next(),[3,2];case 14:return[3,17];case 15:return p=y.sent(),E={error:p},[3,17];case 16:try{o&&!o.done&&(g=s.return)&&g.call(s)}finally{if(E)throw E.error}return[7];case 17:return m=r.isResolveRequestPending,r.messageQueue=i,r.isResolving=!1,r.isResolveRequestPending=!1,m?[4,this._resolveMessageQueue(n)]:[3,19];case 18:y.sent(),y.label=19;case 19:return[3,21];case 20:r.isResolveRequestPending=!0,y.label=21;case 21:return[2]}})})},e.prototype._uploadNextPendingItem=function(n){var t;return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u,d,f,p;return M(this,function(m){switch(m.label){case 0:return(r=this._queueMap.get(n.url))&&(i=r.messageQueue.find(function(E){return E.state===Br.PENDING}))?i.multipleFileUploadInfo?(a=i.multipleFileUploadInfo,s=a.uploadIndex,o=a.uploadCount,l=a.requestHandler,p=i.params,u=p.fileInfoList[s],!jr(u.file)||!((t=u._uploadedMetaData)===null||t===void 0)&&t.isUploaded?[3,2]:[4,this._tryUploadNextItemAndUpdateItemState(n,r,i)]):[3,4]:[3,9];case 1:return m.sent(),[3,3];case 2:i.state=s<o-1?Br.PENDING:Br.UPLOADED,m.label=3;case 3:return d=p.fileInfoList[s],f=i.multipleFileUploadInfo.uploadIndex++,i.multipleFileUploadInfo.isCopy||l==null||l._triggerOnFileUploaded(i.requestId,f,d,i.error),[3,7];case 4:return p=i.params,jr(p.file)?[4,this._tryUploadNextItemAndUpdateItemState(n,r,i)]:[3,6];case 5:return m.sent(),[3,7];case 6:p.thumbnailSizes=[],i.state=Br.UPLOADED,m.label=7;case 7:return this._uploadNextPendingItem(n),[4,this._resolveMessageQueue(n)];case 8:m.sent(),m.label=9;case 9:return[2]}})})},e.prototype._tryUploadNextItemAndUpdateItemState=function(n,t,r){return A(this,void 0,void 0,function(){var i,a,s,o,l,u;return M(this,function(d){switch(d.label){case 0:return[4,this._onlineDetector.isOnline()];case 1:if(i=d.sent(),!Y.of(this._iid).sessionManager.currentUser||!i)return r.error=J.connectionRequired,r.state=Br.FAILED,[2];if(!(t.uploadQueue.length<6))return[3,9];r.state=Br.UPLOADING,t.uploadQueue.push(r),d.label=2;case 2:return d.trys.push([2,7,,8]),r.multipleFileUploadInfo?(a=r.multipleFileUploadInfo,s=a.uploadIndex,o=a.uploadCount,l=r.params,[4,this._uploadNextFileForMultipleFilesItemAndUpdateParams(n,r,l)]):[3,4];case 3:return d.sent(),r.state=s<o-1?Br.PENDING:Br.UPLOADED,[3,6];case 4:return l=r.params,[4,this._uploadNextFileForSingleFileItemAndUpdateParams(n,r,l)];case 5:d.sent(),r.state=Br.UPLOADED,d.label=6;case 6:return[3,8];case 7:switch((u=d.sent()).code){case at.REQUEST_FAILED:r.error=new J({code:at.NETWORK_ERROR,message:"Failed to upload a file."});break;case at.REQUEST_CANCELED:r.error=J.fileUploadCanceled;break;default:r.error=u}return r.state=Br.FAILED,[3,8];case 8:this._dequeueUploadItem(t,r),d.label=9;case 9:return[2]}})})},e.prototype._dequeueUploadItem=function(n,t){var r=n.uploadQueue.findIndex(function(i){return i.requestId===t.requestId});r>=0&&n.uploadQueue.splice(r,1)},e.prototype._uploadNextFileForSingleFileItemAndUpdateParams=function(n,t,r){var i,a,s;return A(this,void 0,void 0,function(){var o,l,u,d,f,p,m,E,g,y;return M(this,function(S){switch(S.label){case 0:return o=new Mp({file:r.file,channelUrl:n.url,thumbnailSizes:r.thumbnailSizes,requestId:t.requestId}),[4,this._requestQueue.send(o)];case 1:return l=S.sent(),u=l.as(Ap),d=u.url,f=u.fileSize,p=f===void 0?r.fileSize:f,m=u.thumbnails,E=m===void 0?[]:m,g=u.requireAuth,y=g!==void 0&&g,r.fileName=(i=r.fileName)!==null&&i!==void 0?i:r.file.name,r.mimeType=(a=r.mimeType)!==null&&a!==void 0?a:r.file.type,r.fileSize=(s=r.fileSize)!==null&&s!==void 0?s:r.file.size,r.fileUrl=d,r.fileSize=p,r.requireAuth=y,r._thumbnails=E,[2]}})})},e.prototype._uploadNextFileForMultipleFilesItemAndUpdateParams=function(n,t,r){var i,a,s;return A(this,void 0,void 0,function(){var o,l,u,d,f,p,m,E,g,y,S;return M(this,function(C){switch(C.label){case 0:return o=t.multipleFileUploadInfo.uploadIndex,l=r.fileInfoList[o],u=new Mp({file:l.file,channelUrl:n.url,thumbnailSizes:l.thumbnailSizes,requestId:t.requestId}),[4,this._requestQueue.send(u)];case 1:return d=C.sent(),f=d.as(Ap),p=f.url,m=f.fileSize,E=m===void 0?l.fileSize:m,g=f.thumbnails,y=f.requireAuth,S=y!==void 0&&y,l.fileName=(i=l.fileName)!==null&&i!==void 0?i:l.file.name,l.mimeType=(a=l.mimeType)!==null&&a!==void 0?a:l.file.type,l.fileSize=(s=l.fileSize)!==null&&s!==void 0?s:l.file.size,l.file=void 0,l.fileUrl=p,l.fileSize=E,l._thumbnails=g,l._uploadedMetaData=W(W({},l._uploadedMetaData),{requireAuth:S,isUploaded:!0}),l instanceof Rp||(r.fileInfoList[o]=new Rp(this._iid,l)),[2]}})})},e.prototype.request=function(n,t,r,i){return i===void 0&&(i={}),A(this,void 0,void 0,function(){var a,s,o,l,u;return M(this,function(d){return this._queueMap.has(n.url)||(a={messageQueue:[],uploadQueue:[],isResolving:!1,isResolveRequestPending:!1},this._queueMap.set(n.url,a)),s=this._queueMap.get(n.url),o=new Gi,l={requestId:t,params:r,state:Br.PENDING,deferred:o},function(f){return"fileInfoList"in f}(r)&&(u=W({uploadIndex:0,uploadCount:r.fileInfoList.length},i),l.multipleFileUploadInfo=u),s.messageQueue.push(l),this._uploadNextPendingItem(n),[2,o.promise]})})},e.prototype.cancel=function(n,t){var r,i,a=this._queueMap.get(n.url);if(a){var s=t?[a.messageQueue.find(function(E){return E.requestId===t})]:At([],ft(a.messageQueue),!1);try{for(var o=je(s),l=o.next();!l.done;l=o.next()){var u=l.value;if(u)switch(u.state){case Br.PENDING:if(u.state=Br.FAILED,u.error=J.requestCanceled,u.multipleFileUploadInfo&&!u.multipleFileUploadInfo.isCopy){var d=u.multipleFileUploadInfo,f=d.uploadIndex,p=d.requestHandler,m=u.params.fileInfoList[f];p==null||p._triggerOnFileUploaded(u.requestId,f,m,J.fileUploadCanceled)}this._resolveMessageQueue(n);break;case Br.UPLOADING:this._requestQueue.cancel(u.requestId),this._dispatcher.dispatch(new Ep({requestId:u.requestId}))}}}catch(E){r={error:E}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}}else t&&(this._requestQueue.cancel(t),this._dispatcher.dispatch(new Ep({requestId:t})))},e}(),Rg,Dh={prevResultSize:0,nextResultSize:0,isInclusive:!1,reverse:!1,messageTypeFilter:mi.ALL,customTypesFilter:void 0,senderUserIdsFilter:void 0,replyType:Ar.NONE,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1,includeThreadInfo:!1,showSubchannelMessagesOnly:!1},mT=function(e){return X("number",e.prevResultSize)&&X("number",e.nextResultSize)&&X("boolean",e.isInclusive)&&X("boolean",e.reverse)&&X("string",e.messageTypeFilter)&&tn(mi,e.messageTypeFilter)&&nn("string",e.customTypesFilter,!0)&&nn("string",e.senderUserIdsFilter,!0)&&tn(Ar,e.replyType)&&X("boolean",e.includeMetaArray)&&X("boolean",e.includeReactions)&&X("boolean",e.includeParentMessageInfo)&&X("boolean",e.includeThreadInfo)&&X("boolean",e.showSubchannelMessagesOnly)},Og={replyType:Ar.NONE,includeReactions:!1,includeThreadInfo:!1,includeMetaArray:!1,includeParentMessageInfo:!1},_T=function(e){return tn(Ar,e.replyType)&&X("boolean",e.includeReactions)&&X("boolean",e.includeMetaArray)&&X("boolean",e.includeParentMessageInfo)&&X("boolean",e.includeThreadInfo)},tP=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=t.includeMetaArray,o=t.includeReactions,l=t.includeThreadInfo,u=t.includeParentMessageInfo,d=e.call(this)||this;return d.method=we.GET,d.path="".concat(Nn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(encodeURIComponent(a)),d.params={is_sdk:!0,with_sorted_meta_array:s,include_reactions_summary:o!=null&&o,include_thread_info:l,include_parent_message_info:u,include_poll_details:!0},d}return B(n,e),n}(Re),nP=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.message=r?Ei(t,W({},r)):null,i}return B(n,e),n}(He),wv=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.timestamp,s=t.token,o=t.prevResultSize,l=t.nextResultSize,u=t.isInclusive,d=t.reverse,f=t.messageTypeFilter,p=t.customTypesFilter,m=t.senderUserIdsFilter,E=t.replyType,g=t.includeMetaArray,y=t.includeReactions,S=t.parentMessageId,C=t.includeThreadInfo,T=t.includeParentMessageInfo,I=t.showSubchannelMessagesOnly,L=t.checkingHasNext,D=t.checkingContinuousMessages,O=e.call(this)||this;return O.method=we.GET,O.path="".concat(Nn(r),"/").concat(encodeURIComponent(i),"/messages"),O.params=Xe(_t({is_sdk:!0,prev_limit:o,next_limit:l,include:u,reverse:d,message_ts:a,message_id:s,message_type:f??null,custom_types:p,sender_ids:m,include_reply_type:E,with_sorted_meta_array:g,include_reactions_summary:y,parent_message_id:S,include_thread_info:C,include_parent_message_info:T,show_subchannel_message_only:I,include_poll_details:!0,checking_has_next:L,checking_continuous_messages:D})),O}return B(n,e),n}(Re),Rv=function(e){function n(t,r){var i=e.call(this,t,r)||this;return r.is_continuous_messages!==void 0&&(i.isContinuousMessages=r.is_continuous_messages),r.has_next!==void 0&&(i.hasNext=r.has_next),i.messages=r.messages.map(function(a){return Ei(t,a)}),i}return B(n,e),n}(He),rP=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.timestamp,s=t.token,o=t.replyType,l=t.includeMetaArray,u=t.includeReactions,d=t.includeThreadInfo,f=t.includeParentMessageInfo,p=e.call(this)||this;return p.method=we.GET,p.path="".concat(Nn(r),"/").concat(encodeURIComponent(i),"/messages/changelogs"),p.params={change_ts:a,token:s,with_sorted_meta_array:l,include_reactions_summary:u,include_thread_info:d,include_reply_type:o,include_parent_message_info:f,include_poll_details:!0},p}return B(n,e),n}(Re),iP=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.updatedMessages=r.updated.map(function(a){return Ei(t,a)}),i.deletedMessagesInfo=r.deleted.map(function(a){return{messageId:a.message_id,deletedAt:a.deleted_at}}),i.hasMore=r.has_more,i.nextToken=r.next,i}return B(n,e),n}(He),aP=function(e){function n(t){var r=t.channelUrl,i=t.scheduledMessageId,a=e.call(this)||this;return a.method=we.GET,a.path="".concat(Li,"/").concat(encodeURIComponent(r),"/scheduled_messages/").concat(encodeURIComponent(i)),a.params={},a}return B(n,e),n}(Re),sP=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.message=r?Ei(t,W({},r)):null,i}return B(n,e),n}(He);(function(e){e.MUTED="muted",e.BANNED="banned"})(Rg||(Rg={}));var gT=function(){function e(n){var t,r,i,a;this.restrictionType=null,tn(Rg,n.restriction_type)&&(this.restrictionType=n.restriction_type),this.description=(t=n.description)!==null&&t!==void 0?t:null,this.endAt=(i=(r=n.end_at)!==null&&r!==void 0?r:n.muted_end_at)!==null&&i!==void 0?i:-1,this.remainingDuration=(a=n.remaining_duration)!==null&&a!==void 0?a:-1}return e.payloadify=function(n){return Xe(_t({restriction_type:n.restrictionType,description:n.description,end_at:n.endAt,remaining_duration:n.remainingDuration}))},e}(),Hu=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.restrictionInfo=new gT(r),i}return B(n,e),n.payloadify=function(t){return Xe(_t(W(W({},e.payloadify.call(this,t)),gT.payloadify(t.restrictionInfo))))},n}(dn),oP=function(e){function n(t,r){var i,a=this;return(a=e.call(this,t,r)||this).isMuted=!1,a.isMuted=(i=r.is_muted)!==null&&i!==void 0&&i,a}return B(n,e),n}(dn),ua=function(){function e(){this._onPending=jt,this._onFailed=jt,this._onSucceeded=jt}return e.prototype._trigger=function(n){switch(n==null?void 0:n.sendingStatus){case yn.PENDING:n.errorCode===0&&this._onPending(n);break;case yn.SCHEDULED:case yn.SUCCEEDED:this._onSucceeded(n)}},e.prototype._triggerFailed=function(n,t){switch(t==null?void 0:t.sendingStatus){case yn.FAILED:case yn.CANCELED:this._onFailed(n,t.scheduledInfo?null:t)}},e.prototype.onPending=function(n){return this._onPending=n,this},e.prototype.onFailed=function(n){return this._onFailed=n,this},e.prototype.onSucceeded=function(n){return this._onSucceeded=n,this},e}(),om={data:void 0,customType:void 0,mentionType:gi.USERS,mentionedUserIds:void 0,mentionedUsers:void 0,mentionedMessageTemplate:void 0,metaArrays:void 0,parentMessageId:void 0,isReplyToChannel:!1,pushNotificationDeliveryOption:void 0,appleCriticalAlertOptions:void 0,isPinnedMessage:!1},lm=function(e){return X("string",e.data,!0)&&X("string",e.customType,!0)&&tn(gi,e.mentionType)&&nn("string",e.mentionedUserIds,!0)&&nn(dn,e.mentionedUsers,!0)&&X("string",e.mentionedMessageTemplate,!0)&&nn(qr,e.metaArrays,!0)&&X("number",e.parentMessageId,!0)&&X("boolean",e.isReplyToChannel)&&tn(Ns,e.pushNotificationDeliveryOption,!0)&&X(ts,e.appleCriticalAlertOptions,!0)&&X("boolean",e.isPinnedMessage,!0)},ET=function(e){return{isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption,pollId:e.pollId}},Mw=W(W({},om),{message:"",translationTargetLanguages:void 0,pollId:void 0,extendedMessagePayload:void 0});function Aw(e){var n,t,r;return(n=e.messageParams)!==null&&n!==void 0?n:_t(W(W({},e),{mentionType:e.mentionType,mentionedUserIds:(t=e.mentionedUserIds)!==null&&t!==void 0?t:(r=e.mentionedUsers)===null||r===void 0?void 0:r.map(function(i){return i.userId}),translationTargetLanguages:Object.keys(e.translations),pushNotificationDeliveryOption:Ns.DEFAULT,parentMessageId:null,isReplyToChannel:!1,isPinnedMessage:!1}))}var bu,Dg=function(e){var n;return Xe(_t({data:e.data,customType:e.customType,mentionType:e.mentionType,mentionedUsers:e.mentionedUsers,mentionedUserIds:e.mentionedUserIds,mentionedMessageTemplate:e.mentionedMessageTemplate,metaArrays:e.metaArrays,pollId:(n=e.poll)===null||n===void 0?void 0:n.id,parentMessageId:e.parentMessageId,appleCriticalAlertOptions:e.appleCriticalAlertOptions,message:e.message,translationTargetLanguages:Object.keys(e.translations),extendedMessagePayload:e.extendedMessagePayload}))},ww=function(e){return lm(e)&&X("string",e.message)&&nn("string",e.translationTargetLanguages,!0)&&X("number",e.pollId,!0)&&X("object",e.extendedMessagePayload,!0)};(function(e){e.FILE="file",e.BLOB="blob",e.BLOB_LIKE_OBJECT="blobLikeObject",e.URL="url"})(bu||(bu={}));var tp=function(e){return typeof window<"u"&&"Blob"in window&&typeof Blob<"u"&&e instanceof Blob},U_=function(e){return e===bu.BLOB||e===bu.FILE},yT=function(e){return{file:e.file,fileKey:e.fileKey,fileType:e.fileType,isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption}},CT=W(W({},om),{file:void 0,fileKey:void 0,fileUrl:void 0,fileName:void 0,fileType:void 0,fileSize:void 0,mimeType:void 0,thumbnailSizes:void 0,requireAuth:!1,message:void 0});function Rw(e){var n,t,r,i;return(n=e.messageParams)!==null&&n!==void 0?n:_t(W(W({},e),{fileUrl:e.plainUrl,fileName:e.name,fileSize:e.size,mimeType:e.type,mentionType:e.mentionType,mentionedUserIds:(t=e.mentionedUserIds)!==null&&t!==void 0?t:(r=e.mentionedUsers)===null||r===void 0?void 0:r.map(function(a){return a.userId}),pushNotificationDeliveryOption:Ns.DEFAULT,parentMessageId:null,isReplyToChannel:!1,thumbnailSizes:(i=e.thumbnails)===null||i===void 0?void 0:i.map(function(a){return{maxWidth:a.width,maxHeight:a.height}}),requireAuth:e.requireAuth,isPinnedMessage:!1,_thumbnails:e.thumbnails,message:e.message}))}var Lh,Lg=function(e,n){var t;return e.messageParams?(!e.url&&jr(n)&&(e.messageParams.file=n),e.messageParams):Xe(_t({data:e.data,customType:e.customType,mentionType:e.mentionType,mentionedUsers:e.mentionedUsers,mentionedUserIds:e.mentionedUserIds,metaArrays:e.metaArrays,parentMessageId:e.parentMessageId,appleCriticalAlertOptions:e.appleCriticalAlertOptions,file:n,fileUrl:e.url,fileName:e.name,fileSize:e.size,mimeType:e.type,thumbnailSizes:(t=e.thumbnails)===null||t===void 0?void 0:t.map(function(r){return{maxWidth:r.width,maxHeight:r.height}}),message:e.message}))},bT=function(e){return lm(e)&&(jr(e.file)||X("string",e.fileUrl))&&X("string",e.fileName,!0)&&X("string",e.mimeType,!0)&&X("number",e.fileSize,!0)&&X("string",e.message,!0)&&(e.thumbnailSizes===null||e.thumbnailSizes===void 0||Array.isArray(e.thumbnailSizes)&&e.thumbnailSizes.every(function(n){return X("object",n)&&n.maxWidth>0&&n.maxHeight>0}))},Fy={data:void 0,customType:void 0,mentionType:gi.USERS,mentionedUserIds:void 0,mentionedUsers:void 0,mentionedMessageTemplate:void 0,metaArrays:void 0,pushNotificationDeliveryOption:void 0,appleCriticalAlertOptions:void 0},Hy=function(e){return X("string",e.data,!0)&&X("string",e.customType,!0)&&tn(gi,e.mentionType)&&nn("string",e.mentionedUserIds,!0)&&nn(dn,e.mentionedUsers,!0)&&X("string",e.mentionedMessageTemplate,!0)&&nn(qr,e.metaArrays,!0)&&tn(Ns,e.pushNotificationDeliveryOption,!0)&&X(ts,e.appleCriticalAlertOptions,!0)},Ow=W(W({},Fy),{message:void 0,translationTargetLanguages:void 0,pollId:void 0}),Dw=function(e){return Hy(e)&&X("string",e.message,!0)&&nn("string",e.translationTargetLanguages,!0)&&X("number",e.pollId,!0)},lP=W({},Fy),uP=function(e){function n(t){var r=t.channelUrl,i=t.channelType,a=t.token,s=t.limit,o=e.call(this)||this;return o.method=we.GET,o.path="".concat(Nn(i),"/").concat(encodeURIComponent(r),"/operators"),o.params={token:a,limit:s},o}return B(n,e),n}(Re),cP=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.operators=r.operators.map(function(a){return new dn(t,a)}),i.token=r.next,i}return B(n,e),n}(He),dP=function(e){function n(t,r,i,a){return e.call(this,t,r,i,a)||this}return B(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)},n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l;return M(this,function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:(t=[],this._hasNext?(this._isLoading=!0,r=Y.of(this._iid).requestQueue,i=new uP(W(W({},this),{channelUrl:this.channelUrl,token:this._token})),[4,r.send(i)]):[3,2]):[3,5];case 1:return a=u.sent(),s=a.as(cP),o=s.operators,l=s.token,this._token=l,this._hasNext=!!l,this._isLoading=!1,[2,o];case 2:return[2,t];case 3:throw J.queryInProgress;case 4:return[3,6];case 5:throw J.invalidParameters;case 6:return[2]}})})},n}(Js),hP=function(e){function n(t,r,i,a){var s,o,l,u,d,f,p,m,E,g,y=this;return(y=e.call(this,t,r,i,a)||this).reverse=!1,y.messageTypeFilter=mi.ALL,y.customTypesFilter=null,y.senderUserIdsFilter=null,y.replyType=Ar.NONE,y.includeMetaArray=!1,y.includeReactions=!1,y.includeParentMessageInfo=!1,y.includeThreadInfo=!1,y.showSubchannelMessagesOnly=!1,y._edge=Number.MAX_SAFE_INTEGER,y.reverse=(s=a.reverse)!==null&&s!==void 0&&s,y.messageTypeFilter=(o=a.messageTypeFilter)!==null&&o!==void 0?o:mi.ALL,y.customTypesFilter=(l=a.customTypesFilter)!==null&&l!==void 0?l:null,y.senderUserIdsFilter=(u=a.senderUserIdsFilter)!==null&&u!==void 0?u:null,y.replyType=(d=a.replyType)!==null&&d!==void 0?d:Ar.NONE,y.includeMetaArray=(f=a.includeMetaArray)!==null&&f!==void 0&&f,y.includeReactions=(p=a.includeReactions)!==null&&p!==void 0&&p,y.includeParentMessageInfo=(m=a.includeParentMessageInfo)!==null&&m!==void 0&&m,y.includeThreadInfo=(E=a.includeThreadInfo)!==null&&E!==void 0&&E,y.showSubchannelMessagesOnly=(g=a.showSubchannelMessagesOnly)!==null&&g!==void 0&&g,y}return B(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&X("boolean",this.reverse)&&tn(mi,this.messageTypeFilter)&&tn(Ar,this.replyType)&&nn("string",this.customTypesFilter,!0)&&nn("string",this.senderUserIdsFilter,!0)&&X("boolean",this.includeMetaArray)&&X("boolean",this.includeReactions)&&X("boolean",this.includeParentMessageInfo)&&X("boolean",this.includeThreadInfo)&&X("boolean",this.showSubchannelMessagesOnly)},n.prototype.load=function(){return A(this,void 0,void 0,function(){var t;return M(this,function(r){switch(r.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,[4,xr.of(this._iid).getMessagesByTimestamp(this.channelUrl,this.channelType,this._edge,_t({prevResultSize:this.limit,nextResultSize:0,isInclusive:!1,reverse:this.reverse,messageTypeFilter:this.messageTypeFilter,customTypesFilter:this.customTypesFilter,replyType:this.replyType,senderUserIdsFilter:this.senderUserIdsFilter,includeReactions:this.includeReactions,includeMetaArray:this.includeMetaArray,includeParentMessageInfo:this.includeParentMessageInfo,includeThreadInfo:this.includeThreadInfo,showSubchannelMessagesOnly:this.showSubchannelMessagesOnly}))]):[3,2]:[3,5];case 1:return t=r.sent(),this._edge=Math.min.apply(Math,At([Number.MAX_SAFE_INTEGER],ft(t.map(function(i){return i.createdAt})),!1)),this._hasNext=t.length>=this.limit,this._isLoading=!1,[2,t];case 2:return[2,[]];case 3:throw J.queryInProgress;case 4:return[3,6];case 5:throw J.invalidParameters;case 6:return[2]}})})},n}(Js),fP=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.limit,o=t.token;return(r=e.call(this)||this).method=we.GET,r.path="".concat(Nn(a),"/").concat(encodeURIComponent(i),"/mute"),r.params={limit:s,token:o},r}return B(n,e),n}(Re),vP=function(e){function n(t,r){var i=e.call(this,t,r)||this;i.mutedUsers=[];var a=r.next,s=r.muted_list;return i.token=a,s&&s.length>0&&(i.mutedUsers=s.map(function(o){return new Hu(t,o)})),i}return B(n,e),n}(He),pP=function(e){function n(t,r,i,a){return e.call(this,t,r,i,a)||this}return B(n,e),n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return M(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=Y.of(this._iid).requestQueue,r=new fP(W(W({},this),{token:this._token})),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),a=i.as(vP),s=a.mutedUsers,o=a.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw J.queryInProgress;case 4:return[3,6];case 5:throw J.invalidParameters;case 6:return[2]}})})},n}(Js),mP=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.limit,o=t.token;return(r=e.call(this)||this).method=we.GET,r.path="".concat(Nn(a),"/").concat(encodeURIComponent(i),"/ban"),r.params=Xe({limit:s,token:o}),r}return B(n,e),n}(Re),_P=function(e){function n(t,r){var i=e.call(this,t,r)||this;i.bannedUsers=[];var a=r.next,s=r.banned_list;return i.token=a,s&&s.length>0&&(i.bannedUsers=s.map(function(o){return new Hu(t,o.user)})),i}return B(n,e),n}(He),gP=function(e){function n(t,r,i,a){return e.call(this,t,r,i,a)||this}return B(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)},n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return M(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=Y.of(this._iid).requestQueue,r=new mP(W(W({},this),{token:this._token})),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),a=i.as(_P),s=a.bannedUsers,o=a.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw J.queryInProgress;case 4:return[3,6];case 5:throw J.invalidParameters;case 6:return[2]}})})},n}(Js);(function(e){e.SPAM="spam",e.HARASSING="harassing",e.SUSPICIOUS="suspicious",e.INAPPROPRIATE="inappropriate"})(Lh||(Lh={}));var EP=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.operatorUserIds;return(r=e.call(this)||this).method=we.POST,r.path="".concat(Nn(a),"/").concat(encodeURIComponent(i),"/operators"),r.params={operator_ids:s},r}return B(n,e),n}(Re);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}B(n,e)})(He);var yP=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.operatorUserIds;return(r=e.call(this)||this).method=we.DELETE,r.path="".concat(Nn(a),"/").concat(encodeURIComponent(i),"/operators"),r.params={operator_ids:s},r}return B(n,e),n}(Re);(function(e){function n(t,r){return e.call(this,t,r)||this}B(n,e)})(He);var CP=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.userId;return(r=e.call(this)||this).method=we.GET,r.path="".concat(Nn(a),"/").concat(encodeURIComponent(i),"/mute/").concat(s),r}return B(n,e),n}(Re),bP=function(e){function n(t,r){var i=e.call(this,t,r)||this;i.isMuted=!1,i.startAt=0,i.endAt=0;var a=r.is_muted,s=r.start_at,o=r.end_at,l=r.remaining_duration,u=r.description;return i.isMuted=a,i.startAt=s,i.endAt=o,i.remainingDuration=l,i.description=u,i}return B(n,e),n}(He),ST=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.keys;return(r=e.call(this)||this).method=we.GET,r.path="".concat(Nn(a),"/").concat(encodeURIComponent(i),"/metadata"),r.params={keys:s,include_ts:!0},r}return B(n,e),n}(Re),TT=function(e){function n(t,r){var i=e.call(this,t,r)||this,a=r.metadata,s=r.ts;return i.metadata=a,i.ts=s,i}return B(n,e),n}(He),SP=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.metadata;return(r=e.call(this)||this).method=we.POST,r.path="".concat(Nn(a),"/").concat(encodeURIComponent(i),"/metadata"),r.params={metadata:s,include_ts:!0},r}return B(n,e),n}(Re),TP=function(e){function n(t,r){var i,a,s=this;return(s=e.call(this,t,r)||this).metaData=(i=r.metadata)!==null&&i!==void 0?i:{},s.ts=(a=r.ts)!==null&&a!==void 0?a:null,s}return B(n,e),n}(He),NP=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.metadata,o=t.upsert;return(r=e.call(this)||this).method=we.PUT,r.path="".concat(Nn(a),"/").concat(encodeURIComponent(i),"/metadata"),r.params={metadata:s,include_ts:!0,upsert:o!=null&&o},r}return B(n,e),n}(Re),IP=function(e){function n(t,r){var i=e.call(this,t,r)||this,a=r.metadata,s=r.ts;return i.metadata=a,i.ts=s,i}return B(n,e),n}(He),Lw=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return i.data&&(a.created=i.data.created,a.updated=i.data.updated,a.deleted=i.data.deleted),a}return B(n,e),n}(Wn),MP=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.key;return(r=e.call(this)||this).method=we.DELETE,r.path="".concat(Nn(a),"/").concat(encodeURIComponent(i),"/metadata/").concat(s),r.params={include_ts:!0},r}return B(n,e),n}(Re),AP=function(e){function n(t,r){var i=e.call(this,t,r)||this,a=r.ts;return i.ts=a,i}return B(n,e),n}(He),wP=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType;return(r=e.call(this)||this).method=we.DELETE,r.path="".concat(Nn(a),"/").concat(encodeURIComponent(i),"/metadata"),r.params={include_ts:!0},r}return B(n,e),n}(Re),RP=function(e){function n(t,r){var i=e.call(this,t,r)||this,a=r.ts;return i.ts=a,i}return B(n,e),n}(He),NT=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.keys;return(r=e.call(this)||this).method=we.GET,r.path="".concat(Nn(a),"/").concat(encodeURIComponent(i),"/metacounter"),r.params={keys:s},r}return B(n,e),n}(Re),IT=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.metaCounter=r,i}return B(n,e),n}(He),OP=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.metaCounter;return(r=e.call(this)||this).method=we.POST,r.path="".concat(Nn(a),"/").concat(encodeURIComponent(i),"/metacounter"),r.params={metacounter:s},r}return B(n,e),n}(Re),DP=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.metaCounter=r,i}return B(n,e),n}(He),k_=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.metaCounter,o=t.upsert,l=o!==void 0&&o,u=t.mode,d=u===void 0?"set":u;return(r=e.call(this)||this).method=we.PUT,r.path="".concat(Nn(a),"/").concat(encodeURIComponent(i),"/metacounter"),r.params={metacounter:s,upsert:l,mode:d},r}return B(n,e),n}(Re),P_=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.metaCounter=r,i}return B(n,e),n}(He),Uw=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return i.data&&(a.created=i.data.created,a.updated=i.data.updated,a.deleted=i.data.deleted),a}return B(n,e),n}(Wn),LP=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.key;return(r=e.call(this)||this).method=we.DELETE,r.path="".concat(Nn(a),"/").concat(encodeURIComponent(i),"/metacounter/").concat(s),r.params={},r}return B(n,e),n}(Re);(function(e){function n(t,r){return e.call(this,t,r)||this}B(n,e)})(He);var UP=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType;return(r=e.call(this)||this).method=we.DELETE,r.path="".concat(Nn(a),"/").concat(encodeURIComponent(i),"/metacounter"),r.params={},r}return B(n,e),n}(Re);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}B(n,e)})(He);var kP=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.userId,o=t.seconds,l=t.description;return(r=e.call(this)||this).method=we.POST,r.path="".concat(Nn(a),"/").concat(encodeURIComponent(i),"/mute"),r.params={user_id:s,seconds:o,description:l},r}return B(n,e),n}(Re);(function(e){function n(t,r){return e.call(this,t,r)||this}B(n,e)})(He);var kw=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return a.user=new Hu(t,i.data),a}return B(n,e),n}(Wn),PP=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.userId;return(r=e.call(this)||this).method=we.DELETE,r.path="".concat(Nn(a),"/").concat(encodeURIComponent(i),"/mute/").concat(encodeURIComponent(s)),r}return B(n,e),n}(Re);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}B(n,e)})(He);var Pw=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return a.user=new Hu(t,i.data),a}return B(n,e),n}(Wn),xP=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.userId,o=t.seconds,l=t.description;return(r=e.call(this)||this).method=we.POST,r.path="".concat(Nn(a),"/").concat(encodeURIComponent(i),"/ban"),r.params=Xe({user_id:s,seconds:o,description:l}),r}return B(n,e),n}(Re);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}B(n,e)})(He);var xw=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return a.user=new Hu(t,i.data),i.data.member_count&&(a.memberCount=i.data.member_count),i.data.joined_member_count&&(a.joinedMemberCount=i.data.joined_member_count),a}return B(n,e),n}(Wn),FP=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.userId;return(r=e.call(this)||this).method=we.DELETE,r.path="".concat(Nn(a),"/").concat(encodeURIComponent(i),"/ban/").concat(encodeURIComponent(s)),r}return B(n,e),n}(Re);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}B(n,e)})(He);var Fw=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return a.user=new Hu(t,i.data),a}return B(n,e),n}(Wn),MT=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.freezing;return(r=e.call(this)||this).method=we.PUT,r.path="".concat(Nn(a),"/").concat(encodeURIComponent(i),"/freeze"),r.params={freeze:s},r}return B(n,e),n}(Re);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}B(n,e)})(He);var Hw=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return a.freeze=i.data.freeze,a}return B(n,e),n}(Wn),By=function(e){return e instanceof zc?e._custom?"custom":e.name:e},Gy=function(e){if(e instanceof zc&&e._custom)return e.name},HP=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.category,o=t.userId,l=t.description;return(r=e.call(this)||this).method=we.POST,r.path="".concat(AA(a),"/").concat(encodeURIComponent(i)),r.params=Xe({report_category:By(s),reporting_user_id:o,report_description:l,custom_report_category_name:Gy(s)}),r}return B(n,e),n}(Re),BP=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.category,o=t.userId,l=t.offendingUserId,u=t.description;return(r=e.call(this)||this).method=we.POST,r.path="".concat(Eg,"/users/").concat(l),r.params=Xe({channel_url:i,channel_type:a===cn.OPEN?"open_channels":"group_channels",report_category:By(s),reporting_user_id:o,report_description:u,custom_report_category_name:Gy(s)}),r}return B(n,e),n}(Re),GP=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.category,o=t.userId,l=t.offendingUserId,u=t.messageId,d=t.description;return(r=e.call(this)||this).method=we.POST,r.path="".concat(AA(a),"/").concat(encodeURIComponent(i),"/messages/").concat(u),r.params=Xe({report_category:By(s),reporting_user_id:o,report_description:d,offending_user_id:l,custom_report_category_name:Gy(s)}),r}return B(n,e),n}(Re),VP=function(e){function n(t){var r=[];return t.mentionType===gi.USERS&&(t.mentionedUserIds?r=t.mentionedUserIds:t.mentionedUsers&&(r=t.mentionedUsers.map(function(i){return i.userId}))),e.call(this,{code:"MESG",ackRequired:!0,payload:Xe(_t({channel_url:t.channelUrl,message:t.message,data:t.data,custom_type:t.customType,metaarray:t.metaArrays,mention_type:t.mentionType,mentioned_user_ids:r,mentioned_message_template:t.mentionedMessageTemplate,target_langs:t.translationTargetLanguages,push_option:t.pushNotificationDeliveryOption&&t.pushNotificationDeliveryOption!==Ns.DEFAULT?t.pushNotificationDeliveryOption:void 0,apple_critical_alert_options:t.appleCriticalAlertOptions,silent:t.silent,reply_to_channel:t.isReplyToChannel,parent_message_id:t.parentMessageId?t.parentMessageId:null,req_id:t.reqId,poll_id:t.pollId,pin_message:t.isPinnedMessage,extended_message_payload:t.extendedMessagePayload}))})||this}return B(n,e),n}(_i),Vy=function(e){function n(t,r,i){var a,s,o,l,u=this;(u=e.call(this,t,"MESG",i)||this).message=new vi(t,i);var d=Y.of(t).sdkState;return u.isMentioned=Wc(u.message.mentionType,(o=(a=u.message.mentionedUserIds)!==null&&a!==void 0?a:(s=u.message.mentionedUsers)===null||s===void 0?void 0:s.map(function(f){return f.userId}))!==null&&o!==void 0?o:[],d.userId),u.forceUpdateLastMessage=(l=i.force_update_last_message)!==null&&l!==void 0&&l,u}return B(n,e),n}(Wn),AT=function(e){function n(t){var r=null;return t.mentionType===gi.USERS&&(t.mentionedUserIds?r=t.mentionedUserIds:t.mentionedUsers&&(r=t.mentionedUsers.map(function(i){return i.userId}))),e.call(this,{code:"MEDI",ackRequired:!0,payload:Xe(_t({channel_url:t.channelUrl,msg_id:t.messageId,message:t.message,data:t.data,custom_type:t.customType,metaarray:t.metaArrayParams,mention_type:t.mentionType,mentioned_user_ids:r,mentioned_message_template:t.mentionedMessageTemplate,apple_critical_alert_options:t.appleCriticalAlertOptions?ts.payloadify(t.appleCriticalAlertOptions):null,poll_id:t.pollId}))})||this}return B(n,e),n}(_i),Op=function(e){function n(t,r,i){var a,s,o,l,u,d=this;(d=e.call(this,t,"MEDI",i)||this).message=new vi(t,i);var f=Y.of(t).sdkState;return d.mentionCountChange=Ny({mentionType:(a=i.old_values)===null||a===void 0?void 0:a.mention_type,mentionedUserIds:(o=(s=i.old_values)===null||s===void 0?void 0:s.mentioned_user_ids)!==null&&o!==void 0?o:[]},_t({mentionType:d.message.mentionType,mentionedUserIds:(l=d.message.mentionedUserIds)!==null&&l!==void 0?l:(u=d.message.mentionedUsers)===null||u===void 0?void 0:u.map(function(p){return p.userId})}),f.userId),d}return B(n,e),n}(Wn),wT=function(e){function n(t){var r=null;return t.mentionType===gi.USERS&&(t.mentionedUserIds?r=t.mentionedUserIds:t.mentionedUsers&&(r=t.mentionedUsers.map(function(i){return i.userId}))),e.call(this,{code:"FEDI",ackRequired:!0,payload:Xe(_t({channel_url:t.channelUrl,msg_id:t.messageId,data:t.data,custom_type:t.customType,metaarray:t.metaArrayParams,mention_type:t.mentionType,mentioned_user_ids:r,apple_critical_alert_options:t.appleCriticalAlertOptions}))})||this}return B(n,e),n}(_i),Dp=function(e){function n(t,r,i){var a,s,o,l,u,d=this;(d=e.call(this,t,"FEDI",i)||this).message=new Ir(t,i);var f=Y.of(t).sdkState;return d.mentionCountChange=Ny({mentionType:(a=i.old_values)===null||a===void 0?void 0:a.mention_type,mentionedUserIds:(o=(s=i.old_values)===null||s===void 0?void 0:s.mentioned_user_ids)!==null&&o!==void 0?o:[]},_t({mentionType:d.message.mentionType,mentionedUserIds:(l=d.message.mentionedUserIds)!==null&&l!==void 0?l:(u=d.message.mentionedUsers)===null||u===void 0?void 0:u.map(function(p){return p.userId})}),f.userId),d}return B(n,e),n}(Wn),zP=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=t.reactionKey,o=e.call(this)||this;return o.method=we.POST,o.path="".concat(Nn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/reactions"),o.params={reaction:s},o}return B(n,e),n}(Re),jP=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.reactionEvent=new Py(r),i}return B(n,e),n}(He),qP=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=t.reactionKey,o=e.call(this)||this;return o.method=we.DELETE,o.path="".concat(Nn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/reactions"),o.params={reaction:s},o}return B(n,e),n}(Re),KP=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.reactionEvent=new Py(W({},r)),i}return B(n,e),n}(He),$P=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=t.translationTargetLanguages,o=e.call(this)||this;return o.method=we.POST,o.path="".concat(Nn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(encodeURIComponent(a),"/translation"),o.params={target_langs:s},o}return B(n,e),n}(Re),WP=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.message=new vi(t,r),i}return B(n,e),n}(He),QP=function(e){function n(t){var r,i=this;i=e.call(this)||this;var a=[];t.mentionType===gi.USERS&&(t.mentionedUserIds?a=t.mentionedUserIds:t.mentionedUsers&&(a=t.mentionedUsers.map(function(l){return l.userId})));var s=t.channelType,o=t.channelUrl;return i.method=we.POST,i.path="".concat(Nn(s),"/").concat(encodeURIComponent(o),"/scheduled_messages"),i.params=Xe(_t({req_id:t.reqId,scheduled_at:t.scheduledAt,message_type:$c.USER,message:t.message,custom_type:t.customType,data:t.data,mention_type:t.mentionType,mentioned_user_ids:a,sorted_metaarray:(r=t.metaArrays)===null||r===void 0?void 0:r.map(function(l){return qr.payloadify(l)}),apple_critical_alert_options:t.appleCriticalAlertOptions?ts.payloadify(t.appleCriticalAlertOptions):null,target_langs:t.translationTargetLanguages,push_option:t.pushNotificationDeliveryOption})),i}return B(n,e),n}(Re),Bw=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.message=new vi(t,r),i}return B(n,e),n}(He),YP=function(e){function n(t){var r,i,a=this;a=e.call(this)||this;var s=[];t.mentionType===gi.USERS&&(t.mentionedUserIds?s=t.mentionedUserIds:t.mentionedUsers&&(s=t.mentionedUsers.map(function(u){return u.userId})));var o=t.channelType,l=t.channelUrl;return a.method=we.POST,a.path="".concat(Nn(o),"/").concat(encodeURIComponent(l),"/scheduled_messages"),a.params=_t({req_id:t.reqId,scheduled_at:t.scheduledAt,message_type:$c.FILE,url:t.fileUrl,file_name:t.fileName,file_size:t.fileSize,file_type:t.mimeType,thumbnails:(r=t._thumbnails)===null||r===void 0?void 0:r.map(function(u){return ko.payloadify(u)}),custom_type:t.customType,data:t.data,require_auth:t.requireAuth,mention_type:t.mentionType,mentioned_user_ids:s,sorted_metaarray:(i=t.metaArrays)===null||i===void 0?void 0:i.map(function(u){return qr.payloadify(u)}),apple_critical_alert_options:t.appleCriticalAlertOptions?ts.payloadify(t.appleCriticalAlertOptions):null,push_option:t.pushNotificationDeliveryOption}),a}return B(n,e),n}(Re),XP=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.message=new Ir(t,r),i}return B(n,e),n}(He),ZP=function(e){function n(t){var r=t.pollId,i=t.title,a=t.data,s=t.allowUserSuggestion,o=t.allowMultipleVotes,l=t.closeAt,u=e.call(this)||this;return u.method=we.PUT,u.path="".concat(Ms,"/").concat(encodeURIComponent(r)),u.params={title:i,data:a,allow_user_suggestion:s,allow_multiple_votes:o,close_at:l},u}return B(n,e),n}(Re),JP=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.poll=new es(t,r),i}return B(n,e),n}(He),ex=function(e){function n(t){var r=t.pollId,i=e.call(this)||this;return i.method=we.DELETE,i.path="".concat(Ms,"/").concat(encodeURIComponent(r)),i}return B(n,e),n}(Re);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}B(n,e)})(He);var tx=function(e){function n(t){var r=t.pollId,i=e.call(this)||this;return i.method=we.PUT,i.path="".concat(Ms,"/").concat(encodeURIComponent(r),"/close"),i}return B(n,e),n}(Re),nx=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.poll=new es(t,r),i}return B(n,e),n}(He),rx=function(e){function n(t){var r=t.channelUrl,i=t.channelType,a=t.pollId,s=t.optionText,o=e.call(this)||this;return o.method=we.POST,o.path="".concat(Ms,"/").concat(encodeURIComponent(a),"/options"),o.params={channel_url:r,channel_type:i,text:s},o}return B(n,e),n}(Re),ix=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.poll=new es(t,r),i}return B(n,e),n}(He),ax=function(e){function n(t){var r=t.pollId,i=t.pollOptionId,a=t.optionText,s=e.call(this)||this;return s.method=we.PUT,s.path="".concat(Ms,"/").concat(encodeURIComponent(r),"/options/").concat(encodeURIComponent(i)),s.params={text:a},s}return B(n,e),n}(Re),sx=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.poll=new es(t,r),i}return B(n,e),n}(He),ox=function(e){function n(t){var r=t.pollId,i=t.pollOptionId,a=e.call(this)||this;return a.method=we.DELETE,a.path="".concat(Ms,"/").concat(encodeURIComponent(r),"/options/").concat(encodeURIComponent(i)),a}return B(n,e),n}(Re);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}B(n,e)})(He);var lx=function(e){function n(t){var r=t.reqId,i=t.channelType,a=t.channelUrl,s=t.pollId,o=t.pollOptionIds;return e.call(this,{code:"VOTE",ackRequired:!0,payload:Xe({req_id:r,channel_type:i===cn.OPEN?"open_channels":"group_channels",channel_url:a,poll_id:s,option_ids:o})})||this}return B(n,e),n}(_i),zy=function(e){function n(t,r,i){var a=e.call(this,t,"VOTE",i)||this;return a.event=new Ik(i),a.channelUrl=i.channel_url,a.channelType=i.channel_type,a}return B(n,e),n}(Wn),Gw=100,Vw="GroupChannel",ux="url",zw=100,Ug="Message",cx="messageId",jw="NotificationMessage",dx="notificationId",hx="Poll",fx="pollId",vx="FeedChannel",px="url";function mx(e){var n,t,r;return(n=e.messageParams)!==null&&n!==void 0?n:_t(W(W({},e),{isReplyToChannel:!1,mentionedUserIds:(t=e.mentionedUserIds)!==null&&t!==void 0?t:(r=e.mentionedUsers)===null||r===void 0?void 0:r.map(function(i){return i.userId}),pushNotificationDeliveryOption:Ns.DEFAULT,isPinnedMessage:!1,fileInfoList:e.fileInfoList.map(function(i){var a;return{fileUrl:i.plainUrl,fileName:i.fileName,fileSize:i.fileSize,mimeType:i.mimeType,thumbnailSizes:(a=i.thumbnails)===null||a===void 0?void 0:a.map(function(s){return{maxWidth:s.width,maxHeight:s.height}}),_thumbnails:i.thumbnails,_uploadedMetaData:{requireAuth:i._requireAuth,isUploaded:!0}}})}))}var _x=W(W({},om),{fileInfoList:[],message:""}),gx=function(e){return(jr(e.file)||X("string",e.fileUrl))&&X("string",e.fileName,!0)&&X("string",e.mimeType,!0)&&X("number",e.fileSize,!0)&&(e.thumbnailSizes===void 0||Array.isArray(e.thumbnailSizes)&&e.thumbnailSizes.every(function(n){return n.maxWidth>0&&n.maxHeight>0}))},np=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t._onFileUploaded=jt,t}return B(n,e),n.prototype._triggerOnFileUploaded=function(t,r,i,a){this._onFileUploaded(t,r,i,a)},n.prototype.onFileUploaded=function(t){return this._onFileUploaded=t,this},n.prototype.onPending=function(t){return e.prototype.onPending.call(this,t),this},n.prototype.onFailed=function(t){return e.prototype.onFailed.call(this,t),this},n.prototype.onSucceeded=function(t){return e.prototype.onSucceeded.call(this,t),this},n}(ua),Ex=function(e){function n(t,r){var i=e.call(this,t)||this;return i.message=null,i.message=Ei(t,r.message),i}return B(n,e),n}(Ur),yx=function(e){function n(t){var r=this,i=t.channelType,a=t.channelUrl,s=t.limit,o=t.token,l=t.includeReactions,u=t.includeMetaArray,d=t.includeParentMessageInfo,f=t.includeThreadInfo,p=t.includePollDetails;return(r=e.call(this)||this).method=we.GET,r.path="".concat(Nn(i),"/").concat(encodeURIComponent(a),"/pinned_messages"),r.params=Xe({limit:s,token:o,include_reactions_summary:l,with_sorted_meta_array:u,include_thread_info:f,include_parent_message_info:d,include_poll_details:p}),r}return B(n,e),n}(Re),Cx=function(e){function n(t,r){var i=e.call(this,t,r)||this,a=r.pinned_messages,s=r.has_more,o=r.next;return i.pinnedMessages=a.map(function(l){return new Ex(t,l)}),i.hasMore=s,i.token=o,i}return B(n,e),n}(He),bx=function(e){function n(t,r,i,a){var s=e.call(this,t,r,i,a)||this;return s.includeMetaArray=a.includeMetaArray,s.includeReactions=a.includeReactions,s.includeParentMessageInfo=a.includeParentMessageInfo,s.includeThreadInfo=a.includeThreadInfo,s.includePollDetails=a.includePollDetails,s}return B(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&X("boolean",this.includeMetaArray,!0)&&X("boolean",this.includeReactions,!0)&&X("boolean",this.includeParentMessageInfo,!0)&&X("boolean",this.includeThreadInfo,!0)&&X("boolean",this.includePollDetails,!0)},n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l;return M(this,function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=Y.of(this._iid).requestQueue,r=new yx(W(W({},this),{token:this._token})),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=u.sent(),a=i.as(Cx),s=a.pinnedMessages,o=a.hasMore,l=a.token,this._token=l,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw J.queryInProgress;case 4:return[3,6];case 5:throw J.invalidParameters;case 6:return[2]}})})},n}(Js),Sx=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=e.call(this)||this;return s.method=we.POST,s.path="".concat(Nn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/pin"),s}return B(n,e),n}(Re);(function(e){function n(t,r){return e.call(this,t,r)||this}B(n,e)})(He);var Tx=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=e.call(this)||this;return s.method=we.DELETE,s.path="".concat(Nn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/pin"),s}return B(n,e),n}(Re);(function(e){function n(t,r){return e.call(this,t,r)||this}B(n,e)})(He);var di,Nx=2;(function(e){e.SEND="send",e.RESEND="resend",e.COPY="copy"})(di||(di={}));var nr,Lp=function(e){function n(t,r){var i,a,s,o,l,u,d,f=this;return(f=e.call(this,t)||this)._name="",f._createdAt=0,f.pinnedMessageIds=[],f.channelType=cn.BASE,f.coverUrl="",f.customType="",f.data="",f.isFrozen=!1,f.isEphemeral=!1,f.creator=null,f._messageCollectionLastAccessedAt=0,f._url=r.channel_url,f._name=(i=r.name)!==null&&i!==void 0?i:"",f._createdAt=1e3*r.created_at,f.coverUrl=(a=r.cover_url)!==null&&a!==void 0?a:"",f.customType=(s=r.custom_type)!==null&&s!==void 0?s:"",f.data=(o=r.data)!==null&&o!==void 0?o:"",f.isFrozen=(l=r.freeze)!==null&&l!==void 0&&l,f.isEphemeral=(u=r.is_ephemeral)!==null&&u!==void 0&&u,f.creator=r.created_by?new dn(f._iid,r.created_by):null,r.metadata&&Object.keys(r.metadata).length>0&&r.ts?(f._cachedMetaData=new Map,Object.keys(r.metadata).forEach(function(p){f._cachedMetaData.set(p,{value:r.metadata[p],isRemoved:!1,updatedAt:r.ts})})):typeof r.metadata=="string"&&(f._cachedMetaData=new Map(Object.entries(JSON.parse(r.metadata)))),f.pinnedMessageIds=(d=r.pinned_message_ids)!==null&&d!==void 0?d:[],f}return B(n,e),Object.defineProperty(n.prototype,"url",{get:function(){return this._url},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"createdAt",{get:function(){return this._createdAt},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return W(W({},this),{url:this._url,name:this._name,createdAt:this._createdAt})},n.payloadify=function(t){return Xe(_t(W(W({},e.payloadify.call(this,t)),{channel_url:t.url,name:t.name,cover_url:t.coverUrl,custom_type:t.customType,data:t.data,freeze:t.isFrozen,is_ephemeral:t.isEphemeral,created_by:t.creator?dn.payloadify(t.creator):null,created_at:t.createdAt/1e3,metadata:t.cachedMetaData,pinned_message_ids:t.pinnedMessageIds})))},n.prototype.isGroupChannel=function(){return this.channelType===cn.GROUP},n.prototype.isOpenChannel=function(){return this.channelType===cn.OPEN},n.prototype.isFeedChannel=function(){return this.channelType===cn.FEED},Object.defineProperty(n.prototype,"cachedMetaData",{get:function(){var t={};return this._cachedMetaData&&this._cachedMetaData.forEach(function(r,i){r.isRemoved||(t[i]=r.value)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"messageCollectionLastAccessedAt",{get:function(){return this._messageCollectionLastAccessedAt},enumerable:!1,configurable:!0}),n.prototype._serializeCachedMetaData=function(){return this._cachedMetaData?{cachedMetaData:JSON.stringify(Object.fromEntries(this._cachedMetaData))}:{}},n.prototype._updateMessageCollectionLastAccessedAt=function(){this._messageCollectionLastAccessedAt=Date.now()},n.prototype._update=function(t){var r=Xe(t);Object.assign(this,r)},n.prototype._upsertCachedMetaData=function(t,r){var i=this;Object.keys(t).forEach(function(a){i._cachedMetaData||(i._cachedMetaData=new Map);var s=i._cachedMetaData.get(a);(!s||s.updatedAt<=r)&&i._cachedMetaData.set(a,{value:t[a],isRemoved:!1,updatedAt:r})})},n.prototype._updateCachedMetaData=function(t,r){var i=this,a=!1;return this._cachedMetaData?this._cachedMetaData.forEach(function(s,o){var l;s.updatedAt<=r&&(i._cachedMetaData.set(o,{value:(l=t[o])!==null&&l!==void 0?l:s.value,isRemoved:!t[o],updatedAt:r}),a=!0)}):(this._cachedMetaData=new Map,Object.keys(t).forEach(function(s){i._cachedMetaData.set(s,{value:t[s],isRemoved:!1,updatedAt:r})}),a=!0),{isUpdated:a}},n.prototype._removeFromCachedMetaData=function(t,r){var i=this;this._cachedMetaData&&t.forEach(function(a){var s=i._cachedMetaData.get(a);s&&s.updatedAt<r&&(s.isRemoved=!0,s.updatedAt=r)})},n.prototype._clearCachedMetaData=function(){this._cachedMetaData&&this._cachedMetaData.clear()},n.prototype._runIfHandleableWithGroupChannel=function(t){this.isGroupChannel()?t(this):this.isFeedChannel()&&t(this.groupChannel)},n.prototype._generateRequestId=function(){return"rq-".concat(Ro())},n.prototype.isIdentical=function(t){return t&&this.url===t.url},n.prototype.isEqual=function(t){return CA(this,t)},n.prototype.createOperatorListQuery=function(t){return t===void 0&&(t={}),new dP(this._iid,this.url,this.channelType,t)},n.prototype.createMutedUserListQuery=function(t){return t===void 0&&(t={}),new pP(this._iid,this.url,this.channelType,t)},n.prototype.createBannedUserListQuery=function(t){return t===void 0&&(t={}),new gP(this._iid,this.url,this.channelType,t)},n.prototype.createPreviousMessageListQuery=function(t){return t===void 0&&(t={}),new hP(this._iid,this.url,this.channelType,t)},n.prototype.createPinnedMessageListQuery=function(t){return t===void 0&&(t={}),new bx(this._iid,this.url,this.channelType,t)},n.prototype.addOperators=function(t){return A(this,void 0,void 0,function(){var r,i;return M(this,function(a){switch(a.label){case 0:return ke(nn("string",t)).throw(J.invalidParameters),r=Y.of(this._iid).requestQueue,i=new EP({channelUrl:this.url,channelType:this.channelType,operatorUserIds:t}),[4,r.send(i)];case 1:return a.sent(),[2]}})})},n.prototype.removeOperators=function(t){return A(this,void 0,void 0,function(){var r,i;return M(this,function(a){switch(a.label){case 0:return ke(nn("string",t)).throw(J.invalidParameters),r=Y.of(this._iid).requestQueue,i=new yP({channelUrl:this.url,channelType:this.channelType,operatorUserIds:t}),[4,r.send(i)];case 1:return a.sent(),[2]}})})},n.prototype.getMyMutedInfo=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,d,f,p;return M(this,function(m){switch(m.label){case 0:return t=Y.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new CP({channelUrl:this.url,channelType:this.channelType,userId:r.userId}),[4,i.send(a)];case 1:return s=m.sent(),o=s.as(bP),l=o.isMuted,u=o.startAt,d=o.endAt,f=o.remainingDuration,p=o.description,[2,{isMuted:l,startAt:u,endAt:d,remainingDuration:f,description:p}]}})})},n.prototype.getMetaData=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l;return M(this,function(u){switch(u.label){case 0:return ke(nn("string",t)).throw(J.invalidParameters),r=Y.of(this._iid).requestQueue,i=new ST({channelUrl:this.url,channelType:this.channelType,keys:t}),[4,r.send(i)];case 1:return a=u.sent(),s=a.as(TT),o=s.metadata,l=s.ts,this._upsertCachedMetaData(o,l),[2,o]}})})},n.prototype.getAllMetaData=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return M(this,function(l){switch(l.label){case 0:return t=Y.of(this._iid).requestQueue,r=new ST({channelUrl:this.url,channelType:this.channelType,keys:[]}),[4,t.send(r)];case 1:return i=l.sent(),a=i.as(TT),s=a.metadata,o=a.ts,this._updateCachedMetaData(s,o),[2,s]}})})},n.prototype.createMetaData=function(t){return A(this,void 0,void 0,function(){var r,i,a,s;return M(this,function(o){switch(o.label){case 0:return r=Y.of(this._iid).requestQueue,i=new SP({channelUrl:this.url,channelType:this.channelType,metadata:t}),[4,r.send(i)];case 1:return a=o.sent(),s=a.as(TP).metaData,this._upsertCachedMetaData(s,0),[2,s]}})})},n.prototype.updateMetaData=function(t,r){return r===void 0&&(r=!1),A(this,void 0,void 0,function(){var i,a,s,o,l,u;return M(this,function(d){switch(d.label){case 0:return i=Y.of(this._iid).requestQueue,a=new NP({channelUrl:this.url,channelType:this.channelType,metadata:t,upsert:r}),[4,i.send(a)];case 1:return s=d.sent(),o=s.as(IP),l=o.metadata,u=o.ts,this._upsertCachedMetaData(l,u),[2,l]}})})},n.prototype.deleteMetaData=function(t){return A(this,void 0,void 0,function(){var r,i,a,s;return M(this,function(o){switch(o.label){case 0:return ke(X("string",t)).throw(J.invalidParameters),r=Y.of(this._iid).requestQueue,i=new MP({channelUrl:this.url,channelType:this.channelType,key:t}),[4,r.send(i)];case 1:return a=o.sent(),s=a.as(AP).ts,this._removeFromCachedMetaData([t],s),[2]}})})},n.prototype.deleteAllMetaData=function(){return A(this,void 0,void 0,function(){var t,r,i,a;return M(this,function(s){switch(s.label){case 0:return t=Y.of(this._iid).requestQueue,r=new wP({channelUrl:this.url,channelType:this.channelType}),[4,t.send(r)];case 1:return i=s.sent(),a=i.as(RP).ts,this._removeFromCachedMetaData(At([],ft(this._cachedMetaData.keys()),!1),a),[2]}})})},n.prototype.getMetaCounters=function(t){return A(this,void 0,void 0,function(){var r,i,a;return M(this,function(s){switch(s.label){case 0:return ke(nn("string",t)).throw(J.invalidParameters),r=Y.of(this._iid).requestQueue,i=new NT({channelUrl:this.url,channelType:this.channelType,keys:t}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(IT).metaCounter]}})})},n.prototype.getAllMetaCounters=function(){return A(this,void 0,void 0,function(){var t,r,i;return M(this,function(a){switch(a.label){case 0:return t=Y.of(this._iid).requestQueue,r=new NT({channelUrl:this.url,channelType:this.channelType,keys:[]}),[4,t.send(r)];case 1:return i=a.sent(),[2,i.as(IT).metaCounter]}})})},n.prototype.createMetaCounters=function(t){return A(this,void 0,void 0,function(){var r,i,a;return M(this,function(s){switch(s.label){case 0:return r=Y.of(this._iid).requestQueue,i=new OP({channelUrl:this.url,channelType:this.channelType,metaCounter:t}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(DP).metaCounter]}})})},n.prototype.updateMetaCounters=function(t,r){return r===void 0&&(r=!1),A(this,void 0,void 0,function(){var i,a,s;return M(this,function(o){switch(o.label){case 0:return i=Y.of(this._iid).requestQueue,a=new k_({channelUrl:this.url,channelType:this.channelType,metaCounter:t,upsert:r}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(P_).metaCounter]}})})},n.prototype.increaseMetaCounters=function(t){return A(this,void 0,void 0,function(){var r,i,a;return M(this,function(s){switch(s.label){case 0:return r=Y.of(this._iid).requestQueue,i=new k_({channelUrl:this.url,channelType:this.channelType,metaCounter:t,upsert:!1,mode:"increase"}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(P_).metaCounter]}})})},n.prototype.decreaseMetaCounters=function(t){return A(this,void 0,void 0,function(){var r,i,a;return M(this,function(s){switch(s.label){case 0:return r=Y.of(this._iid).requestQueue,i=new k_({channelUrl:this.url,channelType:this.channelType,metaCounter:t,upsert:!1,mode:"decrease"}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(P_).metaCounter]}})})},n.prototype.deleteMetaCounter=function(t){return A(this,void 0,void 0,function(){var r,i;return M(this,function(a){switch(a.label){case 0:return ke(X("string",t)).throw(J.invalidParameters),r=Y.of(this._iid).requestQueue,i=new LP({channelUrl:this.url,channelType:this.channelType,key:t}),[4,r.send(i)];case 1:return a.sent(),[2]}})})},n.prototype.deleteAllMetaCounters=function(){return A(this,void 0,void 0,function(){var t,r;return M(this,function(i){switch(i.label){case 0:return t=Y.of(this._iid).requestQueue,r=new UP({channelUrl:this.url,channelType:this.channelType}),[4,t.send(r)];case 1:return i.sent(),[2]}})})},n.prototype.muteUser=function(t,r,i){return A(this,void 0,void 0,function(){return M(this,function(a){return[2,this.muteUserWithUserId(t.userId,r,i)]})})},n.prototype.muteUserWithUserId=function(t,r,i){return A(this,void 0,void 0,function(){var a,s;return M(this,function(o){switch(o.label){case 0:return ke(X("string",t)&&X("number",r,!0)&&X("string",i,!0)).throw(J.invalidParameters),a=Y.of(this._iid).requestQueue,s=new kP({channelUrl:this.url,channelType:this.channelType,userId:t,seconds:r,description:i}),[4,a.send(s)];case 1:return o.sent(),[2]}})})},n.prototype.unmuteUser=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){return[2,this.unmuteUserWithUserId(t.userId)]})})},n.prototype.unmuteUserWithUserId=function(t){return A(this,void 0,void 0,function(){var r,i;return M(this,function(a){switch(a.label){case 0:return ke(X("string",t)).throw(J.invalidParameters),r=Y.of(this._iid).requestQueue,i=new PP({channelUrl:this.url,channelType:this.channelType,userId:t}),[4,r.send(i)];case 1:return a.sent(),[2]}})})},n.prototype.banUser=function(t,r,i){return A(this,void 0,void 0,function(){return M(this,function(a){return[2,this.banUserWithUserId(t.userId,r,i)]})})},n.prototype.banUserWithUserId=function(t,r,i){return A(this,void 0,void 0,function(){var a,s;return M(this,function(o){switch(o.label){case 0:return ke(X("string",t)&&X("number",r,!0)&&X("string",i,!0)).throw(J.invalidParameters),a=Y.of(this._iid).requestQueue,s=new xP({channelUrl:this.url,channelType:this.channelType,userId:t,seconds:r,description:i}),[4,a.send(s)];case 1:return o.sent(),[2]}})})},n.prototype.unbanUser=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){return[2,this.unbanUserWithUserId(t.userId)]})})},n.prototype.unbanUserWithUserId=function(t){return A(this,void 0,void 0,function(){var r,i;return M(this,function(a){switch(a.label){case 0:return ke(X("string",t)).throw(J.invalidParameters),r=Y.of(this._iid).requestQueue,i=new FP({channelUrl:this.url,channelType:this.channelType,userId:t}),[4,r.send(i)];case 1:return a.sent(),[2]}})})},n.prototype.freeze=function(){return A(this,void 0,void 0,function(){var t,r;return M(this,function(i){switch(i.label){case 0:return t=Y.of(this._iid).requestQueue,r=new MT({channelUrl:this.url,channelType:this.channelType,freezing:!0}),[4,t.send(r)];case 1:return i.sent(),this.isFrozen=!0,[2]}})})},n.prototype.unfreeze=function(){return A(this,void 0,void 0,function(){var t,r;return M(this,function(i){switch(i.label){case 0:return t=Y.of(this._iid).requestQueue,r=new MT({channelUrl:this.url,channelType:this.channelType,freezing:!1}),[4,t.send(r)];case 1:return i.sent(),this.isFrozen=!1,[2]}})})},n.prototype.getMessagesByMessageId=function(t,r){return A(this,void 0,void 0,function(){var i;return M(this,function(a){switch(a.label){case 0:return i=W(W({},Dh),r),ke(X("number",t)&&mT(i)).throw(J.invalidParameters),[4,xr.of(this._iid).getMessagesByMessageId(this.url,this.channelType,t,i)];case 1:return[2,a.sent()]}})})},n.prototype.getMessagesByTimestamp=function(t,r){return A(this,void 0,void 0,function(){var i;return M(this,function(a){switch(a.label){case 0:return i=W(W({},Dh),r),ke(X("number",t)&&mT(i)).throw(J.invalidParameters),[4,xr.of(this._iid).getMessagesByTimestamp(this.url,this.channelType,t,i)];case 1:return[2,a.sent()]}})})},n.prototype.getMessageChangeLogsSinceTimestamp=function(t,r){return r===void 0&&(r={}),A(this,void 0,void 0,function(){var i;return M(this,function(a){switch(a.label){case 0:return i=W(W({},Og),r),ke(X("number",t)&&_T(i)).throw(J.invalidParameters),[4,xr.of(this._iid).getMessageChangelogs(this.url,this.channelType,t,i)];case 1:return[2,a.sent()]}})})},n.prototype.getMessageChangeLogsSinceToken=function(t,r){return r===void 0&&(r={}),A(this,void 0,void 0,function(){var i;return M(this,function(a){switch(a.label){case 0:return i=W(W({},Og),r),ke(X("string",t)&&_T(i)).throw(J.invalidParameters),[4,xr.of(this._iid).getMessageChangelogs(this.url,this.channelType,t,i)];case 1:return[2,a.sent()]}})})},n.prototype._createPendingSendableMessagePayload=function(t,r,i){var a,s=Y.of(this._iid).sessionManager;return Xe(_t({channel_url:this.url,channel_type:this.channelType,msg_id:0,parent_message_id:t.parentMessageId,data:t.data,custom_type:t.customType,mention_type:t.mentionType,sorted_metaarray:t.metaArrays?t.metaArrays.map(function(o){return qr.payloadify(o)}):null,apple_critical_alert_options:t.appleCriticalAlertOptions?ts.payloadify(t.appleCriticalAlertOptions):null,created_at:i,user:s.currentUser?Zc.payloadify(s.currentUser):null,req_id:r,request_state:yn.PENDING,mentioned_user_ids:t.mentionedUserIds,mentioned_users:(a=t.mentionedUsers)===null||a===void 0?void 0:a.map(function(o){return dn.payloadify(o)})}))},n.prototype._createPendingUserMessage=function(t,r,i){var a,s,o={};if(t.translationTargetLanguages)try{for(var l=je(t.translationTargetLanguages),u=l.next();!u.done;u=l.next())o[u.value]=""}catch(p){a={error:p}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}var d=Xe(W(W({},this._createPendingSendableMessagePayload(t,r,i)),{type:ir.USER,message:t.message,translations:o,extended_message_payload:t.extendedMessagePayload})),f=new vi(this._iid,d);return f.messageParams=t,f},n.prototype._createPendingScheduledUserMessage=function(t,r,i){var a=this._createPendingUserMessage(t,r,i);return a.scheduledInfo={scheduledMessageId:0,scheduledAt:t.scheduledAt,scheduledMessageParams:t},a},n.prototype._createPendingFileMessage=function(t,r,i){var a,s,o,l,u,d,f,p=Xe(W(W({},this._createPendingSendableMessagePayload(t,r,i)),{type:ir.FILE,url:t.fileUrl,file:{name:(a=t.fileName)!==null&&a!==void 0?a:(s=t.file)===null||s===void 0?void 0:s.name,size:(o=t.fileSize)!==null&&o!==void 0?o:(l=t.file)===null||l===void 0?void 0:l.size,type:(u=t.mimeType)!==null&&u!==void 0?u:(d=t.file)===null||d===void 0?void 0:d.type,data:t.data},thumbnails:(f=t._thumbnails)===null||f===void 0?void 0:f.map(function(E){return ko.payloadify(E)}),message:t.message})),m=new Ir(this._iid,p);return m.messageParams=t,m},n.prototype._createPendingMultipleFilesMessage=function(t,r,i){var a=Xe(W(W({},this._createPendingSendableMessagePayload(t,r,i)),{type:ir.FILE,file:t.fileInfoList.length>0?{name:t.fileInfoList[0].fileName,size:t.fileInfoList[0].fileSize,type:t.fileInfoList[0].mimeType,data:t.data}:void 0,message:t.message})),s=new Ua(this._iid,a);return s.messageParams=t,s},n.prototype._validateFailedFileMessageHasFile=function(t,r){var i;return!!t.url||jr(r)||jr((i=t.messageParams)===null||i===void 0?void 0:i.file)},n.prototype._createPendingScheduledFileMessage=function(t,r,i){var a=this._createPendingFileMessage(t,r,i);return a.scheduledInfo={scheduledMessageId:0,scheduledAt:t.scheduledAt,scheduledMessageParams:t},a},n.prototype._markMessageAsFailed=function(t,r,i){i===void 0&&(i=!1),t.errorCode=r.code,r.code===at.REQUEST_CANCELED||r.code===at.FILE_UPLOAD_CANCEL_FAILED?t.sendingStatus=yn.CANCELED:i||(t.sendingStatus=yn.FAILED)},n.prototype.sendUserMessage=function(t){var r=W(W({},Mw),t);return ke(ww(r)).throw(J.invalidParameters),this._sendUserMessage(r)},n.prototype._sendUserMessage=function(t,r,i){var a=this;r===void 0&&(r=di.SEND);var s=Y.of(this._iid),o=s.dispatcher,l=s.requestQueue,u=i??this._generateRequestId(),d=Date.now(),f=new ua;return Yi(2).then(function(){var p=a._createPendingUserMessage(t,u,d);o.dispatch(new Xn({messages:[p],source:r===di.RESEND?ve.LOCAL_MESSAGE_RESEND_STARTED:ve.EVENT_MESSAGE_SENT_PENDING})),ut(function(){return A(a,void 0,void 0,function(){return M(this,function(E){return[2,f._trigger(p)]})})});var m=new VP(W(W({},t),{channelUrl:a.url,channelType:a.channelType,reqId:u}));l.send(m).then(function(E){var g=E.as(Vy).message;o.dispatch(new Xn({messages:[g],source:ve.EVENT_MESSAGE_SENT_SUCCESS})),ut(function(){return A(a,void 0,void 0,function(){return M(this,function(y){return[2,f._trigger(g)]})})})}).catch(function(E){if(Ai(E))throw E;Yi(2).then(function(){var g=a._createPendingUserMessage(t,u,d),y=Y.of(a._iid).cacheContext,S=y.localCacheEnabled&&y.localCacheConfig.enableAutoResend&&mp(E.code);a._markMessageAsFailed(g,E,S),o.dispatch(new Xn({messages:[g],source:g.sendingStatus===yn.PENDING?ve.REQUEST_RESEND_MESSAGE:ve.EVENT_MESSAGE_SENT_FAILED})),ut(function(){return A(a,void 0,void 0,function(){return M(this,function(C){return[2,f._triggerFailed(E,g)]})})})})})}),f},n.prototype._autoResendUserMessage=function(t){return ke(t instanceof vi&&!!t.messageParams).throw(J.invalidParameters),this._sendUserMessage(t.messageParams,di.SEND,t.reqId)},n.prototype.resendUserMessage=function(t){var r;return A(this,void 0,void 0,function(){var i,a;return M(this,function(s){return ke(t instanceof vi&&!t.scheduledInfo).throw(J.invalidParameters),i=new Gi,a=(r=t.messageParams)!==null&&r!==void 0?r:Dg(t),this._sendUserMessage(a,di.RESEND,t.reqId).onFailed(function(o){return i.reject(o)}).onSucceeded(function(o){return i.resolve(o)}),[2,i.promise]})})},n.prototype.updateUserMessage=function(t,r){return A(this,void 0,void 0,function(){var i,a,s,o;return M(this,function(l){switch(l.label){case 0:return i=W(W({},Ow),r),ke(X("number",t)&&Dw(i)).throw(J.invalidParameters),a=Y.of(this._iid).requestQueue,s=new AT(W({channelType:this.channelType,channelUrl:this.url,messageId:t,metaArrayParams:i.metaArrays?{array:i.metaArrays,mode:"add",upsert:!0}:void 0},i)),[4,a.send(s)];case 1:return o=l.sent(),[2,o.as(Op).message]}})})},n.prototype.copyUserMessage=function(t,r){var i,a,s;return A(this,void 0,void 0,function(){var o,l;return M(this,function(u){return ke(t instanceof n&&r instanceof vi&&r.sendingStatus===yn.SUCCEEDED&&this.url===r.channelUrl&&!r.scheduledInfo).throw(J.invalidParameters),ke(!r.poll).throw(J.notSupportedError),o=new Gi,l=(i=r.messageParams)!==null&&i!==void 0?i:_t(W(W({},r),{mentionType:r.mentionType,mentionedUserIds:(a=r.mentionedUserIds)!==null&&a!==void 0?a:(s=r.mentionedUsers)===null||s===void 0?void 0:s.map(function(d){return d.userId}),translationTargetLanguages:Object.keys(r.translations),pushNotificationDeliveryOption:Ns.DEFAULT,parentMessageId:null,isReplyToChannel:!1,isPinnedMessage:!1})),t._sendUserMessage(l).onSucceeded(function(d){o.resolve(d)}).onFailed(function(d){return o.reject(d)}),[2,o.promise]})})},n.prototype.translateUserMessage=function(t,r){return A(this,void 0,void 0,function(){var i,a,s;return M(this,function(o){switch(o.label){case 0:return ke(t instanceof vi&&t.messageId>0&&nn("string",r)).throw(J.invalidParameters),i=Y.of(this._iid).requestQueue,a=new $P({channelType:this.channelType,channelUrl:this.url,messageId:t.messageId,translationTargetLanguages:r}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(WP).message]}})})},n.prototype._createScheduledUserMessage=function(t,r){var i=this,a=Y.of(this._iid).requestQueue,s=Date.now(),o=this._generateRequestId();Yi(2).then(function(){var u=i._createPendingScheduledUserMessage(t,o,s);ut(function(){return A(i,void 0,void 0,function(){return M(this,function(d){return[2,r._trigger(u)]})})})});var l=new QP(W({reqId:o,channelType:this.channelType,channelUrl:this.url},t));a.send(l).then(function(u){var d=u.as(Bw).message;ut(function(){return A(i,void 0,void 0,function(){return M(this,function(f){return[2,r._trigger(d)]})})})}).catch(function(u){if(Ai(u))throw u;Yi(2).then(function(){var d=i._createPendingScheduledUserMessage(t,o,s);i._markMessageAsFailed(d,u),ut(function(){return A(i,void 0,void 0,function(){return M(this,function(f){return[2,r._triggerFailed(u,d)]})})})})})},n.prototype.sendFileMessage=function(t){var r=W(W({},CT),t);return ke(bT(r)).throw(J.invalidParameters),this._sendFileMessage(r)},n.prototype.sendMultipleFilesMessage=function(t){var r,i=W(W({},_x),t),a=Y.of(this._iid);ke(function(o,l){return l===void 0&&(l=tk),lm(o)&&X("string",o.message,!0)&&Array.isArray(o.fileInfoList)&&o.fileInfoList.length>=2&&o.fileInfoList.length<=l&&o.fileInfoList.every(function(u){return gx(u)})}(i,(r=a.appInfo)===null||r===void 0?void 0:r.multipleFilesMessageFileCountLimit)).throw(J.invalidParameters);var s=!!t.fileInfoList.find(function(o){var l=a.appInfo.uploadSizeLimit;return o.file instanceof Blob&&o.file.size>l||o.fileSize>l});return ke(!s).throw(J.fileSizeLimitExceededError),this._sendMultipleFilesMessage(i)},n.prototype._sendFileMessage=function(t,r,i){var a=this;r===void 0&&(r=di.SEND);var s=Y.of(this._iid).dispatcher,o=xr.of(this._iid).fileMessageQueue,l=i??this._generateRequestId(),u=Date.now(),d=new ua;return Yi(2).then(function(){var f=a._createPendingFileMessage(t,l,u);s.dispatch(new Xn({messages:[f],source:r===di.RESEND?ve.LOCAL_MESSAGE_RESEND_STARTED:ve.EVENT_MESSAGE_SENT_PENDING})),ut(function(){return A(a,void 0,void 0,function(){return M(this,function(p){return[2,d._trigger(f)]})})}),o.request(a,l,t).then(function(p){s.dispatch(new Xn({messages:[p],source:ve.EVENT_MESSAGE_SENT_SUCCESS})),ut(function(){return A(a,void 0,void 0,function(){return M(this,function(m){return[2,d._trigger(p)]})})})}).catch(function(p){if(Ai(p))throw p;Yi(2).then(function(){var m=a._createPendingFileMessage(t,l,u),E=Y.of(a._iid).cacheContext,g=E.localCacheEnabled&&E.localCacheConfig.enableAutoResend&&mp(p.code);a._markMessageAsFailed(m,p,g),s.dispatch(new Xn({messages:[m],source:m.sendingStatus===yn.PENDING?ve.REQUEST_RESEND_MESSAGE:p.code===at.FILE_UPLOAD_CANCEL_FAILED?ve.LOCAL_MESSAGE_CANCELED:ve.EVENT_MESSAGE_SENT_FAILED})),ut(function(){return A(a,void 0,void 0,function(){return M(this,function(y){return[2,d._triggerFailed(p,m)]})})})})})}),d},n.prototype._autoResendFileMessage=function(t){ke(t instanceof Ir&&!!t.messageParams).throw(J.invalidParameters);var r=Y.of(this._iid).logger;return r.debug("autoResendFileMessage pending",t),this._sendFileMessage(t.messageParams,di.SEND,t.reqId).onFailed(function(i){r.debug("autoResendFileMessage failed",i)}).onSucceeded(function(i){r.debug("autoResendFileMessage success",i)})},n.prototype._sendMultipleFilesMessage=function(t,r,i){var a=this,s=Y.of(this._iid).dispatcher,o=xr.of(this._iid).fileMessageQueue,l=i??this._generateRequestId(),u=Date.now(),d=new np;return Yi(2).then(function(){var f=a._createPendingMultipleFilesMessage(t,l,u);s.dispatch(new Xn({messages:[f],source:r===di.RESEND?ve.LOCAL_MESSAGE_RESEND_STARTED:ve.EVENT_MESSAGE_SENT_PENDING})),ut(function(){return A(a,void 0,void 0,function(){return M(this,function(p){return[2,d._trigger(f)]})})}),o.request(a,l,t,{requestHandler:d,isCopy:r===di.COPY}).then(function(p){s.dispatch(new Xn({messages:[p],source:ve.EVENT_MESSAGE_SENT_SUCCESS})),ut(function(){return A(a,void 0,void 0,function(){return M(this,function(m){return[2,d._trigger(p)]})})})}).catch(function(p){if(Ai(p))throw p;Yi(2).then(function(){var m=a._createPendingMultipleFilesMessage(t,l,u);a._markMessageAsFailed(m,p),s.dispatch(new Xn({messages:[m],source:ve.EVENT_MESSAGE_SENT_FAILED})),ut(function(){return A(a,void 0,void 0,function(){return M(this,function(E){return[2,d._triggerFailed(p,m)]})})})})})}),d},n.prototype._createScheduledFileMessage=function(t,r,i,a){var s=this,o=Y.of(this._iid).requestQueue,l=new YP(W(W({reqId:i,channelType:this.channelType,channelUrl:this.url},t),{fileUrl:t.fileUrl,requireAuth:t.requireAuth}));o.send(l).then(function(u){var d=u.as(XP).message;ut(function(){return A(s,void 0,void 0,function(){return M(this,function(f){return[2,r._trigger(d)]})})})}).catch(function(u){if(Ai(u))throw u;Yi(2).then(function(){var d=s._createPendingScheduledFileMessage(t,i,a);s._markMessageAsFailed(d,u),ut(function(){return A(s,void 0,void 0,function(){return M(this,function(f){return[2,r._triggerFailed(u,d)]})})})})})},n.prototype.sendFileMessages=function(t){var r,i;ke(t.every(function(u){return bT(W(W({},CT),u))})).throw(J.invalidParameters);var a=new ua;try{for(var s=je(t),o=s.next();!o.done;o=s.next()){var l=o.value;this.sendFileMessage(l).onPending(function(u){return a._trigger(u)}).onFailed(function(u,d){return a._triggerFailed(u,d)}).onSucceeded(function(u){return a._trigger(u)})}}catch(u){r={error:u}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return a},n.prototype.resendFileMessage=function(t,r){return A(this,void 0,void 0,function(){var i,a,s;return M(this,function(o){return i=this._validateFailedFileMessageHasFile(t,r),ke(t instanceof Ir&&i&&!t.scheduledInfo).throw(J.invalidParameters),a=new Gi,s=Lg(t,r),this._sendFileMessage(s,di.RESEND,t.reqId).onFailed(function(l){return a.reject(l)}).onSucceeded(function(l){return a.resolve(l)}),[2,a.promise]})})},n.prototype.resendMessage=function(t,r){var i,a;if(ke(t instanceof dr&&!t.scheduledInfo&&t.isResendable).throw(J.invalidParameters),t.isUserMessage()){var s=(i=t.messageParams)!==null&&i!==void 0?i:Dg(t);return this._sendUserMessage(s,di.RESEND,t.reqId)}if(t.isFileMessage()){var o=this._validateFailedFileMessageHasFile(t,r);return ke(o).throw(J.invalidParameters),s=(a=t.messageParams)!==null&&a!==void 0?a:Lg(t,r),this._sendFileMessage(s,di.RESEND,t.reqId)}if(t.isMultipleFilesMessage())throw J.channelTypeNotSupportedError},n.prototype.updateFileMessage=function(t,r){return A(this,void 0,void 0,function(){var i,a,s,o;return M(this,function(l){switch(l.label){case 0:return i=W(W({},lP),r),ke(X("number",t)&&function(u){return Hy(u)}(i)).throw(J.invalidParameters),a=Y.of(this._iid).requestQueue,s=new wT(W({channelType:this.channelType,channelUrl:this.url,messageId:t,metaArrayParams:i.metaArrays?{array:i.metaArrays,mode:"add",upsert:!0}:void 0},i)),[4,a.send(s)];case 1:return o=l.sent(),[2,o.as(Dp).message]}})})},n.prototype.uploadFile=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u;return M(this,function(d){switch(d.label){case 0:return r=Y.of(this._iid).requestQueue,i=Ro(),(a=new Mp({file:t.file,channelUrl:this.url,thumbnailSizes:t.thumbnailSizes,requestId:i})).uploadProgressHandler=t.progressHandler,t.uploadStartedHandler&&t.uploadStartedHandler(i),[4,r.send(a)];case 1:return s=d.sent(),o=s.as(Ap),l=o.url,u=o.thumbnails,[2,{requestId:i,url:l,thumbnails:u}]}})})},n.prototype.cancelUploadingFileMessage=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){return ke(X("string",t)).throw(J.invalidParameters),xr.of(this._iid).fileMessageQueue.cancel(this,t),[2,!0]})})},n.prototype.copyFileMessage=function(t,r){var i,a,s;return A(this,void 0,void 0,function(){var o,l;return M(this,function(u){return ke(t instanceof n&&r instanceof Ir&&r.sendingStatus===yn.SUCCEEDED&&this.url===r.channelUrl&&!r.scheduledInfo).throw(J.invalidParameters),o=new Gi,l=_t(W(W({},r),{fileUrl:r.url,fileName:r.name,fileSize:r.size,mimeType:r.type,mentionType:r.mentionType,mentionedUserIds:(i=r.mentionedUserIds)!==null&&i!==void 0?i:(a=r.mentionedUsers)===null||a===void 0?void 0:a.map(function(d){return d.userId}),pushNotificationDeliveryOption:Ns.DEFAULT,parentMessageId:null,isReplyToChannel:!1,thumbnailSizes:(s=r.thumbnails)===null||s===void 0?void 0:s.map(function(d){return{maxWidth:d.width,maxHeight:d.height}}),requireAuth:r.requireAuth,isPinnedMessage:!1})),t._sendFileMessage(l).onSucceeded(function(d){return o.resolve(d)}).onFailed(function(d){return o.reject(d)}),[2,o.promise]})})},n.prototype.copyMessage=function(t,r){ke(t instanceof n&&r instanceof dr&&r.sendingStatus===yn.SUCCEEDED&&this.url===r.channelUrl&&!r.scheduledInfo).throw(J.invalidParameters);var i=r,a=t;if(i.isUserMessage()){ke(!i.poll).throw(J.notSupportedError);var s=Aw(i);return a._sendUserMessage(s)}if(i.isFileMessage())return s=Rw(i),a._sendFileMessage(s);if(r.isMultipleFilesMessage())throw J.channelTypeNotSupportedError},n.prototype.deleteMessage=function(t){return A(this,void 0,void 0,function(){var r,i;return M(this,function(a){switch(a.label){case 0:return ke(t instanceof Ni).throw(J.invalidParameters),t.messageId>0?(r=Y.of(this._iid).requestQueue,i=new OA({channelType:this.channelType,channelUrl:this.url,messageId:t.messageId,messageToken:t instanceof dr?t._messageToken:void 0}),[4,r.send(i)]):[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},n.prototype.addReaction=function(t,r){return A(this,void 0,void 0,function(){var i,a,s;return M(this,function(o){switch(o.label){case 0:return ke(t instanceof Ni&&t.messageId>0&&X("string",r)).throw(J.invalidParameters),i=Y.of(this._iid).requestQueue,a=new zP({channelType:this.channelType,channelUrl:this.url,messageId:t.messageId,reactionKey:r}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(jP).reactionEvent]}})})},n.prototype.deleteReaction=function(t,r){return A(this,void 0,void 0,function(){var i,a,s;return M(this,function(o){switch(o.label){case 0:return ke(t instanceof Ni&&t.messageId>0&&X("string",r)).throw(J.invalidParameters),i=Y.of(this._iid).requestQueue,a=new qP({channelType:this.channelType,channelUrl:this.url,messageId:t.messageId,reactionKey:r}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(KP).reactionEvent]}})})},n.prototype._updateUserMessageMetaArray=function(t,r,i,a){return A(this,void 0,void 0,function(){var s,o,l,u,d,f;return M(this,function(p){switch(p.label){case 0:return s=Y.of(this._iid),o=s.dispatcher,l=s.requestQueue,u=new AT({channelType:this.channelType,channelUrl:this.url,messageId:t,metaArrayParams:{array:r,mode:i,upsert:a}}),[4,l.send(u)];case 1:return d=p.sent(),f=d.as(Op).message,o.dispatch(new Xn({messages:[f],source:ve.EVENT_MESSAGE_UPDATED})),[2,f]}})})},n.prototype._updateFileMessageMetaArray=function(t,r,i,a){return A(this,void 0,void 0,function(){var s,o,l,u,d,f;return M(this,function(p){switch(p.label){case 0:return s=Y.of(this._iid),o=s.dispatcher,l=s.requestQueue,u=new wT({channelType:this.channelType,channelUrl:this.url,messageId:t,metaArrayParams:{array:r,mode:i,upsert:a}}),[4,l.send(u)];case 1:return d=p.sent(),f=d.as(Dp).message,o.dispatch(new Xn({messages:[f],source:ve.EVENT_MESSAGE_UPDATED})),[2,f]}})})},n.prototype.createMessageMetaArrayKeys=function(t,r){return A(this,void 0,void 0,function(){var i;return M(this,function(a){return ke(t instanceof Ni&&t.messageId>0&&nn("string",r)).throw(J.invalidParameters),i=r.map(function(s){return new qr({key:s})}),t instanceof Ir?[2,this._updateFileMessageMetaArray(t.messageId,i,"add",!0)]:[2,this._updateUserMessageMetaArray(t.messageId,i,"add",!0)]})})},n.prototype.deleteMessageMetaArrayKeys=function(t,r){return A(this,void 0,void 0,function(){var i;return M(this,function(a){return ke(t instanceof Ni&&t.messageId>0&&nn("string",r)).throw(J.invalidParameters),i=r.map(function(s){return new qr({key:s})}),t instanceof Ir?[2,this._updateFileMessageMetaArray(t.messageId,i,"remove",!0)]:[2,this._updateUserMessageMetaArray(t.messageId,i,"remove",!0)]})})},n.prototype.addMessageMetaArrayValues=function(t,r){return A(this,void 0,void 0,function(){return M(this,function(i){return ke(t instanceof Ni&&t.messageId>0&&r.every(function(a){return a instanceof qr})).throw(J.invalidParameters),t instanceof Ir?[2,this._updateFileMessageMetaArray(t.messageId,r,"add",!0)]:[2,this._updateUserMessageMetaArray(t.messageId,r,"add",!0)]})})},n.prototype.removeMessageMetaArrayValues=function(t,r){return A(this,void 0,void 0,function(){return M(this,function(i){return ke(t instanceof Ni&&t.messageId>0&&r.every(function(a){return a instanceof qr})).throw(J.invalidParameters),t instanceof Ir?[2,this._updateFileMessageMetaArray(t.messageId,r,"remove",!0)]:[2,this._updateUserMessageMetaArray(t.messageId,r,"remove",!0)]})})},n.prototype.report=function(t,r){return A(this,void 0,void 0,function(){var i,a,s,o;return M(this,function(l){switch(l.label){case 0:return ke((tn(Lh,t)||t instanceof zc)&&X("string",r)).throw(J.invalidParameters),i=Y.of(this._iid),a=i.sdkState,s=i.requestQueue,o=new HP({channelUrl:this.url,channelType:this.channelType,userId:a.userId,category:t,description:r}),[4,s.send(o)];case 1:return l.sent(),[2]}})})},n.prototype.reportUser=function(t,r,i){return A(this,void 0,void 0,function(){var a,s,o,l;return M(this,function(u){switch(u.label){case 0:return ke(t instanceof dn&&(tn(Lh,r)||r instanceof zc)&&X("string",i)).throw(J.invalidParameters),a=Y.of(this._iid),s=a.sdkState,o=a.requestQueue,l=new BP({channelUrl:this.url,channelType:this.channelType,userId:s.userId,offendingUserId:t.userId,category:r,description:i}),[4,o.send(l)];case 1:return u.sent(),[2]}})})},n.prototype.reportMessage=function(t,r,i){return A(this,void 0,void 0,function(){var a,s,o,l;return M(this,function(u){switch(u.label){case 0:return ke(t instanceof dr&&(tn(Lh,r)||r instanceof zc)&&X("string",i)).throw(J.invalidParameters),a=Y.of(this._iid),s=a.sdkState,o=a.requestQueue,l=new GP({channelUrl:this.url,channelType:this.channelType,userId:s.userId,offendingUserId:t.sender.userId,messageId:t.messageId,category:r,description:i,messageToken:t._messageToken}),[4,o.send(l)];case 1:return u.sent(),[2]}})})},n.prototype.updatePoll=function(t,r){return A(this,void 0,void 0,function(){var i,a,s;return M(this,function(o){switch(o.label){case 0:return ke(X("number",t)&&function(l){return X("string",l.title,!0)&&pw(l.data)&&X("boolean",l.allowUserSuggestion,!0)&&X("boolean",l.allowMultipleVotes,!0)&&X("number",l.closeAt,!0)}(r)).throw(J.invalidParameters),i=Y.of(this._iid).requestQueue,a=new ZP(W({pollId:t},r)),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(JP).poll]}})})},n.prototype.deletePoll=function(t){return A(this,void 0,void 0,function(){var r,i,a;return M(this,function(s){switch(s.label){case 0:return r=X("number",t),ke(r).throw(J.invalidParameters),i=Y.of(this._iid).requestQueue,a=new ex({pollId:t}),[4,i.send(a)];case 1:return s.sent(),[2]}})})},n.prototype.closePoll=function(t){return A(this,void 0,void 0,function(){var r,i,a,s;return M(this,function(o){switch(o.label){case 0:return r=X("number",t),ke(r).throw(J.invalidParameters),i=Y.of(this._iid).requestQueue,a=new tx({pollId:t}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(nx).poll]}})})},n.prototype.addPollOption=function(t,r){return A(this,void 0,void 0,function(){var i,a,s,o;return M(this,function(l){switch(l.label){case 0:return i=X("number",t)&&X("string",r)&&r.trim()!=="",ke(i).throw(J.invalidParameters),a=Y.of(this._iid).requestQueue,s=new rx({channelUrl:this.url,channelType:this.channelType,pollId:t,optionText:r}),[4,a.send(s)];case 1:return o=l.sent(),[2,o.as(ix).poll]}})})},n.prototype.updatePollOption=function(t,r,i){return A(this,void 0,void 0,function(){var a,s,o,l;return M(this,function(u){switch(u.label){case 0:return a=X("number",t)&&X("number",r)&&X("string",i)&&i.trim()!=="",ke(a).throw(J.invalidParameters),s=Y.of(this._iid).requestQueue,o=new ax({pollId:t,pollOptionId:r,optionText:i}),[4,s.send(o)];case 1:return l=u.sent(),[2,l.as(sx).poll]}})})},n.prototype.deletePollOption=function(t,r){return A(this,void 0,void 0,function(){var i,a,s;return M(this,function(o){switch(o.label){case 0:return i=X("number",t)&&X("number",r),ke(i).throw(J.invalidParameters),a=Y.of(this._iid).requestQueue,s=new ox({pollId:t,pollOptionId:r}),[4,a.send(s)];case 1:return o.sent(),[2]}})})},n.prototype.votePoll=function(t,r){return A(this,void 0,void 0,function(){var i,a,s,o,l,u,d;return M(this,function(f){switch(f.label){case 0:return i=X("number",t)&&nn("number",r),ke(i).throw(J.invalidParameters),a=Y.of(this._iid),s=a.requestQueue,o=a.dispatcher,l=new lx({reqId:this._generateRequestId(),channelUrl:this.url,channelType:this.channelType,pollId:t,pollOptionIds:r}),[4,s.send(l)];case 1:return u=f.sent(),d=u.as(zy).event,o.dispatch(new am({event:d,source:ve.EVENT_POLL_VOTED})),[2,d]}})})},n.prototype.getPollChangeLogsSinceTimestamp=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){switch(r.label){case 0:return ke(X("number",t)).throw(J.invalidParameters),[4,Ip.of(this._iid).getPollChangeLogs(this.url,this.channelType,t)];case 1:return[2,r.sent()]}})})},n.prototype.getPollChangeLogsSinceToken=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){switch(r.label){case 0:return ke(X("string",t,!0)),[4,Ip.of(this._iid).getPollChangeLogs(this.url,this.channelType,t)];case 1:return[2,r.sent()]}})})},n.prototype.createPollListQuery=function(t){return t===void 0&&(t=10),new Ew(this._iid,{channelUrl:this.url,channelType:this.channelType,limit:t})},n.prototype.createPollVoterListQuery=function(t,r,i){return i===void 0&&(i=20),new yw(this._iid,{channelUrl:this.url,channelType:this.channelType,pollId:t,pollOptionId:r,limit:i})},n.prototype.pinMessage=function(t){return A(this,void 0,void 0,function(){var r,i;return M(this,function(a){switch(a.label){case 0:return ke(X("number",t)&&t>0).throw(J.invalidParameters),r=Y.of(this._iid).requestQueue,i=new Sx({channelType:this.channelType,channelUrl:this.url,messageId:t}),[4,r.send(i)];case 1:return a.sent(),[2]}})})},n.prototype.unpinMessage=function(t){return A(this,void 0,void 0,function(){var r,i;return M(this,function(a){switch(a.label){case 0:return ke(X("number",t)&&t>0).throw(J.invalidParameters),r=Y.of(this._iid).requestQueue,i=new Tx({channelType:this.channelType,channelUrl:this.url,messageId:t}),[4,r.send(i)];case 1:return a.sent(),[2]}})})},n}(Ur),qw=function(e){function n(t){t===void 0&&(t={});var r=e.call(this)||this;return Object.keys(t).forEach(function(i){r.hasOwnProperty(i)&&(r[i]=t[i])}),r}return B(n,e),n}(function(){this.onConnected=jt,this.onReconnectStarted=jt,this.onReconnectSucceeded=jt,this.onReconnectFailed=jt,this.onDisconnected=jt}),RT=function(e){function n(t){t===void 0&&(t={});var r=e.call(this)||this;return Object.keys(t).forEach(function(i){r.hasOwnProperty(i)&&(r[i]=t[i])}),r}return B(n,e),n}(function(){this.onSessionExpired=jt,this.onSessionTokenRequired=function(e){return e(null)},this.onSessionError=jt,this.onSessionRefreshed=jt,this.onSessionClosed=jt}),Ix=function(e){function n(t){t===void 0&&(t={});var r=e.call(this)||this;return Object.keys(t).forEach(function(i){r.hasOwnProperty(i)&&(r[i]=t[i])}),r}return B(n,e),n}(function(){this.onFriendsDiscovered=jt,this.onTotalUnreadMessageCountChanged=jt,this.onTotalUnreadMessageCountUpdated=jt}),Mx=function(e){function n(t){var r=t.limit,i=t.token,a=t.userIdsFilter,s=t.metaDataKeyFilter,o=t.metaDataValuesFilter,l=t.nicknameStartsWithFilter,u=e.call(this)||this;return u.method=we.GET,u.path=In,u.params=Xe({limit:r,token:i,user_ids:a,metadatakey:s,metadatavalues_in:o,nickname_startswith:l}),u}return B(n,e),n}(Re),Ax=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.users=r.users.map(function(a){return new dn(t,a)}),i.next=r.next,i}return B(n,e),n}(He),wx=function(e){function n(t,r){var i,a,s,o=this;return(o=e.call(this,t,r)||this).userIdsFilter=null,o.metaDataKeyFilter=null,o.metaDataValuesFilter=null,o.nicknameStartsWithFilter=null,o.userIdsFilter=(i=r.userIdsFilter)!==null&&i!==void 0?i:null,o.metaDataKeyFilter=(a=r.metaDataKeyFilter)!==null&&a!==void 0?a:null,o.metaDataValuesFilter=(s=r.metaDataValuesFilter)!==null&&s!==void 0?s:null,o.nicknameStartsWithFilter=r.nicknameStartsWithFilter||null,o}return B(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&nn("string",this.userIdsFilter,!0)&&X("string",this.metaDataKeyFilter,!0)&&nn("string",this.metaDataValuesFilter,!0)&&X("string",this.nicknameStartsWithFilter,!0)},n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return M(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=Y.of(this._iid).requestQueue,r=new Mx(_t(W(W({},this),{token:this._token}))),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),a=i.as(Ax),s=a.users,o=a.next,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw J.queryInProgress;case 4:return[3,6];case 5:throw J.invalidParameters;case 6:return[2]}})})},n}(Uo),Rx=function(e){function n(t){var r=t.userId,i=t.limit,a=t.token,s=t.userIdsFilter,o=e.call(this)||this;return o.method=we.GET,o.path="".concat(In,"/").concat(r,"/block"),o.params=Xe({limit:i,token:a,user_ids:s}),o}return B(n,e),n}(Re),Ox=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.users=r.users.map(function(a){return new dn(t,a)}),i.next=r.next,i}return B(n,e),n}(He),Dx=function(e){function n(t,r){var i,a=this;return(a=e.call(this,t,r)||this).userIdsFilter=null,a.userIdsFilter=(i=r.userIdsFilter)!==null&&i!==void 0?i:null,a}return B(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&nn("string",this.userIdsFilter,!0)},n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u;return M(this,function(d){switch(d.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=Y.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new Rx(_t(W(W({},this),{userId:r.userId,token:this._token}))),[4,i.send(a)]):[3,2]:[3,5];case 1:return s=d.sent(),o=s.as(Ox),l=o.users,u=o.next,this._token=u,this._hasNext=!!u,this._isLoading=!1,[2,l];case 2:return[2,[]];case 3:throw J.queryInProgress;case 4:return[3,6];case 5:throw J.invalidParameters;case 6:return[2]}})})},n}(Uo),Lx=function(e){function n(t){var r=t.userId,i=t.limit,a=t.token,s=e.call(this)||this;return s.method=we.GET,s.path="".concat(In,"/").concat(encodeURIComponent(r),"/friends"),s.params={limit:i,token:a},s}return B(n,e),n}(Re),Ux=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.hasMore=r.has_more,i.users=r.users.map(function(a){return new dn(t,a)}),i.next=r.next,i}return B(n,e),n}(He),kx=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return B(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)},n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,d;return M(this,function(f){switch(f.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=Y.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new Lx(W(W({},this),{userId:r.userId,token:this._token})),[4,i.send(a)]):[3,2]:[3,5];case 1:return s=f.sent(),o=s.as(Ux),l=o.users,u=o.hasMore,d=o.next,this._token=d,this._hasNext=u,this._isLoading=!1,[2,l];case 2:return[2,[]];case 3:throw J.queryInProgress;case 4:return[3,6];case 5:throw J.invalidParameters;case 6:return[2]}})})},n}(Uo),Ov={},lf=function(){function e(n){var t=n.dbname,r=n.itemSizeLimit,i=r===void 0?1048576:r,a=n.cacheLimit,s=a===void 0?256:a,o=n.blockHashBase,l=o===void 0?2:o,u=n.blockHashMultiplier,d=u===void 0?10:u,f=n.blockHashConstant,p=f===void 0?11:f,m=n.transactionApplyDelay,E=m===void 0?200:m,g=n.disableLogger,y=g!==void 0&&g;return Ov[t]||(this.itemSizeLimit=i,this.cacheLimit=s,this.blockHashBase=l,this.blockHashMultiplier=d,this.blockHashConstant=p,this.transactionApplyDelay=E,this.disableLogger=y,Ov[t]=this),Ov[t]}return e.get=function(n){return Ov[n]},e}();(function(e){e[e.UNKNOWN_ERROR=6e7]="UNKNOWN_ERROR",e[e.STORE_NOT_DEFINED=61001e3]="STORE_NOT_DEFINED",e[e.STORE_NOT_AVAILABLE=61001001]="STORE_NOT_AVAILABLE",e[e.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING=61001002]="STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING",e[e.STORE_IS_FULL=61001003]="STORE_IS_FULL",e[e.STORE_NOT_INITIALIZED=61001004]="STORE_NOT_INITIALIZED",e[e.STORE_INVALID_KEY_TYPE=61002e3]="STORE_INVALID_KEY_TYPE",e[e.STORE_BROKEN_INTEGRITY=61002001]="STORE_BROKEN_INTEGRITY",e[e.STORE_BROKEN_BLOB=61002002]="STORE_BROKEN_BLOB",e[e.STORE_ENCRYPTION_INVALID=61002003]="STORE_ENCRYPTION_INVALID",e[e.STORE_ITEM_SIZE_LIMIT_EXCEEDED=61017e3]="STORE_ITEM_SIZE_LIMIT_EXCEEDED",e[e.STORE_READ_FAILED=61017001]="STORE_READ_FAILED",e[e.STORE_WRITE_FAILED=61017002]="STORE_WRITE_FAILED",e[e.DATABASE_SCHEMA_NOT_ON_UPGRADE=62002e3]="DATABASE_SCHEMA_NOT_ON_UPGRADE",e[e.COLLECTION_NOT_READY=63001e3]="COLLECTION_NOT_READY",e[e.COLLECTION_KEY_NOT_MATCH=63002e3]="COLLECTION_KEY_NOT_MATCH",e[e.COLLECTION_QUERY_NOT_VALID=63002001]="COLLECTION_QUERY_NOT_VALID",e[e.COLLECTION_KEY_NOT_FOUND=63004e3]="COLLECTION_KEY_NOT_FOUND",e[e.COLLECTION_KEY_NOT_GIVEN=63004001]="COLLECTION_KEY_NOT_GIVEN",e[e.COLLECTION_INSERT_DUPLICATE=63009e3]="COLLECTION_INSERT_DUPLICATE",e[e.COLLECTION_WRITE_FAILED=63017e3]="COLLECTION_WRITE_FAILED",e[e.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED=63017001]="COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED",e[e.INDEX_TABLE_IS_REQUIRED=65001e3]="INDEX_TABLE_IS_REQUIRED",e[e.INDEX_TYPE_NOT_MATCH=65002e3]="INDEX_TYPE_NOT_MATCH",e[e.COMPARE_TYPE_NOT_MATCH=69002001]="COMPARE_TYPE_NOT_MATCH",e[e.CIRCULAR_REFERENCE_FOUND=69002002]="CIRCULAR_REFERENCE_FOUND"})(nr||(nr={}));var yu,Un=function(e){function n(t){var r=t.code,i=r===void 0?nr.UNKNOWN_ERROR:r,a=t.message,s=a===void 0?"Unknown error occurred.":a,o=e.call(this,s)||this;return o.code=i,Object.setPrototypeOf(o,n.prototype),o}return B(n,e),Object.defineProperty(n,"storeNotDefined",{get:function(){return new n({code:nr.STORE_NOT_DEFINED,message:"Store is not defined. Specify the store on NestDB()"})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeNotAvailable",{get:function(){return new n({code:nr.STORE_NOT_AVAILABLE,message:"Store is not available. Check your environment settings."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeNotAvailableInPrivateBrowsing",{get:function(){return new n({code:nr.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING,message:"Store is not available because it is in private browsing."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeIsFull",{get:function(){return new n({code:nr.STORE_IS_FULL,message:"Store is full."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeNotInitialized",{get:function(){return new n({code:nr.STORE_NOT_INITIALIZED,message:"Store is not initialized."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeKeyTypeIsInvalid",{get:function(){return new n({code:nr.STORE_INVALID_KEY_TYPE,message:"Store key should be string type."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeBrokenIntegrity",{get:function(){return new n({code:nr.STORE_BROKEN_INTEGRITY,message:"Data should be in a store but it does not. Integrity is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeBrokenBlob",{get:function(){return new n({code:nr.STORE_BROKEN_BLOB,message:"Data should be in a store but it does not. Blob data is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeEncryptionInvalid",{get:function(){return new n({code:nr.STORE_ENCRYPTION_INVALID,message:"Encryption algorithm has changed. All the store should reset."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeItemSizeExceeded",{get:function(){return new n({code:nr.STORE_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that the store allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeReadFailed",{get:function(){return new n({code:nr.STORE_READ_FAILED,message:"Failed to read from store."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeWriteFailed",{get:function(){return new n({code:nr.STORE_WRITE_FAILED,message:"Failed to write to store."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"databaseSchemaNotOnUpgrade",{get:function(){return new n({code:nr.DATABASE_SCHEMA_NOT_ON_UPGRADE,message:"Committing schema is not allowed when upgrade is not running."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionNotReady",{get:function(){return new n({code:nr.COLLECTION_NOT_READY,message:"Collection is not ready due to an error during initialization."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionKeyNotMatch",{get:function(){return new n({code:nr.COLLECTION_KEY_NOT_MATCH,message:"keyName of collection could not change."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionQueryNotValid",{get:function(){return new n({code:nr.COLLECTION_QUERY_NOT_VALID,message:"Query parameter is not a valid format."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionInsertDuplicate",{get:function(){return new n({code:nr.COLLECTION_INSERT_DUPLICATE,message:"The key already exists."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionKeyNotFound",{get:function(){return new n({code:nr.COLLECTION_KEY_NOT_FOUND,message:"The key is not found."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionKeyNotGiven",{get:function(){return new n({code:nr.COLLECTION_KEY_NOT_GIVEN,message:"The item should contain [keyName] property."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionWriteFailed",{get:function(){return new n({code:nr.COLLECTION_WRITE_FAILED,message:"Failed to write an item."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionItemSizeExceeded",{get:function(){return new n({code:nr.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that a collection allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"indexTableIsRequired",{get:function(){return new n({code:nr.INDEX_TABLE_IS_REQUIRED,message:"Index table is required."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"indexTypesNotMatch",{get:function(){return new n({code:nr.INDEX_TYPE_NOT_MATCH,message:"Indexed column should have primitive type."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"compareTypesNotMatch",{get:function(){return new n({code:nr.COMPARE_TYPE_NOT_MATCH,message:"Values to compare have different types."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"circularReferenceFound",{get:function(){return new n({code:nr.CIRCULAR_REFERENCE_FOUND,message:"Cannot handle circular referenced object."})},enumerable:!1,configurable:!0}),n}(Error);(function(e){e.INIT="init",e.READY="ready",e.CLOSED="closed"})(yu||(yu={}));var OT,Xi=function(e,n){if(n===void 0&&(n=new WeakMap),typeof e=="object"&&e!==null){if(n.has(e))throw Un.circularReferenceFound;var t;return n.set(e,!0),Array.isArray(e)?t=e.map(function(r){return Xi(r,n)}):e instanceof RegExp||e instanceof Date?t=e:(t={},Object.keys(e).forEach(function(r){t[r]=Xi(e[r],n)})),n.delete(e),t}return e},No=function(e,n){if(n==null)return 1;if(e==null)return-1;if(typeof e!=typeof n)throw Un.compareTypesNotMatch;var t=0;switch(typeof e){case"boolean":case"number":t=e-n;break;case"string":t=e.localeCompare(n)}return t},DT=function(e,n){for(var t=0,r=0;r<e.length;r++)t=e.charCodeAt(r)+(t<<6)+(t<<16)-t;return(t>>>0)%n},Dv=function(e){return new Promise(function(n){setTimeout(function(){return n()},e)})},Su=function(e,n){if(!n)return!1;if(typeof e!="function"){for(var t in e)if(["/and","&&"].includes(t)){if(e[t].some(function(l){return!Su(l,n)}))return!1}else if(["/or","||"].includes(t)){if(e[t].every(function(l){return!Su(l,n)}))return!1}else if(t==="/where"){if(!(0,e[t])(n))return!1}else{var r=t;if(typeof e[r]=="object"){var i=e[r];for(var a in i)switch(a){case"/eq":case"=":if((s=n[r])!==(o=i[a]))return!1;break;case"/neq":case"!=":if((s=n[r])===(o=i[a]))return!1;break;case"/gt":case">":var s=n[r],o=i[a];if(!(No(s,o)>0))return!1;break;case"/gte":case">=":if(s=n[r],o=i[a],!(No(s,o)>=0))return!1;break;case"/lt":case"<":if(s=n[r],o=i[a],!(No(s,o)<0))return!1;break;case"/lte":case"<=":if(s=n[r],o=i[a],!(No(s,o)<=0))return!1;break;case"/in":if(s=n[r],!(o=i[a]).includes(s))return!1;break;case"/nin":if(s=n[r],(o=i[a]).includes(s))return!1;break;case"/contain":if(s=n[r],o=i[a],!s.includes(o))return!1;break;case"/regex":if(s=n[r],!(o=i[a]).test(s))return!1;break;case"/where":if(s=n[r],!(0,i[a])(s))return!1}}else if(typeof e[r]=="function"){if(!e[r](n[r]))return!1}else if(e[r]!==n[r])return!1}return!0}return e(n)},vh=function(){},LT=function(){return Promise.resolve()},Px=function(e){return e},UT=function(e,n){n()};(function(e){e[e.FORWARD=0]="FORWARD",e[e.BACKWARD=1]="BACKWARD"})(OT||(OT={}));var Tu,Ii,Fs,xx=function(){function e(n){var t=n.initialPrevValue,r=t===void 0?null:t,i=n.initialNextValue,a=i===void 0?null:i,s=n.iterator,o=n.map,l=o===void 0?Px:o,u=n.backward,d=u===void 0?LT:u,f=n.forward,p=f===void 0?LT:f,m=n.complete,E=m===void 0?vh:m;this._prevValue=r,this._nextValue=a,this._error=null,this._map=l,this._backward=d,this._forward=p,this._iterator=s,this._complete=E}return Object.defineProperty(e.prototype,"prevValue",{get:function(){return this._map(this._prevValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextValue",{get:function(){return this._map(this._nextValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPrevious",{get:function(){return!!this._prevValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNext",{get:function(){return!!this._nextValue},enumerable:!1,configurable:!0}),e.prototype.prev=function(){return A(this,void 0,void 0,function(){var n,t,r;return M(this,function(i){switch(i.label){case 0:if(!this.hasPrevious)return[3,6];i.label=1;case 1:return i.trys.push([1,3,,4]),n=this._prevValue,t=this,[4,this._backward()];case 2:return t._prevValue=i.sent()||null,this._nextValue=n,[3,4];case 3:return r=i.sent(),this._error=r,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,i.sent()];case 6:this._complete(),i.label=7;case 7:return[2]}})})},e.prototype.next=function(){return A(this,void 0,void 0,function(){var n,t,r;return M(this,function(i){switch(i.label){case 0:if(!this.hasNext)return[3,6];i.label=1;case 1:return i.trys.push([1,3,,4]),n=this._nextValue,t=this,[4,this._forward()];case 2:return t._nextValue=i.sent()||null,this._prevValue=n,[3,4];case 3:return r=i.sent(),this._error=r,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,i.sent()];case 6:this._complete(),i.label=7;case 7:return[2]}})})},e.prototype.stop=function(){this._prevValue=null,this._nextValue=null,this._complete()},e}(),kg=function(){function e(n){var t=n.condition,r=t===void 0?{}:t,i=n.backward,a=i!==void 0&&i,s=n.blockManager,o=n.indexer;this.condition=r,this.backward=a,this._blockManager=s,this._indexer=o}return e.prototype.findOptimizedStartPosition=function(){var n=this,t=["=","/eq",">",">=","/gt","/gte"],r=["=","/eq","<","<=","/lt","/lte"];if(this.backward){var i=this._indexer.origin.length-1;if(typeof this.condition!="function")for(m=0;m<this._indexer.fields.length;m++){var a=this._indexer.fields[m],s=1;if(a[0]==="-"&&(a=a.slice(1),s=-1),this.condition[a]){if(typeof this.condition[a]=="object"){var o=s>0?r:t;for(var l in this.condition[a])if(o.includes(l)){for(var u=i;u>=0;u--)if(s*No(this._indexer.origin[u].columnValues[m],this.condition[a][l])<=0){i=u;break}}}else for(u=i;u>=0;u--)if(s*No(this._indexer.origin[u].columnValues[m],this.condition[a])<=0){i=u;break}}}return Math.min(i+1,this._indexer.origin.length-1)}var d=0;if(typeof this.condition!="function")for(var f=function(E){var g=p._indexer.fields[E],y=1;if(g[0]==="-"&&(g=g.slice(1),y=-1),p.condition[g]){if(typeof p.condition[g]=="object")Object.keys(p.condition[g]).forEach(function(C){if((y>0?t:r).includes(C)){for(var T=d;T<n._indexer.origin.length;T++)if(y*No(n._indexer.origin[T].columnValues[E],n.condition[g][C])>=0){d=T;break}}});else for(var S=d;S<p._indexer.origin.length;S++)if(y*No(p._indexer.origin[S].columnValues[E],p.condition[g])>=0){d=S;break}}},p=this,m=0;m<this._indexer.fields.length;m++)f(m);return Math.max(d-1,0)},e.prototype.each=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u=this;return M(this,function(d){switch(d.label){case 0:if(t=this.findOptimizedStartPosition(),r=0,this.backward&&this._indexer.origin[t]&&(r=this._indexer.origin[t].keys.length-1),i=function(){if(u._indexer.origin[t]){if(!u._indexer.origin[t].keys[++r]){if(!u._indexer.origin[++t])return!1;r=0}return!0}return!1},a=function(){if(u._indexer.origin[t]){if(!u._indexer.origin[t].keys[--r]){if(!u._indexer.origin[--t])return!1;r=u._indexer.origin[t].keys.length-1}return!0}return!1},s=null,!this._indexer.origin[t])return[3,4];o=this.backward?a:i,d.label=1;case 1:return[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[r])];case 2:if((l=d.sent())&&Su(this.condition,l))return s=l,[3,4];d.label=3;case 3:if(o())return[3,1];d.label=4;case 4:return[4,new Promise(function(f){var p=new xx({initialNextValue:Xi(s),iterator:n,forward:function(){return A(u,void 0,void 0,function(){var m,E;return M(this,function(g){switch(g.label){case 0:m=this.backward?a:i,g.label=1;case 1:return m()?[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[r])]:[3,3];case 2:return(E=g.sent())&&Su(this.condition,E)?[2,Xi(E)]:[3,1];case 3:return[2,null]}})})},backward:function(){return A(u,void 0,void 0,function(){var m,E;return M(this,function(g){switch(g.label){case 0:m=this.backward?i:a,g.label=1;case 1:return m()?[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[r])]:[3,3];case 2:return(E=g.sent())&&Su(this.condition,E)?[2,Xi(E)]:[3,1];case 3:return[2,null]}})})},complete:f});n(p)})];case 5:return[2,d.sent()]}})})},e}(),Fx=function(){function e(n){var t=n.condition,r=t===void 0?{}:t,i=n.backward,a=i!==void 0&&i,s=n.mutex,o=n.blockManager,l=n.indexer;this._mutex=s,this._iterator=new kg({condition:r,backward:a,blockManager:o,indexer:l})}return e.prototype.fetch=function(n){return n===void 0&&(n={}),A(this,void 0,void 0,function(){var t,r,i,a,s=this;return M(this,function(o){switch(o.label){case 0:if(t=Math.max(n.offset||0,0),(r=typeof n.limit=="number"?n.limit:Number.MAX_SAFE_INTEGER)===0)return[2,[]];if(r<0)throw Un.collectionQueryNotValid;o.label=1;case 1:return o.trys.push([1,4,,5]),i=[],[4,this._mutex.lock()];case 2:return o.sent(),[4,this._iterator.each(function(l){return A(s,void 0,void 0,function(){return M(this,function(u){return l.error?l.stop():l.hasNext?t===0?(i.push(l.nextValue),0<r&&r<=i.length?l.stop():l.next()):(t--,l.next()):l.stop(),[2]})})})];case 3:return o.sent(),this._mutex.unlock(),[2,i];case 4:throw a=o.sent(),this._mutex.unlock(),a;case 5:return[2]}})})},e.prototype.count=function(){return A(this,void 0,void 0,function(){var n,t,r=this;return M(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),n=0,[4,this._mutex.lock()];case 1:return i.sent(),[4,this._iterator.each(function(a){return A(r,void 0,void 0,function(){return M(this,function(s){return a.error?a.stop():a.hasNext?(n++,a.next()):a.stop(),[2]})})})];case 2:return i.sent(),this._mutex.unlock(),[2,n];case 3:throw t=i.sent(),this._mutex.unlock(),t;case 4:return[2]}})})},e}(),jy=function(e){return"".concat("nest","@").concat(e)},Ru=function(e,n){return"".concat(jy(e),"/").concat(n)},x_=function(e,n){return"".concat(Ru(e,n),".metadata")},Pg=function(e,n){return"".concat(Ru(e,n),"/block.")},kT=function(e,n){return"".concat(Ru(e,n),"/blob.")},Hx=function(){function e(n){var t=n.dbname,r=n.collectionName,i=n.store;this.dbname=t,this.collectionName=r,this.store=i}return e.prototype.get=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,d;return M(this,function(f){switch(f.label){case 0:return[4,this.store.get(n)];case 1:return(t=f.sent())?(r=t.data,i=t.type,typeof fetch>"u"?[3,4]:[4,fetch(r)]):[3,5];case 2:return[4,f.sent().blob()];case 3:return[2,f.sent()];case 4:for(a=[],s=atob(r.split(",")[1]),o=0;o<s.length;o+=512){for(l=s.slice(o,o+512),u=new Array(l.length),d=0;d<l.length;d++)u[d]=l.charCodeAt(d);a.push(new Uint8Array(u))}return[2,new Blob(a,{type:i})];case 5:return[2,null]}})})},e.prototype.save=function(n,t){return t===void 0&&(t="".concat(Date.now())),A(this,void 0,void 0,function(){var r,i,a,s,o=this;return M(this,function(l){switch(l.label){case 0:return[4,new Promise(function(u){var d=function(p,m,E,g){return g===void 0&&(g=0),"".concat(kT(p,m)).concat(E,".").concat(g)}(o.dbname,o.collectionName,t),f=new FileReader;f.onload=function(){u({blobId:d,data:f.result,type:n.type})},f.readAsDataURL(n)})];case 1:return r=l.sent(),i=r.blobId,a=r.data,s=r.type,[4,this.store.set({key:i,value:{data:a,type:s}})];case 2:return l.sent(),[2,i]}})})},e.prototype.remove=function(n){return A(this,void 0,void 0,function(){return M(this,function(t){switch(t.label){case 0:return[4,this.store.remove(n)];case 1:return t.sent(),[2]}})})},e.prototype.clear=function(){return A(this,void 0,void 0,function(){var n,t,r=this;return M(this,function(i){switch(i.label){case 0:return n=kT(this.dbname,this.collectionName),[4,this.store.getAllKeys()];case 1:return t=i.sent(),[4,Promise.all(t.filter(function(a){return a.startsWith(n)}).map(function(a){return A(r,void 0,void 0,function(){return M(this,function(s){switch(s.label){case 0:return[4,this.store.remove(a)];case 1:return[2,s.sent()]}})})}))];case 2:return i.sent(),[2]}})})},e}();(function(e){e[e.COMMIT=0]="COMMIT",e[e.WRITE=1]="WRITE",e[e.ERROR=2]="ERROR"})(Tu||(Tu={})),function(e){e.PENDING="pending",e.PERSISTENT="persistent",e.VOLATILE="volatile"}(Ii||(Ii={})),function(e){e[e.NO_CACHE=0]="NO_CACHE",e[e.DEFAULT=1]="DEFAULT",e[e.PERSISTENT=2]="PERSISTENT"}(Fs||(Fs={}));var Uh,Ti,PT=[Ii.PENDING,Ii.VOLATILE],Lv={},Ji=function(){function e(n){var t=n.dbname,r=n.limit,i=r===void 0?256:r;return Lv[t]||(this.dbname=t,this._items=[],this._limit=i,Lv[t]=this),Lv[t]}return e.get=function(n){return Lv[n]},Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.find=function(n,t,r){return r===void 0&&(r=Fs.DEFAULT),A(this,void 0,void 0,function(){var i,a;return M(this,function(s){switch(s.label){case 0:return(i=this.get(t))?[3,2]:[4,n.get(t)];case 1:return(a=s.sent())&&(i={key:t,value:a,state:r===Fs.PERSISTENT?Ii.PERSISTENT:Ii.VOLATILE},this.put(i)),[3,3];case 2:r===Fs.PERSISTENT&&(i.state=Ii.PERSISTENT),s.label=3;case 3:return[2,i]}})})},e.prototype.get=function(n,t){t===void 0&&(t=Fs.DEFAULT);var r=this._items.map(function(a){return a.key}).indexOf(n);if(r>-1){var i=this._items[r];return t===Fs.PERSISTENT&&(i.state=Ii.PERSISTENT),t!==Fs.NO_CACHE&&this.put(i),i}return null},e.prototype.put=function(n){var t,r;if(this._limit>0){var i=this._items.map(function(f){return f.key}).indexOf(n.key);if(i>-1)PT.includes(this._items[i].state)&&PT.includes(n.state)?(this._items.splice(i,1),this._items.push(n)):(this._items[i].state=n.state,this._items[i].value=n.value);else{this._items.push(n);var a=this._items.filter(function(f){return f.state===Ii.VOLATILE}),s=a.length-this._limit;if(s>0){var o=[];try{for(var l=je(this._items),u=l.next();!u.done;u=l.next()){var d=u.value;d.state===Ii.VOLATILE&&s>0?s--:o.push(d)}}catch(f){t={error:f}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}this._items=o}}}},e.prototype.remove=function(n){var t=this._items.map(function(r){return r.key}).indexOf(n);t>-1&&this._items.splice(t,1)},e.prototype.clearByCondition=function(n){this._items=this._items.filter(function(t){return!n(t)})},e.prototype.clearForDatabase=function(n){this.clearByCondition(function(t){return t.key.startsWith(jy(n))})},e.prototype.clear=function(n){n===void 0&&(n=!1),this._items=n?[]:this._items.filter(function(t){return t.state!==Ii.VOLATILE})},e}(),Bx=function(){function e(n){var t=n.dbname,r=n.collectionName,i=n.store;this._requests=[],this._onCommit=new Map,this._onWrite=new Map,this._onError=new Map,this.dbname=t,this.collectionName=r,this.metadataKey=function(a,s){return"".concat(Ru(a,s),"/trans.metadata")}(t,r),this.recordsetKey=function(a,s){return"".concat(Ru(a,s),"/trans.recordset")}(t,r),this._store=i}return Object.defineProperty(e.prototype,"generation",{get:function(){return this._metadata?this._metadata.generation:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requestCount",{get:function(){return this._requests.length},enumerable:!1,configurable:!0}),e.prototype._getReducedRecordset=function(n){return n===void 0&&(n=[]),A(this,void 0,void 0,function(){var t;return M(this,function(r){switch(r.label){case 0:return[4,this._store.get(this.recordsetKey)];case 1:return(t=r.sent()||[]).push.apply(t,At([],ft(n),!1)),[2,this._reduceRecordSet(t)]}})})},e.prototype._reduceRecordSet=function(n){for(var t=[],r={},i=n.length-1;i>=0;i--){for(var a=n[i],s=[],o=a.requests.length-1;o>=0;o--){var l=a.requests[o],u=l.data;r[u.key]||(s.unshift(l),r[u.key]=!0)}s.length>0&&(a.requests=s,t.unshift(a))}return t},e.prototype._applyRecord=function(n,t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u,d,f;return M(this,function(p){switch(p.label){case 0:r=Ji.get(this.dbname),i=t.generation,a=t.requests,s=null,p.label=1;case 1:return p.trys.push([1,3,,4]),[4,this._store.setMany(a.map(function(m){return W(W({},m.data),{generation:i})}))];case 2:for(o=p.sent(),l=0;l<a.length;l++)o[l]instanceof Error&&(s||(s=o[l]),u=a[l].data,r.put(W(W({},u),{state:Ii.PERSISTENT})));return[3,4];case 3:return d=p.sent(),s=d,[3,4];case 4:return s?[3,6]:(f=n.filter(function(m){return m.generation!==i}),[4,this._store.set({key:this.recordsetKey,value:f})]);case 5:return p.sent(),this._onWrite.forEach(function(m){m(a.map(function(E){return E.data}))}),[3,7];case 6:this._onError.forEach(function(m){s&&m(s)}),p.label=7;case 7:return[2]}})})},e.prototype.init=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a,s,o,l;return M(this,function(u){switch(u.label){case 0:return n=this,[4,this._store.get(this.metadataKey)];case 1:return n._metadata=u.sent()||{generation:1},[4,this._getReducedRecordset()];case 2:t=u.sent(),u.label=3;case 3:u.trys.push([3,8,9,10]),r=je(t),i=r.next(),u.label=4;case 4:return i.done?[3,7]:(a=i.value,[4,this._applyRecord(t,a)]);case 5:u.sent(),u.label=6;case 6:return i=r.next(),[3,4];case 7:return[3,10];case 8:return s=u.sent(),o={error:s},[3,10];case 9:try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(o)throw o.error}return[7];case 10:return[2]}})})},e.prototype.on=function(n,t,r){switch(n){case Tu.COMMIT:this._onCommit.set(t,r);break;case Tu.WRITE:this._onWrite.set(t,r);break;case Tu.ERROR:this._onError.set(t,r)}},e.prototype.requestWrite=function(n,t){this._requests.push({data:n,options:t}),Ji.get(this.dbname).put(W({state:Ii.PENDING},n))},e.prototype.requestMultipleWrite=function(n,t){var r,i,a=Ji.get(this.dbname);try{for(var s=je(n),o=s.next();!o.done;o=s.next()){var l=o.value;this._requests.push({data:l,options:t}),a.put(W({state:Ii.PENDING},l))}}catch(u){r={error:u}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},e.prototype.clear=function(){return A(this,void 0,void 0,function(){return M(this,function(n){return Ji.get(this.dbname).clearByCondition(function(t){return t.state===Ii.PENDING}),this._requests=[],[2]})})},e.prototype.commit=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a,s,o,l,u,d,f,p,m=this;return M(this,function(E){switch(E.label){case 0:if(!((n=this._requests).length>0))return[3,4];for(t=[],r={},l=n.length-1;l>=0;l--)i=n[l],d=i.data,r[d.key]||(r[d.key]=!0,t.unshift(i));return a={generation:this.generation,requests:t},[4,this._getReducedRecordset([a])];case 1:return s=E.sent(),[4,this._store.set({key:this.recordsetKey,value:s})];case 2:return E.sent(),this._metadata.generation++,[4,this._store.set({key:this.metadataKey,value:this._metadata})];case 3:for(E.sent(),o=Ji.get(this.dbname),l=0;l<t.length;l++)u=t[l],d=u.data,f=u.options,o.put(W(W({},d),{state:f&&f.persistent?Ii.PERSISTENT:Ii.VOLATILE}));this._requests=[],this._onCommit.forEach(function(g){g(n.map(function(y){return y.data}))}),p=lf.get(this.dbname),setTimeout(function(){try{m._applyRecord(s,a)}catch(g){m._onError.forEach(function(y){return y(g)})}},p.transactionApplyDelay),E.label=4;case 4:return[2]}})})},e}(),rp=function(){function e(n){var t=n.blockId,r=n.keyName,i=n.items,a=i===void 0?[]:i,s=n.limit;this.blockId=t,this.keyName=r,this.limit=s,this._items=At([],ft(a),!1)}return e.createFromCacheItem=function(n){return n?new e(n.value):null},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this._items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.serialize=function(){return{blockId:this.blockId,keyName:this.keyName,limit:this.limit,items:this._items}},e.prototype.getItemByKey=function(n){var t=this,r=this._items.find(function(i){var a=i[t.keyName];return n===a});return r??null},e.prototype.has=function(n){var t=this;return this._items.map(function(r){return r[t.keyName]}).includes(n)},e.prototype.add=function(n){var t=this,r=this._items.map(function(i){return i[t.keyName]}).indexOf(n[this.keyName]);return r<0?this._items.length<this.limit&&(this._items.push(n),!0):(this._items[r]=n,!0)},e.prototype.remove=function(n){for(var t=0;t<this._items.length;t++)if(this._items[t][this.keyName]===n)return this._items.splice(t,1),!0;return!1},e.prototype.clear=function(){this._items=[]},e}(),Gx=function(){function e(n){var t=n.dbname,r=n.collectionName,i=n.metadata,a=n.hashFunction,s=a===void 0?DT:a,o=n.transaction,l=n.store;this.dbname=t,this.collectionName=r,this.hashFunction=s,this.metadata=i,this._transaction=o,this._store=l}return Object.defineProperty(e.prototype,"keyName",{get:function(){return this.metadata.keyName},enumerable:!1,configurable:!0}),e.prototype.createBlockId=function(n,t){return t===void 0&&(t=this.metadata.blockLevel),r=this.dbname,i=this.collectionName,a=t,s="".concat(function(o,l,u){var d=u.base*Math.pow(u.multiplier,l)+u.constant;return(u.hashFunction||DT)(o,d)}(n,t,{hashFunction:this.hashFunction,base:this.metadata.blockHashBase,multiplier:this.metadata.blockHashMultiplier,constant:this.metadata.blockHashConstant})),"".concat(Pg(r,i)).concat(a,".").concat(s);var r,i,a,s},e.prototype._findBlock=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s;return M(this,function(o){switch(o.label){case 0:t=Ji.get(this.dbname),r=this.metadata.blockLevel,o.label=1;case 1:return r>0?(i=this.createBlockId(n,r),[4,t.find(this._store,i)]):[3,4];case 2:if((a=o.sent())&&(s=rp.createFromCacheItem(a),s==null?void 0:s.getItemByKey(n)))return[2,s];o.label=3;case 3:return r--,[3,1];case 4:return[2,null]}})})},e.prototype.getFromBlock=function(n){return A(this,void 0,void 0,function(){var t;return M(this,function(r){switch(r.label){case 0:return[4,this._findBlock(n)];case 1:return[2,(t=r.sent())?t.getItemByKey(n):null]}})})},e.prototype.putToBlock=function(n,t){return A(this,void 0,void 0,function(){var r,i,a,s,o;return M(this,function(l){switch(l.label){case 0:return r=lf.get(this.dbname),i=this.createBlockId(n),a=Math.floor(this._store.itemSizeLimit/r.itemSizeLimit),[4,Ji.get(this.dbname).find(this._store,i)];case 1:return s=l.sent(),(o=s?rp.createFromCacheItem(s):new rp({blockId:i,keyName:this.keyName,items:[],limit:a}))!=null&&o.add(t)?(this._transaction.requestWrite({key:o.blockId,value:o.serialize()}),[2,!0]):[2,!1]}})})},e.prototype.removeFromBlock=function(n){return A(this,void 0,void 0,function(){var t;return M(this,function(r){switch(r.label){case 0:return[4,this._findBlock(n)];case 1:return(t=r.sent())&&t.remove(n)?(this._transaction.requestWrite({key:t.blockId,value:t.serialize()}),[2,!0]):[2,!1]}})})},e.prototype.clearAllBlocks=function(){return A(this,void 0,void 0,function(){var n,t,r;return M(this,function(i){switch(i.label){case 0:return n=Pg(this.dbname,this.collectionName),[4,this._store.getAllKeys()];case 1:return t=i.sent(),r=t.filter(function(a){return a.startsWith(n)}),[4,this._store.removeMany(r)];case 2:return i.sent(),[4,this._transaction.clear()];case 3:return i.sent(),Ji.get(this.dbname).clearByCondition(function(a){return a.key.startsWith(n)}),[2]}})})},e}(),il=function(){function e(n){var t=n.dbname,r=n.collectionName,i=n.keyName,a=n.fields,s=n.transaction,o=n.store,l=this;this._origin=[],this._table=[];var u=function(d,f,p){return"".concat(Ru(d,f),"/index.").concat(p)}(t,r,a.join(">"));this.dbname=t,this.collectionName=r,this.keyName=i,this.fields=a,this.indexerKey=u,this._store=o,this._transaction=s,this._transaction.on(Tu.COMMIT,this.indexerKey,function(){return l.commit()}),this._transaction.on(Tu.ERROR,this.indexerKey,function(){return l.abort()})}return e.createKey=function(n){return n.join(">")},e.parseKey=function(n){return n.split(">")},e.prototype._addItem=function(n){var t=n[this.keyName],r=this.getColumnValues(n),i=ft(this.indexOf(r),2),a=i[0];return i[1]?!this._table[a].keys.includes(t)&&(this._table[a].keys.push(t),!0):(this._table.splice(a,0,{columnValues:r,keys:[t]}),!0)},e.prototype._removeItem=function(n){var t=n[this.keyName],r=this.getColumnValues(n),i=ft(this.indexOf(r),2),a=i[0];if(i[1]){var s=this._table[a].keys.indexOf(t);if(s>-1)return this._table[a].keys.splice(s,1),this._table[a].keys.length===0&&this._table.splice(a,1),!0}return!1},Object.defineProperty(e.prototype,"origin",{get:function(){return this._origin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"table",{get:function(){return this._table},enumerable:!1,configurable:!0}),e.prototype.getColumnValues=function(n){var t,r,i,a,s=[];try{for(var o=je(this.fields),l=o.next();!l.done;l=o.next()){var u=l.value;if(u[0]==="-"&&(u=u.slice(1)),i=n[u],a=void 0,a=typeof i,i!==null&&a!=="undefined"&&a!=="boolean"&&a!=="number"&&a!=="string")throw Un.indexTypesNotMatch;s.push(n[u])}}catch(d){t={error:d}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return s},e.prototype.diff=function(n,t){for(var r in this.fields){var i=this.fields[r][0]==="-"?-1:1,a=No(n[r],t[r]);if(a!==0)return i*a}return 0},e.prototype.indexOf=function(n){if(this._table.length>0){for(var t=0,r=this._table.length-1;t<=r;){var i=Math.floor((t+r)/2),a=this.diff(n,this._table[i].columnValues);if(a>0)t=i+1;else{if(!(a<0))return[i,!0];r=i-1}}return[t,!1]}return[0,!1]},e.prototype.ensure=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a,s,o,l,u,d,f,p,m,E,g,y,S;return M(this,function(C){switch(C.label){case 0:return[4,(n=Ji.get(this.dbname)).find(this._store,this.indexerKey,Fs.PERSISTENT)];case 1:return(t=C.sent())?[3,11]:(r=Pg(this.dbname,this.collectionName),[4,this._store.getAllKeys()]);case 2:i=C.sent(),C.label=3;case 3:C.trys.push([3,8,9,10]),a=je(i),s=a.next(),C.label=4;case 4:return s.done?[3,7]:(o=s.value).startsWith(r)?[4,n.find(this._store,o,Fs.NO_CACHE)]:[3,6];case 5:if(l=C.sent(),u=rp.createFromCacheItem(l))try{for(y=void 0,d=je(u.items),f=d.next();!f.done;f=d.next())p=f.value,this._addItem(p)}catch(T){y={error:T}}finally{try{f&&!f.done&&(S=d.return)&&S.call(d)}finally{if(y)throw y.error}}C.label=6;case 6:return s=a.next(),[3,4];case 7:return[3,10];case 8:return m=C.sent(),E={error:m},[3,10];case 9:try{s&&!s.done&&(g=a.return)&&g.call(a)}finally{if(E)throw E.error}return[7];case 10:return this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[3,12];case 11:this._origin=t.value,this._table=Xi(this._origin),C.label=12;case 12:return[2]}})})},e.prototype.drop=function(){return A(this,void 0,void 0,function(){return M(this,function(n){switch(n.label){case 0:return Ji.get(this.dbname).remove(this.indexerKey),[4,this._store.remove(this.indexerKey)];case 1:return n.sent(),[2]}})})},e.prototype.addItem=function(n){return A(this,void 0,void 0,function(){return M(this,function(t){return this._addItem(n)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]})})},e.prototype.removeItem=function(n){return A(this,void 0,void 0,function(){return M(this,function(t){return this._removeItem(n)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]})})},e.prototype.clear=function(){return A(this,void 0,void 0,function(){return M(this,function(n){return this._table=[],this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]})})},e.prototype.commit=function(){this._origin=this._table,this._table=Xi(this._origin)},e.prototype.abort=function(){this._table=Xi(this._origin)},e}(),Up=function(){return typeof document<"u"&&typeof navigator<"u"&&navigator.product!=="ReactNative"},xT=function(){var e=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),(n==="x"?t:3&t|8).toString(16)})};(function(e){e[e.PROCESSING=0]="PROCESSING",e[e.DONE=1]="DONE"})(Uh||(Uh={})),function(e){e.NEWNODE="newnode",e.REMOVENODE="removenode",e.CLAIM_HOST="claimhost",e.SYNC_HOST="synchost",e.REQUEST_LOCK="requestlock",e.ACQUIRE_LOCK="acquirelock",e.RELEASE_LOCK="releaselock"}(Ti||(Ti={}));var _s,F_={},qy=function(){function e(n,t){t===void 0&&(t={});var r=this;return this._state=Uh.PROCESSING,this._queue=[],this._activationQueue=[],F_[n]&&!t.forceCreate||(this.nodeId=xT(),this.key=n,Up()&&(t.startAsInvisible?this.registerNode():document.visibilityState==="visible"?this.claimHost():this.registerNode(),document.addEventListener("visibilitychange",function(){document.visibilityState==="visible"&&r.claimHost()}),window.addEventListener("message",function(i){var a,s,o=i.data;if(o!=null&&o.isNestDbMessage){var l=o.nodeId,u=o.requestId,d=o.key,f=o.op,p=o.data;if(l!==r.nodeId&&d===r.key)switch(f){case Ti.NEWNODE:r._sendSync();break;case Ti.CLAIM_HOST:r._sendSync(),r._hostId=l;break;case Ti.SYNC_HOST:if(!r.isInSync){r._activationTimeout&&clearTimeout(r._activationTimeout);var m=p,E=m.currentItemRequestId,g=m.queue,y=function(I){var L=r._queue.findIndex(function(D){return D.requestId===I.requestId});L<0&&r._requestLock({isNestDbMessage:!0,nodeId:I.nodeId,requestId:I.requestId,key:r.key,op:Ti.REQUEST_LOCK,ts:I.ts})};try{for(var S=je(g),C=S.next();!C.done;C=S.next())y(C.value)}catch(I){a={error:I}}finally{try{C&&!C.done&&(s=S.return)&&s.call(S)}finally{if(a)throw a.error}}r._currentItem=r._queue.find(function(I){return I.requestId===E}),r._completeSync()}break;case Ti.REMOVENODE:r._queue=r._queue.filter(function(I){return I.nodeId!==o.nodeId}),r._currentItem&&r._currentItem.nodeId===o.nodeId&&(r._currentItem=void 0,r._acquire(r._queue[0]));break;case Ti.REQUEST_LOCK:r._requestLock(o);break;case Ti.ACQUIRE_LOCK:var T=r._queue.find(function(I){return I.requestId===u});r._acquire(T);break;case Ti.RELEASE_LOCK:r._release(u)}}}),window.addEventListener("beforeunload",function(){r._send(Ti.REMOVENODE)})),F_[n]=this),F_[n]}return Object.defineProperty(e.prototype,"locked",{get:function(){return!!this._currentItem},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isHost",{get:function(){return this._hostId===this.nodeId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInSync",{get:function(){return this._state==Uh.DONE},enumerable:!1,configurable:!0}),e.prototype._send=function(n,t){var r;t===void 0&&(t={});var i={isNestDbMessage:!0,nodeId:this.nodeId,requestId:(r=t==null?void 0:t.requestId)!==null&&r!==void 0?r:xT(),key:this.key,op:n,data:t.data,ts:Date.now()};return Up()&&window.postMessage(i,"*"),i},e.prototype._acquire=function(n){n?(this._currentItem=n,this._currentItem.onAcquired&&this._currentItem.onAcquired(n.requestId)):this._currentItem=void 0},e.prototype._release=function(n){if(this._currentItem&&this._currentItem.requestId===n){var t=this._currentItem;this._currentItem=void 0,t.nodeId===this.nodeId&&this._send(Ti.RELEASE_LOCK,{requestId:t.requestId});var r=this._queue.findIndex(function(i){return i.requestId===n});r>-1&&this._queue.splice(r,1),t.onReleased&&t.onReleased(n)}},e.prototype._requestLock=function(n){var t=this;return new Promise(function(r){for(var i={nodeId:n.nodeId,requestId:n.requestId,ts:n.ts,onAcquired:function(o){t.isHost&&t._send(Ti.ACQUIRE_LOCK,{requestId:o}),r()},onReleased:function(){t._acquire(t._queue[0])}},a=!1,s=0;s<t._queue.length;s++)if(t._queue[s].ts>i.ts){t._queue.splice(s,0,i),a=!0;break}a||t._queue.push(i),t._currentItem||t._acquire(t._queue[0])})},e.prototype._sendSync=function(){var n;this.isHost&&this._send(Ti.SYNC_HOST,{data:{currentItemRequestId:(n=this._currentItem)===null||n===void 0?void 0:n.requestId,queue:this._queue.map(function(t){return{nodeId:t.nodeId,requestId:t.requestId,ts:t.ts}})}})},e.prototype._waitUntilSyncCompleted=function(){return A(this,void 0,void 0,function(){var n=this;return M(this,function(t){return this.isHost&&!this.isInSync?[2,new Promise(function(r){n._activationQueue.push(r)})]:[2]})})},e.prototype._waitSync=function(){var n=this;this.isInSync||(this._activationTimeout=setTimeout(function(){n._completeSync()},8))},e.prototype._completeSync=function(){this.isInSync||(this._state=Uh.DONE,this._activationQueue.forEach(function(n){return n()}),this._activationQueue=[])},e.prototype.registerNode=function(){this._send(Ti.NEWNODE),this._waitSync()},e.prototype.claimHost=function(){this._hostId=this.nodeId,this._send(Ti.CLAIM_HOST),this._waitSync()},e.prototype.lock=function(){return A(this,void 0,void 0,function(){var n;return M(this,function(t){switch(t.label){case 0:return[4,this._waitUntilSyncCompleted()];case 1:return t.sent(),n=this._send(Ti.REQUEST_LOCK),[4,this._requestLock(n)];case 2:return t.sent(),[2]}})})},e.prototype.unlock=function(){var n;!((n=this._currentItem)===null||n===void 0)&&n.requestId&&this._release(this._currentItem.requestId)},e}(),H_=function(){function e(n){var t=n.dbname,r=n.collectionName,i=n.keyName,a=n.keyHash,s=n.indexes,o=n.store,l=this;this._state=yu.INIT,this._indexers=[],this.dbname=t,this.name=r,this.keyName=i,this.indexes=At([[i]],ft(s.filter(function(u){return il.createKey(u)!==l.keyName})),!1),this._keyHash=a,this._store=o,this._mutex=new qy(function(u,d){return"".concat(Ru(u,d),".lock")}(t,r)),this._blobContainer=new Hx({dbname:t,collectionName:r,store:o}),this._transaction=new Bx({dbname:t,collectionName:r,store:o})}return e.metadataOf=function(n,t,r){return A(this,void 0,void 0,function(){var i;return M(this,function(a){switch(a.label){case 0:return i=x_(n,t),[4,r.get(i)];case 1:return[2,a.sent()]}})})},Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isReady",{get:function(){return this._state===yu.READY},enumerable:!1,configurable:!0}),e.prototype.init=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a,s,o,l,u,d,f,p,m,E,g=this;return M(this,function(y){switch(y.label){case 0:return[4,this._mutex.lock()];case 1:y.sent(),y.label=2;case 2:return y.trys.push([2,9,,10]),n=lf.get(this.dbname),[4,e.metadataOf(this.dbname,this.name,this._store)];case 3:return t=y.sent(),this._metadata=t||{keyName:this.keyName,blockLevel:1,blockHashBase:n.blockHashBase,blockHashMultiplier:n.blockHashMultiplier,blockHashConstant:n.blockHashConstant,indexes:this.indexes},[4,this._transaction.init()];case 4:y.sent(),this._blockManager=new Gx({dbname:this.dbname,collectionName:this.name,hashFunction:this._keyHash,metadata:this._metadata,transaction:this._transaction,store:this._store}),r=At([],ft(this.indexes),!1),i=[],a=r.map(function(S){return il.createKey(S)}),s=t?t.indexes.map(function(S){return il.createKey(S)}):[];try{for(o=je(s),l=o.next();!l.done;l=o.next())u=l.value,a.includes(u)||i.push(il.parseKey(u))}catch(S){m={error:S}}finally{try{l&&!l.done&&(E=o.return)&&E.call(o)}finally{if(m)throw m.error}}return(d=[]).push.apply(d,At([],ft(r.map(function(S){var C=new il({dbname:g.dbname,collectionName:g.name,keyName:g.keyName,fields:S,transaction:g._transaction,store:g._store});return g._indexers.push(C),C.ensure()})),!1)),d.push.apply(d,At([],ft(i.map(function(S){return new il({dbname:g.dbname,collectionName:g.name,keyName:g.keyName,fields:S,transaction:g._transaction,store:g._store}).drop()})),!1)),[4,Promise.all(d)];case 5:return y.sent(),[4,this._transaction.commit()];case 6:return y.sent(),a.sort().join(",")===s.sort().join(",")?[3,8]:(f=x_(this.dbname,this.name),this._metadata.indexes=r,[4,this._store.set({key:f,value:this._metadata})]);case 7:y.sent(),y.label=8;case 8:return this._state=yu.READY,this._mutex.unlock(),[3,10];case 9:throw p=y.sent(),this._mutex.unlock(),p;case 10:return[2]}})})},e.prototype.close=function(){this._state=yu.CLOSED},e.prototype._hasPropertyOfKeyName=function(n){var t=n[this.keyName];return typeof t=="string"&&!!t},e.prototype._getIndexerBy=function(n){var t,r;n===void 0&&(n=null),n||(n=[this.keyName]);var i=il.createKey(n);try{for(var a=je(this._indexers),s=a.next();!s.done;s=a.next()){var o=s.value;if(i===il.createKey(o.fields))return o}}catch(l){t={error:l}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}throw Un.indexTableIsRequired},e.prototype._upgradeBlockLevel=function(){return A(this,void 0,void 0,function(){var n;return M(this,function(t){switch(t.label){case 0:return n=x_(this.dbname,this.name),this._metadata.blockLevel++,[4,this._store.set({key:n,value:this._metadata})];case 1:return t.sent(),[2]}})})},e.prototype._requestInsert=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return M(this,function(l){switch(l.label){case 0:return t=n[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return l.sent()?[3,13]:[4,this._blockManager.putToBlock(t,n)];case 2:return l.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return l.sent(),[4,this._blockManager.putToBlock(t,n)];case 4:l.sent(),l.label=5;case 5:l.trys.push([5,10,11,12]),r=je(this._indexers),i=r.next(),l.label=6;case 6:return i.done?[3,9]:[4,i.value.addItem(n)];case 7:l.sent(),l.label=8;case 8:return i=r.next(),[3,6];case 9:return[3,12];case 10:return a=l.sent(),s={error:a},[3,12];case 11:try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(s)throw s.error}return[7];case 12:return[3,14];case 13:throw Un.collectionInsertDuplicate;case 14:return[2]}})})},e.prototype._requestUpsert=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,d,f,p,m,E;return M(this,function(g){switch(g.label){case 0:return t=n[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return(r=g.sent())?[3,13]:[4,this._blockManager.putToBlock(t,n)];case 2:return g.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return g.sent(),[4,this._blockManager.putToBlock(t,n)];case 4:g.sent(),g.label=5;case 5:g.trys.push([5,10,11,12]),i=je(this._indexers),a=i.next(),g.label=6;case 6:return a.done?[3,9]:[4,(u=a.value).addItem(n)];case 7:g.sent(),g.label=8;case 8:return a=i.next(),[3,6];case 9:return[3,12];case 10:return s=g.sent(),f={error:s},[3,12];case 11:try{a&&!a.done&&(p=i.return)&&p.call(i)}finally{if(f)throw f.error}return[7];case 12:return[3,23];case 13:return[4,this._blockManager.putToBlock(t,n)];case 14:g.sent(),g.label=15;case 15:g.trys.push([15,21,22,23]),o=je(this._indexers),l=o.next(),g.label=16;case 16:return l.done?[3,20]:(u=l.value).diff(u.getColumnValues(r),u.getColumnValues(n))===0?[3,19]:[4,u.removeItem(r)];case 17:return g.sent(),[4,u.addItem(n)];case 18:g.sent(),g.label=19;case 19:return l=o.next(),[3,16];case 20:return[3,23];case 21:return d=g.sent(),m={error:d},[3,23];case 22:try{l&&!l.done&&(E=o.return)&&E.call(o)}finally{if(m)throw m.error}return[7];case 23:return[2]}})})},e.prototype._requestUpdate=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u;return M(this,function(d){switch(d.label){case 0:return t=n[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return(r=d.sent())?[4,this._blockManager.putToBlock(t,n)]:[3,11];case 2:d.sent(),d.label=3;case 3:d.trys.push([3,9,10,11]),i=je(this._indexers),a=i.next(),d.label=4;case 4:return a.done?[3,8]:(s=a.value).diff(s.getColumnValues(r),s.getColumnValues(n))===0?[3,7]:[4,s.removeItem(r)];case 5:return d.sent(),[4,s.addItem(n)];case 6:d.sent(),d.label=7;case 7:return a=i.next(),[3,4];case 8:return[3,11];case 9:return o=d.sent(),l={error:o},[3,11];case 10:try{a&&!a.done&&(u=i.return)&&u.call(i)}finally{if(l)throw l.error}return[7];case 11:return[2]}})})},e.prototype._requestRemove=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return M(this,function(l){switch(l.label){case 0:return[4,this._blockManager.getFromBlock(n)];case 1:return(t=l.sent())?[4,this._blockManager.removeFromBlock(n)]:[3,10];case 2:l.sent(),l.label=3;case 3:l.trys.push([3,8,9,10]),r=je(this._indexers),i=r.next(),l.label=4;case 4:return i.done?[3,7]:[4,i.value.removeItem(t)];case 5:l.sent(),l.label=6;case 6:return i=r.next(),[3,4];case 7:return[3,10];case 8:return a=l.sent(),s={error:a},[3,10];case 9:try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(s)throw s.error}return[7];case 10:return[2]}})})},e.prototype._requestClear=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a;return M(this,function(s){switch(s.label){case 0:return[4,this._blockManager.clearAllBlocks()];case 1:s.sent(),s.label=2;case 2:s.trys.push([2,7,8,9]),n=je(this._indexers),t=n.next(),s.label=3;case 3:return t.done?[3,6]:[4,t.value.clear()];case 4:s.sent(),s.label=5;case 5:return t=n.next(),[3,3];case 6:return[3,9];case 7:return r=s.sent(),i={error:r},[3,9];case 8:try{t&&!t.done&&(a=n.return)&&a.call(n)}finally{if(i)throw i.error}return[7];case 9:return[2]}})})},e.prototype.getByKey=function(n){return A(this,void 0,void 0,function(){var t,r;return M(this,function(i){switch(i.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,6];case 1:i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this._blockManager.getFromBlock(n)];case 3:return t=i.sent(),this._mutex.unlock(),[2,Xi(t)];case 4:throw r=i.sent(),this._mutex.unlock(),r;case 5:return[3,7];case 6:throw Un.collectionNotReady;case 7:return[2]}})})},e.prototype.query=function(n){if(n===void 0&&(n={}),this.isReady)return new Fx({condition:n.where,mutex:this._mutex,blockManager:this._blockManager,indexer:this._getIndexerBy(n.index),backward:!!n.backward});throw Un.collectionNotReady},e.prototype.insertOne=function(n){return A(this,void 0,void 0,function(){var t;return M(this,function(r){switch(r.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:r.sent(),r.label=2;case 2:if(r.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(n))throw Un.collectionKeyNotGiven;return[4,this._requestInsert(Xi(n))];case 3:return r.sent(),[4,this._transaction.commit()];case 4:return r.sent(),this._mutex.unlock(),[2,n];case 5:return t=r.sent(),[4,this._transaction.clear()];case 6:throw r.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Un.collectionNotReady;case 9:return[2]}})})},e.prototype.insertMany=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u=this;return M(this,function(d){switch(d.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:d.sent(),d.label=2;case 2:if(d.trys.push([2,12,,14]),n.some(function(f){return!u._hasPropertyOfKeyName(f)}))throw Un.collectionKeyNotGiven;d.label=3;case 3:d.trys.push([3,8,9,10]),t=je(n),r=t.next(),d.label=4;case 4:return r.done?[3,7]:(i=r.value,[4,this._requestInsert(Xi(i))]);case 5:d.sent(),d.label=6;case 6:return r=t.next(),[3,4];case 7:return[3,10];case 8:return a=d.sent(),o={error:a},[3,10];case 9:try{r&&!r.done&&(l=t.return)&&l.call(t)}finally{if(o)throw o.error}return[7];case 10:return[4,this._transaction.commit()];case 11:return d.sent(),this._mutex.unlock(),[2,n];case 12:return s=d.sent(),[4,this._transaction.clear()];case 13:throw d.sent(),this._mutex.unlock(),s;case 14:return[3,16];case 15:throw Un.collectionNotReady;case 16:return[2]}})})},e.prototype.upsertOne=function(n){return A(this,void 0,void 0,function(){var t;return M(this,function(r){switch(r.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:r.sent(),r.label=2;case 2:if(r.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(n))throw Un.collectionKeyNotGiven;return[4,this._requestUpsert(Xi(n))];case 3:return r.sent(),[4,this._transaction.commit()];case 4:return r.sent(),this._mutex.unlock(),[2,n];case 5:return t=r.sent(),[4,this._transaction.clear()];case 6:throw r.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Un.collectionNotReady;case 9:return[2]}})})},e.prototype.upsertMany=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u=this;return M(this,function(d){switch(d.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:d.sent(),d.label=2;case 2:if(d.trys.push([2,12,,14]),n.some(function(f){return!u._hasPropertyOfKeyName(f)}))throw Un.collectionKeyNotGiven;d.label=3;case 3:d.trys.push([3,8,9,10]),t=je(n),r=t.next(),d.label=4;case 4:return r.done?[3,7]:(i=r.value,[4,this._requestUpsert(Xi(i))]);case 5:d.sent(),d.label=6;case 6:return r=t.next(),[3,4];case 7:return[3,10];case 8:return a=d.sent(),o={error:a},[3,10];case 9:try{r&&!r.done&&(l=t.return)&&l.call(t)}finally{if(o)throw o.error}return[7];case 10:return[4,this._transaction.commit()];case 11:return d.sent(),this._mutex.unlock(),[2,n];case 12:return s=d.sent(),[4,this._transaction.clear()];case 13:throw d.sent(),this._mutex.unlock(),s;case 14:return[3,16];case 15:throw Un.collectionNotReady;case 16:return[2]}})})},e.prototype.update=function(n){return A(this,void 0,void 0,function(){var t;return M(this,function(r){switch(r.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:r.sent(),r.label=2;case 2:if(r.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(n))throw Un.collectionKeyNotGiven;return[4,this._requestUpdate(Xi(n))];case 3:return r.sent(),[4,this._transaction.commit()];case 4:return r.sent(),this._mutex.unlock(),[2,n];case 5:return t=r.sent(),[4,this._transaction.clear()];case 6:throw r.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Un.collectionNotReady;case 9:return[2]}})})},e.prototype.updateIf=function(n,t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u,d,f,p,m,E,g,y,S=this;return M(this,function(C){switch(C.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,16];case 1:C.sent(),C.label=2;case 2:return C.trys.push([2,13,,15]),r=n.where,i=r===void 0?{}:r,a=n.index,s=a===void 0?null:a,o=n.backward,l=o!==void 0&&o,u=[],[4,new kg({condition:i,blockManager:this._blockManager,backward:l,indexer:this._getIndexerBy(s)}).each(function(T){return A(S,void 0,void 0,function(){var I;return M(this,function(L){if(T.error)throw T.stop(),T.error;return T.hasNext?(I=T.nextValue,Su(i,I)&&t.set&&(typeof t.set!="function"?Object.keys(t.set).forEach(function(D){var O;I[D]=(O=t.set)===null||O===void 0?void 0:O[D]}):t.set(I),u.push(I)),T.next()):T.stop(),[2]})})})];case 3:C.sent(),C.label=4;case 4:C.trys.push([4,9,10,11]),d=je(u),f=d.next(),C.label=5;case 5:return f.done?[3,8]:(p=f.value,[4,this._requestUpdate(Xi(p))]);case 6:C.sent(),C.label=7;case 7:return f=d.next(),[3,5];case 8:return[3,11];case 9:return m=C.sent(),g={error:m},[3,11];case 10:try{f&&!f.done&&(y=d.return)&&y.call(d)}finally{if(g)throw g.error}return[7];case 11:return[4,this._transaction.commit()];case 12:return C.sent(),this._mutex.unlock(),[2,u];case 13:return E=C.sent(),[4,this._transaction.clear()];case 14:throw C.sent(),this._mutex.unlock(),E;case 15:return[3,17];case 16:throw this._transaction.clear(),Un.collectionNotReady;case 17:return[2]}})})},e.prototype.remove=function(n){return A(this,void 0,void 0,function(){var t;return M(this,function(r){switch(r.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,5,,7]),[4,this._requestRemove(n)];case 3:return r.sent(),[4,this._transaction.commit()];case 4:return r.sent(),this._mutex.unlock(),[3,7];case 5:return t=r.sent(),[4,this._transaction.clear()];case 6:throw r.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Un.collectionNotReady;case 9:return[2]}})})},e.prototype.removeIf=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,d,f,p,m,E,g,y=this;return M(this,function(S){switch(S.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:S.sent(),S.label=2;case 2:return S.trys.push([2,13,,14]),t=n.where,r=t===void 0?{}:t,i=n.index,a=i===void 0?null:i,s=n.backward,o=s!==void 0&&s,l=[],[4,new kg({condition:r,blockManager:this._blockManager,backward:o,indexer:this._getIndexerBy(a)}).each(function(C){return A(y,void 0,void 0,function(){var T,I;return M(this,function(L){if(C.error)throw C.stop(),C.error;return C.hasNext?(T=C.nextValue,Su(r,T)&&(I=T[this.keyName],l.push(I)),C.next()):C.stop(),[2]})})})];case 3:S.sent(),S.label=4;case 4:S.trys.push([4,9,10,11]),u=je(l),d=u.next(),S.label=5;case 5:return d.done?[3,8]:(f=d.value,[4,this._requestRemove(f)]);case 6:S.sent(),S.label=7;case 7:return d=u.next(),[3,5];case 8:return[3,11];case 9:return p=S.sent(),E={error:p},[3,11];case 10:try{d&&!d.done&&(g=u.return)&&g.call(u)}finally{if(E)throw E.error}return[7];case 11:return[4,this._transaction.commit()];case 12:return S.sent(),this._mutex.unlock(),[2,l];case 13:throw m=S.sent(),this._mutex.unlock(),m;case 14:return[3,16];case 15:throw this._transaction.clear(),Un.collectionNotReady;case 16:return[2]}})})},e.prototype.clear=function(){return A(this,void 0,void 0,function(){var n;return M(this,function(t){switch(t.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this._requestClear()];case 3:return t.sent(),[4,this._transaction.commit()];case 4:return t.sent(),this._mutex.unlock(),[3,7];case 5:return n=t.sent(),[4,this._transaction.clear()];case 6:throw t.sent(),this._mutex.unlock(),n;case 7:return[3,9];case 8:throw Un.collectionNotReady;case 9:return[2]}})})},e.prototype.getBlob=function(n){return A(this,void 0,void 0,function(){return M(this,function(t){switch(t.label){case 0:return[4,this._blobContainer.get(n)];case 1:return[2,t.sent()]}})})},e.prototype.saveBlob=function(n,t){return A(this,void 0,void 0,function(){return M(this,function(r){switch(r.label){case 0:return[4,this._blobContainer.save(n,t)];case 1:return[2,r.sent()]}})})},e.prototype.removeBlob=function(n){return A(this,void 0,void 0,function(){return M(this,function(t){switch(t.label){case 0:return[4,this._blobContainer.remove(n)];case 1:return t.sent(),[2]}})})},e.prototype.removeAllBlobs=function(){return A(this,void 0,void 0,function(){return M(this,function(n){switch(n.label){case 0:return[4,this._blobContainer.clear()];case 1:return n.sent(),[2]}})})},e}(),B_="[NESTDB]",Uv=!0,tu=function(){function e(){}return e.off=function(){Uv=!1},e.log=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];Uv&&console.log.apply(console,At(["".concat(B_,"[LOG]")],ft(n),!1))},e.warning=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];Uv&&console.warn.apply(console,At(["".concat(B_,"[WARNING]")],ft(n),!1))},e.error=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];Uv&&console.error.apply(console,At(["".concat(B_,"[ERROR]")],ft(n),!1))},e}(),Vx=[{},{a:700400,n:"error"}],um=function(){function e(n){var t,r,i;this.encryption=(t=n.encryption)!==null&&t!==void 0?t:SA,this.itemSizeLimit=(r=n.itemSizeLimit)!==null&&r!==void 0?r:4194304,this.metadataBuffer=(i=n.metadataBuffer)!==null&&i!==void 0?i:256}return Object.defineProperty(e.prototype,"_encryptionCheckKey",{get:function(){return"".concat(this.dbname,".encrypt")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_reservedKeys",{get:function(){return[this._encryptionCheckKey]},enumerable:!1,configurable:!0}),e.prototype._getRawKey=function(n,t){return t===void 0&&(t=""),"".concat(n).concat(t)},e.prototype._generateShardPostfixArray=function(n){return n===void 0&&(n=1),At([],ft(Array(n).keys()),!1)},e.prototype._shardify=function(n){var t=this,r=n.key,i=n.value,a=JSON.stringify(this.encryption.encrypt(i)),s=Math.ceil(a.length/this.adjustedItemSizeLimit);return this._generateShardPostfixArray(s).map(function(o){var l={key:t._getRawKey(r,".".concat(o)),data:a.substring(o*t.adjustedItemSizeLimit,(o+1)*t.adjustedItemSizeLimit)};return o===0&&(l.metadata={shards:s}),l})},e.prototype._resetIfEncryptionChanged=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a,s,o,l,u,d=this;return M(this,function(f){switch(f.label){case 0:return[4,this.get(this._encryptionCheckKey)];case 1:if(n=f.sent(),t={encrypted:Vx.map(function(p){var m;return(m=d.encryption)===null||m===void 0?void 0:m.encrypt(p)})},!n)return[3,8];if(!n.encrypted||!Array.isArray(n.encrypted))return[3,6];for(a in r=n.encrypted,i=[],r)i.push(a);s=0,f.label=2;case 2:return s<i.length?(a=i[s])in r?(o=a,l=JSON.stringify(n.encrypted[o]),u=JSON.stringify(t.encrypted[o]),l===u?[3,4]:(tu.warning("Encryption algorithm has changed. Stored data would be cleared."),[4,this.clear()])):[3,4]:[3,5];case 3:return f.sent(),[3,5];case 4:return s++,[3,2];case 5:return[3,8];case 6:return[4,this.clear()];case 7:f.sent(),f.label=8;case 8:return[4,this.set({key:this._encryptionCheckKey,value:t})];case 9:return f.sent(),[2]}})})},Object.defineProperty(e.prototype,"adjustedItemSizeLimit",{get:function(){return Math.max(this.itemSizeLimit-this.metadataBuffer,4)},enumerable:!1,configurable:!0}),e.prototype.usage=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a,s,o,l,u;return M(this,function(d){switch(d.label){case 0:return n=0,[4,this._getAllRawKeys()];case 1:t=d.sent(),d.label=2;case 2:d.trys.push([2,7,8,9]),r=je(t),i=r.next(),d.label=3;case 3:return i.done?[3,6]:(a=i.value,[4,this._getRaw(a)]);case 4:(s=d.sent())&&(n+=JSON.stringify(s).length),d.label=5;case 5:return i=r.next(),[3,3];case 6:return[3,9];case 7:return o=d.sent(),l={error:o},[3,9];case 8:try{i&&!i.done&&(u=r.return)&&u.call(r)}finally{if(l)throw l.error}return[7];case 9:return[2,n]}})})},e.prototype.getAllKeys=function(){return A(this,void 0,void 0,function(){var n=this;return M(this,function(t){switch(t.label){case 0:return[4,this._getAllRawKeys()];case 1:return[2,t.sent().filter(function(r){return r.endsWith(".0")}).map(function(r){return r.replace(/\.0$/,"")}).filter(function(r){return!n._reservedKeys.includes(r)})]}})})},e.prototype.get=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l=this;return M(this,function(u){switch(u.label){case 0:return t=this._getRawKey(n,".0"),[4,this._getRaw(t)];case 1:if(!(r=u.sent()))return[3,7];u.label=2;case 2:return u.trys.push([2,6,,7]),i=r.data,(a=r.metadata)!=null&&a.shards&&a.shards>1?[4,Promise.all(this._generateShardPostfixArray(a==null?void 0:a.shards).map(function(d){return A(l,void 0,void 0,function(){var f,p;return M(this,function(m){switch(m.label){case 0:return d>0?(f=this._getRawKey(n,".".concat(d)),[4,this._getRaw(f)]):[3,2];case 1:if(!(p=m.sent()))throw Un.storeBrokenIntegrity;return[2,p.data];case 2:return[2,i]}})})}))]:[3,4];case 3:return o=u.sent(),[3,5];case 4:o=[i],u.label=5;case 5:return s=o,[2,this.encryption.decrypt(JSON.parse(s.join("")))];case 6:return u.sent(),[2,null];case 7:return[2,null]}})})},e.prototype.set=function(n){return A(this,void 0,void 0,function(){var t;return M(this,function(r){switch(r.label){case 0:return t=this._shardify(n),[4,this._setRaw(t)];case 1:return r.sent(),[2,W({},n.value)]}})})},e.prototype.setMany=function(n){return A(this,void 0,void 0,function(){var t,r=this;return M(this,function(i){switch(i.label){case 0:return t=[],[4,this._setRaw(t.concat.apply(t,At([],ft(n.map(function(a){return r._shardify(a)})),!1)))];case 1:return i.sent(),[2,n.map(function(a){return a.value})]}})})},e.prototype.remove=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o=this;return M(this,function(l){switch(l.label){case 0:return t=this._getRawKey(n,".0"),[4,this._getRaw(t)];case 1:return(r=l.sent())?(i=r.metadata,a=this._generateShardPostfixArray(i==null?void 0:i.shards).map(function(u){return o._getRawKey(n,".".concat(u))}),[4,this._removeRaw(a)]):[3,3];case 2:return l.sent(),(s=Ji.get(this.dbname))==null||s.remove(n),[2,!0];case 3:return[2,!1]}})})},e.prototype.removeMany=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,d,f,p=this;return M(this,function(m){switch(m.label){case 0:t=Ji.get(this.dbname),r=[],i=function(E){var g,y,S;return M(this,function(C){switch(C.label){case 0:return g=a._getRawKey(E,".0"),[4,a._getRaw(g)];case 1:return(y=C.sent())&&(S=y.metadata,r.push.apply(r,At([],ft(a._generateShardPostfixArray(S==null?void 0:S.shards).map(function(T){return p._getRawKey(E,".".concat(T))})),!1))),t==null||t.remove(E),[2]}})},a=this,m.label=1;case 1:m.trys.push([1,6,7,8]),s=je(n),o=s.next(),m.label=2;case 2:return o.done?[3,5]:(l=o.value,[5,i(l)]);case 3:m.sent(),m.label=4;case 4:return o=s.next(),[3,2];case 5:return[3,8];case 6:return u=m.sent(),d={error:u},[3,8];case 7:try{o&&!o.done&&(f=s.return)&&f.call(s)}finally{if(d)throw d.error}return[7];case 8:return r.length>0?[4,this._removeRaw(r)]:[3,10];case 9:m.sent(),m.label=10;case 10:return[2,n]}})})},e.prototype.clear=function(){return A(this,void 0,void 0,function(){var n;return M(this,function(t){return(n=Ji.get(this.dbname))==null||n.clearForDatabase(this.dbname),[2]})})},e}(),$i={},uu=function(e){function n(t){t===void 0&&(t={});var r,i=this;i=e.call(this,W(W({},t),{itemSizeLimit:(r=t.itemSizeLimit)!==null&&r!==void 0?r:4194304}))||this;var a=t.delay,s=a===void 0?1:a;return i.delay=s,i.observer={},i}return B(n,e),Object.defineProperty(n.prototype,"rawData",{get:function(){return $i[this.dbname]},set:function(t){$i[this.dbname]=t},enumerable:!1,configurable:!0}),n.prototype._getAllRawKeys=function(){return A(this,void 0,void 0,function(){return M(this,function(t){if($i[this.dbname])return[2,Object.keys($i[this.dbname])];throw Un.storeNotAvailable})})},n.prototype._getRaw=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){switch(r.label){case 0:return $i[this.dbname]?[4,Dv(this.delay)]:[3,2];case 1:return r.sent(),[2,$i[this.dbname][t]?W({key:t},$i[this.dbname][t]):null];case 2:throw Un.storeNotAvailable}})})},n.prototype._setRaw=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u,d;return M(this,function(f){switch(f.label){case 0:return $i[this.dbname]?[4,Dv(this.delay)]:[3,2];case 1:f.sent();try{for(r=je(t),i=r.next();!i.done;i=r.next())a=i.value,s=a.key,o=a.data,l=a.metadata,$i[this.dbname][s]=Object.freeze({data:o,metadata:l})}catch(p){u={error:p}}finally{try{i&&!i.done&&(d=r.return)&&d.call(r)}finally{if(u)throw u.error}}return[3,3];case 2:throw Un.storeNotAvailable;case 3:return[2]}})})},n.prototype._removeRaw=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o;return M(this,function(l){switch(l.label){case 0:return $i[this.dbname]?[4,Dv(this.delay)]:[3,2];case 1:l.sent();try{for(r=je(t),i=r.next();!i.done;i=r.next())a=i.value,$i[this.dbname][a]&&delete $i[this.dbname][a]}catch(u){s={error:u}}finally{try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(s)throw s.error}}return[3,3];case 2:throw Un.storeNotAvailable;case 3:return[2]}})})},n.prototype.observe=function(t,r,i){var a=this;this.observer[t]||(this.observer[t]={}),r.forEach(function(s){return a.observer[t][s]=i})},n.prototype.checkAvailability=function(){return A(this,void 0,void 0,function(){return M(this,function(t){return[2]})})},n.prototype.init=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){switch(r.label){case 0:return this.dbname=t,$i[this.dbname]||($i[this.dbname]={}),[4,this._resetIfEncryptionChanged()];case 1:return r.sent(),[2]}})})},n.prototype.set=function(t){return A(this,void 0,void 0,function(){var r,i;return M(this,function(a){if((r=this.observer[t.key])&&typeof r.set=="function"&&(i=r.set()))throw i;return[2,e.prototype.set.call(this,t)]})})},n.prototype.setMany=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u;return M(this,function(d){try{for(r=je(t),i=r.next();!i.done;i=r.next())if(a=i.value,(s=this.observer[a.key])&&typeof s.set=="function"&&(o=s.set()))throw o}catch(f){l={error:f}}finally{try{i&&!i.done&&(u=r.return)&&u.call(r)}finally{if(l)throw l.error}}return[2,e.prototype.setMany.call(this,t)]})})},n.prototype.clear=function(){return A(this,void 0,void 0,function(){return M(this,function(t){switch(t.label){case 0:return[4,e.prototype.clear.call(this)];case 1:return t.sent(),[4,Dv(this.delay)];case 2:return t.sent(),$i[this.dbname]={},[2]}})})},n}(um),FT="NestDBStore";(function(e){e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.OPENING=1]="OPENING",e[e.OPEN=2]="OPEN",e[e.CLOSED=3]="CLOSED"})(_s||(_s={}));var Hs,zx=function(e){function n(t){t===void 0&&(t={});var r,i=this;return(i=e.call(this,W(W({},t),{itemSizeLimit:(r=t.itemSizeLimit)!==null&&r!==void 0?r:104857600}))||this)._storeName=FT,i._state=_s.UNINITIALIZED,i._openJobQueue=[],i._window=typeof window<"u"?window:void 0,i._indexedDb=i._window?i._window.indexedDB||i._window.mozIndexedDB||i._window.webkitIndexedDB||i._window.msIndexedDB:void 0,i}return B(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),n.prototype.isTransactionInactiveError=function(t){return t instanceof Error&&t.message.includes("The transaction is inactive")},n.prototype._putToObjectStore=function(t,r){return A(this,void 0,void 0,function(){return M(this,function(i){return[2,new Promise(function(a,s){var o=t.put(r);o.addEventListener("success",function(l){a(l.target.result)}),o.addEventListener("error",function(){s("Failed to write.")})})]})})},n.prototype._deleteFromObjectStore=function(t,r){return A(this,void 0,void 0,function(){return M(this,function(i){return[2,new Promise(function(a,s){var o=t.delete(r);o.addEventListener("success",function(){return a(r)}),o.addEventListener("error",function(l){return s(l.target.error)})})]})})},n.prototype._openDatabase=function(t){var r=this;return new Promise(function(i,a){if(r._indexedDb){r._state=_s.OPENING;var s=r._indexedDb.open(t);s.addEventListener("upgradeneeded",function(o){o.target.result.createObjectStore(FT,{keyPath:"key"})}),s.addEventListener("success",function(o){r._state=_s.OPEN,r._database=o.target.result,r._openJobQueue.forEach(function(l){return l()}),r._openJobQueue=[],r._database.onclose=function(){r._database=void 0,r._state=_s.OPENING,setTimeout(function(){r._openDatabase(t)},5)},i(r._database)}),s.addEventListener("error",function(o){r._state=_s.UNINITIALIZED,a(o.target.error)})}else a(Un.storeNotAvailable)})},n.prototype._getObjectStore=function(t){return A(this,void 0,void 0,function(){var r=this;return M(this,function(i){switch(i.label){case 0:return this._database?[2,this._database.transaction(this._storeName,t).objectStore(this._storeName)]:[3,1];case 1:switch(this._state){case _s.UNINITIALIZED:case _s.OPEN:return[3,2];case _s.OPENING:case _s.CLOSED:return[3,3]}return[3,4];case 2:throw Un.storeNotInitialized;case 3:return[2,new Promise(function(a){r._openJobQueue.push(function(){return a(r._getObjectStore(t))})})];case 4:return[4,this._getObjectStore(t)];case 5:return[2,i.sent()]}})})},n.prototype._getAllRawKeys=function(){return A(this,void 0,void 0,function(){var t;return M(this,function(r){switch(r.label){case 0:return[4,this._getObjectStore("readonly")];case 1:return t=r.sent(),[4,new Promise(function(i,a){var s=t.getAllKeys();s.addEventListener("success",function(o){i(o.target.result)}),s.addEventListener("error",function(o){return a(o.target.error)})})];case 2:return[2,r.sent()]}})})},n.prototype._getRaw=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){switch(i.label){case 0:return[4,this._getObjectStore("readonly")];case 1:return r=i.sent(),[4,new Promise(function(a,s){var o=r.get(t);o.addEventListener("success",function(l){var u;a((u=l==null?void 0:l.target)===null||u===void 0?void 0:u.result)}),o.addEventListener("error",function(l){return s(l.target.error)})})];case 2:return[2,i.sent()]}})})},n.prototype._setRaw=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u,d,f=this;return M(this,function(p){switch(p.label){case 0:return[4,this._getObjectStore("readwrite")];case 1:r=p.sent(),p.label=2;case 2:return p.trys.push([2,4,,15]),[4,Promise.all(t.map(function(m){return f._putToObjectStore(r,m)}))];case 3:return p.sent(),[3,15];case 4:if(i=p.sent(),!this.isTransactionInactiveError(i))return[3,13];p.label=5;case 5:p.trys.push([5,10,11,12]),a=je(t),s=a.next(),p.label=6;case 6:return s.done?[3,9]:(o=s.value,[4,this._putToObjectStore(r,o)]);case 7:p.sent(),p.label=8;case 8:return s=a.next(),[3,6];case 9:return[3,12];case 10:return l=p.sent(),u={error:l},[3,12];case 11:try{s&&!s.done&&(d=a.return)&&d.call(a)}finally{if(u)throw u.error}return[7];case 12:return[3,14];case 13:throw i;case 14:return[3,15];case 15:return[2]}})})},n.prototype._removeRaw=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u,d,f=this;return M(this,function(p){switch(p.label){case 0:return[4,this._getObjectStore("readwrite")];case 1:r=p.sent(),p.label=2;case 2:return p.trys.push([2,4,,15]),[4,Promise.all(t.map(function(m){return f._deleteFromObjectStore(r,m)}))];case 3:return p.sent(),[3,15];case 4:if(i=p.sent(),!this.isTransactionInactiveError(i))return[3,13];p.label=5;case 5:p.trys.push([5,10,11,12]),a=je(t),s=a.next(),p.label=6;case 6:return s.done?[3,9]:(o=s.value,[4,this._deleteFromObjectStore(r,o)]);case 7:p.sent(),p.label=8;case 8:return s=a.next(),[3,6];case 9:return[3,12];case 10:return l=p.sent(),u={error:l},[3,12];case 11:try{s&&!s.done&&(d=a.return)&&d.call(a)}finally{if(u)throw u.error}return[7];case 12:return[3,14];case 13:throw i;case 14:return[3,15];case 15:return[2]}})})},n.prototype._triggerDatabaseClose=function(){this._database&&this._database.onclose&&this._database.onclose(new Event("dummy"))},n.prototype.checkAvailability=function(){return A(this,void 0,void 0,function(){var t,r=this;return M(this,function(i){switch(i.label){case 0:if(!((t=typeof window<"u"?window:null)!=null&&t.indexedDB||t!=null&&t.mozIndexedDB||t!=null&&t.webkitIndexedDB||t!=null&&t.msIndexedDB))return[3,6];if(this._indexedDb=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB,!this._window||!Up())return[3,4];if(!(Up()&&navigator.userAgent&&navigator.userAgent.includes("Edge/")))return[3,1];if(!this._window.indexedDB&&(t.PointerEvent||t.MSPointerEvent))throw Un.storeNotAvailableInPrivateBrowsing;return[3,3];case 1:return[4,new Promise(function(a,s){if(r._indexedDb)try{var o=r._indexedDb.open("_testMozilla");o.onerror=function(){return s(Un.storeNotAvailableInPrivateBrowsing)},o.onsuccess=function(l){if(l.target.result.close(),r._indexedDb){var u=r._indexedDb.deleteDatabase("_testMozilla");u.onerror=function(){return a()},u.onsuccess=function(){return a()}}else s(Un.storeNotAvailable)}}catch{s(Un.storeNotAvailableInPrivateBrowsing)}else s(Un.storeNotAvailable)})];case 2:i.sent(),i.label=3;case 3:return[3,5];case 4:throw Un.storeNotAvailable;case 5:return[3,7];case 6:throw Un.storeNotAvailable;case 7:return[2]}})})},n.prototype.init=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){switch(r.label){case 0:return this.dbname=t,[4,this.checkAvailability()];case 1:return r.sent(),[4,this._openDatabase(t)];case 2:return r.sent(),[4,this._resetIfEncryptionChanged()];case 3:return r.sent(),[2]}})})},n.prototype.clear=function(){return A(this,void 0,void 0,function(){var t;return M(this,function(r){switch(r.label){case 0:return[4,e.prototype.clear.call(this)];case 1:return r.sent(),[4,this._getObjectStore("readwrite")];case 2:return t=r.sent(),[4,new Promise(function(i,a){var s=t.clear();s.addEventListener("success",function(){return i()}),s.addEventListener("error",function(o){return a(o.target.error)})})];case 3:return[2,r.sent()]}})})},n}(um),jx=function(e){function n(t){var r=this,i=t.AsyncStorage,a=t.itemSizeLimit,s=a===void 0?2097152:a,o=SL(t,["AsyncStorage","itemSizeLimit"]);return(r=e.call(this,W(W({},o),{itemSizeLimit:s}))||this)._asyncStorage=i,r}return B(n,e),n.prototype._isBelonging=function(t){return t.startsWith("".concat(this.dbname,"/"))},n.prototype._getActualKey=function(t){return"".concat(this.dbname,"/").concat(t)},n.prototype._getAllRawKeys=function(){return A(this,void 0,void 0,function(){var t,r=this;return M(this,function(i){switch(i.label){case 0:return[4,this._asyncStorage.getAllKeys()];case 1:return t=i.sent(),[2,t.filter(function(a){return r._isBelonging(a)}).map(function(a){return a.substring("".concat(r.dbname,"/").length)})]}})})},n.prototype._getRaw=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){switch(i.label){case 0:return[4,this._asyncStorage.getItem(this._getActualKey(t))];case 1:return[2,(r=i.sent())?JSON.parse(r):null]}})})},n.prototype._setRaw=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u;return M(this,function(d){switch(d.label){case 0:r=[];try{for(i=je(t),a=i.next();!a.done;a=i.next())s=a.value,o=s.key,s.data.length<=this.adjustedItemSizeLimit&&r.push([this._getActualKey(o),JSON.stringify(s)])}catch(f){l={error:f}}finally{try{a&&!a.done&&(u=i.return)&&u.call(i)}finally{if(l)throw l.error}}return[4,this._asyncStorage.multiSet(r)];case 1:return d.sent(),[2]}})})},n.prototype._removeRaw=function(t){return A(this,void 0,void 0,function(){var r=this;return M(this,function(i){switch(i.label){case 0:return[4,this._asyncStorage.multiRemove(t.map(function(a){return r._getActualKey(a)}))];case 1:return i.sent(),[2]}})})},n.prototype.checkAvailability=function(){return A(this,void 0,void 0,function(){return M(this,function(t){if(!this._asyncStorage)throw Un.storeNotAvailable;return[2]})})},n.prototype.init=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){switch(r.label){case 0:return this.dbname=t,[4,this._resetIfEncryptionChanged()];case 1:return r.sent(),[2]}})})},n.prototype.clear=function(){return A(this,void 0,void 0,function(){var t;return M(this,function(r){switch(r.label){case 0:return[4,e.prototype.clear.call(this)];case 1:return r.sent(),[4,this.getAllKeys()];case 2:return t=r.sent(),[4,this.removeMany(t)];case 3:return r.sent(),[2]}})})},n}(um),qx=function(e){function n(t){var r,i=this;return(i=e.call(this,W(W({},t),{itemSizeLimit:(r=t.itemSizeLimit)!==null&&r!==void 0?r:6291456}))||this)._mmkv=t.MMKV,i}return B(n,e),n.prototype._isBelonging=function(t){return t.startsWith("".concat(this.dbname,"/"))},n.prototype._getActualKey=function(t){return"".concat(this.dbname,"/").concat(t)},n.prototype._getAllRawKeys=function(){return A(this,void 0,void 0,function(){var t,r=this;return M(this,function(i){switch(i.label){case 0:return[4,this._mmkv.getAllKeys()];case 1:return t=i.sent(),[2,t.filter(function(a){return r._isBelonging(a)}).map(function(a){return a.substring("".concat(r.dbname,"/").length)})]}})})},n.prototype._getRaw=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){switch(i.label){case 0:return[4,this._mmkv.getString(this._getActualKey(t))];case 1:return[2,(r=i.sent())?JSON.parse(r):null]}})})},n.prototype._setRaw=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l;return M(this,function(u){try{for(r=je(t),i=r.next();!i.done;i=r.next())a=i.value,s=a.key,a.data.length<=this.adjustedItemSizeLimit&&this._mmkv.set(this._getActualKey(s),JSON.stringify(a))}catch(d){o={error:d}}finally{try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(o)throw o.error}}return[2]})})},n.prototype._removeRaw=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o;return M(this,function(l){try{for(r=je(t),i=r.next();!i.done;i=r.next())a=i.value,this._mmkv.delete(this._getActualKey(a))}catch(u){s={error:u}}finally{try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(s)throw s.error}}return[2]})})},n.prototype.checkAvailability=function(){return A(this,void 0,void 0,function(){return M(this,function(t){if(!this._mmkv)throw Un.storeNotAvailable;return[2]})})},n.prototype.init=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){switch(r.label){case 0:return this.dbname=t,[4,this._resetIfEncryptionChanged()];case 1:return r.sent(),[2]}})})},n.prototype.clear=function(){return A(this,void 0,void 0,function(){var t;return M(this,function(r){switch(r.label){case 0:return[4,e.prototype.clear.call(this)];case 1:return r.sent(),[4,this.getAllKeys()];case 2:return t=r.sent(),[4,this.removeMany(t)];case 3:return r.sent(),[2]}})})},n}(um);(function(e){e.INIT="INIT",e.OPENING="OPENING",e.OPENED="OPENED",e.CLOSED="CLOSED"})(Hs||(Hs={}));var yo,Kx=function(){function e(n){var t=n.name,r=n.version,i=n.store,a=n.config;this.name=t,this._version=r,this._state=Hs.INIT,this._config=a||new lf({dbname:t}),this._store=i,this._event={success:vh,error:vh,storeReplaced:vh,upgrade:UT},this._collections=new Map,this._globalMutex=new qy("".concat(this.name,".lock")),this._config.disableLogger&&tu.off(),new Ji({dbname:t,limit:this._config.cacheLimit})}return Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"store",{get:function(){return this._store},enumerable:!1,configurable:!0}),e.prototype.estimateUsage=function(){return A(this,void 0,void 0,function(){return M(this,function(n){switch(n.label){case 0:return[4,(t=this._store,A(void 0,void 0,void 0,function(){return M(this,function(r){switch(r.label){case 0:return[4,t.usage()];case 1:return[2,r.sent()]}})}))];case 1:return[2,n.sent()]}var t})})},e.prototype.commitSchema=function(n){return A(this,void 0,void 0,function(){var t=this;return M(this,function(r){switch(r.label){case 0:return this._state!==Hs.OPENING?[3,2]:[4,Promise.all(n.map(function(i){return A(t,void 0,void 0,function(){var a,s,o,l,u;return M(this,function(d){switch(d.label){case 0:return a=i.collectionName,s=i.keyName,o=i.index,l=o===void 0?[]:o,this._collections.has(a)||this._collections.set(a,new H_({dbname:this.name,collectionName:a,keyName:s,indexes:l,store:this._store})),(u=this._collections.get(a))?[4,u.init()]:[3,2];case 1:d.sent(),d.label=2;case 2:return[2]}})})}))];case 1:return r.sent(),[3,3];case 2:throw Un.databaseSchemaNotOnUpgrade;case 3:return[2]}})})},e.prototype.open=function(){var n;return A(this,void 0,void 0,function(){var t,r,i,a,s=this;return M(this,function(o){switch(o.label){case 0:return[4,this._globalMutex.lock()];case 1:if(o.sent(),this._state===Hs.OPENED)return[3,12];this._state=Hs.OPENING,o.label=2;case 2:return o.trys.push([2,5,,12]),[4,this._store.init(this.name)];case 3:return o.sent(),l=this.name,t="".concat(jy(l),".metadata"),r={version:0,collectionNames:[]},[4,this._store.get(t)];case 4:return i=(n=o.sent())!==null&&n!==void 0?n:r,[2,new Promise(function(u,d){var f=function(m){i.version<s._version?s._event.upgrade(i.version,function(E){return A(s,void 0,void 0,function(){var g;return M(this,function(y){switch(y.label){case 0:if(E)return[3,5];i.version++,i.collectionNames=Array.from(this._collections.keys()),y.label=1;case 1:return y.trys.push([1,3,,4]),[4,this._store.set({key:t,value:i})];case 2:return y.sent(),m({continued:!0}),[3,4];case 3:return g=y.sent(),m({continued:!1,err:g}),[3,4];case 4:return[3,6];case 5:m({continued:!1,err:E}),y.label=6;case 6:return[2]}})})}):m({continued:!1})},p=function(m){var E=m.continued,g=E!==void 0&&E,y=m.err,S=y===void 0?null:y;if(g)setTimeout(function(){return f(p)},10);else if(S)tu.error(S.message),s._globalMutex.unlock(),s._event.error(S),d(S);else{var C=[];i.collectionNames.forEach(function(T){var I=s._collections.get(T);I&&I.state===yu.READY||C.push(A(s,void 0,void 0,function(){var L,D;return M(this,function(O){switch(O.label){case 0:return[4,H_.metadataOf(this.name,T,this._store)];case 1:return(L=O.sent())?(D=new H_({dbname:this.name,collectionName:T,keyName:L.keyName,indexes:L.indexes,store:this._store}),this._collections.set(T,D),[4,D.init()]):[3,3];case 2:O.sent(),O.label=3;case 3:return[2]}})}))}),Promise.all(C).then(function(){s._state=Hs.OPENED,s._globalMutex.unlock(),s._event.success(),u()}).catch(function(T){tu.error(T.message),s._globalMutex.unlock(),s._event.error(T),d(T)})}};f(p)})];case 5:switch(a=o.sent(),a.code){case nr.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING:return[3,6];case nr.STORE_NOT_AVAILABLE:return[3,8]}return[3,10];case 6:return tu.warning("Access to the local storage is not allowed. Switched to MemoryStore automatically."),this._store=new uu({}),this._globalMutex.unlock(),this._event.error(a),this._event.storeReplaced(this._store),[4,this.open()];case 7:return o.sent(),[3,11];case 8:return tu.warning("IndexedDB is not available in this environment. Switched to MemoryStore automatically. Consider using other store to save data persistently (e.g. AsyncStorage)."),this._store=new uu({}),this._globalMutex.unlock(),this._event.error(a),this._event.storeReplaced(this._store),[4,this.open()];case 9:return o.sent(),[3,11];case 10:throw tu.error(a.message),this._globalMutex.unlock(),this._event.error(a),a;case 11:return[3,12];case 12:return[2]}var l})})},e.prototype.close=function(){this._collections.forEach(function(n){return n.close()}),this._state=Hs.CLOSED},e.prototype.clear=function(){return A(this,void 0,void 0,function(){return M(this,function(n){switch(n.label){case 0:return[4,Promise.all(Array.from(this._collections.values()).map(function(t){return t.clear()}))];case 1:return n.sent(),[2]}})})},e.prototype.reset=function(){return A(this,void 0,void 0,function(){var n;return M(this,function(t){switch(t.label){case 0:return(n=Ji.get(this.name))&&n.clearForDatabase(this.name),[4,this._store.clear()];case 1:return t.sent(),[2]}})})},e.prototype.on=function(n,t){this._event[n]=t},e.prototype.off=function(n){typeof this._event[n]=="function"&&(n==="upgrade"?this._event[n]=UT:this._event[n]=vh)},e.prototype.collection=function(n){var t=this._collections.get(n);if(t)return t;throw Un.collectionNotReady},e}();(function(e){e[e.VERBOSE=0]="VERBOSE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.NONE=5]="NONE"})(yo||(yo={}));var ni,$x=function(){function e(){this.level=yo.WARN}return e.prototype.verbose=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this.level<=yo.VERBOSE&&console.log.apply(console,At(["[verbose]"],ft(n),!1))},e.prototype.debug=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this.level<=yo.DEBUG&&console.log.apply(console,At(["[debug]"],ft(n),!1))},e.prototype.info=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this.level<=yo.INFO&&console.log.apply(console,At(["[info]"],ft(n),!1))},e.prototype.warn=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this.level<=yo.WARN&&console.warn.apply(console,At(["[warn]"],ft(n),!1))},e.prototype.error=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this.level<=yo.ERROR&&console.error.apply(console,At(["[error]"],ft(n),!1))},e}(),Xs=function(){function e(n){var t,r,i,a;this.messageTypeFilter=(t=n==null?void 0:n.messageTypeFilter)!==null&&t!==void 0?t:mi.ALL,this.customTypesFilter=(r=n==null?void 0:n.customTypesFilter)!==null&&r!==void 0?r:null,this.senderUserIdsFilter=(i=n==null?void 0:n.senderUserIdsFilter)!==null&&i!==void 0?i:null,this.replyType=(a=n==null?void 0:n.replyType)!==null&&a!==void 0?a:Ar.NONE}return e.prototype.clone=function(){var n=new e,t=JSON.parse(JSON.stringify(this));return Object.keys(t).forEach(function(r){n[r]=t[r]}),n},e.prototype.match=function(n){switch(this.messageTypeFilter){case mi.USER:if(n.messageType!==ir.USER)return!1;break;case mi.FILE:if(n.messageType!==ir.FILE)return!1;break;case mi.ADMIN:if(n.messageType!==ir.ADMIN)return!1}if(this.customTypesFilter&&this.customTypesFilter.length>0&&!this.customTypesFilter.includes("*")&&!this.customTypesFilter.includes(n.customType)||this.senderUserIdsFilter&&this.senderUserIdsFilter.length>0&&(!(n instanceof dr)||!this.senderUserIdsFilter.includes(n.sender.userId)))return!1;if(n instanceof Ni)switch(this.replyType){case Ar.NONE:if(n.parentMessageId>0)return!1;break;case Ar.ONLY_REPLY_TO_CHANNEL:if(n instanceof dr&&n.parentMessageId>0&&!n.replyToChannel)return!1}return!0},e}();(function(e){e.CHANNEL_LATEST="channel_latest",e.NEWEST_CHILD_MESSAGE="newest_child_message"})(ni||(ni={}));var kh,js=function(e){switch(e){case ni.CHANNEL_LATEST:return["channelUrl","-createdAt","-messageId"];case ni.NEWEST_CHILD_MESSAGE:return["channelUrl","-parentMessageId","-createdAt","-messageId"]}},Wx=function(){return["channelUrl","-createdAt","-notificationId"]},Qx=W(W({},Mw),{scheduledAt:void 0}),Yx=function(e){return ww(e)&&X("number",e.scheduledAt,!0)},Xx=W(W({},om),{scheduledAt:0,file:void 0,fileUrl:void 0,fileName:void 0,mimeType:void 0,fileSize:void 0,thumbnailSizes:void 0,requireAuth:!1}),Zx=function(e){return lm(e)&&X("number",e.scheduledAt)&&(jr(e.file)||X("string",e.fileUrl))&&X("string",e.fileName,!0)&&X("string",e.mimeType,!0)&&X("number",e.fileSize,!0)&&(e.thumbnailSizes===null||e.thumbnailSizes===void 0||e.thumbnailSizes.every(function(n){return X("object",n)&&n.maxWidth>0&&n.maxHeight>0}))},Kw="UnsentMessage",Jx="reqId",kv={},Ou=function(e){function n(t){var r=e.call(this,t)||this;return r._mutex=new qy("unsendmessagecache.lock"),kv[t]=r,r}return B(n,e),Object.defineProperty(n.prototype,"_cacheContext",{get:function(){return Y.of(this._iid).cacheContext},enumerable:!1,configurable:!0}),n.of=function(t,r){return r===void 0&&(r=!1),kv[t]&&!r||(kv[t]=new n(t)),kv[t]},Object.defineProperty(n.prototype,"collection",{get:function(){var t=this._cacheContext.nestdb,r=t==null?void 0:t.collection(Kw);if(!r)throw J.databaseError;return r},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),n.prototype._serialize=function(t){if(t.messageId>0)throw J.invalidParameters;var r,i=W({},t.serialize());return t instanceof vi?(t.messageParams&&(i.messageParams=ET(t.messageParams)),t.scheduledInfo&&t.scheduledInfo.scheduledMessageParams&&(i.scheduledInfo.scheduledMessageParams=(r=t.scheduledInfo.scheduledMessageParams,W(W({},ET(r)),{scheduledAt:r.scheduledAt})))):t instanceof Ir?(t.messageParams&&(i.messageParams=yT(t.messageParams)),t.scheduledInfo&&t.scheduledInfo.scheduledMessageParams&&(i.scheduledInfo.scheduledMessageParams=function(a){return W(W({},yT(a)),{scheduledAt:a.scheduledAt})}(t.scheduledInfo.scheduledMessageParams))):t instanceof Ua&&t.messageParams&&(i.messageParams=function(a){return Xe({fileInfoList:a.fileInfoList,isReplyToChannel:a.isReplyToChannel,pushNotificationDeliveryOption:a.pushNotificationDeliveryOption})}(t.messageParams)),i},n.prototype._deserialize=function(t){return t=W(W({},t),{messageId:parseInt(t.messageId)}),xr.of(this._iid).buildMessageFromSerializedData(t)},n.prototype._deserializeWithMessageCreateParams=function(t){var r,i,a;return A(this,void 0,void 0,function(){var s,o,l,u,d,f,p=this;return M(this,function(m){switch(m.label){case 0:return s=xr.of(this._iid),o=this._deserialize(t),t.messageParams?o instanceof vi?(u=t.messageParams,o.messageParams=s.buildUserMessageCreateParamsFromSerializedData(u,o),[3,6]):[3,1]:[3,6];case 1:return o instanceof Ir?(u=t.messageParams).fileKey&&typeof u.fileKey=="string"&&U_((r=u.fileType)!==null&&r!==void 0?r:"")?(l=u,[4,this.collection.getBlob(u.fileKey)]):[3,3]:[3,4];case 2:l.file=(i=m.sent())!==null&&i!==void 0?i:void 0,m.label=3;case 3:return o.messageParams=s.buildFileMessageCreateParamsFromSerializedData(u,o),[3,6];case 4:return o instanceof Ua&&(u=t.messageParams)&&u.fileInfoList?(o.messageParams=s.buildMultipleFilesMessageCreateParamsFromSerializedData(u,o),[4,Promise.all(o.messageParams.fileInfoList.map(function(E){return A(p,void 0,void 0,function(){var g,y,S,C,T;return M(this,function(I){switch(I.label){case 0:return typeof((y=E._uploadedMetaData)===null||y===void 0?void 0:y.fileKey)=="string"&&U_((C=(S=E._uploadedMetaData)===null||S===void 0?void 0:S.fileType)!==null&&C!==void 0?C:"")?(g=E,[4,this.collection.getBlob(E._uploadedMetaData.fileKey)]):[3,2];case 1:g.file=(T=I.sent())!==null&&T!==void 0?T:void 0,I.label=2;case 2:return[2]}})})}))]):[3,6];case 5:m.sent(),m.label=6;case 6:return o.scheduledInfo&&t.scheduledInfo&&t.scheduledInfo.scheduledMessageParams?o instanceof vi?(d=t.scheduledInfo.scheduledMessageParams,o.scheduledInfo.scheduledMessageParams=s.buildScheduledUserMessageCreateParamsFromSerializedData(d,o),[3,10]):[3,7]:[3,10];case 7:return o instanceof Ir?(d=t.scheduledInfo.scheduledMessageParams).fileKey&&typeof d.fileKey=="string"&&typeof d.fileType=="string"&&U_(d.fileType)?(f=d,[4,this.collection.getBlob(d.fileKey)]):[3,9]:[3,10];case 8:f.file=(a=m.sent())!==null&&a!==void 0?a:void 0,m.label=9;case 9:o.scheduledInfo.scheduledMessageParams=s.buildScheduledFileMessageCreateParamsFromSerializedData(d,o),m.label=10;case 10:return[2,o]}})})},n.prototype._getFileInfoBlobKey=function(t,r){return"".concat(t,".").concat(r)},n.prototype.get=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.getByKey("".concat(t))]:[3,2];case 1:if(r=i.sent())return[2,this._deserializeWithMessageCreateParams(r)];i.label=2;case 2:return[2,void 0]}})})},n.prototype.fetch=function(t){var r=t.channelUrl,i=t.filter,a=i===void 0?new Xs:i,s=t.order,o=s===void 0?ni.CHANNEL_LATEST:s,l=t.sendingStatus,u=t.backward,d=u!==void 0&&u,f=t.parentMessageId;return A(this,void 0,void 0,function(){var p,m,E,g,y=this;return M(this,function(S){switch(S.label){case 0:return this.localCacheEnabled?(p=js(o),m={"/where":function(C){return!!(o!==ni.NEWEST_CHILD_MESSAGE||f&&C.parentMessageId!==0&&C.parentMessageId===f)&&a.match(y._deserialize(C))}},r&&(m.channelUrl=r),l&&(m.sendingStatus=l),E={where:m,index:p,backward:d},[4,this.collection.query(E)]):[3,3];case 1:return[4,S.sent().fetch({})];case 2:return g=S.sent(),[2,Promise.all(g.map(function(C){return A(y,void 0,void 0,function(){return M(this,function(T){switch(T.label){case 0:return[4,this._deserializeWithMessageCreateParams(C)];case 1:return[2,T.sent()]}})})}))];case 3:return[2,[]]}})})},n.prototype.getAllChildMessages=function(t,r){return r===void 0&&(r=new Xs),A(this,void 0,void 0,function(){return M(this,function(i){switch(i.label){case 0:return[4,this.fetch({filter:r,order:ni.NEWEST_CHILD_MESSAGE,channelUrl:t.channelUrl,backward:!1,parentMessageId:t.messageId})];case 1:return[2,i.sent()]}})})},n.prototype.upsert=function(t){return A(this,void 0,void 0,function(){var r=this;return M(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,Promise.all(t.map(function(a){return A(r,void 0,void 0,function(){var s;return M(this,function(o){switch(o.label){case 0:return a instanceof Ir||a instanceof Ua?[4,this._mutex.lock()]:[3,4];case 1:return o.sent(),[4,this.saveBlob(a)];case 2:return o.sent(),[4,this._mutex.unlock()];case 3:o.sent(),o.label=4;case 4:return s=this._serialize(a),[4,this.collection.upsertOne(s)];case 5:return o.sent(),[2]}})})}))]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},n.prototype.upsertChildMessages=function(t){return A(this,void 0,void 0,function(){var r=this;return M(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,Promise.all(t.map(function(a){return A(r,void 0,void 0,function(){var s;return M(this,function(o){switch(o.label){case 0:return s=[],a.threadInfo&&a.threadInfo.replyCount>0?[4,this.getAllChildMessages(a)]:[3,2];case 1:s=o.sent(),o.label=2;case 2:return s.length>0?(s.forEach(function(l){return l.applyParentMessage(a)}),[4,this.upsert(s)]):[3,4];case 3:o.sent(),o.label=4;case 4:return[2]}})})}))]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},n.prototype.remove=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l;return M(this,function(u){switch(u.label){case 0:if(!this.localCacheEnabled)return[3,8];u.label=1;case 1:u.trys.push([1,6,7,8]),r=je(t),i=r.next(),u.label=2;case 2:return i.done?[3,5]:(a=i.value,[4,this.collection.remove(a)]);case 3:u.sent(),u.label=4;case 4:return i=r.next(),[3,2];case 5:return[3,8];case 6:return s=u.sent(),o={error:s},[3,8];case 7:try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(o)throw o.error}return[7];case 8:return[2]}})})},n.prototype.removeMessagesOfChannel=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){switch(r.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:t}})]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},n.prototype.clear=function(){return A(this,void 0,void 0,function(){return M(this,function(t){switch(t.label){case 0:return this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},n.prototype.saveBlob=function(t){return A(this,void 0,void 0,function(){var r,i,a,s=this;return M(this,function(o){switch(o.label){case 0:return t instanceof Ir?t.messageParams&&(a=t.messageParams).file&&tp(a.file)?[4,this.collection.saveBlob(a.file,t.reqId)]:[3,2]:[3,5];case 1:i=o.sent(),a.fileKey=i,a.fileType=bu.BLOB,o.label=2;case 2:return t.scheduledInfo&&t.scheduledInfo.scheduledMessageParams&&(r=t.scheduledInfo.scheduledMessageParams).file&&tp(r.file)?[4,this.collection.saveBlob(r.file,t.reqId)]:[3,4];case 3:i=o.sent(),r.fileKey=i,r.fileType=bu.BLOB,o.label=4;case 4:return[3,7];case 5:return t instanceof Ua&&(a=t.messageParams)&&a.fileInfoList&&Array.isArray(a.fileInfoList)?[4,Promise.all(a.fileInfoList.map(function(l,u){return A(s,void 0,void 0,function(){var d;return M(this,function(f){switch(f.label){case 0:return l.file&&tp(l.file)?[4,this.collection.saveBlob(l.file,this._getFileInfoBlobKey(t.reqId,u))]:[3,2];case 1:d=f.sent(),l._uploadedMetaData||(l._uploadedMetaData={}),l._uploadedMetaData.fileKey=d,l._uploadedMetaData.fileType=bu.BLOB,f.label=2;case 2:return[2]}})})}))]:[3,7];case 6:o.sent(),o.label=7;case 7:return[2]}})})},n}(Ur),Pv={},jc=function(e){function n(t){var r=e.call(this,t)||this;return Pv[t]=r,r}return B(n,e),Object.defineProperty(n.prototype,"_sdkState",{get:function(){return Y.of(this._iid).sdkState},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_cacheContext",{get:function(){return Y.of(this._iid).cacheContext},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_unsentMessageCache",{get:function(){return Ou.of(this._iid)},enumerable:!1,configurable:!0}),n.of=function(t,r){return r===void 0&&(r=!1),Pv[t]&&!r||(Pv[t]=new n(t)),Pv[t]},Object.defineProperty(n.prototype,"collection",{get:function(){var t=this._cacheContext.nestdb;return ke(!!t).throw(J.databaseError),t.collection(Ug)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),n.prototype._serialize=function(t){return W(W({},t.serialize()),{messageId:"".concat(t.messageId)})},n.prototype._deserialize=function(t){return t=W(W({},t),{messageId:parseInt(t.messageId)}),xr.of(this._iid).buildMessageFromSerializedData(t)},n.prototype.get=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.getByKey("".concat(t))]:[3,2];case 1:if(r=i.sent())return[2,this._deserialize(r)];i.label=2;case 2:return[2,void 0]}})})},n.prototype.fetch=function(t){var r=t.channelUrl,i=t.token,a=t.limit,s=a===void 0?100:a,o=t.filter,l=o===void 0?new Xs:o,u=t.order,d=u===void 0?ni.CHANNEL_LATEST:u,f=t.backward,p=f!==void 0&&f,m=t.parentMessageId,E=t.isPollOnly,g=E!==void 0&&E,y=t.exactMatch,S=y!==void 0&&y,C=t.inclusive,T=C===void 0||C;return A(this,void 0,void 0,function(){var I,L,D,O=this;return M(this,function(R){switch(R.label){case 0:return this.localCacheEnabled?(I=js(d),L={where:{channelUrl:r,"/where":function(k){if(i!=null&&i!=="")switch(d){case ni.CHANNEL_LATEST:if(S&&k.createdAt!==i)return!1;if(p){if(T&&k.createdAt<i||!T&&k.createdAt<=i)return!1}else if(T&&k.createdAt>i||!T&&k.createdAt>=i)return!1;break;case ni.NEWEST_CHILD_MESSAGE:if(!m||k.parentMessageId===0||k.parentMessageId!==m)return!1}return!(g&&!k._poll)&&l.match(O._deserialize(k))}},index:I,backward:p},[4,this.collection.query(L)]):[3,3];case 1:return[4,R.sent().fetch({limit:s??void 0})];case 2:return D=R.sent(),[2,Promise.all(D.map(function(k){return A(O,void 0,void 0,function(){return M(this,function(P){return[2,this._deserialize(k)]})})}))];case 3:return[2,[]]}})})},n.prototype.getAllChildMessages=function(t,r){return r===void 0&&(r=new Xs),A(this,void 0,void 0,function(){return M(this,function(i){switch(i.label){case 0:return[4,this.fetch({channelUrl:t.channelUrl,token:Date.now(),limit:null,backward:!1,filter:r,order:ni.NEWEST_CHILD_MESSAGE,parentMessageId:t.messageId})];case 1:return[2,i.sent()]}})})},n.prototype.upsert=function(t){var r;return A(this,void 0,void 0,function(){var i,a,s,o,l,u,d,f,p=this;return M(this,function(m){switch(m.label){case 0:return this.localCacheEnabled?[4,this.saveBlobs(t)]:[3,13];case 1:m.sent(),m.label=2;case 2:m.trys.push([2,7,8,9]),i=je(t),a=i.next(),m.label=3;case 3:return a.done?[3,6]:(s=a.value,!((r=s.threadInfo)===null||r===void 0)&&r._isUpdateRequired?[4,this.get(s.messageId)]:[3,5]);case 4:(o=m.sent())!=null&&o.threadInfo&&s.threadInfo._updateFrom(o.threadInfo),m.label=5;case 5:return a=i.next(),[3,3];case 6:return[3,9];case 7:return l=m.sent(),d={error:l},[3,9];case 8:try{a&&!a.done&&(f=i.return)&&f.call(i)}finally{if(d)throw d.error}return[7];case 9:return u=t.map(function(E){return p._serialize(E)}),[4,this.collection.upsertMany(u)];case 10:return m.sent(),[4,this.upsertChildMessages(t)];case 11:return m.sent(),[4,this._unsentMessageCache.upsertChildMessages(t)];case 12:m.sent(),m.label=13;case 13:return[2]}})})},n.prototype.upsertChildMessages=function(t){return A(this,void 0,void 0,function(){var r=this;return M(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,Promise.all(t.map(function(a){return A(r,void 0,void 0,function(){var s,o;return M(this,function(l){switch(l.label){case 0:return s=[],!((o=a.threadInfo)===null||o===void 0)&&o.replyCount&&a.threadInfo.replyCount>0?[4,this.getAllChildMessages(a)]:[3,2];case 1:s=l.sent(),l.label=2;case 2:return s.length>0?(s.forEach(function(u){return u.applyParentMessage(a)}),[4,this.upsert(s)]):[3,4];case 3:l.sent(),l.label=4;case 4:return[2]}})})}))]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},n.prototype.remove=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l;return M(this,function(u){switch(u.label){case 0:if(!this.localCacheEnabled)return[3,8];u.label=1;case 1:u.trys.push([1,6,7,8]),r=je(t),i=r.next(),u.label=2;case 2:return i.done?[3,5]:(a=i.value,[4,this.collection.remove("".concat(a))]);case 3:u.sent(),u.label=4;case 4:return i=r.next(),[3,2];case 5:return[3,8];case 6:return s=u.sent(),o={error:s},[3,8];case 7:try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(o)throw o.error}return[7];case 8:return[2]}})})},n.prototype.removeMessagesOfChannel=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:t},index:js(ni.CHANNEL_LATEST)})]:[3,6];case 1:return i.sent(),[4,(r=this._cacheContext.preference).remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/sync"))];case 2:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/sync.meta"))];case 3:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/changelogs"))];case 4:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/changelogs.meta"))];case 5:i.sent(),i.label=6;case 6:return[2]}})})},n.prototype.removeUnderOffset=function(t,r){return A(this,void 0,void 0,function(){return M(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:t,createdAt:{"<":r}},index:js(ni.CHANNEL_LATEST)})]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},n.prototype.clear=function(){return A(this,void 0,void 0,function(){return M(this,function(t){switch(t.label){case 0:return this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},n.prototype.countBetween=function(t,r,i){return A(this,void 0,void 0,function(){var a,s=this;return M(this,function(o){switch(o.label){case 0:return this.localCacheEnabled?(a=js(ni.CHANNEL_LATEST),[4,this.collection.query({where:{channelUrl:t,"/where":function(l){var u=s._deserialize(l);return i.includes(u.createdAt)&&r.match(u)}},index:a}).count()]):[3,2];case 1:return[2,o.sent()];case 2:return[2,0]}})})},n.prototype.saveBlobs=function(t){return A(this,void 0,void 0,function(){var r=this;return M(this,function(i){switch(i.label){case 0:return[4,Promise.all(t.map(function(a){return A(r,void 0,void 0,function(){var s,o;return M(this,function(l){switch(l.label){case 0:return a instanceof Ir&&a.messageParams&&(s=a.messageParams).file&&tp(s.file)?[4,this.collection.saveBlob(s.file,a.reqId)]:[3,2];case 1:o=l.sent(),s.fileKey=o,l.label=2;case 2:return[2]}})})}))];case 1:return i.sent(),[2]}})})},n.prototype._getGroupChannelPreferenceSize=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l;return M(this,function(u){switch(u.label){case 0:return r=0,[4,(i=this._cacheContext.preference).get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/sync"))];case 1:return a=u.sent(),[4,i.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/sync.meta"))];case 2:return s=u.sent(),[4,i.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/changelogs"))];case 3:return o=u.sent(),[4,i.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/changelogs.meta"))];case 4:return l=u.sent(),a&&(r+=JSON.stringify(a).length),s&&(r+=JSON.stringify(s).length),o&&(r+=JSON.stringify(o).length),l&&(r+=JSON.stringify(l).length),[2,r]}})})},n}(Ur),xv={},e4=function(e){function n(t){var r=e.call(this,t)||this;return xv[t]=r,r}return B(n,e),Object.defineProperty(n.prototype,"_sdkState",{get:function(){return Y.of(this._iid).sdkState},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_cacheContext",{get:function(){return Y.of(this._iid).cacheContext},enumerable:!1,configurable:!0}),n.of=function(t,r){return r===void 0&&(r=!1),xv[t]&&!r||(xv[t]=new n(t)),xv[t]},Object.defineProperty(n.prototype,"collection",{get:function(){var t=this._cacheContext.nestdb;return ke(!!t).throw(J.databaseError),t.collection(jw)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),n.prototype._serialize=function(t){return W({},t.serialize())},n.prototype._deserialize=function(t){return xr.of(this._iid).buildMessageFromSerializedData(t)},n.prototype.get=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.getByKey(t)]:[3,2];case 1:if(r=i.sent())return[2,this._deserialize(r)];i.label=2;case 2:return[2,void 0]}})})},n.prototype.fetch=function(t){var r=t.channelUrl,i=t.token,a=t.limit,s=a===void 0?100:a,o=t.filter,l=o===void 0?new Xs:o,u=t.backward,d=u!==void 0&&u,f=t.exactMatch,p=f!==void 0&&f,m=t.inclusive,E=m===void 0||m;return A(this,void 0,void 0,function(){var g,y=this;return M(this,function(S){switch(S.label){case 0:return this.localCacheEnabled?(g={where:{channelUrl:r,"/where":function(C){if(i){if(p&&C.createdAt!==i)return!1;if(d){if(E&&C.createdAt<i||!E&&C.createdAt<=i)return!1}else if(E&&C.createdAt>i||!E&&C.createdAt>=i)return!1}return l.match(y._deserialize(C))}},index:["channelUrl","-createdAt","-notificationId"],backward:d},[4,this.collection.query(g)]):[3,3];case 1:return[4,S.sent().fetch({limit:s??void 0})];case 2:return[2,S.sent().map(function(C){return y._deserialize(C)})];case 3:return[2,[]]}})})},n.prototype.upsert=function(t){return A(this,void 0,void 0,function(){var r,i=this;return M(this,function(a){switch(a.label){case 0:return this.localCacheEnabled?(r=t.map(function(s){return i._serialize(s)}),[4,this.collection.upsertMany(r)]):[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},n.prototype.remove=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l;return M(this,function(u){switch(u.label){case 0:if(!this.localCacheEnabled)return[3,8];u.label=1;case 1:u.trys.push([1,6,7,8]),r=je(t),i=r.next(),u.label=2;case 2:return i.done?[3,5]:(a=i.value,[4,this.collection.remove(a)]);case 3:u.sent(),u.label=4;case 4:return i=r.next(),[3,2];case 5:return[3,8];case 6:return s=u.sent(),o={error:s},[3,8];case 7:try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(o)throw o.error}return[7];case 8:return[2]}})})},n.prototype.markAsReadByTimestamp=function(t,r){return A(this,void 0,void 0,function(){return M(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.updateIf({where:{channelUrl:t,messageStatus:Eu.SENT,createdAt:{"<":r}}},{set:{messageStatus:Eu.READ}})]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},n.prototype.markAsReadByMessageIds=function(t,r){return A(this,void 0,void 0,function(){return M(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.updateIf({where:{channelUrl:t,notificationId:{"/in":r},messageStatus:Eu.SENT}},{set:{messageStatus:Eu.READ}})]:[3,2];case 1:return[2,i.sent().length];case 2:return[2,0]}})})},n.prototype.removeMessagesOfChannel=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:t},index:["channelUrl","-createdAt","-notificationId"]})]:[3,6];case 1:return i.sent(),[4,(r=this._cacheContext.preference).remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/sync"))];case 2:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/sync.meta"))];case 3:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/changelogs"))];case 4:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/changelogs.meta"))];case 5:i.sent(),i.label=6;case 6:return[2]}})})},n.prototype.removeUnderOffset=function(t,r){return A(this,void 0,void 0,function(){return M(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:t,createdAt:{"<":r}},index:js(ni.CHANNEL_LATEST)})]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},n.prototype.clear=function(){return A(this,void 0,void 0,function(){return M(this,function(t){switch(t.label){case 0:return this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},n.prototype.countBetween=function(t,r,i){return A(this,void 0,void 0,function(){var a,s=this;return M(this,function(o){switch(o.label){case 0:return this.localCacheEnabled?(a=["channelUrl","-createdAt","-notificationId"],[4,this.collection.query({where:{channelUrl:t,"/where":function(l){var u=s._deserialize(l);return i.includes(u.createdAt)&&r.match(u)}},index:a}).count()]):[3,2];case 1:return[2,o.sent()];case 2:return[2,0]}})})},n}(Ur),Qd={},$w=function(e){function n(t){var r=e.call(this,t)||this;return r._observers=new Map,r._dispatcherContext=r._dispatcher.on(function(i){return A(r,void 0,void 0,function(){var a,s,o,l,u,d,f,p,m,E,g,y,S,C,T,I,L,D,O,R=this;return M(this,function(k){switch(k.label){case 0:return i instanceof Xn?(a=i.messages,O=i.source,d=i.isWebSocketEventComing,s=a.filter(function(P){return P instanceof Ni&&P.channelType!==cn.OPEN&&P.messageId>0}),o=a.filter(function(P){return P instanceof Ni&&P.channelType!==cn.OPEN&&P.messageId===0}),l=a.filter(function(P){return P instanceof wu}),s.length>0?[4,mr(function(){return A(R,void 0,void 0,function(){return M(this,function(P){switch(P.label){case 0:return[4,this._messageCache.upsert(s)];case 1:return P.sent(),[4,this._unsentMessageCache.remove(s.map(function(G){return G instanceof dr?G.reqId:null}).filter(function(G){return G!==null}))];case 2:return P.sent(),[2]}})})})]:[3,2]):[3,7];case 1:k.sent(),d||this._broadcastUpdateEvent(s,O),k.label=2;case 2:return o.length>0?[4,mr(function(){return A(R,void 0,void 0,function(){return M(this,function(P){switch(P.label){case 0:return[4,this._unsentMessageCache.upsert(o)];case 1:return P.sent(),[2]}})})})]:[3,4];case 3:k.sent(),d||this._broadcastUpdateEvent(o,O),k.label=4;case 4:return l.length>0?[4,mr(function(){return A(R,void 0,void 0,function(){return M(this,function(P){switch(P.label){case 0:return[4,this._notificationCache.upsert(l)];case 1:return P.sent(),[2]}})})})]:[3,6];case 5:k.sent(),d||this._broadcastUpdateEvent(l,O),k.label=6;case 6:return[3,24];case 7:return i instanceof Uy?(u=i.messageIds,O=i.source,d=i.isWebSocketEventComing,f=u.filter(function(P){return typeof P=="number"}),p=u.filter(function(P){return typeof P=="string"}),[4,mr(function(){return A(R,void 0,void 0,function(){return M(this,function(P){switch(P.label){case 0:return f.length>0?[4,this._messageCache.remove(f)]:[3,2];case 1:P.sent(),P.label=2;case 2:return p.length>0?[4,this._notificationCache.remove(p)]:[3,4];case 3:P.sent(),P.label=4;case 4:return[2]}})})})]):[3,9];case 8:return k.sent(),d||this._broadcastRemoveEvent(u,O),[3,24];case 9:return i instanceof hw?(m=i.reqId,O=i.source,[4,mr(function(){return A(R,void 0,void 0,function(){return M(this,function(P){switch(P.label){case 0:return[4,this._unsentMessageCache.remove([m])];case 1:return P.sent(),[2]}})})})]):[3,11];case 10:return k.sent(),this._broadcastRemoveUnsentEvent(m,O),[3,24];case 11:return i instanceof fw?(E=i.polls,O=i.source,this._cacheContext.localCacheEnabled?(g=E.map(function(P){return P.messageId}),[4,Promise.all(g.map(function(P){return R._messageCache.get(P)}))]):[3,14]):[3,15];case 12:return(y=k.sent().filter(function(P){return P})).length>0&&E.forEach(function(P){var G=y.find(function(V){return V.messageId===P.messageId});G&&G.applyPoll(P)}),[4,mr(function(){return A(R,void 0,void 0,function(){return M(this,function(P){switch(P.label){case 0:return[4,this._messageCache.upsert(y)];case 1:return[2,P.sent()]}})})})];case 13:k.sent(),k.label=14;case 14:return this._broadcastPollChangeLogEvent(E,O),[3,24];case 15:return i instanceof ky?(S=i.event,O=i.source,[4,this._messageCache.get(S.messageId)]):[3,19];case 16:return(C=k.sent())&&C.isUserMessage()&&C.poll&&C.poll.applyPollUpdateEvent(S)?[4,mr(function(){return A(R,void 0,void 0,function(){return M(this,function(P){switch(P.label){case 0:return[4,this._messageCache.upsert([C])];case 1:return[2,P.sent()]}})})})]:[3,18];case 17:k.sent(),k.label=18;case 18:return this._broadcastPollUpdateEvent(S,O),[3,24];case 19:return i instanceof am?(T=i.event,O=i.source,[4,this._messageCache.get(T.messageId)]):[3,23];case 20:return(I=k.sent())&&I.isUserMessage()&&I.poll&&I.poll.applyPollVoteEvent(T)?[4,mr(function(){return A(R,void 0,void 0,function(){return M(this,function(P){switch(P.label){case 0:return[4,this._messageCache.upsert([I])];case 1:return[2,P.sent()]}})})})]:[3,22];case 21:k.sent(),k.label=22;case 22:return this._broadcastPollVoteEvent(T,O),[3,24];case 23:i instanceof cw?(L=i.event,O=i.source,L.messageId>0&&this._broadcastReactionUpdateEvent(L,O)):i instanceof dw&&(D=i.event,O=i.source,this._broadcastThreadUpdateEvent(D,O)),k.label=24;case 24:return[2]}})})}),r}return B(n,e),Object.defineProperty(n.prototype,"_cacheContext",{get:function(){return Y.of(this._iid).cacheContext},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_dispatcher",{get:function(){return Y.of(this._iid).dispatcher},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_messageCache",{get:function(){return jc.of(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_unsentMessageCache",{get:function(){return Ou.of(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_notificationCache",{get:function(){return e4.of(this._iid)},enumerable:!1,configurable:!0}),n.of=function(t,r){var i;return r===void 0&&(r=!1),Qd[t]&&!r||(Qd[t]&&((i=Qd[t]._dispatcherContext)===null||i===void 0||i.close()),Qd[t]=new n(t)),Qd[t]},n.prototype._broadcastUpdateEvent=function(t,r){var i,a;try{for(var s=je(this._observers.values()),o=s.next();!o.done;o=s.next()){var l=o.value;l.onUpdate&&l.onUpdate(t,r)}}catch(u){i={error:u}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastPollChangeLogEvent=function(t,r){var i,a;try{for(var s=je(this._observers.values()),o=s.next();!o.done;o=s.next()){var l=o.value;l.onPollChangeLogUpdate&&l.onPollChangeLogUpdate(t,r)}}catch(u){i={error:u}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastPollUpdateEvent=function(t,r){var i,a;try{for(var s=je(this._observers.values()),o=s.next();!o.done;o=s.next()){var l=o.value;l.onPollUpdate&&l.onPollUpdate(t,r)}}catch(u){i={error:u}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastPollVoteEvent=function(t,r){var i,a;try{for(var s=je(this._observers.values()),o=s.next();!o.done;o=s.next()){var l=o.value;l.onPollVote&&l.onPollVote(t,r)}}catch(u){i={error:u}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastRemoveEvent=function(t,r){var i,a;try{for(var s=je(this._observers.values()),o=s.next();!o.done;o=s.next()){var l=o.value;l.onRemove&&l.onRemove(t,r)}}catch(u){i={error:u}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastRemoveUnsentEvent=function(t,r){var i,a;try{for(var s=je(this._observers.values()),o=s.next();!o.done;o=s.next()){var l=o.value;l.onRemoveUnsent&&l.onRemoveUnsent(t,r)}}catch(u){i={error:u}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastReactionUpdateEvent=function(t,r){var i,a;try{for(var s=je(this._observers.values()),o=s.next();!o.done;o=s.next()){var l=o.value;l.onReactionUpdate&&l.onReactionUpdate(t,r)}}catch(u){i={error:u}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastThreadUpdateEvent=function(t,r){var i,a;try{for(var s=je(this._observers.values()),o=s.next();!o.done;o=s.next()){var l=o.value;l.onThreadInfoUpdate&&l.onThreadInfoUpdate(t,r)}}catch(u){i={error:u}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype.subscribe=function(t,r){this._observers.set(t,r)},n.prototype.unsubscribe=function(t){this._observers.delete(t)},n.prototype.unsubscribeAll=function(){this._observers.clear()},n}(Ur),t4=function(e){function n(t){var r=this,i=t.reverse,a=i!==void 0&&i,s=t.limit,o=s===void 0?20:s,l=t.keys,u=t.token;return(r=e.call(this)||this).method=we.GET,r.path="".concat(MA),r.params=Xe({token:u,limit:o,reverse:a,order:gg.UPDATED_AT,show_ui_template:!0,show_color_variables:!0,keys:l}),r}return B(n,e),n}(Re),n4=function(e){function n(t,r){var i=e.call(this,t,r)||this,a=r.next,s=r.has_more,o=s!==void 0&&s,l=r.templates;return i.nextToken=a,i.hasMore=o,i.templates=l.map(function(u){return{template:JSON.stringify(u)}}),i}return B(n,e),n}(He),r4=function(e){function n(t){var r=this,i=t.key;return(r=e.call(this)||this).method=we.GET,r.path="".concat(MA,"/").concat(i),r}return B(n,e),n}(Re),i4=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.template=JSON.stringify(r),i}return B(n,e),n}(He),HT={},xr=function(){function e(n,t){var r=t.sdkState,i=t.dispatcher,a=t.requestQueue,s=t.onlineDetector,o=t.cacheContext;this._iid=n,this._sdkState=r,this._requestQueue=a,this._dispatcher=i,this._cacheContext=o,jc.of(n),Ou.of(n),$w.of(n),this.fileMessageQueue=new eP(n,{sdkState:r,dispatcher:i,requestQueue:a,onlineDetector:s,cacheContext:o}),HT[n]=this}return e.of=function(n){return HT[n]},e.prototype.buildMessageFromSerializedData=function(n){var t=Tl(n);if(t.notificationId)return new wu(this._iid,wu.payloadify(t));switch(t.messageType){case ir.USER:return new vi(this._iid,vi.payloadify(t));case ir.FILE:return Ua._isMultipleFilesMessageSerializedData(t)?new Ua(this._iid,Ua.payloadify(t)):new Ir(this._iid,Ir.payloadify(t));case ir.ADMIN:return new Au(this._iid,Au.payloadify(t))}throw J.invalidParameters},e.prototype.buildUserMessageCreateParamsFromSerializedData=function(n,t){return Xe(_t({data:t.data,customType:t.customType,mentionType:t.mentionType,mentionedUserIds:t.mentionedUserIds,mentionedUsers:t.mentionedUsers,mentionedMessageTemplate:t.mentionedMessageTemplate,metaArrays:t.metaArrays,parentMessageId:t.parentMessageId,isReplyToChannel:n.isReplyToChannel,pushNotificationDeliveryOption:n.pushNotificationDeliveryOption,appleCriticalAlertOptions:t.appleCriticalAlertOptions,reqId:t.reqId,message:t.message,translationTargetLanguages:Object.keys(t.translations),pollId:n.pollId}))},e.prototype.buildFileMessageCreateParamsFromSerializedData=function(n,t){var r;return Xe(_t({data:t.data,customType:t.customType,mentionType:t.mentionType,mentionedUserIds:t.mentionedUserIds,mentionedUsers:t.mentionedUsers,mentionedMessageTemplate:t.mentionedMessageTemplate,metaArrays:t.metaArrays,parentMessageId:t.parentMessageId,isReplyToChannel:n.isReplyToChannel,pushNotificationDeliveryOption:n.pushNotificationDeliveryOption,appleCriticalAlertOptions:t.appleCriticalAlertOptions,reqId:t.reqId,file:n.file,fileKey:n.fileKey,fileUrl:t.plainUrl,fileName:t.name,fileSize:t.size,mimeType:t.type,thumbnailSizes:(r=t.thumbnails)===null||r===void 0?void 0:r.map(function(i){return{maxWidth:i.width,maxHeight:i.height}}),fileType:n.fileType,requireAuth:t.requireAuth}))},e.prototype.buildMultipleFilesMessageCreateParamsFromSerializedData=function(n,t){var r=this;return Xe({data:t.data,customType:t.customType,mentionType:t.mentionType,mentionedUserIds:t.mentionedUserIds,mentionedUsers:t.mentionedUsers,mentionedMessageTemplate:t.mentionedMessageTemplate,metaArrays:t.metaArrays,parentMessageId:t.parentMessageId,isReplyToChannel:n.isReplyToChannel,pushNotificationDeliveryOption:n.pushNotificationDeliveryOption,appleCriticalAlertOptions:t.appleCriticalAlertOptions,reqId:t.reqId,fileInfoList:n.fileInfoList.map(function(i){return new Rp(r._iid,i)})})},e.prototype.buildScheduledUserMessageCreateParamsFromSerializedData=function(n,t){return W(W({},this.buildUserMessageCreateParamsFromSerializedData(n,t)),{scheduledAt:n.scheduledAt})},e.prototype.buildScheduledFileMessageCreateParamsFromSerializedData=function(n,t){return W(W({},this.buildFileMessageCreateParamsFromSerializedData(n,t)),{scheduledAt:n.scheduledAt})},e.prototype.buildSenderFromSerializedData=function(n){var t=Tl(n);return new Zc(this._iid,Zc.payloadify(t))},e.prototype.getMessage=function(n){return A(this,void 0,void 0,function(){var t,r;return M(this,function(i){switch(i.label){case 0:return t=new tP(n),[4,this._requestQueue.send(t)];case 1:return r=i.sent(),[2,r.as(nP).message]}})})},e.prototype.getScheduledMessage=function(n){return A(this,void 0,void 0,function(){var t,r;return M(this,function(i){switch(i.label){case 0:return t=new aP(n),[4,this._requestQueue.send(t)];case 1:return r=i.sent(),[2,r.as(sP).message]}})})},e.prototype.getMessagesByMessageId=function(n,t,r,i,a){return a===void 0&&(a=ve.REQUEST_MESSAGE),A(this,void 0,void 0,function(){var s,o,l;return M(this,function(u){switch(u.label){case 0:return s=new wv(W(W({channelType:t,channelUrl:n,token:String(r)},Dh),i)),[4,this._requestQueue.send(s)];case 1:return o=u.sent(),l=o.as(Rv).messages,this._dispatcher.dispatch(new Xn({messages:l,source:a})),[2,l]}})})},e.prototype.getMessagesByTimestamp=function(n,t,r,i,a){return a===void 0&&(a=ve.REQUEST_MESSAGE),A(this,void 0,void 0,function(){var s,o,l;return M(this,function(u){switch(u.label){case 0:return s=new wv(W(W({channelType:t,channelUrl:n,timestamp:r},Dh),i)),[4,this._requestQueue.send(s)];case 1:return o=u.sent(),l=o.as(Rv).messages,this._dispatcher.dispatch(new Xn({messages:l,source:a})),[2,l]}})})},e.prototype._getMessagesByTimestampForCollection=function(n,t,r,i,a,s,o){return a===void 0&&(a=ve.REQUEST_MESSAGE),A(this,void 0,void 0,function(){var l,u,d,f,p,m;return M(this,function(E){switch(E.label){case 0:return l=new wv(W(W(W({channelType:t,channelUrl:n,timestamp:r},Dh),i),{checkingHasNext:s,checkingContinuousMessages:o})),[4,this._requestQueue.send(l)];case 1:return u=E.sent(),d=u.as(Rv),f=d.messages,p=d.isContinuousMessages,m=d.hasNext,this._dispatcher.dispatch(new Xn({messages:f,source:a})),[2,{messages:f,isContinuousMessages:p,hasNext:m}]}})})},e.prototype.getThreadedMessagesByTimestamp=function(n,t,r,i){return i===void 0&&(i=ve.REQUEST_THREADED_MESSAGE),A(this,void 0,void 0,function(){var a,s,o,l;return M(this,function(u){switch(u.label){case 0:return a=new wv(W(W(W({channelUrl:n.channelUrl,channelType:n.channelType,timestamp:t},of),r),{replyType:Ar.ALL,parentMessageId:n.messageId,includeThreadInfo:!0})),[4,this._requestQueue.send(a)];case 1:return s=u.sent(),o=s.as(Rv).messages,(l=o.slice(1)).forEach(function(d){d.parentMessage=n}),this._dispatcher.dispatch(new Xn({messages:l,source:i})),[2,{parentMessage:o[0],threadedMessages:l}]}})})},e.prototype.getMessageTemplatesByToken=function(n,t){return t===void 0&&(t={}),A(this,void 0,void 0,function(){var r,i,a,s,o,l;return M(this,function(u){switch(u.label){case 0:return r=new t4(W({token:n},t)),[4,this._requestQueue.send(r)];case 1:return i=u.sent(),a=i.as(n4),s=a.hasMore,o=a.nextToken,l=a.templates,[2,{hasMore:s,token:o,templates:l}]}})})},e.prototype.getMessageTemplate=function(n){return A(this,void 0,void 0,function(){var t,r;return M(this,function(i){switch(i.label){case 0:return t=new r4({key:n}),[4,this._requestQueue.send(t)];case 1:return r=i.sent(),[2,{template:r.as(i4).template}]}})})},e.prototype.getMessageChangelogs=function(n,t,r,i,a){return a===void 0&&(a=ve.REQUEST_MESSAGE_CHANGELOGS),A(this,void 0,void 0,function(){var s,o,l,u,d,f,p,m;return M(this,function(E){switch(E.label){case 0:return s=new rP(Xe(_t(W(W({channelType:t,channelUrl:n,timestamp:typeof r=="number"?r:null,token:typeof r=="string"?r:null},Og),i)))),[4,this._requestQueue.send(s)];case 1:return o=E.sent(),l=o.as(iP),u=l.updatedMessages,d=l.deletedMessagesInfo,f=l.hasMore,p=l.nextToken,m=d.map(function(g){return g.messageId}),u.length>0&&this._dispatcher.dispatch(new Xn({messages:u,source:a})),m.length>0&&this._dispatcher.dispatch(new Uy({messageIds:m,source:a})),[2,{updatedMessages:u,deletedMessageIds:m,hasMore:f,token:p}]}})})},e}(),Ww=function(e){function n(t,r){var i=e.call(this,t)||this;i.targetMessageId=0;var a=r.thread_info,s=r.parent_message_id,o=r.channel_url,l=r.channel_type;return a&&X("object",a)&&X("number",s)&&X("string",o)&&X("string",l)&&(i.threadInfo=new wp(t,a),i.targetMessageId=s,i.channelUrl=o,i.channelType=l),i}return B(n,e),n}(Ur),a4={channelUrl:"",channelType:cn.BASE,messageId:0,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1,includeThreadInfo:!1},s4=function(e){function n(t){var r=t.channelCustomType,i=t.keyword,a=t.limit,s=t.reverse,o=t.exactMatch,l=t.channelUrl,u=t.order,d=t.messageTimestampFrom,f=t.messageTimestampTo,p=t.advancedQuery,m=t.targetFields,E=t.nextToken,g=e.call(this)||this;return g.method=we.GET,g.path="".concat(xL,"/messages"),g.params={custom_type:r,query:i,limit:a,reverse:s,exact_match:o,channel_url:l,message_ts_from:d,message_ts_to:f,sort_field:u,advanced_query:p,target_fields:m,after:E},g}return B(n,e),n}(Re),o4=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.messages=r.results.map(function(a){return Ei(t,a)}),i.hasNext=r.has_next,i.nextToken=r.end_cursor,i.totalCount=r.total_count,i}return B(n,e),n}(He);(function(e){e.SCORE="score",e.TIMESTAMP="ts"})(kh||(kh={}));var l4=function(e){function n(t,r){var i,a,s,o,l,u,d,f,p,m=this;return(m=e.call(this,t,r)||this).keyword="",m.reverse=!1,m.exactMatch=!1,m.channelUrl="",m.channelCustomType="",m.messageTimestampFrom=null,m.messageTimestampTo=null,m.order=kh.SCORE,m.advancedQuery=!1,m.targetFields=null,m._nextToken="",m.totalCount=-1,m.keyword=r.keyword,m.reverse=(i=r.reverse)!==null&&i!==void 0&&i,m.exactMatch=(a=r.exactMatch)!==null&&a!==void 0&&a,m.channelUrl=(s=r.channelUrl)!==null&&s!==void 0?s:"",m.channelCustomType=(o=r.channelCustomType)!==null&&o!==void 0?o:"",m.messageTimestampFrom=(l=r.messageTimestampFrom)!==null&&l!==void 0?l:null,m.messageTimestampTo=(u=r.messageTimestampTo)!==null&&u!==void 0?u:null,m.order=(d=r.order)!==null&&d!==void 0?d:kh.SCORE,m.advancedQuery=(f=r.advancedQuery)!==null&&f!==void 0&&f,m.targetFields=(p=r.targetFields)!==null&&p!==void 0?p:null,m}return B(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&X("string",this.keyword)&&this.keyword.length>0&&X("boolean",this.reverse)&&X("boolean",this.exactMatch)&&X("string",this.channelUrl)&&X("string",this.channelCustomType)&&(X("number",this.messageTimestampFrom)||this.messageTimestampFrom===null)&&(X("number",this.messageTimestampTo)||this.messageTimestampTo===null)&&tn(kh,this.order)&&X("boolean",this.advancedQuery)&&nn("string",this.targetFields,!0)},n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u;return M(this,function(d){switch(d.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=Y.of(this._iid).requestQueue,r=new s4(_t(W(W({},this),{nextToken:this._nextToken?this._nextToken:null}))),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=d.sent(),a=i.as(o4),s=a.messages,o=a.hasNext,l=a.nextToken,u=a.totalCount,this._nextToken=l,this._hasNext=o,this._isLoading=!1,this.totalCount=u,[2,s];case 2:return[2,[]];case 3:throw J.queryInProgress;case 4:return[3,6];case 5:throw J.invalidParameters;case 6:return[2]}})})},n}(Uo),u4=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.limit,s=t.token,o=e.call(this)||this;return o.method=we.GET,o.path="".concat(Nn(r),"/").concat(encodeURIComponent(i),"/messages/parent_thread_message"),o.params=Xe(_t({limit:a,token:s})),o}return B(n,e),n}(Re),c4=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.token=r.next,i.messages=r.messages.map(function(a){return Ei(t,a)}),i}return B(n,e),n}(He),d4=function(e){function n(t,r,i,a){var s=e.call(this,t,r,i,a)||this;return s._edge="",s}return B(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)},n.prototype.load=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return M(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=Y.of(this._iid).requestQueue,r=new u4({channelType:this.channelType,channelUrl:this.channelUrl,token:this._edge,limit:this.limit}),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),a=i.as(c4),s=a.messages,o=a.token,this._edge=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw J.queryInProgress;case 4:return[3,6];case 5:throw J.invalidParameters;case 6:return[2]}})})},n}(Js),h4={channelUrl:"",scheduledMessageId:0},f4={reverse:!1,limit:20},v4=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.name="message",t}return B(n,e),n.prototype.init=function(t,r){var i=r.sdkState,a=r.dispatcher,s=r.sessionManager,o=r.requestQueue,l=r.logger,u=r.onlineDetector,d=r.cacheContext;e.prototype.init.call(this,t,{sdkState:i,dispatcher:a,sessionManager:s,requestQueue:o,logger:l,onlineDetector:u,cacheContext:d}),this._manager=new xr(t,{sdkState:i,dispatcher:a,requestQueue:o,onlineDetector:u,cacheContext:d})},n.prototype.buildMessageFromSerializedData=function(t){return this._manager.buildMessageFromSerializedData(t)},n.prototype.buildSenderFromSerializedData=function(t){return this._manager.buildSenderFromSerializedData(t)},n.prototype.getMessage=function(t){return A(this,void 0,void 0,function(){var r,i;return M(this,function(a){switch(a.label){case 0:return r=W(W({},a4),t),ke(function(s){return X("string",s.channelUrl)&&tn(cn,s.channelType)&&X("number",s.messageId)&&X("boolean",s.includeReactions,!0)&&X("boolean",s.includeMetaArray,!0)&&X("boolean",s.includeParentMessageInfo,!0)&&X("boolean",s.includeThreadInfo,!0)}(r)).throw(J.invalidParameters),[4,this._manager.getMessage(r)];case 1:if((i=a.sent())instanceof Ni||i instanceof wu||i===null)return[2,i];throw"Unknown message type is given."}})})},n.prototype.getScheduledMessage=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){return r=W(W({},h4),t),ke(function(a){return X("string",a.channelUrl)&&a.channelUrl!==""&&X("number",a.scheduledMessageId)&&a.scheduledMessageId>0}(r)).throw(J.invalidParameters),[2,this._manager.getScheduledMessage(r)]})})},n.prototype.getMessageTemplatesByToken=function(t,r){return r===void 0&&(r={}),A(this,void 0,void 0,function(){var i;return M(this,function(a){return i=W(W({},f4),r),ke(X("string",t,!0)&&function(s){return X("boolean",s.reverse,!0)&&X("number",s.limit,!0)&&nn("string",s.keys,!0)}(i)).throw(J.invalidParameters),[2,this._manager.getMessageTemplatesByToken(t,i)]})})},n.prototype.getMessageTemplate=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){return ke(X("string",t)).throw(J.invalidParameters),[2,this._manager.getMessageTemplate(t)]})})},n}(im),er,Ph,xg;(function(e){e.LATEST_LAST_MESSAGE="latest_last_message",e.CHRONOLOGICAL="chronological",e.CHANNEL_NAME_ALPHABETICAL="channel_name_alphabetical",e.METADATA_VALUE_ALPHABETICAL="metadata_value_alphabetical"})(er||(er={})),function(e){e.CHRONOLOGICAL="chronological",e.CHANNEL_NAME_ALPHABETICAL="channel_name_alphabetical",e.METADATA_VALUE_ALPHABETICAL="metadata_value_alphabetical"}(Ph||(Ph={})),function(e){e.CREATED_AT="created_at",e.SCHEDULED_AT="scheduled_at"}(xg||(xg={}));var $h,ip=function(e){switch(e){case er.LATEST_LAST_MESSAGE:return["-lastMessageUpdatedAt","-createdAt","syncIndex"];case er.CHRONOLOGICAL:return["-createdAt","syncIndex"];case er.CHANNEL_NAME_ALPHABETICAL:return["name"];default:return["-lastMessageUpdatedAt","-createdAt","syncIndex"]}},Qw=function(e){function n(t){var r=t.message,i=e.call(this)||this;return i.message=r,i}return B(n,e),n}(ar),BT={},ph=function(){function e(n,t){var r=t.localCacheEnabled,i=t.enableAutoResend,a=t.dispatcher,s=t.sdkState,o=t.logger,l=this;this._iid=n,BT[n]=this,this._localCacheEnabled=r,this._enableAutoResend=i,this._isProcessingAutoResend=!1,this._autoResendQueue=[],this._dispatcher=a,this._logger=o,this._sdkState=s,this._localCacheEnabled&&a.on(function(u){if(u instanceof pa)switch(u.stateType){case On.CONNECTED:l._isProcessingAutoResend||l.processAutoResendRegisteredPendingMessages().then(function(){return l._processNextAutoResend()});break;case On.INTERNAL_DISCONNECTED:case On.EXTERNAL_DISCONNECTED:l._isProcessingAutoResend=!1}})}return e.of=function(n){return BT[n]},e.prototype.processNonAutoResendRegisteredPendingMessages=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a,s;return M(this,function(o){switch(o.label){case 0:return this._enableAutoResend?[4,this._fetchAllCachedPendingMessages()]:[2];case 1:n=o.sent();try{for(t=je(n),r=t.next();!r.done;r=t.next())(i=r.value).errorCode===0&&(this._logger.debug("cached pending message is not auto-resend registered. changing its sending status to failed: ",i.reqId),i.sendingStatus=yn.FAILED,i.errorCode=at.ACK_TIMEOUT,this._dispatcher.dispatch(new Xn({messages:[i],source:ve.LOCAL_MESSAGE_FAILED})))}catch(l){a={error:l}}finally{try{r&&!r.done&&(s=t.return)&&s.call(t)}finally{if(a)throw a.error}}return[2]}})})},e.prototype.processAutoResendRegisteredPendingMessages=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a,s,o,l;return M(this,function(u){switch(u.label){case 0:return[4,this._fetchAllCachedPendingMessages()];case 1:n=u.sent();try{for(t=je(n),r=t.next();!r.done;r=t.next())i=r.value,this._enableAutoResend&&i.errorCode&&mp(i.errorCode)&&(a=new Date().getTime(),s=i.createdAt+2592e5,this._enableAutoResend&&a<=s?this._autoResendQueue.map(function(d){return d.reqId}).indexOf(i.reqId)<0&&this._autoResendQueue.push(i):(this._logger.debug("auto-resend registered pending messaged expired. expiration date: ",new Date(s).toLocaleString()),i.sendingStatus=yn.FAILED,this._dispatcher.dispatch(new Xn({messages:[i],source:ve.LOCAL_MESSAGE_FAILED}))))}catch(d){o={error:d}}finally{try{r&&!r.done&&(l=t.return)&&l.call(t)}finally{if(o)throw o.error}}return[2]}})})},e.prototype.completeCurrentAndProcessNextAutoResend=function(n){if(this._localCacheEnabled&&this._enableAutoResend&&(n.sendingStatus===yn.SUCCEEDED||n.sendingStatus===yn.FAILED&&!mp(n.errorCode))){var t=this.indexOf(n);t>=0&&this._autoResendQueue.splice(t,1),t===0&&this._processNextAutoResend()}},e.prototype._fetchAllCachedPendingMessages=function(){return A(this,void 0,void 0,function(){var n,t;return M(this,function(r){switch(r.label){case 0:return n=Ou.of(this._iid),(t=new Xs).replyType=Ar.ALL,[4,n.fetch({sendingStatus:yn.PENDING,backward:!0,filter:t})];case 1:return[2,r.sent()]}})})},e.prototype.indexOf=function(n){return this._autoResendQueue.length>0?this._autoResendQueue.map(function(t){return t.reqId}).indexOf(n.reqId):-1},e.prototype._isNotInQueue=function(n){return this._autoResendQueue.map(function(t){return t.reqId}).indexOf(n.reqId)===-1},e.prototype._processNextAutoResend=function(){return A(this,void 0,void 0,function(){var n;return M(this,function(t){if(this._localCacheEnabled&&this._enableAutoResend&&this._sdkState.appState==="foreground")try{this._autoResendQueue.length>0?(this._isProcessingAutoResend||(this._logger.debug("auto-resend queue started."),this._isProcessingAutoResend=!0),n=this._autoResendQueue[0],this._dispatcher.dispatch(new Qw({message:n})),this._logger.debug("processing auto-resend for message request id: ",n.reqId)):(this._logger.debug("auto-resend queue finished."),this._isProcessingAutoResend=!1)}catch(r){this._logger.warn("process auto-resend error: ",r),this._isProcessingAutoResend=!1}return[2]})})},e}();(function(e){e[e.USER_BLOCK=20001]="USER_BLOCK",e[e.USER_UNBLOCK=2e4]="USER_UNBLOCK",e[e.FRIEND_DISCOVERED=20900]="FRIEND_DISCOVERED"})($h||($h={}));var kp=function(){function e(n){this.category=n.cat,this.data=n.data}return e.getDataAsUserBlockEvent=function(n,t){var r=t.data,i=r.blocker,a=r.blockee;return{blocker:new dn(n,i),blockee:new dn(n,a)}},e.getDataAsFriendDiscoveredEvent=function(n,t){var r=t.data.friend_discoveries;return{friendDiscoveries:Array.isArray(r)?r.map(function(i){return new dn(n,i)}):[]}},e}(),Yw=function(e){function n(t,r){var i=r.userId,a=e.call(this)||this;return a._iid=t,a.userId=i,a}return B(n,e),n}(ar),Xw=function(e){function n(){return e.call(this)||this}return B(n,e),n}(ar),Zw=function(e){function n(t,r,i){var a=e.call(this,t,"USEV",i)||this;return a.event=new kp(i),a}return B(n,e),n}(Wn),p4=function(e,n){this.pollId=0,this.messageId=0,this.pollId=n.poll.id,this.messageId=n.poll.message_id,this._iid=e,this._payload=n},Ln;(function(e){e[e.NONE=0]="NONE",e[e.CHANNEL_ENTER=10102]="CHANNEL_ENTER",e[e.CHANNEL_EXIT=10103]="CHANNEL_EXIT",e[e.USER_CHANNEL_MUTE=10201]="USER_CHANNEL_MUTE",e[e.USER_CHANNEL_UNMUTE=10200]="USER_CHANNEL_UNMUTE",e[e.USER_CHANNEL_BAN=10601]="USER_CHANNEL_BAN",e[e.USER_CHANNEL_UNBAN=10600]="USER_CHANNEL_UNBAN",e[e.CHANNEL_FREEZE=10701]="CHANNEL_FREEZE",e[e.CHANNEL_UNFREEZE=10700]="CHANNEL_UNFREEZE",e[e.TYPING_START=10900]="TYPING_START",e[e.TYPING_END=10901]="TYPING_END",e[e.CHANNEL_JOIN=1e4]="CHANNEL_JOIN",e[e.CHANNEL_LEAVE=10001]="CHANNEL_LEAVE",e[e.CHANNEL_OPERATOR_UPDATE=10002]="CHANNEL_OPERATOR_UPDATE",e[e.CHANNEL_INVITE=10020]="CHANNEL_INVITE",e[e.CHANNEL_ACCEPT_INVITE=10021]="CHANNEL_ACCEPT_INVITE",e[e.CHANNEL_DECLINE_INVITE=10022]="CHANNEL_DECLINE_INVITE",e[e.CHANNEL_PROP_CHANGED=11e3]="CHANNEL_PROP_CHANGED",e[e.CHANNEL_DELETED=12e3]="CHANNEL_DELETED",e[e.CHANNEL_META_DATA_CHANGED=11100]="CHANNEL_META_DATA_CHANGED",e[e.CHANNEL_META_COUNTERS_CHANGED=11200]="CHANNEL_META_COUNTERS_CHANGED",e[e.CHANNEL_HIDE=13e3]="CHANNEL_HIDE",e[e.CHANNEL_UNHIDE=13001]="CHANNEL_UNHIDE",e[e.PINNED_MESSAGE_CHANGED=11300]="PINNED_MESSAGE_CHANGED"})(Ln||(Ln={}));var m4=function(){function e(n){var t;this.channelUrl=n.channel_url,this.channelType=n.channel_type,this.category=n.cat,this.data=(t=n.data)!==null&&t!==void 0?t:{},this.ts=n.ts}return Object.defineProperty(e.prototype,"isGroupChannelEvent",{get:function(){return this.channelType===cn.GROUP},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpenChannelEvent",{get:function(){return this.channelType===cn.OPEN},enumerable:!1,configurable:!0}),e}(),Po=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return a.event=new m4(i),a}return B(n,e),n}(Wn),Jw=function(e){function n(t,r,i){var a=e.call(this,t,r,i)||this,s=i.data.operators,o=s===void 0?[]:s;return a.operators=o.map(function(l){return new dn(a._iid,l)}),a}return B(n,e),n}(Po),e2=function(e){function n(t,r,i){var a,s=this;return(s=e.call(this,t,"SYEV",i)||this).pinnedMessageIds=[],s.latestPinnedMessage=null,s.ts=0,i.data&&(s.pinnedMessageIds=(a=i.data.pinned_message_ids)!==null&&a!==void 0?a:[],s.latestPinnedMessage=i.data.latest_pinned_message?Ei(t,W({},i.data.latest_pinned_message)):null),s.ts=i.ts,s}return B(n,e),n}(Wn),t2=function(e){function n(t,r){var i=e.call(this,t)||this;return i._logger=r.logger,i._sdkState=r.sdkState,i._sessionManager=r.sessionManager,i._requestQueue=r.requestQueue,i._dispatcher=r.dispatcher,i._cacheContext=r.cacheContext,i._channelType=r.channelType,i}return B(n,e),Object.defineProperty(n.prototype,"_messageBroadcast",{get:function(){return $w.of(this._iid)},enumerable:!1,configurable:!0}),n.prototype.subscribeMessageEvent=function(t,r){this._messageBroadcast.subscribe(t,r)},n.prototype.unsubscribeMessageEvent=function(t){this._messageBroadcast.unsubscribe(t)},n.prototype.getMessageFromCache=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){return[2,null]})})},n.prototype.getExactlyMatchingMessagesForTokenFromCache=function(t,r,i){return A(this,void 0,void 0,function(){return M(this,function(a){return[2,[]]})})},n.prototype.getMessagesFromCache=function(t,r,i,a,s,o){return A(this,void 0,void 0,function(){return M(this,function(l){return[2,[]]})})},n.prototype.getPollMessagesFromCache=function(t,r,i,a){return A(this,void 0,void 0,function(){return M(this,function(s){return[2,[]]})})},n.prototype.getCachedMessageCountBetween=function(t,r,i,a){return A(this,void 0,void 0,function(){return M(this,function(s){return[2,0]})})},n.prototype.getUnsentMessagesFromCache=function(t,r){return A(this,void 0,void 0,function(){return M(this,function(i){return[2,[]]})})},n.prototype.removeFailedMessageFromCache=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){return[2]})})},n}(Ur),n2=function(e){function n(t,r,i){var a,s,o,l,u=this;(u=e.call(this,t,"ADMM",i)||this).message=new Au(t,i);var d=Y.of(t).sdkState;return u.isMentioned=Wc(u.message.mentionType,(o=(a=u.message.mentionedUserIds)!==null&&a!==void 0?a:(s=u.message.mentionedUsers)===null||s===void 0?void 0:s.map(function(f){return f.userId}))!==null&&o!==void 0?o:[],d.userId),u.forceUpdateLastMessage=(l=i.force_update_last_message)!==null&&l!==void 0&&l,u}return B(n,e),n}(Wn),r2=function(e){function n(t,r,i){var a,s,o,l,u,d=this;(d=e.call(this,t,"AEDI",i)||this).message=new Au(t,i);var f=Y.of(t).sdkState;return d.mentionCountChange=Ny({mentionType:(a=i.old_values)===null||a===void 0?void 0:a.mention_type,mentionedUserIds:(o=(s=i.old_values)===null||s===void 0?void 0:s.mentioned_user_ids)!==null&&o!==void 0?o:[]},_t({mentionType:d.message.mentionType,mentionedUserIds:(l=d.message.mentionedUserIds)!==null&&l!==void 0?l:(u=d.message.mentionedUsers)===null||u===void 0?void 0:u.map(function(p){return p.userId})}),f.userId),d}return B(n,e),n}(Wn),i2=function(e){function n(t,r,i){var a=e.call(this,t,"MRCT",i)||this;return a.channelUrl=i.channel_url,a.channelType=i.channel_type,a.event=new Py(i),a}return B(n,e),n}(Wn),a2=function(e){function n(t,r,i){var a=e.call(this,t,"MTHD",i)||this;return a.event=new Ww(t,i),a}return B(n,e),n}(Wn),s2=function(e){function n(t,r,i){var a=e.call(this,t,"MCNT",i)||this;return a.groupChannelMemberCounts=i.group_channels.map(function(s){return{channelUrl:s.channel_url,memberCount:s.member_count,joinedMemberCount:s.joined_member_count,updatedAt:s.ts}}),a.openChannelMemberCounts=i.open_channels.map(function(s){return{channelUrl:s.channel_url,participantCount:s.participant_count,updatedAt:s.ts}}),a}return B(n,e),n}(Wn),o2=function(e){function n(t,r,i){var a=e.call(this,t,"PEDI",i)||this;return a.event=new p4(t,i),a.status=Mg(i.poll.status)||i.poll.status,a.channelUrl=i.channel_url,a.channelType=i.channel_type,a}return B(n,e),n}(Wn),pr;(function(e){e.NONE="none",e.JOINED="joined",e.INVITED="invited",e.LEFT="left"})(pr||(pr={}));var Ws,Zi,ea,Il,ys,Wh,Io,Qh,Da=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.state=null,i.role=null,i.isMuted=!1,i.isBlockedByMe=!1,i.isBlockingMe=!1,i.state=tn(pr,r.state)?r.state:null,i.role=tn(ri,r.role)?r.role:null,typeof r.is_muted=="boolean"&&(i.isMuted=r.is_muted),typeof r.is_blocked_by_me=="boolean"&&(i.isBlockedByMe=r.is_blocked_by_me),typeof r.is_blocking_me=="boolean"&&(i.isBlockingMe=r.is_blocking_me),i}return B(n,e),n.payloadify=function(t){return Xe(_t(W(W({},e.payloadify.call(this,t)),{state:t.state,role:t.role,is_muted:t.isMuted,is_blocked_by_me:t.isBlockedByMe,is_blocking_me:t.isBlockingMe})))},n}(Hu),_4=function(e){function n(t,r){var i,a,s=this;return(s=e.call(this,t)||this).channelUrl=(i=r.channel_url)!==null&&i!==void 0?i:"",s.channelType=(a=r.channel_type)!==null&&a!==void 0?a:cn.GROUP,s.member=new dn(s._iid,r.user),s.deliveryAt=r.ts,s}return B(n,e),n}(Ur);(function(e){e.ALL="all",e.PUBLIC="public",e.PRIVATE="private"})(Ws||(Ws={})),function(e){e.ALL="all",e.JOINED="joined_only",e.INVITED="invited_only",e.INVITED_BY_FRIEND="invited_by_friend",e.INVITED_BY_NON_FRIEND="invited_by_non_friend"}(Zi||(Zi={})),function(e){e.ALL="all",e.SUPER="super",e.NON_SUPER="nonsuper",e.BROADCAST_ONLY="broadcast_only",e.EXCLUSIVE_ONLY="exclusive_only"}(ea||(ea={})),function(e){e.ALL="all",e.UNREAD_MESSAGE="unread_message"}(Il||(Il={})),function(e){e.ALL="all",e.UNHIDDEN="unhidden_only",e.HIDDEN="hidden_only",e.HIDDEN_ALLOW_AUTO_UNHIDE="hidden_allow_auto_unhide",e.HIDDEN_PREVENT_AUTO_UNHIDE="hidden_prevent_auto_unhide"}(ys||(ys={})),function(e){e.ALL="all",e.OPERATOR="operator",e.NONOPERATOR="nonoperator"}(Wh||(Wh={})),function(e){e.AND="AND",e.OR="OR"}(Io||(Io={})),function(e){e.MEMBER_NICKNAME="member_nickname",e.CHANNEL_NAME="channel_name"}(Qh||(Qh={}));var rr,cm=function(){function e(n){var t,r,i,a,s,o,l,u,d,f,p,m,E,g,y;this._searchFilter=null,this._userIdsFilter=null,this.includeEmpty=(t=n==null?void 0:n.includeEmpty)!==null&&t!==void 0&&t,this.nicknameContainsFilter=(r=n==null?void 0:n.nicknameContainsFilter)!==null&&r!==void 0?r:null,this.nicknameStartsWithFilter=(i=n==null?void 0:n.nicknameStartsWithFilter)!==null&&i!==void 0?i:null,this.nicknameExactMatchFilter=(a=n==null?void 0:n.nicknameExactMatchFilter)!==null&&a!==void 0?a:null,this.channelNameContainsFilter=(s=n==null?void 0:n.channelNameContainsFilter)!==null&&s!==void 0?s:"",this.myMemberStateFilter=(o=n==null?void 0:n.myMemberStateFilter)!==null&&o!==void 0?o:Zi.ALL,this.customTypesFilter=(l=n==null?void 0:n.customTypesFilter)!==null&&l!==void 0?l:null,this.channelUrlsFilter=(u=n==null?void 0:n.channelUrlsFilter)!==null&&u!==void 0?u:null,this.superChannelFilter=(d=n==null?void 0:n.superChannelFilter)!==null&&d!==void 0?d:ea.ALL,this.publicChannelFilter=(f=n==null?void 0:n.publicChannelFilter)!==null&&f!==void 0?f:Ws.ALL,this.customTypeStartsWithFilter=(p=n==null?void 0:n.customTypeStartsWithFilter)!==null&&p!==void 0?p:null,this.unreadChannelFilter=(m=n==null?void 0:n.unreadChannelFilter)!==null&&m!==void 0?m:Il.ALL,this.hiddenChannelFilter=(E=n==null?void 0:n.hiddenChannelFilter)!==null&&E!==void 0?E:ys.UNHIDDEN,this.includeFrozen=(g=n==null?void 0:n.includeFrozen)===null||g===void 0||g,n!=null&&n.createdAfter&&(this.createdAfter=n.createdAfter),n!=null&&n.createdBefore&&(this.createdBefore=n.createdBefore),this.includeMetaData=(y=n==null?void 0:n.includeMetaData)===null||y===void 0||y}return e.prototype._isFriend=function(n){return!(!n||!n.friendDiscoveryKey&&!n.friendName)},Object.defineProperty(e.prototype,"searchFilter",{get:function(){return this._searchFilter},enumerable:!1,configurable:!0}),e.prototype.setSearchFilter=function(n,t){Array.isArray(n)&&n.length!==0&&typeof t=="string"&&t&&(this._searchFilter={query:t,fields:n})},Object.defineProperty(e.prototype,"userIdsFilter",{get:function(){return this._userIdsFilter},enumerable:!1,configurable:!0}),e.prototype.setUserIdsFilter=function(n,t,r){r===void 0&&(r=Io.AND),this._userIdsFilter={userIds:n,includeMode:t,queryType:r}},e.prototype.clone=function(){var n,t=new e;this.searchFilter&&t.setSearchFilter(this.searchFilter.fields,(n=this.searchFilter.query)!==null&&n!==void 0?n:void 0),this.userIdsFilter&&t.setUserIdsFilter(this.userIdsFilter.userIds,this.userIdsFilter.includeMode,this.userIdsFilter.queryType);var r=JSON.parse(JSON.stringify(this));return Object.keys(r).forEach(function(i){t[i]=r[i]}),t},e.prototype.match=function(n,t){if(this._searchFilter){var r=this._searchFilter,i=r.query,a=r.fields;if(i&&a&&a.length>0&&!a.some(function(E){switch(E){case Qh.CHANNEL_NAME:return n.name.toLowerCase().includes(i.toLowerCase());case Qh.MEMBER_NICKNAME:return n.members.some(function(g){return g.nickname.toLowerCase().includes(i.toLowerCase())});default:return!0}}))return!1}if(this._userIdsFilter){var s=this._userIdsFilter,o=s.userIds,l=s.includeMode,u=s.queryType,d=n.members.map(function(E){return E.userId});if(l){if(o.length>0)switch(u){case Io.AND:if(o.some(function(E){return!d.includes(E)}))return!1;break;case Io.OR:if(o.every(function(E){return!d.includes(E)}))return!1}}else if(o.includes(t)||o.push(t),n.members.length>o.length||!AL(o,d))return!1}if(!this.includeEmpty&&!n.lastMessage||!this.includeFrozen&&n.isFrozen||this.customTypesFilter&&this.customTypesFilter.length>0&&!this.customTypesFilter.includes("*")&&!this.customTypesFilter.includes(n.customType)||this.customTypeStartsWithFilter&&!new RegExp("^".concat(this.customTypeStartsWithFilter)).test(n.customType)||this.channelNameContainsFilter&&!n.name.toLowerCase().includes(this.channelNameContainsFilter.toLowerCase()))return!1;if(this.nicknameContainsFilter){var f=this.nicknameContainsFilter.toLowerCase();if(!n.members.some(function(E){return E.userId!==t&&E.nickname.toLowerCase().includes(f)}))return!1}if(this.nicknameStartsWithFilter){var p=this.nicknameStartsWithFilter.toLowerCase();if(!n.members.some(function(E){return E.userId!==t&&E.nickname.toLowerCase().startsWith(p)}))return!1}if(this.nicknameExactMatchFilter){var m=this.nicknameExactMatchFilter.toLowerCase();if(!n.members.some(function(E){return E.userId!==t&&E.nickname.toLowerCase()!=m}))return!1}if(this.channelUrlsFilter&&this.channelUrlsFilter.length>0&&!this.channelUrlsFilter.includes(n.url))return!1;if(this.myMemberStateFilter)switch(this.myMemberStateFilter){case Zi.ALL:if(n.myMemberState==="none")return!1;break;case Zi.JOINED:if(n.myMemberState!=="joined")return!1;break;case Zi.INVITED:if(n.myMemberState!=="invited")return!1;break;case Zi.INVITED_BY_FRIEND:if(n.myMemberState!=="invited"||!this._isFriend(n.inviter))return!1;break;case Zi.INVITED_BY_NON_FRIEND:if(n.myMemberState!=="invited"||this._isFriend(n.inviter))return!1}if(this.hiddenChannelFilter)switch(this.hiddenChannelFilter){case ys.UNHIDDEN:if(n.isHidden||n.hiddenState!=="unhidden")return!1;break;case ys.HIDDEN:if(!n.isHidden)return!1;break;case ys.HIDDEN_ALLOW_AUTO_UNHIDE:if(!n.isHidden||n.hiddenState!=="hidden_allow_auto_unhide")return!1;break;case ys.HIDDEN_PREVENT_AUTO_UNHIDE:if(!n.isHidden||n.hiddenState!=="hidden_prevent_auto_unhide")return!1}if(this.unreadChannelFilter&&this.unreadChannelFilter===Il.UNREAD_MESSAGE&&n.unreadMessageCount===0)return!1;if(this.publicChannelFilter)switch(this.publicChannelFilter){case Ws.PUBLIC:if(!n.isPublic)return!1;break;case Ws.PRIVATE:if(n.isPublic)return!1}if(this.superChannelFilter)switch(this.superChannelFilter){case ea.SUPER:if(!n.isSuper)return!1;break;case ea.NON_SUPER:if(n.isSuper)return!1}return!(this.createdAfter&&n.createdAt<this.createdAfter)&&!(this.createdBefore&&n.createdAt>this.createdBefore)},e}(),g4=function(e){function n(t,r){var i=r.sdkState,a=r.cacheContext,s=e.call(this,t)||this;return s._channels=new Map,s._sdkState=i,s._cacheContext=a,s}return B(n,e),Object.defineProperty(n.prototype,"collection",{get:function(){var t=this._cacheContext.nestdb;return ke(!!t).throw(J.databaseError),t.collection(Vw)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),n.prototype._serialize=function(t,r){return r===void 0&&(r=0),W(W({},t.serialize()),{lastMessageUpdatedAt:t.lastMessage?t.lastMessage.createdAt:0,syncIndex:r})},n.prototype._deserialize=function(t){return Vr.of(this._iid).buildGroupChannelFromSerializedData(t)},Object.defineProperty(n.prototype,"channels",{get:function(){return At([],ft(this._channels.values()),!1)},enumerable:!1,configurable:!0}),n.prototype.isCachedInMemory=function(t){return this._channels.has(t)},n.prototype.filterOffsetChanged=function(t){var r=this;return t.filter(function(i){if(r._channels.has(i.url))return r._channels.get(i.url).messageOffsetTimestamp<i.messageOffsetTimestamp})},n.prototype.get=function(t){return A(this,void 0,void 0,function(){var r,i;return M(this,function(a){switch(a.label){case 0:return this._channels.has(t)?[3,3]:this.localCacheEnabled?[4,this.collection.getByKey(t)]:[3,2];case 1:if(r=a.sent())return i=this._deserialize(r),this._channels.set(t,i),[2,i];a.label=2;case 2:return[2,void 0];case 3:return[2,this._channels.get(t)]}})})},n.prototype.fetch=function(t){var r=t.token,i=t.limit,a=i===void 0?Gw:i,s=t.backward,o=s!==void 0&&s,l=t.filter,u=l===void 0?new cm:l,d=t.order,f=d===void 0?er.LATEST_LAST_MESSAGE:d,p=t.borderlineChannelUrl;return A(this,void 0,void 0,function(){var m,E,g,y,S,C=this;return M(this,function(T){switch(T.label){case 0:return this.localCacheEnabled?(m=!!p,E=ip(f),g={where:function(I){if(r)switch(f){case er.CHANNEL_NAME_ALPHABETICAL:if(!o&&I.name.localeCompare(r)<0||o&&I.name.localeCompare(r)>0)return!1;break;case er.CHRONOLOGICAL:if(!o&&I.createdAt>r||o&&I.createdAt<r)return!1;break;case er.LATEST_LAST_MESSAGE:if(!o&&I.lastMessageUpdatedAt>r||o&&I.lastMessageUpdatedAt<r)return!1}return m&&p&&p===I.url?(m=!1,!1):!m&&u.match(C._deserialize(I),C._sdkState.userId)},index:E,backward:o},[4,this.collection.query(g)]):[3,3];case 1:return[4,T.sent().fetch({limit:a})];case 2:return y=T.sent(),(S=y.map(function(I){return C._deserialize(I)})).forEach(function(I){!u.includeMetaData&&I.cachedMetaData&&I._clearCachedMetaData(),C._channels.has(I.url)||C._channels.set(I.url,I)}),[2,S];case 3:return[2,[]]}})})},n.prototype.upsert=function(t,r){return A(this,void 0,void 0,function(){var i,a,s,o=this;return M(this,function(l){switch(l.label){case 0:if(i=[],t.forEach(function(u){if(o._channels.has(u.url)){var d=o._channels.get(u.url);d._pinnedMessagesUpdatedAt<u._pinnedMessagesUpdatedAt&&(d._pinnedMessagesUpdatedAt=u._pinnedMessagesUpdatedAt),d._messageCollectionLastAccessedAt>u._messageCollectionLastAccessedAt&&Object.assign(u,{_messageCollectionLastAccessedAt:void 0}),u.cachedMetaData&&r&&(d._updateCachedMetaData(u.cachedMetaData,r).isUpdated||Object.assign(u,{_cachedMetaData:void 0})),d._update(u),i.push(d)}else o._channels.set(u.url,u),i.push(u)}),!this.localCacheEnabled)return[3,2];for(a=[],s=0;s<i.length;s++)a.push(this._serialize(i[s],s));return[4,this.collection.upsertMany(a)];case 1:l.sent(),l.label=2;case 2:return[2,i]}})})},n.prototype.remove=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l;return M(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,7]),r=je(t),i=r.next(),u.label=1;case 1:return i.done?[3,4]:(a=i.value,this._channels.delete(a),this.localCacheEnabled?[4,this.collection.remove(a)]:[3,3]);case 2:u.sent(),u.label=3;case 3:return i=r.next(),[3,1];case 4:return[3,7];case 5:return s=u.sent(),o={error:s},[3,7];case 6:try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(o)throw o.error}return[7];case 7:return[2]}})})},n.prototype.clear=function(){return A(this,void 0,void 0,function(){return M(this,function(t){switch(t.label){case 0:return this.clearMemoryCache(),this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},n.prototype.clearMemoryCache=function(){this._channels.clear()},n.prototype._setBlockStateOfAllChannels=function(t,r,i){return A(this,void 0,void 0,function(){var a,s,o,l,u,d,f,p,m,E,g,y,S,C,T,I,L,D,O;return M(this,function(R){switch(R.label){case 0:if(a=[],t===this._sdkState.userId)try{for(s=je(this._channels.values()),o=s.next();!o.done;o=s.next()){p=o.value;try{for(C=void 0,l=je(p.members),u=l.next();!u.done;u=l.next())if((g=u.value).userId===r){g.isBlockedByMe=i,a.push(p);break}}catch(k){C={error:k}}finally{try{u&&!u.done&&(T=l.return)&&T.call(l)}finally{if(C)throw C.error}}}}catch(k){y={error:k}}finally{try{o&&!o.done&&(S=s.return)&&S.call(s)}finally{if(y)throw y.error}}else if(r===this._sdkState.userId)try{for(d=je(this._channels.values()),f=d.next();!f.done;f=d.next()){p=f.value;try{for(D=void 0,m=je(p.members),E=m.next();!E.done;E=m.next())if((g=E.value).userId===t){g.isBlockingMe=i,a.push(p);break}}catch(k){D={error:k}}finally{try{E&&!E.done&&(O=m.return)&&O.call(m)}finally{if(D)throw D.error}}}}catch(k){I={error:k}}finally{try{f&&!f.done&&(L=d.return)&&L.call(d)}finally{if(I)throw I.error}}return a.length>0?[4,this.upsert(a)]:[3,2];case 1:R.sent(),R.label=2;case 2:return[2]}})})},n.prototype.block=function(t,r){return A(this,void 0,void 0,function(){return M(this,function(i){switch(i.label){case 0:return[4,this._setBlockStateOfAllChannels(t,r,!0)];case 1:return i.sent(),[2]}})})},n.prototype.unblock=function(t,r){return A(this,void 0,void 0,function(){return M(this,function(i){switch(i.label){case 0:return[4,this._setBlockStateOfAllChannels(t,r,!1)];case 1:return i.sent(),[2]}})})},n.prototype.markAsRead=function(t,r){return r===void 0&&(r=At([],ft(this._channels.keys()),!1)),A(this,void 0,void 0,function(){var i,a,s,o,l,u,d,f;return M(this,function(p){switch(p.label){case 0:i=[],p.label=1;case 1:p.trys.push([1,6,7,8]),a=je(r),s=a.next(),p.label=2;case 2:return s.done?[3,5]:(o=s.value,[4,this.get(o)]);case 3:(l=p.sent())!=null&&l._updateUnreadMemberState(this._sdkState.userId,t)&&(l._updateUnreadCount(0,0),i.push(l)),p.label=4;case 4:return s=a.next(),[3,2];case 5:return[3,8];case 6:return u=p.sent(),d={error:u},[3,8];case 7:try{s&&!s.done&&(f=a.return)&&f.call(a)}finally{if(d)throw d.error}return[7];case 8:return i.length>0?[4,this.upsert(i)]:[3,10];case 9:p.sent(),p.label=10;case 10:return[2]}})})},n}(Ur),ap={invitedUserIds:void 0,channelUrl:void 0,coverUrl:void 0,coverImage:void 0,isDistinct:void 0,isSuper:void 0,isBroadcast:void 0,isExclusive:void 0,isPublic:void 0,isDiscoverable:void 0,isStrict:void 0,isEphemeral:void 0,accessCode:void 0,name:void 0,data:void 0,customType:void 0,operatorUserIds:void 0,messageSurvivalSeconds:void 0},Fg=function(e){return nn("string",e.invitedUserIds,!0)&&X("string",e.channelUrl,!0)&&X("string",e.coverUrl,!0)&&(jr(e.coverImage)||X("string",e.coverImage,!0))&&X("boolean",e.isDistinct,!0)&&X("boolean",e.isSuper,!0)&&X("boolean",e.isBroadcast,!0)&&X("boolean",e.isExclusive,!0)&&X("boolean",e.isPublic,!0)&&X("boolean",e.isStrict,!0)&&X("boolean",e.isDiscoverable,!0)&&X("boolean",e.isEphemeral,!0)&&X("string",e.accessCode,!0)&&X("string",e.name,!0)&&X("string",e.data,!0)&&X("string",e.customType,!0)&&nn("string",e.operatorUserIds,!0)&&X("number",e.messageSurvivalSeconds,!0)},Pp={customTypes:void 0,includeEmpty:!1,includeFrozen:!0,includeMetaData:!0,includeChatNotification:!1},Hg=function(e){return nn("string",e.customTypes,!0)&&X("boolean",e.includeEmpty,!0)&&X("boolean",e.includeFrozen,!0)&&X("boolean",e.includeMetaData,!0)&&X("boolean",e.includeChatNotification,!0)},l2={myMemberStateFilter:Zi.ALL},u2=function(e){return tn(Zi,e.myMemberStateFilter)};(function(e){e.GROUP_CHANNEL_UNREAD_MENTION_COUNT="group_channel_unread_mention_count",e.NONSUPER_UNREAD_MENTION_COUNT="non_super_group_channel_unread_mention_count",e.SUPER_UNREAD_MENTION_COUNT="super_group_channel_unread_mention_count",e.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT="group_channel_unread_message_count",e.NONSUPER_UNREAD_MESSAGE_COUNT="non_super_group_channel_unread_message_count",e.SUPER_UNREAD_MESSAGE_COUNT="super_group_channel_unread_message_count",e.GROUP_CHANNEL_INVITATION_COUNT="group_channel_invitation_count",e.NONSUPER_INVITATION_COUNT="non_super_group_channel_invitation_count",e.SUPER_INVITATION_COUNT="super_group_channel_invitation_count"})(rr||(rr={}));var E4={keys:[rr.GROUP_CHANNEL_UNREAD_MENTION_COUNT,rr.NONSUPER_UNREAD_MENTION_COUNT,rr.SUPER_UNREAD_MENTION_COUNT,rr.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT,rr.NONSUPER_UNREAD_MESSAGE_COUNT,rr.SUPER_UNREAD_MESSAGE_COUNT,rr.GROUP_CHANNEL_INVITATION_COUNT,rr.NONSUPER_INVITATION_COUNT,rr.SUPER_INVITATION_COUNT],customTypeFilters:void 0,customTypesFilter:void 0},y4={channelCustomTypesFilter:void 0,superChannelFilter:ea.ALL},C4=function(e){return nn("string",e.channelCustomTypesFilter,!0)&&tn(ea,e.superChannelFilter)},b4={channelUrl:void 0,scheduledStatus:void 0,messageTypeFilter:mi.ALL},Fv=W({},ve),sp=function(e){return e.startsWith("EVENT_")||e===ve.SYNC_CHANNEL_CHANGELOGS||e===ve.REFRESH_CHANNEL},un=function(e){function n(t){var r=t.channels,i=t.context,a=t.isWebSocketEventComing,s=a!==void 0&&a,o=t.ts,l=e.call(this)||this;return l.channels=r,l.context=i,l.isWebSocketEventComing=s,l.ts=o,l}return B(n,e),n}(ar),po=function(e){function n(t){var r=t.channelUrls,i=t.context,a=t.isWebSocketEventComing,s=a!==void 0&&a,o=e.call(this)||this;return o.channelUrls=r,o.context=i,o.isWebSocketEventComing=s,o}return B(n,e),n}(ar),S4=function(){function e(n){var t=n.groupChannelCache,r=n.messageCache,i=n.unsentMessageCache,a=n.dispatcher,s=this;this._observers=new Map,a.on(function(o){return A(s,void 0,void 0,function(){var l,u,d,f,p,m,E,g,y,S,C,T,I,L,D,O,R,k,P=this;return M(this,function(G){switch(G.label){case 0:if(!(o instanceof un))return[3,19];if(l=o.channels,I=o.context,L=o.isWebSocketEventComing,u=l.filter(function(V){return V instanceof xa}),I.source!==ve.EVENT_CHANNEL_RESET_HISTORY&&I.source!==ve.EVENT_CHANNEL_HIDDEN)return[3,9];G.label=1;case 1:G.trys.push([1,6,7,8]),d=je(u),f=d.next(),G.label=2;case 2:return f.done?[3,5]:(y=f.value,[4,r.removeUnderOffset(y.url,y.messageOffsetTimestamp)]);case 3:G.sent(),G.label=4;case 4:return f=d.next(),[3,2];case 5:return[3,8];case 6:return p=G.sent(),D={error:p},[3,8];case 7:try{f&&!f.done&&(O=d.return)&&O.call(d)}finally{if(D)throw D.error}return[7];case 8:return[3,17];case 9:m=t.filterOffsetChanged(u),G.label=10;case 10:G.trys.push([10,15,16,17]),E=je(m),g=E.next(),G.label=11;case 11:return g.done?[3,14]:(y=g.value,[4,r.removeUnderOffset(y.url,y.messageOffsetTimestamp)]);case 12:G.sent(),G.label=13;case 13:return g=E.next(),[3,11];case 14:return[3,17];case 15:return S=G.sent(),R={error:S},[3,17];case 16:try{g&&!g.done&&(k=E.return)&&k.call(E)}finally{if(R)throw R.error}return[7];case 17:return[4,t.upsert(u,o.ts)];case 18:return C=G.sent(),L||this._broadcastUpdateEvent(C,I),[3,24];case 19:return o instanceof po?(T=o.channelUrls,I=o.context,L=o.isWebSocketEventComing,[4,t.remove(T)]):[3,22];case 20:return G.sent(),[4,mr(function(){return A(P,void 0,void 0,function(){var V,H,F,z,K,ee;return M(this,function($){switch($.label){case 0:$.trys.push([0,6,7,8]),V=je(T),H=V.next(),$.label=1;case 1:return H.done?[3,5]:(F=H.value,[4,r.removeMessagesOfChannel(F)]);case 2:return $.sent(),[4,i.removeMessagesOfChannel(F)];case 3:$.sent(),$.label=4;case 4:return H=V.next(),[3,1];case 5:return[3,8];case 6:return z=$.sent(),K={error:z},[3,8];case 7:try{H&&!H.done&&(ee=V.return)&&ee.call(V)}finally{if(K)throw K.error}return[7];case 8:return[2]}})})})];case 21:return G.sent(),L||this._broadcastRemoveEvent(T,I),[3,24];case 22:return o instanceof Yw?[4,t.fetch({token:Number.MAX_SAFE_INTEGER,limit:Number.MAX_SAFE_INTEGER})]:[3,24];case 23:G.sent(),G.label=24;case 24:return[2]}})})})}return e.prototype._broadcastUpdateEvent=function(n,t){var r,i;try{for(var a=je(this._observers.values()),s=a.next();!s.done;s=a.next()){var o=s.value;o.onUpdate&&o.onUpdate(n,t)}}catch(l){r={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}},e.prototype._broadcastRemoveEvent=function(n,t){var r,i;try{for(var a=je(this._observers.values()),s=a.next();!s.done;s=a.next()){var o=s.value;o.onRemove&&o.onRemove(n,t)}}catch(l){r={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}},e.prototype.subscribe=function(n,t){this._observers.set(n,t)},e.prototype.unsubscribe=function(n){this._observers.delete(n)},e.prototype.unsubscribeAll=function(){this._observers.clear()},e}(),T4=function(e){function n(t){var r=t.userId,i=t.ts,a=t.token,s=t.filter,o=t.includeChatNotification,l=o!==void 0&&o,u=e.call(this)||this,d=W(W({},Pp),s),f=d.customTypes,p=d.includeEmpty,m=d.includeFrozen;return u.method=we.GET,u.path="".concat(In,"/").concat(encodeURIComponent(r),"/my_group_channels/changelogs"),u.params=Xe(_t({show_delivery_receipt:!0,show_member:!0,show_read_receipt:!0,change_ts:i||null,token:a,custom_types:f,show_empty:p,show_frozen:m,include_chat_notification:l})),u}return B(n,e),n}(Re),N4=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.updatedChannels=r.updated.map(function(a){return new xa(t,Object.assign(a,{ts:r.ts}))}),i.deletedChannelUrls=r.deleted,i.hasMore=r.has_more,i.token=r.next,i.ts=r.ts,i}return B(n,e),n}(He),Bg=function(e){function n(t){var r=t.channelUrl,i=t.isInternalCall,a=t.showLatestMessage,s=e.call(this)||this;return s.method=we.GET,s.path="".concat(i?kL:Li,"/").concat(encodeURIComponent(r)),s.params={show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_latest_message:a!=null&&a},s}return B(n,e),n}(Re),Gg=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.channel=new xa(t,r),i}return B(n,e),n}(He),Nc={includeEmpty:!1,includeFrozen:!0,includeMetaData:!0,includeChatNotification:!1,channelUrlsFilter:void 0,customTypesFilter:void 0,customTypeStartsWithFilter:void 0,nicknameContainsFilter:void 0,nicknameStartsWithFilter:void 0,nicknameExactMatchFilter:void 0,channelNameContainsFilter:void 0,myMemberStateFilter:Zi.ALL,unreadChannelFilter:Il.ALL,superChannelFilter:ea.ALL,publicChannelFilter:Ws.ALL,hiddenChannelFilter:ys.ALL,userIdsFilter:{userIds:[],includeMode:!0,queryType:Io.AND},searchFilter:{query:void 0,fields:[]},metadataKey:void 0,metadataValues:void 0,metadataOrderKeyFilter:void 0,metadataValueStartsWith:void 0,order:er.LATEST_LAST_MESSAGE,createdAfter:void 0,createdBefore:void 0},I4=function(e){function n(t){var r=this,i=t.userId,a=t.token,s=t.limit,o=t.order,l=t.includeEmpty,u=t.myMemberStateFilter,d=t.superChannelFilter,f=t.publicChannelFilter,p=t.unreadChannelFilter,m=t.nicknameContainsFilter,E=t.nicknameStartsWithFilter,g=t.nicknameExactMatchFilter,y=t.channelNameContainsFilter,S=t.channelUrlsFilter,C=t.customTypesFilter,T=t.customTypeStartsWithFilter,I=t.hiddenChannelFilter,L=t.metadataOrderKeyFilter,D=t.metadataKey,O=t.metadataValues,R=t.metadataValueStartsWith,k=t.includeFrozen,P=t.includeMetaData,G=t.searchFilter,V=t.userIdsFilter,H=t.includeChatNotification,F=H!==void 0&&H,z=t.includeLeftChannel,K=z!==void 0&&z,ee=t.createdAfter,$=t.createdBefore;return(r=e.call(this)||this).method=we.GET,r.path="".concat(In,"/").concat(encodeURIComponent(i),"/my_group_channels"),r.params=Xe({token:a,limit:s,order:o??Nc.order,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:l??Nc.includeEmpty,member_state_filter:u??Nc.myMemberStateFilter,super_mode:d??Nc.superChannelFilter,public_mode:f??Nc.publicChannelFilter,unread_filter:p??Nc.unreadChannelFilter,members_nickname_contains:m,members_nickname_startswith:E,members_nickname:g,name_contains:y,channel_urls:S,custom_types:C,custom_type_startswith:T,hidden_mode:I,metadata_order_key:L,metadata_key:D,metadata_values:O,metadata_value_startswith:R,show_frozen:k,show_metadata:P,include_chat_notification:F,include_left_channel:K,created_after:ee,created_before:$}),G&&G.query&&G.fields&&(r.params.search_query=G.query,r.params.search_fields=G.fields),V&&V.userIds&&V.userIds.length>0&&(V.includeMode?(r.params.members_include_in=V.userIds,r.params.query_type=V.queryType.toUpperCase()):r.params.members_exactly_in=V.userIds),r}return B(n,e),n}(Re),M4=function(e){function n(t,r){var i=e.call(this,t,r)||this;i.channels=[];var a=r.next,s=r.channels,o=r.ts;return i.token=a,s&&s.length>0&&(i.channels=s.map(function(l){return l.ts=o,new xa(t,l)})),i.ts=o??0,i}return B(n,e),n}(He),A4=function(e){function n(t){var r=t.userId,i=t.filter,a=e.call(this)||this,s=i.myMemberStateFilter;return a.method=we.GET,a.path="".concat(In,"/").concat(encodeURIComponent(r),"/group_channel_count"),a.params={state:s??Zi.ALL},a}return B(n,e),n}(Re),w4=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.groupChannelCount=r.group_channel_count,i}return B(n,e),n}(He),R4=function(e){function n(t){var r=t.userId,i=t.filter,a=e.call(this)||this,s=i.keys,o=i.customTypeFilters,l=i.customTypesFilter;return a.method=we.GET,a.path="".concat(In,"/").concat(encodeURIComponent(r),"/unread_item_count"),a.params=Xe({item_keys:s,custom_types:l??o}),a}return B(n,e),n}(Re),O4=function(e){function n(t,r){var i=e.call(this,t,r)||this;return typeof r[rr.GROUP_CHANNEL_UNREAD_MENTION_COUNT]=="number"&&(i.groupChannelUnreadMentionCount=r[rr.GROUP_CHANNEL_UNREAD_MENTION_COUNT]),typeof r[rr.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT]=="number"&&(i.groupChannelUnreadMessageCount=r[rr.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT]),typeof r[rr.GROUP_CHANNEL_INVITATION_COUNT]=="number"&&(i.groupChannelInvitationCount=r[rr.GROUP_CHANNEL_INVITATION_COUNT]),typeof r[rr.SUPER_UNREAD_MENTION_COUNT]=="number"&&(i.superGroupChannelUnreadMentionCount=r[rr.SUPER_UNREAD_MENTION_COUNT]),typeof r[rr.SUPER_UNREAD_MESSAGE_COUNT]=="number"&&(i.superGroupChannelUnreadMessageCount=r[rr.SUPER_UNREAD_MESSAGE_COUNT]),typeof r[rr.SUPER_INVITATION_COUNT]=="number"&&(i.superGroupChannelInvitationCount=r[rr.SUPER_INVITATION_COUNT]),typeof r[rr.NONSUPER_UNREAD_MENTION_COUNT]=="number"&&(i.nonSuperGroupChannelUnreadMentionCount=r[rr.NONSUPER_UNREAD_MENTION_COUNT]),typeof r[rr.NONSUPER_UNREAD_MESSAGE_COUNT]=="number"&&(i.nonSuperGroupChannelUnreadMessageCount=r[rr.NONSUPER_UNREAD_MESSAGE_COUNT]),typeof r[rr.NONSUPER_INVITATION_COUNT]=="number"&&(i.nonSuperGroupChannelInvitationCount=r[rr.NONSUPER_INVITATION_COUNT]),i}return B(n,e),n}(He),D4=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=we.GET,i.path="".concat(In,"/").concat(encodeURIComponent(r),"/unread_channel_count"),i}return B(n,e),n}(Re),L4=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.unreadCount=r.unread_count,i}return B(n,e),n}(He),U4=function(e){function n(t){var r=t.userId,i=t.filter,a=t.includeFeedChannel,s=a!==void 0&&a,o=e.call(this)||this,l=i.channelCustomTypesFilter,u=i.superChannelFilter;return o.method=we.GET,o.path="".concat(In,"/").concat(encodeURIComponent(r),"/unread_message_count"),o.params={super_mode:u??ea.ALL,custom_types:l,include_feed_channel:s},o}return B(n,e),n}(Re),k4=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.unreadCount=r.unread_count,i.unreadFeedCount=r.unread_feed_count,i}return B(n,e),n}(He),P4=function(e){function n(t){var r=t.channelUrl,i=t.scheduledStatus,a=t.messageTypeFilter,s=e.call(this)||this;return s.method=we.GET,s.path="".concat(IA,"/count"),s.params={channel_url:r,status:F4(i)},a&&(s.params.message_type=a),s}return B(n,e),n}(Re),x4=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.count=r.count,i}return B(n,e),n}(He),F4=function(e){if(!e)return[];var n=[];return e.forEach(function(t){switch(t){case _l.PENDING:n.push(Oa.PENDING);break;case _l.SENT:n.push(Oa.IN_QUEUE),n.push(Oa.SENT);break;case _l.CANCELED:n.push(Oa.CANCELED);break;case _l.FAILED:n.push(Oa.FAILED)}}),n},H4=function(e){function n(t){var r=this,i=t.userId,a=t.channelUrl,s=t.coverUrl,o=t.coverImage,l=t.isDistinct,u=t.isSuper,d=t.isBroadcast,f=t.isPublic,p=t.isExclusive,m=t.isDiscoverable,E=t.isStrict,g=t.isEphemeral,y=t.accessCode,S=t.name,C=t.data,T=t.customType,I=t.messageSurvivalSeconds,L=t.invitedUserIds,D=t.operatorUserIds;return(r=e.call(this)||this).method=we.POST,r.path=Li,r.params=Xe({user_ids:At([i],ft(L??[]),!1).filter(function(O,R,k){return R===k.indexOf(O)}),channel_url:a,cover_url:s,cover_file:o,is_distinct:l,is_super:u,is_broadcast:d,is_exclusive:p,is_public:f,is_discoverable:m,strict:E,is_ephemeral:g,access_code:y,name:S,data:C,custom_type:T,operator_ids:D,message_survival_seconds:I}),r}return B(n,e),n}(Re),B4=function(e){function n(t,r){var i,a=this;return(a=e.call(this,t,r)||this).channel=new xa(t,r),a.isCreated=(i=r.is_created)===null||i===void 0||i,a}return B(n,e),n}(He),GT=function(e){function n(t){var r=t.userId,i=t.channelUrls,a=e.call(this)||this;return a.method=we.PUT,a.path="".concat(In,"/").concat(encodeURIComponent(r),"/mark_as_read_all"),a.params={channel_urls:i},a}return B(n,e),n}(Re);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}B(n,e)})(He);var G4=function(e){function n(t){var r=this,i=t.channelUrl,a=t.userId,s=t.accessCode;return(r=e.call(this)||this).method=we.PUT,r.path="".concat(Li,"/").concat(encodeURIComponent(i),"/join"),r.params={user_id:a,access_code:s},r}return B(n,e),n}(Re),V4=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.channel=new xa(t,r),i}return B(n,e),n}(He),z4=function(e){function n(t,r,i){var a=e.call(this,t,r,i)||this,s=i.data,o=s.member_count,l=o===void 0?0:o,u=s.joined_member_count,d=u===void 0?0:u,f=s.users,p=f===void 0?null:f;return a.memberCount=l,a.joinedMemberCount=d,a.members=Array.isArray(p)?p.map(function(m){return new Da(t,m)}):[new Da(t,i.data)],a}return B(n,e),n}(Po),j4=function(e){function n(t){var r=this,i=t.channelUrl,a=t.userId,s=t.shouldRemoveOperatorStatus;return(r=e.call(this)||this).method=we.PUT,r.path="".concat(Li,"/").concat(encodeURIComponent(i),"/leave"),r.params={user_id:a,should_remove_operator_status:s},r}return B(n,e),n}(Re);(function(e){function n(t,r){return e.call(this,t,r)||this}B(n,e)})(He);var q4=function(e){function n(t,r,i){var a=e.call(this,t,r,i)||this,s=i.data,o=s.member_count,l=o===void 0?0:o,u=s.joined_member_count,d=u===void 0?0:u;return a.memberCount=l,a.joinedMemberCount=d,a.member=new Da(a._iid,i.data),a}return B(n,e),n}(Po),K4=function(e){function n(t){var r=this,i=t.channelUrl,a=t.userIds;return(r=e.call(this)||this).method=we.POST,r.path="".concat(Li,"/").concat(encodeURIComponent(i),"/invite"),r.params={user_ids:a},r}return B(n,e),n}(Re),$4=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.channel=new xa(t,r),i}return B(n,e),n}(He),W4=function(e){function n(t,r,i){var a=e.call(this,t,r,i)||this;a.inviter=null;var s=i.data,o=s.member_count,l=o===void 0?0:o,u=s.joined_member_count,d=u===void 0?0:u,f=s.inviter,p=s.invitees,m=p===void 0?[]:p;return a.memberCount=l,a.joinedMemberCount=d,f&&Object.keys(f).length>0&&(a.inviter=new dn(t,f)),a.invitees=m.map(function(E){return new Da(t,E)}),a}return B(n,e),n}(Po),Q4=function(e){function n(t){var r=this,i=t.channelUrl,a=t.userId;return(r=e.call(this)||this).method=we.PUT,r.path="".concat(Li,"/").concat(encodeURIComponent(i),"/decline"),r.params={user_id:a},r}return B(n,e),n}(Re);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.channel=new xa(t,r),i.channel.myMemberState=pr.NONE,i}B(n,e)})(He);var Y4=function(e){function n(t,r,i){var a=e.call(this,t,r,i)||this,s=i.data,o=s.member_count,l=s.joined_member_count,u=s.inviter,d=s.invitee;return a.memberCount=o??0,a.joinedMemberCount=l??0,a.inviter=new dn(t,u),a.invitee=new Da(t,d),a}return B(n,e),n}(Po),Vg={hidePreviousMessages:!1,allowAutoUnhide:!0},X4=function(e){function n(t){var r=this,i=t.channelUrl,a=t.userId,s=t.hidePreviousMessages,o=t.allowAutoUnhide;return(r=e.call(this)||this).method=we.PUT,r.path="".concat(Li,"/").concat(encodeURIComponent(i),"/hide"),r.params={user_id:a,hide_previous_messages:s??Vg.hidePreviousMessages,allow_auto_unhide:o??Vg.allowAutoUnhide},r}return B(n,e),n}(Re),Z4=function(e){function n(t,r){var i=e.call(this,t,r)||this,a=r.ts_message_offset;return i.messageOffsetTimestamp=a,i}return B(n,e),n}(He),J4=function(e){function n(t,r,i){var a,s,o,l=this;return(l=e.call(this,t,"SYEV",i)||this).allowAutoUnhide=null,l.hidePreviousMessages=null,l.messageOffsetTimestamp=null,i.data&&(l.allowAutoUnhide=(a=i.data.allow_auto_unhide)!==null&&a!==void 0?a:null,l.hidePreviousMessages=(s=i.data.hide_previous_messages)!==null&&s!==void 0?s:null),l.messageOffsetTimestamp=(o=i.ts_message_offset)!==null&&o!==void 0?o:null,l}return B(n,e),n}(Wn),e6=function(e){function n(t){var r=t.channelUrl,i=t.time;return e.call(this,{code:"TPST",ackRequired:!1,payload:{channel_url:r,time:i}})||this}return B(n,e),n}(_i),t6=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return a.user=new dn(t,i.data),a}return B(n,e),n}(Wn),n6=function(e){function n(t){var r=t.channelUrl,i=t.time;return e.call(this,{code:"TPEN",ackRequired:!1,payload:{channel_url:r,time:i}})||this}return B(n,e),n}(_i),r6=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return a.user=new dn(t,i.data),a}return B(n,e),n}(Wn),i6=function(e){function n(t){var r=t.channelUrl,i=t.messageId;return e.call(this,{code:"MACK",ackRequired:!1,payload:{channel_url:r,msg_id:i}})||this}return B(n,e),n}(_i),c2=function(e){function n(t,r){var i,a,s,o,l,u,d,f,p,m,E,g,y,S,C,T,I,L,D,O,R,k,P,G=this;return(G=e.call(this,t,r)||this).includeEmpty=!1,G.includeFrozen=!0,G.includeMetaData=!0,G.includeChatNotification=!1,G.channelUrlsFilter=null,G.customTypesFilter=null,G.customTypeStartsWithFilter=null,G.nicknameContainsFilter=null,G.nicknameStartsWithFilter=null,G.nicknameExactMatchFilter=null,G.channelNameContainsFilter="",G.myMemberStateFilter=Zi.ALL,G.unreadChannelFilter=Il.ALL,G.superChannelFilter=ea.ALL,G.publicChannelFilter=Ws.ALL,G.hiddenChannelFilter=ys.UNHIDDEN,G.searchFilter={fields:[],query:null},G.userIdsFilter={userIds:[],includeMode:!0,queryType:Io.AND},G.metadataKey=null,G.metadataValues=null,G.metadataOrderKeyFilter=null,G.metadataValueStartsWith=null,G.order=er.LATEST_LAST_MESSAGE,G.includeEmpty=(i=r.includeEmpty)!==null&&i!==void 0&&i,G.includeFrozen=(a=r.includeFrozen)===null||a===void 0||a,G.includeMetaData=(s=r.includeMetaData)===null||s===void 0||s,G.includeChatNotification=(o=r.includeChatNotification)!==null&&o!==void 0&&o,G.channelUrlsFilter=(l=r.channelUrlsFilter)!==null&&l!==void 0?l:null,G.customTypesFilter=(u=r.customTypesFilter)!==null&&u!==void 0?u:null,G.customTypeStartsWithFilter=(d=r.customTypeStartsWithFilter)!==null&&d!==void 0?d:"",G.nicknameContainsFilter=(f=r.nicknameContainsFilter)!==null&&f!==void 0?f:null,G.nicknameStartsWithFilter=(p=r.nicknameStartsWithFilter)!==null&&p!==void 0?p:null,G.nicknameExactMatchFilter=(m=r.nicknameExactMatchFilter)!==null&&m!==void 0?m:null,G.channelNameContainsFilter=(E=r.channelNameContainsFilter)!==null&&E!==void 0?E:"",G.myMemberStateFilter=(g=r.myMemberStateFilter)!==null&&g!==void 0?g:Zi.ALL,G.unreadChannelFilter=(y=r.unreadChannelFilter)!==null&&y!==void 0?y:Il.ALL,G.superChannelFilter=(S=r.superChannelFilter)!==null&&S!==void 0?S:ea.ALL,G.publicChannelFilter=(C=r.publicChannelFilter)!==null&&C!==void 0?C:Ws.ALL,G.hiddenChannelFilter=(T=r.hiddenChannelFilter)!==null&&T!==void 0?T:ys.UNHIDDEN,G.searchFilter=(I=r.searchFilter)!==null&&I!==void 0?I:{fields:[],query:null},G.userIdsFilter=(L=r.userIdsFilter)!==null&&L!==void 0?L:{userIds:[],includeMode:!0,queryType:Io.AND},G.metadataKey=(D=r.metadataKey)!==null&&D!==void 0?D:null,G.metadataValues=(O=r.metadataValues)!==null&&O!==void 0?O:null,G.metadataOrderKeyFilter=(R=r.metadataOrderKeyFilter)!==null&&R!==void 0?R:null,G.metadataValueStartsWith=(k=r.metadataValueStartsWith)!==null&&k!==void 0?k:null,G.order=(P=r.order)!==null&&P!==void 0?P:er.LATEST_LAST_MESSAGE,r.createdAfter&&(G.createdAfter=r.createdAfter),r.createdBefore&&(G.createdBefore=r.createdBefore),G}return B(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&X("boolean",this.includeEmpty)&&X("boolean",this.includeFrozen)&&X("boolean",this.includeMetaData)&&X("string",this.channelNameContainsFilter)&&nn("string",this.channelUrlsFilter,!0)&&nn("string",this.customTypesFilter,!0)&&X("string",this.customTypeStartsWithFilter)&&X("string",this.nicknameContainsFilter,!0)&&X("string",this.nicknameStartsWithFilter,!0)&&X("string",this.nicknameExactMatchFilter,!0)&&tn(Zi,this.myMemberStateFilter)&&tn(ea,this.superChannelFilter)&&tn(Ws,this.publicChannelFilter)&&tn(Il,this.unreadChannelFilter)&&tn(ys,this.hiddenChannelFilter)&&nn(Qh,this.searchFilter.fields)&&X("string",this.searchFilter.query,!0)&&nn("string",this.userIdsFilter.userIds)&&X("boolean",this.userIdsFilter.includeMode)&&tn(Io,this.userIdsFilter.queryType)&&tn(er,this.order)&&X("string",this.metadataOrderKeyFilter,!0)&&X("string",this.metadataKey,!0)&&nn("string",this.metadataValues,!0)&&X("string",this.metadataValueStartsWith,!0)&&A1(this.createdAfter,!0)&&A1(this.createdBefore,!0)},n.prototype.serialize=function(){return ud(this)},n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i;return M(this,function(a){switch(a.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,[4,Vr.of(this._iid).getMyGroupChannels(this._token,_t(W({},this)),this.limit,ve.REQUEST_CHANNEL,!0)]):[3,2]:[3,5];case 1:return t=a.sent(),r=t.channels,i=t.token,this._token=i,this._hasNext=!!i,this._isLoading=!1,[2,r];case 2:return[2,[]];case 3:throw J.queryInProgress;case 4:return[3,6];case 5:throw J.invalidParameters;case 6:return[2]}})})},n}(Uo),a6=function(e){function n(t){var r=t.channelUrl,i=t.userId,a=e.call(this)||this;return a.method=we.PUT,a.path="".concat(Li,"/").concat(encodeURIComponent(r),"/messages/mark_as_delivered"),a.params=Xe({user_id:i}),a}return B(n,e),n}(Re);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}B(n,e)})(He);var go,s6=function(e){function n(t,r,i){var a=e.call(this,t,"DLVR",i)||this;return a.channelUrl=i.channel_url,a.deliveredStateUpdate=i.updated,a}return B(n,e),n}(Wn),zs=function(){function e(n){var t=n.top,r=t===void 0?Number.MAX_SAFE_INTEGER:t,i=n.bottom,a=i===void 0?0:i;this.top=r,this.bottom=a}return e.prototype.includes=function(){for(var n=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.every(function(i){return n.top<=i&&i<=n.bottom})},e.prototype.overlap=function(n){return this.includes(n.top)||this.includes(n.bottom)},e.prototype.intersect=function(){for(var n=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.some(function(i){return n.top<=i&&i<=n.bottom})},e.prototype.extends=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this.top=Math.min.apply(Math,At([this.top],ft(n),!1)),this.bottom=Math.max.apply(Math,At([this.bottom],ft(n),!1))},e}(),Jl={},Vr=function(e){function n(t,r){var i,a=this;return(a=e.call(this,t,W(W({},r),{channelType:cn.GROUP}))||this)._leftChannels=new Map,a._markAsReadAllLastSentAt=0,a._forceDisableMack=(i=r.forceDisableMack)!==null&&i!==void 0&&i,a._groupChannelHandlers=new Map,a._groupChannelCache=new g4(a._iid,{sdkState:r.sdkState,cacheContext:r.cacheContext}),a._groupChannelBroadcast=new S4({dispatcher:r.dispatcher,groupChannelCache:a._groupChannelCache,messageCache:jc.of(a._iid),unsentMessageCache:Ou.of(a._iid)}),setInterval(function(){var s,o,l=function(f){f.invalidateTypingStatus()&&(a._dispatcher.dispatch(new un({channels:[f],context:{source:ve.EVENT_CHANNEL_TYPING_STATUS_UPDATE}})),a._groupChannelHandlers.forEach(function(p){p.onTypingStatusUpdated&&p.onTypingStatusUpdated(f)}))};try{for(var u=je(a._groupChannelCache.channels),d=u.next();!d.done;d=u.next())l(d.value)}catch(f){s={error:f}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(s)throw s.error}}},1e3),a._dispatcher.on(function(s){s instanceof Wn?a._handleEvent(s).catch(function(o){if(Ai(o)&&a._sdkState.appState==="foreground")throw o}):s instanceof Qw?A(a,void 0,void 0,function(){var o,l;return M(this,function(u){switch(u.label){case 0:return o=s.message,[4,this.getChannelFromCache(o.channelUrl)];case 1:return(l=u.sent())&&!l.isFrozen?[3,3]:[4,this.getChannelWithoutCache(o.channelUrl,!0)];case 2:l=u.sent(),u.label=3;case 3:return l.isFrozen||(o instanceof vi?l._autoResendUserMessage(o):o instanceof Ir&&l._autoResendFileMessage(o)),[2]}})}):s instanceof Xw?a.reduceDBSize():s instanceof Nw&&A(a,void 0,void 0,function(){var o,l,u,d,f,p=this;return M(this,function(m){switch(m.label){case 0:return o=s.channelUrl,l=s.channelType,u=s.parentMessage,d=new Ww(this._iid,{channel_type:cn.GROUP,channel_url:o,parent_message_id:u.messageId,thread_info:wp.payloadify(u.threadInfo)}),l!==cn.GROUP?[3,2]:[4,this.getChannel(o,!0)];case 1:f=m.sent(),ut(function(){return A(p,void 0,void 0,function(){var E,g,y,S,C;return M(this,function(T){try{for(E=je(this._groupChannelHandlers.values()),g=E.next();!g.done;g=E.next())(y=g.value).onThreadInfoUpdated&&y.onThreadInfoUpdated(f,d)}catch(I){S={error:I}}finally{try{g&&!g.done&&(C=E.return)&&C.call(E)}finally{if(S)throw S.error}}return[2]})})}),m.label=2;case 2:return[2]}})})}),Jl[t]||(Jl[t]=a),a}return B(n,e),Object.defineProperty(n.prototype,"_messageCache",{get:function(){return jc.of(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_unsentMessageCache",{get:function(){return Ou.of(this._iid)},enumerable:!1,configurable:!0}),n.of=function(t){return Jl[t]||(Jl[t]=new n(t,Y.of(t))),Jl[t]},n.clear=function(t){Jl[t]&&delete Jl[t]},Object.defineProperty(n.prototype,"handlers",{get:function(){return At([],ft(this._groupChannelHandlers.values()),!1)},enumerable:!1,configurable:!0}),n.prototype.buildGroupChannelFromSerializedData=function(t){var r=Tl(t);return new xa(this._iid,xa.payloadify(r))},n.prototype.buildGroupChannelListQueryFromSerializedData=function(t){var r=Tl(t);return new c2(this._iid,r)},n.prototype.buildMemberFromSerializedData=function(t){var r=Tl(t);return new Da(this._iid,Da.payloadify(r))},n.prototype.getChannelFromCache=function(t){var r;return A(this,void 0,void 0,function(){return M(this,function(i){switch(i.label){case 0:return[4,this._groupChannelCache.get(t)];case 1:return[2,(r=i.sent())!==null&&r!==void 0?r:null]}})})},n.prototype.getChannelsFromCache=function(t,r,i,a,s){return A(this,void 0,void 0,function(){return M(this,function(o){switch(o.label){case 0:return[4,this._groupChannelCache.fetch({token:t,filter:r,order:i,limit:a,borderlineChannelUrl:s})];case 1:return[2,o.sent()]}})})},n.prototype.upsertChannelsToCache=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){switch(r.label){case 0:return[4,this._groupChannelCache.upsert(t)];case 1:return[2,r.sent()]}})})},n.prototype.removeChannelsFromCache=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){switch(r.label){case 0:return[4,this._groupChannelCache.remove(t)];case 1:return r.sent(),[2]}})})},n.prototype.clearChannelsFromCache=function(){return A(this,void 0,void 0,function(){return M(this,function(t){switch(t.label){case 0:return[4,this._groupChannelCache.clear()];case 1:return t.sent(),[2]}})})},n.prototype.reduceDBSize=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,d,f,p,m,E,g,y;return M(this,function(S){switch(S.label){case 0:return t=jc.of(this._iid),r=Y.of(this._iid).cacheContext,i=r.localCacheConfig,a=r.nestdb,r.localCacheEnabled&&a&&a.state==Hs.OPENED?(s=1024*i.maxSize*1024,[4,a.estimateUsage()]):[2];case 1:if((o=S.sent())<s)return[2];l=[],u=this._groupChannelCache.channels,d={},E=0,S.label=2;case 2:return E<u.length?[4,this.getMessagesFromCache(u[E].url,0,"prev",new Xs)]:[3,5];case 3:f=S.sent(),d[u[E].url]=JSON.stringify(f).length,p=new RL({channel:u[E],cachedMessageCount:f.length}),l.push(p),S.label=4;case 4:return E++,[3,2];case 5:m=l.sort(i.clearOrderComparator),E=0,S.label=6;case 6:return E<m.length?[4,t.removeMessagesOfChannel(m[E].channel.url)]:[3,10];case 7:return S.sent(),[4,t._getGroupChannelPreferenceSize(m[E].channel.url)];case 8:if(g=S.sent(),y=d[m[E].channel.url]+g,(o-=y)<s)return[3,10];S.label=9;case 9:return E++,[3,6];case 10:return[2]}})})},n.prototype._isSuperGroupMackDisabled=function(t){var r=Y.of(this._iid).appInfo;return!(!t.isSuper||t.isBroadcast||!(r!=null&&r.disableSuperGroupMack))},n.prototype._handleEvent=function(t){var r,i;return A(this,void 0,void 0,function(){var a,s,o,l,u,d,f,p,m,E,g,y,S,C,T,I,L,D,O,R,k,P,G,V,H,F,z,K,ee,$,Q,ne,j,Z,ie,fe,te,le,Me,ae,he,pe,Ne,_e,ge,me,Le,Qe,Pe,Ge,De,tt,Ue,Ye,yt,Nt,Rt,st,Be,nt,qe,rn,it,Ct,Je,pt,Ut,Pt,Ht,bt,qt,Lt,wt,Et,xe,ye,Ze,St,Ot,an,xt,dt,Jt,ln,Bt,En,Mn,Ke,ht,Fe,Dt,Gt,zt,fn,Dn,Vn,ot,se,ze,mt,vn,Sn,sn,zn,hr,fr,It,pn,gn,on,br,oi,Sr,Bo,no,$u,ws,Rs,as,ma,Wu,fd,Qu,vd,Hl,ro,pd,Go,qn,Yu,Xu,Zu,Ju,md,ec,tc,Vo,ss,Ba,os,An=this;return M(this,function(hn){switch(hn.label){case 0:switch(hn.trys.push([0,80,,81]),t.code){case"MESG":case"FILE":case"ADMM":case"BRDM":return[3,1];case"MEDI":case"FEDI":case"AEDI":return[3,4];case"DELM":return[3,7];case"READ":return[3,10];case"DLVR":return[3,13];case"MRCT":return[3,15];case"MTHD":return[3,19];case"MCNT":return[3,23];case"PEDI":return[3,32];case"VOTE":return[3,35];case"SYEV":return[3,38];case"USEV":return[3,78]}return[3,79];case 1:return p=null,t.code==="MESG"?p=t.as(Vy):t.code==="FILE"?p=t.as(xy):t.code!=="ADMM"&&t.code!="BRDM"||(p=t.as(n2)),p?(a=p.message,s=p.isMentioned,o=p.forceUpdateLastMessage,a.channelType!==cn.GROUP?[3,3]:(K=this._groupChannelCache.isCachedInMemory(a.channelUrl),P=a instanceof dr&&a.sender.userId===this._sdkState.userId,[4,this.getChannel(a.channelUrl,!0)])):[3,3];case 2:if(l=hn.sent(),u=Y.of(this._iid).useMemberInfoInMessage,this._forceDisableMack||this._isSuperGroupMackDisabled(l)||a instanceof Au||P||mr(function(){return A(An,void 0,void 0,function(){var be;return M(this,function(ce){return be=new i6(a),this._requestQueue.send(be),[2]})})}),a instanceof dr){try{for(d=je(l.members),f=d.next();!f.done;f=d.next())if((zt=f.value).userId===a.sender.userId){u||(a.sender.nickname=zt.nickname,a.sender.plainProfileUrl=zt.plainProfileUrl,a.sender.metaData=zt.metaData,a.sender.isBlockedByMe=zt.isBlockedByMe);break}}catch(be){Xu={error:be}}finally{try{f&&!f.done&&(Zu=d.return)&&Zu.call(d)}finally{if(Xu)throw Xu.error}}!u&&s&&((r=a.mentionedUsers)===null||r===void 0||r.forEach(function(be){var ce,Kt;try{for(var Mt=je(l.members),Yt=Mt.next();!Yt.done;Yt=Mt.next()){var tr=Yt.value;if(be.userId===tr.userId){be.nickname=tr.nickname,be.plainProfileUrl=tr.plainProfileUrl,be.metaData=tr.metaData;break}}}catch(Rn){ce={error:Rn}}finally{try{Yt&&!Yt.done&&(Kt=Mt.return)&&Kt.call(Mt)}finally{if(ce)throw ce.error}}})),P&&(C=this._sessionManager.currentUser)&&(C.nickname=a.sender.nickname,C.plainProfileUrl=a.sender.plainProfileUrl,C.metaData=a.sender.metaData)}a.silent&&!P||(l.isEphemeral||K)&&(l._updateLastMessage(a),P||l._shouldUpdateUnreadCountWith(a)&&l._updateUnreadCount(l.unreadMessageCount+1,l.unreadMentionCount+(s?1:0))),o&&l._updateLastMessage(a),this._dispatcher.dispatch(new un({channels:[l],context:{source:ve.EVENT_MESSAGE_RECEIVED}})),a.silent&&!P||ut(function(){return A(An,void 0,void 0,function(){var be,ce,Kt,Mt,Yt;return M(this,function(tr){try{for(be=je(this._groupChannelHandlers.values()),ce=be.next();!ce.done;ce=be.next())(Kt=ce.value).onChannelChanged&&Kt.onChannelChanged(l)}catch(Rn){Mt={error:Rn}}finally{try{ce&&!ce.done&&(Yt=be.return)&&Yt.call(be)}finally{if(Mt)throw Mt.error}}return[2]})})}),this._dispatcher.dispatch(new Xn({messages:[a],source:ve.EVENT_MESSAGE_RECEIVED})),ut(function(){return A(An,void 0,void 0,function(){var be,ce,Kt,Mt,Yt;return M(this,function(tr){try{for(be=je(this._groupChannelHandlers.values()),ce=be.next();!ce.done;ce=be.next())(Kt=ce.value).onMessageReceived&&Kt.onMessageReceived(l,a),s&&Kt.onMentionReceived&&Kt.onMentionReceived(l,a)}catch(Rn){Mt={error:Rn}}finally{try{ce&&!ce.done&&(Yt=be.return)&&Yt.call(be)}finally{if(Mt)throw Mt.error}}return[2]})})}),hn.label=3;case 3:return[3,79];case 4:return p=null,t.code==="MEDI"?p=t.as(Op):t.code==="FEDI"?p=t.as(Dp):t.code==="AEDI"&&(p=t.as(r2)),p?(m=p.message,E=p.mentionCountChange,m.threadInfo&&(m.threadInfo.unreadReplyCount=void 0),m.channelType!==cn.GROUP?[3,6]:(K=this._groupChannelCache.isCachedInMemory(m.channelUrl),[4,this.getChannel(m.channelUrl,!0)])):[3,6];case 5:g=hn.sent(),P=m instanceof dr&&m.sender.userId===this._sdkState.userId,y=!1,P?(S=m.sender,(C=this._sessionManager.currentUser)&&(C.nickname=S.nickname,C.plainProfileUrl=S.plainProfileUrl,C.metaData=S.metaData)):g.isReadMessage(m)||E!==0&&!m.silent&&K&&(g._updateUnreadCount(g.unreadMessageCount,g.unreadMentionCount+E),y=!0),g._updateLastMessage(m)?y=!0:!((i=g.lastMessage)===null||i===void 0)&&i.isIdentical(m)&&(K?g._updateLastMessage(m)&&(y=!0):y=!0),T=!1,g.lastPinnedMessage&&g.lastPinnedMessage.messageId===m.messageId&&(g.lastPinnedMessage=m,y=!0,T=!0),y&&(this._dispatcher.dispatch(new un({channels:[g],context:{source:T?ve.EVENT_PINNED_MESSAGE_UPDATED:ve.EVENT_MESSAGE_UPDATED}})),m.silent&&!P||ut(function(){return A(An,void 0,void 0,function(){var be,ce,Kt,Mt,Yt;return M(this,function(tr){try{for(be=je(this._groupChannelHandlers.values()),ce=be.next();!ce.done;ce=be.next())(Kt=ce.value).onChannelChanged&&Kt.onChannelChanged(g)}catch(Rn){Mt={error:Rn}}finally{try{ce&&!ce.done&&(Yt=be.return)&&Yt.call(be)}finally{if(Mt)throw Mt.error}}return[2]})})}),T&&ut(function(){return A(An,void 0,void 0,function(){var be,ce,Kt,Mt,Yt;return M(this,function(tr){try{for(be=je(this._groupChannelHandlers.values()),ce=be.next();!ce.done;ce=be.next())(Kt=ce.value).onPinnedMessageUpdated&&Kt.onPinnedMessageUpdated(g)}catch(Rn){Mt={error:Rn}}finally{try{ce&&!ce.done&&(Yt=be.return)&&Yt.call(be)}finally{if(Mt)throw Mt.error}}return[2]})})})),this._dispatcher.dispatch(new Xn({messages:[m],source:ve.EVENT_MESSAGE_UPDATED})),ut(function(){return A(An,void 0,void 0,function(){var be,ce,Kt,Mt,Yt;return M(this,function(tr){try{for(be=je(this._groupChannelHandlers.values()),ce=be.next();!ce.done;ce=be.next())(Kt=ce.value).onMessageUpdated&&Kt.onMessageUpdated(g,m),E>0&&Kt.onMentionReceived&&Kt.onMentionReceived(g,m)}catch(Rn){Mt={error:Rn}}finally{try{ce&&!ce.done&&(Yt=be.return)&&Yt.call(be)}finally{if(Mt)throw Mt.error}}return[2]})})}),hn.label=6;case 6:return[3,79];case 7:return I=t.as(DA),Ge=I.channelUrl,De=I.channelType,L=I.messageId,D=I.silent,O=I.messageCreatedAt,R=I.senderId,De!==cn.GROUP?[3,9]:[4,this.getChannel(Ge,!0)];case 8:k=hn.sent(),P=R===this._sdkState.userId,D||P||O>0&&k.myLastRead<O&&k.unreadMessageCount>0&&k._updateUnreadCount(k.unreadMessageCount-1,0),this._dispatcher.dispatch(new Uy({messageIds:[L],source:ve.EVENT_MESSAGE_DELETED})),ut(function(){return A(An,void 0,void 0,function(){var be,ce,Kt,Mt,Yt;return M(this,function(tr){try{for(be=je(this._groupChannelHandlers.values()),ce=be.next();!ce.done;ce=be.next())(Kt=ce.value).onMessageDeleted&&Kt.onMessageDeleted(k,L)}catch(Rn){Mt={error:Rn}}finally{try{ce&&!ce.done&&(Yt=be.return)&&Yt.call(be)}finally{if(Mt)throw Mt.error}}return[2]})})}),hn.label=9;case 9:return[3,79];case 10:return(G=t.as(Tw).readStatus).channelType!==cn.GROUP?[3,12]:(K=this._groupChannelCache.isCachedInMemory(G.channelUrl),[4,this.getChannel(G.channelUrl,!0)]);case 11:V=hn.sent(),K&&V._updateUnreadMemberState(G.reader.userId,G.readAt),G.reader.userId===this._sdkState.userId?K?(V.unreadMessageCount>0||V.unreadMentionCount>0)&&(V._updateUnreadCount(0,0),this._dispatcher.dispatch(new un({channels:[V],context:{source:ve.EVENT_CHANNEL_READ}})),ut(function(){return A(An,void 0,void 0,function(){var be,ce,Kt,Mt,Yt;return M(this,function(tr){try{for(be=je(this._groupChannelHandlers.values()),ce=be.next();!ce.done;ce=be.next())(Kt=ce.value).onChannelChanged&&Kt.onChannelChanged(V)}catch(Rn){Mt={error:Rn}}finally{try{ce&&!ce.done&&(Yt=be.return)&&Yt.call(be)}finally{if(Mt)throw Mt.error}}return[2]})})})):V.unreadMessageCount!==0&&V.unreadMentionCount!==0||(this._dispatcher.dispatch(new un({channels:[V],context:{source:ve.EVENT_CHANNEL_READ}})),ut(function(){return A(An,void 0,void 0,function(){var be,ce,Kt,Mt,Yt;return M(this,function(tr){try{for(be=je(this._groupChannelHandlers.values()),ce=be.next();!ce.done;ce=be.next())(Kt=ce.value).onChannelChanged&&Kt.onChannelChanged(V)}catch(Rn){Mt={error:Rn}}finally{try{ce&&!ce.done&&(Yt=be.return)&&Yt.call(be)}finally{if(Mt)throw Mt.error}}return[2]})})})):(this._dispatcher.dispatch(new un({channels:[V],context:{source:ve.EVENT_CHANNEL_READ}})),ut(function(){return A(An,void 0,void 0,function(){var be,ce,Kt,Mt,Yt;return M(this,function(tr){try{for(be=je(this._groupChannelHandlers.values()),ce=be.next();!ce.done;ce=be.next())(Kt=ce.value).onUnreadMemberStatusUpdated&&Kt.onUnreadMemberStatusUpdated(V)}catch(Rn){Mt={error:Rn}}finally{try{ce&&!ce.done&&(Yt=be.return)&&Yt.call(be)}finally{if(Mt)throw Mt.error}}return[2]})})})),hn.label=12;case 12:return[3,79];case 13:return H=t.as(s6),Ge=H.channelUrl,F=H.deliveredStateUpdate,z=F===void 0?{}:F,K=this._groupChannelCache.isCachedInMemory(Ge),[4,this.getChannel(Ge,!0)];case 14:return ee=hn.sent(),K&&Object.keys(z).forEach(function(be){ee._updateUndeliveredMemberState(be,z[be])}),Object.keys(z).some(function(be){return be!==An._sdkState.userId})&&(this._dispatcher.dispatch(new un({channels:[ee],context:{source:ve.EVENT_CHANNEL_DELIVERED}})),ut(function(){return A(An,void 0,void 0,function(){var be,ce,Kt,Mt,Yt;return M(this,function(tr){try{for(be=je(this._groupChannelHandlers.values()),ce=be.next();!ce.done;ce=be.next())(Kt=ce.value).onUndeliveredMemberStatusUpdated&&Kt.onUndeliveredMemberStatusUpdated(ee)}catch(Rn){Mt={error:Rn}}finally{try{ce&&!ce.done&&(Yt=be.return)&&Yt.call(be)}finally{if(Mt)throw Mt.error}}return[2]})})})),[3,79];case 15:return $=t.as(i2),Ge=$.channelUrl,De=$.channelType,Q=$.event,De!==cn.GROUP?[3,18]:[4,this.getChannel(Ge,!0)];case 16:return ne=hn.sent(),[4,this.getMessageFromCache(Q.messageId)];case 17:(ie=hn.sent())?ie instanceof Ni&&(ie.applyReactionEvent(Q),this._dispatcher.dispatch(new Xn({messages:[ie],source:ve.EVENT_MESSAGE_REACTION_UPDATED}))):this._dispatcher.dispatch(new cw({event:Q,source:ve.EVENT_MESSAGE_REACTION_UPDATED})),ut(function(){return A(An,void 0,void 0,function(){var be,ce,Kt,Mt,Yt;return M(this,function(tr){try{for(be=je(this._groupChannelHandlers.values()),ce=be.next();!ce.done;ce=be.next())(Kt=ce.value).onReactionUpdated&&Kt.onReactionUpdated(ne,Q)}catch(Rn){Mt={error:Rn}}finally{try{ce&&!ce.done&&(Yt=be.return)&&Yt.call(be)}finally{if(Mt)throw Mt.error}}return[2]})})}),hn.label=18;case 18:return[3,79];case 19:return(j=t.as(a2).event).channelType!==cn.GROUP?[3,22]:[4,this.getChannel(j.channelUrl,!0)];case 20:return Z=hn.sent(),[4,this.getMessageFromCache(j.targetMessageId)];case 21:(ie=hn.sent())?ie instanceof Ni&&(ie.applyThreadInfoUpdateEvent(j),this._dispatcher.dispatch(new Xn({messages:[ie],source:ve.EVENT_MESSAGE_THREADINFO_UPDATED}))):this._dispatcher.dispatch(new dw({event:j,source:ve.EVENT_MESSAGE_THREADINFO_UPDATED})),ut(function(){return A(An,void 0,void 0,function(){var be,ce,Kt,Mt,Yt;return M(this,function(tr){try{for(be=je(this._groupChannelHandlers.values()),ce=be.next();!ce.done;ce=be.next())(Kt=ce.value).onThreadInfoUpdated&&Kt.onThreadInfoUpdated(Z,j)}catch(Rn){Mt={error:Rn}}finally{try{ce&&!ce.done&&(Yt=be.return)&&Yt.call(be)}finally{if(Mt)throw Mt.error}}return[2]})})}),hn.label=22;case 22:return[3,79];case 23:fe=t.as(s2).groupChannelMemberCounts,te=[],hn.label=24;case 24:hn.trys.push([24,29,30,31]),le=je(fe),Me=le.next(),hn.label=25;case 25:return Me.done?[3,28]:(ae=Me.value,Ge=ae.channelUrl,xt=ae.memberCount,dt=ae.joinedMemberCount,he=ae.updatedAt,[4,this.getChannelFromCache(Ge)]);case 26:(pe=hn.sent())&&pe._setLatestMemberCount(xt,dt,he)&&te.push(pe),hn.label=27;case 27:return Me=le.next(),[3,25];case 28:return[3,31];case 29:return Ne=hn.sent(),Ju={error:Ne},[3,31];case 30:try{Me&&!Me.done&&(md=le.return)&&md.call(le)}finally{if(Ju)throw Ju.error}return[7];case 31:return te.length>0&&(this._dispatcher.dispatch(new un({channels:te,context:{source:ve.EVENT_CHANNEL_MEMBER_COUNT_UPDATED}})),ut(function(){return A(An,void 0,void 0,function(){var be,ce,Kt,Mt,Yt;return M(this,function(tr){try{for(be=je(this._groupChannelHandlers.values()),ce=be.next();!ce.done;ce=be.next())(Kt=ce.value).onChannelMemberCountChanged&&Kt.onChannelMemberCountChanged(te)}catch(Rn){Mt={error:Rn}}finally{try{ce&&!ce.done&&(Yt=be.return)&&Yt.call(be)}finally{if(Mt)throw Mt.error}}return[2]})})})),[3,79];case 32:return _e=t.as(o2),ge=_e.event,me=_e.status,Ge=_e.channelUrl,De=_e.channelType,Ge&&De===cn.GROUP?[4,this.getChannel(Ge,!0)]:[3,34];case 33:Le=hn.sent(),this._dispatcher.dispatch(new ky({event:ge,source:ve.EVENT_POLL_UPDATED})),ut(me===vw?function(){return A(An,void 0,void 0,function(){var be,ce,Kt,Mt,Yt;return M(this,function(tr){try{for(be=je(this._groupChannelHandlers.values()),ce=be.next();!ce.done;ce=be.next())(Kt=ce.value).onPollDeleted&&Kt.onPollDeleted(Le,ge.pollId)}catch(Rn){Mt={error:Rn}}finally{try{ce&&!ce.done&&(Yt=be.return)&&Yt.call(be)}finally{if(Mt)throw Mt.error}}return[2]})})}:function(){return A(An,void 0,void 0,function(){var be,ce,Kt,Mt,Yt;return M(this,function(tr){try{for(be=je(this._groupChannelHandlers.values()),ce=be.next();!ce.done;ce=be.next())(Kt=ce.value).onPollUpdated&&Kt.onPollUpdated(Le,ge)}catch(Rn){Mt={error:Rn}}finally{try{ce&&!ce.done&&(Yt=be.return)&&Yt.call(be)}finally{if(Mt)throw Mt.error}}return[2]})})}),hn.label=34;case 34:return[3,79];case 35:return Qe=t.as(zy),Pe=Qe.event,Ge=Qe.channelUrl,De=Qe.channelType,Ge&&De===cn.GROUP?[4,this.getChannel(Ge,!0)]:[3,37];case 36:tt=hn.sent(),this._dispatcher.dispatch(new am({event:Pe,source:ve.EVENT_POLL_VOTED})),ut(function(){return A(An,void 0,void 0,function(){var be,ce,Kt,Mt,Yt;return M(this,function(tr){try{for(be=je(this._groupChannelHandlers.values()),ce=be.next();!ce.done;ce=be.next())(Kt=ce.value).onPollVoted&&Kt.onPollVoted(tt,Pe)}catch(Rn){Mt={error:Rn}}finally{try{ce&&!ce.done&&(Yt=be.return)&&Yt.call(be)}finally{if(Mt)throw Mt.error}}return[2]})})}),hn.label=37;case 37:return[3,79];case 38:if(!(Ue=t.as(Po).event).isGroupChannelEvent)return[3,77];switch(Ue.category){case Ln.CHANNEL_JOIN:return[3,39];case Ln.CHANNEL_LEAVE:return[3,41];case Ln.CHANNEL_OPERATOR_UPDATE:return[3,45];case Ln.CHANNEL_INVITE:return[3,47];case Ln.CHANNEL_DECLINE_INVITE:return[3,49];case Ln.TYPING_START:case Ln.TYPING_END:return[3,51];case Ln.USER_CHANNEL_MUTE:case Ln.USER_CHANNEL_UNMUTE:return[3,53];case Ln.USER_CHANNEL_BAN:return[3,55];case Ln.USER_CHANNEL_UNBAN:return[3,59];case Ln.CHANNEL_FREEZE:case Ln.CHANNEL_UNFREEZE:return[3,61];case Ln.CHANNEL_HIDE:return[3,63];case Ln.CHANNEL_UNHIDE:return[3,65];case Ln.CHANNEL_DELETED:return[3,67];case Ln.CHANNEL_PROP_CHANGED:return[3,69];case Ln.CHANNEL_META_DATA_CHANGED:return[3,71];case Ln.CHANNEL_META_COUNTERS_CHANGED:return[3,73];case Ln.PINNED_MESSAGE_CHANGED:return[3,75]}return[3,77];case 39:return[4,this.getChannel(Ue.channelUrl,!0)];case 40:return Ye=hn.sent(),yt=t.as(z4),Nt=yt.memberCount,Rt=yt.joinedMemberCount,st=yt.members,Be=!1,st.forEach(function(be){Ye.isExclusive||Ye.isSuper||Ye.isBroadcast?Be=Be||Ye._setLatestMemberCount(Nt,Rt,Ue.ts):(be.state=pr.JOINED,Ye.addMember(be,Ue.ts),An._updateJoinedMemberCount(Ye)),be.userId===An._sdkState.userId&&(Ye.myMemberState=pr.JOINED)}),this._dispatcher.dispatch(new un({channels:[Ye],context:{source:ve.EVENT_CHANNEL_JOINED,users:st}})),ut(function(){return A(An,void 0,void 0,function(){return M(this,function(be){return this._groupChannelHandlers.forEach(function(ce){var Kt,Mt;try{for(var Yt=je(st),tr=Yt.next();!tr.done;tr=Yt.next()){var Rn=tr.value;ce.onUserJoined&&ce.onUserJoined(Ye,Rn)}}catch(Cf){Kt={error:Cf}}finally{try{tr&&!tr.done&&(Mt=Yt.return)&&Mt.call(Yt)}finally{if(Kt)throw Kt.error}}Ye.isBroadcast&&Be&&ce.onChannelMemberCountChanged&&ce.onChannelMemberCountChanged([Ye])}),[2]})})}),[3,77];case 41:return(fn=this._leftChannels.get(Ue.channelUrl))?(qe=fn.channel,[3,44]):[3,42];case 42:return[4,this.getChannel(Ue.channelUrl,!0)];case 43:qe=hn.sent(),hn.label=44;case 44:return nt=qe,rn=t.as(q4),xt=rn.memberCount,dt=rn.joinedMemberCount,it=rn.member,Ct=!1,Je=Y.of(this._iid).appInfo,nt.isExclusive||nt.isSuper||nt.isBroadcast?Ct=nt._setLatestMemberCount(xt,dt,Ue.ts):(Je!=null&&Je.enabledChannelMemberShipHistory?((pt=nt.members.find(function(be){return be.userId===it.userId}))&&(pt.state=pr.LEFT),nt.memberCount=xt):nt.removeMember(it),this._updateJoinedMemberCount(nt)),it.userId===this._sdkState.userId?(nt.myMemberState=pr.NONE,nt.invitedAt=0,nt.joinedAt=0,nt._updateUnreadCount(0,0),nt.isPublic?this._dispatcher.dispatch(new un({channels:[nt],context:{source:ve.EVENT_CHANNEL_LEFT,user:it}})):(this._markAsLeave(nt),this._dispatcher.dispatch(new po({channelUrls:[nt.url],context:{source:ve.EVENT_CHANNEL_LEFT,user:it}})))):this._dispatcher.dispatch(new un({channels:[nt],context:{source:ve.EVENT_CHANNEL_LEFT,user:it}})),ut(function(){return A(An,void 0,void 0,function(){return M(this,function(be){return this._groupChannelHandlers.forEach(function(ce){ce.onUserLeft&&ce.onUserLeft(nt,it),nt.isBroadcast&&Ct&&ce.onChannelMemberCountChanged&&ce.onChannelMemberCountChanged([nt])}),[2]})})}),[3,77];case 45:return[4,this.getChannel(Ue.channelUrl,!0)];case 46:Ut=hn.sent(),Pt=t.as(Jw).operators,Ht=Pt.map(function(be){return be.userId});try{for(bt=je(Ut.members),qt=bt.next();!qt.done;qt=bt.next())(zt=qt.value).role=Ht.includes(zt.userId)?ri.OPERATOR:ri.NONE}catch(be){ec={error:be}}finally{try{qt&&!qt.done&&(tc=bt.return)&&tc.call(bt)}finally{if(ec)throw ec.error}}return Ut.myRole=Ht.includes(this._sdkState.userId)?ri.OPERATOR:ri.NONE,this._dispatcher.dispatch(new un({channels:[Ut],context:{source:ve.EVENT_CHANNEL_OPERATOR_UPDATED,operators:Pt}})),ut(function(){return A(An,void 0,void 0,function(){return M(this,function(be){return this._groupChannelHandlers.forEach(function(ce){ce.onOperatorUpdated&&ce.onOperatorUpdated(Ut,Pt)}),[2]})})}),[3,77];case 47:return[4,this.getChannel(Ue.channelUrl,!0)];case 48:Lt=hn.sent(),wt=t.as(W4),xt=wt.memberCount,dt=wt.joinedMemberCount,Et=wt.inviter,(xe=wt.invitees).forEach(function(be){return be.state=pr.INVITED});try{for(ye=je(xe),Ze=ye.next();!Ze.done;Ze=ye.next())St=Ze.value,Lt.isExclusive||Lt.isSuper||Lt.isBroadcast?Lt._setLatestMemberCount(xt,dt,Ue.ts):Lt.addMember(St,Ue.ts),this._sdkState.userId===St.userId&&(Lt.hiddenState=wa.UNHIDDEN,Lt.myMemberState!==pr.JOINED&&(Lt.myMemberState=pr.INVITED),Lt.invitedAt=Ue.ts)}catch(be){Vo={error:be}}finally{try{Ze&&!Ze.done&&(ss=ye.return)&&ss.call(ye)}finally{if(Vo)throw Vo.error}}return this._dispatcher.dispatch(new un({channels:[Lt],context:{source:ve.EVENT_CHANNEL_INVITED,inviter:Et,invitees:xe}})),ut(function(){return A(An,void 0,void 0,function(){return M(this,function(be){return this._groupChannelHandlers.forEach(function(ce){ce.onUserReceivedInvitation&&ce.onUserReceivedInvitation(Lt,Et,xe)}),[2]})})}),[3,77];case 49:return[4,this.getChannel(Ue.channelUrl,!0)];case 50:return Ot=hn.sent(),an=t.as(Y4),xt=an.memberCount,dt=an.joinedMemberCount,Jt=an.inviter,ln=an.invitee,Ot.isExclusive||Ot.isSuper||Ot.isBroadcast?Ot._setLatestMemberCount(xt,dt,Ue.ts):Ot.removeMember(ln),this._sdkState.userId===ln.userId?(Ot.invitedAt=0,Ot.myMemberState=pr.NONE,Ot.isPublic?this._dispatcher.dispatch(new un({channels:[Ot],context:{source:ve.EVENT_CHANNEL_DECLINED_INVITE,inviter:Jt,invitee:ln}})):this._dispatcher.dispatch(new po({channelUrls:[Ot.url],context:{source:ve.EVENT_CHANNEL_DECLINED_INVITE,inviter:Jt,invitee:ln}}))):this._dispatcher.dispatch(new un({channels:[Ot],context:{source:ve.EVENT_CHANNEL_DECLINED_INVITE,inviter:Jt,invitee:ln}})),ut(function(){return A(An,void 0,void 0,function(){return M(this,function(be){return this._groupChannelHandlers.forEach(function(ce){ce.onUserDeclinedInvitation&&ce.onUserDeclinedInvitation(Ot,Jt,ln)}),[2]})})}),[3,77];case 51:return[4,this.getChannel(Ue.channelUrl,!0)];case 52:return Bt=hn.sent(),En=Ue.category===Ln.TYPING_START,Mn=t.as(En?t6:r6).user,Bt._updateTypingStatus(Mn,En?Ue.ts:0),this._dispatcher.dispatch(new un({channels:[Bt],context:{source:ve.EVENT_CHANNEL_TYPING_STATUS_UPDATE}})),ut(function(){return A(An,void 0,void 0,function(){return M(this,function(be){return this._groupChannelHandlers.forEach(function(ce){ce.onTypingStatusUpdated&&ce.onTypingStatusUpdated(Bt)}),[2]})})}),[3,77];case 53:return[4,this.getChannel(Ue.channelUrl,!0)];case 54:Ke=hn.sent(),ht=Ue.category===Ln.USER_CHANNEL_MUTE,(Fe=t.as(ht?kw:Pw).user).userId===this._sdkState.userId&&(Ke.myMutedState=ht?Ya.MUTED:Ya.UNMUTED,Ke._myMutedRemainingTime=Fe.restrictionInfo.remainingDuration);try{for(Dt=je(Ke.members),Gt=Dt.next();!Gt.done;Gt=Dt.next())if((zt=Gt.value).userId===Fe.userId){zt.isMuted=ht;break}}catch(be){Ba={error:be}}finally{try{Gt&&!Gt.done&&(os=Dt.return)&&os.call(Dt)}finally{if(Ba)throw Ba.error}}return this._dispatcher.dispatch(new un({channels:[Ke],context:{source:ht?ve.EVENT_CHANNEL_MUTED:ve.EVENT_CHANNEL_UNMUTED,user:Fe}})),ut(function(){return A(An,void 0,void 0,function(){return M(this,function(be){return this._groupChannelHandlers.forEach(function(ce){ht?ce.onUserMuted&&ce.onUserMuted(Ke,Fe):ce.onUserUnmuted&&ce.onUserUnmuted(Ke,Fe)}),[2]})})}),[3,77];case 55:return(fn=this._leftChannels.get(Ue.channelUrl))?(Vn=fn.channel,[3,58]):[3,56];case 56:return[4,this.getChannel(Ue.channelUrl,!0)];case 57:Vn=hn.sent(),hn.label=58;case 58:return Dn=Vn,this._markAsLeave(Dn),ot=t.as(xw).user,ot.userId===this._sdkState.userId&&this._dispatcher.dispatch(new po({channelUrls:[Dn.url],context:{source:ve.EVENT_CHANNEL_BANNED,user:ot}})),ut(function(){return A(An,void 0,void 0,function(){return M(this,function(be){return this._groupChannelHandlers.forEach(function(ce){ce.onUserBanned&&ce.onUserBanned(Dn,ot)}),[2]})})}),[3,77];case 59:return[4,this.getChannel(Ue.channelUrl,!0)];case 60:return se=hn.sent(),ze=t.as(Fw).user,ze.userId===this._sdkState.userId&&this._dispatcher.dispatch(new po({channelUrls:[se.url],context:{source:ve.EVENT_CHANNEL_UNBANNED,user:ze}})),ut(function(){return A(An,void 0,void 0,function(){return M(this,function(be){return this._groupChannelHandlers.forEach(function(ce){ce.onUserUnbanned&&ce.onUserUnbanned(se,ze)}),[2]})})}),[3,77];case 61:return[4,this.getChannel(Ue.channelUrl,!0)];case 62:return mt=hn.sent(),vn=t.as(Hw).freeze,mt.isFrozen=vn,this._dispatcher.dispatch(new un({channels:[mt],context:{source:vn?ve.EVENT_CHANNEL_FROZEN:ve.EVENT_CHANNEL_UNFROZEN}})),ut(function(){return A(An,void 0,void 0,function(){return M(this,function(be){return this._groupChannelHandlers.forEach(function(ce){vn?ce.onChannelFrozen&&ce.onChannelFrozen(mt):ce.onChannelUnfrozen&&ce.onChannelUnfrozen(mt)}),[2]})})}),[3,77];case 63:return[4,this.getChannel(Ue.channelUrl,!0)];case 64:return Sn=hn.sent(),sn=t.as(J4),zn=sn.allowAutoUnhide,hr=sn.hidePreviousMessages,fr=sn.messageOffsetTimestamp,zn!==null&&(Sn.hiddenState=zn?wa.HIDDEN_ALLOW_AUTO_UNHIDE:wa.HIDDEN_PREVENT_AUTO_UNHIDE),hr!==null&&hr&&Sn._updateUnreadCount(0,0),fr!==null&&(Sn.messageOffsetTimestamp=fr),this._dispatcher.dispatch(new un({channels:[Sn],context:{source:ve.EVENT_CHANNEL_HIDDEN}})),ut(function(){return A(An,void 0,void 0,function(){return M(this,function(be){return this._groupChannelHandlers.forEach(function(ce){ce.onChannelHidden&&ce.onChannelHidden(Sn)}),[2]})})}),[3,77];case 65:return[4,this.getChannel(Ue.channelUrl,!0)];case 66:return(It=hn.sent()).hiddenState=wa.UNHIDDEN,this._dispatcher.dispatch(new un({channels:[It],context:{source:ve.EVENT_CHANNEL_UNHIDDEN}})),ut(function(){return A(An,void 0,void 0,function(){return M(this,function(be){return this._groupChannelHandlers.forEach(function(ce){ce.onChannelChanged&&ce.onChannelChanged(It)}),[2]})})}),[3,77];case 67:return[4,this.getChannel(Ue.channelUrl,!0)];case 68:return pn=hn.sent(),this._dispatcher.dispatch(new po({channelUrls:[Ue.channelUrl],context:{source:ve.EVENT_CHANNEL_DELETED}})),ut(function(){return A(An,void 0,void 0,function(){return M(this,function(be){return this._groupChannelHandlers.forEach(function(ce){ce.onChannelDeleted&&ce.onChannelDeleted(pn.url,pn.channelType)}),[2]})})}),[3,77];case 69:return[4,this.getChannelWithoutCache(Ue.channelUrl,!0)];case 70:return gn=hn.sent(),this._dispatcher.dispatch(new un({channels:[gn],context:{source:ve.EVENT_CHANNEL_UPDATED}})),ut(function(){return A(An,void 0,void 0,function(){return M(this,function(be){return this._groupChannelHandlers.forEach(function(ce){ce.onChannelChanged&&ce.onChannelChanged(gn)}),[2]})})}),[3,77];case 71:return[4,this.getChannel(Ue.channelUrl,!0)];case 72:return on=hn.sent(),br=t.as(Lw),oi=br.created,Sr=br.updated,Bo=br.deleted,oi&&(on._upsertCachedMetaData(oi,Ue.ts),this._dispatcher.dispatch(new un({channels:[on],context:{source:ve.EVENT_CHANNEL_METADATA_CREATED,metaData:oi},ts:Ue.ts}))),Sr&&(on._upsertCachedMetaData(Sr,Ue.ts),this._dispatcher.dispatch(new un({channels:[on],context:{source:ve.EVENT_CHANNEL_METADATA_UPDATED,metaData:Sr},ts:Ue.ts}))),Bo&&(on._removeFromCachedMetaData(Bo,Ue.ts),this._dispatcher.dispatch(new un({channels:[on],context:{source:ve.EVENT_CHANNEL_METADATA_DELETED,metaDataKeys:Bo},ts:Ue.ts}))),ut(function(){return A(An,void 0,void 0,function(){return M(this,function(be){return this._groupChannelHandlers.forEach(function(ce){oi&&ce.onMetaDataCreated&&ce.onMetaDataCreated(on,oi),Sr&&ce.onMetaDataUpdated&&ce.onMetaDataUpdated(on,Sr),Bo&&ce.onMetaDataDeleted&&ce.onMetaDataDeleted(on,Bo)}),[2]})})}),[3,77];case 73:return[4,this.getChannel(Ue.channelUrl,!0)];case 74:return no=hn.sent(),$u=t.as(Uw),ws=$u.created,Rs=$u.updated,as=$u.deleted,ws&&this._dispatcher.dispatch(new un({channels:[no],context:{source:ve.EVENT_CHANNEL_METACOUNTER_CREATED,metaCounters:ws}})),Rs&&this._dispatcher.dispatch(new un({channels:[no],context:{source:ve.EVENT_CHANNEL_METACOUNTER_UPDATED,metaCounters:Rs}})),as&&this._dispatcher.dispatch(new un({channels:[no],context:{source:ve.EVENT_CHANNEL_METACOUNTER_DELETED,metaCounterKeys:as}})),ut(function(){return A(An,void 0,void 0,function(){return M(this,function(be){return this._groupChannelHandlers.forEach(function(ce){ws&&ce.onMetaCounterCreated&&ce.onMetaCounterCreated(no,ws),Rs&&ce.onMetaCounterUpdated&&ce.onMetaCounterUpdated(no,Rs),as&&ce.onMetaCounterDeleted&&ce.onMetaCounterDeleted(no,as)}),[2]})})}),[3,77];case 75:return[4,this.getChannel(Ue.channelUrl,!0)];case 76:return ma=hn.sent(),Wu=t.as(e2),fd=Wu.pinnedMessageIds,Qu=Wu.latestPinnedMessage,(vd=Wu.ts)>ma._pinnedMessagesUpdatedAt&&(ma.pinnedMessageIds=fd??[],ma.lastPinnedMessage=Qu,ma._pinnedMessagesUpdatedAt=vd,this._dispatcher.dispatch(new un({channels:[ma],context:{source:ve.EVENT_PINNED_MESSAGE_UPDATED}})),ut(function(){return A(An,void 0,void 0,function(){var be,ce,Kt,Mt,Yt;return M(this,function(tr){try{for(be=je(this._groupChannelHandlers.values()),ce=be.next();!ce.done;ce=be.next())(Kt=ce.value).onChannelChanged&&Kt.onChannelChanged(ma)}catch(Rn){Mt={error:Rn}}finally{try{ce&&!ce.done&&(Yt=be.return)&&Yt.call(be)}finally{if(Mt)throw Mt.error}}return[2]})})}),ut(function(){return A(An,void 0,void 0,function(){return M(this,function(be){return this._groupChannelHandlers.forEach(function(ce){ce.onPinnedMessageUpdated&&ce.onPinnedMessageUpdated(ma)}),[2]})})})),[3,77];case 77:return[3,79];case 78:switch((Hl=t.as(Zw).event).category){case $h.USER_BLOCK:ro=kp.getDataAsUserBlockEvent(this._iid,Hl),Go=ro.blocker,qn=ro.blockee,this._groupChannelCache.block(Go.userId,qn.userId);break;case $h.USER_UNBLOCK:pd=kp.getDataAsUserBlockEvent(this._iid,Hl),Go=pd.blocker,qn=pd.blockee,this._groupChannelCache.unblock(Go.userId,qn.userId)}return[3,79];case 79:return[3,81];case 80:if(Yu=hn.sent(),Ai(Yu))throw Yu;return[3,81];case 81:return[2]}})})},n.prototype._markAsLeave=function(t){var r,i=this,a=(r=this._leftChannels.get(t.url))!==null&&r!==void 0?r:{channel:t,ref:0};a.ref++,this._leftChannels.set(t.url,a),setTimeout(function(){a.ref--,a.ref===0&&i._leftChannels.delete(t.url)},1e4)},n.prototype.addHandler=function(t,r){this._groupChannelHandlers.set(t,r)},n.prototype.removeHandler=function(t){this._groupChannelHandlers.delete(t)},n.prototype.clearHandler=function(){this._groupChannelHandlers.clear()},n.prototype.subscribeChannelEvent=function(t,r){this._groupChannelBroadcast.subscribe(t,r)},n.prototype.unsubscribeChannelEvent=function(t){this._groupChannelBroadcast.unsubscribe(t)},n.prototype._updateJoinedMemberCount=function(t){t.joinedMemberCount=t.members.filter(function(r){return r.state===pr.JOINED}).length},n.prototype.getChannel=function(t,r){return r===void 0&&(r=!1),A(this,void 0,void 0,function(){var i;return M(this,function(a){switch(a.label){case 0:ke(X("string",t)).throw(J.invalidParameters),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.getChannelFromCache(t)];case 2:return(i=a.sent())?[2,i]:[3,4];case 3:return a.sent(),[3,4];case 4:return[4,this.getChannelWithoutCache(t,r)];case 5:return[2,a.sent()]}})})},n.prototype.getChannelWithoutCache=function(t,r){return r===void 0&&(r=!1),A(this,void 0,void 0,function(){var i,a,s,o,l;return M(this,function(u){switch(u.label){case 0:return ke(X("string",t)).throw(J.invalidParameters),i=new Bg({channelUrl:t,isInternalCall:r}),[4,this._requestQueue.send(i)];case 1:switch(a=u.sent(),s=a.as(Gg).channel,o=s.unreadMessageCount,l=s.unreadMentionCount,s.myCountPreference){case Aa.UNREAD_MESSAGE_COUNT_ONLY:l=0;break;case Aa.UNREAD_MENTION_COUNT_ONLY:o=0;break;case Aa.OFF:o=0,l=0}return s._updateUnreadCount(o,l),[4,this.upsertChannelsToCache([s])];case 2:return[2,u.sent()[0]]}})})},n.prototype.refreshChannel=function(t,r,i,a){return r===void 0&&(r=!0),i===void 0&&(i=ve.REFRESH_CHANNEL),a===void 0&&(a=!1),A(this,void 0,void 0,function(){var s,o,l,u,d;return M(this,function(f){switch(f.label){case 0:return f.trys.push([0,5,,6]),s=new Bg({channelUrl:t,isInternalCall:r,showLatestMessage:a}),[4,this._requestQueue.send(s)];case 1:return o=f.sent(),(l=o.as(Gg).channel).myMemberState!==pr.NONE?[3,2]:(this._dispatcher.dispatch(new po({channelUrls:[l.url],context:{source:i}})),[3,4]);case 2:return[4,this.upsertChannelsToCache([l])];case 3:u=f.sent(),this._dispatcher.dispatch(new un({channels:u,context:{source:i}})),f.label=4;case 4:return[3,6];case 5:return(d=f.sent()).code!==at.NON_AUTHORIZED&&d.code!==at.NOT_FOUND_IN_DATABASE||this._dispatcher.dispatch(new po({channelUrls:[t],context:{source:i}})),[3,6];case 6:return[2]}})})},n.prototype.getMyGroupChannels=function(t,r,i,a,s){return a===void 0&&(a=ve.REQUEST_CHANNEL),s===void 0&&(s=!1),A(this,void 0,void 0,function(){var o,l,u,d,f,p,m,E,g;return M(this,function(y){switch(y.label){case 0:return r.createdAfter&&(r.createdAfter=Math.floor(r.createdAfter/1e3)),r.createdBefore&&(r.createdBefore=Math.floor(r.createdBefore/1e3)),o=!1,s&&(l=Y.of(this._iid),u=l.appInfo,(d=l.cacheContext)&&!d.localCacheEnabled&&(u!=null&&u.enabledChannelMemberShipHistory)&&(u!=null&&u.applicationAttributes.includes("left_user_view_support"))&&(o=!0)),f=new I4(W(W({},r),{userId:this._sdkState.userId,token:t,limit:i,includeLeftChannel:s&&o})),[4,this._requestQueue.send(f)];case 1:return p=y.sent(),m=p.as(M4),E=m.channels,g=m.token,this._dispatcher.dispatch(new un({channels:E,context:{source:a}})),[2,{channels:E,token:g}]}})})},n.prototype.getMyGroupChannelChangeLogs=function(t,r,i){return i===void 0&&(i=ve.REQUEST_CHANNEL_CHANGELOGS),A(this,void 0,void 0,function(){var a,s,o,l,u,d,f,p;return M(this,function(m){switch(m.label){case 0:return a=W(W({},Pp),r),ke((X("string",t)||X("number",t))&&Hg(a)).throw(J.invalidParameters),s=new T4(_t({userId:this._sdkState.userId,ts:typeof t=="number"?t:null,token:typeof t=="string"?t:null,filter:a})),[4,this._requestQueue.send(s)];case 1:return o=m.sent(),l=o.as(N4),u=l.updatedChannels,d=l.deletedChannelUrls,f=l.hasMore,p=l.ts,u.length>0&&this._dispatcher.dispatch(new un({channels:u,context:{source:i},ts:p})),d.length>0&&this._dispatcher.dispatch(new po({channelUrls:d,context:{source:i}})),[2,{updatedChannels:u,deletedChannelUrls:d,hasMore:f,token:l.token}]}})})},n.prototype.getGroupChannelCount=function(t){return A(this,void 0,void 0,function(){var r,i,a;return M(this,function(s){switch(s.label){case 0:return r=W(W({},l2),t),ke(u2(r)).throw(J.invalidParameters),i=new A4({userId:this._sdkState.userId,filter:r}),[4,this._requestQueue.send(i)];case 1:return a=s.sent(),[2,a.as(w4).groupChannelCount]}})})},n.prototype.getUnreadItemCount=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u,d,f,p,m,E,g,y,S,C;return M(this,function(T){switch(T.label){case 0:return r=W(W({},E4),t),ke(function(I){return nn(rr,I.keys)&&nn("string",I.customTypeFilters,!0)&&nn("string",I.customTypesFilter,!0)}(r)).throw(J.invalidParameters),i=Y.of(this._iid),a=i.sdkState,s=i.requestQueue,o=new R4({userId:a.userId,filter:r}),[4,s.send(o)];case 1:return l=T.sent(),u=l.as(O4),d=u.groupChannelUnreadMentionCount,f=u.groupChannelUnreadMessageCount,p=u.groupChannelInvitationCount,m=u.superGroupChannelUnreadMentionCount,E=u.superGroupChannelUnreadMessageCount,g=u.superGroupChannelInvitationCount,y=u.nonSuperGroupChannelUnreadMentionCount,S=u.nonSuperGroupChannelUnreadMessageCount,C=u.nonSuperGroupChannelInvitationCount,[2,Xe({groupChannelUnreadMentionCount:d,groupChannelUnreadMessageCount:f,groupChannelInvitationCount:p,superGroupChannelUnreadMentionCount:m,superGroupChannelUnreadMessageCount:E,superGroupChannelInvitationCount:g,nonSuperGroupChannelUnreadMentionCount:y,nonSuperGroupChannelUnreadMessageCount:S,nonSuperGroupChannelInvitationCount:C})]}})})},n.prototype.getTotalUnreadChannelCount=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s;return M(this,function(o){switch(o.label){case 0:return t=Y.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new D4({userId:r.userId}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(L4).unreadCount]}})})},n.prototype.getTotalUnreadMessageCount=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l;return M(this,function(u){switch(u.label){case 0:return r=W(W({},y4),t),ke(C4(r)).throw(J.invalidParameters),i=Y.of(this._iid),a=i.sdkState,s=i.requestQueue,o=new U4({userId:a.userId,filter:r}),[4,s.send(o)];case 1:return l=u.sent(),[2,l.as(k4).unreadCount]}})})},n.prototype.getTotalScheduledMessageCount=function(t){return t===void 0&&(t={}),A(this,void 0,void 0,function(){var r,i,a,s;return M(this,function(o){switch(o.label){case 0:return r=W(W({},b4),t),ke(function(l){return X("string",l.channelUrl,!0)&&nn(_l,l.scheduledStatus,!0)&&tn(mi,l.messageTypeFilter)}(r)).throw(J.invalidParameters),i=Y.of(this._iid).requestQueue,a=new P4(r),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(x4).count]}})})},n.prototype.getSubscribedTotalUnreadMessageCount=function(){var t=Y.of(this._iid).subscribedUnreadMessageCount;return t.all>=0?t.all:0},n.prototype.getSubscribedCustomTypeTotalUnreadMessageCount=function(){var t=0,r=Y.of(this._iid).subscribedUnreadMessageCount;return Object.keys(r.customTypes).forEach(function(i){t+=r.customTypes[i]}),t},n.prototype.getSubscribedCustomTypeUnreadMessageCount=function(t){var r;return(r=Y.of(this._iid).subscribedUnreadMessageCount.customTypes[t])!==null&&r!==void 0?r:0},n.prototype.createChannel=function(t){return A(this,void 0,void 0,function(){var r,i,a,s;return M(this,function(o){switch(o.label){case 0:return r=W(W({},ap),t),ke(Fg(r)).throw(J.invalidParameters),r.isPublic||(r.accessCode=void 0),i=new H4(W({userId:this._sdkState.userId},r)),[4,this._requestQueue.send(i)];case 1:return a=o.sent(),s=a.as(B4).channel,[4,this.upsertChannelsToCache([s])];case 2:return o.sent(),[2,s]}})})},n.prototype.markAsReadAll=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u;return M(this,function(d){switch(d.label){case 0:return t=Date.now(),ke(t-this._markAsReadAllLastSentAt>=1e3).throw(J.markAsReadAllRateLimitExceeded),this._markAsReadAllLastSentAt=t,r=new GT({userId:this._sdkState.userId}),[4,this._requestQueue.send(r)];case 1:d.sent(),i=this._groupChannelCache.channels;try{for(a=je(i),s=a.next();!s.done;s=a.next())(o=s.value)._updateUnreadMemberState(this._sdkState.userId,t),o._updateUnreadCount(0,0)}catch(f){l={error:f}}finally{try{s&&!s.done&&(u=a.return)&&u.call(a)}finally{if(l)throw l.error}}return i.length>0?[4,this.upsertChannelsToCache(i)]:[3,3];case 2:d.sent(),d.label=3;case 3:return[2]}})})},n.prototype.markAsReadWithChannelUrls=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u,d,f;return M(this,function(p){switch(p.label){case 0:return r=Date.now(),ke(nn("string",t)&&r-this._markAsReadAllLastSentAt>=1e3).throw(J.markAsReadAllRateLimitExceeded),this._markAsReadAllLastSentAt=r,i=new GT({userId:this._sdkState.userId,channelUrls:t}),[4,this._requestQueue.send(i)];case 1:p.sent(),a=this._groupChannelCache.channels,s=[];try{for(o=je(a),l=o.next();!l.done;l=o.next())u=l.value,t.includes(u.url)&&(u._updateUnreadMemberState(this._sdkState.userId,r),u._updateUnreadCount(0,0),s.push(u))}catch(m){d={error:m}}finally{try{l&&!l.done&&(f=o.return)&&f.call(o)}finally{if(d)throw d.error}}return s.length>0?[4,this.upsertChannelsToCache(s)]:[3,3];case 2:p.sent(),p.label=3;case 3:return[2]}})})},n.prototype.markAsDelivered=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){switch(r.label){case 0:return[4,this.getChannel(t)];case 1:return[4,r.sent().markAsDelivered()];case 2:return r.sent(),[2]}})})},n.prototype.getMessageFromCache=function(t){var r;return A(this,void 0,void 0,function(){return M(this,function(i){switch(i.label){case 0:return[4,this._messageCache.get(t)];case 1:return[2,(r=i.sent())!==null&&r!==void 0?r:null]}})})},n.prototype.getExactlyMatchingMessagesForTokenFromCache=function(t,r,i){return A(this,void 0,void 0,function(){return M(this,function(a){switch(a.label){case 0:return[4,this._messageCache.fetch({channelUrl:t,token:r,filter:i,exactMatch:!0})];case 1:return[2,a.sent()]}})})},n.prototype.getMessagesFromCache=function(t,r,i,a,s,o){return s===void 0&&(s=zw),o===void 0&&(o=!0),A(this,void 0,void 0,function(){return M(this,function(l){switch(l.label){case 0:return[4,this._messageCache.fetch({channelUrl:t,token:r,limit:s,filter:a,backward:i==="next",inclusive:o})];case 1:return[2,l.sent()]}})})},n.prototype.getPollMessagesFromCache=function(t,r,i,a){return A(this,void 0,void 0,function(){return M(this,function(s){switch(s.label){case 0:return[4,this._messageCache.fetch({channelUrl:t,token:r,limit:a,filter:i,backward:!1,isPollOnly:!0})];case 1:return[2,s.sent()]}})})},n.prototype.getCachedMessageCountBetween=function(t,r,i,a){return A(this,void 0,void 0,function(){return M(this,function(s){switch(s.label){case 0:return[4,this._messageCache.countBetween(t,r,new zs({top:i,bottom:a}))];case 1:return[2,s.sent()]}})})},n.prototype.getUnsentMessagesFromCache=function(t,r){return A(this,void 0,void 0,function(){return M(this,function(i){switch(i.label){case 0:return[4,this._unsentMessageCache.fetch({channelUrl:t,filter:r})];case 1:return[2,i.sent()]}})})},n.prototype.removeFailedMessageFromCache=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){switch(r.label){case 0:return[4,this._unsentMessageCache.remove([t])];case 1:return r.sent(),[2]}})})},n}(t2),Sa=function(e,n){return n instanceof dr?e.findIndex(function(t){return t instanceof dr&&n.isIdentical(t)}):e.findIndex(function(t){return t.isIdentical(n)})},Yd=function(e,n){return e.findIndex(function(t){return t instanceof Ni?t.messageId===n:t instanceof wu?t.notificationId===n:void 0})},G_=function(e,n){if(e.length>0){for(var t=0,r=e.length-1,i=Math.floor((t+r)/2);t<r;){var a=e[i].createdAt-n.createdAt;if(a>0)r=i,i=Math.floor((t+r)/2);else{if(!(a<0))return i;t=i+1,i=Math.floor((t+r)/2)}}return e[i].createdAt>n.createdAt?i:i+1}return e.length};(function(e){e[e.IDLE=0]="IDLE",e[e.RUNNING=1]="RUNNING",e[e.END=2]="END"})(go||(go={}));var xp,Al=function(e){function n(t,r,i,a){var s=e.call(this)||this;return s._state=go.IDLE,s._retryCount=0,s._retryLimit=3,s.priority=0,s._worker=r,s}return B(n,e),Object.defineProperty(n.prototype,"isIdle",{get:function(){return this._state===go.IDLE},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isRunning",{get:function(){return this._state===go.RUNNING},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isDone",{get:function(){return this._state===go.END},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"retryCount",{get:function(){return this._retryCount},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"retryLimit",{get:function(){return this._retryLimit},enumerable:!1,configurable:!0}),n.prototype._run=function(t){return A(this,void 0,void 0,function(){var r,i;return M(this,function(a){switch(a.label){case 0:if(!this.isRunning)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this._worker(t)];case 2:return r=a.sent(),this._retryCount=0,this.dispatch("progress",r),r.hasNext?this._run(r.nextToken):this.end(),[3,4];case 3:return i=a.sent(),this.dispatch("error",i),this._retryCount<this._retryLimit?(this._retryCount++,this._run(t)):this.stop(),[3,4];case 4:return[2]}})})},n.prototype.start=function(t){this.isIdle&&(this._state=go.RUNNING,this._run(t))},n.prototype.stop=function(){this._state=go.IDLE,this.dispatch("stop")},n.prototype.end=function(){this._state=go.END,this.dispatch("end")},n}(ku),vs={},o6=function(){function e(n){var t=n._iid,r=n.channel,i=n.limit,a=i===void 0?100:i,s=this;this.ref=0,this._iid=t,this._channel=r,this._limit=a,this._prevSyncLoopCount=0;var o,l,u=Y.of(this._iid),d=u.sdkState,f=u.cacheContext,p=u.dispatcher,m=u.logger,E=u.statManager,g=u.messageBackgroundSyncThrottleController;this._metadataKey=(o=d.userId,l=r.url,"sendbird:".concat(o,"@groupchannel/").concat(l,"/message/sync.meta"));var y=function(S,C){return"sendbird:".concat(S,"@groupchannel/").concat(C,"/message/sync")}(d.userId,r.url);this._prevSync=new Al(y,function(S){return A(s,void 0,void 0,function(){var C=this;return M(this,function(T){switch(T.label){case 0:return[4,g.run("message-background-sync-".concat(r.url,"-prev"),function(){return A(C,void 0,void 0,function(){var I,L,D,O,R,k,P,G,V,H,F,z;return M(this,function(K){switch(K.label){case 0:return I={hasNext:!0,nextToken:0},this._prevSyncLoopCount++,[4,this.loadMetadata()];case 1:if(K.sent(),m.debug("message background prev sync from",(k=this._metadata)===null||k===void 0?void 0:k.range.top),(P=this._metadata)===null||P===void 0?void 0:P.previousComplete)return[3,10];K.label=2;case 2:return K.trys.push([2,5,8,9]),[4,xr.of(this._iid).getMessagesByTimestamp(this._channel.url,this._channel.channelType,!((V=(G=this._metadata)===null||G===void 0?void 0:G.range)===null||V===void 0)&&V.top?this._metadata.range.top:S,{prevResultSize:this._limit,nextResultSize:0,replyType:Ar.ALL,includeReactions:!0,includeMetaArray:!0,includeParentMessageInfo:!0,includeThreadInfo:!0,isInclusive:!0},ve.SYNC_MESSAGE_BACKGROUND)];case 3:return(L=K.sent()).length>0&&(D=L.map(function(ee){return ee.createdAt}),!((H=this._metadata)===null||H===void 0)&&(R=H.range).intersect.apply(R,At([],ft(D),!1))?this.extendRange(L):this._metadata={range:new zs({top:Math.min.apply(Math,At([],ft(D),!1)),bottom:Math.max.apply(Math,At([],ft(D),!1))}),previousComplete:!1}),I.hasNext=L.length>=this._limit&&this._prevSyncLoopCount<1,this._metadata&&(I.nextToken=this._metadata.range.top,this._metadata.previousComplete=L.length<this._limit),m.debug("message background prev sync progress",I),[4,this.saveMetadata()];case 4:return K.sent(),[3,9];case 5:return O=K.sent(),m.debug("message background prev sync error",O),O instanceof J&&O.isInvalidTokenError?[4,this.clearMetadata()]:[3,7];case 6:K.sent(),K.label=7;case 7:throw O;case 8:return E.put(new cr({type:Zn.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:r.url,measured_on:"back_sync",event:"cache_fetch",max_db_size:(z=(F=f.localCacheConfig)===null||F===void 0?void 0:F.maxSize)!==null&&z!==void 0?z:0,use_local_cache:f.localCacheEnabled,starting_point:0,message_init_policy:""}})),[7];case 9:return[3,11];case 10:I.hasNext=!1,K.label=11;case 11:return[2,I]}})})})];case 1:return[2,T.sent()]}})})}),this._nextSync=new Al(y,function(S){return A(s,void 0,void 0,function(){var C=this;return M(this,function(T){switch(T.label){case 0:return[4,g.run("message-background-sync-".concat(r.url,"-next"),function(){return A(C,void 0,void 0,function(){var I,L,D,O,R,k,P,G,V,H,F;return M(this,function(z){switch(z.label){case 0:return I={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:z.sent(),m.debug("message background next sync from",(k=this._metadata)===null||k===void 0?void 0:k.range.bottom),z.label=2;case 2:return z.trys.push([2,5,6,7]),[4,xr.of(this._iid).getMessagesByTimestamp(this._channel.url,this._channel.channelType,!((G=(P=this._metadata)===null||P===void 0?void 0:P.range)===null||G===void 0)&&G.bottom?this._metadata.range.bottom:S,{prevResultSize:0,nextResultSize:this._limit,replyType:Ar.ALL,includeReactions:!0,includeMetaArray:!0,includeParentMessageInfo:!0,includeThreadInfo:!0,isInclusive:!0},ve.SYNC_MESSAGE_BACKGROUND)];case 3:return(L=z.sent()).length>0&&(D=L.map(function(K){return K.createdAt}),!((V=this._metadata)===null||V===void 0)&&(R=V.range).intersect.apply(R,At([],ft(D),!1))?this.extendRange(L):this._metadata={range:new zs({top:Math.min.apply(Math,At([],ft(D),!1)),bottom:Math.max.apply(Math,At([],ft(D),!1))}),previousComplete:!1}),I.hasNext=L.length>=this._limit,this._metadata&&(I.nextToken=this._metadata.range.bottom),m.debug("message background next sync progress",I),[4,this.saveMetadata()];case 4:return z.sent(),[3,7];case 5:throw O=z.sent(),m.debug("message background next sync error",O),O;case 6:return E.put(new cr({type:Zn.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:r.url,measured_on:"back_sync",event:"cache_fetch",max_db_size:(F=(H=f.localCacheConfig)===null||H===void 0?void 0:H.maxSize)!==null&&F!==void 0?F:0,use_local_cache:f.localCacheEnabled,starting_point:0,message_init_policy:""}})),[7];case 7:return[2,I]}})})})];case 1:return[2,T.sent()]}})})}),this._connectionEventContext=p.on(function(S){S instanceof pa&&(S.stateType===On.CONNECTED?s.resume():s.pause())})}return e.of=function(n,t){return vs[n]||(vs[n]={}),vs[n][t.url]||(vs[n][t.url]=new e({_iid:n,channel:t})),vs[n][t.url].ref++,vs[n][t.url]},e.clear=function(n,t){vs[n]&&vs[n][t]&&(vs[n][t].close(),delete vs[n])},Object.defineProperty(e.prototype,"range",{get:function(){var n,t;return(t=(n=this._metadata)===null||n===void 0?void 0:n.range)!==null&&t!==void 0?t:new zs({})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousComplete",{get:function(){var n;return!!(!((n=this._metadata)===null||n===void 0)&&n.previousComplete)},enumerable:!1,configurable:!0}),e.prototype.isWrappingMessages=function(n){var t;return(t=this.range)===null||t===void 0?void 0:t.includes.apply(t,At([],ft(n.map(function(r){return r.createdAt})),!1))},e.prototype.extendRange=function(n){var t;this._metadata&&(t=this._metadata.range).extends.apply(t,At([],ft(n.map(function(r){return r.createdAt})),!1))},e.prototype.loadMetadata=function(){return A(this,void 0,void 0,function(){var n;return M(this,function(t){switch(t.label){case 0:return this._metadata?[3,2]:[4,Y.of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:n=t.sent(),this._metadata=n?{range:new zs(n.range),previousComplete:n.previousComplete}:{range:new zs({}),previousComplete:!1},t.label=2;case 2:return[2,this._metadata]}})})},e.prototype.saveMetadata=function(){return A(this,void 0,void 0,function(){return M(this,function(n){switch(n.label){case 0:return this._metadata?[4,Y.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return n.sent(),[2,!0];case 2:return[2,!1]}})})},e.prototype.clearMetadata=function(){return A(this,void 0,void 0,function(){return M(this,function(n){switch(n.label){case 0:return[4,Y.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return n.sent(),this._metadata=void 0,[2]}})})},e.prototype.resume=function(n){var t,r,i,a;n===void 0&&(n=Date.now());var s=Y.of(this._iid),o=s.logger,l=s.sessionManager;s.cacheContext.localCacheEnabled&&l.session.hasSession&&(o.debug("message background sync resume()"),this._prevSyncLoopCount=0,this._metadata&&this._metadata.previousComplete||this._prevSync.start((r=(t=this._metadata)===null||t===void 0?void 0:t.range.top)!==null&&r!==void 0?r:n),this._nextSync.start((a=(i=this._metadata)===null||i===void 0?void 0:i.range.bottom)!==null&&a!==void 0?a:n))},e.prototype.pause=function(){Y.of(this._iid).logger.debug("message background sync stop()"),this._prevSync.stop(),this._nextSync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete vs[this._iid][this._channel.url])},e}(),ps={},l6=function(){function e(n){var t=n._iid,r=n.channel,i=n.includeParams,a=this;this.ref=0,this._iid=t,this._channel=r,this._includeParams=i;var s,o,l=Y.of(this._iid),u=l.logger,d=l.sdkState,f=l.dispatcher;this._metadataKey=(s=d.userId,o=r.url,"sendbird:".concat(s,"@groupchannel/").concat(o,"/message/changelogs.meta"));var p=function(m,E){return"sendbird:".concat(m,"@groupchannel/").concat(E,"/message/changelogs")}(d.userId,this._channel.url);this._sync=new Al(p,function(){return A(a,void 0,void 0,function(){var m,E,g,y,S,C,T,I;return M(this,function(L){switch(L.label){case 0:return m={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:L.sent(),u.debug("message changelog sync from",(I=this._metadata)===null||I===void 0?void 0:I.token),L.label=2;case 2:return L.trys.push([2,5,,8]),[4,xr.of(this._iid).getMessageChangelogs(this._channel.url,this._channel.channelType,this._metadata.token,W({replyType:Ar.ALL},this._includeParams),ve.SYNC_MESSAGE_CHANGELOGS)];case 3:return E=L.sent(),g=E.updatedMessages,y=E.deletedMessageIds,S=E.hasMore,C=E.token,m.hasNext=S,m.nextToken=C,(g.length>0||y.length>0)&&this._metadata&&(this._metadata.token=C),u.debug("message changelog sync progress",m),[4,this.saveMetadata()];case 4:return L.sent(),[3,8];case 5:return T=L.sent(),u.debug("message changelog sync error",T),T instanceof J&&T.isInvalidTokenError?[4,this.clearMetadata()]:[3,7];case 6:L.sent(),L.label=7;case 7:throw T;case 8:return[2,m]}})})}),this._connectionEventContext=f.on(function(m){m instanceof pa&&(m.stateType===On.CONNECTED?a.resume():a.pause())})}return e.of=function(n,t,r){return ps[n]||(ps[n]={}),ps[n][t.url]||(ps[n][t.url]=new e({_iid:n,channel:t,includeParams:r})),ps[n][t.url].ref++,ps[n][t.url]},e.clear=function(n,t){ps[n]&&ps[n][t]&&(ps[n][t].close(),delete ps[n])},e.prototype.loadMetadata=function(){return A(this,void 0,void 0,function(){var n,t,r,i;return M(this,function(a){switch(a.label){case 0:return this._metadata?[3,2]:(n=Y.of(this._iid),t=n.cacheContext,r=n.firstConnectedAt,[4,t.preference.get(this._metadataKey)]);case 1:i=a.sent(),this._metadata={token:i?i.token:r},a.label=2;case 2:return[2,this._metadata]}})})},e.prototype.saveMetadata=function(){return A(this,void 0,void 0,function(){return M(this,function(n){switch(n.label){case 0:return this._metadata?[4,Y.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return n.sent(),[2,!0];case 2:return[2,!1]}})})},e.prototype.clearMetadata=function(){return A(this,void 0,void 0,function(){return M(this,function(n){switch(n.label){case 0:return[4,Y.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return n.sent(),this._metadata=void 0,[2]}})})},e.prototype.resume=function(){var n=Y.of(this._iid),t=n.logger;n.sessionManager.session.hasSession&&(t.debug("message changelog sync resume()"),this._sync.start(0))},e.prototype.pause=function(){Y.of(this._iid).logger.debug("message changelog sync pause()"),this._sync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete ps[this._iid][this._channel.url])},e}(),eu={},u6=function(){function e(n){var t=n._iid,r=n.channel,i=n.hasPollMessage,a=this;this.ref=0,this._iid=t,this._channel=r;var s,o,l=Y.of(this._iid),u=l.logger,d=l.sdkState,f=l.dispatcher;this._metadataKey=(s=d.userId,o=r.url,"sendbird:".concat(s,"@groupchannel/").concat(o,"/poll/changelogs.meta"));var p=function(m,E){return"sendbird:".concat(m,"@groupchannel/").concat(E,"/poll/changelogs")}(d.userId,this._channel.url);this._sync=new Al(p,function(){return A(a,void 0,void 0,function(){var m,E,g,y,S,C,T,I;return M(this,function(L){switch(L.label){case 0:return m={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:return L.sent(),u.debug("poll changelog sync from",(I=this._metadata)===null||I===void 0?void 0:I.token),(E=!this._metadata||!this._metadata.token)?[4,i()]:[3,3];case 2:E=!L.sent(),L.label=3;case 3:if(E)return[2,{hasNext:!1,nextToken:0}];this._metadata||(g=Y.of(this._iid).firstConnectedAt,this._metadata={token:g}),L.label=4;case 4:return L.trys.push([4,7,,10]),[4,Ip.of(this._iid).getPollChangeLogs(this._channel.url,this._channel.channelType,this._metadata.token)];case 5:return y=L.sent(),S=y.hasMore,C=y.token,m.hasNext=S,m.nextToken=C,this._metadata.token=C,u.debug("poll changelog sync progress",m),[4,this.saveMetadata()];case 6:return L.sent(),[3,10];case 7:return T=L.sent(),u.debug("poll changelog sync error",T),T instanceof J&&T.isInvalidTokenError?[4,this.clearMetadata()]:[3,9];case 8:L.sent(),L.label=9;case 9:throw T;case 10:return[2,m]}})})}),this._connectionEventContext=f.on(function(m){m instanceof pa&&(m.stateType===On.CONNECTED?a.resume():a.pause())})}return e.of=function(n,t,r){return eu[n]||(eu[n]={}),eu[n][t.url]||(eu[n][t.url]=new e({_iid:n,channel:t,hasPollMessage:r})),eu[n][t.url].ref++,eu[n][t.url]},e.prototype.loadMetadata=function(){return A(this,void 0,void 0,function(){var n;return M(this,function(t){switch(t.label){case 0:return this._metadata?[3,2]:[4,Y.of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:n=t.sent(),this._metadata=n?{token:n.token}:void 0,t.label=2;case 2:return[2]}})})},e.prototype.saveMetadata=function(){return A(this,void 0,void 0,function(){return M(this,function(n){switch(n.label){case 0:return this._metadata?[4,Y.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},e.prototype.clearMetadata=function(){return A(this,void 0,void 0,function(){return M(this,function(n){switch(n.label){case 0:return[4,Y.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return n.sent(),this._metadata=void 0,[2]}})})},e.prototype.resume=function(){Y.of(this._iid).logger.debug("poll changelog sync resume()"),this._sync.start(0)},e.prototype.pause=function(){Y.of(this._iid).logger.debug("poll changelog sync pause()"),this._sync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete eu[this._iid][this._channel.url])},e}(),c6=function(e){function n(t){var r,i,a,s,o,l,u,d,f,p,m=this;return(m=e.call(this)||this).method=we.GET,m.path="".concat(Nn(t.channelType),"/").concat(t.channelUrl,"/messages_gap"),m.params=Xe({prev_start_ts:t.prevStart,prev_end_ts:t.prevEnd,prev_cache_count:t.prevCount,next_start_ts:t.nextStart,next_end_ts:t.nextEnd,next_cache_count:t.nextCount,huge_gap_threshold:(r=t.threshold)!==null&&r!==void 0?r:null,reverse:!0,custom_types:(i=t.customTypes)!==null&&i!==void 0?i:["*"],message_type:(a=t.messageType)!==null&&a!==void 0?a:null,include_reply_type:(s=t.replyType)!==null&&s!==void 0?s:Ar.NONE,include_reactions_summary:(o=t.includeReactions)===null||o===void 0||o,include_meta_array:(l=t.includeMetaArray)===null||l===void 0||l,include_thread_info:(u=t.includeThreadInfo)===null||u===void 0||u,include_parent_message_info:(d=t.includeParentMessageInfo)===null||d===void 0||d,with_sorted_meta_array:(f=t.includeMetaArray)===null||f===void 0||f,show_subchannel_messages_only:(p=t.showSubchannelMessagesOnly)!==null&&p!==void 0&&p,include_poll_details:!0,checking_continuous_messages:t.checkingContinuousMessages}),m}return B(n,e),n}(Re),d6=function(e){function n(t,r){var i,a,s,o,l,u,d=this;return(d=e.call(this,t,r)||this).isHugeGap=r.is_huge_gap,d.prevMessages=((i=r.prev_messages)!==null&&i!==void 0?i:[]).map(function(f){return Ei(t,f)}),d.prevHasMore=(a=r.prev_hasmore)!==null&&a!==void 0&&a,d.isContinuousPrevMessages=(s=r.is_continuous_prev_messages)!==null&&s!==void 0&&s,d.nextMessages=((o=r.next_messages)!==null&&o!==void 0?o:[]).map(function(f){return Ei(t,f)}),d.nextHasmore=(l=r.next_hasmore)!==null&&l!==void 0&&l,d.isContinuousNextMessages=(u=r.is_continuous_next_messages)!==null&&u!==void 0&&u,d}return B(n,e),n}(He),VT={includeMetaArray:!0,includeReactions:!0,includeThreadInfo:!0,includeParentMessageInfo:!0};(function(e){e.CACHE_AND_REPLACE_BY_API="cache_and_replace_by_api"})(xp||(xp={}));var xh,Fh,Hh,h6=function(){function e(){this._onCacheResult=jt,this._onApiResult=jt}return e.prototype._invokeResponse=function(n,t,r){var i=this;ut(function(){return A(i,void 0,void 0,function(){return M(this,function(a){switch(n){case"local":this._onCacheResult(t,r);break;case"remote":this._onApiResult(t,r)}return[2]})})})},e.prototype.onCacheResult=function(n){return this._onCacheResult=n,this},e.prototype.onApiResult=function(n){return this._onApiResult=n,this},e}(),f6=function(){function e(n,t){var r=t.filter,i=t.startingPoint,a=t.limit,s=t.prevResultLimit,o=t.nextResultLimit,l=t.channel,u=t.channelManager,d=t.disableBackgroundSync,f=d!==void 0&&d,p=this;this._messages=[],this._unsentMessages=[],this._isLoadingPrevious=!1,this._isLoadingNext=!1,this._iid=n,this._key="mc-".concat(Ro()),this._isDisposed=!1,this.filter=r??new Xs,this._channel=l,this._syncRange=new zs({}),this._hasPrevious=!0,this._hasNext=!0,this._startingPoint=typeof i=="number"&&Number.isFinite(i)?i:Number.MAX_SAFE_INTEGER,this._limit=a||zw,this._prevResultLimit=s??Math.floor(this._limit/2),this._nextResultLimit=o??Math.floor(this._limit/2),this._channelManager=u;var m=Y.of(this._iid).statManager;this._channelManager.subscribeChannelEvent(this._key,{onUpdate:function(C,T){var I=T.source,L=C.findIndex(function(D){return D.isIdentical(p.channel)});L>=0&&(p._replaceChannelOfCollection(C[L]),p.channel._runIfHandleableWithGroupChannel(function(D){switch(I){case ve.EVENT_CHANNEL_UPDATED:for(var O=!1,R=0;R<p._messages.length;R++)if(p._messages[R].createdAt>=D.messageOffsetTimestamp){O=!0;var k=R;if(k>0){var P=p._messages.splice(0,k);p._removeMessagesFromView(P.map(function(H){return p.keyOf(H)}),ve.EVENT_MESSAGE_OFFSET_UPDATED)}break}!O&&p._messages.length>0&&p._removeMessagesFromView(p._messages.map(function(H){return p.keyOf(H)}),ve.EVENT_MESSAGE_OFFSET_UPDATED);break;case ve.EVENT_CHANNEL_UNMUTED:var G=Y.of(p._iid).sdkState,V=T.user;G.userId===V.userId&&p._clearCheckMyMutedTimer();break;case ve.EVENT_CHANNEL_MUTED:G=Y.of(p._iid).sdkState,V=T.user,G.userId===V.userId&&D._myMutedRemainingTime!==-1&&p._startCheckMyMutedTimer(D._myMutedRemainingTime);break;case ve.EVENT_CHANNEL_LEFT:D.isPublic&&p._clearCheckMyMutedTimer()}ut(function(){return A(p,void 0,void 0,function(){var H;return M(this,function(F){return sp(I)&&(!((H=this._handler)===null||H===void 0)&&H.onChannelUpdated)&&this._handler.onChannelUpdated(T,this.channel),[2]})})})}),p._postprocessChannelUpdateEvent(C[L],I))},onRemove:function(C,T){var I=C.indexOf(p.channel.url);I>=0&&(p._clearCheckMyMutedTimer(),ut(function(){return A(p,void 0,void 0,function(){var L;return M(this,function(D){return!((L=this._handler)===null||L===void 0)&&L.onChannelDeleted&&this._handler.onChannelDeleted(T,this.channel.url),[2]})})}),p._postprocessChannelRemoveEvent(C[I]))}}),this._channelManager.subscribeMessageEvent(this._key,{onUpdate:function(C,T){var I,L,D=[],O=[];try{for(var R=je(C),k=R.next();!k.done;k=R.next()){var P=k.value;P.channelUrl===p._channel.url&&(p.filter.match(P)?D.push(P):O.push(p.keyOf(P)))}}catch(G){I={error:G}}finally{try{k&&!k.done&&(L=R.return)&&L.call(R)}finally{if(I)throw I.error}}if(_o(T)){if(D.length>0)switch(T){case ve.LOCAL_MESSAGE_CANCELED:case ve.LOCAL_MESSAGE_RESEND_STARTED:case ve.EVENT_MESSAGE_SENT_FAILED:case ve.EVENT_MESSAGE_SENT_SUCCESS:case ve.EVENT_MESSAGE_UPDATED:case ve.EVENT_MESSAGE_THREADINFO_UPDATED:case ve.EVENT_MESSAGE_REACTION_UPDATED:case ve.EVENT_MESSAGE_FEEDBACK_ADDED:case ve.EVENT_MESSAGE_FEEDBACK_UPDATED:case ve.EVENT_MESSAGE_FEEDBACK_DELETED:case ve.SYNC_MESSAGE_CHANGELOGS:p._updateMessagesToView(D,T);break;case ve.EVENT_MESSAGE_SENT_PENDING:p._addMessagesToView(D,T);break;case ve.EVENT_MESSAGE_RECEIVED:p.hasNext||p._addMessagesToView(D,T);break;case ve.SYNC_MESSAGE_FILL:p._addMessagesToView(D,T)}O.length>0&&p._removeMessagesFromView(O,T)}p._postprocessMessageUpdateEvent(C,T)},onRemove:function(C,T){p._removeMessagesFromView(C,T),p._postprocessMessageRemoveEvent(C)},onRemoveUnsent:function(C,T){p._removeUnsentMessageFromView(C,T)},onPollChangeLogUpdate:function(C,T){p._updatePollsToView(C,T)},onPollUpdate:function(C,T){p._applyPollUpdateEventToView(C,T)},onPollVote:function(C,T){p._applyPollVoteEventToView(C,T)},onReactionUpdate:function(C,T){p._applyReactionEventToView(C,T)},onThreadInfoUpdate:function(C,T){p._applyThreadInfoEventToView(C,T)}});var E=Y.of(this._iid),g=E.cacheContext,y=E.dispatcher,S=E.messageBackgroundSyncThrottleController;this._channel._updateMessageCollectionLastAccessedAt(),y.dispatch(new un({channels:[this._channel],context:{source:ve.CHANNEL_LASTACCESSEDAT_UPDATED}})),this._backgroundSync=o6.of(this._iid,this._channel),!f&&this._shouldStartBackgroundSync()&&this._backgroundSync.resume(this._startingPoint),this._changelogSync=l6.of(this._iid,this._channel,this.changelogIncludeParams),this._changelogSync.resume(),this._pollChangelogSync=u6.of(this._iid,this._channel,this._hasPollMessage.bind(this)),this._pollChangelogSync.resume(),this._prevFill=new Al(this._key,function(C){return A(p,void 0,void 0,function(){var T=this;return M(this,function(I){switch(I.label){case 0:return[4,S.run("message-fill-sync-".concat(l.url,"-prev"),function(){return A(T,void 0,void 0,function(){var L,D,O,R,k,P,G;return M(this,function(V){switch(V.label){case 0:return[4,this._getRemoteMessages(C,{prevLimit:this._prevResultLimit,source:ve.SYNC_MESSAGE_FILL,checkingContinuousMessages:g.localCacheEnabled})];case 1:return L=V.sent(),D=L.messages,O=L.isContinuousMessages,D.length>0?(R=Math.min.apply(Math,At([],ft(D.map(function(H){return H.createdAt})),!1)),this._syncRange.extends(R),O&&((k=this._backgroundSync)===null||k===void 0||k.range.extends(R)),[2,{hasNext:D.length>=this._prevResultLimit&&this.viewTop<R,nextToken:this._syncRange.top}]):(g.localCacheEnabled&&m.put(new cr({type:Zn.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:(G=(P=g.localCacheConfig)===null||P===void 0?void 0:P.maxSize)!==null&&G!==void 0?G:0,use_local_cache:g.localCacheEnabled,starting_point:0,message_init_policy:""}})),[2,{hasNext:!1,nextToken:0}])}})})})];case 1:return[2,I.sent()]}})})}),this._nextFill=new Al(this._key,function(C){return A(p,void 0,void 0,function(){var T=this;return M(this,function(I){switch(I.label){case 0:return[4,S.run("message-fill-sync-".concat(l.url,"-next"),function(){return A(T,void 0,void 0,function(){var L,D,O,R,k,P,G;return M(this,function(V){switch(V.label){case 0:return[4,this._getRemoteMessages(C,{nextLimit:this._nextResultLimit,source:ve.SYNC_MESSAGE_FILL,checkingContinuousMessages:g.localCacheEnabled})];case 1:return L=V.sent(),D=L.messages,O=L.isContinuousMessages,D.length>0?(R=Math.max.apply(Math,At([],ft(D.map(function(H){return H.createdAt})),!1)),this._syncRange.extends(R),O&&((k=this._backgroundSync)===null||k===void 0||k.range.extends(R)),[2,{hasNext:!(D.length>=this._nextResultLimit&&this._hasNext)||this.viewBottom>R,nextToken:this._syncRange.bottom}]):(g.localCacheEnabled&&m.put(new cr({type:Zn.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:(G=(P=g.localCacheConfig)===null||P===void 0?void 0:P.maxSize)!==null&&G!==void 0?G:0,use_local_cache:g.localCacheEnabled,starting_point:0,message_init_policy:""}})),[2,{hasNext:!1,nextToken:0}])}})})})];case 1:return[2,I.sent()]}})})}),this._connectionEventContext=y.on(function(C){if(C instanceof pa)switch(C.stateType){case On.CONNECTED:mr(function(){return A(p,void 0,void 0,function(){return M(this,function(T){return this._activate(),[2]})})});break;case On.LOGOUT:p.dispose();break;default:p._clearCheckMyMutedTimer(),p._prevFill.stop(),p._nextFill.stop()}})}return e.prototype.keyOf=function(n){return 0},Object.defineProperty(e.prototype,"changelogIncludeParams",{get:function(){return{includeReactions:!0,includeThreadInfo:!0,includeMetaArray:!0,includeParentMessageInfo:!0}},enumerable:!1,configurable:!0}),e.prototype._postprocessChannelUpdateEvent=function(n,t){},e.prototype._postprocessChannelRemoveEvent=function(n){},e.prototype._postprocessMessageUpdateEvent=function(n,t){},e.prototype._postprocessMessageRemoveEvent=function(n){},Object.defineProperty(e.prototype,"channel",{get:function(){return this._channel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"succeededMessages",{get:function(){return At([],ft(this._messages),!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"failedMessages",{get:function(){return this._unsentMessages.filter(function(n){return n.sendingStatus===yn.FAILED})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pendingMessages",{get:function(){return this._unsentMessages.filter(function(n){return n.sendingStatus===yn.PENDING})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPrevious",{get:function(){return this._hasPrevious},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNext",{get:function(){return this._hasNext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewTop",{get:function(){return Math.min.apply(Math,At(At([],ft(this._messages.map(function(n){return n.createdAt})),!1),[Number.MAX_SAFE_INTEGER],!1))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewBottom",{get:function(){return Math.max.apply(Math,At(At([],ft(this._messages.map(function(n){return n.createdAt})),!1),[0],!1))},enumerable:!1,configurable:!0}),e.prototype._activate=function(){return A(this,void 0,void 0,function(){return M(this,function(n){switch(n.label){case 0:return Y.of(this._iid).logger.debug("check huge gap"),this._checkHugeGap(),[4,this._refreshChannel(ve.SYNC_CHANNEL_CHANGELOGS)];case 1:return n.sent(),[2]}})})},e.prototype._replaceChannelOfCollection=function(n){this._channel.isGroupChannel()?this._channel=n:this._channel.isFeedChannel()&&(this._channel._groupChannel=n._groupChannel)},e.prototype._shouldStartBackgroundSync=function(){var n=Y.of(this._iid).cacheContext;return this.channel.isGroupChannel()?n.localCacheEnabled&&!this.channel.isSuper:n.localCacheEnabled},e.prototype._setBaseMessageCollectionHandler=function(n){this._handler=n},e.prototype._filterUnderOffsetMessage=function(n){return n},e.prototype._updateChildMessagesInView=function(n){var t=[];return this._messages.forEach(function(r){r instanceof Ni&&r.parentMessageId===n.messageId&&r.applyParentMessage(n)&&t.push(r)}),t},e.prototype._updatePollsToView=function(n,t){var r,i,a=this,s=[];try{for(var o=je(n),l=o.next();!l.done;l=o.next()){var u=l.value,d=Yd(this._messages,u.messageId);if(d>=0){var f=this._messages[d];f.isUserMessage()&&f.applyPoll(u),s.push(f)}}}catch(p){r={error:p}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s.length>0&&_o(t)&&ut(function(){return A(a,void 0,void 0,function(){var p,m,E;return M(this,function(g){return p={source:t},s.length>0&&((E=(m=this._handler).onMessagesUpdated)===null||E===void 0||E.call(m,p,this.channel,s)),[2]})})}),s},e.prototype._applyPollUpdateEventToView=function(n,t){var r=this,i=Yd(this._messages,n.messageId);if(i>=0){var a=this._messages[i];a&&a.isUserMessage()&&a.poll&&a.poll.applyPollUpdateEvent(n)&&_o(t)&&ut(function(){return A(r,void 0,void 0,function(){var s,o,l;return M(this,function(u){return s={source:t},(l=(o=this._handler)===null||o===void 0?void 0:o.onMessagesUpdated)===null||l===void 0||l.call(o,s,this.channel,[a]),[2]})})})}},e.prototype._applyPollVoteEventToView=function(n,t){var r=this,i=Yd(this._messages,n.messageId);if(i>=0){var a=this._messages[i];a&&a.isUserMessage()&&a.poll&&a.poll.applyPollVoteEvent(n)&&_o(t)&&ut(function(){return A(r,void 0,void 0,function(){var s,o,l;return M(this,function(u){return s={source:t},(l=(o=this._handler)===null||o===void 0?void 0:o.onMessagesUpdated)===null||l===void 0||l.call(o,s,this.channel,[a]),[2]})})})}},e.prototype._applyReactionEventToView=function(n,t){var r=this,i=Yd(this._messages,n.messageId);if(i>=0){var a=this._messages[i];a&&(a.isUserMessage()||a.isFileMessage()||a.isMultipleFilesMessage())&&_o(t)&&(a.applyReactionEvent(n),ut(function(){return A(r,void 0,void 0,function(){var s,o,l;return M(this,function(u){return s={source:t},(l=(o=this._handler)===null||o===void 0?void 0:o.onMessagesUpdated)===null||l===void 0||l.call(o,s,this.channel,[a]),[2]})})}))}},e.prototype._applyThreadInfoEventToView=function(n,t){var r=this,i=Yd(this._messages,n.targetMessageId);if(i>=0){var a=this._messages[i];a&&(a.isUserMessage()||a.isFileMessage()||a.isMultipleFilesMessage())&&_o(t)&&(a.applyThreadInfoUpdateEvent(n),ut(function(){return A(r,void 0,void 0,function(){var s,o,l;return M(this,function(u){return s={source:t},(l=(o=this._handler)===null||o===void 0?void 0:o.onMessagesUpdated)===null||l===void 0||l.call(o,s,this.channel,[a]),[2]})})}))}},e.prototype._removeMessagesFromView=function(n,t){var r,i,a=this,s=[],o=[],l=function(p){var m=u._messages.findIndex(function(g){return a.keyOf(g)===p});if(m>=0){var E=u._messages[m];s.push(u.keyOf(E)),o.push(E),u._messages.splice(m,1)}},u=this;try{for(var d=je(n),f=d.next();!f.done;f=d.next())l(f.value)}catch(p){r={error:p}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return _o(t)&&o.length>0&&ut(function(){return A(a,void 0,void 0,function(){var p,m,E;return M(this,function(g){return p={source:t},(E=(m=this._handler)===null||m===void 0?void 0:m.onMessagesDeleted)===null||E===void 0||E.call(m,p,this.channel,s,o),[2]})})}),s},e.prototype._removeUnsentMessageFromView=function(n,t){var r=this._unsentMessages.findIndex(function(i){return i.reqId===n});r>=0&&this._unsentMessages.splice(r,1)},e.prototype._getLocalMessages=function(n,t){var r=t.prevLimit,i=r===void 0?0:r,a=t.nextLimit,s=a===void 0?0:a,o=t.inclusive,l=o===void 0||o;return A(this,void 0,void 0,function(){var u,d,f,p,m;return M(this,function(E){switch(E.label){case 0:return u=[],l?[4,this._channelManager.getExactlyMatchingMessagesForTokenFromCache(this._channel.url,n,this.filter)]:[3,2];case 1:u=E.sent(),E.label=2;case 2:return i>0?[4,this._channelManager.getMessagesFromCache(this._channel.url,n,"prev",this.filter,i,!1)]:[3,4];case 3:return f=E.sent(),[3,5];case 4:f=[],E.label=5;case 5:return d=f,s>0?[4,this._channelManager.getMessagesFromCache(this._channel.url,n,"next",this.filter,s,!1)]:[3,7];case 6:return m=E.sent(),[3,8];case 7:m=[],E.label=8;case 8:return p=m,[2,{messages:At(At(At([],ft(u),!1),ft(d),!1),ft(p),!1).sort(function(g,y){return y.createdAt-g.createdAt}),prevMessagesCount:d.length,nextMessagesCount:p.length}]}})})},e.prototype._getRemoteMessages=function(n,t){var r=t.prevLimit,i=r===void 0?0:r,a=t.nextLimit,s=a===void 0?0:a,o=t.source,l=o===void 0?ve.REQUEST_MESSAGE:o,u=t.reverse,d=u!==void 0&&u,f=t.checkingHasNext,p=f!==void 0&&f,m=t.checkingContinuousMessages,E=m!==void 0&&m;return A(this,void 0,void 0,function(){var g,y;return M(this,function(S){switch(S.label){case 0:return g=xr.of(this._iid),i>0||s>0?[4,g._getMessagesByTimestampForCollection(this._channel.url,this._channel.channelType,n,_t(W(W(W({},this.filter),VT),{isInclusive:!0,reverse:d,prevResultSize:i,nextResultSize:s})),l,p,E)]:[3,2];case 1:return y=S.sent(),[3,3];case 2:y={messages:[],isContinuousMessages:!1},S.label=3;case 3:return[2,y]}})})},e.prototype._checkHugeGap=function(){var n,t,r,i,a;return A(this,void 0,void 0,function(){var s,o,l,u,d,f,p,m,E,g,y,S,C,T,I,L,D,O,R,k,P,G,V,H,F,z=this;return M(this,function(K){switch(K.label){case 0:return s=Y.of(this._iid),o=s.dispatcher,l=s.requestQueue,u=s.cacheContext,d=s.statManager,f=s.logger,this._messages.length>0?(p=this._syncRange.top,m=this.viewTop,E=this._syncRange.bottom,g=this.hasNext?this.viewBottom:Number.MAX_SAFE_INTEGER,[4,this._channelManager.getCachedMessageCountBetween(this._channel.url,this.filter,m,p)]):[3,8];case 1:return y=K.sent(),[4,this._channelManager.getCachedMessageCountBetween(this._channel.url,this.filter,E,g)];case 2:S=K.sent(),K.label=3;case 3:return K.trys.push([3,5,6,7]),[4,tm(function(){return A(z,void 0,void 0,function(){var ee,$,Q,ne,j,Z,ie,fe,te,le,Me,ae,he,pe,Ne,_e,ge,me=this;return M(this,function(Le){switch(Le.label){case 0:return ee=new c6(W(W({channelUrl:this._channel.url,channelType:this._channel.channelType,prevStart:m,prevEnd:p,prevCount:y,nextStart:E,nextEnd:g,nextCount:S,checkingContinuousMessages:u.localCacheEnabled},this.filter),VT)),[4,l.send(ee)];case 1:return $=Le.sent(),Q=$.as(d6),ne=Q.isHugeGap,j=Q.prevMessages,Z=j===void 0?[]:j,ie=Q.prevHasMore,fe=Q.isContinuousPrevMessages,te=Q.nextMessages,le=te===void 0?[]:te,Me=Q.nextHasmore,ae=Q.isContinuousNextMessages,ne?ut(function(){return A(me,void 0,void 0,function(){var Qe;return M(this,function(Pe){return!((Qe=this._handler)===null||Qe===void 0)&&Qe.onHugeGapDetected&&this._handler.onHugeGapDetected(),[2]})})}):(he=this.viewTop,pe=this.viewBottom,Ne=Math.min.apply(Math,At([Number.MAX_SAFE_INTEGER,he],ft(Z.map(function(Qe){return Qe.createdAt})),!1)),_e=Math.max.apply(Math,At([0,pe],ft(le.map(function(Qe){return Qe.createdAt})),!1)),o.dispatch(new Xn({messages:Z,source:ve.SYNC_MESSAGE_FILL})),o.dispatch(new Xn({messages:le,source:ve.SYNC_MESSAGE_FILL})),this._syncRange.extends(Ne,_e),(fe||ae)&&((ge=this._backgroundSync)===null||ge===void 0||ge.range.extends(Ne,_e)),ie&&this._prevFill.start(Ne),Me&&this._nextFill.start(_e)),[2]}})})},1)];case 4:return K.sent(),[3,7];case 5:return C=K.sent(),f.debug("Failed HugeGap Check ",C),[3,7];case 6:return u.localCacheEnabled&&d.put(new cr({type:Zn.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:(t=(n=u.localCacheConfig)===null||n===void 0?void 0:n.maxSize)!==null&&t!==void 0?t:0,use_local_cache:u.localCacheEnabled,starting_point:0,message_init_policy:""}})),[7];case 7:return[3,13];case 8:T=Date.now(),K.label=9;case 9:return K.trys.push([9,11,12,13]),[4,this._getRemoteMessages(T,{prevLimit:this._prevResultLimit,nextLimit:this._nextResultLimit,source:ve.SYNC_MESSAGE_FILL,checkingHasNext:!0,checkingContinuousMessages:u.localCacheEnabled})];case 10:if(I=K.sent(),L=I.messages,D=I.isContinuousMessages,O=I.hasNext,L.length>0){for(R=L.map(function(ee){return ee.createdAt}),k=0,P=0,G=0;G<R.length;G++)(V=R[G])<=T?k++:V>=T&&P++;this._hasPrevious=k>=this._prevResultLimit,this._hasNext=O??P>=this._nextResultLimit,(F=this._syncRange).extends.apply(F,At([],ft(R),!1)),D&&((r=this._backgroundSync)===null||r===void 0||r.range.extends(this._syncRange.top,this._syncRange.bottom)),this._addMessagesToView(L,ve.SYNC_MESSAGE_FILL)}else this._hasPrevious=!1,this._hasNext=!1;return[3,13];case 11:return(H=K.sent())instanceof J&&H.code===at.NOT_FOUND_IN_DATABASE&&(this._hasPrevious=!1,this._hasNext=!1),[3,13];case 12:return u.localCacheEnabled&&d.put(new cr({type:Zn.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:(a=(i=u.localCacheConfig)===null||i===void 0?void 0:i.maxSize)!==null&&a!==void 0?a:0,use_local_cache:u.localCacheEnabled,starting_point:0,message_init_policy:""}})),[7];case 13:return[2]}})})},e.prototype._loadUnsentMessages=function(){return A(this,void 0,void 0,function(){var n;return M(this,function(t){switch(t.label){case 0:return n=this,[4,this._channelManager.getUnsentMessagesFromCache(this._channel.url,this.filter)];case 1:return n._unsentMessages=t.sent(),[2]}})})},e.prototype._hasPollMessage=function(){return A(this,void 0,void 0,function(){return M(this,function(n){switch(n.label){case 0:return[4,this._channelManager.getPollMessagesFromCache(this._channel.url,Date.now()+6e5,this.filter,1)];case 1:return n.sent().length>0?[2,!0]:[2,!1]}})})},e.prototype._refreshChannel=function(n,t){return t===void 0&&(t=!1),A(this,void 0,void 0,function(){var r,i,a=this;return M(this,function(s){switch(s.label){case 0:r=Y.of(this._iid).logger,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this._channelManager.refreshChannel(this.channel.url,!0,n,t)];case 2:return s.sent(),this.channel._runIfHandleableWithGroupChannel(function(o){o.myMutedState===Ya.MUTED&&mr(function(){return A(a,void 0,void 0,function(){var l;return M(this,function(u){switch(u.label){case 0:return[4,this.channel.getMyMutedInfo()];case 1:return(l=u.sent()).isMuted&&l.remainingDuration!==-1&&this._startCheckMyMutedTimer(l.remainingDuration),[2]}})})})}),[3,4];case 3:return i=s.sent(),r.warn("Failed to refresh channel",i),[3,4];case 4:return[2]}})})},e.prototype._startCheckMyMutedTimer=function(n){var t=this;this._clearCheckMyMutedTimer(),this._checkMyMutedStateTimer=setTimeout(function(){return A(t,void 0,void 0,function(){var r,i,a,s=this;return M(this,function(o){switch(o.label){case 0:this._checkMyMutedStateTimer=void 0,r=!0,o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,this._channel.getMyMutedInfo()];case 2:return i=o.sent(),r=!i.isMuted,[3,5];case 3:return o.sent(),r=!0,[3,5];case 4:return r&&(a=Y.of(this._iid).sessionManager,this.channel._runIfHandleableWithGroupChannel(function(l){var u,d;l.myMutedState=Ya.UNMUTED;var f={source:ve.EVENT_CHANNEL_UNMUTED,user:a.currentUser};(d=(u=s._handler)===null||u===void 0?void 0:u.onChannelUpdated)===null||d===void 0||d.call(u,f,s.channel)})),[7];case 5:return[2]}})})},n+1e3)},e.prototype._clearCheckMyMutedTimer=function(){this._checkMyMutedStateTimer&&(clearTimeout(this._checkMyMutedStateTimer),this._checkMyMutedStateTimer=void 0)},e.prototype._setHasNextAndHasPrevious=function(n,t){for(var r=n.map(function(l){return l.createdAt}),i=0,a=0,s=0;s<r.length;s++){var o=r[s];o<this._startingPoint?i++:o>this._startingPoint&&a++}this._hasPrevious=i>=this._prevResultLimit,this._hasNext=t??a>=this._nextResultLimit},e.prototype.initialize=function(n){var t=this,r=new h6;this._messages=[],this._unsentMessages=[],this._syncRange=new zs({}),this._hasNext=!0,this._hasPrevious=!0;var i=[],a={messages:[],prevMessagesCount:0,nextMessagesCount:0};return ut(function(){return A(t,void 0,void 0,function(){var s,o,l,u,d,f=this;return M(this,function(p){switch(p.label){case 0:return[4,(d=this._backgroundSync)===null||d===void 0?void 0:d.loadMetadata()];case 1:return s=p.sent(),o=Y.of(this._iid),l=o.cacheContext,u=o.statManager,n===xp.CACHE_AND_REPLACE_BY_API&&this._getLocalMessages(this._startingPoint,{prevLimit:this._prevResultLimit,nextLimit:this._nextResultLimit}).then(function(m){return A(f,void 0,void 0,function(){return M(this,function(E){switch(E.label){case 0:return a=m,i=this._filterUnderOffsetMessage(a.messages),this._addMessagesToView(i,ve.REQUEST_MESSAGE),[4,this._loadUnsentMessages()];case 1:return E.sent(),r._invokeResponse("local",null,i),[2]}})})}).catch(function(m){if(Ai(m))throw m;r._invokeResponse("local",m,null)}).finally(function(){return A(f,void 0,void 0,function(){var m,E,g,y,S,C,T,I=this;return M(this,function(L){switch(L.label){case 0:return m=Y.of(this._iid).cacheContext,E=!0,g=!0,y=!1,m.localCacheEnabled&&i.length>0&&(S=s.range).includes.apply(S,At([],ft(i.map(function(D){return D.createdAt})),!1))&&(!s.previousComplete&&a.prevMessagesCount<this._prevResultLimit?g=!0:this._startingPoint>s.range.bottom||a.nextMessagesCount<this._nextResultLimit?y=!0:g=!1),[4,this._refreshChannel(ve.REFRESH_CHANNEL,y)];case 1:return L.sent(),y&&this._channel._runIfHandleableWithGroupChannel(function(D){var O=Math.max.apply(Math,At([],ft(i.map(function(R){return R.createdAt})),!1));D._latestMessageInfo&&O>=D._latestMessageInfo.createdAt&&(g=!1)}),g?(E=!1,this._getRemoteMessages(this._startingPoint,{prevLimit:this._prevResultLimit,nextLimit:this._nextResultLimit,reverse:!0,checkingHasNext:!0,checkingContinuousMessages:m.localCacheEnabled}).then(function(D){var O,R,k,P=D.messages,G=D.isContinuousMessages,V=D.hasNext,H=I._filterUnderOffsetMessage(P);I._messages=[],H.length>0?(I._setHasNextAndHasPrevious(H,V),(O=I._syncRange).extends.apply(O,At([],ft(H.map(function(F){return F.createdAt})),!1)),G&&(!((R=I._backgroundSync)===null||R===void 0)&&R.range.overlap(I._syncRange))&&((k=I._backgroundSync)===null||k===void 0||k.range.extends(I._syncRange.top,I._syncRange.bottom)),I._addMessagesToView(H,ve.REQUEST_MESSAGE)):(I._hasPrevious=!1,I._hasNext=!1),r._invokeResponse("remote",null,H)}).catch(function(D){if(Ai(D))throw D;r._invokeResponse("remote",D,null)})):(this._setHasNextAndHasPrevious(i),r._invokeResponse("remote",null,i)),m.localCacheEnabled&&u.put(new cr({type:Zn.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"initial_load",event:E?"cache_hit":"cache_miss",max_db_size:(T=(C=m.localCacheConfig)===null||C===void 0?void 0:C.maxSize)!==null&&T!==void 0?T:0,message_init_policy:n,use_local_cache:m.localCacheEnabled,collection_id:this._key}})),[2]}})})}),u.put(new Kh({type:Zn.FEATURE_LOCALCACHE,data:{use_local_cache:l.localCacheEnabled,collection_interface:{message_init_policy:n,message:!0}}})),[2]}})})}),r},e.prototype.loadPrevious=function(){var n,t,r;return A(this,void 0,void 0,function(){var i,a,s,o,l,u,d,f,p=this;return M(this,function(m){switch(m.label){case 0:if(this._isDisposed)throw new J({code:at.COLLECTION_DISPOSED,message:"Collection has been disposed."});return i=Y.of(this._iid),a=i.cacheContext,s=i.statManager,o=i.logger,this._hasPrevious?this._isLoadingPrevious?(o.warn("Messages are already fetching."),[2,[]]):(this._isLoadingPrevious=!0,l=this.viewTop,u=[],[4,mr(function(){return A(p,void 0,void 0,function(){var E;return M(this,function(g){switch(g.label){case 0:return[4,this._getLocalMessages(l,{prevLimit:this._prevResultLimit,inclusive:!1})];case 1:return E=g.sent(),u=this._filterUnderOffsetMessage(E.messages),[2]}})})})]):[2,[]];case 1:return m.sent(),d=u.length>=this._prevResultLimit,a.localCacheEnabled&&s.put(new cr({type:Zn.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_prev",event:d?"cache_hit":"cache_miss",max_db_size:(t=(n=a.localCacheConfig)===null||n===void 0?void 0:n.maxSize)!==null&&t!==void 0?t:0,use_local_cache:a.localCacheEnabled,collection_id:this._key,message_init_policy:""}})),d&&(!((r=this._backgroundSync)===null||r===void 0)&&r.isWrappingMessages(u))?[3,3]:(f=!1,[4,mr(function(){return A(p,void 0,void 0,function(){var E,g,y,S,C,T,I,L=this;return M(this,function(D){switch(D.label){case 0:return E=Y.of(this._iid).cacheContext,[4,this._getRemoteMessages(l,{prevLimit:this._prevResultLimit,reverse:!0,checkingContinuousMessages:E.localCacheEnabled})];case 1:return g=D.sent(),(u=this._filterUnderOffsetMessage(g.messages)).length>0&&((y=this._syncRange).extends.apply(y,At([],ft(u.map(function(O){return O.createdAt})),!1)),!((S=this._backgroundSync)===null||S===void 0)&&S.range.overlap(this._syncRange)&&g.isContinuousMessages&&(f=!0,(C=this._backgroundSync)===null||C===void 0||C.range.extends(this._syncRange.top))),u=u.filter(function(O){return Sa(L._messages,O)<0}),this._hasPrevious=u.length>=this._prevResultLimit,f&&s.put(new cr({type:Zn.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_prev",event:"cache_fetch",max_db_size:(I=(T=E.localCacheConfig)===null||T===void 0?void 0:T.maxSize)!==null&&I!==void 0?I:0,use_local_cache:E.localCacheEnabled,collection_id:this._key,message_init_policy:""}})),[2]}})})})]);case 2:return m.sent(),this._addMessagesToView(u,ve.REQUEST_MESSAGE),[3,4];case 3:this._hasPrevious=u.length>=this._prevResultLimit,u.length>0&&this._addMessagesToView(u,ve.REQUEST_MESSAGE),m.label=4;case 4:return this._isLoadingPrevious=!1,[2,u]}})})},e.prototype.loadNext=function(){var n,t,r;return A(this,void 0,void 0,function(){var i,a,s,o,l,u,d,f,p=this;return M(this,function(m){switch(m.label){case 0:if(this._isDisposed)throw new J({code:at.COLLECTION_DISPOSED,message:"Collection has been disposed."});return i=Y.of(this._iid),a=i.cacheContext,s=i.statManager,o=i.logger,this._hasNext?this._isLoadingNext?(o.warn("Messages are already fetching."),[2,[]]):(this._isLoadingNext=!0,l=this.viewBottom,u=[],[4,mr(function(){return A(p,void 0,void 0,function(){var E;return M(this,function(g){switch(g.label){case 0:return[4,this._getLocalMessages(l,{nextLimit:this._nextResultLimit,inclusive:!1})];case 1:return E=g.sent(),u=this._filterUnderOffsetMessage(E.messages),[2]}})})})]):[2,[]];case 1:return m.sent(),d=u.length>=this._nextResultLimit,a.localCacheEnabled&&s.put(new cr({type:Zn.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_next",event:d?"cache_hit":"cache_miss",max_db_size:(t=(n=a.localCacheConfig)===null||n===void 0?void 0:n.maxSize)!==null&&t!==void 0?t:0,use_local_cache:a.localCacheEnabled,collection_id:this._key,message_init_policy:""}})),d&&(!((r=this._backgroundSync)===null||r===void 0)&&r.isWrappingMessages(u))?[3,3]:(f=!1,[4,mr(function(){return A(p,void 0,void 0,function(){var E,g,y,S,C,T,I,L,D=this;return M(this,function(O){switch(O.label){case 0:return E=Y.of(this._iid).cacheContext,[4,this._getRemoteMessages(l,{nextLimit:this._nextResultLimit,reverse:!0,checkingHasNext:!0,checkingContinuousMessages:E.localCacheEnabled})];case 1:return g=O.sent(),(u=this._filterUnderOffsetMessage(g.messages)).length>0&&((y=this._syncRange).extends.apply(y,At([],ft(u.map(function(R){return R.createdAt})),!1)),!((S=this._backgroundSync)===null||S===void 0)&&S.range.overlap(this._syncRange)&&g.isContinuousMessages&&(f=!0,(C=this._backgroundSync)===null||C===void 0||C.range.extends(this._syncRange.bottom))),u=u.filter(function(R){return Sa(D._messages,R)<0}),this._hasNext=(T=g.hasNext)!==null&&T!==void 0?T:u.length>=this._nextResultLimit,f&&s.put(new cr({type:Zn.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_next",event:"cache_fetch",max_db_size:(L=(I=E.localCacheConfig)===null||I===void 0?void 0:I.maxSize)!==null&&L!==void 0?L:0,use_local_cache:E.localCacheEnabled,collection_id:this._key,message_init_policy:""}})),[2]}})})})]);case 2:return m.sent(),this._addMessagesToView(u,ve.REQUEST_MESSAGE),[3,4];case 3:this._hasNext=u.length>=this._nextResultLimit,u.length>0&&this._addMessagesToView(u,ve.REQUEST_MESSAGE),m.label=4;case 4:return this._isLoadingNext=!1,[2,u]}})})},e.prototype.removeFailedMessage=function(n){return A(this,void 0,void 0,function(){var t;return M(this,function(r){switch(r.label){case 0:if(this._isDisposed)throw new J({code:at.COLLECTION_DISPOSED,message:"Collection has been disposed."});return[4,this._channelManager.removeFailedMessageFromCache(n)];case 1:return r.sent(),(t=this._unsentMessages.findIndex(function(i){return i.reqId===n}))>-1&&this._unsentMessages.splice(t,1),[2]}})})},e.prototype.dispose=function(){var n,t,r,i=this;if(!this._isDisposed){this._isDisposed=!0;var a=Y.of(this._iid),s=a.cacheContext,o=a.dispatcher;this._messages=[],this._clearCheckMyMutedTimer(),this._channel._runIfHandleableWithGroupChannel(function(l){l.myMemberState!==pr.NONE&&(i._channel._updateMessageCollectionLastAccessedAt(),o.dispatch(new un({channels:[i._channel],context:{source:ve.CHANNEL_LASTACCESSEDAT_UPDATED}})))}),s.localCacheEnabled&&(this._prevFill.stop(),this._nextFill.stop()),(n=this._backgroundSync)===null||n===void 0||n.close(),(t=this._changelogSync)===null||t===void 0||t.close(),(r=this._pollChangelogSync)===null||r===void 0||r.close(),this._channelManager.unsubscribeChannelEvent(this._key),this._channelManager.unsubscribeMessageEvent(this._key),this._connectionEventContext&&this._connectionEventContext.close()}},e}(),v6=function(e){function n(t,r){return e.call(this,t,W(W({},r),{channelManager:Vr.of(t)}))||this}return B(n,e),n.prototype.keyOf=function(t){return t.messageId},n.prototype.initialize=function(t){return e.prototype.initialize.call(this,t)},n.prototype.setMessageCollectionHandler=function(t){this._setBaseMessageCollectionHandler(t)},n.prototype._addMessagesToView=function(t,r){var i,a,s=this,o=this._filterUnderOffsetMessage(t),l=[],u=[];try{for(var d=je(o),f=d.next();!f.done;f=d.next()){var p=f.value;if(r===ve.SYNC_MESSAGE_FILL)if(p.messageId>0){if((y=Sa(this._messages,p))<0){Sa(this._unsentMessages,p)<0&&l.push(p);var m=G_(this._messages,p);this._messages.splice(m,0,p)}}else p instanceof dr&&(y=Sa(this._unsentMessages,p))<0&&Sa(this._messages,p)<0&&(this._unsentMessages.push(p),l.push(p));else if(p.messageId>0){if((y=Sa(this._messages,p))<0){var E=Sa(this._unsentMessages,p);E<0?l.push(p):(this._unsentMessages.splice(E,1),u.push(p)),m=G_(this._messages,p),this._messages.splice(m,0,p)}else u.push(p),this._messages[y]=p;if(p.updatedAt>0){var g=this._updateChildMessagesInView(p);u.push.apply(u,At([],ft(g),!1))}}else if(p instanceof dr){var y;(y=Sa(this._unsentMessages,p))<0?Sa(this._messages,p)<0&&(this._unsentMessages.push(p),l.push(p)):(u.push(p),this._unsentMessages[y]=p)}}}catch(S){i={error:S}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}_o(r)&&ut(function(){return A(s,void 0,void 0,function(){var S,C,T,I,L;return M(this,function(D){return S={source:r},l.length>0&&((T=(C=this._handler)===null||C===void 0?void 0:C.onMessagesAdded)===null||T===void 0||T.call(C,S,this.channel,l)),u.length>0&&((L=(I=this._handler)===null||I===void 0?void 0:I.onMessagesUpdated)===null||L===void 0||L.call(I,S,this.channel,u)),[2]})})})},n.prototype._updateMessagesToView=function(t,r){var i,a,s=this,o=[],l=[],u=[];try{for(var d=je(t),f=d.next();!f.done;f=d.next()){var p,m=f.value;if(m.messageId>0)if((p=Sa(this._messages,m))>=0)l.push(m),this._messages[p]=m;else{var E=Sa(this._unsentMessages,m);if(E>=0){var g=ft(this._unsentMessages.splice(E,1),1)[0];if(this.hasNext&&g)u.push(g);else{l.push(m);var y=G_(this._messages,m);this._messages.splice(y,0,m)}}else{var S=this._messages.map(function(C){return C.createdAt});(m.createdAt<Math.min.apply(Math,At([],ft(S),!1))&&!this._hasPrevious||m.createdAt>Math.max.apply(Math,At([],ft(S),!1))&&!this._hasNext)&&o.push(m)}}else m instanceof dr&&(p=Sa(this._unsentMessages,m))>=0&&(l.push(m),this._unsentMessages[p]=m)}}catch(C){i={error:C}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}return _o(r)&&ut(function(){return A(s,void 0,void 0,function(){var C,T,I,L,D;return M(this,function(O){return C={source:r},l.length>0?(I=(T=this._handler)===null||T===void 0?void 0:T.onMessagesUpdated)===null||I===void 0||I.call(T,C,this.channel,l):u.length>0?(D=(L=this._handler)===null||L===void 0?void 0:L.onMessagesDeleted)===null||D===void 0||D.call(L,C,this.channel,[],u):o.length>0&&this._addMessagesToView(o,r),[2]})})}),l},n}(f6),p6={coverUrl:void 0,coverImage:void 0,isDistinct:void 0,isPublic:void 0,isDiscoverable:void 0,accessCode:void 0,name:void 0,data:void 0,customType:void 0,operatorUserIds:void 0,messageSurvivalSeconds:void 0},m6=function(e){function n(t){var r=this,i=t.channelUrl,a=t.token,s=t.limit,o=t.order,l=t.mutedMemberFilter,u=t.memberStateFilter,d=t.nicknameStartsWithFilter,f=t.operatorFilter;return(r=e.call(this)||this).method=we.GET,r.path="".concat(Li,"/").concat(encodeURIComponent(i),"/members"),r.params={token:a,limit:s,order:o,muted_member_filter:l,member_state_filter:u,nickname_startswith:d,operator_filter:f,show_member_is_muted:!0,show_read_receipt:!0,show_delivery_receipt:!0},r}return B(n,e),n}(Re),_6=function(e){function n(t,r){var i=e.call(this,t,r)||this;i.members=[];var a=r.next,s=r.members;return i.token=a,s&&s.length>0&&(i.members=s.map(function(o){return new Da(t,o)})),i}return B(n,e),n}(He);(function(e){e.ALL="all",e.MUTED="muted",e.UNMUTED="unmuted"})(xh||(xh={})),function(e){e.MEMBER_NICKNAME_ALPHABETICAL="member_nickname_alphabetical",e.OPERATOR_THEN_MEMBER_ALPHABETICAL="operator_then_member_alphabetical"}(Fh||(Fh={})),function(e){e.ALL="all",e.JOINED="joined_only",e.INVITED="invited_only",e.INVITED_BY_FRIEND="invited_by_friend",e.INVITED_BY_NON_FRIEND="invited_by_non_friend"}(Hh||(Hh={}));var g6=function(e){function n(t,r,i){var a,s,o,l,u=this;return(u=e.call(this,t,r,cn.GROUP,i)||this).mutedMemberFilter=xh.ALL,u.memberStateFilter=Hh.ALL,u.nicknameStartsWithFilter=null,u.operatorFilter=Wh.ALL,u.order=Fh.MEMBER_NICKNAME_ALPHABETICAL,u.mutedMemberFilter=(a=i.mutedMemberFilter)!==null&&a!==void 0?a:xh.ALL,u.memberStateFilter=(s=i.memberStateFilter)!==null&&s!==void 0?s:Hh.ALL,u.nicknameStartsWithFilter=(o=i.nicknameStartsWithFilter)!==null&&o!==void 0?o:null,u.order=(l=i.order)!==null&&l!==void 0?l:Fh.MEMBER_NICKNAME_ALPHABETICAL,u}return B(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&tn(xh,this.mutedMemberFilter)&&tn(Hh,this.memberStateFilter)&&(X("string",this.nicknameStartsWithFilter)||this.nicknameStartsWithFilter===null)&&tn(Wh,this.operatorFilter)&&tn(Fh,this.order)},n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return M(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=Y.of(this._iid).requestQueue,r=new m6(_t(W(W({},this),{token:this._token}))),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),a=i.as(_6),s=a.members,o=a.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw J.queryInProgress;case 4:return[3,6];case 5:throw J.invalidParameters;case 6:return[2]}})})},n}(Js),E6=function(e){function n(t){var r=this,i=t.channelUrl,a=t.userId,s=t.accessCode;return(r=e.call(this)||this).method=we.PUT,r.path="".concat(Li,"/").concat(encodeURIComponent(i),"/accept"),r.params={user_id:a,access_code:s},r}return B(n,e),n}(Re),y6=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.channel=new xa(t,r),i.channel.myMemberState=pr.JOINED,i}return B(n,e),n}(He),C6=function(e){function n(t){var r=this,i=t.channelUrl,a=t.isDistinct,s=t.isPublic,o=t.isDiscoverable,l=t.coverUrl,u=t.coverImage,d=t.accessCode,f=t.name,p=t.data,m=t.customType,E=t.operatorUserIds,g=t.messageSurvivalSeconds;return(r=e.call(this)||this).method=we.PUT,r.path="".concat(Li,"/").concat(encodeURIComponent(i)),r.params=Xe({is_distinct:a,is_public:s,is_discoverable:o,name:f,data:p,custom_type:m,cover_url:l,cover_file:u,access_code:d,operator_ids:E,message_survival_seconds:g}),r}return B(n,e),n}(Re),b6=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.channel=new xa(t,r),i}return B(n,e),n}(He),S6=function(e){function n(t){var r=this,i=t.channelUrl;return(r=e.call(this)||this).method=we.DELETE,r.path="".concat(Li,"/").concat(encodeURIComponent(i)),r}return B(n,e),n}(Re);(function(e){function n(t,r){return e.call(this,t,r)||this}B(n,e)})(He);var T6=function(e){function n(t){var r=this,i=t.channelUrl;return(r=e.call(this)||this).method=we.DELETE,r.path="".concat(Li,"/").concat(encodeURIComponent(i),"/hide"),r}return B(n,e),n}(Re);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}B(n,e)})(He);var N6=function(e){function n(t){var r=t.userId,i=t.channelUrl,a=t.countPreference,s=e.call(this)||this;return s.method=we.PUT,s.path="".concat(In,"/").concat(encodeURIComponent(r),"/count_preference/").concat(encodeURIComponent(i)),s.params={count_preference:a},s}return B(n,e),n}(Re),I6=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.countPreference=r.count_preference,i}return B(n,e),n}(He),M6=function(e){function n(t){var r=this,i=t.channelUrl,a=t.locale;return(r=e.call(this)||this).method=we.PUT,r.path="".concat(Li,"/").concat(encodeURIComponent(i),"/reset_user_history"),r.params=Xe({locale:a}),r}return B(n,e),n}(Re),A6=function(e){function n(t,r){var i=e.call(this,t,r)||this,a=r.ts_message_offset;return i.messageOffsetTimestamp=a,i}return B(n,e),n}(He),w6=W(W({},Fy),{scheduledAt:void 0,file:void 0,fileUrl:void 0,fileName:void 0,mimeType:void 0,fileSize:void 0,thumbnailSizes:void 0,requireAuth:!1}),R6=W(W({},Ow),{scheduledAt:void 0}),O6=function(e){function n(t){var r,i,a=this;a=e.call(this)||this;var s=[];t.mentionType===gi.USERS&&(t.mentionedUserIds?s=t.mentionedUserIds:t.mentionedUsers&&(s=t.mentionedUsers.map(function(d){return d.userId})));var o=t.channelType,l=t.channelUrl,u=t.scheduledMessageId;return a.method=we.PUT,a.path="".concat(Nn(o),"/").concat(encodeURIComponent(l),"/scheduled_messages/").concat(encodeURIComponent(u)),a.params=Xe(_t({req_id:t.reqId,scheduled_at:t.scheduledAt,message_type:$c.FILE,url:t.fileUrl,file_name:t.fileName,file_size:t.fileSize,file_type:t.mimeType,thumbnails:(r=t._thumbnails)===null||r===void 0?void 0:r.map(function(d){return ko.payloadify(d)}),custom_type:t.customType,data:t.data,require_auth:t.requireAuth,mention_type:t.mentionType,mentioned_user_ids:s,sorted_metaarray:(i=t.metaArrays)===null||i===void 0?void 0:i.map(function(d){return qr.payloadify(d)}),apple_critical_alert_options:t.appleCriticalAlertOptions?ts.payloadify(t.appleCriticalAlertOptions):null,push_option:t.pushNotificationDeliveryOption})),a}return B(n,e),n}(Re),D6=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.message=new Ir(t,r),i}return B(n,e),n}(He),L6=function(e){function n(t){var r,i=this;i=e.call(this)||this;var a=[];t.mentionType===gi.USERS&&(t.mentionedUserIds?a=t.mentionedUserIds:t.mentionedUsers&&(a=t.mentionedUsers.map(function(u){return u.userId})));var s=t.channelType,o=t.channelUrl,l=t.scheduledMessageId;return i.method=we.PUT,i.path="".concat(Nn(s),"/").concat(encodeURIComponent(o),"/scheduled_messages/").concat(encodeURIComponent(l)),i.params=Xe(_t({req_id:t.reqId,scheduled_at:t.scheduledAt,message_type:$c.USER,message:t.message,custom_type:t.customType,data:t.data,mention_type:t.mentionType,mentioned_user_ids:a,sorted_metaarray:(r=t.metaArrays)===null||r===void 0?void 0:r.map(function(u){return qr.payloadify(u)}),apple_critical_alert_options:t.appleCriticalAlertOptions?ts.payloadify(t.appleCriticalAlertOptions):null,target_langs:t.translationTargetLanguages,push_option:t.pushNotificationDeliveryOption})),i}return B(n,e),n}(Re);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.message=new vi(t,r),i}B(n,e)})(He);var Aa,wa,U6=function(e){function n(t){var r=e.call(this)||this,i=t.channelType,a=t.channelUrl,s=t.scheduledMessageId;return r.method=we.DELETE,r.path="".concat(Nn(i),"/").concat(encodeURIComponent(a),"/scheduled_messages/").concat(encodeURIComponent(s)),r}return B(n,e),n}(Re),k6=function(e){function n(t){var r=e.call(this)||this,i=t.channelType,a=t.channelUrl,s=t.scheduledMessageId;return r.method=we.POST,r.path="".concat(Nn(i),"/").concat(encodeURIComponent(a),"/scheduled_messages/").concat(encodeURIComponent(s),"/send_now"),r}return B(n,e),n}(Re),P6=function(e){function n(t){var r=t.userId,i=t.channelUrl,a=t.pushTriggerOption,s=e.call(this)||this;return s.method=we.PUT,s.path="".concat(In,"/").concat(encodeURIComponent(r),"/push_preference/").concat(encodeURIComponent(i)),s.params={push_trigger_option:a},s}return B(n,e),n}(Re),x6=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.pushTriggerOption=r.push_trigger_option,i.enabled=r.enable,i}return B(n,e),n}(He),F6=function(e){function n(t){var r=t.userId,i=t.channelUrl,a=e.call(this)||this;return a.method=we.GET,a.path="".concat(In,"/").concat(encodeURIComponent(r),"/push_preference/").concat(encodeURIComponent(i)),a}return B(n,e),n}(Re),H6=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.pushTriggerOption=r.push_trigger_option,i.enabled=r.enable,i}return B(n,e),n}(He);(function(e){e.ALL="all",e.UNREAD_MESSAGE_COUNT_ONLY="unread_message_count_only",e.UNREAD_MENTION_COUNT_ONLY="unread_mention_count_only",e.OFF="off"})(Aa||(Aa={})),function(e){e.UNHIDDEN="unhidden",e.HIDDEN_ALLOW_AUTO_UNHIDE="hidden_allow_auto_unhide",e.HIDDEN_PREVENT_AUTO_UNHIDE="hidden_prevent_auto_unhide"}(wa||(wa={}));var xa=function(e){function n(t,r){var i,a,s,o,l,u,d,f,p,m,E,g,y,S,C,T,I,L,D,O,R=this;return(R=e.call(this,t,r)||this)._unreadMemberStateMap=new Map,R._undeliveredMemberStateMap=new Map,R._typingStatus=new Map,R._lastMemberCountUpdated=0,R._typingStarted=0,R._typingEnded=0,R._hasBotInfo={general:!1,ai:!1},R.isDistinct=!1,R.isSuper=!1,R.isBroadcast=!1,R.isExclusive=!1,R.isPublic=!1,R.isDiscoverable=!0,R.isChatNotification=!1,R.isAccessCodeRequired=!1,R.isPushEnabled=!1,R.unreadMessageCount=0,R.unreadMentionCount=0,R.totalUnreadReplyCount=0,R.members=[],R.memberCount=0,R.joinedMemberCount=0,R.hiddenState=wa.UNHIDDEN,R.lastMessage=null,R.messageOffsetTimestamp=0,R.messageSurvivalSeconds=-1,R.myMemberState=pr.NONE,R.myRole=ri.NONE,R.myMutedState=Ya.UNMUTED,R.myLastRead=0,R.myCountPreference=Aa.ALL,R.myPushTriggerOption=vu.DEFAULT,R.inviter=null,R.invitedAt=0,R.joinedAt=0,R.lastPinnedMessage=null,R._latestMessageInfo=null,R._pinnedMessagesUpdatedAt=0,R._myMutedRemainingTime=-1,R.channelType=cn.GROUP,R.isDistinct=(a=r.is_distinct)!==null&&a!==void 0&&a,R.isSuper=(s=r.is_super)!==null&&s!==void 0&&s,R.isBroadcast=(o=r.is_broadcast)!==null&&o!==void 0&&o,R.isExclusive=(l=r.is_exclusive)!==null&&l!==void 0&&l,R.isPublic=(u=r.is_public)!==null&&u!==void 0&&u,R.isDiscoverable=(d=r.is_discoverable)!==null&&d!==void 0?d:R.isPublic,R.isChatNotification=(f=r.is_chat_notification)!==null&&f!==void 0&&f,R.isAccessCodeRequired=(p=r.is_access_code_required)!==null&&p!==void 0&&p,R.isPushEnabled=(m=r.is_push_enabled)!==null&&m!==void 0&&m,Array.isArray(r.members)&&(i=R.members).push.apply(i,At([],ft(r.members.map(function(k){return new Da(R._iid,k)})),!1)),R.memberCount=(E=r.member_count)!==null&&E!==void 0?E:0,R.joinedMemberCount=(g=r.joined_member_count)!==null&&g!==void 0?g:0,R.hiddenState=tn(wa,r.hidden_state)?r.hidden_state:wa.UNHIDDEN,R.messageOffsetTimestamp=(y=r.ts_message_offset)!==null&&y!==void 0?y:0,R.messageSurvivalSeconds=(S=r.message_survival_seconds)!==null&&S!==void 0?S:-1,R.lastMessage=r.last_message?Ei(R._iid,W({channel_type:R.channelType},r.last_message)):null,r.read_receipt&&Object.keys(r.read_receipt).forEach(function(k){X("number",r.read_receipt[k])&&R._updateUnreadMemberState(k,r.read_receipt[k])}),r.delivery_receipt&&Object.keys(r.delivery_receipt).forEach(function(k){X("number",r.delivery_receipt[k])&&R._updateUndeliveredMemberState(k,r.delivery_receipt[k])}),R.myMemberState=tn(pr,r.member_state)?r.member_state:pr.NONE,R.myRole=tn(ri,r.my_role)?r.my_role:ri.NONE,tn(Ya,r.is_muted)?R.myMutedState=r.is_muted:X("boolean",r.is_muted)?R.myMutedState=r.is_muted?Ya.MUTED:Ya.UNMUTED:R.myMutedState=Ya.UNMUTED,R.myCountPreference=tn(Aa,r.count_preference)?r.count_preference:Aa.ALL,R.myPushTriggerOption=tn(vu,r.push_trigger_option)?r.push_trigger_option:vu.ALL,R.myLastRead=(C=r.user_last_read)!==null&&C!==void 0?C:0,R.inviter=r.inviter?new dn(R._iid,r.inviter):null,R.invitedAt=(T=r.invited_at)!==null&&T!==void 0?T:0,R.joinedAt=(I=r.joined_ts)!==null&&I!==void 0?I:0,R._updateUnreadCount((L=r.unread_message_count)!==null&&L!==void 0?L:0,(D=r.unread_mention_count)!==null&&D!==void 0?D:0),R.totalUnreadReplyCount=(O=r.total_unread_thread_message_count)!==null&&O!==void 0?O:0,R.lastPinnedMessage=r.latest_pinned_message?Ei(R._iid,W({channel_type:R.channelType},r.latest_pinned_message)):null,r.latest_message&&(R._latestMessageInfo={messageId:r.latest_message.message_id,createdAt:r.latest_message.created_at}),R._hasBotInfo={general:!!r.has_bot,ai:!!r.has_ai_bot},R}return B(n,e),Object.defineProperty(n.prototype,"isHidden",{get:function(){return this.hiddenState!==wa.UNHIDDEN},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isTyping",{get:function(){return this._typingStatus.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cachedUnreadMemberState",{get:function(){var t,r,i={};try{for(var a=je(this._unreadMemberStateMap),s=a.next();!s.done;s=a.next()){var o=ft(s.value,2),l=o[0],u=o[1];i[l]=u}}catch(d){t={error:d}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cachedUndeliveredMemberState",{get:function(){var t,r,i={};try{for(var a=je(this._undeliveredMemberStateMap),s=a.next();!s.done;s=a.next()){var o=ft(s.value,2),l=o[0],u=o[1];i[l]=u}}catch(d){t={error:d}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasBot",{get:function(){return this._hasBotInfo.general},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasAiBot",{get:function(){return this._hasBotInfo.ai},enumerable:!1,configurable:!0}),n.payloadify=function(t){return Xe(_t(W(W({},e.payloadify.call(this,t)),{is_access_code_required:t.isAccessCodeRequired,is_distinct:t.isDistinct,is_super:t.isSuper,is_broadcast:t.isBroadcast,is_exclusive:t.isExclusive,is_public:t.isPublic,is_discoverable:t.isDiscoverable,is_muted:t.myMutedState,is_push_enabled:t.isPushEnabled,unread_message_count:t.unreadMessageCount,unread_mention_count:t.unreadMentionCount,total_unread_thread_message_count:t.totalUnreadReplyCount,push_trigger_option:t.myPushTriggerOption,count_preference:t.myCountPreference,hidden_state:t.hiddenState,member_count:t.memberCount,joined_member_count:t.joinedMemberCount,member_state:t.myMemberState,my_role:t.myRole,user_last_read:t.myLastRead,ts_message_offset:t.messageOffsetTimestamp,message_survival_seconds:t.messageSurvivalSeconds,read_receipt:t.cachedUnreadMemberState,delivery_receipt:t.cachedUndeliveredMemberState,members:t.members.map(function(r){return Da.payloadify(r)}),last_message:t.lastMessage?wg(t.lastMessage):null,inviter:t.inviter?dn.payloadify(t.inviter):null,invited_at:t.invitedAt,joined_ts:t.joinedAt,latest_pinned_message:t.lastPinnedMessage?wg(t.lastPinnedMessage):null,latest_message:t._latestMessageInfo?{message_id:t._latestMessageInfo.messageId,created_at:t._latestMessageInfo.createdAt}:null,has_bot:t.hasBot,has_ai_bot:t.hasAiBot})))},n.prototype._shouldUpdateLastMessageWith=function(t){if(t.silent)return!1;var r=Y.of(this._iid).appInfo;switch(r==null?void 0:r.lastMessageThreadingPolicy){case gu.NONE:case gu.INCLUDE_REPLY:break;case gu.EXCLUDE_REPLY:if(t.parentMessageId>0)return!1;break;case gu.INCLUDE_REPLY_TO_CHANNEL:if(t instanceof dr&&t.parentMessageId>0&&!t.replyToChannel)return!1}return!this.lastMessage||this.lastMessage.createdAt<t.createdAt||this.lastMessage.createdAt===t.createdAt&&this.lastMessage.messageId===t.messageId&&this.lastMessage.updatedAt<t.updatedAt},n.prototype._tryUpdateLastMessageAndCallEvents=function(t,r){var i=Y.of(this._iid).dispatcher,a=Vr.of(this._iid);this._updateLastMessage(r),a.handlers.map(function(s){s.onChannelChanged&&s.onChannelChanged(t)}),i.dispatch(new un({channels:[t],context:{source:ve.EVENT_MESSAGE_SENT}}))},n.prototype._shouldUpdateUnreadCountWith=function(t){var r=Y.of(this._iid).appInfo;switch(r==null?void 0:r.unreadCountThreadingPolicy){case _u.NONE:case _u.INCLUDE_REPLY:break;case _u.EXCLUDE_REPLY:if(t.parentMessageId>0)return!1;break;case _u.INCLUDE_REPLY_TO_CHANNEL:if(t instanceof dr&&t.parentMessageId>0&&!t.replyToChannel)return!1}return!0},n.prototype._updateLastMessage=function(t){return!!this._shouldUpdateLastMessageWith(t)&&(this.lastMessage=t,!0)},n.prototype._updateUnreadCount=function(t,r){if(typeof t=="number"&&t>=0)if(this.myCountPreference===Aa.ALL||this.myCountPreference===Aa.UNREAD_MESSAGE_COUNT_ONLY)if(this.isExclusive||this.isSuper||this.isBroadcast){var i=Y.of(this._iid).maxSuperGroupChannelUnreadCount;this.unreadMessageCount=i&&t>=i?i:t}else this.unreadMessageCount=t;else this.unreadMessageCount=0;else this.unreadMessageCount=0;typeof r=="number"&&r>=0&&(this.myCountPreference===Aa.ALL||this.myCountPreference===Aa.UNREAD_MENTION_COUNT_ONLY)?this.unreadMentionCount=r:this.unreadMentionCount=0},n.prototype._updateUnreadMemberState=function(t,r){var i=this._unreadMemberStateMap.get(t);return(!i||i<r)&&(this._unreadMemberStateMap.set(t,r),Y.of(this._iid).sdkState.userId===t&&(this.myLastRead=r),!0)},n.prototype._updateUndeliveredMemberState=function(t,r){var i=this._undeliveredMemberStateMap.get(t);return(!i||i<r)&&(this._undeliveredMemberStateMap.set(t,r),!0)},n.prototype._updateTypingStatus=function(t,r){r===void 0&&(r=new Date().getTime()),r>0?this._typingStatus.set(t.userId,{user:t,ts:r}):this._typingStatus.delete(t.userId)},n.prototype._clearTypingStatus=function(){this._typingStatus.clear(),this._typingStarted=0,this._typingEnded=0},n.prototype._setLatestMemberCount=function(t,r,i){var a=!1;return i>=this._lastMemberCountUpdated&&(this._lastMemberCountUpdated=i,a=t!==this.memberCount||r!==this.joinedMemberCount,this.memberCount=t,this.joinedMemberCount=r),a},n.prototype.isReadMessage=function(t){var r=Y.of(this._iid).sdkState,i=this._unreadMemberStateMap.get(r.userId);return!!i&&i>=t.createdAt},n.prototype.serialize=function(){var t=this;return ud(this,function(r){r.cachedUnreadMemberState=t.cachedUnreadMemberState,r.cachedUndeliveredMemberState=t.cachedUndeliveredMemberState,Object.assign(r,t._serializeCachedMetaData())})},n.prototype.createMessageCollection=function(t){return t===void 0&&(t={}),new v6(this._iid,W(W({},t),{channel:this}))},n.prototype.createMemberListQuery=function(t){return t===void 0&&(t={}),new g6(this._iid,this.url,t)},n.prototype.createThreadedParentMessageListQuery=function(t){return t===void 0&&(t={}),new d4(this._iid,this.url,this.channelType,t)},n.prototype.addMember=function(t,r){if(r===void 0&&(r=0),!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var i=this.members.findIndex(function(s){return s.userId===t.userId});if(i>-1){var a=this.members[i];a.state===pr.JOINED&&(t.state=a.state),this.members.splice(i,1),this.memberCount--}this.members.push(t),this.memberCount++,this._updateUnreadMemberState(t.userId,r),this._updateUndeliveredMemberState(t.userId,r)}},n.prototype.removeMember=function(t){if(!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var r=t instanceof Da?t.userId:t,i=this.members.findIndex(function(a){return a.userId===r});if(i>-1)return this.members.splice(i,1),this.memberCount--,!0}return!1},n.prototype.getUnreadMemberCount=function(t){var r,i;if(t instanceof dr&&!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var a=Y.of(this._iid).sdkState,s=t.createdAt,o=0;try{for(var l=je(this.members),u=l.next();!u.done;u=l.next()){var d=u.value;a.userId!==d.userId&&d.state===pr.JOINED&&t.sender.userId!==d.userId&&(this.cachedUnreadMemberState[d.userId]||0)<s&&o++}}catch(f){r={error:f}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return o}return 0},n.prototype.getUndeliveredMemberCount=function(t){var r,i;if(t instanceof dr&&!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var a=Y.of(this._iid).sdkState,s=t.createdAt,o=0;try{for(var l=je(this.members),u=l.next();!u.done;u=l.next()){var d=u.value;a.userId!==d.userId&&d.state===pr.JOINED&&t.sender.userId!==d.userId&&(this.cachedUndeliveredMemberState[d.userId]||0)<s&&o++}}catch(f){r={error:f}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return o}return 0},n.prototype.getReadMembers=function(t,r){var i=this;r===void 0&&(r=!1);var a=Y.of(this._iid).sdkState;if(!a.userId||this.isExclusive||this.isSuper||this.isBroadcast)return[];var s=t instanceof dr?t.sender:null,o=[];return this.members.forEach(function(l){if(r||l.userId!==a.userId&&l.userId!==(s==null?void 0:s.userId)){var u=i._unreadMemberStateMap.get(l.userId);u&&u>=t.createdAt&&o.push(l)}}),o},n.prototype.getUnreadMembers=function(t,r){var i=this;r===void 0&&(r=!1);var a=Y.of(this._iid).sdkState;if(!a.userId||this.isExclusive||this.isSuper||this.isBroadcast)return[];var s=t instanceof dr?t.sender:null,o=[];return this.members.forEach(function(l){if(r||l.userId!==a.userId&&l.userId!==(s==null?void 0:s.userId)){var u=i._unreadMemberStateMap.get(l.userId);u&&u<t.createdAt&&o.push(l)}}),o},n.prototype.getReadStatus=function(t){var r=this;t===void 0&&(t=!1);var i=Y.of(this._iid).sdkState;if(!i.userId||this.isExclusive||this.isSuper||this.isBroadcast)return null;var a={};return this.members.forEach(function(s){if(t||s.userId!==i.userId){var o=r._unreadMemberStateMap.get(s.userId);a[s.userId]=new Sw(r._iid,{channel_url:r.url,channel_type:r.channelType,user:Da.payloadify(s),ts:o??0})}}),a},n.prototype.getDeliveryStatus=function(t){var r=this;t===void 0&&(t=!0);var i=Y.of(this._iid).sdkState;if(!i.userId||this.isExclusive||this.isSuper||this.isBroadcast)return null;var a={};return this.members.forEach(function(s){if(t||s.userId!==i.userId){var o=r._undeliveredMemberStateMap.get(s.userId);a[s.userId]=new _4(r._iid,{channel_url:r.url,channel_type:r.channelType,user:Da.payloadify(s),ts:o??0})}}),a},n.prototype.getTypingUsers=function(){var t=[];return this._typingStatus.forEach(function(r){var i=r.user;t.push(i)}),t},n.prototype.invalidateTypingStatus=function(){var t=this,r=Y.of(this._iid).typingIndicatorInvalidateTime,i=Date.now(),a=!1;return this._typingStatus.forEach(function(s,o){var l=s.ts;i-l>=r&&(t._typingStatus.delete(o),a=!0)}),a},n.prototype.refresh=function(){return A(this,void 0,void 0,function(){return M(this,function(t){return[2,this._refresh()]})})},n.prototype._refresh=function(t){return t===void 0&&(t=!1),A(this,void 0,void 0,function(){var r,i,a,s,o,l;return M(this,function(u){switch(u.label){case 0:return r=Y.of(this._iid),i=r.requestQueue,a=r.dispatcher,s=new Bg({channelUrl:this.url}),[4,i.send(s)];case 1:return o=u.sent(),l=o.as(Gg).channel,this._update(l),t||a.dispatch(new un({channels:[l],context:{source:ve.REFRESH_CHANNEL}})),[2,this]}})})},n.prototype.freeze=function(){return A(this,void 0,void 0,function(){return M(this,function(t){switch(t.label){case 0:return[4,e.prototype.freeze.call(this)];case 1:return t.sent(),Y.of(this._iid).dispatcher.dispatch(new un({channels:[this],context:{source:ve.EVENT_CHANNEL_FROZEN},isWebSocketEventComing:!0})),[2]}})})},n.prototype.unfreeze=function(){return A(this,void 0,void 0,function(){return M(this,function(t){switch(t.label){case 0:return[4,e.prototype.unfreeze.call(this)];case 1:return t.sent(),Y.of(this._iid).dispatcher.dispatch(new un({channels:[this],context:{source:ve.EVENT_CHANNEL_UNFROZEN},isWebSocketEventComing:!0})),[2]}})})},n.prototype.updateChannel=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u;return M(this,function(d){switch(d.label){case 0:return r=W(W({},p6),t),ke(function(f){return X("string",f.coverUrl,!0)&&(jr(f.coverImage)||X("string",f.coverImage,!0))&&X("boolean",f.isDistinct,!0)&&X("boolean",f.isPublic,!0)&&X("boolean",f.isDiscoverable,!0)&&X("string",f.accessCode,!0)&&X("string",f.name,!0)&&X("string",f.data,!0)&&X("string",f.customType,!0)&&nn("string",f.operatorUserIds,!0)&&X("number",f.messageSurvivalSeconds,!0)}(r)).throw(J.invalidParameters),i=Y.of(this._iid),a=i.dispatcher,s=i.requestQueue,o=new C6(W({channelUrl:this.url},r)),[4,s.send(o)];case 1:return l=d.sent(),u=l.as(b6).channel,this._update(u),a.dispatch(new un({channels:[u],context:{source:ve.EVENT_CHANNEL_UPDATED},isWebSocketEventComing:!0})),[2,this]}})})},n.prototype.invite=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){return ke(t.every(function(i){return i instanceof dn})).throw(J.invalidParameters),[2,this.inviteWithUserIds(t.map(function(i){return i.userId}))]})})},n.prototype.inviteWithUserIds=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u;return M(this,function(d){switch(d.label){case 0:return ke(nn("string",t)).throw(J.invalidParameters),r=Y.of(this._iid),i=r.dispatcher,a=r.requestQueue,s=r.sessionManager,o=new K4({channelUrl:this.url,userIds:t}),[4,a.send(o)];case 1:return l=d.sent(),u=l.as($4).channel,this._update(u),i.dispatch(new un({channels:[u],context:{source:ve.EVENT_CHANNEL_INVITED,inviter:s.currentUser,invitees:[]},isWebSocketEventComing:!0})),[2,this]}})})},n.prototype.join=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u;return M(this,function(d){switch(d.label){case 0:return ke(X("string",t,!0)).throw(J.invalidParameters),r=Y.of(this._iid),i=r.dispatcher,a=r.sdkState,s=r.requestQueue,o=new G4({channelUrl:this.url,userId:a.userId,accessCode:t}),[4,s.send(o)];case 1:return l=d.sent(),(u=l.as(V4).channel).myMemberState=this.myMemberState=pr.JOINED,this._update(u),i.dispatch(new un({channels:[u],context:{source:ve.EVENT_CHANNEL_JOINED,users:[]},isWebSocketEventComing:!0})),[2,this]}})})},n.prototype.leave=function(t){return t===void 0&&(t=!1),A(this,void 0,void 0,function(){var r,i,a,s;return M(this,function(o){switch(o.label){case 0:return r=Y.of(this._iid),i=r.sdkState,a=r.requestQueue,s=new j4({channelUrl:this.url,userId:i.userId,shouldRemoveOperatorStatus:t}),[4,a.send(s)];case 1:return o.sent(),this.myMemberState=pr.NONE,[2]}})})},n.prototype.acceptInvitation=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u;return M(this,function(d){switch(d.label){case 0:return ke(X("string",t,!0)).throw(J.invalidParameters),r=Y.of(this._iid),i=r.dispatcher,a=r.sdkState,s=r.requestQueue,o=new E6({channelUrl:this.url,userId:a.userId,accessCode:t}),[4,s.send(o)];case 1:return l=d.sent(),(u=l.as(y6).channel).myMemberState=this.myMemberState=pr.JOINED,this._update(u),i.dispatch(new un({channels:[u],context:{source:ve.EVENT_CHANNEL_ACCEPTED_INVITE},isWebSocketEventComing:!0})),[2,this]}})})},n.prototype.declineInvitation=function(){return A(this,void 0,void 0,function(){var t,r,i,a;return M(this,function(s){switch(s.label){case 0:return t=Y.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new Q4({channelUrl:this.url,userId:r.userId}),[4,i.send(a)];case 1:return s.sent(),this.myMemberState=pr.NONE,[2,this]}})})},n.prototype.sendUserMessage=function(t){var r=this,i=new ua,a=Y.of(this._iid).dispatcher,s=ph.of(this._iid);return e.prototype.sendUserMessage.call(this,t).onPending(function(o){s.completeCurrentAndProcessNextAutoResend(o),i._trigger(o)}).onFailed(function(o,l){l&&s.completeCurrentAndProcessNextAutoResend(l),i._triggerFailed(o,l)}).onSucceeded(function(o){s.completeCurrentAndProcessNextAutoResend(o),r._updateLastMessage(o),Vr.of(r._iid).handlers.map(function(l){l.onChannelChanged&&l.onChannelChanged(r)}),a.dispatch(new un({channels:[r],context:{source:ve.EVENT_MESSAGE_SENT}})),i._trigger(o)}),i},n.prototype.updateUserMessage=function(t,r){return A(this,void 0,void 0,function(){var i,a,s,o,l=this;return M(this,function(u){switch(u.label){case 0:return i=Y.of(this._iid).dispatcher,[4,e.prototype.updateUserMessage.call(this,t,r)];case 1:return a=u.sent(),s=this._updateLastMessage(a),o=!1,this.lastPinnedMessage&&this.lastPinnedMessage.messageId===a.messageId&&(this.lastPinnedMessage=a,s=!0,o=!0),s&&(Vr.of(this._iid).handlers.map(function(d){d.onChannelChanged&&d.onChannelChanged(l)}),i.dispatch(new un({channels:[this],context:{source:o?ve.EVENT_PINNED_MESSAGE_UPDATED:ve.EVENT_MESSAGE_UPDATED}}))),o&&Vr.of(this._iid).handlers.map(function(d){d.onPinnedMessageUpdated&&d.onPinnedMessageUpdated(l)}),i.dispatch(new Xn({messages:[a],source:ve.EVENT_MESSAGE_UPDATED})),[2,a]}})})},n.prototype._autoResendUserMessage=function(t){var r=this,i=new ua,a=Y.of(this._iid).dispatcher,s=ph.of(this._iid);return e.prototype._autoResendUserMessage.call(this,t).onPending(function(o){s.completeCurrentAndProcessNextAutoResend(o),i._trigger(o)}).onFailed(function(o,l){s.completeCurrentAndProcessNextAutoResend(l),i._triggerFailed(o,l)}).onSucceeded(function(o){var l=Vr.of(r._iid);s.completeCurrentAndProcessNextAutoResend(o),r._updateLastMessage(o),l.handlers.map(function(u){u.onChannelChanged&&u.onChannelChanged(r)}),a.dispatch(new un({channels:[r],context:{source:ve.EVENT_MESSAGE_SENT}})),i._trigger(o)}),i},n.prototype.sendFileMessage=function(t){var r=this,i=new ua,a=Y.of(this._iid).dispatcher,s=ph.of(this._iid);return e.prototype.sendFileMessage.call(this,t).onPending(function(o){s.completeCurrentAndProcessNextAutoResend(o),i._trigger(o)}).onFailed(function(o,l){l&&s.completeCurrentAndProcessNextAutoResend(l),i._triggerFailed(o,l)}).onSucceeded(function(o){var l=Vr.of(r._iid);s.completeCurrentAndProcessNextAutoResend(o),r._updateLastMessage(o),l.handlers.map(function(u){u.onChannelChanged&&u.onChannelChanged(r)}),a.dispatch(new un({channels:[r],context:{source:ve.EVENT_MESSAGE_SENT}})),i._trigger(o)}),i},n.prototype.sendMultipleFilesMessage=function(t){var r=this,i=new np,a=Y.of(this._iid).dispatcher;return e.prototype.sendMultipleFilesMessage.call(this,t).onPending(function(s){i._trigger(s)}).onFailed(function(s,o){i._triggerFailed(s,o)}).onSucceeded(function(s){var o=Vr.of(r._iid);r._updateLastMessage(s),o.handlers.map(function(l){l.onChannelChanged&&l.onChannelChanged(r)}),a.dispatch(new un({channels:[r],context:{source:ve.EVENT_MESSAGE_SENT}})),i._trigger(s)}).onFileUploaded(function(s,o,l,u){i._triggerOnFileUploaded(s,o,l,u)}),i},n.prototype.updateFileMessage=function(t,r){return A(this,void 0,void 0,function(){var i,a,s,o,l=this;return M(this,function(u){switch(u.label){case 0:return i=Y.of(this._iid).dispatcher,[4,e.prototype.updateFileMessage.call(this,t,r)];case 1:return a=u.sent(),s=this._updateLastMessage(a),o=!1,this.lastPinnedMessage&&this.lastPinnedMessage.messageId===a.messageId&&(this.lastPinnedMessage=a,s=!0,o=!0),s&&(Vr.of(this._iid).handlers.map(function(d){d.onChannelChanged&&d.onChannelChanged(l)}),i.dispatch(new un({channels:[this],context:{source:o?ve.EVENT_PINNED_MESSAGE_UPDATED:ve.EVENT_MESSAGE_UPDATED}}))),o&&Vr.of(this._iid).handlers.map(function(d){d.onPinnedMessageUpdated&&d.onPinnedMessageUpdated(l)}),i.dispatch(new Xn({messages:[a],source:ve.EVENT_MESSAGE_UPDATED})),[2,a]}})})},n.prototype._autoResendFileMessage=function(t){var r=this,i=new ua,a=Y.of(this._iid).dispatcher,s=ph.of(this._iid);return e.prototype._autoResendFileMessage.call(this,t).onPending(function(o){s.completeCurrentAndProcessNextAutoResend(o),i._trigger(o)}).onFailed(function(o,l){s.completeCurrentAndProcessNextAutoResend(l),i._triggerFailed(o,l)}).onSucceeded(function(o){var l=Vr.of(r._iid);s.completeCurrentAndProcessNextAutoResend(o),r._updateLastMessage(o),l.handlers.map(function(u){u.onChannelChanged&&u.onChannelChanged(r)}),a.dispatch(new un({channels:[r],context:{source:ve.EVENT_MESSAGE_SENT}})),i._trigger(o)}),i},n.prototype.deleteMessage=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){switch(r.label){case 0:return[4,e.prototype.deleteMessage.call(this,t)];case 1:return r.sent(),t.messageId===0&&t instanceof dr&&Y.of(this._iid).dispatcher.dispatch(new hw({reqId:t.reqId,source:ve.EVENT_MESSAGE_DELETED})),[2]}})})},n.prototype.hide=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u,d;return M(this,function(f){switch(f.label){case 0:return r=W(W({},Vg),t),ke(function(p){return X("boolean",p.hidePreviousMessages,!0)&&X("boolean",p.allowAutoUnhide,!0)}(r)).throw(J.invalidParameters),i=Y.of(this._iid),a=i.dispatcher,s=i.sdkState,o=i.requestQueue,l=new X4(W({channelUrl:this.url,userId:s.userId},r)),[4,o.send(l)];case 1:return u=f.sent(),d=u.as(Z4).messageOffsetTimestamp,this.hiddenState=r.allowAutoUnhide?wa.HIDDEN_ALLOW_AUTO_UNHIDE:wa.HIDDEN_PREVENT_AUTO_UNHIDE,r.hidePreviousMessages&&this._updateUnreadCount(0,0),d&&(this.messageOffsetTimestamp=d),a.dispatch(new un({channels:[this],context:{source:ve.EVENT_CHANNEL_HIDDEN},isWebSocketEventComing:!0})),[2,this]}})})},n.prototype.unhide=function(){return A(this,void 0,void 0,function(){var t,r,i,a;return M(this,function(s){switch(s.label){case 0:return t=Y.of(this._iid),r=t.dispatcher,i=t.requestQueue,a=new T6({channelUrl:this.url}),[4,i.send(a)];case 1:return s.sent(),this.hiddenState=wa.UNHIDDEN,r.dispatch(new un({channels:[this],context:{source:ve.EVENT_CHANNEL_UNHIDDEN},isWebSocketEventComing:!0})),[2,this]}})})},n.prototype.delete=function(){return A(this,void 0,void 0,function(){var t,r;return M(this,function(i){switch(i.label){case 0:return t=Y.of(this._iid).requestQueue,r=new S6({channelUrl:this.url}),[4,t.send(r)];case 1:return i.sent(),[2]}})})},n.prototype.markAsRead=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u=this;return M(this,function(d){switch(d.label){case 0:return t=Y.of(this._iid),r=t.sdkState,i=t.dispatcher,a=t.requestQueue,s=new Vk({channelUrl:this.url}),[4,a.send(s)];case 1:return o=d.sent(),l=o.as(Tw).readStatus,this._updateUnreadMemberState(r.userId,l.readAt),(this.unreadMessageCount>0||this.unreadMentionCount>0)&&(this._updateUnreadCount(0,0),Vr.of(this._iid).handlers.map(function(f){f.onChannelChanged&&f.onChannelChanged(u)})),i.dispatch(new un({channels:[this],context:{source:ve.EVENT_CHANNEL_READ}})),[2]}})})},n.prototype.markAsDelivered=function(){return A(this,void 0,void 0,function(){var t,r,i,a;return M(this,function(s){switch(s.label){case 0:return t=Y.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new a6({channelUrl:this.url,userId:r.userId}),[4,i.send(a)];case 1:return s.sent(),[2]}})})},n.prototype.startTyping=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s;return M(this,function(o){switch(o.label){case 0:return t=Y.of(this._iid),r=t.requestQueue,i=t.typingIndicatorThrottle,(a=new Date().getTime())-this._typingStarted>=i?(this._typingStarted=a,this._typingEnded=0,s=new e6({channelUrl:this.url,time:this._typingStarted}),[4,r.send(s)]):[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},n.prototype.endTyping=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s;return M(this,function(o){switch(o.label){case 0:return t=Y.of(this._iid),r=t.requestQueue,i=t.typingIndicatorThrottle,(a=new Date().getTime())-this._typingEnded>=i?(this._typingStarted=0,this._typingEnded=a,s=new n6({channelUrl:this.url,time:this._typingStarted}),[4,r.send(s)]):[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},n.prototype.createScheduledUserMessage=function(t){t=W(W({},Qx),t),ke(Yx(t)).throw(J.invalidParameters);var r=new ua;return this._createScheduledUserMessage(t,r),r},n.prototype.updateScheduledUserMessage=function(t,r){return A(this,void 0,void 0,function(){var i,a,s,o;return M(this,function(l){switch(l.label){case 0:return i=W(W({},R6),r),ke(function(u){return Dw(u)&&X("number",u.scheduledAt,!0)}(i)).throw(J.invalidParameters),a=Y.of(this._iid).requestQueue,s=new L6(W({reqId:this._generateRequestId(),scheduledMessageId:t,channelType:this.channelType,channelUrl:this.url},i)),[4,a.send(s)];case 1:return o=l.sent(),[2,o.as(Bw).message]}})})},n.prototype.createScheduledFileMessage=function(t){var r=this;t=W(W({},Xx),t),ke(Zx(t)).throw(J.invalidParameters);var i=Date.now(),a=this._generateRequestId(),s=new ua;return Yi(Nx).then(function(){var o=r._createPendingScheduledFileMessage(t,a,i);ut(function(){return A(r,void 0,void 0,function(){return M(this,function(l){return[2,s._trigger(o)]})})})}),jr(t.file)?this._uploadFileAndUpdateParams(t).then(function(){return r._createScheduledFileMessage(t,s,a,i)}):this._createScheduledFileMessage(t,s,a,i),s},n.prototype.updateScheduledFileMessage=function(t,r){return A(this,void 0,void 0,function(){var i,a,s;return M(this,function(o){switch(o.label){case 0:return i=W(W({},w6),r),ke(function(l){return Hy(l)&&X("number",l.scheduledAt,!0)&&(jr(l.file)||X("string",l.fileUrl))&&X("string",l.fileName,!0)&&X("string",l.mimeType,!0)&&X("number",l.fileSize,!0)&&(l.thumbnailSizes===null||l.thumbnailSizes===void 0||l.thumbnailSizes.every(function(u){return X("object",u)&&u.maxWidth>0&&u.maxHeight>0}))}(i)).throw(J.invalidParameters),jr(i.file)?[4,this._uploadFileAndUpdateParams(i)]:[3,2];case 1:o.sent(),o.label=2;case 2:return a=new O6(W({reqId:this._generateRequestId(),scheduledMessageId:t,channelType:this.channelType,channelUrl:this.url},i)),[4,Y.of(this._iid).requestQueue.send(a)];case 3:return s=o.sent(),[2,s.as(D6).message]}})})},n.prototype.cancelScheduledMessage=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){switch(i.label){case 0:return r=new U6({scheduledMessageId:t,channelType:this.channelType,channelUrl:this.url}),[4,Y.of(this._iid).requestQueue.send(r)];case 1:return i.sent(),[2]}})})},n.prototype.sendScheduledMessageNow=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){switch(i.label){case 0:return r=new k6({scheduledMessageId:t,channelType:this.channelType,channelUrl:this.url}),[4,Y.of(this._iid).requestQueue.send(r)];case 1:return i.sent(),[2]}})})},n.prototype.getMyPushTriggerOption=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return M(this,function(l){switch(l.label){case 0:return t=Y.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new F6({userId:r.userId,channelUrl:this.url}),[4,i.send(a)];case 1:return s=l.sent(),o=s.as(H6).pushTriggerOption,this.myPushTriggerOption=o,[2,o]}})})},n.prototype.setMyPushTriggerOption=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u;return M(this,function(d){switch(d.label){case 0:return ke(tn(vu,t)).throw(J.invalidParameters),r=Y.of(this._iid),i=r.dispatcher,a=r.sdkState,s=r.requestQueue,o=new P6({userId:a.userId,channelUrl:this.url,pushTriggerOption:t}),[4,s.send(o)];case 1:return l=d.sent(),u=l.as(x6).pushTriggerOption,this.myPushTriggerOption=u,i.dispatch(new un({channels:[this],context:{source:ve.EVENT_CHANNEL_UPDATED},isWebSocketEventComing:!0})),[2,u]}})})},n.prototype.setMyCountPreference=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u;return M(this,function(d){switch(d.label){case 0:return ke(tn(Aa,t)).throw(J.invalidParameters),r=Y.of(this._iid),i=r.dispatcher,a=r.sdkState,s=r.requestQueue,o=new N6({channelUrl:this.url,userId:a.userId,countPreference:t}),[4,s.send(o)];case 1:return l=d.sent(),u=l.as(I6).countPreference,this.myCountPreference=u,this._updateUnreadCount(this.unreadMessageCount,this.unreadMentionCount),i.dispatch(new un({channels:[this],context:{source:ve.EVENT_CHANNEL_UPDATED},isWebSocketEventComing:!0})),[2,u]}})})},n.prototype.resetMyHistory=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l;return M(this,function(u){switch(u.label){case 0:return t=Y.of(this._iid),r=t.dispatcher,i=t.requestQueue,a=t.sdkState,s=new M6({channelUrl:this.url,locale:a.localeForChatbot}),[4,i.send(s)];case 1:return o=u.sent(),l=o.as(A6).messageOffsetTimestamp,this.messageOffsetTimestamp=l,this.lastMessage&&this.lastMessage.createdAt<l&&(this.lastMessage=null),this._updateUnreadCount(0,0),this.totalUnreadReplyCount=0,r.dispatch(new un({channels:[this],context:{source:ve.EVENT_CHANNEL_RESET_HISTORY},isWebSocketEventComing:!0})),[2,this]}})})},n.prototype._uploadFileAndUpdateParams=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u,d,f,p;return M(this,function(m){switch(m.label){case 0:return jr(t.file)?(r=Y.of(this._iid).requestQueue,i=new Mp({file:t.file,channelUrl:this.url,thumbnailSizes:t.thumbnailSizes,requestId:this._generateRequestId()}),[4,r.send(i)]):[3,2];case 1:a=m.sent(),s=a.as(Ap),o=s.url,l=s.fileSize,u=l===void 0?t.fileSize:l,d=s.thumbnails,f=s.requireAuth,p=f!==void 0&&f,t.fileUrl=o,t.fileSize=u,t.requireAuth=p,t._thumbnails=d,m.label=2;case 2:return[2]}})})},n.prototype.resendMessage=function(t,r){var i,a=this;if(ke(t instanceof dr&&!t.scheduledInfo&&t.isResendable).throw(J.invalidParameters),t.isUserMessage()){var s=(i=t.messageParams)!==null&&i!==void 0?i:Dg(t),o=new ua;return this._sendUserMessage(s,di.RESEND,t.reqId).onPending(function(f){o._trigger(f)}).onFailed(function(f,p){o._triggerFailed(f,p)}).onSucceeded(function(f){a._tryUpdateLastMessageAndCallEvents(a,f),o._trigger(f)}),o}if(t.isFileMessage()){var l=this._validateFailedFileMessageHasFile(t,r);ke(l).throw(J.invalidParameters),s=Lg(t,r);var u=new ua;return this._sendFileMessage(s,di.RESEND,t.reqId).onPending(function(f){u._trigger(f)}).onFailed(function(f,p){u._triggerFailed(f,p)}).onSucceeded(function(f){a._tryUpdateLastMessageAndCallEvents(a,f),u._trigger(f)}),u}if(t.isMultipleFilesMessage()){s=t.messageParams;var d=new np;return this._sendMultipleFilesMessage(s,di.RESEND,t.reqId).onPending(function(f){d._trigger(f)}).onFailed(function(f,p){d._triggerFailed(f,p)}).onSucceeded(function(f){a._tryUpdateLastMessageAndCallEvents(a,f),d._trigger(f)}).onFileUploaded(function(f,p,m,E){d._triggerOnFileUploaded(f,p,m,E)}),d}},n.prototype.copyMessage=function(t,r){var i=this;if(ke(t instanceof Lp&&r instanceof dr&&r.sendingStatus===yn.SUCCEEDED&&this.url===r.channelUrl&&!r.scheduledInfo).throw(J.invalidParameters),r.isUserMessage()){ke(!r.poll).throw(J.notSupportedError);var a=Aw(r),s=new ua;return t._sendUserMessage(a).onPending(function(u){s._trigger(u)}).onFailed(function(u,d){s._triggerFailed(u,d)}).onSucceeded(function(u){t.isGroupChannel()&&i._tryUpdateLastMessageAndCallEvents(t,u),s._trigger(u)}),s}if(r.isFileMessage()){a=Rw(r);var o=new ua;return t._sendFileMessage(a).onPending(function(u){o._trigger(u)}).onFailed(function(u,d){o._triggerFailed(u,d)}).onSucceeded(function(u){t.isGroupChannel()&&i._tryUpdateLastMessageAndCallEvents(t,u),o._trigger(u)}),o}if(r.isMultipleFilesMessage()){if(t.isGroupChannel()){a=mx(r);var l=new np;return t._sendMultipleFilesMessage(a,di.COPY).onPending(function(u){l._trigger(u)}).onFailed(function(u,d){l._triggerFailed(u,d)}).onSucceeded(function(u){i._tryUpdateLastMessageAndCallEvents(t,u),l._trigger(u)}).onFileUploaded(function(u,d,f,p){l._triggerOnFileUploaded(u,d,f,p)}),l}throw J.channelTypeNotSupportedError}},n}(Lp),d2=function(){this.onUserMuted=jt,this.onUserUnmuted=jt,this.onUserBanned=jt,this.onUserUnbanned=jt,this.onChannelChanged=jt,this.onChannelDeleted=jt,this.onChannelFrozen=jt,this.onChannelUnfrozen=jt,this.onOperatorUpdated=jt,this.onChannelMemberCountChanged=jt,this.onMetaDataCreated=jt,this.onMetaDataUpdated=jt,this.onMetaDataDeleted=jt,this.onMetaCounterCreated=jt,this.onMetaCounterUpdated=jt,this.onMetaCounterDeleted=jt,this.onMessageReceived=jt,this.onMessageUpdated=jt,this.onMessageDeleted=jt,this.onMentionReceived=jt,this.onReactionUpdated=jt,this.onThreadInfoUpdated=jt},Bh,al={},B6=function(){function e(n){var t=n._iid,r=n.limit,i=r===void 0?100:r,a=this;this.ref=0,this._iid=t,this._limit=i;var s,o=Y.of(this._iid),l=o.sdkState,u=o.dispatcher,d=o.logger,f=o.cacheContext,p=o.statManager;this._metadataKey=(s=l.userId,"sendbird:".concat(s,"@groupchannel/sync.meta"));var m=function(E){return"sendbird:".concat(E,"@groupchannel/sync")}(l.userId);this._sync=new Al(m,function(){return A(a,void 0,void 0,function(){var E,g,y,S,C,T,I,L,D,O,R,k,P,G,V,H;return M(this,function(F){switch(F.label){case 0:return E={hasNext:!0,nextToken:""},[4,this.loadMetadata()];case 1:if(F.sent(),d.debug("channel background sync from",(D=this._metadata)===null||D===void 0?void 0:D.token),(O=this._metadata)===null||O===void 0?void 0:O.completed)return[3,14];g={includeEmpty:!0,includeMetaData:!0,order:er.CHRONOLOGICAL},F.label=2;case 2:if(F.trys.push([2,9,12,13]),g.order!==er.LATEST_LAST_MESSAGE)return[3,6];F.label=3;case 3:return F.trys.push([3,5,,6]),[4,f.preference.get(Oy(l.appId))];case 4:return y=F.sent(),g.includeChatNotification=!!y,[3,6];case 5:return F.sent(),g.includeChatNotification=!1,[3,6];case 6:return[4,Vr.of(this._iid).getMyGroupChannels((k=(R=this._metadata)===null||R===void 0?void 0:R.token)!==null&&k!==void 0?k:"",g,this._limit,ve.SYNC_CHANNEL_BACKGROUND)];case 7:return S=F.sent(),C=S.channels,T=S.token,E.hasNext=C.length>=this._limit&&!!T,E.nextToken=T,this._metadata&&(this._metadata.token=T,(L=this._metadata.range).extends.apply(L,At([],ft(C.map(function(z){return z.createdAt})),!1)),this._metadata.completed=!E.hasNext),d.debug("channel background sync progress",E),[4,this.saveMetadata()];case 8:return F.sent(),[3,13];case 9:return I=F.sent(),d.debug("channel background sync error",I),I instanceof J&&I.isInvalidTokenError?[4,this.clearMetaData()]:[3,11];case 10:F.sent(),F.label=11;case 11:throw I;case 12:return p.put(new cr({type:Zn.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:"",measured_on:"channel_back_sync",event:"cache_fetch",max_db_size:(G=(P=f.localCacheConfig)===null||P===void 0?void 0:P.maxSize)!==null&&G!==void 0?G:0,use_local_cache:f.localCacheEnabled,starting_point:0,message_init_policy:(H=(V=g.order)===null||V===void 0?void 0:V.toString())!==null&&H!==void 0?H:"",collection_id:l.userId}})),[7];case 13:return[3,15];case 14:E.hasNext=!1,E.nextToken="",F.label=15;case 15:return[2,E]}})})}),this._connectionEventContext=u.on(function(E){E instanceof pa&&(E.stateType===On.CONNECTED?a.resume():a.pause())})}return e.of=function(n){return al[n]||(al[n]=new e({_iid:n})),al[n].ref++,al[n]},e.clear=function(n){al[n]&&(al[n].close(),delete al[n])},Object.defineProperty(e.prototype,"range",{get:function(){var n,t;return(t=(n=this._metadata)===null||n===void 0?void 0:n.range)!==null&&t!==void 0?t:new zs({})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"completed",{get:function(){var n;return!!(!((n=this._metadata)===null||n===void 0)&&n.completed)},enumerable:!1,configurable:!0}),e.prototype.loadMetadata=function(){return A(this,void 0,void 0,function(){var n;return M(this,function(t){switch(t.label){case 0:return this._metadata?[3,2]:[4,Y.of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:n=t.sent(),this._metadata={token:n?n.token:"",range:new zs(n?n.range:{top:Number.MAX_SAFE_INTEGER,bottom:0}),completed:!!n&&n.completed},t.label=2;case 2:return[2,this._metadata]}})})},e.prototype.saveMetadata=function(){return A(this,void 0,void 0,function(){return M(this,function(n){switch(n.label){case 0:return this._metadata?[4,Y.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return n.sent(),[2,!0];case 2:return[2,!1]}})})},e.prototype.clearMetaData=function(){return A(this,void 0,void 0,function(){return M(this,function(n){switch(n.label){case 0:return[4,Y.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return n.sent(),this._metadata=void 0,[2]}})})},e.prototype.resume=function(){var n,t,r=Y.of(this._iid),i=r.logger;r.sessionManager.session.hasSession&&(i.debug("channel background sync resume()"),this._sync.start((t=(n=this._metadata)===null||n===void 0?void 0:n.token)!==null&&t!==void 0?t:""))},e.prototype.pause=function(){Y.of(this._iid).logger.debug("channel background sync stop()"),this._sync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete al[this._iid])},e}(),sl={},G6=function(){function e(n){var t=n._iid,r=this;this.ref=0,this._iid=t;var i,a=Y.of(this._iid),s=a.logger,o=a.sdkState,l=a.dispatcher,u=a.cacheContext,d=a.statManager;this._metadataKey=(i=o.userId,"sendbird:".concat(i,"@groupchannel/changelogs.meta")),this._subscribers=new ku;var f=function(p){return"sendbird:".concat(p,"@groupchannel/changelogs")}(o.userId);this._sync=new Al(f,function(){return A(r,void 0,void 0,function(){var p,m,E,g,y,S,C,T,I,L,D,O;return M(this,function(R){switch(R.label){case 0:return p={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:R.sent(),s.debug("channel changelog sync from",(L=this._metadata)===null||L===void 0?void 0:L.token),R.label=2;case 2:R.trys.push([2,9,,12]),m={includeEmpty:!0,includeMetaData:!0},R.label=3;case 3:return R.trys.push([3,5,,6]),[4,u.preference.get(Oy(o.appId))];case 4:return E=R.sent(),m.includeChatNotification=!!E,[3,6];case 5:return R.sent(),m.includeChatNotification=!1,[3,6];case 6:return[4,Vr.of(this._iid).getMyGroupChannelChangeLogs((O=(D=this._metadata)===null||D===void 0?void 0:D.token)!==null&&O!==void 0?O:"",m,ve.SYNC_CHANNEL_CHANGELOGS)];case 7:return g=R.sent(),y=g.updatedChannels,S=g.deletedChannelUrls,C=g.hasMore,T=g.token,this._subscribers.dispatch("progress",{updatedChannels:y,deletedChannelUrls:S,hasMore:C,token:T}),p.hasNext=C,p.nextToken=T,this._metadata&&(this._metadata.token=T),s.debug("channel changelog sync progress",p),[4,this.saveMetadata()];case 8:return R.sent(),u.localCacheEnabled&&d.put(new cr({type:Zn.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:"",measured_on:"channel_change_log_sync",event:y.length>0||S.length>0?"cache_miss":"cache_hit",max_db_size:y.length,use_local_cache:u.localCacheEnabled,starting_point:0,message_init_policy:S.length.toString(),collection_id:o.userId}})),[3,12];case 9:return I=R.sent(),s.debug("channel changelog sync error",I),I instanceof J&&I.isInvalidTokenError?[4,this.clearMetadata()]:[3,11];case 10:R.sent(),R.label=11;case 11:throw I;case 12:return[2,p]}})})}),this._sync.on("stop",function(){r._subscribers.dispatch("pause")}),this._connectionEventContext=l.on(function(p){p instanceof pa&&(p.stateType===On.CONNECTED?r.resume():r.pause())})}return e.of=function(n){return sl[n]||(sl[n]=new e({_iid:n})),sl[n].ref++,sl[n]},e.clear=function(n){sl[n]&&(sl[n].close(),delete sl[n])},Object.defineProperty(e.prototype,"isRunning",{get:function(){return this._sync.isRunning},enumerable:!1,configurable:!0}),e.prototype.loadMetadata=function(){return A(this,void 0,void 0,function(){var n,t,r,i;return M(this,function(a){switch(a.label){case 0:return this._metadata?[3,2]:(n=Y.of(this._iid),t=n.cacheContext,r=n.firstConnectedAt,[4,t.preference.get(this._metadataKey)]);case 1:i=a.sent(),this._metadata={token:i?i.token:r},a.label=2;case 2:return[2,this._metadata]}})})},e.prototype.saveMetadata=function(){return A(this,void 0,void 0,function(){return M(this,function(n){switch(n.label){case 0:return this._metadata?[4,Y.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return n.sent(),[2,!0];case 2:return[2,!1]}})})},e.prototype.clearMetadata=function(){return A(this,void 0,void 0,function(){return M(this,function(n){switch(n.label){case 0:return[4,Y.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return n.sent(),this._metadata=void 0,[2]}})})},e.prototype.on=function(n,t){return this._subscribers.on(n,t)},e.prototype.resume=function(){Y.of(this._iid).sessionManager.session.hasSession&&this._sync.start(0)},e.prototype.pause=function(){this._sync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete sl[this._iid])},e}(),op=function(e,n){return e.findIndex(function(t){return t.isIdentical(n)})},zT=function(e,n,t){if(e.length>0){for(var r=op(e,n),i=0,a=e.length-1,s=Math.floor((i+a)/2);i<a;){var o=jT(e[s],n,t);if(o>0)a=s,s=Math.floor((i+a)/2);else{if(!(o<0))return{place:s,oldPosition:r};i=s+1,s=Math.floor((i+a)/2)}}return{place:jT(e[s],n,t)>=0?s:s+1,oldPosition:r}}return{place:e.length,oldPosition:-1}},jT=function(e,n,t){switch(t){case er.LATEST_LAST_MESSAGE:return e.lastMessage&&n.lastMessage?(r=n.lastMessage.createdAt-e.lastMessage.createdAt)===0?n.createdAt-e.createdAt:r:e.lastMessage?-1:n.lastMessage?1:n.createdAt-e.createdAt;case er.CHRONOLOGICAL:return n.createdAt-e.createdAt;case er.CHANNEL_NAME_ALPHABETICAL:var r;return(r=e.name.localeCompare(n.name))===0?e.createdAt-n.createdAt:r;default:return 0}},V6=function(){function e(n,t){var r=t.filter,i=r===void 0?new cm:r,a=t.order,s=a===void 0?er.LATEST_LAST_MESSAGE:a,o=t.limit,l=o===void 0?Gw:o,u=t.includeChangesOnInitialLoad,d=u!==void 0&&u,f=this;this.channels=[],this._isInitialized=!1,this._iid=n,this._key="gcc-".concat(Ro()),this._isDisposed=!1,this._isGetRemoteChannelsSucceeded=!0,this._includeChangesOnInitialLoad=d,this.filter=i,this.order=s,this._hasMore=!0,this._token="",this._limit=l;var p=Y.of(this._iid),m=p.sdkState,E=p.cacheContext,g=p.dispatcher;E.localCacheEnabled&&(this._backgroundSync=B6.of(n),this._backgroundSync.resume()),this._changelogSync=G6.of(n),this._changelogSync.resume(),Vr.of(this._iid).subscribeChannelEvent(this._key,{onUpdate:function(y,S){var C=S.source;if(sp(C)){var T=y.filter(function(L){return f.filter.match(L,m.userId)}),I=y.filter(function(L){return!f.filter.match(L,m.userId)}).map(function(L){return L.url});T.length>0&&f._addChannelsToView(T,S),I.length>0&&f._removeChannelsFromView(I,S)}},onRemove:function(y,S){f._removeChannelsFromView(y,S)}}),g.on(function(y){y instanceof pa&&(y.stateType===On.CONNECTED?f._isGetRemoteChannelsSucceeded||A(f,void 0,void 0,function(){return M(this,function(S){switch(S.label){case 0:return[4,this._revokeLoadMore()];case 1:return S.sent(),[2]}})}):y.stateType===On.LOGOUT&&f.dispose())})}return Object.defineProperty(e.prototype,"hasMore",{get:function(){return!this._isDisposed&&this._hasMore},enumerable:!1,configurable:!0}),e.prototype.setGroupChannelCollectionHandler=function(n){this._handler=n},e.prototype._addChannelsToView=function(n,t,r){var i,a,s,o,l=this;r===void 0&&(r=!1);var u=[],d=[],f=[];try{for(var p=je(n),m=p.next();!m.done;m=p.next()){var E=m.value,g=op(this.channels,E);g>=0&&this.channels.splice(g,1);var y=zT(this.channels,E,this.order).place;if(g<0)y===this.channels.length?!r&&this._hasMore||(u.push(E),this.channels.push(E)):(u.push(E),this.channels.splice(y,0,E));else switch(t.source){case ve.EVENT_CHANNEL_UPDATED:case ve.EVENT_MESSAGE_RECEIVED:case ve.SYNC_CHANNEL_CHANGELOGS:case ve.EVENT_MESSAGE_SENT:this.order===er.CHANNEL_NAME_ALPHABETICAL&&this._hasMore&&y===this.channels.length?f.push(E):(this.channels.splice(y,0,E),d.push(E));break;default:this.channels.splice(y,0,E),d.push(E)}}}catch(I){i={error:I}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}if(f.length>0)try{for(var S=je(f),C=S.next();!C.done;C=S.next()){E=C.value;var T=op(this.channels,E);T!==-1&&this.channels.splice(T,1)}}catch(I){s={error:I}}finally{try{C&&!C.done&&(o=S.return)&&o.call(S)}finally{if(s)throw s.error}}sp(t.source)&&ut(function(){return A(l,void 0,void 0,function(){var I,L,D;return M(this,function(O){return u.length>0&&(!((I=this._handler)===null||I===void 0)&&I.onChannelsAdded)&&this._handler.onChannelsAdded(t,u),d.length>0&&(!((L=this._handler)===null||L===void 0)&&L.onChannelsUpdated)&&this._handler.onChannelsUpdated(t,d),f.length>0&&(!((D=this._handler)===null||D===void 0)&&D.onChannelsDeleted)&&this._handler.onChannelsDeleted(t,f.map(function(R){return R.url})),[2]})})})},e.prototype._removeChannelsFromView=function(n,t){var r,i,a=this,s=[],o=function(f){var p=l.channels.findIndex(function(m){return m.url===f});p>=0&&(s.push(l.channels[p].url),l.channels.splice(p,1))},l=this;try{for(var u=je(n),d=u.next();!d.done;d=u.next())o(d.value)}catch(f){r={error:f}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return sp(t.source)&&s.length>0&&ut(function(){return A(a,void 0,void 0,function(){var f;return M(this,function(p){return!((f=this._handler)===null||f===void 0)&&f.onChannelsDeleted&&this._handler.onChannelsDeleted(t,s),[2]})})}),s},e.prototype._getLocalChannels=function(){return A(this,void 0,void 0,function(){var n,t;return M(this,function(r){switch(r.label){case 0:return n=Vr.of(this._iid),t=this.channels.length>0?function(i,a){var s,o,l,u;switch(a){case er.LATEST_LAST_MESSAGE:return(o=(s=i.lastMessage)===null||s===void 0?void 0:s.createdAt)!==null&&o!==void 0?o:i.createdAt;case er.CHRONOLOGICAL:return i.createdAt;case er.CHANNEL_NAME_ALPHABETICAL:return i.name;default:return(u=(l=i.lastMessage)===null||l===void 0?void 0:l.createdAt)!==null&&u!==void 0?u:i.createdAt}}(this.channels[this.channels.length-1],this.order):null,[4,n.getChannelsFromCache(t,this.filter,this.order,this._limit,t?this.channels[this.channels.length-1].url:void 0)];case 1:return[2,r.sent()]}})})},e.prototype._getRemoteChannels=function(){return A(this,void 0,void 0,function(){var n,t,r;return M(this,function(i){switch(i.label){case 0:return[4,Vr.of(this._iid).getMyGroupChannels(this._token,_t(W(W({},this.filter),{userIdsFilter:this.filter.userIdsFilter,searchFilter:this.filter.searchFilter,order:this.order})),this._limit)];case 1:return n=i.sent(),t=n.channels,r=n.token,this._token=r,this._hasMore=!!r,[2,t]}})})},e.prototype._revokeLoadMore=function(){return A(this,void 0,void 0,function(){var n;return M(this,function(t){switch(t.label){case 0:if(this._isDisposed)return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this._getRemoteChannels()];case 2:return n=t.sent(),this._isGetRemoteChannelsSucceeded=!0,this._addChannelsToView(n,{source:ve.REQUEST_CHANNEL},!0),[3,4];case 3:return t.sent(),this._isGetRemoteChannelsSucceeded=!1,[3,4];case 4:return[2]}})})},e.prototype.loadMore=function(){var n;return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,d,f,p,m,E,g,y,S,C,T,I,L=this;return M(this,function(D){switch(D.label){case 0:if(this._isDisposed)throw new J({code:at.COLLECTION_DISPOSED,message:"Collection has been disposed."});return t=null,this._includeChangesOnInitialLoad&&this.channels.length===0&&this._changelogSync.isRunning?[4,new Promise(function(O){L._changelogSyncSubscriberContext=L._changelogSync.on("progress",function(R){return O(R)}).on("pause",function(){return O(null)})})]:[3,2];case 1:t=D.sent(),(n=this._changelogSyncSubscriberContext)===null||n===void 0||n.close(),D.label=2;case 2:return r=Y.of(this._iid),i=r.cacheContext,a=r.connectionManager,s=r.statManager,this._isInitialized?[3,5]:(this._isInitialized=!0,i.localCacheEnabled?[4,this._backgroundSync.loadMetadata()]:[3,4]);case 3:D.sent(),D.label=4;case 4:s.put(new Kh({type:Zn.FEATURE_LOCALCACHE,data:{use_local_cache:i.localCacheEnabled,collection_interface:{group_channel:!0}}})),D.label=5;case 5:return o=[],this._hasMore?!i.localCacheEnabled||a.isConnected&&!this._backgroundSync.completed?[3,7]:[4,mr(function(){return A(L,void 0,void 0,function(){return M(this,function(O){switch(O.label){case 0:return[4,this._getLocalChannels()];case 1:return o=O.sent(),[2]}})})})]:[3,11];case 6:return D.sent(),this._hasMore=o.length>=this._limit,[3,10];case 7:return D.trys.push([7,9,,10]),[4,this._getRemoteChannels()];case 8:return o=D.sent(),this._isGetRemoteChannelsSucceeded=!0,[3,10];case 9:return D.sent(),this._isGetRemoteChannelsSucceeded=!1,[3,10];case 10:this._addChannelsToView(o,{source:ve.REQUEST_CHANNEL},!0),D.label=11;case 11:if(t){try{for(l=je(t.updatedChannels),u=l.next();!u.done;u=l.next())d=u.value,(y=op(o,d))>=0?o[y]=d:(f=zT(o,d,this.order).place,o.splice(f,0,d))}catch(O){S={error:O}}finally{try{u&&!u.done&&(C=l.return)&&C.call(l)}finally{if(S)throw S.error}}p=o.map(function(O){return O.url});try{for(m=je(t.deletedChannelUrls),E=m.next();!E.done;E=m.next())g=E.value,(y=p.indexOf(g))>=0&&(o.splice(y,1),p.splice(y,1))}catch(O){T={error:O}}finally{try{E&&!E.done&&(I=m.return)&&I.call(m)}finally{if(T)throw T.error}}}return[2,o]}})})},e.prototype.dispose=function(){var n,t,r;this._isDisposed||(this._isDisposed=!0,this.channels.length>0&&this.channels.splice(0,this.channels.length),(n=this._backgroundSync)===null||n===void 0||n.close(),(t=this._changelogSync)===null||t===void 0||t.close(),(r=this._changelogSyncSubscriberContext)===null||r===void 0||r.close(),Vr.of(this._iid).unsubscribeChannelEvent(this._key))},e}(),z6=function(e){function n(t){var r=this,i=t.token,a=t.limit,s=t.order,o=t.includeEmpty,l=t.membershipFilter,u=t.channelNameContainsFilter,d=t.channelUrlsFilter,f=t.customTypesFilter,p=t.customTypeStartsWithFilter,m=t.superChannelFilter,E=t.metadataOrderKeyFilter,g=t.metadataKey,y=t.metadataValues,S=t.metadataValueStartsWith,C=t.includeFrozen,T=t.includeMetaData;return(r=e.call(this)||this).method=we.GET,r.path=Li,r.params=Xe(_t({token:i,limit:a,order:s,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:o,public_mode:Ws.PUBLIC,public_membership_mode:l,name_contains:u,channel_urls:d,custom_types:f,custom_type_startswith:p,super_mode:m,metadata_order_key:E,metadata_key:g,metadata_values:y,metadata_value_startswith:S,show_frozen:C,show_metadata:T})),r}return B(n,e),n}(Re),j6=function(e){function n(t,r){var i=e.call(this,t,r)||this;i.channels=[];var a=r.next,s=r.channels,o=r.ts;return i.token=a,s&&s.length>0&&(i.channels=s.map(function(l){return l.ts=o,new xa(t,l)})),i.ts=typeof o=="number"?o:0,i}return B(n,e),n}(He);(function(e){e.ALL="all",e.JOINED="joined"})(Bh||(Bh={}));var q6=function(e){function n(t,r){var i,a,s,o,l,u,d,f,p,m,E,g,y,S,C=this;return(C=e.call(this,t,r)||this).includeEmpty=!1,C.includeFrozen=!0,C.includeMetaData=!0,C.channelUrlsFilter=null,C.customTypesFilter=null,C.customTypeStartsWithFilter=null,C.channelNameContainsFilter=null,C.membershipFilter=Bh.ALL,C.superChannelFilter=ea.ALL,C.metadataKey=null,C.metadataValues=null,C.metadataOrderKeyFilter=null,C.metadataValueStartsWith=null,C.order=Ph.CHRONOLOGICAL,C.includeEmpty=(i=r.includeEmpty)!==null&&i!==void 0&&i,C.includeFrozen=(a=r.includeFrozen)===null||a===void 0||a,C.includeMetaData=(s=r.includeMetaData)===null||s===void 0||s,C.channelUrlsFilter=(o=r.channelUrlsFilter)!==null&&o!==void 0?o:null,C.customTypesFilter=(l=r.customTypesFilter)!==null&&l!==void 0?l:null,C.customTypeStartsWithFilter=(u=r.customTypeStartsWithFilter)!==null&&u!==void 0?u:null,C.channelNameContainsFilter=(d=r.channelNameContainsFilter)!==null&&d!==void 0?d:null,C.membershipFilter=(f=r.membershipFilter)!==null&&f!==void 0?f:Bh.ALL,C.superChannelFilter=(p=r.superChannelFilter)!==null&&p!==void 0?p:ea.ALL,C.metadataKey=(m=r.metadataKey)!==null&&m!==void 0?m:null,C.metadataValues=(E=r.metadataValues)!==null&&E!==void 0?E:null,C.metadataOrderKeyFilter=(g=r.metadataOrderKeyFilter)!==null&&g!==void 0?g:null,C.metadataValueStartsWith=(y=r.metadataValueStartsWith)!==null&&y!==void 0?y:null,C.order=(S=r.order)!==null&&S!==void 0?S:Ph.CHRONOLOGICAL,C}return B(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&X("boolean",this.includeEmpty)&&X("boolean",this.includeFrozen)&&X("boolean",this.includeMetaData)&&X("string",this.channelNameContainsFilter,!0)&&nn("string",this.channelUrlsFilter,!0)&&nn("string",this.customTypesFilter,!0)&&X("string",this.customTypeStartsWithFilter,!0)&&tn(Bh,this.membershipFilter)&&tn(ea,this.superChannelFilter)&&tn(Ph,this.order)&&X("string",this.metadataOrderKeyFilter,!0)&&X("string",this.metadataKey,!0)&&nn("string",this.metadataValues,!0)&&X("string",this.metadataValueStartsWith,!0)},n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l;return M(this,function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:(t=[],this._hasNext?(this._isLoading=!0,r=Y.of(this._iid).requestQueue,i=new z6(_t(W(W({},this),{token:this._token}))),[4,r.send(i)]):[3,2]):[3,5];case 1:return a=u.sent(),s=a.as(j6),o=s.channels,l=s.token,this._token=l,this._hasNext=!!l,this._isLoading=!1,[2,o];case 2:return[2,t];case 3:throw J.queryInProgress;case 4:return[3,6];case 5:throw J.invalidParameters;case 6:return[2]}})})},n}(Uo),xo=function(e){function n(t){t===void 0&&(t={});var r=e.call(this)||this;return Object.keys(t).forEach(function(i){r.hasOwnProperty(i)&&(r[i]=t[i])}),r}return B(n,e),n}(function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.onUserJoined=jt,t.onUserLeft=jt,t.onUserReceivedInvitation=jt,t.onUserDeclinedInvitation=jt,t.onChannelHidden=jt,t.onUnreadMemberStatusUpdated=jt,t.onUndeliveredMemberStatusUpdated=jt,t.onTypingStatusUpdated=jt,t.onPollUpdated=jt,t.onPollVoted=jt,t.onPollDeleted=jt,t.onPinnedMessageUpdated=jt,t}return B(n,e),n}(d2)),K6=function(e){function n(t){var r=this,i=t.token,a=t.limit,s=t.order,o=t.reverse,l=t.channelUrl,u=t.messageTypeFilter,d=t.scheduledStatus;return(r=e.call(this)||this).method=we.GET,r.path="".concat(IA),r.params=Xe(_t({token:i,limit:a,reverse:o,channel_url:l,order:s,message_type:u,status:d})),r}return B(n,e),n}(Re),$6=function(e){function n(t,r){var i=e.call(this,t,r)||this;i.scheduledMessages=[];var a=r.next,s=r.scheduled_messages;return i.token=a,i.scheduledMessages=s.map(function(o){return Ei(t,o)}),i}return B(n,e),n}(He),W6=function(e){function n(t,r){var i,a,s,o,l,u=this;return(u=e.call(this,t,r)||this).channelUrl=null,u.order=null,u.reverse=!1,u.scheduledStatus=null,u.messageTypeFilter=mi.ALL,u.channelUrl=(i=r.channelUrl)!==null&&i!==void 0?i:null,u.order=(a=r.order)!==null&&a!==void 0?a:null,u.reverse=(s=r.reverse)!==null&&s!==void 0&&s,u.scheduledStatus=(o=r.scheduledStatus)!==null&&o!==void 0?o:null,u.messageTypeFilter=(l=r.messageTypeFilter)!==null&&l!==void 0?l:mi.ALL,u}return B(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&X("string",this.channelUrl,!0)&&(tn(xg,this.order)||this.order===null)&&X("boolean",this.reverse)&&(nn(_l,this.scheduledStatus)||this.scheduledStatus===null)&&tn(mi,this.messageTypeFilter)},n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return M(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=Y.of(this._iid).requestQueue,r=new K6(_t(W(W({},this),{token:this._token}))),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),a=i.as($6),s=a.scheduledMessages,o=a.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw J.queryInProgress;case 4:return[3,6];case 5:throw J.invalidParameters;case 6:return[2]}})})},n}(Uo),Q6=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.name="groupChannel",t}return B(n,e),n.prototype.init=function(t,r){var i=r.sdkState,a=r.dispatcher,s=r.sessionManager,o=r.requestQueue,l=r.logger,u=r.onlineDetector,d=r.cacheContext;e.prototype.init.call(this,t,{sdkState:i,dispatcher:a,sessionManager:s,requestQueue:o,logger:l,onlineDetector:u,cacheContext:d}),this._manager=new Vr(t,{sdkState:i,cacheContext:d,dispatcher:a,sessionManager:s,requestQueue:o,logger:l})},n.prototype.createGroupChannelCollection=function(t){return t===void 0&&(t={}),new V6(this._iid,t)},n.prototype.createMyGroupChannelListQuery=function(t){return t===void 0&&(t={}),new c2(this._iid,t)},n.prototype.createPublicGroupChannelListQuery=function(t){return t===void 0&&(t={}),new q6(this._iid,t)},n.prototype.createScheduledMessageListQuery=function(t){return t===void 0&&(t={}),new W6(this._iid,t)},n.prototype.addGroupChannelHandler=function(t,r){ke(X("string",t)&&r instanceof xo).throw(J.invalidParameters),this._manager.addHandler(t,r)},n.prototype.removeGroupChannelHandler=function(t){ke(X("string",t)).throw(J.invalidParameters),this._manager.removeHandler(t)},n.prototype.removeAllGroupChannelHandlers=function(){this._manager.clearHandler()},n.prototype.buildGroupChannelFromSerializedData=function(t){return this._manager.buildGroupChannelFromSerializedData(t)},n.prototype.buildGroupChannelListQueryFromSerializedData=function(t){return this._manager.buildGroupChannelListQueryFromSerializedData(t)},n.prototype.buildMemberFromSerializedData=function(t){return this._manager.buildMemberFromSerializedData(t)},n.prototype.getChannel=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){return ke(X("string",t)).throw(J.invalidParameters),[2,this._manager.getChannel(t)]})})},n.prototype.getChannelWithoutCache=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){return ke(X("string",t)).throw(J.invalidParameters),[2,this._manager.getChannelWithoutCache(t)]})})},n.prototype.getMyGroupChannelChangeLogsByToken=function(t,r){return r===void 0&&(r={}),A(this,void 0,void 0,function(){var i;return M(this,function(a){switch(a.label){case 0:return i=W(W({},Pp),r),ke(X("string",t)&&Hg(i)).throw(J.invalidParameters),[4,this._manager.getMyGroupChannelChangeLogs(t,i)];case 1:return[2,a.sent()]}})})},n.prototype.getMyGroupChannelChangeLogsByTimestamp=function(t,r){return r===void 0&&(r={}),A(this,void 0,void 0,function(){var i;return M(this,function(a){switch(a.label){case 0:return i=W(W({},Pp),r),ke(X("number",t)&&Hg(i)).throw(J.invalidParameters),[4,this._manager.getMyGroupChannelChangeLogs(t,i)];case 1:return[2,a.sent()]}})})},n.prototype.getGroupChannelCount=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){return r=W(W({},l2),t),ke(u2(r)).throw(J.invalidParameters),[2,this._manager.getGroupChannelCount(r)]})})},n.prototype.getUnreadItemCount=function(t){return t===void 0&&(t={}),A(this,void 0,void 0,function(){return M(this,function(r){switch(r.label){case 0:return[4,this._manager.getUnreadItemCount(t)];case 1:return[2,r.sent()]}})})},n.prototype.getTotalUnreadChannelCount=function(){return A(this,void 0,void 0,function(){return M(this,function(t){switch(t.label){case 0:return[4,this._manager.getTotalUnreadChannelCount()];case 1:return[2,t.sent()]}})})},n.prototype.getTotalUnreadMessageCount=function(t){return t===void 0&&(t={}),A(this,void 0,void 0,function(){return M(this,function(r){switch(r.label){case 0:return[4,this._manager.getTotalUnreadMessageCount(t)];case 1:return[2,r.sent()]}})})},n.prototype.getTotalScheduledMessageCount=function(t){return t===void 0&&(t={}),A(this,void 0,void 0,function(){return M(this,function(r){switch(r.label){case 0:return[4,this._manager.getTotalScheduledMessageCount(t)];case 1:return[2,r.sent()]}})})},n.prototype.getSubscribedTotalUnreadMessageCount=function(){return this._manager.getSubscribedTotalUnreadMessageCount()},n.prototype.getSubscribedCustomTypeTotalUnreadMessageCount=function(){return this._manager.getSubscribedCustomTypeTotalUnreadMessageCount()},n.prototype.getSubscribedCustomTypeUnreadMessageCount=function(t){return this._manager.getSubscribedCustomTypeUnreadMessageCount(t)},n.prototype.createChannel=function(t){return t===void 0&&(t={}),A(this,void 0,void 0,function(){var r;return M(this,function(i){return r=W(W({},ap),t),ke(Fg(r)).throw(J.invalidParameters),[2,this._manager.createChannel(r)]})})},n.prototype.createDistinctChannelIfNotExist=function(t){return t===void 0&&(t={}),A(this,void 0,void 0,function(){var r;return M(this,function(i){return r=W(W({},ap),t),ke(Fg(r)).throw(J.invalidParameters),r&&(r.isDistinct=!0),[2,this.createChannel(r)]})})},n.prototype.createChannelWithUserIds=function(t,r,i,a,s,o){return r===void 0&&(r=!1),s===void 0&&(s=""),o===void 0&&(o=""),A(this,void 0,void 0,function(){var l;return M(this,function(u){return l=W(W({},ap),{invitedUserIds:t,isDistinct:r,name:i,data:s,customType:o}),typeof a=="string"?l.coverUrl=a:l.coverImage=a,[2,this.createChannel(l)]})})},n.prototype.markAsReadAll=function(){return A(this,void 0,void 0,function(){return M(this,function(t){return this._manager.markAsReadAll(),[2]})})},n.prototype.markAsReadWithChannelUrls=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){return ke(nn("string",t)).throw(J.invalidParameters),this._manager.markAsReadWithChannelUrls(t),[2]})})},n.prototype.markAsDelivered=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){switch(r.label){case 0:return ke(X("string",t)).throw(J.invalidParameters),[4,this.getChannel(t)];case 1:return[4,r.sent().markAsDelivered()];case 2:return r.sent(),[2]}})})},n}(im);const Nu={collection:{groupChannel:{defaultLimit:20,defaultOrder:er.LATEST_LAST_MESSAGE,defaultIncludeEmpty:!1},message:{defaultLimit:{next:25,prev:25},searchLimit:{next:10,prev:10}}}};var Y6=function(e,n,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(d){try{u(r.next(d))}catch(f){s(f)}}function l(d){try{u(r.throw(d))}catch(f){s(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,l)}u((r=r.apply(e,n||[])).next())})};const h2=(e,n)=>{N.useEffect(f2(e),n)},X6=(e,n)=>{N.useLayoutEffect(f2(e),n)},V_=e=>typeof e=="function"&&e(),f2=e=>()=>{const n=V_(e);return()=>{n&&(n instanceof Promise?V_(()=>Y6(void 0,void 0,void 0,function*(){const t=yield n;typeof t=="function"&&t()})):typeof n=="function"&&V_(n))}};let Z6=0;function J6(){return N.useState(()=>`${Z6++}`)[0]}const dm=(e,n,t)=>{const r=N.useRef(n),a=J6();r.current=n,N.useEffect(()=>{var s;const o=l=>(Object.keys(l).forEach(d=>{l[d]=(...f)=>{var p,m;return(m=(p=r.current)===null||p===void 0?void 0:p[d])===null||m===void 0?void 0:m.call(p,...f)}}),l);return(s=e==null?void 0:e.groupChannel)===null||s===void 0||s.addGroupChannelHandler(a,o(new xo)),()=>{var l;(l=e==null?void 0:e.groupChannel)===null||l===void 0||l.removeGroupChannelHandler(a)}},[e==null?void 0:e.groupChannel,a])};function ur(e){const n=N.useRef(e);return n.current=e,N.useCallback((...t)=>n.current(...t),[n])}var eF=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]]);return t};const tF=(e,n)=>{var t=eF(e,[]);const r=qT(t.order);switch(n.type){case"update_refreshing":{t.refreshing=n.value.status;break}case"update_initialized":{t.initialized=n.value.status;break}case"update_channels":{KT(n.value.channels).forEach(i=>{const a=t.groupChannels.findIndex(s=>s.url===i.url);a>-1&&(t.groupChannels[a]=i)}),r&&(t.groupChannels=t.groupChannels.sort(r));break}case"delete_channels":{n.value.channelUrls.forEach(i=>{const a=t.groupChannels.findIndex(s=>s.url===i);a>-1&&t.groupChannels.splice(a,1)}),r&&(t.groupChannels=t.groupChannels.sort(r));break}case"append_channels":{const i=KT(n.value.channels);n.value.clearBeforeAction?t.groupChannels=i:t.groupChannels=rF(t.groupChannels,i,"url"),r&&(t.groupChannels=t.groupChannels.sort(r));break}case"update_order":{t.order=n.value.order;const i=qT(t.order);i&&(t.groupChannels=t.groupChannels.sort(i));break}}return t},nF=e=>{const[{initialized:n,refreshing:t,groupChannels:r},i]=N.useReducer(tF,{initialized:!1,refreshing:!1,groupChannels:[],order:e});return{updateInitialized:f=>{i({type:"update_initialized",value:{status:f}})},updateRefreshing:f=>{i({type:"update_refreshing",value:{status:f}})},updateChannels:f=>{i({type:"update_channels",value:{channels:f}})},deleteChannels:f=>{i({type:"delete_channels",value:{channelUrls:f}})},appendChannels:(f,p)=>{i({type:"append_channels",value:{channels:f,clearBeforeAction:p}})},updateOrder:f=>{i({type:"update_order",value:{order:f}})},initialized:n,refreshing:t,groupChannels:r}},qT=e=>{if(e)return(n,t)=>{switch(e){case"latest_last_message":return n.lastMessage&&t.lastMessage?t.lastMessage.createdAt-n.lastMessage.createdAt:n.lastMessage?-1:t.lastMessage?1:t.createdAt-n.createdAt;case"chronological":return t.createdAt-n.createdAt;case"channel_name_alphabetical":return n.name.localeCompare(t.name);default:return 0}}};function rF(e,n,t){const r=new Set(e.map(a=>a[t])),i=[...e];for(let a=0;a<n.length;a++)r.has(n[a][t])||(i.push(n[a]),r.add(n[a][t]));return i}function KT(e){return e.filter(n=>n.isGroupChannel())}var Hv=function(e,n,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(d){try{u(r.next(d))}catch(f){s(f)}}function l(d){try{u(r.throw(d))}catch(f){s(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,l)}u((r=r.apply(e,n||[])).next())})};const iF=(e,n)=>{const t={includeEmpty:Nu.collection.groupChannel.defaultIncludeEmpty,limit:Nu.collection.groupChannel.defaultLimit,order:Nu.collection.groupChannel.defaultOrder},r=n==null?void 0:n(t);return r||e.groupChannel.createGroupChannelCollection(Object.assign(Object.assign({},t),{filter:new cm(t)}))},aF=(e,n)=>{var t,r,i;const a=!!(!((r=(t=e.appInfo)===null||t===void 0?void 0:t.premiumFeatureList)===null||r===void 0)&&r.includes(yL.delivery_receipt)),s=N.useRef(),o=N.useRef(n);o.current=n;const{initialized:l,groupChannels:u,refreshing:d,appendChannels:f,deleteChannels:p,updateRefreshing:m,updateInitialized:E}=nF(),g=(T,I,L)=>{var D,O,R,k;const P=(O=(D=s.current)===null||D===void 0?void 0:D.channels)!==null&&O!==void 0?O:[];if(f(P,!0),T&&a)switch(I){case Fv.EVENT_MESSAGE_RECEIVED:case Fv.EVENT_MESSAGE_SENT:case Fv.SYNC_CHANNEL_BACKGROUND:case Fv.SYNC_CHANNEL_CHANGELOGS:case void 0:(k=(R=o.current)===null||R===void 0?void 0:R.markAsDelivered)===null||k===void 0||k.call(R,L??P);break}},y=ur(T=>Hv(void 0,void 0,void 0,function*(){var I,L,D,O;s.current&&((I=s.current)===null||I===void 0||I.dispose()),T&&(s.current=iF(e,n==null?void 0:n.collectionCreator),(L=s.current)===null||L===void 0||L.setGroupChannelCollectionHandler({onChannelsAdded:(R,k)=>{var P,G;const V=k.filter(H=>H.isGroupChannel());g(!0,R.source,V),(G=(P=o.current)===null||P===void 0?void 0:P.onChannelsAdded)===null||G===void 0||G.call(P,V)},onChannelsUpdated:(R,k)=>{var P,G;const V=k.filter(H=>H.isGroupChannel());g(!0,R.source,V),(G=(P=o.current)===null||P===void 0?void 0:P.onChannelsUpdated)===null||G===void 0||G.call(P,V)},onChannelsDeleted:(R,k)=>{var P,G;g(!1),(G=(P=o.current)===null||P===void 0?void 0:P.onChannelsDeleted)===null||G===void 0||G.call(P,k)}}),!((D=s.current)===null||D===void 0)&&D.hasMore&&(yield(O=s.current)===null||O===void 0?void 0:O.loadMore(),g(!0)))}));N.useEffect(()=>()=>{var T;s.current&&((T=s.current)===null||T===void 0||T.dispose())},[]),h2(()=>Hv(void 0,void 0,void 0,function*(){E(!1),e.currentUser&&(yield y(e.currentUser.userId),E(!0))}),[e,(i=e.currentUser)===null||i===void 0?void 0:i.userId]),dm(e,{onUserBanned:(T,I)=>{var L,D,O;I.userId===((L=e.currentUser)===null||L===void 0?void 0:L.userId)?(p([T.url]),(O=(D=o.current)===null||D===void 0?void 0:D.onChannelsDeleted)===null||O===void 0||O.call(D,[T.url])):g(!1)}});const S=ur(()=>Hv(void 0,void 0,void 0,function*(){e.currentUser&&(m(!0),yield y(e.currentUser.userId),m(!1))})),C=ur(()=>Hv(void 0,void 0,void 0,function*(){var T,I;!((T=s.current)===null||T===void 0)&&T.hasMore&&(yield(I=s.current)===null||I===void 0?void 0:I.loadMore(),g(!0))}));return{initialized:l,groupChannels:u,refresh:S,refreshing:d,loadMore:C}};var sF=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.name="poll",t}return B(n,e),n.prototype.init=function(t,r){var i=r.sdkState,a=r.dispatcher,s=r.sessionManager,o=r.requestQueue,l=r.logger,u=r.onlineDetector,d=r.cacheContext;e.prototype.init.call(this,t,{sdkState:i,dispatcher:a,sessionManager:s,requestQueue:o,logger:l,onlineDetector:u,cacheContext:d}),this._manager=new Ip(t,{sdkState:i,dispatcher:a,sessionManager:s,requestQueue:o,logger:l,onlineDetector:u,cacheContext:d})},n.prototype.create=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){return r=W(W({},kk),t),ke(mw(r)).throw(J.invalidParameters),[2,this._manager.create(r)]})})},n.prototype.get=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){return r=W(W({},xk),t),ke(gw(r)).throw(J.invalidParameters),[2,this._manager.get(r)]})})},n.prototype.getOption=function(t){return A(this,void 0,void 0,function(){var r;return M(this,function(i){return r=W(W({},Pk),t),ke(_w(r)).throw(J.invalidParameters),[2,this._manager.getOption(r)]})})},n.prototype.buildPollFromSerializedData=function(t){return this._manager.buildPollFromSerializedData(t)},n}(im),oF=function(e){return["-lastMessageUpdatedAt","-createdAt","syncIndex"]},$T=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return B(n,e),n}(ar),v2=function(e){this.key=e.key,this.url=e.url},p2=function(e){this.id=e.id,this.name=e.name,this.url=e.url,this.emojis=e.emojis?e.emojis.map(function(n){return new v2(n)}):[]},m2=function(e){this.emojiHash=e.emoji_hash||"",this.emojiCategories=e.emoji_categories?e.emoji_categories.map(function(n){return new p2(n)}):[]},lF={profileImage:void 0,profileUrl:void 0,nickname:void 0},WT=function(e){return function(n,t){return A(void 0,void 0,void 0,function(){var r,i,a,s;return M(this,function(o){switch(o.label){case 0:switch(n){case 1:case 2:case 3:case 4:return[3,1];case 5:return[3,2];case 6:return[3,4]}return[3,11];case 1:return t(),[3,12];case 2:return[4,e.reset()];case 3:return o.sent(),t(),[3,12];case 4:return o.trys.push([4,9,,10]),r=function(l){return{v2:function(){return A(void 0,void 0,void 0,function(){return M(this,function(u){switch(u.label){case 0:return[4,l.commitSchema([{collectionName:Vw,keyName:ux,index:[ip(er.LATEST_LAST_MESSAGE),ip(er.CHRONOLOGICAL),ip(er.CHANNEL_NAME_ALPHABETICAL)]},{collectionName:Ug,keyName:cx,index:[js(ni.CHANNEL_LATEST),js(ni.NEWEST_CHILD_MESSAGE)]},{collectionName:Kw,keyName:Jx,index:[js(ni.CHANNEL_LATEST),js(ni.NEWEST_CHILD_MESSAGE)]},{collectionName:hx,keyName:fx}])];case 1:return[2,u.sent()]}})})},v3:function(){return A(void 0,void 0,void 0,function(){return M(this,function(u){switch(u.label){case 0:return[4,l.commitSchema([{collectionName:vx,keyName:px,index:[oF()]}])];case 1:return[2,u.sent()]}})})},v4:function(){return A(void 0,void 0,void 0,function(){return M(this,function(u){switch(u.label){case 0:return[4,l.commitSchema([{collectionName:jw,keyName:dx,index:[Wx()]}])];case 1:return[2,u.sent()]}})})}}}(e),i=r.v2,a=r.v3,s=r.v4,[4,i()];case 5:return o.sent(),[4,a()];case 6:return o.sent(),[4,s()];case 7:return o.sent(),[4,e.collection(Ug).removeIf({where:{channelType:cn.OPEN}})];case 8:case 9:return o.sent(),[3,10];case 10:return t(),[3,12];case 11:t(),o.label=12;case 12:return[2]}})})}},uF=function(){return typeof document<"u"?document.visibilityState:"visible"},cF=function(e){function n(t){var r=t.getVisibilityState,i=r===void 0?uF:r,a=t.initialState,s=a===void 0?"visible":a,o=t.isEnabled,l=o===void 0||o,u=t.pauseCheckDelay,d=u===void 0?3e4:u,f=e.call(this)||this;return f._pauseCheckDelay=3e4,f._currentState="visible",f._getVisibilityState=i,f._pauseCheckDelay=d,f._currentState=s,f._isEnabled=l,f._boundToggleState=f._toggleState.bind(f),f}return B(n,e),Object.defineProperty(n.prototype,"currentState",{get:function(){return this._currentState},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isAvailable",{get:function(){return typeof window<"u"&&!!window.addEventListener&&!!window.removeEventListener},enumerable:!1,configurable:!0}),n.prototype._toggleState=function(){var t=this,r=this._getVisibilityState();r!=="hidden"?this._currentState==="hidden"&&(this._pauseDelayTimer&&(clearTimeout(this._pauseDelayTimer),this._pauseDelayTimer=void 0),this.dispatch("resume")):this._currentState!=="hidden"&&(this._pauseDelayTimer=setTimeout(function(){t._pauseDelayTimer=void 0,t.dispatch("pause")},this._pauseCheckDelay)),this._currentState=r},n.prototype.start=function(){this._isEnabled&&this.isAvailable&&(this._boundToggleState=this._toggleState.bind(this),window.addEventListener("visibilitychange",this._boundToggleState,{capture:!0}))},n.prototype.stop=function(){this._isEnabled&&this.isAvailable&&this._boundToggleState&&window.removeEventListener("visibilitychange",this._boundToggleState,{capture:!0})},n}(ku),dF=function(){function e(n){var t=n.logger,r=n.connectionDelegate,i=r===void 0?null:r,a=this;this._onlineWorker=function(){var s;return(s=a.connectionDelegate)===null||s===void 0?void 0:s.reconnect()},this._offlineWorker=function(){var s;return(s=a.connectionDelegate)===null||s===void 0?void 0:s.disconnect()},this.unsubscribes=[],this._onlineListener=function(s){if(a.isAvailableOnWeb)return window.addEventListener("online",s),function(){return window.removeEventListener("online",s,!1)}},this._offlineListener=function(s){if(a.isAvailableOnWeb)return window.addEventListener("offline",s),function(){return window.removeEventListener("offline",s,!1)}},this.logger=t,i&&(this.connectionDelegate=i)}return Object.defineProperty(e.prototype,"isAvailableOnWeb",{get:function(){return typeof window<"u"&&!!window.addEventListener&&"ononline"in window&&"onoffline"in window&&typeof navigator<"u"&&navigator.onLine!==void 0},enumerable:!1,configurable:!0}),e.prototype.setOnlineListener=function(n){n&&typeof n=="function"&&(this._onlineListener=n)},e.prototype.setOfflineListener=function(n){n&&typeof n=="function"&&(this._offlineListener=n)},e.prototype.start=function(){this.unsubscribes=[this._onlineListener(this._onlineWorker),this._offlineListener(this._offlineWorker)]},e.prototype.stop=function(){var n=this;this.unsubscribes.forEach(function(t){try{t==null||t()}catch(r){n.logger.warn(r.message)}}),this.unsubscribes=[]},e.prototype.isOnline=function(){return A(this,void 0,void 0,function(){return M(this,function(n){return this.isAvailableOnWeb?[2,navigator.onLine]:[2,new Promise(function(t){fetch("https://www.google.com",{method:we.GET,mode:"no-cors"}).then(function(){return t(!0)}).catch(function(){return t(!1)})})]})})},e}(),QT=function(e){function n(t){var r=t.userId,i=t.nickname,a=t.profileUrl,s=t.profileImage,o=t.preferredLanguages,l=e.call(this)||this;return l.method=we.PUT,l.path="".concat(In,"/").concat(encodeURIComponent(r)),l.params=Xe(_t({nickname:i,profile_url:a,profile_file:s,preferred_languages:o})),l}return B(n,e),n}(Re),YT=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.user=new dn(t,W({},r)),i}return B(n,e),n}(He),hF=function(e){function n(t){var r=t.userId,i=t.token,a=t.deviceOS,s=t.deviceManufacturer,o=t.systemPushEnabled,l=e.call(this)||this;return l.method=we.POST,l.path="".concat(In,"/").concat(encodeURIComponent(r),"/push/apns"),l.params=Xe({apns_device_token:i,always_push:!0,device_os:a,device_manufacturer:s,system_push_enabled:o}),l}return B(n,e),n}(Re);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.token=r.token,i.type=r.type?zr[r.type.toLowerCase()]:zr.UNKNOWN,i.user=new dn(t,r.user),i}B(n,e)})(He);var fF=function(e){function n(t){var r=t.userId,i=t.token,a=t.deviceOS,s=t.deviceManufacturer,o=t.systemPushEnabled,l=e.call(this)||this;return l.method=we.POST,l.path="".concat(In,"/").concat(encodeURIComponent(r),"/push/gcm"),l.params=Xe({gcm_reg_token:i,always_push:!0,device_os:a,device_manufacturer:s,system_push_enabled:o}),l}return B(n,e),n}(Re);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.token=r.token,i.type=r.type?zr[r.type.toLowerCase()]:zr.UNKNOWN,i.user=new dn(t,r.user),i}B(n,e)})(He);var vF=function(e){function n(t){var r=t.userId,i=t.token,a=e.call(this)||this;return a.method=we.DELETE,a.path="".concat(In,"/").concat(encodeURIComponent(r),"/push/apns/").concat(encodeURIComponent(i)),a}return B(n,e),n}(Re);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.token=r.token,i.user=new dn(t,r.user),i.lastDeletedAt=r.device_token_last_deleted_at,i}B(n,e)})(He);var pF=function(e){function n(t){var r=t.userId,i=t.token,a=e.call(this)||this;return a.method=we.DELETE,a.path="".concat(In,"/").concat(encodeURIComponent(r),"/push/gcm/").concat(encodeURIComponent(i)),a}return B(n,e),n}(Re);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.token=r.token,i.user=new dn(t,r.user),i.lastDeletedAt=r.device_token_last_deleted_at,i}B(n,e)})(He);var mF=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=we.DELETE,i.path="".concat(In,"/").concat(encodeURIComponent(r),"/push/apns"),i}return B(n,e),n}(Re);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.type=r.type?zr[r.type.toLowerCase()]:zr.UNKNOWN,i.user=new dn(t,r.user),i.lastDeletedAt=r.device_token_last_deleted_at,i}B(n,e)})(He);var _F=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=we.DELETE,i.path="".concat(In,"/").concat(encodeURIComponent(r),"/push/gcm"),i}return B(n,e),n}(Re);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.type=r.type?zr[r.type.toLowerCase()]:zr.UNKNOWN,i.user=new dn(t,r.user),i.lastDeletedAt=r.device_token_last_deleted_at,i}B(n,e)})(He);var gF=function(e){function n(t){var r=t.userId,i=t.type,a=t.token,s=t.ts,o=e.call(this)||this;return o.method=we.GET,o.path="".concat(In,"/").concat(encodeURIComponent(r),"/push/").concat(encodeURIComponent(i),"/device_tokens"),o.params={created_ts:s,token:a},o}return B(n,e),n}(Re),EF=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.pushTokens={type:r.type?zr[r.type.toLowerCase()]:zr.UNKNOWN,deviceTokens:r.device_tokens,hasMore:r.has_more,token:r.token},i}return B(n,e),n}(He),yF=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=we.GET,i.path="".concat(In,"/").concat(encodeURIComponent(r),"/channel_invitation_preference"),i}return B(n,e),n}(Re),CF=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.autoAccept=r.auto_accept,i}return B(n,e),n}(He),bF=function(e){function n(t){var r=t.userId,i=t.willAutoAccept,a=e.call(this)||this;return a.method=we.PUT,a.path="".concat(In,"/").concat(encodeURIComponent(r),"/channel_invitation_preference"),a.params={auto_accept:i},a}return B(n,e),n}(Re),SF=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.autoAccept=r.auto_accept,i}return B(n,e),n}(He),TF=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=we.GET,i.path="".concat(In,"/").concat(encodeURIComponent(r),"/push_preference"),i}return B(n,e),n}(Re),NF=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.preference={doNotDisturbOn:r.do_not_disturb,startHour:r.start_hour,startMin:r.start_min,endHour:r.end_hour,endMin:r.end_min,timezone:r.timezone},i}return B(n,e),n}(He),IF=function(e){function n(t){var r=t.userId,i=t.doNotDisturbOn,a=t.startHour,s=t.startMin,o=t.endHour,l=t.endMin,u=t.timezone,d=e.call(this)||this;return d.method=we.PUT,d.path="".concat(In,"/").concat(encodeURIComponent(r),"/push_preference"),d.params={do_not_disturb:i,start_hour:a,start_min:s,end_hour:o,end_min:l,timezone:u},d}return B(n,e),n}(Re),MF=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.preference={doNotDisturbOn:r.do_not_disturb,startHour:r.start_hour,startMin:r.start_min,endHour:r.end_hour,endMin:r.end_min,timezone:r.timezone},i}return B(n,e),n}(He),AF=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=we.GET,i.path="".concat(In,"/").concat(encodeURIComponent(r),"/push_preference"),i}return B(n,e),n}(Re),wF=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.snoozePeriod={isSnoozeOn:r.snooze_enabled},typeof r.snooze_start_ts=="number"&&(i.snoozePeriod.startTs=r.snooze_start_ts),typeof r.snooze_end_ts=="number"&&(i.snoozePeriod.endTs=r.snooze_end_ts),i}return B(n,e),n}(He),RF=function(e){function n(t){var r=t.userId,i=t.snoozeOn,a=t.startTs,s=t.endTs,o=e.call(this)||this;return o.method=we.PUT,o.path="".concat(In,"/").concat(encodeURIComponent(r),"/push_preference"),o.params={snooze_enabled:i,snooze_start_ts:a,snooze_end_ts:s},o}return B(n,e),n}(Re),OF=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.snoozePeriod={isSnoozeOn:r.snooze_enabled},typeof r.snooze_start_ts=="number"&&(i.snoozePeriod.startTs=r.snooze_start_ts),typeof r.snooze_end_ts=="number"&&(i.snoozePeriod.endTs=r.snooze_end_ts),i}return B(n,e),n}(He),DF=function(e){function n(t){var r=t.userId,i=t.blockedUserId,a=e.call(this)||this;return a.method=we.POST,a.path="".concat(In,"/").concat(encodeURIComponent(r),"/block"),a.params={target_id:i},a}return B(n,e),n}(Re);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.user=new dn(t,r),i}B(n,e)})(He);var LF=function(e){function n(t){var r=t.userId,i=t.unblockedUserId,a=e.call(this)||this;return a.method=we.DELETE,a.path="".concat(In,"/").concat(encodeURIComponent(r),"/block/").concat(encodeURIComponent(i)),a}return B(n,e),n}(Re);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}B(n,e)})(He);var UF=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=we.GET,i.path="".concat(In,"/").concat(encodeURIComponent(r),"/push_preference"),i}return B(n,e),n}(Re),kF=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.pushTriggerOption=r.push_trigger_option,i}return B(n,e),n}(He),PF=function(e){function n(t){var r=t.userId,i=t.pushTriggerOption,a=e.call(this)||this;return a.method=we.PUT,a.path="".concat(In,"/").concat(encodeURIComponent(r),"/push_preference"),a.params={push_trigger_option:i},a}return B(n,e),n}(Re),xF=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.pushTriggerOption=r.push_trigger_option,i}return B(n,e),n}(He),FF=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=we.GET,i.path="".concat(In,"/").concat(encodeURIComponent(r),"/push/template"),i}return B(n,e),n}(Re),HF=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.name=r.name,i}return B(n,e),n}(He),BF=function(e){function n(t){var r=t.userId,i=t.templateName,a=e.call(this)||this;return a.method=we.PUT,a.path="".concat(In,"/").concat(encodeURIComponent(r),"/push/template"),a.params={name:i},a}return B(n,e),n}(Re),GF=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.name=r.name,i}return B(n,e),n}(He),VF=function(e){function n(t){var r=t.userId,i=t.token,a=e.call(this)||this;return a.method=we.GET,a.path="".concat(In,"/").concat(encodeURIComponent(r),"/friends/changelogs"),a.params={token:i},a}return B(n,e),n}(Re),zF=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.changelogs={addedUsers:r.added.map(function(a){return new dn(t,a)}),updatedUsers:r.updated.map(function(a){return new dn(t,a)}),deletedUserIds:r.deleted,hasMore:r.has_more,token:r.next},i}return B(n,e),n}(He),jF=function(e){function n(t){var r=t.userId,i=t.discoveries,a=e.call(this)||this;return a.method=we.PUT,a.path="".concat(In,"/").concat(encodeURIComponent(r),"/friend_discoveries"),a.params={friend_discoveries:i.map(function(s){return{friend_discovery_key:s.friendDiscoveryKey,friend_name:s.friendName}})},a}return B(n,e),n}(Re),qF=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.friendDiscoveryRequestId=r.friend_discovery_request_id,i}return B(n,e),n}(He),KF=function(e){function n(t){var r=t.userId,i=t.discoveryKeys,a=e.call(this)||this;return a.method=we.DELETE,a.path="".concat(In,"/").concat(encodeURIComponent(r),"/friend_discoveries"),a.params={friend_discovery_keys:i},a}return B(n,e),n}(Re);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}B(n,e)})(He);var $F=function(e){function n(t){var r=t.userId,i=t.userIds,a=e.call(this)||this;return a.method=we.POST,a.path="".concat(In,"/").concat(encodeURIComponent(r),"/friends"),a.params={user_ids:i},a}return B(n,e),n}(Re),WF=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.users=r.users.map(function(a){return new dn(t,a)}),i}return B(n,e),n}(He),QF=function(e){function n(t){var r=t.userId,i=t.userIds,a=e.call(this)||this;return a.method=we.DELETE,a.path="".concat(In,"/").concat(encodeURIComponent(r),"/friends"),a.params={user_ids:i},a}return B(n,e),n}(Re);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}B(n,e)})(He);var YF=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=we.GET,i.path="".concat(In,"/").concat(r,"/allow_friend_discovery"),i.params={},i}return B(n,e),n}(Re),XF=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.allowFriendDiscovery=r.allow_friend_discovery,i}return B(n,e),n}(He),ZF=function(e){function n(t){var r=t.userId,i=t.allowFriendDiscovery,a=e.call(this)||this;return a.method=we.PUT,a.path="".concat(In,"/").concat(r,"/allow_friend_discovery"),a.params={allow_friend_discovery:i},a}return B(n,e),n}(Re);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}B(n,e)})(He);var Fp,JF=function(e){function n(){var t=e.call(this)||this;return t.method=we.GET,t.path=NA,t}return B(n,e),n}(Re),e5=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.emojiContainer=new m2(r),i}return B(n,e),n}(He),t5=function(e){function n(t){var r=t.categoryId,i=e.call(this)||this;return i.method=we.GET,i.path="".concat(NA,"/").concat(r),i}return B(n,e),n}(Re),n5=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.emojiCategory=new p2(r),i}return B(n,e),n}(He),r5=function(e){function n(t){var r=t.key,i=e.call(this)||this;return i.method=we.GET,i.path="".concat(FL,"/").concat(r),i}return B(n,e),n}(Re),i5=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.emoji=new v2(r),i}return B(n,e),n}(He),a5=function(e){function n(){var t=e.call(this)||this;return t.method=we.GET,t.path="".concat(HL),t}return B(n,e),n}(Re),s5=function(e){function n(t,r){var i,a=this,s=r??{};return(a=e.call(this,t,r)||this).uikitConfiguration={string:JSON.stringify(s),json:s},a.updatedAt=(i=r==null?void 0:r.updated_at)!==null&&i!==void 0?i:0,a}return B(n,e),n}(He);(function(e){e.DELIVERED="DELIVERED",e.CLICKED="CLICKED"})(Fp||(Fp={}));var Xd,XT=function(e){function n(t){var r=t.deviceToken,i=t.pushTrackingId,a=t.messageId,s=t.allowedPushNotification,o=t.channelKey,l=t.templateKey,u=t.eventType,d=t.notificationEventDeadline,f=e.call(this)||this;return f.method=we.POST,f.path=VL,f.params=Xe({device_token:r,push_tracking_id:i,message_id:a,allowed_push_notification:s,channel_key:o,template_key:l,event_type:u,notification_event_deadline:d}),f}return B(n,e),n}(Re),o5=function(){function e(n,t,r){var i=this;this._storeInitialized=!1,this._iid=n,this.options=t;var a=Y.of(n),s=a.sdkState,o=a.cacheContext,l=a.dispatcher,u=a.sessionManager,d=a.requestQueue,f=a.logger,p=a.userEventHandlers,m=a.appStateToggleEnabled;this._onlineDetector=new dF({logger:f,connectionDelegate:{reconnect:function(){return A(i,void 0,void 0,function(){var g,y,S,C,T,I;return M(this,function(L){switch(L.label){case 0:if(g=Y.of(n),y=g.sdkState,S=g.connectionManager,(C=g.sessionManager).session.hasSession)return[3,5];L.label=1;case 1:return L.trys.push([1,3,,4]),[4,S.connect(C.session.authToken)];case 2:return L.sent(),[3,4];case 3:if(T=L.sent(),Ai(T))throw T;return f.debug("connect failed by reconnect event = ",T),[3,4];case 4:return[3,9];case 5:if(y.appState!=="foreground")return[3,9];L.label=6;case 6:return L.trys.push([6,8,,9]),[4,S.resetAndReconnect()];case 7:return L.sent(),[3,9];case 8:if(I=L.sent(),Ai(I))throw I;return f.debug("resetAndReconnect failed by reconnect event = ",I),[3,9];case 9:return l.dispatch(new $T),[2]}})})},disconnect:function(){mr(function(){return A(i,void 0,void 0,function(){return M(this,function(g){switch(g.label){case 0:return[4,Y.of(n).connectionManager.disconnect()];case 1:return g.sent(),[2]}})})})}}});var E=new ph(n,{localCacheEnabled:o.localCacheEnabled,enableAutoResend:o.localCacheConfig.enableAutoResend,dispatcher:l,sdkState:s,logger:f});r.forEach(function(g){g.init(n,{sdkState:s,cacheContext:o,dispatcher:l,sessionManager:u,requestQueue:d,logger:f,onlineDetector:i._onlineDetector}),i[g.name]=g}),this._appStateChangeDetector=new cF({isEnabled:m}),this._appStateChangeDetector.on("resume",function(){f.debug("the page resumes from freeze"),i.setForegroundState()}).on("pause",function(){f.debug("the page freezes"),i.setBackgroundState()}),l.on(function(g){var y;if(g instanceof pa)g.stateType===On.CONNECTED&&E.processNonAutoResendRegisteredPendingMessages();else if(g instanceof Wn){if(g.code==="USEV"){var S=g.as(Zw).event;if(S.category===$h.FRIEND_DISCOVERED){var C=kp.getDataAsFriendDiscoveredEvent(n,S).friendDiscoveries;ut(function(){return A(i,void 0,void 0,function(){return M(this,function(D){return[2,p.forEach(function(O){O.onFriendsDiscovered&&O.onFriendsDiscovered(C)})]})})})}}}else if(g instanceof JA){var T=Y.of(i._iid).subscribedUnreadMessageCount,I=!1,L=g.ts;typeof L=="number"&&L>T.ts&&(T.all!==g.all&&(I=!0),T.all=g.all>=0?g.all:0,g.customTypes&&Object.keys(g.customTypes).forEach(function(D){T.customTypes[D]!==g.customTypes[D]&&(I=!0),T.customTypes[D]=g.customTypes[D]}),I=I&&T.ts>0,T.ts=L),I&&ut(function(){return A(i,void 0,void 0,function(){return M(this,function(D){return[2,p.forEach(function(O){O.onTotalUnreadMessageCountChanged&&O.onTotalUnreadMessageCountChanged({groupChannelCount:T.all,feedChannelCount:T.feed,customTypeUnreadCount:T.customTypes}),O.onTotalUnreadMessageCountUpdated&&O.onTotalUnreadMessageCountUpdated(T.all,T.customTypes)})]})})})}else g instanceof nw?(o.preference.set(i._getUserProfileCacheKey(s.userId),Ig.payloadify(g.userProfile)),!((y=g.userProfile.appInfo.notificationInfo)===null||y===void 0)&&y.isEnabled&&o.preference.set(Oy(i.appId),{value:!0})):g instanceof Qc&&g.error&&g.error.isSessionInvalidatedError&&(f.debug("session revoked."),i._internalDisconnect(g.error))})}return e.init=function(n){var t=n.appId,r=n.appVersion,i=n.modules,a=i===void 0?[]:i,s=n.options,o=s===void 0?new bA:s,l=n.debugMode,u=l!==void 0&&l,d=n.customApiHost,f=n.customWebSocketHost,p=n.newInstance,m=p!==void 0&&p,E=n.logLevel,g=n.localCacheEnabled,y=g!==void 0&&g,S=n.localCacheConfig,C=S===void 0?new TA:S,T=n.localCacheEncryption,I=n.useAsyncStorageStore,L=I===void 0?null:I,D=n.useMMKVStorageStore,O=D===void 0?null:D,R=n.appStateToggleEnabled,k=R===void 0||R;if(!Xd||m){var P="su-".concat(Ro()),G=T??{encrypt:function(K){return K},decrypt:function(K){return K}},V=new $x;V.level=E??yo.WARN;var H=new uu({encryption:G});u||(Cg()?O?H=new qx({MMKV:O,encryption:G}):L&&(H=new jx({AsyncStorage:L,encryption:G}),V.warn("AsyncStorage store is deprecated due to the small size limit. Please use MMKVStorage store instead.")):H=new zx({encryption:G})),new Y(P,{appId:t,appVersion:r,options:o,apiHost:d??"https://api-".concat(t,".sendbird.com"),websocketHost:f??"wss://ws-".concat(t,".sendbird.com"),store:H,encryption:G,logger:V,localCacheEnabled:y,localCacheConfig:C,debugMode:u,appStateToggleEnabled:k});var F=[new v4,new sF],z=new e(P,o,At(At([],ft(a),!1),ft(F),!1));return Xd||(Xd=z),z}return Xd},Object.defineProperty(e,"instance",{get:function(){return Xd},enumerable:!1,configurable:!0}),Object.defineProperty(e,"version",{get:function(){return yA},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appId",{get:function(){return Y.of(this._iid).sdkState.appId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appInfo",{get:function(){var n=Y.of(this._iid).appInfo;return n??null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appVersion",{get:function(){var n;return(n=Y.of(this._iid).sdkState.appVersion)!==null&&n!==void 0?n:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"debugMode",{get:function(){return!!Y.of(this._iid).debugMode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logLevel",{get:function(){return Y.of(this._iid).logger.level},set:function(n){Y.of(this._iid).logger.level=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCacheEnabled",{get:function(){return Y.of(this._iid).cacheContext.localCacheEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localCacheConfig",{get:function(){var n=Y.of(this._iid).cacheContext;return n.localCacheEnabled?n.localCacheConfig:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ekey",{get:function(){return Y.of(this._iid).sessionManager.ekey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentUser",{get:function(){var n;return(n=Y.of(this._iid).sessionManager.currentUser)!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connectionState",{get:function(){var n=Y.of(this._iid).connectionManager;return n.isConnected?Vs.OPEN:n.isConnecting?Vs.CONNECTING:Vs.CLOSED},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastConnectedAt",{get:function(){var n=Y.of(this._iid),t=n.connectedAt;return n.connectionManager.isConnected?t:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fcmPushToken",{get:function(){var n;return(n=this._fcmPushToken)!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"apnsPushToken",{get:function(){var n;return(n=this._apnsPushToken)!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),e.prototype._getNestDBVersion=function(){return 7},e.prototype._getPreferenceVersion=function(){return 8},e.prototype._getPreferenceCacheKey=function(n){return"sendbird@".concat(this.appId,"/").concat(n,".pref")},e.prototype._getUserProfileCacheKey=function(n){return"sendbird@".concat(this.appId,"/").concat(n,".profile")},e.prototype._internalDisconnect=function(n){return A(this,void 0,void 0,function(){var t,r,i,a;return M(this,function(s){switch(s.label){case 0:return t=Y.of(this._iid),r=t.connectionManager,i=t.sdkState,a=t.requestQueue,this._appStateChangeDetector.stop(),this._onlineDetector.stop(),a.cancelAll(),[4,r.logout(n)];case 1:return s.sent(),[4,this.clearCachedData()];case 2:return s.sent(),i.appState="foreground",[2]}})})},e.prototype.getMemoryStoreForDebugging=function(){var n=Y.of(this._iid),t=n.debugMode,r=n.cacheContext;if(t)return r.store instanceof uu?r.store:null;throw J.debugModeRequired},e.prototype.addExtension=function(n,t){var r=Y.of(this._iid).sdkState;["sb_uikit","sb_syncmanager","device-os-platform"].indexOf(n)>-1&&r.extensions&&(r.extensions[n]=t)},e.prototype.addSendbirdExtensions=function(n,t,r){var i,a,s=Y.of(this._iid),o=s.logger,l=s.sdkState,u=new RegExp(QL);if(n.length===0)return o.debug("sb.addSendbirdExtensions() has failed because the given sendbirdExtensions is empty."),!1;if(n.find(function(g){return!u.test(g.version)}))return o.debug("sb.addSendbirdExtensions() has failed because the given version did not satisfy the SemVer specification."),!1;if(r)try{for(var d=je(Object.entries(r)),f=d.next();!f.done;f=d.next()){var p=ft(f.value,2),m=p[0],E=p[1];if(/&|=/.test(m)||/&|=/.test(E))return o.debug("sb.addSendbirdExtensions() has failed because the given customData includes at least one invalid character: = or &."),!1}}catch(g){i={error:g}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}return l.sendbirdRuntimeEnvironment={sendbirdExtensions:n,deviceOS:t,customData:r},!0},e.prototype.setOnlineListener=function(n){this._onlineDetector.setOnlineListener(n)},e.prototype.setOfflineListener=function(n){this._onlineDetector.setOfflineListener(n)},e.prototype._safeInitializeStore=function(n){return A(this,void 0,void 0,function(){var t;return M(this,function(r){switch(r.label){case 0:t=Y.of(this._iid).cacheContext,r.label=1;case 1:return r.trys.push([1,3,,5]),[4,t.store.init(n)];case 2:return r.sent(),this._storeInitialized=!0,[3,5];case 3:return r.sent(),t.replaceStore(new uu),[4,this._safeInitializeStore(n)];case 4:return r.sent(),[3,5];case 5:return[2]}})})},e.prototype.setLocaleForChatbot=function(n){var t=Y.of(this._iid).sdkState,r=function(i){return i.replace(/[^a-zA-Z-_.]/g,"")}(n.trim());r&&(t.localeForChatbot=r)},e.prototype.initializeCache=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,d;return M(this,function(f){switch(f.label){case 0:if(t=Y.of(this._iid),r=t.sdkState,i=t.cacheContext,a=t.dispatcher,s=t.logger,r.userId&&r.userId===n)return[3,13];o="sendbird@".concat(r.appId,"/").concat(n,".db"),f.label=1;case 1:return f.trys.push([1,9,11,13]),i.localCacheEnabled?i.nestdb&&i.nestdb.state!==Hs.CLOSED&&i.nestdb.name===o?[3,3]:(l="sendbird@".concat(r.appId,"/").concat(n,".db"),(u=i.nestdb=new Kx({name:l,version:this._getNestDBVersion(),store:i.store,config:new lf({dbname:l,itemSizeLimit:61440})})).on("upgrade",WT(u)),u.on("storeReplaced",function(p){i.replaceStore(p),i.localCacheEnabled=!1,u.on("upgrade",WT(u))}),[4,u.open()]):[3,6];case 2:return f.sent(),this._storeInitialized=!0,a.dispatch(new Yw(this._iid,{userId:n})),[3,5];case 3:return[4,this._safeInitializeStore(o)];case 4:f.sent(),f.label=5;case 5:return r.userId=n,[3,8];case 6:return[4,this._safeInitializeStore(o)];case 7:f.sent(),r.userId=n,f.label=8;case 8:return[3,13];case 9:return d=f.sent(),s.warn("Nest DB Open Failed. ",d),i.store instanceof uu||(i.replaceStore(new uu),i.localCacheEnabled=!1),[4,this._safeInitializeStore(o)];case 10:throw f.sent(),r.userId=n,J.databaseError;case 11:return[4,this._setupPreference(n)];case 12:return f.sent(),[7];case 13:return[2]}})})},e.prototype.getCacheDataSize=function(){return A(this,void 0,void 0,function(){var n;return M(this,function(t){switch(t.label){case 0:return(n=Y.of(this._iid).cacheContext).localCacheEnabled&&n.nestdb?[4,n.nestdb.estimateUsage()]:[3,2];case 1:return[2,t.sent()];case 2:return[2,0]}})})},e.prototype.clearCachedData=function(){return A(this,void 0,void 0,function(){var n;return M(this,function(t){switch(t.label){case 0:return(n=Y.of(this._iid).cacheContext).localCacheEnabled&&n.nestdb?[4,n.nestdb.clear()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this._storeInitialized?[4,n.preference.clear()]:[3,4];case 3:t.sent(),t.label=4;case 4:return[2]}})})},e.prototype.clearCachedMessages=function(n){return A(this,void 0,void 0,function(){var t,r,i=this;return M(this,function(a){switch(a.label){case 0:return ke(nn("string",n)).throw(J.invalidParameters),t=jc.of(this._iid),r=Ou.of(this._iid),t&&r?[4,Promise.all(n.map(function(s){return A(i,void 0,void 0,function(){return M(this,function(o){switch(o.label){case 0:return[4,t.removeMessagesOfChannel(s)];case 1:return o.sent(),[4,r.removeMessagesOfChannel(s)];case 2:return o.sent(),[2]}})})}))]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},e.prototype._setupPreference=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s;return M(this,function(o){switch(o.label){case 0:return t=Y.of(this._iid),r=t.sdkState,i=t.cacheContext,a=t.statManager,[4,i.preference.init(this._getPreferenceCacheKey(n),this._getPreferenceVersion())];case 1:return o.sent(),[4,i.preference.get(this._getUserProfileCacheKey(n))];case 2:return(s=o.sent())&&new Ig(this._iid,s).apply(),[4,a.init("sendbird@".concat(r.appId,"/").concat(n,".statlog"))];case 3:return o.sent(),[2]}})})},e.prototype._ready=function(n,t,r){return r===void 0&&(r={}),A(this,void 0,void 0,function(){var i,a,s,o,l,u;return M(this,function(d){switch(d.label){case 0:return ke(X("string",n)&&X("string",t,!0)).throw(J.invalidParameters),i=Y.of(this._iid),a=i.sdkState,s=i.cacheContext,o=i.connectionManager,l=r.errorForOtherUser,a.userId&&a.userId!==n?l?[3,2]:[4,o.logout()]:[3,3];case 1:return d.sent(),[3,3];case 2:throw l;case 3:return d.trys.push([3,5,,6]),[4,this.initializeCache(n)];case 4:return d.sent(),Y.of(this._iid).dispatcher.dispatch(new Xw),[3,6];case 5:return d.sent(),u=Y.of(this._iid).logger,s.localCacheEnabled=!1,u.warn("Cache initialization failed - cache is not available."),[3,6];case 6:return[2]}})})},e.prototype.authenticateFeed=function(n,t){return A(this,void 0,void 0,function(){return M(this,function(r){switch(r.label){case 0:return[4,this.authenticate(n,t)];case 1:return[2,r.sent()]}})})},e.prototype.authenticate=function(n,t){var r;return A(this,void 0,void 0,function(){var i,a,s;return M(this,function(o){switch(o.label){case 0:return i=Y.of(this._iid),a=i.sessionManager,s=i.connectionManager,[4,this._ready(n,t,{errorForOtherUser:s.isConnected?J.alreadyConnectedAsAnotherUser:void 0})];case 1:return o.sent(),!((r=a.session.services)===null||r===void 0)&&r.includes(_p.CHAT)?[3,3]:(t||a.handler||this.setSessionHandler(new RT),[4,a.authenticate(n,t)]);case 2:o.sent(),o.label=3;case 3:return[2,this.currentUser]}})})},e.prototype.connect=function(n,t){return A(this,void 0,void 0,function(){return M(this,function(r){switch(r.label){case 0:return[4,this._ready(n,t)];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,,4,5]),[4,Y.of(this._iid).connectionManager.connect(t)];case 3:return r.sent(),[3,5];case 4:return this._onlineDetector.start(),this._appStateChangeDetector.start(),[7];case 5:return[2,this.currentUser]}})})},e.prototype.reconnect=function(){var n=Y.of(this._iid),t=n.connectionManager,r=n.sdkState,i=n.sessionManager.session.hasSession;return i&&(this._appStateChangeDetector.start(),this._onlineDetector.start(),t.resetAndReconnect().then(function(){r.appState="foreground"}).catch(function(){})),i},e.prototype.disconnect=function(){return A(this,void 0,void 0,function(){return M(this,function(n){switch(n.label){case 0:return[4,this._internalDisconnect()];case 1:return n.sent(),[2]}})})},e.prototype.disconnectWebSocket=function(){return A(this,void 0,void 0,function(){var n,t,r;return M(this,function(i){switch(i.label){case 0:return n=Y.of(this._iid),t=n.connectionManager,r=n.requestQueue,this._appStateChangeDetector.stop(),this._onlineDetector.stop(),r.cancelAll(),[4,t.disconnectWebSocket(!0)];case 1:return i.sent(),[2]}})})},e.prototype.setBackgroundState=function(){var n=Y.of(this._iid),t=n.connectionManager,r=n.sdkState,i=n.logger;r.appState==="foreground"&&(r.appState="background",i.debug("going background state"),t.background().catch(function(a){i.debug("setBackgroundState error = ",a)}))},e.prototype.setForegroundState=function(){var n=Y.of(this._iid),t=n.connectionManager,r=n.sdkState,i=n.dispatcher,a=n.logger;r.appState==="background"&&(r.appState="foreground",a.debug("going foreground state"),t.resetAndReconnect().catch(function(s){a.debug("setForgroundState error = ",s)}),i.dispatch(new $T))},e.prototype.setSessionHandler=function(n){ke(n instanceof RT).throw(J.invalidParameters),Y.of(this._iid).sessionManager.handler=n},e.prototype.addUserEventHandler=function(n,t){ke(X("string",n)&&t instanceof Ix).throw(J.invalidParameters),Y.of(this._iid).userEventHandlers.set(n,t)},e.prototype.removeUserEventHandler=function(n){Y.of(this._iid).userEventHandlers.delete(n)},e.prototype.removeAllUserEventHandler=function(){Y.of(this._iid).userEventHandlers.clear()},e.prototype.addConnectionHandler=function(n,t){ke(X("string",n)&&t instanceof qw).throw(J.invalidParameters),Y.of(this._iid).connectionHandlers.set(n,t)},e.prototype.removeConnectionHandler=function(n){Y.of(this._iid).connectionHandlers.delete(n)},e.prototype.removeAllConnectionHandler=function(){Y.of(this._iid).connectionHandlers.clear()},e.prototype.createApplicationUserListQuery=function(n){return n===void 0&&(n={}),new wx(this._iid,n)},e.prototype.createBlockedUserListQuery=function(n){return n===void 0&&(n={}),new Dx(this._iid,n)},e.prototype.createFriendListQuery=function(n){return n===void 0&&(n={}),new kx(this._iid,n)},e.prototype.createMessageSearchQuery=function(n){return new l4(this._iid,n)},e.prototype.createPollListQuery=function(n){return new Ew(this._iid,W({},n))},e.prototype.createPollVoterListQuery=function(n){return new yw(this._iid,W({},n))},e.prototype.buildUserFromSerializedData=function(n){var t=Tl(n);return new dn(this._iid,dn.payloadify(t))},e.prototype.updateCurrentUserInfo=function(n){return n===void 0&&(n={}),A(this,void 0,void 0,function(){var t,r,i,a,s,o,l;return M(this,function(u){switch(u.label){case 0:return t=W(W({},lF),n),ke(function(d){return jr(d.profileImage,!0)&&X("string",d.profileUrl,!0)&&X("string",d.nickname,!0)}(t)).throw(J.invalidParameters),this.currentUser?(r=Y.of(this._iid),i=r.sdkState,a=r.requestQueue,s=new QT(W({userId:i.userId},t)),[4,a.send(s)]):[3,2];case 1:return o=u.sent(),l=o.as(YT).user,this.currentUser&&(t.nickname&&(this.currentUser.nickname=l.nickname),(t.profileUrl||t.profileImage)&&(this.currentUser.plainProfileUrl=l.profileUrl)),[2,l];case 2:throw J.connectionRequired}})})},e.prototype.updateCurrentUserInfoWithPreferredLanguages=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return M(this,function(l){switch(l.label){case 0:return ke(nn("string",n)).throw(J.invalidParameters),this.currentUser?(t=Y.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new QT({userId:r.userId,preferredLanguages:n}),[4,i.send(a)]):[3,2];case 1:return s=l.sent(),o=s.as(YT).user,this.currentUser&&(this.currentUser.preferredLanguages=o.preferredLanguages),[2,o];case 2:throw J.connectionRequired}})})},e.prototype.registerFCMPushTokenForCurrentUser=function(n,t){var r,i;return A(this,void 0,void 0,function(){var a,s,o,l,u,d,f=this;return M(this,function(p){switch(p.label){case 0:if(ke(X("string",n)&&X("string",t==null?void 0:t.deviceManufacturer,!0)).throw(J.invalidParameters),t!=null&&t.deviceOS&&ke(tn(ml,t.deviceOS.platform,!0)&&X("string",t.deviceOS.version,!0)).throw(J.invalidParameters),!this.currentUser)return[3,6];a={deviceOS:"".concat(((r=t==null?void 0:t.deviceOS)===null||r===void 0?void 0:r.platform)||ml.ANDROID,"-").concat(((i=t==null?void 0:t.deviceOS)===null||i===void 0?void 0:i.version)||"unknown"),deviceManufacturer:t==null?void 0:t.deviceManufacturer,systemPushEnabled:t==null?void 0:t.systemPushEnabled},p.label=1;case 1:return p.trys.push([1,4,,5]),s=Y.of(this._iid),o=s.sessionManager,l=s.sdkState,u=s.requestQueue,o.hasDeviceToken(zr.FCM,n)?[2,Hi.SUCCESS]:(d=new fF({userId:l.userId,token:n,deviceOS:a.deviceOS,deviceManufacturer:a.deviceManufacturer,systemPushEnabled:a.systemPushEnabled}),[4,u.send(d)]);case 2:return p.sent(),[4,mr(function(){return A(f,void 0,void 0,function(){return M(this,function(m){switch(m.label){case 0:return o.setDeviceToken(zr.FCM,n,a),[4,o.saveDeviceToken()];case 1:return m.sent(),[2]}})})})];case 3:return p.sent(),this._fcmPushToken="",[2,Hi.SUCCESS];case 4:return p.sent(),[2,Hi.ERROR];case 5:return[3,7];case 6:return this._fcmPushToken=n,[2,Hi.PENDING];case 7:return[2]}})})},e.prototype.unregisterFCMPushTokenForCurrentUser=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l=this;return M(this,function(u){switch(u.label){case 0:if(ke(X("string",n)).throw(J.invalidParameters),!this.currentUser)return[3,6];u.label=1;case 1:return u.trys.push([1,4,,5]),t=Y.of(this._iid),r=t.sessionManager,i=t.sdkState,a=t.requestQueue,s=new pF({userId:i.userId,token:n}),[4,a.send(s)];case 2:return o=u.sent().lastDeletedAt,[4,mr(function(){return A(l,void 0,void 0,function(){return M(this,function(d){switch(d.label){case 0:return r.unsetDeviceToken(zr.FCM,n),r.setDeviceTokenDeletedAt(o),[4,r.saveDeviceToken()];case 1:return d.sent(),[2]}})})})];case 3:return u.sent(),this._fcmPushToken="",[2,Hi.SUCCESS];case 4:return u.sent(),[2,Hi.ERROR];case 5:return[3,7];case 6:return this._fcmPushToken=n,[2,Hi.PENDING];case 7:return[2]}})})},e.prototype.unregisterFCMPushTokenAllForCurrentUser=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a,s,o=this;return M(this,function(l){switch(l.label){case 0:return this.currentUser?(n=Y.of(this._iid),t=n.sessionManager,r=n.sdkState,i=n.requestQueue,a=new _F({userId:r.userId}),[4,i.send(a)]):[3,3];case 1:return s=l.sent().lastDeletedAt,[4,mr(function(){return A(o,void 0,void 0,function(){return M(this,function(u){switch(u.label){case 0:return t.unsetDeviceTokens(zr.FCM),t.setDeviceTokenDeletedAt(s),[4,t.saveDeviceToken()];case 1:return u.sent(),[2]}})})})];case 2:l.sent(),l.label=3;case 3:return[2]}})})},e.prototype.registerAPNSPushTokenForCurrentUser=function(n,t){var r,i;return A(this,void 0,void 0,function(){var a,s,o,l,u,d,f=this;return M(this,function(p){switch(p.label){case 0:if(ke(X("string",n)&&X("string",t==null?void 0:t.deviceManufacturer,!0)).throw(J.invalidParameters),t!=null&&t.deviceOS&&ke(tn(ml,t.deviceOS.platform,!0)&&X("string",t.deviceOS.version,!0)).throw(J.invalidParameters),!this.currentUser)return[3,6];a={deviceOS:"".concat(((r=t==null?void 0:t.deviceOS)===null||r===void 0?void 0:r.platform)||ml.IOS,"-").concat(((i=t==null?void 0:t.deviceOS)===null||i===void 0?void 0:i.version)||"unknown"),deviceManufacturer:t==null?void 0:t.deviceManufacturer,systemPushEnabled:t==null?void 0:t.systemPushEnabled},p.label=1;case 1:return p.trys.push([1,4,,5]),s=Y.of(this._iid),o=s.sessionManager,l=s.sdkState,u=s.requestQueue,o.hasDeviceToken(zr.APNS,n)?[2,Hi.SUCCESS]:(d=new hF({userId:l.userId,token:n,deviceOS:a.deviceOS,deviceManufacturer:a.deviceManufacturer,systemPushEnabled:a.systemPushEnabled}),[4,u.send(d)]);case 2:return p.sent(),[4,mr(function(){return A(f,void 0,void 0,function(){return M(this,function(m){switch(m.label){case 0:return o.setDeviceToken(zr.APNS,n,a),[4,o.saveDeviceToken()];case 1:return m.sent(),[2]}})})})];case 3:return p.sent(),this._apnsPushToken="",[2,Hi.SUCCESS];case 4:return p.sent(),[2,Hi.ERROR];case 5:return[3,7];case 6:return this._apnsPushToken=n,[2,Hi.PENDING];case 7:return[2]}})})},e.prototype.unregisterAPNSPushTokenForCurrentUser=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l=this;return M(this,function(u){switch(u.label){case 0:if(ke(X("string",n)).throw(J.invalidParameters),!this.currentUser)return[3,6];u.label=1;case 1:return u.trys.push([1,4,,5]),t=Y.of(this._iid),r=t.sessionManager,i=t.sdkState,a=t.requestQueue,s=new vF({userId:i.userId,token:n}),[4,a.send(s)];case 2:return o=u.sent().lastDeletedAt,[4,mr(function(){return A(l,void 0,void 0,function(){return M(this,function(d){switch(d.label){case 0:return r.unsetDeviceToken(zr.APNS,n),r.setDeviceTokenDeletedAt(o),[4,r.saveDeviceToken()];case 1:return d.sent(),[2]}})})})];case 3:return u.sent(),this._apnsPushToken="",[2,Hi.SUCCESS];case 4:return u.sent(),[2,Hi.ERROR];case 5:return[3,7];case 6:return this._apnsPushToken=n,[2,Hi.PENDING];case 7:return[2]}})})},e.prototype.unregisterAPNSPushTokenAllForCurrentUser=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a,s,o=this;return M(this,function(l){switch(l.label){case 0:return this.currentUser?(n=Y.of(this._iid),t=n.sessionManager,r=n.sdkState,i=n.requestQueue,a=new mF({userId:r.userId}),[4,i.send(a)]):[3,3];case 1:return s=l.sent().lastDeletedAt,[4,mr(function(){return A(o,void 0,void 0,function(){return M(this,function(u){switch(u.label){case 0:return t.unsetDeviceTokens(zr.APNS),t.setDeviceTokenDeletedAt(s),[4,t.saveDeviceToken()];case 1:return u.sent(),[2]}})})})];case 2:l.sent(),l.label=3;case 3:return[2]}})})},e.prototype.markPushNotificationAsDelivered=function(n,t){var r;return t===void 0&&(t=!0),A(this,void 0,void 0,function(){var i,a,s,o,l,u,d,f,p,m,E,g,y,S,C,T,I,L,D;return M(this,function(O){switch(O.label){case 0:if(i=Y.of(this._iid),a=i.logger,s=i.sessionManager,o=i.requestQueue,l=i.pushNotificationAckManager,a.debug("markPushNotificationAsDelivered:",n),u=Fp.DELIVERED,d=l.parseData(n),f=d.pushTrackingId,p=d.sessionTopics,m=d.sessionKey,E=d.messageId,g=d.channelKey,y=d.templateKey,S=d.notificationEventDeadline,!m||!p.includes(Np.PUSH_ACKNOWLEDGEMENT))throw a.info("Can't use markPushNotificationAsDelivered() feature."),J.malformedDataError;if(l.isAcked(f,u))return a.info("already delivered push notification:",f),[2];C=!!g,T=t&&C,I=(r=s.deviceTokens[0])===null||r===void 0?void 0:r.token,L=new XT({deviceToken:I??"",pushTrackingId:f,eventType:u,messageId:E,channelKey:g,templateKey:y,notificationEventDeadline:S,allowedPushNotification:T}),m&&(L.headers["Session-Key"]=m),O.label=1;case 1:return O.trys.push([1,3,,4]),[4,o.send(L)];case 2:return O.sent(),l.markAsAcked(f,u),[3,4];case 3:throw D=O.sent(),a.debug("failed to mark push notification as delivered. push tracking id: ".concat(f,". error: ").concat(D)),D;case 4:return[2]}})})},e.prototype.markPushNotificationAsClicked=function(n){var t;return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u,d,f,p,m,E,g,y,S,C,T;return M(this,function(I){switch(I.label){case 0:if(r=Y.of(this._iid),i=r.logger,a=r.sessionManager,s=r.requestQueue,o=r.pushNotificationAckManager,i.debug("markPushNotificationAsClicked:",n),l=Fp.CLICKED,u=o.parseData(n),d=u.pushTrackingId,f=u.sessionTopics,p=u.sessionKey,m=u.messageId,E=u.channelKey,g=u.templateKey,y=u.notificationEventDeadline,!p||!f.includes(Np.PUSH_ACKNOWLEDGEMENT))throw i.info("Can't use markPushNotificationAsClicked() feature."),J.malformedDataError;if(o.isAcked(d,l))return i.info("already clicked push notification:",d),[2];S=(t=a.deviceTokens[0])===null||t===void 0?void 0:t.token,C=new XT({deviceToken:S??"",pushTrackingId:d,eventType:l,messageId:m,channelKey:E,templateKey:g,notificationEventDeadline:y}),p&&(C.headers["Session-Key"]=p),I.label=1;case 1:return I.trys.push([1,3,,4]),[4,s.send(C)];case 2:return I.sent(),o.markAsAcked(d,l),[3,4];case 3:throw T=I.sent(),i.debug("failed to mark push notification as clicked. push tracking id: ".concat(d,". error: ").concat(T)),T;case 4:return[2]}})})},e.prototype.getChannelInvitationPreference=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a;return M(this,function(s){switch(s.label){case 0:return n=Y.of(this._iid),t=n.sdkState,r=n.requestQueue,i=new yF({userId:t.userId}),[4,r.send(i)];case 1:return a=s.sent(),[2,{autoAccept:a.as(CF).autoAccept}]}})})},e.prototype.setChannelInvitationPreference=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s;return M(this,function(o){switch(o.label){case 0:return ke(X("boolean",n)).throw(J.invalidParameters),t=Y.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new bF({userId:r.userId,willAutoAccept:n}),[4,i.send(a)];case 1:return s=o.sent(),[2,{autoAccept:s.as(SF).autoAccept}]}})})},e.prototype.getDoNotDisturb=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a;return M(this,function(s){switch(s.label){case 0:return n=Y.of(this._iid),t=n.sdkState,r=n.requestQueue,i=new TF({userId:t.userId}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(NF).preference]}})})},e.prototype.setDoNotDisturb=function(n,t,r,i,a,s){return t===void 0&&(t=0),r===void 0&&(r=0),i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=""),A(this,void 0,void 0,function(){var o,l,u,d,f;return M(this,function(p){switch(p.label){case 0:return ke(X("boolean",n)&&X("number",t)&&X("number",r)&&X("number",i)&&X("number",a)&&X("string",s)).throw(J.invalidParameters),o=Y.of(this._iid),l=o.sdkState,u=o.requestQueue,d=new IF({userId:l.userId,doNotDisturbOn:n,startHour:t,startMin:r,endHour:i,endMin:a,timezone:s}),[4,u.send(d)];case 1:return f=p.sent(),[2,f.as(MF).preference]}})})},e.prototype.getSnoozePeriod=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a;return M(this,function(s){switch(s.label){case 0:return n=Y.of(this._iid),t=n.sdkState,r=n.requestQueue,i=new AF({userId:t.userId}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(wF).snoozePeriod]}})})},e.prototype.setSnoozePeriod=function(n,t,r){return t===void 0&&(t=0),r===void 0&&(r=0),A(this,void 0,void 0,function(){var i,a,s,o,l;return M(this,function(u){switch(u.label){case 0:return ke(X("boolean",n)&&X("number",t)&&X("number",r)).throw(J.invalidParameters),i=Y.of(this._iid),a=i.sdkState,s=i.requestQueue,o=new RF({userId:a.userId,snoozeOn:n,startTs:t,endTs:r}),[4,s.send(o)];case 1:return l=u.sent(),[2,l.as(OF).snoozePeriod]}})})},e.prototype.getMyPushTokensByToken=function(n,t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u,d,f,p,m,E;return M(this,function(g){switch(g.label){case 0:return ke(X("string",n)&&tn(zr,t)).throw(J.invalidParameters),r=Y.of(this._iid),i=r.sdkState,a=r.requestQueue,s=r.sessionManager,o=new gF({userId:i.userId,type:t,token:n}),[4,a.send(o)];case 1:l=g.sent(),u=l.as(EF).pushTokens;try{for(d=je(u.deviceTokens),f=d.next();!f.done;f=d.next())p=f.value,s.setDeviceToken(u.type,p)}catch(y){m={error:y}}finally{try{f&&!f.done&&(E=d.return)&&E.call(d)}finally{if(m)throw m.error}}return[4,s.saveDeviceToken()];case 2:return g.sent(),[2,u]}})})},e.prototype.getPushTriggerOption=function(){return A(this,void 0,void 0,function(){var n,t,r,i;return M(this,function(a){switch(a.label){case 0:return n=Y.of(this._iid),t=n.sdkState,r=n.requestQueue,i=new UF({userId:t.userId}),[4,r.send(i)];case 1:return[2,a.sent().as(kF).pushTriggerOption]}})})},e.prototype.setPushTriggerOption=function(n){return A(this,void 0,void 0,function(){var t,r,i,a;return M(this,function(s){switch(s.label){case 0:return ke(tn(vu,n)).throw(J.invalidParameters),t=Y.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new PF({userId:r.userId,pushTriggerOption:n}),[4,i.send(a)];case 1:return[2,s.sent().as(xF).pushTriggerOption]}})})},e.prototype.getPushTemplate=function(){return A(this,void 0,void 0,function(){var n,t,r,i;return M(this,function(a){switch(a.label){case 0:return n=Y.of(this._iid),t=n.sdkState,r=n.requestQueue,i=new FF({userId:t.userId}),[4,r.send(i)];case 1:return[2,a.sent().as(HF).name]}})})},e.prototype.setPushTemplate=function(n){return A(this,void 0,void 0,function(){var t,r,i,a;return M(this,function(s){switch(s.label){case 0:return ke(tn(mg,n)).throw(J.invalidParameters),t=Y.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new BF({userId:r.userId,templateName:n}),[4,i.send(a)];case 1:return[2,s.sent().as(GF).name]}})})},e.prototype.blockUser=function(n){return A(this,void 0,void 0,function(){var t,r,i,a;return M(this,function(s){switch(s.label){case 0:return ke(n instanceof dn||X("string",n)).throw(J.invalidParameters),t=Y.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new DF({userId:r.userId,blockedUserId:n instanceof dn?n.userId:n}),[4,i.send(a)];case 1:return s.sent(),[2]}})})},e.prototype.blockUserWithUserId=function(n){return A(this,void 0,void 0,function(){return M(this,function(t){return[2,this.blockUser(n)]})})},e.prototype.unblockUser=function(n){return A(this,void 0,void 0,function(){var t,r,i,a;return M(this,function(s){switch(s.label){case 0:return ke(n instanceof dn||X("string",n)).throw(J.invalidParameters),t=Y.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new LF({userId:r.userId,unblockedUserId:n instanceof dn?n.userId:n}),[4,i.send(a)];case 1:return s.sent(),[2]}})})},e.prototype.unblockUserWithUserId=function(n){return A(this,void 0,void 0,function(){return M(this,function(t){return[2,this.unblockUser(n)]})})},e.prototype.getFriendChangeLogsByToken=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s;return M(this,function(o){switch(o.label){case 0:return ke(X("string",n)).throw(J.invalidParameters),t=Y.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new VF({userId:r.userId,token:n}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(zF).changelogs]}})})},e.prototype.getAllowFriendDiscovery=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a;return M(this,function(s){switch(s.label){case 0:return n=Y.of(this._iid),t=n.sdkState,r=n.requestQueue,i=new YF({userId:t.userId}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(XF).allowFriendDiscovery]}})})},e.prototype.setAllowFriendDiscovery=function(n){return A(this,void 0,void 0,function(){var t,r,i,a;return M(this,function(s){switch(s.label){case 0:return ke(X("boolean",n)).throw(J.invalidParameters),t=Y.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new ZF({userId:r.userId,allowFriendDiscovery:n}),[4,i.send(a)];case 1:return s.sent(),[2,n]}})})},e.prototype.uploadFriendDiscoveries=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s;return M(this,function(o){switch(o.label){case 0:return t=Y.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new jF({userId:r.userId,discoveries:n}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(qF).friendDiscoveryRequestId]}})})},e.prototype.deleteFriendDiscovery=function(n){return A(this,void 0,void 0,function(){return M(this,function(t){return[2,this.deleteFriendDiscoveries([n])]})})},e.prototype.deleteFriendDiscoveries=function(n){return A(this,void 0,void 0,function(){var t,r,i,a;return M(this,function(s){switch(s.label){case 0:return ke(nn("string",n)).throw(J.invalidParameters),t=Y.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new KF({userId:r.userId,discoveryKeys:n}),[4,i.send(a)];case 1:return s.sent(),[2]}})})},e.prototype.addFriends=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s;return M(this,function(o){switch(o.label){case 0:return ke(nn("string",n)).throw(J.invalidParameters),t=Y.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new $F({userId:r.userId,userIds:n}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(WF).users]}})})},e.prototype.deleteFriend=function(n){return A(this,void 0,void 0,function(){return M(this,function(t){return[2,this.deleteFriends([n])]})})},e.prototype.deleteFriends=function(n){return A(this,void 0,void 0,function(){var t,r,i,a;return M(this,function(s){switch(s.label){case 0:return ke(nn("string",n)).throw(J.invalidParameters),t=Y.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new QF({userId:r.userId,userIds:n}),[4,i.send(a)];case 1:return s.sent(),[2]}})})},e.prototype.getAllEmoji=function(){return A(this,void 0,void 0,function(){var n,t,r;return M(this,function(i){switch(i.label){case 0:return n=Y.of(this._iid).requestQueue,t=new JF,[4,n.send(t)];case 1:return r=i.sent(),[2,r.as(e5).emojiContainer]}})})},e.prototype.getEmojiCategory=function(n){return A(this,void 0,void 0,function(){var t,r,i;return M(this,function(a){switch(a.label){case 0:return t=Y.of(this._iid).requestQueue,r=new t5({categoryId:n}),[4,t.send(r)];case 1:return i=a.sent(),[2,i.as(n5).emojiCategory]}})})},e.prototype.getEmoji=function(n){return A(this,void 0,void 0,function(){var t,r,i;return M(this,function(a){switch(a.label){case 0:return t=Y.of(this._iid).requestQueue,r=new r5({key:n}),[4,t.send(r)];case 1:return i=a.sent(),[2,i.as(i5).emoji]}})})},e.prototype.getUIKitConfiguration=function(){return A(this,void 0,void 0,function(){var n,t,r,i;return M(this,function(a){switch(a.label){case 0:return n=Y.of(this._iid),ke(n.hasExtension("sb_uikit")).throw(J.notSupportedError),t=n.requestQueue,r=new a5,[4,t.send(r)];case 1:return i=a.sent(),[2,i.as(s5).uikitConfiguration]}})})},e.prototype.getReportCategoryInfoList=function(){return A(this,void 0,void 0,function(){return M(this,function(n){switch(n.label){case 0:return[4,Y.of(this._iid).reportCategoryManager.categories()];case 1:return[2,n.sent()]}})})},e}();function l5(e,n){return!e||!n?!0:e.url!==n.url}function Za(e){return e!=null&&"sendingStatus"in e}function _2(e,n="##__USER_ID_IS_NOT_PROVIDED__##"){var t;return Za(e)?((t=e.sender)===null||t===void 0?void 0:t.userId)===n:!1}function u5(e,n){return _2(e,n)||e.isAdminMessage()?!1:e.updatedAt===0}function ZT(e){return"sendingStatus"in e?e.sendingStatus==="succeeded"?String(e.messageId):e.reqId:String(e.messageId)}function Tn(e){return typeof e=="boolean"}function Ic(e,n){return n.includes(e)}function c5(e){return e instanceof Set}function JT(e){return!e||!Array.isArray(e)?!1:e.length!==0}function d5(e,n){return Object.prototype.toString.call(e)===Object.prototype.toString.call(n)}const h5=()=>{const[,e]=N.useState(0);return N.useCallback(()=>e(n=>n+1),[])};function zg(e){if(typeof e!="object"||e===null)return e;if(Array.isArray(e))return e.map(t=>zg(t));const n={};return Object.keys(e).forEach(t=>{const r=t.replace(/_\w/g,i=>i[1].toUpperCase());n[r]=zg(e[t])}),n}function eN(e,n){return e.reduce((t,r)=>{const i=n(r);return t[i]=r,t},{})}var f5=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]]);return t};const v5=(e,n)=>{var t=f5(e,[]);switch(n.type){case"update_initialized":return t.initialized=n.value.status,t;case"update_refreshing":return t.refreshing=n.value.status,t;case"update_loading":return t.loading=n.value.status,t;case"update_messages":{if(n.value.clearBeforeAction)t.messageMap=p5(n.value.messages);else{const r=Object.assign({},t.messageMap),i=[],a=[];n.value.messages.forEach(s=>{const o=Za(s)?s.reqId:void 0,l=s.messageId||void 0;[o,l].forEach(u=>{if(!u)return;const d=r[u];m5(d,s)&&(d&&i.push(d),a.push(s))})}),i.forEach(s=>{Za(s)&&delete r[s.reqId],delete r[s.messageId]}),a.forEach(s=>{Za(s)&&(r[s.reqId]=s),r[s.messageId]=s}),t.messageMap=r}return t}case"update_new_messages":{const r=n.value.currentUserId,i=n.value.messages.filter(a=>u5(a,r));return n.value.clearBeforeAction?t.newMessageMap=eN(i,ZT):(i.map(s=>s.messageId).forEach(s=>delete t.newMessageMap[s]),t.newMessageMap=Object.assign(Object.assign({},t.newMessageMap),eN(i,ZT))),t}case"delete_messages":case"delete_new_messages":{const r=n.type==="delete_messages"?"messageMap":"newMessageMap";return t[r]=Object.assign({},t[r]),n.value.messageIds.forEach(i=>{const a=t[r][i];a&&(Za(a)&&delete t[r][a.reqId],delete t[r][a.messageId])}),n.value.reqIds.forEach(i=>{const a=t[r][i];a&&(Za(a)&&delete t[r][a.reqId],delete t[r][a.messageId])}),t}}},p5=e=>e.reduce((n,t)=>(Za(t)?(n[t.reqId]=t,t.sendingStatus===yn.SUCCEEDED&&(n[t.messageId]=t)):n[t.messageId]=t,n),{}),m5=(e,n)=>!Za(e)||!Za(n)?!0:e.sendingStatus===yn.SUCCEEDED?n.sendingStatus===yn.SUCCEEDED:e.sendingStatus!==n.sendingStatus,_5=(e=g5)=>{const[{initialized:n,loading:t,refreshing:r,messageMap:i,newMessageMap:a},s]=N.useReducer(v5,{initialized:!1,loading:!0,refreshing:!1,messageMap:{},newMessageMap:{}}),o=(y,S,C)=>{s({type:"update_messages",value:{messages:y,clearBeforeAction:S,currentUserId:C}})},l=(y,S)=>{s({type:"delete_messages",value:{messageIds:y,reqIds:S}})},u=(y,S,C)=>{s({type:"update_new_messages",value:{messages:y,clearBeforeAction:S,currentUserId:C}})},d=(y,S)=>{s({type:"delete_new_messages",value:{messageIds:y,reqIds:S}})},f=y=>{s({type:"update_initialized",value:{status:y}})},p=y=>{s({type:"update_loading",value:{status:y}})},m=y=>{s({type:"update_refreshing",value:{status:y}})},E=Object.values(a),g=N.useMemo(()=>Array.from(new Set(Object.values(i))).sort(e),[i]);return{updateInitialized:f,updateLoading:p,updateRefreshing:m,updateMessages:o,deleteMessages:l,initialized:n,loading:t,refreshing:r,messages:g,newMessages:E,updateNewMessages:u,deleteNewMessages:d}},tN=Math.floor(Number.MAX_SAFE_INTEGER/10);function g5(e,n){let t=0,r=0;return Za(e)&&e.sendingStatus!=="succeeded"&&(t=tN),Za(n)&&n.sendingStatus!=="succeeded"&&(r=tN),e.createdAt+t-(n.createdAt+r)}var ms=function(e,n,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(d){try{u(r.next(d))}catch(f){s(f)}}function l(d){try{u(r.throw(d))}catch(f){s(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,l)}u((r=r.apply(e,n||[])).next())})};const E5=(e,n,t)=>{var r;const i={prevResultLimit:n.prev,nextResultLimit:n.next,startingPoint:t==null?void 0:t.startingPoint,replyType:t==null?void 0:t.replyType},a=(r=t==null?void 0:t.collectionCreator)===null||r===void 0?void 0:r.call(t,i);return a||e.createMessageCollection(Object.assign(Object.assign({},i),{filter:new Xs(i)}))};function nN(e){return e<Date.now()?Nu.collection.message.searchLimit:Nu.collection.message.defaultLimit}const y5=(e,n,t={})=>{var r,i,a;const s=N.useRef(t);s.current=t;const o=N.useRef(n);o.current=n;const l=s.current.logger,u=(r=s.current.startingPoint)!==null&&r!==void 0?r:Number.MAX_SAFE_INTEGER,d=nN(u),f=N.useRef({prev:!1,next:!1}),p=h5(),m=N.useRef({initialized:!1,apiInitialized:!1,instance:null}),{initialized:E,loading:g,refreshing:y,messages:S,newMessages:C,updateMessages:T,updateNewMessages:I,deleteNewMessages:L,deleteMessages:D,updateInitialized:O,updateLoading:R,updateRefreshing:k}=_5(t==null?void 0:t.sortComparator),P=ur(ae=>{var he,pe,Ne,_e;if(!o.current||!o.current.url)return(he=l==null?void 0:l.error)===null||he===void 0?void 0:he.call(l,"[useGroupChannelMessages] channel is required");try{switch(ae){case ve.EVENT_MESSAGE_RECEIVED:case ve.EVENT_MESSAGE_SENT_SUCCESS:case ve.SYNC_MESSAGE_FILL:case void 0:(Ne=(pe=s.current).markAsRead)===null||Ne===void 0||Ne.call(pe,[o.current]);break}}catch(ge){(_e=l==null?void 0:l.warn)===null||_e===void 0||_e.call(l,"[useGroupChannelMessages/markAsReadBySource]",ge)}}),G=ur((ae,he)=>{var pe,Ne,_e,ge,me;const Le=he.filter(Qe=>{var Pe;return!_2(Qe,(Pe=e.currentUser)===null||Pe===void 0?void 0:Pe.userId)});if(Le.length>0)switch(ae){case ve.EVENT_MESSAGE_RECEIVED:case ve.SYNC_MESSAGE_FILL:{!((Ne=(pe=s.current).shouldCountNewMessages)===null||Ne===void 0)&&Ne.call(pe)&&I(Le,!1,(_e=e.currentUser)===null||_e===void 0?void 0:_e.userId),(me=(ge=s.current).onMessagesReceived)===null||me===void 0||me.call(ge,Le);break}}}),V=ur((ae,he)=>ms(void 0,void 0,void 0,function*(){return new Promise(pe=>{var Ne,_e;if(!o.current||!o.current.url)return(Ne=l==null?void 0:l.error)===null||Ne===void 0?void 0:Ne.call(l,"[useGroupChannelMessages] channel is required");m.current.instance&&m.current.instance.dispose(),P(),I([],!0,(_e=e.currentUser)===null||_e===void 0?void 0:_e.userId);const ge=()=>{var Le,Qe,Pe;const{pendingMessages:Ge,failedMessages:De}=(Le=m.current.instance)!==null&&Le!==void 0?Le:{};JT(Ge)&&T(Ge,!1,(Qe=e.currentUser)===null||Qe===void 0?void 0:Qe.userId),JT(De)&&T(De,!1,(Pe=e.currentUser)===null||Pe===void 0?void 0:Pe.userId)},me=E5(o.current,he,Object.assign(Object.assign({},s.current),{startingPoint:ae}));m.current={apiInitialized:!1,initialized:!1,instance:me},me.setMessageCollectionHandler({onMessagesAdded:(Le,Qe,Pe)=>{var Ge;P(Le.source),G(Le.source,Pe),T(Pe,!1,(Ge=e.currentUser)===null||Ge===void 0?void 0:Ge.userId)},onMessagesUpdated:(Le,Qe,Pe)=>{var Ge,De,tt;P(Le.source),G(Le.source,Pe),T(Pe,!1,(Ge=e.currentUser)===null||Ge===void 0?void 0:Ge.userId),Le.source===ve.EVENT_MESSAGE_UPDATED&&((tt=(De=s.current).onMessagesUpdated)===null||tt===void 0||tt.call(De,Pe))},onMessagesDeleted:(Le,Qe,Pe,Ge)=>{const De=Ge.map(Ue=>Ue.messageId),tt=Ge.filter(Za).map(Ue=>Ue.reqId);D(De,tt),L(De,tt)},onChannelDeleted:(Le,Qe)=>{var Pe,Ge;(Ge=(Pe=s.current).onChannelDeleted)===null||Ge===void 0||Ge.call(Pe,Qe)},onChannelUpdated:(Le,Qe)=>{var Pe,Ge;p(),(Ge=(Pe=s.current).onChannelUpdated)===null||Ge===void 0||Ge.call(Pe,Qe)},onHugeGapDetected:()=>{V(Number.MAX_SAFE_INTEGER,Nu.collection.message.defaultLimit)}}),me.initialize(xp.CACHE_AND_REPLACE_BY_API).onCacheResult((Le,Qe)=>{var Pe,Ge,De;Le?e.isCacheEnabled&&((Pe=l==null?void 0:l.error)===null||Pe===void 0||Pe.call(l,"[useGroupChannelMessages/onCacheResult]",Le)):Qe&&((Ge=l==null?void 0:l.debug)===null||Ge===void 0||Ge.call(l,"[useGroupChannelMessages/onCacheResult]","message length:",Qe.length),T(Qe,!0,(De=e.currentUser)===null||De===void 0?void 0:De.userId),ge(),Qe.length>0&&(m.current.initialized=!0,pe()))}).onApiResult((Le,Qe)=>{var Pe,Ge,De,tt,Ue;Le?(Pe=l==null?void 0:l.warn)===null||Pe===void 0||Pe.call(l,"[useGroupChannelMessages/onApiResult]",Le):Qe&&((Ge=l==null?void 0:l.debug)===null||Ge===void 0||Ge.call(l,"[useGroupChannelMessages/onApiResult]","message length:",Qe.length),T(Qe,!0,(De=e.currentUser)===null||De===void 0?void 0:De.userId),s.current.startingPoint||(Ue=(tt=s.current).onMessagesReceived)===null||Ue===void 0||Ue.call(tt,Qe),e.isCacheEnabled&&ge()),m.current.initialized=!0,m.current.apiInitialized=!0,pe()})})}));dm(e,{onUserBanned(ae,he){var pe,Ne,_e;ae.isGroupChannel()&&!l5(ae,o.current)&&(he.userId===((pe=e.currentUser)===null||pe===void 0?void 0:pe.userId)?(_e=(Ne=s.current).onCurrentUserBanned)===null||_e===void 0||_e.call(Ne):p())}}),N.useLayoutEffect(()=>{const ae=setTimeout(()=>ms(void 0,void 0,void 0,function*(){e.currentUser&&o.current&&(O(!1),R(!0),yield V(u,d),R(!1),O(!0))}));return()=>clearTimeout(ae)},[e,(i=e.currentUser)===null||i===void 0?void 0:i.userId,(a=o.current)===null||a===void 0?void 0:a.url,s.current.replyType]),N.useEffect(()=>()=>{m.current.instance&&m.current.instance.dispose()},[]);const H=ur(()=>ms(void 0,void 0,void 0,function*(){e.currentUser&&o.current&&(k(!0),yield V(Number.MAX_SAFE_INTEGER,Nu.collection.message.defaultLimit),k(!1))})),F=ur(()=>ms(void 0,void 0,void 0,function*(){var ae;const he=m.current.instance;if(he!=null&&he.hasPrevious&&!f.current.prev)try{f.current.prev=!0;const pe=yield he.loadPrevious();T(pe,!1,(ae=e.currentUser)===null||ae===void 0?void 0:ae.userId)}catch{}finally{f.current.prev=!1}})),z=ur(()=>{const{initialized:ae,instance:he}=m.current;return ae&&he?he.hasPrevious:!1}),K=ur(()=>ms(void 0,void 0,void 0,function*(){var ae;const he=m.current.instance;if(he!=null&&he.hasNext&&!f.current.next)try{f.current.next=!0;const pe=yield he.loadNext();T(pe,!1,(ae=e.currentUser)===null||ae===void 0?void 0:ae.userId)}catch{}finally{f.current.next=!1}})),ee=ur(()=>{const{initialized:ae,apiInitialized:he,instance:pe}=m.current;return he&&ae&&pe?pe.hasNext:!1}),$=ur((ae,he)=>{var pe;if(!o.current||!o.current.url)throw(pe=l==null?void 0:l.error)===null||pe===void 0||pe.call(l,"[useGroupChannelMessages] channel is required"),new Error("Channel is required");return new Promise((Ne,_e)=>{o.current.sendUserMessage(ae).onPending(ge=>{var me;ge.channelUrl===o.current.url&&T([ge],!1,(me=e.currentUser)===null||me===void 0?void 0:me.userId),he==null||he(ge)}).onSucceeded(ge=>{var me;ge.channelUrl===o.current.url&&T([ge],!1,(me=e.currentUser)===null||me===void 0?void 0:me.userId),Ne(ge)}).onFailed((ge,me)=>{var Le;me&&me.channelUrl===o.current.url&&T([me],!1,(Le=e.currentUser)===null||Le===void 0?void 0:Le.userId),_e(ge)})})}),Q=ur((ae,he)=>{var pe;if(!o.current||!o.current.url)throw(pe=l==null?void 0:l.error)===null||pe===void 0||pe.call(l,"[useGroupChannelMessages] channel is required"),new Error("Channel is required");return new Promise((Ne,_e)=>{o.current.sendFileMessage(ae).onPending(ge=>{var me;ge.channelUrl===o.current.url&&T([ge],!1,(me=e.currentUser)===null||me===void 0?void 0:me.userId),he==null||he(ge)}).onSucceeded(ge=>{var me;ge.channelUrl===o.current.url&&T([ge],!1,(me=e.currentUser)===null||me===void 0?void 0:me.userId),Ne(ge)}).onFailed((ge,me)=>{var Le;me&&me.channelUrl===o.current.url&&T([me],!1,(Le=e.currentUser)===null||Le===void 0?void 0:Le.userId),_e(ge)})})}),ne=ur((ae,he)=>ms(void 0,void 0,void 0,function*(){var pe;if(!o.current||!o.current.url)throw(pe=l==null?void 0:l.error)===null||pe===void 0||pe.call(l,"[useGroupChannelMessages] channel is required"),new Error("Channel is required");return new Promise(Ne=>{const _e=[];o.current.sendFileMessages(ae).onPending(ge=>{var me;ge.channelUrl===o.current.url&&T([ge],!1,(me=e.currentUser)===null||me===void 0?void 0:me.userId),he==null||he(ge)}).onSucceeded(ge=>{var me;ge.isFileMessage()&&ge.channelUrl===o.current.url&&(T([ge],!1,(me=e.currentUser)===null||me===void 0?void 0:me.userId),_e.push(ge)),_e.length===ae.length&&Ne(_e)}).onFailed((ge,me)=>{var Le;me&&me.channelUrl===o.current.url?(T([me],!1,(Le=e.currentUser)===null||Le===void 0?void 0:Le.userId),_e.push(me)):_e.push(null),_e.length===ae.length&&Ne(_e)})})})),j=ur((ae,he)=>{var pe;if(!o.current||!o.current.url)throw(pe=l==null?void 0:l.error)===null||pe===void 0||pe.call(l,"[useGroupChannelMessages] channel is required"),new Error("Channel is required");return new Promise((Ne,_e)=>{o.current.sendMultipleFilesMessage(ae).onPending(ge=>{var me;ge.channelUrl===o.current.url&&T([ge],!1,(me=e.currentUser)===null||me===void 0?void 0:me.userId),he==null||he(ge)}).onFileUploaded(()=>{p()}).onSucceeded(ge=>{var me;ge.channelUrl===o.current.url&&T([ge],!1,(me=e.currentUser)===null||me===void 0?void 0:me.userId),Ne(ge)}).onFailed((ge,me)=>{var Le;me&&me.channelUrl===o.current.url&&T([me],!1,(Le=e.currentUser)===null||Le===void 0?void 0:Le.userId),_e(ge)})})}),Z=ur((ae,he)=>ms(void 0,void 0,void 0,function*(){var pe,Ne;if(!o.current||!o.current.url)throw(pe=l==null?void 0:l.error)===null||pe===void 0||pe.call(l,"[useGroupChannelMessages] channel is required"),new Error("Channel is required");const _e=yield o.current.updateUserMessage(ae,he);return _e.channelUrl===o.current.url&&T([_e],!1,(Ne=e.currentUser)===null||Ne===void 0?void 0:Ne.userId),_e})),ie=ur((ae,he)=>ms(void 0,void 0,void 0,function*(){var pe,Ne;if(!o.current||!o.current.url)throw(pe=l==null?void 0:l.error)===null||pe===void 0||pe.call(l,"[useGroupChannelMessages] channel is required"),new Error("Channel is required");const _e=yield o.current.updateFileMessage(ae,he);return _e.channelUrl===o.current.url&&T([_e],!1,(Ne=e.currentUser)===null||Ne===void 0?void 0:Ne.userId),_e})),fe=ur(ae=>ms(void 0,void 0,void 0,function*(){var he;if(!o.current||!o.current.url)throw(he=l==null?void 0:l.error)===null||he===void 0||he.call(l,"[useGroupChannelMessages] channel is required"),new Error("Channel is required");return new Promise((pe,Ne)=>{let _e;ae.isUserMessage()&&(_e=o.current.resendMessage(ae)),ae.isFileMessage()&&(_e=o.current.resendMessage(ae)),ae.isMultipleFilesMessage()&&(_e=o.current.resendMessage(ae)),_e&&("onPending"in _e&&_e.onPending(ge=>{var me;ge.channelUrl===o.current.url&&T([ge],!1,(me=e.currentUser)===null||me===void 0?void 0:me.userId)}),"onFileUploaded"in _e&&_e.onFileUploaded(()=>{p()}),"onSucceeded"in _e&&_e.onSucceeded(ge=>{var me;ge.channelUrl===o.current.url&&T([ge],!1,(me=e.currentUser)===null||me===void 0?void 0:me.userId),pe(ge)}),"onFailed"in _e&&_e.onFailed((ge,me)=>{var Le;me&&me.channelUrl===o.current.url&&T([me],!1,(Le=e.currentUser)===null||Le===void 0?void 0:Le.userId),Ne(ge)}))})})),te=ur(ae=>ms(void 0,void 0,void 0,function*(){var he,pe;if(!o.current||!o.current.url)throw(he=l==null?void 0:l.error)===null||he===void 0||he.call(l,"[useGroupChannelMessages] channel is required"),new Error("Channel is required");if(ae.sendingStatus==="succeeded")ae.isUserMessage()&&(yield o.current.deleteMessage(ae)),ae.isFileMessage()&&(yield o.current.deleteMessage(ae)),ae.isMultipleFilesMessage()&&(yield o.current.deleteMessage(ae));else try{yield(pe=m.current.instance)===null||pe===void 0?void 0:pe.removeFailedMessage(ae.reqId)}finally{D([ae.messageId],[ae.reqId])}})),le=ur(()=>{var ae;I([],!0,(ae=e.currentUser)===null||ae===void 0?void 0:ae.userId)}),Me=ur(ae=>ms(void 0,void 0,void 0,function*(){var he;if(e.currentUser&&o.current){const pe=nN(ae);R(!0),T([],!0,(he=e.currentUser)===null||he===void 0?void 0:he.userId),yield V(ae,pe),R(!1)}}));return{initialized:E,loading:g,refreshing:y,messages:S,newMessages:C,resetNewMessages:le,refresh:H,loadPrevious:F,hasPrevious:z,loadNext:K,hasNext:ee,sendUserMessage:$,sendFileMessage:Q,sendFileMessages:ne,sendMultipleFilesMessage:j,updateUserMessage:Z,updateFileMessage:ie,resendMessage:fe,deleteMessage:te,resetWithStartingPoint:Me,_dangerous_reducer_updateMessages:T,_dangerous_reducer_deleteMessages:D}},g2=e=>C5(e),C5=e=>typeof e=="function"&&e();function E2(e,n){const t=Object.assign({},e);return Object.keys(n).forEach(r=>{Object.prototype.hasOwnProperty.call(t,r)&&d5(t[r],n[r])&&(typeof n[r]=="object"&&!Array.isArray(n[r])?t[r]=E2(t[r],n[r]):t[r]=n[r])}),t}const Ky=()=>({common:{enableUsingDefaultUserProfile:!1},groupChannel:{channel:{enableMention:!1,enableOgtag:!0,enableReactions:!0,enableReactionsSupergroup:!1,enableTypingIndicator:!0,enableVoiceMessage:!1,input:{camera:{enablePhoto:!0,enableVideo:!0},enableDocument:!0,gallery:{enablePhoto:!0,enableVideo:!0}},replyType:"quote_reply",threadReplySelectType:"thread",typingIndicatorTypes:new Set(["text"]),enableFeedback:!1,enableSuggestedReplies:!1,showSuggestedRepliesFor:"last_message_only",suggestedRepliesDirection:"vertical",enableMarkdownForUserMessage:!1,enableFormTypeMessage:!1},channelList:{enableMessageReceiptStatus:!1,enableTypingIndicator:!1},setting:{enableMessageSearch:!1}},openChannel:{channel:{enableOgtag:!0,input:{camera:{enablePhoto:!0,enableVideo:!0},enableDocument:!0,gallery:{enablePhoto:!0,enableVideo:!0}}}}});function b5(e){return delete e.groupChannel.channel.typingIndicatorTypes,delete e.groupChannel.channel.enableFeedback,delete e.groupChannel.channel.enableSuggestedReplies,delete e.groupChannel.channel.showSuggestedRepliesFor,delete e.groupChannel.channel.suggestedRepliesDirection,delete e.groupChannel.channel.enableMarkdownForUserMessage,delete e.groupChannel.channel.enableFormTypeMessage,e}const y2=()=>{const e=Ky();return b5(e)},rN=Ky(),S5=y2();var Hp=function(e,n,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(d){try{u(r.next(d))}catch(f){s(f)}}function l(d){try{u(r.throw(d))}catch(f){s(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,l)}u((r=r.apply(e,n||[])).next())})};const jg={items:{},getItem(e){var n;return Hp(this,void 0,void 0,function*(){return(n=jg.items[e])!==null&&n!==void 0?n:null})},setItem(e,n){return Hp(this,void 0,void 0,function*(){jg.items[e]=n})}};class T5{constructor(n){this.storage=n??jg}init(n){return this.key=`sbu@${n}.uikitConfiguration`,this.get()}get safeKey(){if(!this.key)throw new Error("Please UIKitConfigManager.init() first");return this.key}update(n){return Hp(this,void 0,void 0,function*(){const t=yield this.get(),r={updatedAt:n.updatedAt,configuration:E2(t.configuration,n.configuration)};return yield this.storage.setItem(this.safeKey,JSON.stringify(r)),r})}get(){return Hp(this,void 0,void 0,function*(){const n={updatedAt:0,configuration:S5};try{const t=yield this.storage.getItem(this.safeKey);return t?JSON.parse(t):n}catch{return n}})}}function N5(e,n,t){var r,i;t.common&&Tn((r=t.common)===null||r===void 0?void 0:r.enableUsingDefaultUserProfile)&&(e.enableUsingDefaultUserProfile=t.common.enableUsingDefaultUserProfile),n.common&&Tn((i=n.common)===null||i===void 0?void 0:i.enableUsingDefaultUserProfile)&&(e.enableUsingDefaultUserProfile=n.common.enableUsingDefaultUserProfile)}function I5(e,n,t){M5(e,n,t),A5(e,n,t),w5(e,n,t),R5(e,n,t)}function M5(e,n,t){var r,i,a,s,o,l,u,d,f,p,m,E,g,y,S,C,T,I,L,D,O,R,k,P,G,V,H,F,z,K,ee,$,Q,ne,j,Z,ie,fe,te,le,Me,ae,he,pe,Ne,_e,ge,me,Le,Qe,Pe,Ge,De,tt,Ue,Ye,yt,Nt,Rt,st,Be,nt,qe,rn,it,Ct,Je,pt,Ut,Pt,Ht,bt,qt,Lt,wt,Et,xe,ye,Ze,St,Ot,an,xt,dt,Jt,ln,Bt,En,Mn,Ke,ht,Fe,Dt,Gt,zt,fn,Dn,Vn,ot,se,ze,mt,vn,Sn,sn,zn,hr,fr,It,pn,gn;!((r=t.groupChannel)===null||r===void 0)&&r.channel&&Tn((a=(i=t.groupChannel)===null||i===void 0?void 0:i.channel)===null||a===void 0?void 0:a.enableOgtag)&&(e.channel.enableOgtag=t.groupChannel.channel.enableOgtag),!((s=n.groupChannel)===null||s===void 0)&&s.channel&&Tn((l=(o=n.groupChannel)===null||o===void 0?void 0:o.channel)===null||l===void 0?void 0:l.enableOgtag)&&(e.channel.enableOgtag=(d=(u=n.groupChannel)===null||u===void 0?void 0:u.channel)===null||d===void 0?void 0:d.enableOgtag),!((f=t.groupChannel)===null||f===void 0)&&f.channel&&Tn((m=(p=t.groupChannel)===null||p===void 0?void 0:p.channel)===null||m===void 0?void 0:m.enableTypingIndicator)&&(e.channel.enableTypingIndicator=(g=(E=t.groupChannel)===null||E===void 0?void 0:E.channel)===null||g===void 0?void 0:g.enableTypingIndicator),!((y=n.groupChannel)===null||y===void 0)&&y.channel&&Tn((C=(S=n.groupChannel)===null||S===void 0?void 0:S.channel)===null||C===void 0?void 0:C.enableTypingIndicator)&&(e.channel.enableTypingIndicator=(I=(T=n.groupChannel)===null||T===void 0?void 0:T.channel)===null||I===void 0?void 0:I.enableTypingIndicator),!((L=t.groupChannel)===null||L===void 0)&&L.channel&&Tn((O=(D=t.groupChannel)===null||D===void 0?void 0:D.channel)===null||O===void 0?void 0:O.enableReactions)&&(e.channel.enableReactions=(k=(R=t.groupChannel)===null||R===void 0?void 0:R.channel)===null||k===void 0?void 0:k.enableReactions),!((P=n.groupChannel)===null||P===void 0)&&P.channel&&Tn((V=(G=n.groupChannel)===null||G===void 0?void 0:G.channel)===null||V===void 0?void 0:V.enableReactions)&&(e.channel.enableReactions=(F=(H=n.groupChannel)===null||H===void 0?void 0:H.channel)===null||F===void 0?void 0:F.enableReactions),!((z=t.groupChannel)===null||z===void 0)&&z.channel&&Tn((ee=(K=t.groupChannel)===null||K===void 0?void 0:K.channel)===null||ee===void 0?void 0:ee.enableReactionsSupergroup)&&(e.channel.enableReactionsSupergroup=(Q=($=t.groupChannel)===null||$===void 0?void 0:$.channel)===null||Q===void 0?void 0:Q.enableReactionsSupergroup),!((ne=n.groupChannel)===null||ne===void 0)&&ne.channel&&Tn((Z=(j=n.groupChannel)===null||j===void 0?void 0:j.channel)===null||Z===void 0?void 0:Z.enableReactionsSupergroup)&&console.warn("Currently, EnableReactionsSupergroup feature is turned off by default. If you wish to use this feature, contact us: https://dashboard.sendbird.com/settings/contact_us?category=feedback_and_feature_requests&product=UIKit"),!((ie=t.groupChannel)===null||ie===void 0)&&ie.channel&&Tn((te=(fe=t.groupChannel)===null||fe===void 0?void 0:fe.channel)===null||te===void 0?void 0:te.enableMention)&&(e.channel.enableMention=(Me=(le=t.groupChannel)===null||le===void 0?void 0:le.channel)===null||Me===void 0?void 0:Me.enableMention),!((ae=n.groupChannel)===null||ae===void 0)&&ae.channel&&Tn((pe=(he=n.groupChannel)===null||he===void 0?void 0:he.channel)===null||pe===void 0?void 0:pe.enableMention)&&(e.channel.enableMention=(_e=(Ne=n.groupChannel)===null||Ne===void 0?void 0:Ne.channel)===null||_e===void 0?void 0:_e.enableMention),!((ge=t.groupChannel)===null||ge===void 0)&&ge.channel&&Ic((Le=(me=t.groupChannel)===null||me===void 0?void 0:me.channel)===null||Le===void 0?void 0:Le.replyType,["none","quote_reply","thread"])&&(e.channel.replyType=(Pe=(Qe=t.groupChannel)===null||Qe===void 0?void 0:Qe.channel)===null||Pe===void 0?void 0:Pe.replyType),!((Ge=n.groupChannel)===null||Ge===void 0)&&Ge.channel&&Ic((tt=(De=n.groupChannel)===null||De===void 0?void 0:De.channel)===null||tt===void 0?void 0:tt.replyType,["none","quote_reply","thread"])&&(e.channel.replyType=(Ye=(Ue=n.groupChannel)===null||Ue===void 0?void 0:Ue.channel)===null||Ye===void 0?void 0:Ye.replyType),!((yt=t.groupChannel)===null||yt===void 0)&&yt.channel&&Ic((Rt=(Nt=t.groupChannel)===null||Nt===void 0?void 0:Nt.channel)===null||Rt===void 0?void 0:Rt.threadReplySelectType,["thread","parent"])&&(e.channel.threadReplySelectType=(Be=(st=t.groupChannel)===null||st===void 0?void 0:st.channel)===null||Be===void 0?void 0:Be.threadReplySelectType),!((nt=n.groupChannel)===null||nt===void 0)&&nt.channel&&Ic((rn=(qe=n.groupChannel)===null||qe===void 0?void 0:qe.channel)===null||rn===void 0?void 0:rn.threadReplySelectType,["thread","parent"])&&(e.channel.threadReplySelectType=(Ct=(it=n.groupChannel)===null||it===void 0?void 0:it.channel)===null||Ct===void 0?void 0:Ct.threadReplySelectType),!((Je=t.groupChannel)===null||Je===void 0)&&Je.channel&&Tn((Ut=(pt=t.groupChannel)===null||pt===void 0?void 0:pt.channel)===null||Ut===void 0?void 0:Ut.enableVoiceMessage)&&(e.channel.enableVoiceMessage=(Ht=(Pt=t.groupChannel)===null||Pt===void 0?void 0:Pt.channel)===null||Ht===void 0?void 0:Ht.enableVoiceMessage),!((bt=n.groupChannel)===null||bt===void 0)&&bt.channel&&Tn((Lt=(qt=n.groupChannel)===null||qt===void 0?void 0:qt.channel)===null||Lt===void 0?void 0:Lt.enableVoiceMessage)&&(e.channel.enableVoiceMessage=(Et=(wt=n.groupChannel)===null||wt===void 0?void 0:wt.channel)===null||Et===void 0?void 0:Et.enableVoiceMessage),!((xe=n.groupChannel)===null||xe===void 0)&&xe.channel&&c5((Ze=(ye=n.groupChannel)===null||ye===void 0?void 0:ye.channel)===null||Ze===void 0?void 0:Ze.typingIndicatorTypes)&&(e.channel.typingIndicatorTypes=(Ot=(St=n.groupChannel)===null||St===void 0?void 0:St.channel)===null||Ot===void 0?void 0:Ot.typingIndicatorTypes),!((an=n.groupChannel)===null||an===void 0)&&an.channel&&Tn((dt=(xt=n.groupChannel)===null||xt===void 0?void 0:xt.channel)===null||dt===void 0?void 0:dt.enableFeedback)&&(e.channel.enableFeedback=(ln=(Jt=n.groupChannel)===null||Jt===void 0?void 0:Jt.channel)===null||ln===void 0?void 0:ln.enableFeedback),!((Bt=n.groupChannel)===null||Bt===void 0)&&Bt.channel&&Tn((Mn=(En=n.groupChannel)===null||En===void 0?void 0:En.channel)===null||Mn===void 0?void 0:Mn.enableSuggestedReplies)&&(e.channel.enableSuggestedReplies=(ht=(Ke=n.groupChannel)===null||Ke===void 0?void 0:Ke.channel)===null||ht===void 0?void 0:ht.enableSuggestedReplies),!((Fe=n.groupChannel)===null||Fe===void 0)&&Fe.channel&&Ic((Gt=(Dt=n.groupChannel)===null||Dt===void 0?void 0:Dt.channel)===null||Gt===void 0?void 0:Gt.showSuggestedRepliesFor,["all_messages","last_message_only"])&&(e.channel.showSuggestedRepliesFor=(fn=(zt=n.groupChannel)===null||zt===void 0?void 0:zt.channel)===null||fn===void 0?void 0:fn.showSuggestedRepliesFor),!((Dn=n.groupChannel)===null||Dn===void 0)&&Dn.channel&&Ic((ot=(Vn=n.groupChannel)===null||Vn===void 0?void 0:Vn.channel)===null||ot===void 0?void 0:ot.suggestedRepliesDirection,["vertical","horizontal"])&&(e.channel.suggestedRepliesDirection=(ze=(se=n.groupChannel)===null||se===void 0?void 0:se.channel)===null||ze===void 0?void 0:ze.suggestedRepliesDirection),!((mt=n.groupChannel)===null||mt===void 0)&&mt.channel&&Tn((Sn=(vn=n.groupChannel)===null||vn===void 0?void 0:vn.channel)===null||Sn===void 0?void 0:Sn.enableMarkdownForUserMessage)&&(e.channel.enableMarkdownForUserMessage=(zn=(sn=n.groupChannel)===null||sn===void 0?void 0:sn.channel)===null||zn===void 0?void 0:zn.enableMarkdownForUserMessage),!((hr=n.groupChannel)===null||hr===void 0)&&hr.channel&&Tn((It=(fr=n.groupChannel)===null||fr===void 0?void 0:fr.channel)===null||It===void 0?void 0:It.enableFormTypeMessage)&&(e.channel.enableFormTypeMessage=(gn=(pn=n.groupChannel)===null||pn===void 0?void 0:pn.channel)===null||gn===void 0?void 0:gn.enableFormTypeMessage)}function A5(e,n,t){var r,i,a,s,o,l,u,d,f,p,m,E,g,y,S,C,T,I,L,D,O,R,k,P,G,V,H,F,z,K,ee,$,Q,ne,j,Z,ie,fe,te,le,Me,ae,he,pe,Ne,_e,ge,me,Le,Qe,Pe,Ge,De,tt,Ue,Ye,yt,Nt,Rt,st,Be,nt,qe,rn,it,Ct,Je,pt,Ut,Pt,Ht,bt,qt,Lt,wt,Et,xe,ye,Ze,St,Ot,an,xt,dt,Jt,ln,Bt,En,Mn,Ke,ht,Fe,Dt,Gt,zt,fn,Dn,Vn,ot,se,ze,mt,vn,Sn;!((i=(r=t.groupChannel)===null||r===void 0?void 0:r.channel)===null||i===void 0)&&i.input&&Tn((o=(s=(a=t.groupChannel)===null||a===void 0?void 0:a.channel)===null||s===void 0?void 0:s.input)===null||o===void 0?void 0:o.enableDocument)&&(e.channel.input.enableDocument=(d=(u=(l=t.groupChannel)===null||l===void 0?void 0:l.channel)===null||u===void 0?void 0:u.input)===null||d===void 0?void 0:d.enableDocument),!((p=(f=n.groupChannel)===null||f===void 0?void 0:f.channel)===null||p===void 0)&&p.input&&Tn((g=(E=(m=n.groupChannel)===null||m===void 0?void 0:m.channel)===null||E===void 0?void 0:E.input)===null||g===void 0?void 0:g.enableDocument)&&(e.channel.input.enableDocument=(C=(S=(y=n.groupChannel)===null||y===void 0?void 0:y.channel)===null||S===void 0?void 0:S.input)===null||C===void 0?void 0:C.enableDocument),!((L=(I=(T=t.groupChannel)===null||T===void 0?void 0:T.channel)===null||I===void 0?void 0:I.input)===null||L===void 0)&&L.camera&&Tn((k=(R=(O=(D=t.groupChannel)===null||D===void 0?void 0:D.channel)===null||O===void 0?void 0:O.input)===null||R===void 0?void 0:R.camera)===null||k===void 0?void 0:k.enablePhoto)&&(e.channel.input.camera.enablePhoto=(H=(V=(G=(P=t.groupChannel)===null||P===void 0?void 0:P.channel)===null||G===void 0?void 0:G.input)===null||V===void 0?void 0:V.camera)===null||H===void 0?void 0:H.enablePhoto),!((K=(z=(F=n.groupChannel)===null||F===void 0?void 0:F.channel)===null||z===void 0?void 0:z.input)===null||K===void 0)&&K.camera&&Tn((ne=(Q=($=(ee=n.groupChannel)===null||ee===void 0?void 0:ee.channel)===null||$===void 0?void 0:$.input)===null||Q===void 0?void 0:Q.camera)===null||ne===void 0?void 0:ne.enablePhoto)&&(e.channel.input.camera.enablePhoto=(fe=(ie=(Z=(j=n.groupChannel)===null||j===void 0?void 0:j.channel)===null||Z===void 0?void 0:Z.input)===null||ie===void 0?void 0:ie.camera)===null||fe===void 0?void 0:fe.enablePhoto),!((Me=(le=(te=t.groupChannel)===null||te===void 0?void 0:te.channel)===null||le===void 0?void 0:le.input)===null||Me===void 0)&&Me.camera&&Tn((Ne=(pe=(he=(ae=t.groupChannel)===null||ae===void 0?void 0:ae.channel)===null||he===void 0?void 0:he.input)===null||pe===void 0?void 0:pe.camera)===null||Ne===void 0?void 0:Ne.enableVideo)&&(e.channel.input.camera.enableVideo=(Le=(me=(ge=(_e=t.groupChannel)===null||_e===void 0?void 0:_e.channel)===null||ge===void 0?void 0:ge.input)===null||me===void 0?void 0:me.camera)===null||Le===void 0?void 0:Le.enableVideo),!((Ge=(Pe=(Qe=n.groupChannel)===null||Qe===void 0?void 0:Qe.channel)===null||Pe===void 0?void 0:Pe.input)===null||Ge===void 0)&&Ge.camera&&Tn((Ye=(Ue=(tt=(De=n.groupChannel)===null||De===void 0?void 0:De.channel)===null||tt===void 0?void 0:tt.input)===null||Ue===void 0?void 0:Ue.camera)===null||Ye===void 0?void 0:Ye.enableVideo)&&(e.channel.input.camera.enableVideo=(st=(Rt=(Nt=(yt=n.groupChannel)===null||yt===void 0?void 0:yt.channel)===null||Nt===void 0?void 0:Nt.input)===null||Rt===void 0?void 0:Rt.camera)===null||st===void 0?void 0:st.enableVideo),!((qe=(nt=(Be=t.groupChannel)===null||Be===void 0?void 0:Be.channel)===null||nt===void 0?void 0:nt.input)===null||qe===void 0)&&qe.gallery&&Tn((Je=(Ct=(it=(rn=t.groupChannel)===null||rn===void 0?void 0:rn.channel)===null||it===void 0?void 0:it.input)===null||Ct===void 0?void 0:Ct.gallery)===null||Je===void 0?void 0:Je.enablePhoto)&&(e.channel.input.gallery.enablePhoto=(Ht=(Pt=(Ut=(pt=t.groupChannel)===null||pt===void 0?void 0:pt.channel)===null||Ut===void 0?void 0:Ut.input)===null||Pt===void 0?void 0:Pt.gallery)===null||Ht===void 0?void 0:Ht.enablePhoto),!((Lt=(qt=(bt=n.groupChannel)===null||bt===void 0?void 0:bt.channel)===null||qt===void 0?void 0:qt.input)===null||Lt===void 0)&&Lt.gallery&&Tn((ye=(xe=(Et=(wt=n.groupChannel)===null||wt===void 0?void 0:wt.channel)===null||Et===void 0?void 0:Et.input)===null||xe===void 0?void 0:xe.gallery)===null||ye===void 0?void 0:ye.enablePhoto)&&(e.channel.input.gallery.enablePhoto=(an=(Ot=(St=(Ze=n.groupChannel)===null||Ze===void 0?void 0:Ze.channel)===null||St===void 0?void 0:St.input)===null||Ot===void 0?void 0:Ot.gallery)===null||an===void 0?void 0:an.enablePhoto),!((Jt=(dt=(xt=t.groupChannel)===null||xt===void 0?void 0:xt.channel)===null||dt===void 0?void 0:dt.input)===null||Jt===void 0)&&Jt.gallery&&Tn((Mn=(En=(Bt=(ln=t.groupChannel)===null||ln===void 0?void 0:ln.channel)===null||Bt===void 0?void 0:Bt.input)===null||En===void 0?void 0:En.gallery)===null||Mn===void 0?void 0:Mn.enableVideo)&&(e.channel.input.gallery.enableVideo=(Dt=(Fe=(ht=(Ke=t.groupChannel)===null||Ke===void 0?void 0:Ke.channel)===null||ht===void 0?void 0:ht.input)===null||Fe===void 0?void 0:Fe.gallery)===null||Dt===void 0?void 0:Dt.enableVideo),!((fn=(zt=(Gt=n.groupChannel)===null||Gt===void 0?void 0:Gt.channel)===null||zt===void 0?void 0:zt.input)===null||fn===void 0)&&fn.gallery&&Tn((se=(ot=(Vn=(Dn=n.groupChannel)===null||Dn===void 0?void 0:Dn.channel)===null||Vn===void 0?void 0:Vn.input)===null||ot===void 0?void 0:ot.gallery)===null||se===void 0?void 0:se.enableVideo)&&(e.channel.input.gallery.enableVideo=(Sn=(vn=(mt=(ze=n.groupChannel)===null||ze===void 0?void 0:ze.channel)===null||mt===void 0?void 0:mt.input)===null||vn===void 0?void 0:vn.gallery)===null||Sn===void 0?void 0:Sn.enableVideo)}function w5(e,n,t){var r,i,a,s,o,l,u,d,f,p,m,E,g,y,S,C,T,I;!((r=t.groupChannel)===null||r===void 0)&&r.channelList&&Tn((a=(i=t.groupChannel)===null||i===void 0?void 0:i.channelList)===null||a===void 0?void 0:a.enableTypingIndicator)&&(e.channelList.enableTypingIndicator=t.groupChannel.channelList.enableTypingIndicator),!((s=n.groupChannel)===null||s===void 0)&&s.channelList&&Tn((l=(o=n.groupChannel)===null||o===void 0?void 0:o.channelList)===null||l===void 0?void 0:l.enableTypingIndicator)&&(e.channelList.enableTypingIndicator=(d=(u=n.groupChannel)===null||u===void 0?void 0:u.channelList)===null||d===void 0?void 0:d.enableTypingIndicator),!((f=t.groupChannel)===null||f===void 0)&&f.channelList&&Tn((m=(p=t.groupChannel)===null||p===void 0?void 0:p.channelList)===null||m===void 0?void 0:m.enableMessageReceiptStatus)&&(e.channelList.enableMessageReceiptStatus=(g=(E=t.groupChannel)===null||E===void 0?void 0:E.channelList)===null||g===void 0?void 0:g.enableMessageReceiptStatus),!((y=n.groupChannel)===null||y===void 0)&&y.channelList&&Tn((C=(S=n.groupChannel)===null||S===void 0?void 0:S.channelList)===null||C===void 0?void 0:C.enableMessageReceiptStatus)&&(e.channelList.enableMessageReceiptStatus=(I=(T=n.groupChannel)===null||T===void 0?void 0:T.channelList)===null||I===void 0?void 0:I.enableMessageReceiptStatus)}function R5(e,n,t){var r,i,a,s,o,l,u,d;!((r=t.groupChannel)===null||r===void 0)&&r.setting&&Tn((a=(i=t.groupChannel)===null||i===void 0?void 0:i.setting)===null||a===void 0?void 0:a.enableMessageSearch)&&(e.setting.enableMessageSearch=t.groupChannel.setting.enableMessageSearch),!((s=n.groupChannel)===null||s===void 0)&&s.setting&&Tn((l=(o=n.groupChannel)===null||o===void 0?void 0:o.setting)===null||l===void 0?void 0:l.enableMessageSearch)&&(e.setting.enableMessageSearch=(d=(u=n.groupChannel)===null||u===void 0?void 0:u.setting)===null||d===void 0?void 0:d.enableMessageSearch)}function O5(e,n,t){D5(e,n,t),L5(e,n,t)}function D5(e,n,t){var r,i,a,s,o,l,u,d;!((r=t.openChannel)===null||r===void 0)&&r.channel&&Tn((a=(i=t.openChannel)===null||i===void 0?void 0:i.channel)===null||a===void 0?void 0:a.enableOgtag)&&(e.channel.enableOgtag=t.openChannel.channel.enableOgtag),!((s=n.openChannel)===null||s===void 0)&&s.channel&&Tn((l=(o=n.openChannel)===null||o===void 0?void 0:o.channel)===null||l===void 0?void 0:l.enableOgtag)&&(e.channel.enableOgtag=(d=(u=n.openChannel)===null||u===void 0?void 0:u.channel)===null||d===void 0?void 0:d.enableOgtag)}function L5(e,n,t){var r,i,a,s,o,l,u,d,f,p,m,E,g,y,S,C,T,I,L,D,O,R,k,P,G,V,H,F,z,K,ee,$,Q,ne,j,Z,ie,fe,te,le,Me,ae,he,pe,Ne,_e,ge,me,Le,Qe,Pe,Ge,De,tt,Ue,Ye,yt,Nt,Rt,st,Be,nt,qe,rn,it,Ct,Je,pt,Ut,Pt,Ht,bt,qt,Lt,wt,Et,xe,ye,Ze,St,Ot,an,xt,dt,Jt,ln,Bt,En,Mn,Ke,ht,Fe,Dt,Gt,zt,fn,Dn,Vn,ot,se,ze,mt,vn,Sn;!((i=(r=t.openChannel)===null||r===void 0?void 0:r.channel)===null||i===void 0)&&i.input&&Tn((o=(s=(a=t.openChannel)===null||a===void 0?void 0:a.channel)===null||s===void 0?void 0:s.input)===null||o===void 0?void 0:o.enableDocument)&&(e.channel.input.enableDocument=(d=(u=(l=t.openChannel)===null||l===void 0?void 0:l.channel)===null||u===void 0?void 0:u.input)===null||d===void 0?void 0:d.enableDocument),!((p=(f=n.openChannel)===null||f===void 0?void 0:f.channel)===null||p===void 0)&&p.input&&Tn((g=(E=(m=n.openChannel)===null||m===void 0?void 0:m.channel)===null||E===void 0?void 0:E.input)===null||g===void 0?void 0:g.enableDocument)&&(e.channel.input.enableDocument=(C=(S=(y=n.openChannel)===null||y===void 0?void 0:y.channel)===null||S===void 0?void 0:S.input)===null||C===void 0?void 0:C.enableDocument),!((L=(I=(T=t.openChannel)===null||T===void 0?void 0:T.channel)===null||I===void 0?void 0:I.input)===null||L===void 0)&&L.camera&&Tn((k=(R=(O=(D=t.openChannel)===null||D===void 0?void 0:D.channel)===null||O===void 0?void 0:O.input)===null||R===void 0?void 0:R.camera)===null||k===void 0?void 0:k.enablePhoto)&&(e.channel.input.camera.enablePhoto=(H=(V=(G=(P=t.openChannel)===null||P===void 0?void 0:P.channel)===null||G===void 0?void 0:G.input)===null||V===void 0?void 0:V.camera)===null||H===void 0?void 0:H.enablePhoto),!((K=(z=(F=n.openChannel)===null||F===void 0?void 0:F.channel)===null||z===void 0?void 0:z.input)===null||K===void 0)&&K.camera&&Tn((ne=(Q=($=(ee=n.openChannel)===null||ee===void 0?void 0:ee.channel)===null||$===void 0?void 0:$.input)===null||Q===void 0?void 0:Q.camera)===null||ne===void 0?void 0:ne.enablePhoto)&&(e.channel.input.camera.enablePhoto=(fe=(ie=(Z=(j=n.openChannel)===null||j===void 0?void 0:j.channel)===null||Z===void 0?void 0:Z.input)===null||ie===void 0?void 0:ie.camera)===null||fe===void 0?void 0:fe.enablePhoto),!((Me=(le=(te=t.openChannel)===null||te===void 0?void 0:te.channel)===null||le===void 0?void 0:le.input)===null||Me===void 0)&&Me.camera&&Tn((Ne=(pe=(he=(ae=t.openChannel)===null||ae===void 0?void 0:ae.channel)===null||he===void 0?void 0:he.input)===null||pe===void 0?void 0:pe.camera)===null||Ne===void 0?void 0:Ne.enableVideo)&&(e.channel.input.camera.enableVideo=(Le=(me=(ge=(_e=t.openChannel)===null||_e===void 0?void 0:_e.channel)===null||ge===void 0?void 0:ge.input)===null||me===void 0?void 0:me.camera)===null||Le===void 0?void 0:Le.enableVideo),!((Ge=(Pe=(Qe=n.openChannel)===null||Qe===void 0?void 0:Qe.channel)===null||Pe===void 0?void 0:Pe.input)===null||Ge===void 0)&&Ge.camera&&Tn((Ye=(Ue=(tt=(De=n.openChannel)===null||De===void 0?void 0:De.channel)===null||tt===void 0?void 0:tt.input)===null||Ue===void 0?void 0:Ue.camera)===null||Ye===void 0?void 0:Ye.enableVideo)&&(e.channel.input.camera.enableVideo=(st=(Rt=(Nt=(yt=n.openChannel)===null||yt===void 0?void 0:yt.channel)===null||Nt===void 0?void 0:Nt.input)===null||Rt===void 0?void 0:Rt.camera)===null||st===void 0?void 0:st.enableVideo),!((qe=(nt=(Be=t.openChannel)===null||Be===void 0?void 0:Be.channel)===null||nt===void 0?void 0:nt.input)===null||qe===void 0)&&qe.gallery&&Tn((Je=(Ct=(it=(rn=t.openChannel)===null||rn===void 0?void 0:rn.channel)===null||it===void 0?void 0:it.input)===null||Ct===void 0?void 0:Ct.gallery)===null||Je===void 0?void 0:Je.enablePhoto)&&(e.channel.input.gallery.enablePhoto=(Ht=(Pt=(Ut=(pt=t.openChannel)===null||pt===void 0?void 0:pt.channel)===null||Ut===void 0?void 0:Ut.input)===null||Pt===void 0?void 0:Pt.gallery)===null||Ht===void 0?void 0:Ht.enablePhoto),!((Lt=(qt=(bt=n.openChannel)===null||bt===void 0?void 0:bt.channel)===null||qt===void 0?void 0:qt.input)===null||Lt===void 0)&&Lt.gallery&&Tn((ye=(xe=(Et=(wt=n.openChannel)===null||wt===void 0?void 0:wt.channel)===null||Et===void 0?void 0:Et.input)===null||xe===void 0?void 0:xe.gallery)===null||ye===void 0?void 0:ye.enablePhoto)&&(e.channel.input.gallery.enablePhoto=(an=(Ot=(St=(Ze=n.openChannel)===null||Ze===void 0?void 0:Ze.channel)===null||St===void 0?void 0:St.input)===null||Ot===void 0?void 0:Ot.gallery)===null||an===void 0?void 0:an.enablePhoto),!((Jt=(dt=(xt=t.openChannel)===null||xt===void 0?void 0:xt.channel)===null||dt===void 0?void 0:dt.input)===null||Jt===void 0)&&Jt.gallery&&Tn((Mn=(En=(Bt=(ln=t.openChannel)===null||ln===void 0?void 0:ln.channel)===null||Bt===void 0?void 0:Bt.input)===null||En===void 0?void 0:En.gallery)===null||Mn===void 0?void 0:Mn.enableVideo)&&(e.channel.input.gallery.enableVideo=(Dt=(Fe=(ht=(Ke=t.openChannel)===null||Ke===void 0?void 0:Ke.channel)===null||ht===void 0?void 0:ht.input)===null||Fe===void 0?void 0:Fe.gallery)===null||Dt===void 0?void 0:Dt.enableVideo),!((fn=(zt=(Gt=n.openChannel)===null||Gt===void 0?void 0:Gt.channel)===null||zt===void 0?void 0:zt.input)===null||fn===void 0)&&fn.gallery&&Tn((se=(ot=(Vn=(Dn=n.openChannel)===null||Dn===void 0?void 0:Dn.channel)===null||Vn===void 0?void 0:Vn.input)===null||ot===void 0?void 0:ot.gallery)===null||se===void 0?void 0:se.enableVideo)&&(e.channel.input.gallery.enableVideo=(Sn=(vn=(mt=(ze=n.openChannel)===null||ze===void 0?void 0:ze.channel)===null||mt===void 0?void 0:mt.input)===null||vn===void 0?void 0:vn.gallery)===null||Sn===void 0?void 0:Sn.enableVideo)}function U5(e,n){const t=Ky();return N5(t.common,e,n),I5(t.groupChannel,e,n),O5(t.openChannel,e,n),t}function k5(e){return typeof e=="object"&&"configuration"in e&&"updated_at"in e}var P5=function(e,n,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(d){try{u(r.next(d))}catch(f){s(f)}}function l(d){try{u(r.throw(d))}catch(f){s(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,l)}u((r=r.apply(e,n||[])).next())})};function Zd(e){var n,t;return(t=(n=e.appInfo)===null||n===void 0?void 0:n.applicationAttributes)!==null&&t!==void 0?t:[]}const C2=N.createContext({initDashboardConfigs:()=>Promise.resolve(),configs:rN,configsWithAppAttr:()=>rN}),x5=({storage:e,children:n,localConfigs:t={}})=>{const[r,i]=N.useState(y2),[a]=N.useState(()=>new T5(e)),s=N.useCallback(u=>P5(void 0,void 0,void 0,function*(){const d=yield a.init(u.appId);if(u.appInfo&&u.appInfo.uikitConfigInfo.lastUpdatedAt===d.updatedAt)i(d.configuration);else try{const f=yield u.getUIKitConfiguration();if(k5(f.json)){const p=zg(f.json),m=yield a.update(p);i(m.configuration)}}catch{i(d.configuration)}}),[a]),o=U5(t,r),l=ur(u=>({groupChannel:{channel:{get enableReactions(){return o.groupChannel.channel.enableReactions&&Zd(u).includes(Kd.reactions)},get enableReactionsSupergroup(){return o.groupChannel.channel.enableReactionsSupergroup&&Zd(u).includes(Kd.reactions)},get enableOgtag(){return o.groupChannel.channel.enableOgtag&&Zd(u).includes(Kd.enable_og_tag)}},setting:{get enableMessageSearch(){return o.groupChannel.setting.enableMessageSearch&&Zd(u).includes(Kd.message_search_v3)}}},openChannel:{channel:{get enableOgtag(){return o.openChannel.channel.enableOgtag&&Zd(u).includes(Kd.enable_og_tag)}}}}));return v.createElement(C2.Provider,{value:{initDashboardConfigs:s,configs:o,configsWithAppAttr:l}},n)},F5=()=>N.useContext(C2);var b2=v.createContext(null),lr;(function(e){e.NONE="NONE",e.PENDING="PENDING",e.SENT="SENT",e.FAILED="FAILED",e.DELIVERED="DELIVERED",e.READ="READ"})(lr||(lr={}));var S2=function(e,n){var t,r,i,a,s;if(!n||!("sendingStatus"in n))return lr.NONE;if(n.sendingStatus==="pending")return lr.PENDING;if(n.sendingStatus==="failed")return lr.FAILED;if(!((t=e==null?void 0:e.isGroupChannel)===null||t===void 0)&&t.call(e)){if(((i=(r=e).getUnreadMemberCount)===null||i===void 0?void 0:i.call(r,n))===0)return lr.READ;if(((s=(a=e).getUndeliveredMemberCount)===null||s===void 0?void 0:s.call(a,n))===0)return lr.DELIVERED}return n.sendingStatus==="succeeded"?lr.SENT:lr.NONE},H5=function(e){return/iPhone|iPad|iPod/i.test(e)},B5=function(e){return/WebKit/i.test(e)},G5=function(e){return/Chrome/i.test(e)},$y=function(e){return!G5(e)&&/Safari/i.test(e)},iN=function(e){return H5(e)&&(B5(e)||$y(e))};function Bp(e){"@babel/helpers - typeof";return Bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Bp(e)}function Cr(e,n){if(n.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+n.length+" present")}function ta(e){Cr(1,arguments);var n=Object.prototype.toString.call(e);return e instanceof Date||Bp(e)==="object"&&n==="[object Date]"?new Date(e.getTime()):typeof e=="number"||n==="[object Number]"?new Date(e):((typeof e=="string"||n==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var V5=1024*1024,bs=10,wl=100,T2=100,z_=250,N2=1e3,z5=6e5,j5=12e3,j$=11025,aN=["audio/webm","audio/mp4","audio/mpeg","audio/ogg"],lp="sendbird-voice-player-provider-root",qg="sendbird-global-audio-player-id",Jc="Voice_message.mp3",q5="Voice_message.m4a",Mo="audio/mp3;sbu_type=voice",K5="audio/x-m4a;sbu_type=voice",Wy="KEY_VOICE_MESSAGE_DURATION",Qy="KEY_INTERNAL_MESSAGE_TYPE",Yy="voice/mp3",I2="delivery_receipt",Bv="32px",$5=10,W5=25*1024*1024,j_="sendbird_message_templates_token_key",Mc="sendbird_message_templates_key",uf="message_template",Is=Symbol("@ts-pattern/matcher"),Gp="@ts-pattern/anonymous-select-key",Kg=function(e){return!!(e&&typeof e=="object")},up=function(e){return e&&!!e[Is]},Bu=function e(n,t,r){if(Kg(n)){if(up(n)){var i=n[Is]().match(t),a=i.matched,s=i.selections;return a&&s&&Object.keys(s).forEach(function(l){return r(l,s[l])}),a}if(!Kg(t))return!1;if(Array.isArray(n))return!!Array.isArray(t)&&n.length===t.length&&n.every(function(l,u){return e(l,t[u],r)});if(n instanceof Map)return t instanceof Map&&Array.from(n.keys()).every(function(l){return e(n.get(l),t.get(l),r)});if(n instanceof Set){if(!(t instanceof Set))return!1;if(n.size===0)return t.size===0;if(n.size===1){var o=Array.from(n.values())[0];return up(o)?Array.from(t.values()).every(function(l){return e(o,l,r)}):t.has(o)}return Array.from(n.values()).every(function(l){return t.has(l)})}return Object.keys(n).every(function(l){var u,d=n[l];return(l in t||up(u=d)&&u[Is]().matcherType==="optional")&&e(d,t[l],r)})}return Object.is(t,n)},Rl=function e(n){var t,r,i;return Kg(n)?up(n)?(t=(r=(i=n[Is]()).getSelectionKeys)==null?void 0:r.call(i))!=null?t:[]:Array.isArray(n)?Yh(n,e):Yh(Object.values(n),e):[]},Yh=function(e,n){return e.reduce(function(t,r){return t.concat(n(r))},[])};function sN(e){var n;return(n={})[Is]=function(){return{match:function(t){var r={},i=function(a,s){r[a]=s};return t===void 0?(Rl(e).forEach(function(a){return i(a,void 0)}),{matched:!0,selections:r}):{matched:Bu(e,t,i),selections:r}},getSelectionKeys:function(){return Rl(e)},matcherType:"optional"}},n}function oN(e){var n;return(n={})[Is]=function(){return{match:function(t){if(!Array.isArray(t))return{matched:!1};var r={};if(t.length===0)return Rl(e).forEach(function(a){r[a]=[]}),{matched:!0,selections:r};var i=function(a,s){r[a]=(r[a]||[]).concat([s])};return{matched:t.every(function(a){return Bu(e,a,i)}),selections:r}},getSelectionKeys:function(){return Rl(e)}}},n}function lN(){var e,n=[].slice.call(arguments);return(e={})[Is]=function(){return{match:function(t){var r={},i=function(a,s){r[a]=s};return{matched:n.every(function(a){return Bu(a,t,i)}),selections:r}},getSelectionKeys:function(){return Yh(n,Rl)},matcherType:"and"}},e}function uN(){var e,n=[].slice.call(arguments);return(e={})[Is]=function(){return{match:function(t){var r={},i=function(a,s){r[a]=s};return Yh(n,Rl).forEach(function(a){return i(a,void 0)}),{matched:n.some(function(a){return Bu(a,t,i)}),selections:r}},getSelectionKeys:function(){return Yh(n,Rl)},matcherType:"or"}},e}function cN(e){var n;return(n={})[Is]=function(){return{match:function(t){return{matched:!Bu(e,t,function(){})}},getSelectionKeys:function(){return[]},matcherType:"not"}},n}function Qs(e){var n;return(n={})[Is]=function(){return{match:function(t){return{matched:!!e(t)}}}},n}function dN(){var e,n=[].slice.call(arguments),t=typeof n[0]=="string"?n[0]:void 0,r=n.length===2?n[1]:typeof n[0]=="string"?void 0:n[0];return(e={})[Is]=function(){return{match:function(i){var a,s=((a={})[t??Gp]=i,a);return{matched:r===void 0||Bu(r,i,function(o,l){s[o]=l}),selections:s}},getSelectionKeys:function(){return[t??Gp].concat(r===void 0?[]:Rl(r))}}},e}var M2=Qs(function(e){return!0}),Q5=M2,Y5=Qs(function(e){return typeof e=="string"}),X5=Qs(function(e){return typeof e=="number"}),Z5=Qs(function(e){return typeof e=="boolean"}),J5=Qs(function(e){return typeof e=="bigint"}),e7=Qs(function(e){return typeof e=="symbol"}),t7=Qs(function(e){return e==null}),$g={__proto__:null,optional:sN,array:oN,intersection:lN,union:uN,not:cN,when:Qs,select:dN,any:M2,_:Q5,string:Y5,number:X5,boolean:Z5,bigint:J5,symbol:e7,nullish:t7,instanceOf:function(e){return Qs(function(n){return function(t){return t instanceof n}}(e))},typed:function(){return{array:oN,optional:sN,intersection:lN,union:uN,not:cN,select:dN,when:Qs}}};function si(e){return new n7(e,[])}var n7=function(){function e(t,r){this.value=void 0,this.cases=void 0,this.value=t,this.cases=r}var n=e.prototype;return n.with=function(){var t=[].slice.call(arguments),r=t[t.length-1],i=[t[0]],a=[];return t.length===3&&typeof t[1]=="function"?(i.push(t[0]),a.push(t[1])):t.length>2&&i.push.apply(i,t.slice(1,t.length-1)),new e(this.value,this.cases.concat([{match:function(s){var o={},l=!!(i.some(function(u){return Bu(u,s,function(d,f){o[d]=f})})&&a.every(function(u){return u(s)}));return{matched:l,value:l&&Object.keys(o).length?Gp in o?o[Gp]:o:s}},handler:r}]))},n.when=function(t,r){return new e(this.value,this.cases.concat([{match:function(i){return{matched:!!t(i),value:i}},handler:r}]))},n.otherwise=function(t){return new e(this.value,this.cases.concat([{match:function(r){return{matched:!0,value:r}},handler:t}])).run()},n.exhaustive=function(){return this.run()},n.run=function(){for(var t=this.value,r=void 0,i=0;i<this.cases.length;i++){var a=this.cases[i],s=a.match(this.value);if(s.matched){t=s.value,r=a.handler;break}}if(!r){var o;try{o=JSON.stringify(this.value)}catch{o=this.value}throw new Error("Pattern matching error: no pattern matches value "+o)}return r(t,this.value)},e}();function hN(e){Cr(1,arguments);var n=ta(e);return n.setMilliseconds(0),n}function r7(e,n){Cr(2,arguments);var t=hN(e),r=hN(n);return t.getTime()===r.getTime()}var q_,vl={IMAGE:["image/jpeg","image/jpg","image/png","image/gif","image/svg+xml","image/webp","image/bmp"],VIDEO:["video/mpeg","video/ogg","video/webm","video/mp4"],AUDIO:["audio/aac","audio/midi","audio/x-midi","audio/mpeg","audio/ogg","audio/opus","audio/wav","audio/webm","audio/3gpp","audio/3gpp2","audio/mp3"],DOCUMENT:["text/plain","text/css","text/csv","text/html","text/calendar","text/javascript","text/xml","text/x-log","video/quicktime"],APPLICATION:["application/x-abiword","application/x-freearc","application/vnd.amazon.ebook","application/octet-stream","application/x-bzip","application/x-bzip2","application/x-cdf","application/x-csh","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-fontobject","application/epub+zip","application/gzip","application/java-archive","application/json","application/ld+json","application/vnd.apple.installer+xml","application/vnd.oasis.opendocument.presentation","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.text","application/ogg","application/pdf","application/x-httpd-php","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.rar","application/rtf","application/x-sh","application/x-tar","application/vnd.visio","application/xhtml+xml","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/xml","application/vnd.mozilla.xul+xml","application/zip","application/x-7z-compressed"],ARCHIVE:["application/zip","application/x-rar-compressed","application/x-7z-compressed","application/x-tar","application/gzip","application/x-bzip","application/x-bzip2","application/x-xz","application/x-iso9660-image"]},Jd={IMAGE:[".apng",".avif",".gif",".jpg",".jpeg",".jfif",".pjpeg",".pjp",".png",".svg",".webp",".bmp",".ico",".cur",".tif",".tiff",".heic",".heif"],VIDEO:[".mp4",".webm",".ogv",".3gp",".3g2",".avi",".mov",".wmv",".mpg",".mpeg",".m4v",".mkv"],AUDIO:[".aac",".midi",".mp3",".oga",".opus",".wav",".weba",".3gp",".3g2"],DOCUMENT:[".txt",".log",".csv",".rtf",".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx"],ARCHIVE:[".zip",".rar",".7z",".tar",".gz",".bz2",".xz",".iso"]},i7=function(e){if(Array.isArray(e)&&e.length>0){var n=e.reduce(function(t,r){var i=r.toLowerCase();switch(i){case"image":{t.push.apply(t,Ae(Ae([],vl.IMAGE,!1),Jd.IMAGE,!1));break}case"video":{t.push.apply(t,Ae(Ae([],vl.VIDEO,!1),Jd.VIDEO,!1));break}case"audio":{t.push.apply(t,Ae(Ae([],vl.AUDIO,!1),Jd.AUDIO,!1));break}case"archive":{t.push.apply(t,Ae(Ae([],vl.ARCHIVE,!1),Jd.ARCHIVE,!1));break}default:{t.push(r);break}}return t},[]);return Array.from(new Set(n)).join(",")}return Ae(Ae([],Object.values(vl).flat(),!0),Object.values(Jd).flat(),!0).join(",")},xs={ADMIN:"ADMIN",TEXT:"TEXT",FILE:"FILE",MULTIPLE_FILES:"MULTIPLE_FILES",THUMBNAIL:"THUMBNAIL",OG:"OG",UNKNOWN:"UNKNOWN"},cu={IMAGE:"IMAGE",AUDIO:"AUDIO",VIDEO:"VIDEO",GIF:"GIF",VOICE:"VOICE",OTHERS:"OTHERS"},fN=function(e){return e===""||e===null},a7=function(e){return e==="video/quicktime"},s7=function(e){return $y(navigator.userAgent)&&a7(e)},As=function(e){return vl.IMAGE.indexOf(e)>=0},Oo=function(e){return vl.VIDEO.indexOf(e)>=0||s7(e)},Gu=function(e){return e==="image/gif"},Xh=function(e){return As(e)||Oo(e)},Xy=function(e){return vl.AUDIO.indexOf(e)>=0},o7=function(){return x({},cu)},Zy=function(e){return Gu(e)?cu.GIF:As(e)?cu.IMAGE:Oo(e)?cu.VIDEO:Xy(e)?cu.AUDIO:cu.OTHERS},ed=function(e){return e.sendingStatus==="succeeded"},vN=function(e,n){return S2(e,n)===lr.READ},ka=function(e){return(e==null?void 0:e.sendingStatus)==="failed"},Ss=function(e){return(e==null?void 0:e.sendingStatus)==="pending"},l7=function(e){return e===lr.SENT||e===lr.DELIVERED||e===lr.READ},A2=function(e){return e&&(e.isAdminMessage&&typeof e.isAdminMessage=="function"?e.isAdminMessage():(e==null?void 0:e.messageType)==="admin")},Vi=function(e){return e&&(e.isUserMessage&&typeof e.isUserMessage=="function"?e.isUserMessage():(e==null?void 0:e.messageType)==="user")},Ui=function(e){return!!e&&(e.isFileMessage&&typeof e.isFileMessage=="function"?e.isFileMessage():(e==null?void 0:e.messageType)==="file")},Ri=function(e){return e&&(e.isMultipleFilesMessage&&typeof e.isMultipleFilesMessage=="function"?e.isMultipleFilesMessage():e.messageType==="file"&&Object.prototype.hasOwnProperty.call(e,"fileInfoList"))},w2=function(e){return!!e.parentMessageId&&!!e.parentMessage},R2=function(e){return!!e.messageForm},Vp=function(e){var n;return!!(e&&(!((n=e.extendedMessagePayload)===null||n===void 0)&&n[uf]))},O2=function(e){var n=e.type;return!(n&&!D2[n])},D2={default:"default"},u7=(q_={},q_[D2.default]="ui_container_type__default",q_),hm=function(e){return!e||!Vi(e)?!1:!!e.ogMetaData&&!!(e.ogMetaData.url||e.ogMetaData.title||e.ogMetaData.description||e.ogMetaData.defaultImage)},c7=function(e){return Vi(e)},eo=function(e){return!e||!Ui(e)?!1:Xh(e.type)},L2=function(e){return!e||!Ui(e)?!1:eo(e)&&As(e.type)},qs=function(e){return!e||!Ui(e)?!1:eo(e)&&Oo(e.type)},zp=function(e){return!e||!Ui(e)?!1:eo(e)&&Gu(e.type)},d7=function(e){return!e||!Ui(e)?!1:Xy(e.type)},h7=function(e){return e?!!e.mimeType&&(As(e.mimeType)||Gu(e.mimeType)):!1},f7=function(e){return/^audio\//.test(e)},U2=function(e){return/^voice\//.test(e)},Fa=function(e){var n,t,r,i;if(!e||!Ui(e)||!e.type)return!1;var a=e.type.split(";"),s=a[0],o=a[1];if(!f7(s))return!1;if(o){var l=o.split("="),u=l[0],d=l[1];return u==="sbu_type"&&d==="voice"}return U2((i=(r=(t=(n=e==null?void 0:e.metaArrays)===null||n===void 0?void 0:n.find(function(f){return f.key==="KEY_INTERNAL_MESSAGE_TYPE"}))===null||t===void 0?void 0:t.value)===null||r===void 0?void 0:r[0])!==null&&i!==void 0?i:"")},fm=function(e){return Vi(e)&&(e==null?void 0:e.updatedAt)>0},mh=function(){return x({},xs)},Zh=function(e){return A2(e)?xs.ADMIN:Vi(e)?hm(e)?xs.OG:xs.TEXT:Ri(e)?xs.MULTIPLE_FILES:Ui(e)?eo(e)?xs.THUMBNAIL:Fa(e)?cu.VOICE:xs.FILE:xs.UNKNOWN},v7=function(e,n){return Array.isArray(n)?Ae(Ae([],e,!0),n,!0):(e.push(n),e)},ii=function(e){return Array.isArray(e)?e.reduce(v7,[]).join(" "):e},k2=function(e,n){return n.userIds.some(function(t){return t===e})},p7=function(e,n,t,r){var i="";return k2(n,e)&&(i=e.userIds.length===1?r.TOOLTIP__YOU:r.TOOLTIP__AND_YOU),"".concat(e.userIds.filter(function(a){return a!==n}).map(function(a){return t.get(a)||r.TOOLTIP__UNKNOWN_USER}).join(", ")).concat(i)};function Jy(e){var n;return e!=null&&e.extendedMessagePayload&&Array.isArray((n=e==null?void 0:e.extendedMessagePayload)===null||n===void 0?void 0:n.suggested_replies)?e.extendedMessagePayload.suggested_replies:[]}var eC=function(e,n){if(n||(n=40),e==null)return"";if(e.length<=n)return e;var t="...",r=t.length,i=n-r,a=Math.ceil(i/2),s=Math.floor(i/2);return e.substr(0,a)+t+e.substr(e.length-s)},tC=function(e){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",e);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var n=document.createElement("textarea");n.textContent=e,n.style.position="fixed",document.body.appendChild(n),n.select();try{return document.execCommand("copy")}catch{return!1}finally{document.body.removeChild(n)}}return!1},nC=function(e){var n;return(n=e==null?void 0:e.emojiCategories)===null||n===void 0?void 0:n.map(function(t){return t.emojis}).reduce(function(t,r){return t.concat(r)},[])},m7=function(e){var n,t=new Map;return(n=e==null?void 0:e.emojiCategories)===null||n===void 0||n.forEach(function(r){var i;(i=r==null?void 0:r.emojis)===null||i===void 0||i.forEach(function(a){a&&a.key&&t.set(a.key,a)})}),t},cp=function(e,n){var t;return n?((t=e==null?void 0:e.emojiCategories)===null||t===void 0?void 0:t.filter(function(r){return n.includes(r.id)}).flatMap(function(r){return r.emojis}))||[]:nC(e)},_7=function(e){return function(n){var t=n.key;return t===e}},g7=function(e,n){var t,r,i=_7(n??"");return((r=(t=e==null?void 0:e.emojiCategories.find(function(a){return a.emojis.some(i)}))===null||t===void 0?void 0:t.emojis.find(i))===null||r===void 0?void 0:r.url)||""},E7=function(e){return(e==null?void 0:e.friendName)||(e==null?void 0:e.nickname)||(e==null?void 0:e.userId)},dp=function(e){return(e==null?void 0:e.sender)&&E7(e==null?void 0:e.sender)},y7=function(e,n){if(e===n)return!0;if(e==null||n==null||e.length!==n.length)return!1;for(var t=Ae([],e,!0).sort(),r=Ae([],n,!0).sort(),i=0;i<t.length;++i)if(t[i]!==r[i])return!1;return!0},pN=function(e){return e?!!(e.friendDiscoveryKey||e.friendName):!1},mN=function(e,n){var t,r,i,a,s=e.customTypesFilter,o=s===void 0?[]:s;if(e!=null&&e.messageTypeFilter&&e.messageTypeFilter!==n.messageType)return!1;if((o==null?void 0:o.length)>0){var l=o.filter(function(d){return d!=="*"});if(l.length>0&&!l.includes(n.customType))return!1}if(e!=null&&e.senderUserIdsFilter&&((t=e==null?void 0:e.senderUserIdsFilter)===null||t===void 0?void 0:t.length)>0)if(!((r=n==null?void 0:n.isUserMessage)===null||r===void 0)&&r.call(n)||!((i=n==null?void 0:n.isFileMessage)===null||i===void 0)&&i.call(n)){var u=n.sender||n._sender;if(!(!((a=e==null?void 0:e.senderUserIdsFilter)===null||a===void 0)&&a.includes(u==null?void 0:u.userId)))return!1}else return!1;return!(!(e!=null&&e.includeParentMessageInfo)&&(n!=null&&n.parentMessageId||n!=null&&n.parentMessage))},Ac=function(e,n,t){var r,i,a,s,o,l,u,d=e.includeEmpty,f=e.includeFrozen,p=e.searchFilter,m=e.userIdsFilter,E=e.customTypesFilter,g=e.channelUrlsFilter,y=e.customTypeStartsWithFilter,S=e.channelNameContainsFilter,C=e.nicknameContainsFilter,T=e.myMemberStateFilter,I=e.hiddenChannelFilter,L=e.unreadChannelFilter,D=e.publicChannelFilter,O=e.superChannelFilter,R=e.metadataKey,k=R===void 0?"":R,P=e.metadataValues,G=P===void 0?["a","b"]:P,V=e.metadataValueStartsWith;if(!d&&(n==null?void 0:n.lastMessage)===null)return!1;if(p!=null&&p.query&&((i=(r=p==null?void 0:p.fields)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0)>0){var H=p.query,F=p.fields;if(H&&F&&F.length>0&&!F.some(function(ie){var fe,te;switch(ie){case"channel_name":return(fe=n==null?void 0:n.name)===null||fe===void 0?void 0:fe.toLowerCase().includes(H.toLowerCase());case"member_nickname":return(te=n==null?void 0:n.members)===null||te===void 0?void 0:te.some(function(le){return le.nickname.toLowerCase().includes(H.toLowerCase())});default:return!0}}))return!1}if(((a=m==null?void 0:m.userIds)===null||a===void 0?void 0:a.length)>0){var z=m.includeMode,K=m.queryType,ee=m.userIds,$=(s=n==null?void 0:n.members)===null||s===void 0?void 0:s.map(function(ie){return ie.userId});if(z){if(ee.length>0)switch(K){case"AND":{if(ee.some(function(ie){return!$.includes(ie)}))return!1;break}case"OR":{if(ee.every(function(ie){return!$.includes(ie)}))return!1;break}}}else if(ee.includes(t)||ee.push(t),((o=n==null?void 0:n.members)===null||o===void 0?void 0:o.length)>ee.length||!y7(ee,$))return!1}if(d===!1&&(n==null?void 0:n.lastMessage)===null||f===!1&&(n==null?void 0:n.isFrozen)===!0||E&&!E.includes(n==null?void 0:n.customType)||y&&!new RegExp("^".concat(y)).test(n==null?void 0:n.customType)||S&&!(!((l=n==null?void 0:n.name)===null||l===void 0)&&l.toLowerCase().includes(S.toLowerCase())))return!1;if(C){var Q=C.toLowerCase();if(!((u=n==null?void 0:n.members)===null||u===void 0)&&u.every(function(ie){return!ie.nickname.toLowerCase().includes(Q)}))return!1}if(g&&!g.includes(n==null?void 0:n.url))return!1;if(T)switch(T){case"joined_only":if((n==null?void 0:n.myMemberState)!=="joined")return!1;break;case"invited_only":if((n==null?void 0:n.myMemberState)!=="invited")return!1;break;case"invited_by_friend":if((n==null?void 0:n.myMemberState)!=="invited"||!pN(n==null?void 0:n.inviter))return!1;break;case"invited_by_non_friend":if((n==null?void 0:n.myMemberState)!=="invited"||pN(n==null?void 0:n.inviter))return!1;break}if(I)switch(I){case"unhidden_only":if(n!=null&&n.isHidden||(n==null?void 0:n.hiddenState)!=="unhidden")return!1;break;case"hidden_only":if(!(n!=null&&n.isHidden))return!1;break;case"hidden_allow_auto_unhide":if(!(n!=null&&n.isHidden)||(n==null?void 0:n.hiddenState)!=="hidden_allow_auto_unhide")return!1;break;case"hidden_prevent_auto_unhide":if(!(n!=null&&n.isHidden)||(n==null?void 0:n.hiddenState)!=="hidden_prevent_auto_unhide")return!1;break}if(L)switch(L){case"unread_message":if((n==null?void 0:n.unreadMessageCount)===0)return!1;break}if(D)switch(D){case"public":if(!(n!=null&&n.isPublic))return!1;break;case"private":if(n!=null&&n.isPublic)return!1;break}if(O)switch(O){case"super":if(!(n!=null&&n.isSuper))return!1;break;case"nonsuper":if(n!=null&&n.isSuper)return!1;break}var ne=n.cachedMetaData,j=ne===void 0?{}:ne;if(k&&(G||V)){var Z=j[k];if(!Z||G&&!G.every(function(ie){return Z.includes(ie)})||V&&!Z.startsWith(V))return!1}return!0},C7=function(e,n){var t=si(n).with(er.CHANNEL_NAME_ALPHABETICAL,function(){return function(r,i){return r.name.localeCompare(i.name)}}).with(er.CHRONOLOGICAL,function(){return function(r,i){return i.createdAt-r.createdAt}}).otherwise(function(){return function(r,i){var a,s,o,l;return((s=(a=i.lastMessage)===null||a===void 0?void 0:a.createdAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER)-((l=(o=r.lastMessage)===null||o===void 0?void 0:o.createdAt)!==null&&l!==void 0?l:Number.MIN_SAFE_INTEGER)}});return e.sort(t)},wc=function(e,n,t){var r=Ae([],e,!0),i=r.findIndex(function(a){return a.url===n.url});return i!==-1?r[i]=n:r.push(n),C7(r,t??er.LATEST_LAST_MESSAGE)},_N;(function(e){e.normal="normal",e.mention="mention",e.url="url"})(_N||(_N={}));var b7=function(e,n){if(Array.isArray(e)&&Array.isArray(n)&&e.length===n.length){for(var t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}return!1},Vu=function(e){return!!e&&"sender"in e},S7=function(e){return r7(e.createdAt,e.invitedAt)&&!e.lastMessage},rC=function(e,n){return n?"ltr":e},Cn=function(){},Fo=function(e){var n={};return Object.entries(e).forEach(function(t){var r=t[0],i=t[1];i!=null&&(n[r]=i)}),n};function cd(e){var n=e;n&&(!n.startsWith("http://")&&!n.startsWith("https://")&&(n="https://"+n),window.open(n,"_blank","noopener,noreferrer"))}function Zt(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.filter(Boolean).join(" ")}var dd=gA(),T7={en:{MESSAGE_STATUS__YESTERDAY:"Yesterday",CHANNEL__MESSAGE_LIST__NOTIFICATION__NEW_MESSAGE:"new message(s) since",CHANNEL__MESSAGE_LIST__NOTIFICATION__ON:"on",CHANNEL_PREVIEW_MOBILE_LEAVE:"Leave channel",CHANNEL_SETTING__HEADER__TITLE:"Channel information",CHANNEL_SETTING__PROFILE__EDIT:"Edit",CHANNEL_SETTING__MEMBERS__TITLE:"Members",CHANNEL_SETTING__MEMBERS__SEE_ALL_MEMBERS:"All members",CHANNEL_SETTING__MEMBERS__INVITE_MEMBER:"Invite users",CHANNEL_SETTING__MEMBERS__YOU:" (You)",CHANNEL_SETTING__MEMBERS__SELECT_TITLE:"Select members",CHANNEL_SETTING__MEMBERS__OPERATOR:"Operator",CHANNEL_SETTING__LEAVE_CHANNEL__TITLE:"Leave channel",CHANNEL_SETTING__OPERATORS__TITLE:"Operators",CHANNEL_SETTING__OPERATORS__TITLE_ALL:"All operators",CHANNEL_SETTING__OPERATORS__TITLE_ADD:"Add operator",CHANNEL_SETTING__OPERATORS__ADD_BUTTON:"Add",CHANNEL_SETTING__MUTED_MEMBERS__TITLE:"Muted members",CHANNEL_SETTING__MUTED_MEMBERS__TITLE_ALL:"All muted members",CHANNEL_SETTING__NO_UNMUTED:"No muted members yet",CHANNEL_SETTING__BANNED_MEMBERS__TITLE:"Banned users",CHANNEL_SETTING__FREEZE_CHANNEL:"Freeze Channel",CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR:"Register as operator",CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR:"Unregister operator",CHANNEL_SETTING__MODERATION__MUTE:"Mute",CHANNEL_SETTING__MODERATION__UNMUTE:"Unmute",CHANNEL_SETTING__MODERATION__BAN:"Ban",CHANNEL_SETTING__MODERATION__UNBAN:"Unban",CHANNEL_SETTING__MODERATION__EMPTY_BAN:"No banned members yet",CHANNEL_SETTING__MODERATION__ALL_BAN:"All banned members",OPEN_CHANNEL_CONVERSATION__TITLE_PARTICIPANTS:"participants",OPEN_CHANNEL_CONVERSATION__SELECT_PARTICIPANTS:"Select participants",OPEN_CHANNEL_LIST__TITLE:"Channels",CREATE_OPEN_CHANNEL_LIST__TITLE:"New channel profile",CREATE_OPEN_CHANNEL_LIST__SUBTITLE__IMG_SECTION:"Channel image",CREATE_OPEN_CHANNEL_LIST__SUBTITLE__IMG_UPLOAD:"Upload",CREATE_OPEN_CHANNEL_LIST__SUBTITLE__TEXT_SECTION:"Channel name",CREATE_OPEN_CHANNEL_LIST__SUBTITLE__TEXT_PLACE_HOLDER:"Enter channel name",CREATE_OPEN_CHANNEL_LIST__SUBMIT:"Create",OPEN_CHANNEL_SETTINGS__OPERATOR_TITLE:"Channel Information",OPEN_CHANNEL_SETTINGS__OPERATOR_URL:"URL",OPEN_CHANNEL_SETTINGS__PARTICIPANTS_ACCORDION_TITLE:"Participants",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_PANEL:"Delete channel",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_TITLE:"Delete channel?",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_CONTEXT:"Once deleted, this channel can't be restored.",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_SUBMIT:"Delete",OPEN_CHANNEL_SETTINGS__OPERATORS_TITLE:"Operators",OPEN_CHANNEL_SETTINGS__OPERATORS__TITLE_ADD:"Add operator",OPEN_CHANNEL_SETTINGS__OPERATORS__TITLE_ALL:"All operators",OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE:"Muted participants",OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE_ALL:"All muted participants",OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__NO_ONE:"No muted participants yet",OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__TITLE:"Banned users",OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__TITLE_ALL:"All banned users",OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__NO_ONE:"No banned users yet",OPEN_CHANNEL_SETTINGS__MEMBERS__YOU:" (You)",OPEN_CHANNEL_SETTINGS__MEMBERS__OPERATOR:"Operator",OPEN_CHANNEL_SETTINGS__PARTICIPANTS_TITLE:"Participants",OPEN_CHANNEL_SETTINGS__EMPTY_LIST:"No participants yet",OPEN_CHANNEL_SETTINGS__SEE_ALL:"See all participants",OPEN_CHANNEL_SETTINGS__ALL_PARTICIPANTS_TITLE:"All participants",OPEN_CHANNEL_SETTINGS__NO_TITLE:"(No title)",OPEN_CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR:"Register as operator",OPEN_CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR:"Unregister operator",OPEN_CHANNEL_SETTING__MODERATION__MUTE:"Mute",OPEN_CHANNEL_SETTING__MODERATION__UNMUTE:"Unmute",OPEN_CHANNEL_SETTING__MODERATION__BAN:"Ban",OPEN_CHANNEL_SETTING__MODERATION__UNBAN:"Unban",TRYING_TO_CONNECT:"Trying to connect…",TYPING_INDICATOR__IS_TYPING:"is typing...",TYPING_INDICATOR__AND:"and",TYPING_INDICATOR__ARE_TYPING:"are typing...",TYPING_INDICATOR__MULTIPLE_TYPING:"Several people are typing...",CHANNEL_FROZEN:"Channel frozen",PLACE_HOLDER__NO_CHANNEL:"No channels",PLACE_HOLDER__WRONG:"Something went wrong",PLACE_HOLDER__RETRY_TO_CONNECT:"Retry",PLACE_HOLDER__NO_MESSAGES:"No messages",TOOLTIP__AND_YOU:", and you",TOOLTIP__YOU:"you",TOOLTIP__UNKNOWN_USER:"(no name)",UNKNOWN__UNKNOWN_MESSAGE_TYPE:"(Unknown message type)",UNKNOWN__CANNOT_READ_MESSAGE:"Cannot read this message.",UNKNOWN__TEMPLATE_ERROR:"(Template error)",FORM_VERSION_ERROR:"Form type messages are not available in this version.",UNKNOWN__CANNOT_READ_TEMPLATE:"Cannot read this template.",MESSAGE_EDITED:"(edited)",MODAL__DELETE_MESSAGE__TITLE:"Delete this message?",MODAL__CHANNEL_INFORMATION__TITLE:"Edit channel information",MODAL__CHANNEL_INFORMATION__CHANNEL_IMAGE:"Channel image",MODAL__CHANNEL_INFORMATION__UPLOAD:"Upload",MODAL__CHANNEL_INFORMATION__CHANNEL_NAME:"Channel name",MODAL__CHANNEL_INFORMATION__INPUT__PLACE_HOLDER:"Enter name",MODAL__INVITE_MEMBER__TITLE:"Invite member",MODAL__INVITE_MEMBER__SELECTED:"selected",MODAL__CHOOSE_CHANNEL_TYPE__TITLE:"New channel",MODAL__CHOOSE_CHANNEL_TYPE__GROUP:"Group",MODAL__CHOOSE_CHANNEL_TYPE__SUPER_GROUP:"Super group",MODAL__CHOOSE_CHANNEL_TYPE__BROADCAST:"Broadcast",MODAL__CREATE_CHANNEL__TITLE:"New channel",MODAL__CREATE_CHANNEL__GROUP:"Group",MODAL__CREATE_CHANNEL__SUPER:"Super group",MODAL__CREATE_CHANNEL__BROADCAST:"Broadcast",MODAL__CREATE_CHANNEL__SELECTED:"selected",MODAL__LEAVE_CHANNEL__TITLE:"Leave this channel?",MODAL__LEAVE_CHANNEL__FOOTER:"Leave",MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_MUTED:"You're muted by the operator.",MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_FROZEN:"Channel is frozen.",USER_PROFILE__MESSAGE:"Message",USER_PROFILE__USER_ID:"User ID",EDIT_PROFILE__TITLE:"My profile",EDIT_PROFILE__IMAGE_LABEL:"Profile image",EDIT_PROFILE__IMAGE_UPLOAD:"Upload",EDIT_PROFILE__NICKNAME_LABEL:"Nickname",EDIT_PROFILE__NICKNAME_PLACEHOLDER:"Enter your nickname",EDIT_PROFILE__USERID_LABEL:"User ID",EDIT_PROFILE__THEME_LABEL:"Dark theme",MESSAGE_INPUT__PLACE_HOLDER:"Enter message",MESSAGE_INPUT__PLACE_HOLDER__DISABLED:"Chat is unavailable in this channel",MESSAGE_INPUT__PLACE_HOLDER__SUGGESTED_REPLIES:"Please choose one from above",MESSAGE_INPUT__PLACE_HOLDER__MESSAGE_FORM:"Please fill out the message form.",MESSAGE_INPUT__PLACE_HOLDER__FROZEN:"Chat is unavailable in this channel",MESSAGE_INPUT__PLACE_HOLDER__MUTED:"Chat is unavailable because you're muted",MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT:"You're muted",MESSAGE_INPUT__QUOTE_REPLY__PLACE_HOLDER:"Reply to message",BUTTON__SUBMIT:"Submit",BUTTON__CANCEL:"Cancel",BUTTON__DELETE:"Delete",BUTTON__SAVE:"Save",BUTTON__CREATE:"Create",BUTTON__INVITE:"Invite",BUTTON__OK:"OK",BADGE__OVER:"+",NO_TITLE:"No title",NO_NAME:"(No name)",NO_MEMBERS:"(No members)",LABEL__OPERATOR:"Operator",MESSAGE_MENU__COPY:"Copy",MESSAGE_MENU__REPLY:"Reply",MESSAGE_MENU__THREAD:"Reply in thread",MESSAGE_MENU__OPEN_IN_CHANNEL:"Open in channel",MESSAGE_MENU__EDIT:"Edit",MESSAGE_MENU__RESEND:"Resend",MESSAGE_MENU__DELETE:"Delete",MESSAGE_MENU__SAVE:"Save",CONTEXT_MENU_DROPDOWN__COPY:"Copy",CONTEXT_MENU_DROPDOWN__EDIT:"Edit",CONTEXT_MENU_DROPDOWN__RESEND:"Resend",CONTEXT_MENU_DROPDOWN__DELETE:"Delete",CONTEXT_MENU_DROPDOWN__SAVE:"Save",SEARCH:"Search",SEARCH_IN_CHANNEL:"Search in channel",SEARCH_IN:"Search in",SEARCHING:"Searching for messages...",NO_SEARCHED_MESSAGE:"No results found.",QUOTE_MESSAGE_INPUT__REPLY_TO:"Reply to",QUOTE_MESSAGE_INPUT__FILE_TYPE_IMAGE:"Photo",QUOTE_MESSAGE_INPUT__FILE_TYPE_GIF:"GIF",QUOTE_MESSAGE_INPUT__FILE_TYPE__VIDEO:"Video",QUOTED_MESSAGE__REPLIED_TO:"replied to",QUOTED_MESSAGE__CURRENT_USER:"You",QUOTED_MESSAGE__UNAVAILABLE:"Message unavailable",THREAD__HEADER_TITLE:"Thread",CHANNEL__THREAD_REPLY:"reply",CHANNEL__THREAD_REPLIES:"replies",CHANNEL__THREAD_OVER_MAX:"99+",THREAD__THREAD_REPLY:"reply",THREAD__THREAD_REPLIES:"replies",THREAD__INPUT__REPLY_TO_THREAD:"Reply to thread",THREAD__INPUT__REPLY_IN_THREAD:"Reply in thread",MENTION_NAME__NO_NAME:"(No name)",MENTION_COUNT__OVER_LIMIT:"You can mention up to %d times at a time.",UI__FILE_VIEWER__UNSUPPORT:"Unsupported message",VOICE_RECORDING_PERMISSION_DENIED:`You cannot record the voice since
        voice recording is not permitted in your device system setting`,VOICE_MESSAGE:"Voice Message",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_GIF:"GIF",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_PHOTO:"Photo",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_VIDEO:"Video",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_AUDIO:"Audio",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_VOICE_MESSAGE:"Voice message",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_GENERAL:"File",CHANNEL_PREVIEW_LAST_MESSAGE_TEMPLATE_MESSAGE:"Message",DATE_FORMAT__MESSAGE_LIST__NOTIFICATION__UNREAD_SINCE:"p 'on' MMM dd",DATE_FORMAT__MESSAGE_LIST__DATE_SEPARATOR:"MMMM dd, yyyy",DATE_FORMAT__THREAD_LIST__DATE_SEPARATOR:"MMM dd, yyyy",DATE_FORMAT__MESSAGE_CREATED_AT:"p",DATE_FORMAT__UNREAD_SINCE:"p MMM dd",DATE_FORMAT__LAST_MESSAGE_CREATED_AT__TODAY:"p",DATE_FORMAT__LAST_MESSAGE_CREATED_AT__THIS_YEAR:"MMM d",DATE_FORMAT__LAST_MESSAGE_CREATED_AT__PREVIOUS_YEAR:"yyyy/M/d",FILE_UPLOAD_NOTIFICATION__COUNT_LIMIT:"Up to %d files can be attached.",FILE_UPLOAD_NOTIFICATION__SIZE_LIMIT:"The maximum size per file is %d MB.",FEEDBACK_LIKE:"Like",FEEDBACK_DISLIKE:"Dislike",EDIT_COMMENT:"Edit comment",REMOVE_FEEDBACK:"Remove Feedback",FEEDBACK_MODAL_TITLE:"Provide additional feedback (optional)",FEEDBACK_CONTENT_PLACEHOLDER:"Leave a comment",BUTTON__REMOVE_FEEDBACK:"Remove feedback",FEEDBACK_FAILED_SUBMIT:"Couldn’t submit. Try again.",FEEDBACK_FAILED_SAVE:"Couldn’t save. Try again.",FEEDBACK_FAILED_DELETE:"Couldn’t delete. Try again.",FORM_ITEM_REQUIRED:"This field is required",FORM_ITEM_INVALID:"Please check the value",FORM_ITEM_OPTIONAL_EMPTY:"No Response"}},iC=function(e){return T7[e]},N7={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},I7=function(n,t,r){var i,a=N7[n];return typeof a=="string"?i=a:t===1?i=a.one:i=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};function K_(e){return function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=n.width?String(n.width):e.defaultWidth,r=e.formats[t]||e.formats[e.defaultWidth];return r}}var M7={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},A7={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},w7={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},R7={date:K_({formats:M7,defaultWidth:"full"}),time:K_({formats:A7,defaultWidth:"full"}),dateTime:K_({formats:w7,defaultWidth:"full"})},O7={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},D7=function(n,t,r,i){return O7[n]};function eh(e){return function(n,t){var r=t!=null&&t.context?String(t.context):"standalone",i;if(r==="formatting"&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,s=t!=null&&t.width?String(t.width):a;i=e.formattingValues[s]||e.formattingValues[a]}else{var o=e.defaultWidth,l=t!=null&&t.width?String(t.width):e.defaultWidth;i=e.values[l]||e.values[o]}var u=e.argumentCallback?e.argumentCallback(n):n;return i[u]}}var L7={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},U7={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},k7={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},P7={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},x7={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},F7={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},H7=function(n,t){var r=Number(n),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},B7={ordinalNumber:H7,era:eh({values:L7,defaultWidth:"wide"}),quarter:eh({values:U7,defaultWidth:"wide",argumentCallback:function(n){return n-1}}),month:eh({values:k7,defaultWidth:"wide"}),day:eh({values:P7,defaultWidth:"wide"}),dayPeriod:eh({values:x7,defaultWidth:"wide",formattingValues:F7,defaultFormattingWidth:"wide"})};function th(e){return function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=n.match(i);if(!a)return null;var s=a[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?V7(o,function(f){return f.test(s)}):G7(o,function(f){return f.test(s)}),u;u=e.valueCallback?e.valueCallback(l):l,u=t.valueCallback?t.valueCallback(u):u;var d=n.slice(s.length);return{value:u,rest:d}}}function G7(e,n){for(var t in e)if(e.hasOwnProperty(t)&&n(e[t]))return t}function V7(e,n){for(var t=0;t<e.length;t++)if(n(e[t]))return t}function z7(e){return function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.match(e.matchPattern);if(!r)return null;var i=r[0],a=n.match(e.parsePattern);if(!a)return null;var s=e.valueCallback?e.valueCallback(a[0]):a[0];s=t.valueCallback?t.valueCallback(s):s;var o=n.slice(i.length);return{value:s,rest:o}}}var j7=/^(\d+)(th|st|nd|rd)?/i,q7=/\d+/i,K7={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},$7={any:[/^b/i,/^(a|c)/i]},W7={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Q7={any:[/1/i,/2/i,/3/i,/4/i]},Y7={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},X7={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Z7={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},J7={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},eH={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},tH={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},nH={ordinalNumber:z7({matchPattern:j7,parsePattern:q7,valueCallback:function(n){return parseInt(n,10)}}),era:th({matchPatterns:K7,defaultMatchWidth:"wide",parsePatterns:$7,defaultParseWidth:"any"}),quarter:th({matchPatterns:W7,defaultMatchWidth:"wide",parsePatterns:Q7,defaultParseWidth:"any",valueCallback:function(n){return n+1}}),month:th({matchPatterns:Y7,defaultMatchWidth:"wide",parsePatterns:X7,defaultParseWidth:"any"}),day:th({matchPatterns:Z7,defaultMatchWidth:"wide",parsePatterns:J7,defaultParseWidth:"any"}),dayPeriod:th({matchPatterns:eH,defaultMatchWidth:"any",parsePatterns:tH,defaultParseWidth:"any"})},P2={code:"en-US",formatDistance:I7,formatLong:R7,formatRelative:D7,localize:B7,match:nH,options:{weekStartsOn:0,firstWeekContainsDate:1}},x2={stringSet:iC("en"),dateLocale:P2},wn=v.createContext(x2),rH=function(e){var n=e.children;return v.createElement(wn.Provider,{value:x(x({},x2),e)},n)},Ft=function(){var e=v.useContext(wn);if(!e)throw new Error("`useLocalization` hook must be used within `SendbirdProvider` that includes `LocalizationProvider`.");return e},iH=!1,F2="sendbird--mobile-mode",H2=v.createContext({breakpoint:iH,isMobile:!1}),gN=function(){try{var e=document.querySelector("body");e==null||e.classList.add(F2)}catch{}},EN=function(){try{var e=document.querySelector("body");e==null||e.classList.remove(F2)}catch{}},aH=function(e){var n=e.children,t=e.logger,r=(e==null?void 0:e.breakpoint)||!1,i=N.useState(!1),a=i[0],s=i[1];return N.useEffect(function(){var o,l=function(){var u;if(typeof r=="boolean")s(r),r?gN():EN();else{var d=window.matchMedia("(max-width: ".concat(r,")"));(u=t==null?void 0:t.info)===null||u===void 0||u.call(t,"MediaQueryProvider: Screensize updated to ".concat(r)),d.matches?(s(!0),gN()):(s(!1),EN())}};return l(),window.addEventListener("resize",l),(o=t==null?void 0:t.info)===null||o===void 0||o.call(t,"MediaQueryProvider: addEventListener",{updateSize:l}),function(){var u;window.removeEventListener("resize",l),(u=t==null?void 0:t.info)===null||u===void 0||u.call(t,"MediaQueryProvider: removeEventListener",{updateSize:l})}},[r]),v.createElement(H2.Provider,{value:{breakpoint:r,isMobile:a}},n)},_r=function(){return v.useContext(H2)},fa=v.forwardRef(function(e,n){var t=e.className,r=t===void 0?"":t,i=e.children,a=e.disabled,s=a===void 0?!1:a,o=e.width,l=o===void 0?"56px":o,u=e.height,d=u===void 0?"56px":u,f=e.type,p=f===void 0?"button":f,m=e.style,E=m===void 0?{}:m,g=e.onBlur,y=g===void 0?function(){}:g,S=e.onClick,C=S===void 0?function(){}:S,T=e.testID,I=N.useState(!1),L=I[0],D=I[1];return v.createElement("button",{"data-testid":T,className:Ae(Ae([],Array.isArray(r)?r:[r],!0),["sendbird-iconbutton",L?"sendbird-iconbutton--pressed":""],!1).join(" "),disabled:s,ref:n,type:p,style:x(x({},E),{height:d,width:l}),onClick:function(O){s||(D(!0),C==null||C(O))},onBlur:function(O){D(!1),y==null||y(O)}},v.createElement("span",{className:"sendbird-iconbutton__inner"},i))}),Ca={H_1:"H_1",H_2:"H_2",SUBTITLE_1:"SUBTITLE_1",SUBTITLE_2:"SUBTITLE_2",BODY_1:"BODY_1",BODY_2:"BODY_2",BUTTON_1:"BUTTON_1",BUTTON_2:"BUTTON_2",BUTTON_3:"BUTTON_3",CAPTION_1:"CAPTION_1",CAPTION_2:"CAPTION_2",CAPTION_3:"CAPTION_3"},ba={ONBACKGROUND_1:"ONBACKGROUND_1",ONBACKGROUND_2:"ONBACKGROUND_2",ONBACKGROUND_3:"ONBACKGROUND_3",ONBACKGROUND_4:"ONBACKGROUND_4",ONCONTENT_1:"ONCONTENT_1",ONCONTENT_2:"ONCONTENT_2",ONCONTENT_3:"ONCONTENT_3",ONCONTENT_INVERSE_1:"ONCONTENT_INVERSE_1",ONCONTENT_INVERSE_3:"ONCONTENT_INVERSE_3",PRIMARY:"PRIMARY",ERROR:"ERROR",SECONDARY_3:"SECONDARY_3"};function sH(e){switch(e){case Ca.H_1:return"sendbird-label--h-1";case Ca.H_2:return"sendbird-label--h-2";case Ca.SUBTITLE_1:return"sendbird-label--subtitle-1";case Ca.SUBTITLE_2:return"sendbird-label--subtitle-2";case Ca.BODY_1:return"sendbird-label--body-1";case Ca.BODY_2:return"sendbird-label--body-2";case Ca.BUTTON_1:return"sendbird-label--button-1";case Ca.BUTTON_2:return"sendbird-label--button-2";case Ca.BUTTON_3:return"sendbird-label--button-3";case Ca.CAPTION_1:return"sendbird-label--caption-1";case Ca.CAPTION_2:return"sendbird-label--caption-2";case Ca.CAPTION_3:return"sendbird-label--caption-3";default:return""}}function B2(e){switch(e){case ba.ONBACKGROUND_1:return"sendbird-label--color-onbackground-1";case ba.ONBACKGROUND_2:return"sendbird-label--color-onbackground-2";case ba.ONBACKGROUND_3:return"sendbird-label--color-onbackground-3";case ba.ONBACKGROUND_4:return"sendbird-label--color-onbackground-4";case ba.ONCONTENT_1:return"sendbird-label--color-oncontent-1";case ba.ONCONTENT_2:return"sendbird-label--color-oncontent-2";case ba.ONCONTENT_3:return"sendbird-label--color-oncontent-3";case ba.ONCONTENT_INVERSE_1:return"sendbird-label--color-oncontent-inverse-1";case ba.ONCONTENT_INVERSE_3:return"sendbird-label--color-oncontent-inverse-3";case ba.PRIMARY:return"sendbird-label--color-primary";case ba.ERROR:return"sendbird-label--color-error";case ba.SECONDARY_3:return"sendbird-label--color-secondary-3";default:return""}}var Ie=N.forwardRef(function(e,n){var t=e.className,r=t===void 0?[]:t,i=e.type,a=e.color,s=e.children,o=s===void 0?null:s,l=e.testID;return v.createElement("span",{className:Ae(Ae([],Array.isArray(r)?r:[r],!0),["sendbird-label",sH(i),B2(a)],!1).join(" "),ref:n,"data-testid":l},o)}),Ce=Ca,de=ba,zu=iC("en"),Gn;(function(e){e.PRIMARY="PRIMARY",e.SECONDARY="SECONDARY",e.DANGER="DANGER",e.DISABLED="DISABLED",e.WARNING="WARNING"})(Gn||(Gn={}));var va;(function(e){e.BIG="BIG",e.SMALL="SMALL"})(va||(va={}));function oH(e){switch(e){case Gn.PRIMARY:return"sendbird-button--primary";case Gn.SECONDARY:return"sendbird-button--secondary";case Gn.DANGER:return"sendbird-button--danger";case Gn.DISABLED:return"sendbird-button--disabled";case Gn.WARNING:return"sendbird-button--warning";default:return""}}function lH(e){switch(e){case va.BIG:return"sendbird-button--big";case va.SMALL:return"sendbird-button--small";default:return""}}function Oi(e){var n=e.className,t=e.type,r=t===void 0?Gn.PRIMARY:t,i=e.size,a=i===void 0?va.BIG:i,s=e.children,o=s===void 0?"Button":s,l=e.disabled,u=l===void 0?!1:l,d=e.onClick,f=d===void 0?function(){}:d,p=e.labelType,m=p===void 0?Ce.BUTTON_1:p,E=e.labelColor,g=E===void 0?de.ONCONTENT_1:E,y=Ae(Ae([],Array.isArray(n)?n:[n],!0),["sendbird-button",u?"sendbird-button__disabled":"",oH(r),lH(a)],!1).join(" ");return v.createElement("button",{className:y,type:"button",onClick:f,disabled:u},v.createElement(Ie,{className:"sendbird-button__text",type:m,color:g},o))}var $e={ADD:"ADD",ARROW_LEFT:"ARROW_LEFT",ATTACH:"ATTACH",AUDIO_ON_LINED:"AUDIO_ON_LINED",BAN:"BAN",BROADCAST:"BROADCAST",CAMERA:"CAMERA",CHANNELS:"CHANNELS",CHAT:"CHAT",CHAT_FILLED:"CHAT_FILLED",CHEVRON_DOWN:"CHEVRON_DOWN",CHEVRON_RIGHT:"CHEVRON_RIGHT",CLOSE:"CLOSE",COLLAPSE:"COLLAPSE",COPY:"COPY",CREATE:"CREATE",DELETE:"DELETE",DISCONNECTED:"DISCONNECTED",DOCUMENT:"DOCUMENT",DONE:"DONE",DONE_ALL:"DONE_ALL",DOWNLOAD:"DOWNLOAD",EDIT:"EDIT",EMOJI_MORE:"EMOJI_MORE",ERROR:"ERROR",EXPAND:"EXPAND",FILE_AUDIO:"FILE_AUDIO",FILE_DOCUMENT:"FILE_DOCUMENT",FREEZE:"FREEZE",GIF:"GIF",INFO:"INFO",LEAVE:"LEAVE",MEMBERS:"MEMBERS",MESSAGE:"MESSAGE",MODERATIONS:"MODERATIONS",MORE:"MORE",MUTE:"MUTE",NOTIFICATIONS:"NOTIFICATIONS",NOTIFICATIONS_OFF_FILLED:"NOTIFICATIONS_OFF_FILLED",OPERATOR:"OPERATOR",PHOTO:"PHOTO",PLAY:"PLAY",PLUS:"PLUS",QUESTION:"QUESTION",REFRESH:"REFRESH",REPLY:"REPLY",REMOVE:"REMOVE",SEARCH:"SEARCH",SEND:"SEND",SETTINGS_FILLED:"SETTINGS_FILLED",SLIDE_LEFT:"SLIDE_LEFT",SPINNER:"SPINNER",SUPERGROUP:"SUPERGROUP",THREAD:"THREAD",THUMBNAIL_NONE:"THUMBNAIL_NONE",TOGGLE_OFF:"TOGGLE_OFF",TOGGLE_ON:"TOGGLE_ON",USER:"USER",FEEDBACK_LIKE:"FEEDBACK_LIKE",FEEDBACK_DISLIKE:"FEEDBACK_DISLIKE"},Qr={DEFAULT:"DEFAULT",PRIMARY:"PRIMARY",PRIMARY_2:"PRIMARY_2",SECONDARY:"SECONDARY",SECONDARY_2:"SECONDARY_2",CONTENT:"CONTENT",CONTENT_INVERSE:"CONTENT_INVERSE",CONTENT_INVERSE_3:"CONTENT_INVERSE_3",WHITE:"WHITE",GRAY:"GRAY",THUMBNAIL_ICON:"THUMBNAIL_ICON",SENT:"SENT",READ:"READ",ON_BACKGROUND_1:"ON_BACKGROUND_1",ON_BACKGROUND_2:"ON_BACKGROUND_2",ON_BACKGROUND_3:"ON_BACKGROUND_3",ON_BACKGROUND_4:"ON_BACKGROUND_4",BACKGROUND_3:"BACKGROUND_3",ERROR:"ERROR"};function uH(e){switch(e){case Qr.PRIMARY:return"sendbird-icon-color--primary";case Qr.PRIMARY_2:return"sendbird-icon-color--primary-2";case Qr.SECONDARY:return"sendbird-icon-color--secondary";case Qr.SECONDARY_2:return"sendbird-icon-color--secondary-2";case Qr.CONTENT:return"sendbird-icon-color--content";case Qr.CONTENT_INVERSE:return"sendbird-icon-color--content-inverse";case Qr.CONTENT_INVERSE_3:return"sendbird-icon-color--content-inverse-3";case Qr.WHITE:return"sendbird-icon-color--white";case Qr.GRAY:return"sendbird-icon-color--gray";case Qr.THUMBNAIL_ICON:return"sendbird-icon-color--thumbnail-icon";case Qr.SENT:return"sendbird-icon-color--sent";case Qr.READ:return"sendbird-icon-color--read";case Qr.ON_BACKGROUND_1:return"sendbird-icon-color--on-background-1";case Qr.ON_BACKGROUND_2:return"sendbird-icon-color--on-background-2";case Qr.ON_BACKGROUND_3:return"sendbird-icon-color--on-background-3";case Qr.ON_BACKGROUND_4:return"sendbird-icon-color--on-background-4";case Qr.BACKGROUND_3:return"sendbird-icon-color--background-3";case Qr.ERROR:return"sendbird-icon-color--error";default:return""}}function cH(e){switch(e){case $e.ADD:return"sendbird-icon-add";case $e.ARROW_LEFT:return"sendbird-icon-arrow-left";case $e.ATTACH:return"sendbird-icon-attach";case $e.AUDIO_ON_LINED:return"sendbird-icon-audio-on-lined";case $e.BAN:return"sendbird-icon-ban";case $e.BROADCAST:return"sendbird-icon-broadcast";case $e.CAMERA:return"sendbird-icon-camera";case $e.CHANNELS:return"sendbird-icon-channels";case $e.CHAT:return"sendbird-icon-chat";case $e.CHAT_FILLED:return"sendbird-icon-chat-filled";case $e.CHEVRON_DOWN:return"sendbird-icon-chevron-down";case $e.CHEVRON_RIGHT:return"sendbird-icon-chevron-right";case $e.CLOSE:return"sendbird-icon-close";case $e.COLLAPSE:return"sendbird-icon-collapse";case $e.COPY:return"sendbird-icon-copy";case $e.CREATE:return"sendbird-icon-create";case $e.DELETE:return"sendbird-icon-delete";case $e.DISCONNECTED:return"sendbird-icon-disconnected";case $e.DOCUMENT:return"sendbird-icon-document";case $e.DONE:return"sendbird-icon-done";case $e.DONE_ALL:return"sendbird-icon-done-all";case $e.DOWNLOAD:return"sendbird-icon-down-load";case $e.EDIT:return"sendbird-icon-edit";case $e.EMOJI_MORE:return"sendbird-icon-emoji-more";case $e.ERROR:return"sendbird-icon-error";case $e.EXPAND:return"sendbird-icon-expand";case $e.FILE_AUDIO:return"sendbird-icon-file-audio";case $e.FILE_DOCUMENT:return"sendbird-icon-file-document";case $e.FREEZE:return"sendbird-icon-freeze";case $e.GIF:return"sendbird-icon-gif";case $e.INFO:return"sendbird-icon-info";case $e.LEAVE:return"sendbird-icon-leave";case $e.MEMBERS:return"sendbird-icon-members";case $e.MESSAGE:return"sendbird-icon-message";case $e.MODERATIONS:return"sendbird-icon-moderations";case $e.MORE:return"sendbird-icon-more";case $e.MUTE:return"sendbird-icon-mute";case $e.NOTIFICATIONS:return"sendbird-icon-notifications";case $e.NOTIFICATIONS_OFF_FILLED:return"sendbird-icon-notifications-off-filled";case $e.OPERATOR:return"sendbird-icon-operator";case $e.PHOTO:return"sendbird-icon-photo";case $e.PLAY:return"sendbird-icon-play";case $e.PLUS:return"sendbird-iconn-plus";case $e.QUESTION:return"sendbird-icon-question";case $e.REFRESH:return"sendbird-icon-refresh";case $e.REMOVE:return"sendbird-icon-remove";case $e.REPLY:return"sendbird-icon-reply";case $e.SEARCH:return"sendbird-icon-search";case $e.SEND:return"sendbird-icon-send";case $e.SETTINGS_FILLED:return"sendbird-icon-settings-filled";case $e.SPINNER:return"sendbird-icon-spinner";case $e.SUPERGROUP:return"sendbird-icon-supergroup";case $e.THREAD:return"sendbird-icon-thread";case $e.THUMBNAIL_NONE:return"sendbird-icon-thumbnail-none";case $e.TOGGLE_OFF:return"sendbird-icon-toggle-off";case $e.TOGGLE_ON:return"sendbird-icon-toggle-on";case $e.USER:return"sendbird-icon-user";case $e.FEEDBACK_LIKE:return"sendbird-icon-feedback-like";case $e.FEEDBACK_DISLIKE:return"sendbird-icon-feedback-dislike";default:return"sendbird-icon-unknown"}}var yN;function Wg(){return Wg=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Wg.apply(null,arguments)}const dH=e=>N.createElement("svg",Wg({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),yN||(yN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M50.667 5.333a8 8 0 0 1 8 8v37.334a8 8 0 0 1-8 8H13.333a8 8 0 0 1-8-8V13.333a8 8 0 0 1 8-8zm0 5.334H13.333a2.667 2.667 0 0 0-2.666 2.666v37.334a2.667 2.667 0 0 0 2.666 2.666h37.334a2.667 2.667 0 0 0 2.666-2.666V13.333a2.667 2.667 0 0 0-2.666-2.666m-18.667 8a2.667 2.667 0 0 1 2.649 2.355l.018.311v8h8a2.667 2.667 0 0 1 .311 5.316l-.311.018h-8v8a2.667 2.667 0 0 1-5.316.311l-.018-.311v-8h-8a2.667 2.667 0 0 1-.311-5.316l.311-.018h8v-8A2.667 2.667 0 0 1 32 18.667",className:"icon-add_svg__fill"})));var CN;function Qg(){return Qg=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Qg.apply(null,arguments)}const hH=e=>N.createElement("svg",Qg({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),CN||(CN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M33.886 8.781a2.67 2.67 0 0 1 .221 3.52l-.221.251-16.78 16.781H56a2.667 2.667 0 0 1 .311 5.316l-.311.018-38.895-.001 16.78 16.782a2.666 2.666 0 0 1 .222 3.52l-.221.251a2.67 2.67 0 0 1-3.52.222l-.252-.222L8.781 33.886a2.67 2.67 0 0 1-.222-3.52l.222-.252L30.114 8.781a2.67 2.67 0 0 1 3.772 0",className:"icon-arrow-left_svg__fill"})));var bN;function Yg(){return Yg=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Yg.apply(null,arguments)}const fH=e=>N.createElement("svg",Yg({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),bN||(bN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m55.334 28.926-24.506 23.34c-5.222 4.973-13.74 4.973-18.962 0-5.149-4.903-5.149-12.797 0-17.7l24.506-23.34c3.138-2.988 8.278-2.988 11.416 0 3.064 2.919 3.064 7.594 0 10.513L23.255 45.077c-1.055 1.005-2.815 1.005-3.87.001-.98-.933-.98-2.39 0-3.325l22.64-21.535a2.667 2.667 0 0 0-3.676-3.864L15.709 37.89a7.58 7.58 0 0 0-.001 11.05c3.113 2.966 8.11 2.966 11.224 0l24.533-23.338c5.272-5.021 5.272-13.217 0-18.238-5.197-4.95-13.573-4.95-18.77 0L8.187 30.704c-7.356 7.005-7.356 18.419 0 25.424 7.281 6.935 19.036 6.935 26.318 0l24.506-23.34a2.666 2.666 0 1 0-3.678-3.862z",className:"icon-attach_svg__fill"})));var SN,TN;function Xg(){return Xg=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Xg.apply(null,arguments)}const vH=e=>N.createElement("svg",Xg({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 64 64"},e),SN||(SN=N.createElement("g",{clipPath:"url(#icon-audio-on-lined_svg__a)"},N.createElement("path",{d:"M32 0C26.11 0 21.333 4.776 21.333 10.667V32c0 5.891 4.776 10.667 10.667 10.667S42.667 37.89 42.667 32V10.667C42.667 4.776 37.89 0 32 0m-5.333 10.667a5.333 5.333 0 0 1 10.666 0V32a5.333 5.333 0 0 1-10.666 0z",className:"icon-audio-on-lined_svg__fill",clipRule:"evenodd"}),N.createElement("path",{d:"M16 26.667a2.667 2.667 0 1 0-5.333 0V32c0 10.879 8.143 19.856 18.666 21.168v5.499h-8a2.667 2.667 0 0 0 0 5.333h21.334a2.667 2.667 0 1 0 0-5.333h-8v-5.499C45.19 51.856 53.333 42.88 53.333 32v-5.333a2.667 2.667 0 1 0-5.333 0V32c0 8.837-7.163 16-16 16s-16-7.163-16-16z",className:"icon-audio-on-lined_svg__fill"}))),TN||(TN=N.createElement("defs",null,N.createElement("clipPath",{id:"icon-audio-on-lined_svg__a"},N.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"})))));var NN;function Zg(){return Zg=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Zg.apply(null,arguments)}const pH=e=>N.createElement("svg",Zg({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),NN||(NN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32s10.745 24 24 24 24-10.745 24-24S45.255 8 32 8m12.333 21.333a1 1 0 0 1 1 1v3.334a1 1 0 0 1-1 1H19.667a1 1 0 0 1-1-1v-3.334a1 1 0 0 1 1-1z",className:"icon-ban_svg__fill"})));var IN;function Jg(){return Jg=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Jg.apply(null,arguments)}const mH=e=>N.createElement("svg",Jg({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),IN||(IN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M58.545 5.498q.121.389.122.796v46.079a2.666 2.666 0 0 1-3.462 2.546l-17.951-5.61c-.645 5.273-5.14 9.358-10.587 9.358C20.776 58.667 16 53.89 16 48v-5.334h-5.333a8 8 0 0 1-7.997-7.75l-.003-.25V24a8 8 0 0 1 8-8H16L55.205 3.749a2.665 2.665 0 0 1 3.34 1.75zM21.333 44.587V48a5.333 5.333 0 0 0 10.652.398L32 47.92zm32-34.667-32 9.997v18.83l32 9.997zM16 21.333h-5.333a2.67 2.67 0 0 0-2.65 2.356L8 24v10.667a2.667 2.667 0 0 0 2.667 2.666H16z",className:"icon-broadcast_svg__fill"})));var MN;function eE(){return eE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},eE.apply(null,arguments)}const _H=e=>N.createElement("svg",eE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),MN||(MN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M40 5.333c.892 0 1.724.446 2.219 1.188l4.541 6.812H56a8 8 0 0 1 7.986 7.53l.014.47v29.334a8 8 0 0 1-8 8H8a8 8 0 0 1-8-8V21.333a8 8 0 0 1 8-8h9.237l4.544-6.812a2.67 2.67 0 0 1 1.888-1.167l.331-.02zm-1.43 5.334H25.428l-4.542 6.812a2.66 2.66 0 0 1-1.887 1.167l-.331.02H8a2.67 2.67 0 0 0-2.667 2.667v29.334A2.667 2.667 0 0 0 8 53.333h48a2.667 2.667 0 0 0 2.667-2.666V21.333A2.667 2.667 0 0 0 56 18.667H45.333a2.67 2.67 0 0 1-2.218-1.188zM32 21.333c7.364 0 13.333 5.97 13.333 13.334S39.363 48 32 48s-13.333-5.97-13.333-13.333S24.637 21.333 32 21.333m0 5.334a8 8 0 1 0 0 16 8 8 0 0 0 0-16",className:"icon-camera_svg__fill"})));var AN;function tE(){return tE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},tE.apply(null,arguments)}const gH=e=>N.createElement("svg",tE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),AN||(AN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m42.65 5.333.311.017a2.666 2.666 0 0 1 2.373 2.633l-.017.311-1.45 13.04h9.466a2.667 2.667 0 0 1 .311 5.315l-.31.018H43.271l-1.184 10.666h11.245a2.667 2.667 0 0 1 .312 5.316l-.31.018H41.495l-1.512 13.627a2.667 2.667 0 0 1-5.318-.277l.017-.311 1.448-13.04H25.496l-1.512 13.628a2.667 2.667 0 0 1-5.318-.277l.017-.311 1.448-13.04h-9.464a2.667 2.667 0 0 1-.311-5.315l.31-.018h10.057l1.186-10.667H10.667a2.667 2.667 0 0 1-.311-5.315l.31-.018h11.835l1.515-13.627a2.67 2.67 0 0 1 2.634-2.373l.311.017a2.666 2.666 0 0 1 2.373 2.633l-.017.311-1.45 13.04H38.5l1.515-13.628a2.67 2.67 0 0 1 2.634-2.373zm-5.927 32 1.186-10.667H27.272l-1.184 10.667z",className:"icon-channels_svg__fill"})));var wN;function nE(){return nE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},nE.apply(null,arguments)}const EH=e=>N.createElement("svg",nE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),wN||(wN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62 62 0 0 0 4.886-1.363l1.721-.568 2.04-.696 1.95.917A23.9 23.9 0 0 0 32 56c13.255 0 24-10.745 24-24S45.255 8 32 8",className:"icon-chat_svg__fill"})));var RN;function rE(){return rE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},rE.apply(null,arguments)}const yH=e=>N.createElement("svg",rE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),RN||(RN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667",className:"icon-chat-filled_svg__fill"})));var ON;function iE(){return iE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},iE.apply(null,arguments)}const CH=e=>N.createElement("svg",iE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),ON||(ON=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M16.121 21.879a3 3 0 0 0-4.242 0 3 3 0 0 0 0 4.242l18 18a3 3 0 0 0 4.242 0l18-18a3 3 0 0 0 0-4.242 3 3 0 0 0-4.242 0L32 37.757z",className:"icon-chevron-down_svg__fill"})));var DN;function aE(){return aE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},aE.apply(null,arguments)}const bH=e=>N.createElement("svg",aE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),DN||(DN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M22.114 46.114a2.668 2.668 0 0 0 3.772 3.772l16-16a2.67 2.67 0 0 0 0-3.772l-16-16a2.668 2.668 0 0 0-3.772 3.772L36.23 32z",className:"icon-chevron-right_svg__fill"})));var LN;function sE(){return sE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},sE.apply(null,arguments)}const SH=e=>N.createElement("svg",sE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),LN||(LN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M52.552 11.448a2.666 2.666 0 0 1 .222 3.52l-.222.251-16.781 16.78 16.781 16.782a2.665 2.665 0 0 1 0 3.771 2.666 2.666 0 0 1-3.52.222l-.251-.222L32 35.771 15.219 52.552a2.665 2.665 0 0 1-3.771 0 2.666 2.666 0 0 1-.222-3.52l.222-.251L28.228 32l-16.78-16.781a2.665 2.665 0 0 1 0-3.771 2.666 2.666 0 0 1 3.52-.222l.251.222 16.78 16.78 16.782-16.78a2.665 2.665 0 0 1 3.771 0",className:"icon-close_svg__fill"})));var UN;function oE(){return oE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},oE.apply(null,arguments)}const TH=e=>N.createElement("svg",oE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),UN||(UN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M16 8a2.667 2.667 0 0 0-2.649 2.356l-.018.31v42.667a2.667 2.667 0 0 0 5.316.311l.018-.31V34.666h25.56l-6.113 6.114a2.67 2.67 0 0 0-.221 3.52l.221.251a2.666 2.666 0 0 0 3.52.222l.252-.222 10.666-10.666a2.666 2.666 0 0 0 .222-3.52l-.222-.252-10.666-10.666a2.666 2.666 0 0 0-3.993 3.52l.221.251 6.113 6.114h-25.56V10.667A2.667 2.667 0 0 0 16 8",className:"icon-collapse_svg__fill"})));var kN;function lE(){return lE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},lE.apply(null,arguments)}const NH=e=>N.createElement("svg",lE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),kN||(kN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M53.333 21.333a8 8 0 0 1 8 8v24a8 8 0 0 1-8 8h-24a8 8 0 0 1-8-8v-24a8 8 0 0 1 8-8zm0 5.334h-24a2.667 2.667 0 0 0-2.666 2.666v24A2.667 2.667 0 0 0 29.333 56h24A2.667 2.667 0 0 0 56 53.333v-24a2.667 2.667 0 0 0-2.667-2.666m-18.666-24a8 8 0 0 1 7.986 7.53l.014.47v2.666a2.667 2.667 0 0 1-5.316.311l-.018-.31v-2.667a2.67 2.67 0 0 0-2.355-2.65L34.667 8h-24a2.67 2.67 0 0 0-2.65 2.356l-.017.31v24a2.67 2.67 0 0 0 2.356 2.65l.31.017h2.667a2.667 2.667 0 0 1 .311 5.316l-.31.018h-2.667a8 8 0 0 1-7.987-7.53l-.013-.47v-24c0-4.26 3.33-7.743 7.53-7.987l.47-.013z",className:"icon-copy_svg__fill"})));var PN;function uE(){return uE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},uE.apply(null,arguments)}const IH=e=>N.createElement("svg",uE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),PN||(PN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62 62 0 0 0 4.886-1.363l1.721-.568 2.04-.696 1.95.917A23.9 23.9 0 0 0 32 56c13.255 0 24-10.745 24-24S45.255 8 32 8m2.667 16v5.333H40c3.556 0 3.556 5.334 0 5.334h-5.333V40c0 3.556-5.334 3.556-5.334 0v-5.333H24c-3.556 0-3.556-5.334 0-5.334h5.333V24c0-3.556 5.334-3.556 5.334 0",className:"icon-create_svg__fill"})));var xN;function cE(){return cE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},cE.apply(null,arguments)}const MH=e=>N.createElement("svg",cE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),xN||(xN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M37.333 2.667c4.26 0 7.743 3.33 7.987 7.53l.013.47v2.666H56a2.667 2.667 0 0 1 .311 5.316l-.311.018h-2.668l.001 34.666c0 4.26-3.33 7.743-7.53 7.987l-.47.013H18.667a8 8 0 0 1-7.987-7.53l-.013-.47V18.667H8a2.667 2.667 0 0 1-.311-5.316L8 13.333h10.666v-2.666a8 8 0 0 1 7.53-7.987l.47-.013zm10.666 16H16v34.666a2.67 2.67 0 0 0 2.356 2.65l.31.017h26.667a2.67 2.67 0 0 0 2.65-2.356l.017-.31zm-21.332 8a2.667 2.667 0 0 1 2.648 2.355l.018.311v16a2.667 2.667 0 0 1-5.316.311l-.017-.31v-16a2.667 2.667 0 0 1 2.667-2.667m10.666 0a2.67 2.67 0 0 1 2.65 2.355l.017.311v16a2.667 2.667 0 0 1-5.315.311l-.018-.31v-16a2.667 2.667 0 0 1 2.666-2.667m0-18.667H26.667a2.67 2.67 0 0 0-2.65 2.356l-.017.31v2.667h16v-2.666a2.67 2.67 0 0 0-2.356-2.65L37.334 8z",className:"icon-delete_svg__fill"})));var FN;function dE(){return dE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},dE.apply(null,arguments)}const AH=e=>N.createElement("svg",dE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),FN||(FN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m54.534 6.069-.248.217-9.736 9.735-.04.04-9.573 9.573q-.226.178-.405.404L6.286 54.286a2.423 2.423 0 0 0 3.18 3.645l.248-.217 13.374-13.373a2.42 2.42 0 0 0 1.88-.401 12.12 12.12 0 0 1 14.04 0 2.424 2.424 0 1 0 2.808-3.952 16.95 16.95 0 0 0-11.303-3.072l6.743-6.744a24.1 24.1 0 0 1 10.159 5.021 2.424 2.424 0 0 0 3.11-3.719 29 29 0 0 0-9.34-5.23l5.633-5.634a36.2 36.2 0 0 1 9.225 5.934 2.425 2.425 0 0 0 3.211-3.633 41 41 0 0 0-8.796-5.941l7.256-7.256a2.423 2.423 0 0 0-3.18-3.645m-35.04 21.474a29 29 0 0 0-6.032 3.942 2.424 2.424 0 0 0 3.137 3.697 24 24 0 0 1 5.022-3.282 2.425 2.425 0 0 0-2.127-4.357M4.748 22.909a2.424 2.424 0 0 0 3.207 3.636 36.36 36.36 0 0 1 26.978-8.977 2.424 2.424 0 0 0 .389-4.832A41.2 41.2 0 0 0 4.748 22.909",className:"icon-disconnected_svg__fill"})));var HN;function hE(){return hE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},hE.apply(null,arguments)}const wH=e=>N.createElement("svg",hE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),HN||(HN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M37.333 2.667a3 3 0 0 1 .274.014l.085.01.058.008q.07.01.141.026l.029.007q.075.016.146.037l.034.01q.357.107.663.303l.034.022q.053.034.104.072l.057.043q.045.033.085.068.091.075.176.16l-.126-.117q.075.065.143.135L55.21 19.438q.07.07.134.143l.035.04q.04.047.076.096l.04.054.07.1.024.038c.16.253.279.535.347.836l.01.048q.014.064.024.13l.006.048.007.051.004.041q.014.135.014.27v32a8 8 0 0 1-8 8H16a8 8 0 0 1-8-8V10.667a8 8 0 0 1 8-8zM34.666 8H16a2.667 2.667 0 0 0-2.667 2.667v42.666A2.667 2.667 0 0 0 16 56h32a2.667 2.667 0 0 0 2.667-2.667L50.666 24H37.333a2.667 2.667 0 0 1-2.648-2.356l-.018-.31zm12.227 10.667-6.894-6.894.001 6.894z",className:"icon-document_svg__fill"})));var BN;function fE(){return fE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},fE.apply(null,arguments)}const RH=e=>N.createElement("svg",fE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),BN||(BN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M12.552 31.448a2.665 2.665 0 1 0-3.771 3.771l13.333 13.333a2.666 2.666 0 0 0 3.772 0L55.219 19.22a2.667 2.667 0 0 0-3.771-3.771L24 42.895z",className:"icon-done_svg__fill"})));var GN;function vE(){return vE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},vE.apply(null,arguments)}const OH=e=>N.createElement("svg",vE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),GN||(GN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M5.886 31.448 19.219 44.78a2.667 2.667 0 0 1-3.771 3.771L2.114 35.22a2.667 2.667 0 0 1 3.772-3.771zm52.228-16a2.666 2.666 0 1 1 3.772 3.771L32.552 48.552a2.665 2.665 0 0 1-3.771 0L15.448 35.22a2.665 2.665 0 0 1 0-3.771 2.665 2.665 0 0 1 3.771 0l11.448 11.447zm-9.562 0a2.665 2.665 0 0 1 0 3.771L32.556 35.215a2.665 2.665 0 0 1-3.771 0 2.664 2.664 0 0 1 0-3.77L44.78 15.447a2.665 2.665 0 0 1 3.771 0z",className:"icon-done-all_svg__fill"})));var VN;function pE(){return pE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},pE.apply(null,arguments)}const DH=e=>N.createElement("svg",pE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),VN||(VN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M56 42.667a2.667 2.667 0 0 1 2.649 2.355l.018.311v8c0 4.26-3.33 7.743-7.53 7.987l-.47.013H13.333a8 8 0 0 1-7.986-7.53l-.014-.47v-8a2.667 2.667 0 0 1 5.316-.311l.018.311v8a2.67 2.67 0 0 0 2.355 2.65l.311.017h37.334a2.667 2.667 0 0 0 2.648-2.356l.018-.31v-8A2.667 2.667 0 0 1 56 42.667m-36.552-8.781a2.666 2.666 0 0 1 3.52-3.993l.251.221 6.114 6.114V5.333a2.667 2.667 0 0 1 5.316-.311l.018.311v30.894l6.114-6.113a2.67 2.67 0 0 1 3.52-.221l.251.221a2.666 2.666 0 0 1 .222 3.52l-.222.252-10.658 10.657a2 2 0 0 1-.135.128l.127-.119a3 3 0 0 1-.195.176l-.056.045-.086.064-.056.04-.086.056-.06.036-.081.046-.079.04a3 3 0 0 1-.14.065l-.09.036q-.034.014-.067.025l-.09.03-.063.019q-.064.018-.13.034l-.013.003-.144.028-.064.01q-.045.008-.092.012l-.084.008-.103.006-.069.002h-.095q-.042 0-.082-.003l.139.003q-.126 0-.249-.011l-.061-.007-.092-.012-.09-.015-.118-.025-.04-.01a3 3 0 0 1-.34-.11l-.015-.006q-.074-.03-.145-.063l-.042-.02L30.71 45l-.067-.039q-.045-.026-.087-.054l-.062-.041q-.045-.03-.088-.063l-.04-.03-.008-.007a3 3 0 0 1-.251-.223z",className:"icon-download_svg__fill"})));var zN;function mE(){return mE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},mE.apply(null,arguments)}const LH=e=>N.createElement("svg",mE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 65 65"},e),zN||(zN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M56 56a2.667 2.667 0 0 1 .311 5.315l-.311.018H8a2.667 2.667 0 0 1-.311-5.316L8 56zM35.448 3.448a2.665 2.665 0 0 1 3.771 0l10.667 10.666a2.67 2.67 0 0 1 0 3.772L20.552 47.219c-.5.5-1.178.781-1.885.781H8a2.667 2.667 0 0 1-2.667-2.667V34.667c0-.708.281-1.386.781-1.886zm1.885 5.659L10.667 35.77v6.896h6.89L44.227 16z",className:"icon-edit_svg__fill"})));var jN;function _E(){return _E=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},_E.apply(null,arguments)}const UH=e=>N.createElement("svg",_E({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),jN||(jN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32.097 3.22c2.65 0 5.255.357 7.763 1.054a2.134 2.134 0 0 1-1.144 4.111 24.7 24.7 0 0 0-6.619-.899c-13.603 0-24.63 11.027-24.63 24.63s11.027 24.63 24.63 24.63 24.63-11.027 24.63-24.63c0-2.227-.295-4.413-.87-6.518a2.13 2.13 0 0 1 1.494-2.62 2.13 2.13 0 0 1 2.62 1.494 29 29 0 0 1 1.023 7.644c0 15.96-12.938 28.897-28.897 28.897-15.96 0-28.897-12.937-28.897-28.897S16.138 3.22 32.097 3.22m10.705 34.792a2.133 2.133 0 0 1 2.024 2.808c-1.873 5.623-6.937 9.488-12.729 9.488s-10.856-3.865-12.73-9.488a2.134 2.134 0 0 1 1.875-2.803l.15-.005zm-3.477 4.266H24.867l.294.382c1.539 1.887 3.718 3.113 6.115 3.342l.314.024.507.015c2.617 0 5.037-1.188 6.743-3.151l.193-.23zM21.392 21.954c1.087 0 1.985.814 2.116 1.866l.017.267v5.353a2.133 2.133 0 0 1-4.25.268l-.017-.268v-5.353c0-1.178.955-2.133 2.134-2.133m21.41 0c1.088 0 1.985.814 2.117 1.866l.017.267v5.353a2.133 2.133 0 0 1-4.25.268l-.017-.268v-5.353c0-1.178.955-2.133 2.133-2.133M54.853 0a.8.8 0 0 1 .8.8v7.786h7.76a.8.8 0 0 1 .8.8v2.667a.8.8 0 0 1-.8.8h-7.76v7.758a.8.8 0 0 1-.8.8h-2.666a.8.8 0 0 1-.8-.8v-7.758h-7.785a.8.8 0 0 1-.8-.8V9.387a.8.8 0 0 1 .8-.8l7.784-.001V.8a.8.8 0 0 1 .8-.8z",className:"icon-emoji-more_svg__fill"})));var qN;function gE(){return gE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},gE.apply(null,arguments)}const kH=e=>N.createElement("svg",gE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),qN||(qN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 5.06a8 8 0 0 1 6.561 3.424l.287.439 22.608 37.744a8 8 0 0 1 .022 7.962 8 8 0 0 1-6.356 4.014l-.535.024H9.384a8 8 0 0 1-6.862-4.038 8.01 8.01 0 0 1-.226-7.493l.27-.506L25.16 8.91A8 8 0 0 1 32 5.06m0 5.333c-.816 0-1.58.372-2.076.99l-.196.28-22.565 37.67a2.67 2.67 0 0 0 1.909 3.973l.341.027h45.144a2.67 2.67 0 0 0 2.45-3.659l-.148-.304L34.28 11.676A2.67 2.67 0 0 0 32 10.393m0 32.274A2.667 2.667 0 1 1 32 48a2.667 2.667 0 0 1 0-5.333m0-21.334a2.667 2.667 0 0 1 2.649 2.356l.018.311v10.667a2.667 2.667 0 0 1-5.316.311l-.018-.311V24A2.667 2.667 0 0 1 32 21.333",className:"icon-error_svg__fill"})));var KN;function EE(){return EE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},EE.apply(null,arguments)}const PH=e=>N.createElement("svg",EE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),KN||(KN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M48 8a2.667 2.667 0 0 1 2.649 2.356l.018.31V32l-.001.027v21.306a2.667 2.667 0 0 1-5.315.311l-.018-.31V34.665H19.772l6.114 6.115a2.67 2.67 0 0 1 .221 3.52l-.221.251a2.666 2.666 0 0 1-3.52.222l-.252-.222-10.666-10.666a2.666 2.666 0 0 1-.222-3.52l.222-.252 10.666-10.666a2.666 2.666 0 0 1 3.993 3.52l-.221.251-6.113 6.114h25.56V10.667A2.667 2.667 0 0 1 48 8",className:"icon-expand_svg__fill"})));var $N;function yE(){return yE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},yE.apply(null,arguments)}const xH=e=>N.createElement("svg",yE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),$N||($N=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M30.52 12.51c1.685-1.226 4.139-.103 4.139 1.893v35.194c0 1.996-2.454 3.119-4.138 1.893l-12.45-9.909H7.898c-1.416 0-2.564-1.074-2.564-2.399V24.818c0-1.325 1.148-2.4 2.564-2.4h10.175zm20.427.163c10.293 10.667 10.293 27.987 0 38.654a2.137 2.137 0 0 1-3.156-.047c-.86-.942-.84-2.448.044-3.364 8.49-8.799 8.49-23.033 0-31.832-.884-.916-.904-2.422-.044-3.364a2.137 2.137 0 0 1 3.156-.047m-8.492 8.799c5.597 5.8 5.597 15.231 0 21.031a2.136 2.136 0 0 1-3.156-.046c-.86-.942-.84-2.448.044-3.364 3.794-3.932 3.794-10.279 0-14.211-.884-.916-.904-2.422-.044-3.363a2.136 2.136 0 0 1 3.156-.047",className:"icon-file-audio_svg__fill"})));var WN;function CE(){return CE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},CE.apply(null,arguments)}const FH=e=>N.createElement("svg",CE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),WN||(WN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M39.414 6.4a2.4 2.4 0 0 1 1.71.701l12.642 12.75c.407.41.634.953.634 1.516v29.765c0 3.542-4.342 6.468-8 6.468H16.16c-3.658 0-6.4-2.926-6.4-6.468L9.6 12.868c0-3.542 2.902-6.468 6.56-6.468zm3.331 35.173-21.49.027-.147.005c-1.066.08-1.908 1.014-1.908 2.155 0 1.193.92 2.16 2.055 2.16l21.49-.027.147-.005c1.066-.08 1.908-1.014 1.908-2.155 0-1.193-.92-2.16-2.055-2.16m0-8.533-21.49.027-.147.005c-1.066.08-1.908 1.014-1.908 2.155 0 1.193.92 2.16 2.055 2.16l21.49-.027.147-.005c1.066-.08 1.908-1.014 1.908-2.155 0-1.193-.92-2.16-2.055-2.16m-11.807-8.507h-9.6l-.153.006a2.15 2.15 0 0 0-1.985 2.154c0 1.193.957 2.16 2.138 2.16h9.6l.152-.005a2.15 2.15 0 0 0 1.985-2.155c0-1.193-.957-2.16-2.137-2.16",className:"icon-file-document_svg__fill"})));var QN;function bE(){return bE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},bE.apply(null,arguments)}const HH=e=>N.createElement("svg",bE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),QN||(QN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m41.636 3.226.251.222a2.67 2.67 0 0 1 .222 3.52l-.222.251-7.219 7.218V27.38l11.209-6.472 2.643-9.86a2.667 2.667 0 0 1 5.218 1.051l-.067.329-2.237 8.35 8.352 2.24a2.67 2.67 0 0 1 1.952 2.938l-.067.328a2.67 2.67 0 0 1-2.937 1.952l-.329-.066-9.861-2.643L37.334 32l11.209 6.47 9.862-2.64.329-.067a2.67 2.67 0 0 1 2.937 1.952l.067.328a2.67 2.67 0 0 1-1.952 2.938l-8.353 2.237 2.238 8.353.067.329a2.666 2.666 0 0 1-5.218 1.052l-2.643-9.861-11.209-6.472v12.944l7.219 7.218a2.667 2.667 0 0 1-3.52 3.993l-.251-.222L32 54.437l-6.114 6.115a2.666 2.666 0 0 1-3.52.222l-.251-.222a2.666 2.666 0 0 1-.222-3.52l.222-.251 7.218-7.22V36.62l-11.209 6.47-2.642 9.863a2.666 2.666 0 0 1-5.218-1.052l.067-.329 2.236-8.351-8.35-2.24a2.665 2.665 0 0 1-1.953-2.937l.067-.328a2.665 2.665 0 0 1 2.937-1.952l.329.066 9.861 2.642L26.667 32l-11.209-6.472-9.86 2.643-.329.066a2.665 2.665 0 0 1-2.937-1.952l-.067-.328a2.67 2.67 0 0 1 1.952-2.938l8.35-2.239-2.235-8.351-.067-.329a2.667 2.667 0 0 1 5.218-1.052l2.642 9.862 11.209 6.47V14.439L22.116 7.22a2.665 2.665 0 0 1 0-3.771 2.666 2.666 0 0 1 3.52-.222l.251.222 6.114 6.112 6.115-6.112a2.666 2.666 0 0 1 3.52-.222z",className:"icon-freeze_svg__fill"})));var YN;function SE(){return SE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},SE.apply(null,arguments)}const BH=e=>N.createElement("svg",SE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),YN||(YN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M16.664 45.333q3.233 0 5.89-.953 2.658-.954 4.113-2.683V31.34h-10.29v3.94h4.902v4.474q-1.292 1.284-4.327 1.283-3.017 0-4.58-2.085-1.561-2.085-1.562-6.168v-1.657q.018-4.047 1.455-6.097t4.184-2.05q2.155 0 3.385 1.034t1.59 3.262h5.243q-.486-4.206-3.107-6.408t-7.273-2.201q-3.34 0-5.827 1.506t-3.807 4.35q-1.32 2.843-1.32 6.728v1.765q.036 3.78 1.428 6.578 1.392 2.797 3.95 4.269 2.56 1.47 5.953 1.47m20.67 0V18.667H32v26.666h5.333zm10.396 0V34.436h9.721v-4.432H47.73v-6.887h10.937v-4.45h-16v26.666z",className:"icon-gif_svg__fill"})));var XN;function TE(){return TE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},TE.apply(null,arguments)}const GH=e=>N.createElement("svg",TE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),XN||(XN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32s10.745 24 24 24 24-10.745 24-24S45.255 8 32 8m1.667 21.333a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-3.334a1 1 0 0 1-1-1v-14a1 1 0 0 1 1-1zm-1.667-8a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334",className:"icon-info_svg__fill"})));var ZN;function NE(){return NE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},NE.apply(null,arguments)}const VH=e=>N.createElement("svg",NE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),ZN||(ZN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 5.333a2.667 2.667 0 0 1 .311 5.316l-.311.018H10.667a2.67 2.67 0 0 0-2.65 2.355L8 13.333v37.334a2.667 2.667 0 0 0 2.356 2.648l.31.018H32a2.667 2.667 0 0 1 .311 5.316l-.311.018H10.667a8 8 0 0 1-7.987-7.53l-.013-.47V13.333a8 8 0 0 1 7.53-7.986l.47-.014zm17.634 13.893.252.222 10.666 10.666a2.666 2.666 0 0 1 .222 3.52l-.222.252-10.666 10.666a2.666 2.666 0 0 1-3.993-3.52l.221-.251 4.78-4.782L20 36a2.667 2.667 0 0 1-.311-5.315l.311-.018h33.56l-7.446-7.448a2.67 2.67 0 0 1-.221-3.52l.221-.251a2.666 2.666 0 0 1 3.52-.222",className:"icon-leave_svg__fill"})));var JN;function IE(){return IE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},IE.apply(null,arguments)}const zH=e=>N.createElement("svg",IE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),JN||(JN=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M34.667 37.333c7.17 0 13.018 5.66 13.32 12.755l.013.579V56a2.667 2.667 0 0 1-5.315.311L42.667 56v-5.333c0-4.26-3.33-7.743-7.53-7.987l-.47-.013H13.333a8 8 0 0 0-7.986 7.53l-.014.47V56a2.667 2.667 0 0 1-5.316.311L0 56v-5.333c0-7.17 5.66-13.019 12.755-13.321l.578-.013zM54 37.765a13.33 13.33 0 0 1 9.986 12.297l.014.605V56a2.667 2.667 0 0 1-5.315.311L58.667 56v-5.331a8 8 0 0 0-6-7.74A2.667 2.667 0 1 1 54 37.765M24 5.333c7.364 0 13.333 5.97 13.333 13.334S31.363 32 24 32s-13.333-5.97-13.333-13.333S16.637 5.333 24 5.333m19.328.43a13.333 13.333 0 0 1 0 25.834 2.667 2.667 0 1 1-1.323-5.167 8 8 0 0 0 0-15.5 2.667 2.667 0 1 1 1.323-5.167M24 10.667a8 8 0 1 0 0 16 8 8 0 0 0 0-16",className:"icon-members_svg__fill"})));var eI;function ME(){return ME=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ME.apply(null,arguments)}const jH=e=>N.createElement("svg",ME({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),eI||(eI=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62 62 0 0 0 4.886-1.363l1.721-.568 2.04-.696 1.95.917A23.9 23.9 0 0 0 32 56c13.255 0 24-10.745 24-24S45.255 8 32 8M18.667 29.333a2.667 2.667 0 1 1-.001 5.333 2.667 2.667 0 0 1 .001-5.333m13.333 0a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334m13.333 0a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334",className:"icon-message_svg__fill"})));var tI;function AE(){return AE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},AE.apply(null,arguments)}const qH=e=>N.createElement("svg",AE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),tI||(tI=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M18.667 34.667a2.667 2.667 0 0 1 .311 5.316l-.311.017h-5.334v16a2.667 2.667 0 0 1-5.316.311L8 56V40H2.667a2.667 2.667 0 0 1-.311-5.315l.31-.018h16zM32 29.333a2.667 2.667 0 0 1 2.649 2.356l.018.311v24a2.667 2.667 0 0 1-5.316.311L29.333 56V32A2.667 2.667 0 0 1 32 29.333M61.333 40a2.667 2.667 0 0 1 .311 5.315l-.31.018h-5.335L56 56a2.667 2.667 0 0 1-5.315.311L50.667 56l-.001-10.668-5.333.001a2.667 2.667 0 0 1-.311-5.316l.311-.017zm-8-34.667a2.67 2.67 0 0 1 2.65 2.356L56 8v24a2.667 2.667 0 0 1-5.315.311L50.667 32V8a2.667 2.667 0 0 1 2.666-2.667m-42.666 0a2.667 2.667 0 0 1 2.648 2.356l.018.311v18.667a2.667 2.667 0 0 1-5.316.311L8 26.667V8a2.667 2.667 0 0 1 2.667-2.667m21.333 0a2.667 2.667 0 0 1 2.649 2.356l.018.311-.001 10.666H40a2.668 2.668 0 0 1 .311 5.317L40 24H24a2.667 2.667 0 0 1-.311-5.315l.311-.018h5.333V8A2.667 2.667 0 0 1 32 5.333",className:"icon-moderations_svg__fill"})));var nI;function wE(){return wE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},wE.apply(null,arguments)}const KH=e=>N.createElement("svg",wE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),nI||(nI=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 45.333a5.333 5.333 0 1 1 0 10.666 5.333 5.333 0 0 1 0-10.666M32 28a5.333 5.333 0 1 1 0 10.668A5.333 5.333 0 0 1 32 28m0-17.333c2.946 0 5.333 2.387 5.333 5.333S34.946 21.333 32 21.333 26.667 18.946 26.667 16s2.387-5.333 5.333-5.333",className:"icon-more_svg__fill"})));var rI;function RE(){return RE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},RE.apply(null,arguments)}const $H=e=>N.createElement("svg",RE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),rI||(rI=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m55.62 19.616.067.123A26.55 26.55 0 0 1 58.667 32c0 4.326-1.03 8.41-2.864 12.025q-1.518 4.089-.67 6.363 1.066 2.855 2.662 4.758 2.31 2.379-1.506 3.33-3.135.782-10.879-1.646l-.488-.155-1.594-.527A26.6 26.6 0 0 1 32 58.667a26.55 26.55 0 0 1-12.326-3.014l-.059-.03 4-4A21.2 21.2 0 0 0 32 53.333c2.993 0 5.89-.614 8.562-1.786l.498-.226 1.925-.905 3.613 1.196.695.219q1.093.337 2.054.595l.472.125.485.121-.167-.42-.2-.594c-.814-2.685-.484-5.681.713-9.065l.154-.425.106-.284.528-1.084a21.2 21.2 0 0 0 1.895-8.8 21.2 21.2 0 0 0-1.71-8.385zm2.266-13.502a2.67 2.67 0 0 1 .221 3.52l-.221.252-48 48a2.668 2.668 0 0 1-3.993-3.52l.221-.252 5.238-5.237a26.56 26.56 0 0 1-6.015-16.412L5.333 32C5.333 17.272 17.273 5.333 32 5.333a26.55 26.55 0 0 1 16.877 6.02l5.237-5.239a2.67 2.67 0 0 1 3.772 0M32 10.667c-11.782 0-21.333 9.55-21.333 21.333 0 4.836 1.614 9.401 4.48 13.084l29.936-29.938A21.25 21.25 0 0 0 32 10.666z",className:"icon-mute_svg__fill"})));var iI;function OE(){return OE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},OE.apply(null,arguments)}const WH=e=>N.createElement("svg",OE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),iI||(iI=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M36.613 53.333c2.056 0 3.338 2.227 2.307 4.005a8 8 0 0 1-13.84 0c-.98-1.689.129-3.783 2.004-3.988l.303-.017zM32 2.667c11.56 0 20.972 9.194 21.323 20.669l.01.664v13.333a5.334 5.334 0 0 0 4.936 5.319l.753.033c2.963.318 3.077 4.616.342 5.24l-.342.056-.355.019H5.333l-.355-.019c-3.082-.33-3.082-4.965 0-5.296l.753-.033a5.335 5.335 0 0 0 4.92-4.9l.016-.419V24c0-11.782 9.55-21.333 21.333-21.333M32 8c-8.636 0-15.674 6.842-15.989 15.4L16 24v13.333c0 1.562-.336 3.046-.939 4.383l-.275.564-.218.387h34.861l-.215-.387a10.6 10.6 0 0 1-1.146-3.74l-.055-.674-.013-.533V24c0-8.837-7.163-16-16-16",className:"icon-notifications_svg__fill"})));var aI;function DE(){return DE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},DE.apply(null,arguments)}const QH=e=>N.createElement("svg",DE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),aI||(aI=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M36.613 53.333c2.056 0 3.338 2.227 2.307 4.005a8 8 0 0 1-13.84 0c-.98-1.689.129-3.783 2.004-3.988l.303-.017zM32 2.667c7.173 0 13.52 3.54 17.387 8.97l5.686-5.687a2.105 2.105 0 0 1 2.85-.117l.127.117a2.105 2.105 0 0 1 0 2.977L8.927 58.05c-.78.781-2.023.82-2.85.117l-.127-.117a2.105 2.105 0 0 1 0-2.977L13.023 48h-7.69l-.355-.019c-3.082-.33-3.082-4.965 0-5.296l.753-.033a5.335 5.335 0 0 0 4.92-4.9l.016-.419V24c0-11.782 9.55-21.333 21.333-21.333m20.85 16.795c.271 1.253.433 2.548.473 3.874l.01.664v13.333a5.334 5.334 0 0 0 4.936 5.319l.753.033c2.963.318 3.077 4.616.342 5.24l-.342.056-.355.019H24.31z",className:"icon-notifications-off-filled_svg__fill"})));var sI;function LE(){return LE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},LE.apply(null,arguments)}const YH=e=>N.createElement("svg",LE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),sI||(sI=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M29.83 6.45a2.667 2.667 0 0 1 4.34 0l11.697 16.374L57 13.918c1.88-1.504 4.573.054 4.32 2.35l-.047.29-8 37.334A2.666 2.666 0 0 1 50.666 56H13.333a2.666 2.666 0 0 1-2.607-2.108l-8-37.333c-.525-2.452 2.315-4.207 4.273-2.641l11.132 8.906zM32 12.587l-11.163 15.63a2.667 2.667 0 0 1-3.836.532l-7.497-5.997 5.984 27.915h33.021l5.984-27.915L47 28.749a2.667 2.667 0 0 1-3.632-.281l-.204-.251zM32 32a5.333 5.333 0 1 1 0 10.668A5.333 5.333 0 0 1 32 32",className:"icon-operator_svg__fill"})));var oI;function UE(){return UE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},UE.apply(null,arguments)}const XH=e=>N.createElement("svg",UE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),oI||(oI=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M50.667 5.333a8 8 0 0 1 8 8v37.334a8 8 0 0 1-8 8H13.333a8 8 0 0 1-8-8V13.333a8 8 0 0 1 8-8zm-8 25.107L19.77 53.332l30.896.001a2.667 2.667 0 0 0 2.661-2.498l.005-.168v-9.564L42.666 30.44zm8-19.773H13.333a2.667 2.667 0 0 0-2.666 2.666v37.334c0 1.143.72 2.119 1.731 2.498L40.781 24.78a2.67 2.67 0 0 1 3.52-.222l.251.222 8.78 8.78.001-20.228a2.667 2.667 0 0 0-2.498-2.661zm-28 5.333a6.666 6.666 0 1 1 0 13.333 6.666 6.666 0 0 1 0-13.333m0 5.333a1.334 1.334 0 1 0 0 2.667 1.334 1.334 0 0 0 0-2.667",className:"icon-photo_svg__fill"})));var lI;function kE(){return kE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},kE.apply(null,arguments)}const ZH=e=>N.createElement("svg",kE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),lI||(lI=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M51.908 34.75c1.9-1.233 1.896-3.26.013-4.514L19.376 8.577c-1.893-1.26-3.404-.391-3.376 1.968l.522 42.888c.028 2.347 1.596 3.247 3.493 2.016z",className:"icon-play_svg__fill"})));var uI;function PE(){return PE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},PE.apply(null,arguments)}const JH=e=>N.createElement("svg",PE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),uI||(uI=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M34.667 29.333h18.666c3.556 0 3.556 5.334 0 5.334H34.667v18.666c0 3.556-5.334 3.556-5.334 0V34.667H10.667c-3.556 0-3.556-5.334 0-5.334h18.666V10.667c0-3.556 5.334-3.556 5.334 0z",className:"icon-plus_svg__fill"})));var cI;function xE(){return xE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},xE.apply(null,arguments)}const e8=e=>N.createElement("svg",xE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),cI||(cI=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 61.333C15.8 61.333 2.667 48.2 2.667 32S15.8 2.667 32 2.667 61.333 15.8 61.333 32 48.2 61.333 32 61.333M32 56c13.255 0 24-10.745 24-24S45.255 8 32 8 8 18.745 8 32s10.745 24 24 24m2.213-18.63a2.667 2.667 0 1 1-5.333 0v-2.69c0-1.148.734-2.168 1.823-2.53.173-.058.532-.195 1.01-.407.809-.36 1.616-.79 2.354-1.282 1.835-1.223 2.813-2.528 2.813-3.786a5.333 5.333 0 0 0-10.364-1.777 2.667 2.667 0 0 1-5.032-1.77 10.668 10.668 0 0 1 20.729 3.551c0 3.413-2.022 6.109-5.187 8.22a21 21 0 0 1-2.813 1.578zm-5.333 7.523a2.667 2.667 0 1 1 5.333 0v.44a2.667 2.667 0 1 1-5.333 0v-.44",className:"icon-question_svg__fill"})));var dI;function FE(){return FE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},FE.apply(null,arguments)}const t8=e=>N.createElement("svg",FE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),dI||(dI=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m46.14 14.43.562.537 6.631 6.167v-7.8a2.67 2.67 0 0 1 2.356-2.65l.311-.017a2.667 2.667 0 0 1 2.649 2.355l.018.311v16a2.67 2.67 0 0 1-2.356 2.65L56 32H40a2.667 2.667 0 0 1-.311-5.315l.311-.018h11.452l-8.44-7.85c-5.964-5.893-15.168-7.182-22.563-3.156-7.38 4.018-11.172 12.357-9.314 20.455 1.859 8.107 8.935 14.032 17.362 14.518 8.43.487 16.162-4.585 18.967-12.426a2.667 2.667 0 0 1 5.022 1.797C48.88 50.082 38.973 56.582 28.19 55.959c-10.785-.623-19.862-8.222-22.254-18.65C3.542 26.872 8.426 16.135 17.9 10.977c9.227-5.024 20.65-3.579 28.241 3.453z",className:"icon-refresh_svg__fill"})));var hI;function HE(){return HE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},HE.apply(null,arguments)}const n8=e=>N.createElement("svg",HE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),hI||(hI=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667m9.886 19.447a2.67 2.67 0 0 0-3.772 0L32 28.23l-6.114-6.115-.134-.124a2.667 2.667 0 0 0-3.638.124l-.124.134a2.667 2.667 0 0 0 .124 3.638L28.23 32l-6.115 6.114-.124.134a2.667 2.667 0 0 0 .124 3.638l.134.124a2.667 2.667 0 0 0 3.638-.124L32 35.77l6.114 6.115.134.124a2.667 2.667 0 0 0 3.638-.124l.124-.134a2.667 2.667 0 0 0-.124-3.638L35.77 32l6.115-6.114.124-.134a2.667 2.667 0 0 0-.124-3.638z",className:"icon-remove_svg__fill"})));var fI;function BE(){return BE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},BE.apply(null,arguments)}const r8=e=>N.createElement("svg",BE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12"},e),fI||(fI=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M11.774 10.5c.062 0 .12-.025.164-.07a.22.22 0 0 0 .062-.164c-.069-1.447-.495-2.678-1.268-3.66-.618-.785-1.455-1.409-2.49-1.855a9.3 9.3 0 0 0-2.406-.655 10 10 0 0 0-.862-.078V2.225a.23.23 0 0 0-.128-.203.23.23 0 0 0-.24.028L.084 5.692A.22.22 0 0 0 0 5.865c0 .068.03.132.082.175l4.523 3.737c.067.056.16.068.24.03a.22.22 0 0 0 .13-.202v-1.95c1.134-.08 2.178.003 3.107.25a6.4 6.4 0 0 1 2.087.96c1.018.724 1.398 1.5 1.401 1.507a.23.23 0 0 0 .204.128",className:"icon-reply-filled_svg__fill"})));var vI;function GE(){return GE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},GE.apply(null,arguments)}const i8=e=>N.createElement("svg",GE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),vI||(vI=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M26.667 48C14.885 48 5.333 38.449 5.333 26.667S14.885 5.333 26.667 5.333 48 14.885 48 26.667c0 4.93-1.672 9.469-4.48 13.081l13.67 13.67a2.668 2.668 0 0 1-3.772 3.772l-13.67-13.67A21.24 21.24 0 0 1 26.667 48m0-5.333c8.836 0 16-7.164 16-16s-7.164-16-16-16-16 7.163-16 16 7.163 16 16 16",className:"icon-search_svg__fill"})));var pI;function VE(){return VE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},VE.apply(null,arguments)}const a8=e=>N.createElement("svg",VE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),pI||(pI=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M59.795 29.43 7.329 2.979C4.691 1.802 1.76 4.153 2.932 6.798l6.925 18.609a2 2 0 0 0 1.544 1.275l32.273 5.394L11.4 37.47a2 2 0 0 0-1.544 1.275L2.932 57.353c-.879 2.645 1.76 4.997 4.397 3.527l52.466-26.453c2.051-.882 2.051-3.82 0-4.996z",className:"icon-send_svg__fill"})));var mI;function zE(){return zE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},zE.apply(null,arguments)}const s8=e=>N.createElement("svg",zE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),mI||(mI=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667A5.33 5.33 0 0 1 37.333 8v.24A4.4 4.4 0 0 0 40 12.267a4.4 4.4 0 0 0 4.853-.88l.16-.16a5.33 5.33 0 0 1 7.547 0 5.333 5.333 0 0 1 0 7.546l-.16.16a4.4 4.4 0 0 0-.88 4.854V24a4.4 4.4 0 0 0 4.027 2.667H56c2.946 0 5.333 2.387 5.333 5.333S58.946 37.333 56 37.333h-.24A4.4 4.4 0 0 0 51.733 40a4.4 4.4 0 0 0 .88 4.853l.16.16a5.33 5.33 0 0 1 0 7.547 5.333 5.333 0 0 1-7.546 0l-.16-.16a4.4 4.4 0 0 0-4.854-.88 4.4 4.4 0 0 0-2.666 4.027V56a5.333 5.333 0 0 1-10.667 0v-.24A4.4 4.4 0 0 0 24 51.733a4.4 4.4 0 0 0-4.853.88l-.16.16a5.33 5.33 0 0 1-7.547 0 5.333 5.333 0 0 1 0-7.546l.16-.16a4.4 4.4 0 0 0 .88-4.854 4.4 4.4 0 0 0-4.027-2.666H8A5.333 5.333 0 0 1 8 26.88h.24A4.4 4.4 0 0 0 12.267 24a4.4 4.4 0 0 0-.88-4.853l-.16-.16a5.33 5.33 0 0 1 0-7.547 5.333 5.333 0 0 1 7.546 0l.16.16a4.4 4.4 0 0 0 4.854.88H24a4.4 4.4 0 0 0 2.667-4.027V8A5.33 5.33 0 0 1 32 2.667M32 24a8 8 0 1 0 0 16 8 8 0 0 0 0-16",className:"icon-settings-filled_svg__fill"})));var _I;function jE(){return jE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},jE.apply(null,arguments)}const o8=e=>N.createElement("svg",jE({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32"},e),_I||(_I=N.createElement("path",{d:"M21.943 24.39a1.333 1.333 0 0 1-1.886 1.886l-9.333-9.333a1.333 1.333 0 0 1 0-1.886l9.333-9.333a1.333 1.333 0 1 1 1.886 1.885L13.553 16z",className:"icon-slide-left_svg__fill",clipRule:"evenodd"})));var gI;function qE(){return qE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},qE.apply(null,arguments)}const l8=e=>N.createElement("svg",qE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),gI||(gI=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 61.333C48.2 61.333 61.333 48.2 61.333 32S48.2 2.667 32 2.667 2.667 15.8 2.667 32a2.838 2.838 0 1 0 5.678 0C8.344 18.935 18.934 8.344 32 8.344c13.065 0 23.656 10.591 23.656 23.656S45.065 55.656 32 55.656a2.838 2.838 0 1 0 0 5.677",className:"icon-spinner_svg__fill"})));var EI;function KE(){return KE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},KE.apply(null,arguments)}const u8=e=>N.createElement("svg",KE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),EI||(EI=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M36.889 43.013c6.608 0 12.121 4.685 12.43 10.734l.014.537V58a2.667 2.667 0 0 1-5.316.311L44 58v-3.716c0-3.07-2.87-5.718-6.636-5.925l-.475-.013H27.11c-3.838 0-6.86 2.525-7.096 5.557l-.015.381V58a2.667 2.667 0 0 1-5.315.311L14.667 58v-3.716c0-6.126 5.324-10.986 11.864-11.26l.58-.011zm18.578-17.291q.401 0 .784.118c4.632 1.426 7.518 4.801 7.736 9.688l.013.594v12.8a2.667 2.667 0 0 1-5.315.311l-.018-.311V36.124c-.002-2.595-1.163-4.171-3.528-5.034l-.104-.037-2.502.002a2.667 2.667 0 0 1-2.648-2.356l-.018-.31a2.67 2.67 0 0 1 2.355-2.65l.311-.017zm-44 0 .31.018a2.666 2.666 0 0 1 2.356 2.648l-.018.311a2.666 2.666 0 0 1-2.648 2.356l-2.51-.002-.119.042c-2.246.85-3.503 2.574-3.505 5.147v12.68l-.018.31A2.666 2.666 0 0 1 0 48.922V36.24l.014-.591c.225-4.874 3.203-8.415 7.712-9.809q.384-.117.788-.118zM32 19.958c5.512 0 10 4.409 10 9.871s-4.488 9.872-10 9.872-10-4.41-10-9.872 4.488-9.871 10-9.871m0 5.333c-2.588 0-4.667 2.043-4.667 4.538s2.08 4.538 4.667 4.538c2.588 0 4.667-2.042 4.667-4.538 0-2.495-2.08-4.538-4.667-4.538M17.333 2.667c5.513 0 10 4.409 10 9.871s-4.487 9.871-10 9.871c-5.512 0-10-4.409-10-9.871s4.488-9.871 10-9.871m29.334 0c5.512 0 10 4.409 10 9.871s-4.488 9.871-10 9.871c-5.513 0-10-4.409-10-9.871s4.487-9.871 10-9.871M17.333 8c-2.587 0-4.666 2.042-4.666 4.538s2.079 4.538 4.666 4.538S22 15.034 22 12.538 19.921 8 17.333 8m29.334 0C44.079 8 42 10.042 42 12.538s2.079 4.538 4.667 4.538 4.666-2.042 4.666-4.538S49.254 8 46.667 8",className:"icon-supergroup_svg__fill"})));var yI,CI;function $E(){return $E=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},$E.apply(null,arguments)}const c8=e=>N.createElement("svg",$E({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 64 64"},e),yI||(yI=N.createElement("path",{d:"M38.824 25.895a2.95 2.95 0 0 1 4.16-.074L57.1 39.378a2.92 2.92 0 0 1 .002 4.213L42.985 57.177a2.95 2.95 0 0 1-4.158-.07 2.92 2.92 0 0 1 .07-4.14l11.928-11.48-11.926-11.451a2.92 2.92 0 0 1-.075-4.14",className:"icon-thread_svg__fill",clipRule:"evenodd"})),CI||(CI=N.createElement("path",{d:"M8.866 6c1.583 0 2.866 1.216 2.866 2.716V25.5c0 7.672 6.846 14.068 15.475 14.068h22.927c1.583 0 2.866 1.216 2.866 2.716S51.717 45 50.134 45H27.207C15.604 45 6 36.35 6 25.5V8.716C6 7.216 7.283 6 8.866 6",className:"icon-thread_svg__fill",clipRule:"evenodd"})));var bI;function WE(){return WE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},WE.apply(null,arguments)}const d8=e=>N.createElement("svg",WE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),bI||(bI=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M34.667 5.333a2.667 2.667 0 0 1 0 5.334H13.333a2.667 2.667 0 0 0-2.666 2.666v37.334c0 1.143.72 2.118 1.73 2.497l28.384-28.383a2.667 2.667 0 0 1 3.771 0l8.781 8.78v-4.228a2.667 2.667 0 0 1 2.498-2.661l.169-.005a2.667 2.667 0 0 1 2.667 2.666v21.334a8 8 0 0 1-8 8H13.33a8 8 0 0 1-7.998-8V13.333a8 8 0 0 1 8-8zm8 25.105L19.77 53.333h30.897a2.667 2.667 0 0 0 2.661-2.498l.005-.168v-9.563zM22.667 16a6.666 6.666 0 1 1 0 13.333 6.666 6.666 0 0 1 0-13.333m0 5.333a1.334 1.334 0 1 0 0 2.667 1.334 1.334 0 0 0 0-2.667M56.78 3.448a2.665 2.665 0 0 1 3.771 0 2.665 2.665 0 0 1 0 3.771l-4.782 4.78 4.782 4.782c.998.998 1.04 2.59.125 3.638l-.125.133a2.665 2.665 0 0 1-3.771 0l-4.782-4.781-4.78 4.781a2.667 2.667 0 0 1-3.638.125l-.133-.125a2.665 2.665 0 0 1 0-3.771L48.228 12l-4.78-4.781a2.667 2.667 0 0 1-.125-3.638l.125-.133a2.665 2.665 0 0 1 3.771 0l4.78 4.78z",className:"icon-thumbnail-none_svg__fill"})));var SI;function QE(){return QE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},QE.apply(null,arguments)}const h8=e=>N.createElement("svg",QE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 88 48"},e),SI||(SI=N.createElement("g",{fill:"none",fillRule:"evenodd"},N.createElement("rect",{width:80,height:40,x:4,y:4,fill:"#000",className:"icon-toggleoff_svg__fill",rx:20}),N.createElement("circle",{cx:24,cy:24,r:12,fill:"#FFF"}),N.createElement("path",{fill:"#FFF",d:"M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992z"}),N.createElement("path",{fill:"#000",d:"M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0m0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4z",className:"icon-toggleoff_svg__fill"}))));var TI;function YE(){return YE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},YE.apply(null,arguments)}const f8=e=>N.createElement("svg",YE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 88 48"},e),TI||(TI=N.createElement("g",{fill:"none",fillRule:"evenodd"},N.createElement("rect",{width:80,height:40,x:4,y:4,fill:"#000",className:"icon-toggleon_svg__fill",rx:20}),N.createElement("circle",{cx:64,cy:24,r:12,fill:"#FFF"}),N.createElement("path",{fill:"#FFF",d:"M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992z"}),N.createElement("path",{fill:"#000",d:"M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0m0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4z",className:"icon-toggleon_svg__fill"}))));var NI;function XE(){return XE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},XE.apply(null,arguments)}const v8=e=>N.createElement("svg",XE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),NI||(NI=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M42.667 37.333c7.17 0 13.018 5.66 13.32 12.755l.013.579V56a2.667 2.667 0 0 1-5.315.311L50.667 56v-5.333c0-4.26-3.33-7.743-7.53-7.987l-.47-.013H21.333a8 8 0 0 0-7.986 7.53l-.014.47V56a2.667 2.667 0 0 1-5.316.311L8 56v-5.333c0-7.17 5.66-13.019 12.755-13.321l.578-.013zM32 5.333c7.364 0 13.333 5.97 13.333 13.334S39.363 32 32 32s-13.333-5.97-13.333-13.333S24.637 5.333 32 5.333m0 5.334a8 8 0 1 0 0 16 8 8 0 0 0 0-16",className:"icon-user_svg__fill"})));var II;function ZE(){return ZE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ZE.apply(null,arguments)}const p8=e=>N.createElement("svg",ZE({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),II||(II=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M12.346 5.336v-.001c.405-.523 1.182-.524 1.58-.037.162.2.25.443.25.69v3.678c0 .518.42.938.938.938H18.6c.359 0 .7.179.911.488l.001.001.369.548.003.004c.174.256.226.583.134.895l-1.532 5.316c-.131.459-.559.782-1.044.782h-7.075c-.3 0-.593-.127-.8-.345l-1.13-1.222v-6.647zm-4.73 3.078 3.245-4.223.002-.002c1.125-1.456 3.339-1.521 4.517-.075.421.52.671 1.177.671 1.874v2.74h2.55c.99 0 1.908.496 2.462 1.31l.002.004.368.547.002.002a2.93 2.93 0 0 1 .382 2.475v.003l-1.528 5.302a2.96 2.96 0 0 1-2.847 2.142h-7.075a2.99 2.99 0 0 1-2.166-.935l-.007-.007-.066-.072a2.13 2.13 0 0 1-1.821 1.025H4.192a2.13 2.13 0 0 1-2.13-2.13v-8.3a2.13 2.13 0 0 1 2.13-2.13h2.115c.493 0 .948.168 1.31.45m-3.678 1.68c0-.141.114-.255.254-.255h2.115c.14 0 .254.114.254.255v8.3c0 .14-.114.255-.254.255H4.192a.255.255 0 0 1-.255-.255z",clipRule:"evenodd"})));var MI;function JE(){return JE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},JE.apply(null,arguments)}const m8=e=>N.createElement("svg",JE({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),MI||(MI=N.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M11.654 18.664v.001c-.405.523-1.182.524-1.58.037-.162-.2-.25-.444-.25-.69v-3.678a.94.94 0 0 0-.938-.938H5.4c-.359 0-.7-.179-.911-.488l-.001-.001-.369-.548-.003-.004a1.05 1.05 0 0 1-.134-.895l1.532-5.316c.131-.459.559-.782 1.044-.782h7.075c.3 0 .593.127.8.345l1.13 1.222v6.647zm4.73-3.078-3.245 4.223-.002.002c-1.125 1.456-3.339 1.521-4.517.075a2.98 2.98 0 0 1-.671-1.874v-2.74h-2.55c-.99 0-1.908-.496-2.462-1.31l-.002-.004-.368-.547-.002-.002a2.93 2.93 0 0 1-.382-2.475v-.003L3.711 5.63a2.96 2.96 0 0 1 2.847-2.142h7.075c.823 0 1.608.345 2.166.935l.007.007.066.072a2.13 2.13 0 0 1 1.821-1.025h2.115a2.13 2.13 0 0 1 2.13 2.13v8.3a2.13 2.13 0 0 1-2.13 2.13h-2.115a2.12 2.12 0 0 1-1.31-.45m3.678-1.68c0 .141-.114.255-.254.255h-2.115a.255.255 0 0 1-.255-.255v-8.3c0-.14.115-.255.255-.255h2.115c.14 0 .255.114.255.255z",clipRule:"evenodd"})));function _8(e){switch(e){case $e.ADD:return v.createElement(dH,null);case $e.ARROW_LEFT:return v.createElement(hH,null);case $e.ATTACH:return v.createElement(fH,null);case $e.AUDIO_ON_LINED:return v.createElement(vH,null);case $e.BAN:return v.createElement(pH,null);case $e.BROADCAST:return v.createElement(mH,null);case $e.CAMERA:return v.createElement(_H,null);case $e.CHANNELS:return v.createElement(gH,null);case $e.CHAT:return v.createElement(EH,null);case $e.CHAT_FILLED:return v.createElement(yH,null);case $e.CHEVRON_DOWN:return v.createElement(CH,null);case $e.CHEVRON_RIGHT:return v.createElement(bH,null);case $e.CLOSE:return v.createElement(SH,null);case $e.COLLAPSE:return v.createElement(TH,null);case $e.COPY:return v.createElement(NH,null);case $e.CREATE:return v.createElement(IH,null);case $e.DELETE:return v.createElement(MH,null);case $e.DISCONNECTED:return v.createElement(AH,null);case $e.DOCUMENT:return v.createElement(wH,null);case $e.DONE:return v.createElement(RH,null);case $e.DONE_ALL:return v.createElement(OH,null);case $e.DOWNLOAD:return v.createElement(DH,null);case $e.EDIT:return v.createElement(LH,null);case $e.EMOJI_MORE:return v.createElement(UH,null);case $e.ERROR:return v.createElement(kH,null);case $e.EXPAND:return v.createElement(PH,null);case $e.FILE_AUDIO:return v.createElement(xH,null);case $e.FILE_DOCUMENT:return v.createElement(FH,null);case $e.FREEZE:return v.createElement(HH,null);case $e.GIF:return v.createElement(BH,null);case $e.INFO:return v.createElement(GH,null);case $e.LEAVE:return v.createElement(VH,null);case $e.MEMBERS:return v.createElement(zH,null);case $e.MESSAGE:return v.createElement(jH,null);case $e.MODERATIONS:return v.createElement(qH,null);case $e.MORE:return v.createElement(KH,null);case $e.MUTE:return v.createElement($H,null);case $e.NOTIFICATIONS:return v.createElement(WH,null);case $e.NOTIFICATIONS_OFF_FILLED:return v.createElement(QH,null);case $e.OPERATOR:return v.createElement(YH,null);case $e.PHOTO:return v.createElement(XH,null);case $e.PLAY:return v.createElement(ZH,null);case $e.PLUS:return v.createElement(JH,null);case $e.QUESTION:return v.createElement(e8,null);case $e.REFRESH:return v.createElement(t8,null);case $e.REMOVE:return v.createElement(n8,null);case $e.REPLY:return v.createElement(r8,null);case $e.SEARCH:return v.createElement(i8,null);case $e.SEND:return v.createElement(a8,null);case $e.SETTINGS_FILLED:return v.createElement(s8,null);case $e.SLIDE_LEFT:return v.createElement(o8,null);case $e.SPINNER:return v.createElement(l8,null);case $e.SUPERGROUP:return v.createElement(u8,null);case $e.THREAD:return v.createElement(c8,null);case $e.THUMBNAIL_NONE:return v.createElement(d8,null);case $e.TOGGLE_OFF:return v.createElement(h8,null);case $e.TOGGLE_ON:return v.createElement(f8,null);case $e.USER:return v.createElement(v8,null);case $e.FEEDBACK_LIKE:return v.createElement(p8,null);case $e.FEEDBACK_DISLIKE:return v.createElement(m8,null);default:return"icon"}}function We(e){var n=e.className,t=n===void 0?"":n,r=e.type,i=e.fillColor,a=i===void 0?Qr.DEFAULT:i,s=e.width,o=s===void 0?26:s,l=e.height,u=l===void 0?26:l,d=e.onClick,f=d===void 0?Cn:d,p=e.children,m=p===void 0?null:p,E=e.testID,g={width:typeof o=="string"?o:"".concat(o,"px"),minWidth:typeof o=="string"?o:"".concat(o,"px"),height:typeof u=="string"?u:"".concat(u,"px"),minHeight:typeof u=="string"?u:"".concat(u,"px")};return v.createElement("div",{className:Ae(Ae([],Array.isArray(t)?t:[t],!0),["sendbird-icon",cH(r),uH(a)],!1).join(" "),"data-testid":E,role:"button",onClick:f,onKeyDown:f,tabIndex:0,style:g},m||_8(r))}var Se=$e,Ve=Qr;/*!
 * css-vars-ponyfill
 * v2.4.9
 * https://jhildenbiddle.github.io/css-vars-ponyfill/
 * (c) 2018-2024 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */function ca(){return ca=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ca.apply(this,arguments)}/*!
 * get-css-data
 * v2.1.0
 * https://github.com/jhildenbiddle/get-css-data
 * (c) 2018-2022 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */function AI(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t={mimeType:n.mimeType||null,onBeforeSend:n.onBeforeSend||Function.prototype,onSuccess:n.onSuccess||Function.prototype,onError:n.onError||Function.prototype,onComplete:n.onComplete||Function.prototype},r=Array.isArray(e)?e:[e],i=Array.apply(null,Array(r.length)).map(function(u){return null});function a(u){var d=typeof u=="string",f=d&&u.trim().charAt(0)==="<";return d&&!f}function s(u,d){t.onError(u,r[d],d)}function o(u,d){var f=t.onSuccess(u,r[d],d);u=f===!1?"":f||u,i[d]=u,i.indexOf(null)===-1&&t.onComplete(i)}var l=document.createElement("a");r.forEach(function(u,d){l.setAttribute("href",u),l.href=String(l.href);var f=!!(document.all&&!window.atob),p=f&&l.host.split(":")[0]!==location.host.split(":")[0];if(p){var m=l.protocol===location.protocol;if(m){var E=new XDomainRequest;E.open("GET",u),E.timeout=0,E.onprogress=Function.prototype,E.ontimeout=Function.prototype,E.onload=function(){var y=E.responseText;a(y)?o(y,d):s(E,d)},E.onerror=function(y){s(E,d)},setTimeout(function(){E.send()},0)}else console.warn("Internet Explorer 9 Cross-Origin (CORS) requests must use the same protocol (".concat(u,")")),s(null,d)}else{var g=new XMLHttpRequest;g.open("GET",u),t.mimeType&&g.overrideMimeType&&g.overrideMimeType(t.mimeType),t.onBeforeSend(g,u,d),g.onreadystatechange=function(){if(g.readyState===4){var y=g.responseText;g.status<400&&a(y)||g.status===0&&a(y)?o(y,d):s(g,d)}},g.send()}})}/**
 * Gets CSS data from <style> and <link> nodes (including @imports), then
 * returns data in order processed by DOM. Allows specifying nodes to
 * include/exclude and filtering CSS data using RegEx.
 *
 * @preserve
 * @param {object}   [options] The options object
 * @param {object}   [options.rootElement=document] Root element to traverse for
 *                   <link> and <style> nodes.
 * @param {string}   [options.include] CSS selector matching <link> and <style>
 *                   nodes to include
 * @param {string}   [options.exclude] CSS selector matching <link> and <style>
 *                   nodes to exclude
 * @param {object}   [options.filter] Regular expression used to filter node CSS
 *                   data. Each block of CSS data is tested against the filter,
 *                   and only matching data is included.
 * @param {boolean}  [options.skipDisabled=true] Determines if disabled
 *                   stylesheets will be skipped while collecting CSS data.
 * @param {boolean}  [options.useCSSOM=false] Determines if CSS data will be
 *                   collected from a stylesheet's runtime values instead of its
 *                   text content. This is required to get accurate CSS data
 *                   when a stylesheet has been modified using the deleteRule()
 *                   or insertRule() methods because these modifications will
 *                   not be reflected in the stylesheet's text content.
 * @param {function} [options.onBeforeSend] Callback before XHR is sent. Passes
 *                   1) the XHR object, 2) source node reference, and 3) the
 *                   source URL as arguments.
 * @param {function} [options.onSuccess] Callback on each CSS node read. Passes
 *                   1) CSS text, 2) source node reference, and 3) the source
 *                   URL as arguments.
 * @param {function} [options.onError] Callback on each error. Passes 1) the XHR
 *                   object for inspection, 2) soure node reference, and 3) the
 *                   source URL that failed (either a <link> href or an @import)
 *                   as arguments
 * @param {function} [options.onComplete] Callback after all nodes have been
 *                   processed. Passes 1) concatenated CSS text, 2) an array of
 *                   CSS text in DOM order, and 3) an array of nodes in DOM
 *                   order as arguments.
 *
 * @example
 *
 *   getCssData({
 *     rootElement : document,
 *     include     : 'style,link[rel="stylesheet"]',
 *     exclude     : '[href="skip.css"]',
 *     filter      : /red/,
 *     skipDisabled: true,
 *     useCSSOM    : false,
 *     onBeforeSend(xhr, node, url) {
 *       // ...
 *     }
 *     onSuccess(cssText, node, url) {
 *       // ...
 *     }
 *     onError(xhr, node, url) {
 *       // ...
 *     },
 *     onComplete(cssText, cssArray, nodeArray) {
 *       // ...
 *     }
 *   });
 */function wI(e){var n={cssComments:/\/\*[\s\S]+?\*\//g,cssImports:/(?:@import\s*)(?:url\(\s*)?(?:['"])([^'"]*)(?:['"])(?:\s*\))?(?:[^;]*;)/g},t={rootElement:e.rootElement||document,include:e.include||'style,link[rel="stylesheet"]',exclude:e.exclude||null,filter:e.filter||null,skipDisabled:e.skipDisabled!==!1,useCSSOM:e.useCSSOM||!1,onBeforeSend:e.onBeforeSend||Function.prototype,onSuccess:e.onSuccess||Function.prototype,onError:e.onError||Function.prototype,onComplete:e.onComplete||Function.prototype},r=Array.apply(null,t.rootElement.querySelectorAll(t.include)).filter(function(u){return!g8(u,t.exclude)}),i=Array.apply(null,Array(r.length)).map(function(u){return null});function a(){var u=i.indexOf(null)===-1;if(u){i.reduce(function(f,p,m){return p===""&&f.push(m),f},[]).reverse().forEach(function(f){return[r,i].forEach(function(p){return p.splice(f,1)})});var d=i.join("");t.onComplete(d,i,r)}}function s(u,d,f,p){var m=t.onSuccess(u,f,p);u=m!==void 0&&!m?"":m||u,l(u,f,p,function(E,g){i[d]===null&&(g.forEach(function(y){return t.onError(y.xhr,f,y.url)}),!t.filter||t.filter.test(E)?i[d]=E:i[d]="",a())})}function o(u,d){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],p={};return p.rules=(u.replace(n.cssComments,"").match(n.cssImports)||[]).filter(function(m){return f.indexOf(m)===-1}),p.urls=p.rules.map(function(m){return m.replace(n.cssImports,"$1")}),p.absoluteUrls=p.urls.map(function(m){return $_(m,d)}),p.absoluteRules=p.rules.map(function(m,E){var g=p.urls[E],y=$_(p.absoluteUrls[E],d);return m.replace(g,y)}),p}function l(u,d,f,p){var m=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],E=arguments.length>5&&arguments[5]!==void 0?arguments[5]:[],g=o(u,f,E);g.rules.length?AI(g.absoluteUrls,{onBeforeSend:function(S,C,T){t.onBeforeSend(S,d,C)},onSuccess:function(S,C,T){var I=t.onSuccess(S,d,C);S=I===!1?"":I||S;var L=o(S,C,E);return L.rules.forEach(function(D,O){S=S.replace(D,L.absoluteRules[O])}),S},onError:function(S,C,T){m.push({xhr:S,url:C}),E.push(g.rules[T]),l(u,d,f,p,m,E)},onComplete:function(S){S.forEach(function(C,T){u=u.replace(g.rules[T],C)}),l(u,d,f,p,m,E)}}):p(u,m)}r.length?r.forEach(function(u,d){var f=u.getAttribute("href"),p=u.getAttribute("rel"),m=u.nodeName.toLowerCase()==="link"&&f&&p&&p.toLowerCase().indexOf("stylesheet")!==-1,E=t.skipDisabled===!1?!1:u.disabled,g=u.nodeName.toLowerCase()==="style";if(m&&!E){var y=f.indexOf("data:text/css")!==-1;if(y){var S=decodeURIComponent(f.substring(f.indexOf(",")+1));t.useCSSOM&&(S=Array.apply(null,u.sheet.cssRules).map(function(T){return T.cssText}).join("")),s(S,d,u,location.href)}else AI(f,{mimeType:"text/css",onBeforeSend:function(I,L,D){t.onBeforeSend(I,u,L)},onSuccess:function(I,L,D){var O=$_(f);s(I,d,u,O)},onError:function(I,L,D){i[d]="",t.onError(I,u,L),a()}})}else if(g&&!E){var C=u.textContent;t.useCSSOM&&(C=Array.apply(null,u.sheet.cssRules).map(function(T){return T.cssText}).join("")),s(C,d,u,location.href)}else i[d]="",a()}):t.onComplete("",[])}function $_(e,n){var t=document.implementation.createHTMLDocument(""),r=t.createElement("base"),i=t.createElement("a");return t.head.appendChild(r),t.body.appendChild(i),r.href=n||document.baseURI||(document.querySelector("base")||{}).href||location.href,i.href=e,i.href}function g8(e,n){var t=e.matches||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector;return t.call(e,n)}var G2=V2;function V2(e,n,t){e instanceof RegExp&&(e=RI(e,t)),n instanceof RegExp&&(n=RI(n,t));var r=z2(e,n,t);return r&&{start:r[0],end:r[1],pre:t.slice(0,r[0]),body:t.slice(r[0]+e.length,r[1]),post:t.slice(r[1]+n.length)}}function RI(e,n){var t=n.match(e);return t?t[0]:null}V2.range=z2;function z2(e,n,t){var r,i,a,s,o,l=t.indexOf(e),u=t.indexOf(n,l+1),d=l;if(l>=0&&u>0){if(e===n)return[l,u];for(r=[],a=t.length;d>=0&&!o;)d==l?(r.push(d),l=t.indexOf(e,d+1)):r.length==1?o=[r.pop(),u]:(i=r.pop(),i<a&&(a=i,s=u),u=t.indexOf(n,d+1)),d=l<u&&l>=0?l:u;r.length&&(o=[a,s])}return o}function aC(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t={preserveStatic:!0,removeComments:!1},r=ca({},t,n),i=[];function a(H){throw new Error("CSS parse error: ".concat(H))}function s(H){var F=H.exec(e);if(F)return e=e.slice(F[0].length),F}function o(){return s(/^{\s*/)}function l(){return s(/^}/)}function u(){s(/^\s*/)}function d(){if(u(),!(e[0]!=="/"||e[1]!=="*")){for(var H=2;e[H]&&(e[H]!=="*"||e[H+1]!=="/");)H++;if(!e[H])return a("end of comment is missing");var F=e.slice(2,H);return e=e.slice(H+2),{type:"comment",comment:F}}}function f(){for(var H=[],F;F=d();)H.push(F);return r.removeComments?[]:H}function p(){for(u();e[0]==="}";)a("extra closing bracket");var H=s(/^(("(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^{])+)/);if(H){var F=H[0].trim(),z,K=/\/\*/.test(F);K&&(F=F.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,""));var ee=/["']\w*,\w*["']/.test(F);ee&&(F=F.replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(Q){return Q.replace(/,/g,"‌")}));var $=/,/.test(F);return $?z=F.split(/\s*(?![^(]*\)),\s*/):z=[F],ee&&(z=z.map(function(Q){return Q.replace(/\u200C/g,",")})),z}}function m(){if(e[0]==="@")return P();s(/^([;\s]*)+/);var H=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,F=s(/^(\*?[-#/*\\\w.]+(\[[0-9a-z_-]+\])?)\s*/);if(F){if(F=F[0].trim(),!s(/^:\s*/))return a("property missing ':'");var z=s(/^((?:\/\*.*?\*\/|'(?:\\'|.)*?'|"(?:\\"|.)*?"|\((\s*'(?:\\'|.)*?'|"(?:\\"|.)*?"|[^)]*?)\s*\)|[^};])+)/),K={type:"declaration",property:F.replace(H,""),value:z?z[0].replace(H,"").trim():""};return s(/^[;\s]*/),K}}function E(){if(!o())return a("missing '{'");for(var H,F=f();H=m();)F.push(H),F=F.concat(f());return l()?F:a("missing '}'")}function g(){u();for(var H=[],F;F=s(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)H.push(F[1]),s(/^,\s*/);if(H.length)return{type:"keyframe",values:H,declarations:E()}}function y(){var H=s(/^@([-\w]+)?keyframes\s*/);if(H){var F=H[1];if(H=s(/^([-\w]+)\s*/),!H)return a("@keyframes missing name");var z=H[1];if(!o())return a("@keyframes missing '{'");for(var K,ee=f();K=g();)ee.push(K),ee=ee.concat(f());return l()?{type:"keyframes",name:z,vendor:F,keyframes:ee}:a("@keyframes missing '}'")}}function S(){var H=s(/^@page */);if(H){var F=p()||[];return{type:"page",selectors:F,declarations:E()}}}function C(){var H=s(/@(top|bottom|left|right)-(left|center|right|top|middle|bottom)-?(corner)?\s*/);if(H){var F="".concat(H[1],"-").concat(H[2])+(H[3]?"-".concat(H[3]):"");return{type:"page-margin-box",name:F,declarations:E()}}}function T(){var H=s(/^@font-face\s*/);if(H)return{type:"font-face",declarations:E()}}function I(){var H=s(/^@supports *([^{]+)/);if(H)return{type:"supports",supports:H[1].trim(),rules:V()}}function L(){var H=s(/^@host\s*/);if(H)return{type:"host",rules:V()}}function D(){var H=s(/^@media([^{]+)*/);if(H)return{type:"media",media:(H[1]||"").trim(),rules:V()}}function O(){var H=s(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(H)return{type:"custom-media",name:H[1].trim(),media:H[2].trim()}}function R(){var H=s(/^@([-\w]+)?document *([^{]+)/);if(H)return{type:"document",document:H[2].trim(),vendor:H[1]?H[1].trim():null,rules:V()}}function k(){var H=s(/^@(import|charset|namespace)\s*([^;]+);/);if(H)return{type:H[1],name:H[2].trim()}}function P(){if(u(),e[0]==="@"){var H=k()||T()||D()||y()||I()||R()||O()||L()||S()||C();if(H&&!r.preserveStatic){var F=!1;if(H.declarations)F=H.declarations.some(function(K){return/var\(/.test(K.value)});else{var z=H.keyframes||H.rules||[];F=z.some(function(K){return(K.declarations||[]).some(function(ee){return/var\(/.test(ee.value)})})}return F?H:{}}return H}}function G(){if(!r.preserveStatic){var H=G2("{","}",e);if(H){var F=/:(?:root|host)(?![.:#(])/.test(H.pre)&&/--\S*\s*:/.test(H.body),z=/var\(/.test(H.body);if(!F&&!z)return e=e.slice(H.end+1),{}}}var K=p()||[],ee=r.preserveStatic?E():E().filter(function($){var Q=K.some(function(j){return/:(?:root|host)(?![.:#(])/.test(j)})&&/^--\S/.test($.property),ne=/var\(/.test($.value);return Q||ne});return K.length||a("selector missing"),{type:"rule",selectors:K,declarations:ee}}function V(H){if(!H&&!o())return a("missing '{'");for(var F,z=f();e.length&&(H||e[0]!=="}")&&(F=P()||G());)F.type&&z.push(F),z=z.concat(f());return!H&&!l()?a("missing '}'"):z}return{type:"stylesheet",stylesheet:{rules:V(!0),errors:i}}}function OI(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t={parseHost:!1,store:{},onWarning:function(){}},r=ca({},t,n),i=new RegExp(":".concat(r.parseHost?"host":"root","$"));return typeof e=="string"&&(e=aC(e,r)),e.stylesheet.rules.forEach(function(a){a.type!=="rule"||!a.selectors.some(function(s){return i.test(s)})||a.declarations.forEach(function(s,o){var l=s.property,u=s.value;l&&l.indexOf("--")===0&&(r.store[l]=u)})}),r.store}function j2(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",t=arguments.length>2?arguments[2]:void 0,r={charset:function(s){return"@charset "+s.name+";"},comment:function(s){return s.comment.indexOf("__CSSVARSPONYFILL")===0?"/*"+s.comment+"*/":""},"custom-media":function(s){return"@custom-media "+s.name+" "+s.media+";"},declaration:function(s){return s.property+":"+s.value+";"},document:function(s){return"@"+(s.vendor||"")+"document "+s.document+"{"+i(s.rules)+"}"},"font-face":function(s){return"@font-face{"+i(s.declarations)+"}"},host:function(s){return"@host{"+i(s.rules)+"}"},import:function(s){return"@import "+s.name+";"},keyframe:function(s){return s.values.join(",")+"{"+i(s.declarations)+"}"},keyframes:function(s){return"@"+(s.vendor||"")+"keyframes "+s.name+"{"+i(s.keyframes)+"}"},media:function(s){return"@media "+s.media+"{"+i(s.rules)+"}"},namespace:function(s){return"@namespace "+s.name+";"},page:function(s){return"@page "+(s.selectors.length?s.selectors.join(", "):"")+"{"+i(s.declarations)+"}"},"page-margin-box":function(s){return"@"+s.name+"{"+i(s.declarations)+"}"},rule:function(s){var o=s.declarations;if(o.length)return s.selectors.join(",")+"{"+i(o)+"}"},supports:function(s){return"@supports "+s.supports+"{"+i(s.rules)+"}"}};function i(a){for(var s="",o=0;o<a.length;o++){var l=a[o];t&&t(l);var u=r[l.type](l);u&&(s+=u,u.length&&l.selectors&&(s+=n))}return s}return i(e.stylesheet.rules)}function q2(e,n){e.rules.forEach(function(t){if(t.rules){q2(t,n);return}if(t.keyframes){t.keyframes.forEach(function(r){r.type==="keyframe"&&n(r.declarations,t)});return}t.declarations&&n(t.declarations,e)})}var E8="--",y8="var";function C8(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t={preserveStatic:!0,preserveVars:!1,variables:{},onWarning:function(){}},r=ca({},t,n);return typeof e=="string"&&(e=aC(e,r)),q2(e.stylesheet,function(i,a){for(var s=0;s<i.length;s++){var o=i[s],l=o.type,u=o.property,d=o.value;if(l==="declaration"){if(!r.preserveVars&&u&&u.indexOf(E8)===0){i.splice(s,1),s--;continue}if(d.indexOf(y8+"(")!==-1){var f=_h(d,r);f!==o.value&&(f=b8(f),r.preserveVars?(i.splice(s,0,{type:l,property:u,value:f}),s++):o.value=f)}}}}),j2(e)}function b8(e){var n=/calc\(([^)]+)\)/g;return(e.match(n)||[]).forEach(function(t){var r="calc".concat(t.split("calc").join(""));e=e.replace(t,r)}),e}function _h(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0;if(e.indexOf("var(")===-1)return e;var r=G2("(",")",e);function i(s){var o=s.split(",")[0].replace(/[\s\n\t]/g,""),l=(s.match(/(?:\s*,\s*){1}(.*)?/)||[])[1],u=Object.prototype.hasOwnProperty.call(n.variables,o)?String(n.variables[o]):void 0,d=u||(l?String(l):void 0),f=t||s;return u||n.onWarning('variable "'.concat(o,'" is undefined')),d&&d!=="undefined"&&d.length>0?_h(d,n,f):"var(".concat(f,")")}if(r)if(r.pre.slice(-3)==="var"){var a=r.body.trim().length===0;return a?(n.onWarning("var() must contain a non-whitespace string"),e):r.pre.slice(0,-3)+i(r.body)+_h(r.post,n)}else return r.pre+"(".concat(_h(r.body,n),")")+_h(r.post,n);else return e.indexOf("var(")!==-1&&n.onWarning('missing closing ")" in the value "'.concat(e,'"')),e}var vm=typeof window<"u",DI=vm&&window.CSS&&window.CSS.supports&&window.CSS.supports("(--a: 0)"),du={group:0,job:0},Gv={rootElement:vm?document:null,shadowDOM:!1,include:"style,link[rel=stylesheet]",exclude:"",variables:{},onlyLegacy:!0,preserveStatic:!0,preserveVars:!1,silent:!1,updateDOM:!0,updateURLs:!0,watch:null,onBeforeSend:function(){},onError:function(){},onWarning:function(){},onSuccess:function(){},onComplete:function(){},onFinally:function(){}},Bs={cssComments:/\/\*[\s\S]+?\*\//g,cssKeyframes:/@(?:-\w*-)?keyframes/,cssMediaQueries:/@media[^{]+\{([\s\S]+?})\s*}/g,cssUrls:/url\((?!['"]?(?:data|http|\/\/):)['"]?([^'")]*)['"]?\)/g,cssVarDeclRules:/(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^}]*})/g,cssVarDecls:/(?:[\s;]*)(-{2}\w[\w-]*)(?:\s*:\s*)([^;]*);/g,cssVarFunc:/var\(\s*--[\w-]/,cssVars:/(?:(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^;]*;*\s*)|(?:var\(\s*))(--[^:)]+)(?:\s*[:)])/},Gr={dom:{},job:{},user:{}},hp=!1,La=null,gh=0,ey=null,ty=!1;/**
 * Fetches, parses, and transforms CSS custom properties from specified
 * <style> and <link> elements into static values, then appends a new <style>
 * element with static values to the DOM to provide CSS custom property
 * compatibility for legacy browsers. Also provides a single interface for
 * live updates of runtime values in both modern and legacy browsers.
 *
 * @preserve
 * @param {object}   [options] Options object
 * @param {object}   [options.rootElement=document] Root element to traverse for
 *                   <link> and <style> nodes
 * @param {boolean}  [options.shadowDOM=false] Determines if shadow DOM <link>
 *                   and <style> nodes will be processed.
 * @param {string}   [options.include="style,link[rel=stylesheet]"] CSS selector
 *                   matching <link re="stylesheet"> and <style> nodes to
 *                   process
 * @param {string}   [options.exclude] CSS selector matching <link
 *                   rel="stylehseet"> and <style> nodes to exclude from those
 *                   matches by options.include
 * @param {object}   [options.variables] A map of custom property name/value
 *                   pairs. Property names can omit or include the leading
 *                   double-hyphen (—), and values specified will override
 *                   previous values
 * @param {boolean}  [options.onlyLegacy=true] Determines if the ponyfill will
 *                   only generate legacy-compatible CSS in browsers that lack
 *                   native support (i.e., legacy browsers)
 * @param {boolean}  [options.preserveStatic=true] Determines if CSS
 *                   declarations that do not reference a custom property will
 *                   be preserved in the transformed CSS
 * @param {boolean}  [options.preserveVars=false] Determines if CSS custom
 *                   property declarations will be preserved in the transformed
 *                   CSS
 * @param {boolean}  [options.silent=false] Determines if warning and error
 *                   messages will be displayed on the console
 * @param {boolean}  [options.updateDOM=true] Determines if the ponyfill will
 *                   update the DOM after processing CSS custom properties
 * @param {boolean}  [options.updateURLs=true] Determines if relative url()
 *                   paths will be converted to absolute urls in external CSS
 * @param {boolean}  [options.watch=false] Determines if a MutationObserver will
 *                   be created that will execute the ponyfill when a <link> or
 *                   <style> DOM mutation is observed
 * @param {function} [options.onBeforeSend] Callback before XHR is sent. Passes
 *                   1) the XHR object, 2) source node reference, and 3) the
 *                   source URL as arguments
 * @param {function} [options.onError] Callback after a CSS parsing error has
 *                   occurred or an XHR request has failed. Passes 1) an error
 *                   message, and 2) source node reference, 3) xhr, and 4 url as
 *                   arguments.
 * @param {function} [options.onWarning] Callback after each CSS parsing warning
 *                   has occurred. Passes 1) a warning message as an argument.
 * @param {function} [options.onSuccess] Callback after CSS data has been
 *                   collected from each node and before CSS custom properties
 *                   have been transformed. Allows modifying the CSS data before
 *                   it is transformed by returning any string value (or false
 *                   to skip). Passes 1) CSS text, 2) source node reference, and
 *                   3) the source URL as arguments.
 * @param {function} [options.onComplete] Callback after all CSS has been
 *                   processed, legacy-compatible CSS has been generated, and
 *                   (optionally) the DOM has been updated. Passes 1) a CSS
 *                   string with CSS variable values resolved, 2) an array of
 *                   output <style> node references that have been appended to
 *                   the DOM, 3) an object containing all custom properies names
 *                   and values, and 4) the ponyfill execution time in
 *                   milliseconds.
 * @param {function} [options.onFinally] Callback in modern and legacy browsers
 *                   after the ponyfill has finished all tasks. Passes 1) a
 *                   boolean indicating if the last ponyfill call resulted in a
 *                   style change, 2) a boolean indicating if the current
 *                   browser provides native support for CSS custom properties,
 *                   and 3) the ponyfill execution time in milliseconds.
 * @example
 *
 *   cssVars({
 *     rootElement   : document,
 *     shadowDOM     : false,
 *     include       : 'style,link[rel="stylesheet"]',
 *     exclude       : '',
 *     variables     : {},
 *     onlyLegacy    : true,
 *     preserveStatic: true,
 *     preserveVars  : false,
 *     silent        : false,
 *     updateDOM     : true,
 *     updateURLs    : true,
 *     watch         : false,
 *     onBeforeSend(xhr, node, url) {},
 *     onError(message, node, xhr, url) {},
 *     onWarning(message) {},
 *     onSuccess(cssText, node, url) {},
 *     onComplete(cssText, styleNode, cssVariables, benchmark) {},
 *     onFinally(hasChanged, hasNativeSupport, benchmark)
 *   });
 */function To(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n="cssVars(): ",t=ca({},Gv,e);function r(d,f,p,m){!t.silent&&window.console&&console.error("".concat(n).concat(d,`
`),f),t.onError(d,f,p,m)}function i(d){!t.silent&&window.console&&console.warn("".concat(n).concat(d)),t.onWarning(d)}function a(d){t.onFinally(!!d,DI,W_()-t.__benchmark)}if(vm){if(t.watch){t.watch=Gv.watch,S8(t),To(t);return}else t.watch===!1&&La&&(La.disconnect(),La=null);if(!t.__benchmark){if(hp===t.rootElement){T8(e);return}var s=[].slice.call(t.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])'));if(t.__benchmark=W_(),t.exclude=[La?'[data-cssvars]:not([data-cssvars=""])':'[data-cssvars="out"]',"link[disabled]:not([data-cssvars])",t.exclude].filter(function(d){return d}).join(","),t.variables=M8(t.variables),s.forEach(function(d){var f=d.nodeName.toLowerCase()==="style"&&d.__cssVars.text,p=f&&d.textContent!==d.__cssVars.text;f&&p&&(d.sheet&&(d.sheet.disabled=!1),d.setAttribute("data-cssvars",""))}),!La){var o=[].slice.call(t.rootElement.querySelectorAll('[data-cssvars="out"]'));o.forEach(function(d){var f=d.getAttribute("data-cssvars-group"),p=f?t.rootElement.querySelector('[data-cssvars="src"][data-cssvars-group="'.concat(f,'"]')):null;p||d.parentNode.removeChild(d)}),gh&&s.length<gh&&(gh=s.length,Gr.dom={})}}if(document.readyState!=="loading")if(DI&&t.onlyLegacy){var l=!1;if(t.updateDOM){var u=t.rootElement.host||(t.rootElement===document?document.documentElement:t.rootElement);Object.keys(t.variables).forEach(function(d){var f=t.variables[d];l=l||f!==getComputedStyle(u).getPropertyValue(d),u.style.setProperty(d,f)})}a(l)}else!ty&&(t.shadowDOM||t.rootElement.shadowRoot||t.rootElement.host)?wI({rootElement:Gv.rootElement,include:Gv.include,exclude:t.exclude,skipDisabled:!1,onSuccess:function(f,p,m){var E=(p.sheet||{}).disabled&&!p.__cssVars;return E?!1:(f=f.replace(Bs.cssComments,"").replace(Bs.cssMediaQueries,""),f=(f.match(Bs.cssVarDeclRules)||[]).join(""),f||!1)},onComplete:function(f,p,m){OI(f,{store:Gr.dom,onWarning:i}),ty=!0,To(t)}}):(hp=t.rootElement,wI({rootElement:t.rootElement,include:t.include,exclude:t.exclude,skipDisabled:!1,onBeforeSend:t.onBeforeSend,onError:function(f,p,m){var E=f.responseURL||K2(m,location.href),g=f.statusText?"(".concat(f.statusText,")"):"Unspecified Error"+(f.status===0?" (possibly CORS related)":""),y="CSS XHR Error: ".concat(E," ").concat(f.status," ").concat(g);r(y,p,f,E)},onSuccess:function(f,p,m){var E=(p.sheet||{}).disabled&&!p.__cssVars;if(E)return!1;var g=p.nodeName.toLowerCase()==="link",y=p.nodeName.toLowerCase()==="style"&&f!==p.textContent,S=t.onSuccess(f,p,m);return f=S!==void 0&&!S?"":S||f,t.updateURLs&&(g||y)&&(f=I8(f,m)),f},onComplete:function(f,p){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],E=ca({},Gr.dom,Gr.user),g=!1;if(Gr.job={},m.forEach(function(O,R){var k=p[R];if(O.__cssVars=O.__cssVars||{},O.__cssVars.text=k,Bs.cssVars.test(k))try{var P=aC(k,{preserveStatic:t.preserveStatic,removeComments:!0});OI(P,{parseHost:!!t.rootElement.host,store:Gr.dom,onWarning:i}),O.__cssVars.tree=P}catch(G){r(G.message,O)}}),ca(Gr.job,Gr.dom),t.updateDOM?(ca(Gr.user,t.variables),ca(Gr.job,Gr.user)):(ca(Gr.job,Gr.user,t.variables),ca(E,t.variables)),g=du.job>0&&!!(Object.keys(Gr.job).length>Object.keys(E).length||Object.keys(E).length&&Object.keys(Gr.job).some(function(O){return Gr.job[O]!==E[O]})),g)ny(t.rootElement),To(t);else{var y=[],S=[],C=!1;if(t.updateDOM&&du.job++,m.forEach(function(O,R){var k=!O.__cssVars.tree;if(O.__cssVars.tree)try{C8(O.__cssVars.tree,ca({},t,{variables:Gr.job,onWarning:i}));var P=j2(O.__cssVars.tree);if(t.updateDOM){var G=p[R],V=Bs.cssVarFunc.test(G);if(O.getAttribute("data-cssvars")||O.setAttribute("data-cssvars","src"),P.length&&V){var H=O.getAttribute("data-cssvars-group")||++du.group,F=P.replace(/\s/g,""),z=t.rootElement.querySelector('[data-cssvars="out"][data-cssvars-group="'.concat(H,'"]'))||document.createElement("style");C=C||Bs.cssKeyframes.test(P),t.preserveStatic&&O.sheet&&(O.sheet.disabled=!0),z.hasAttribute("data-cssvars")||z.setAttribute("data-cssvars","out"),F===O.textContent.replace(/\s/g,"")?(k=!0,z&&z.parentNode&&(O.removeAttribute("data-cssvars-group"),z.parentNode.removeChild(z))):F!==z.textContent.replace(/\s/g,"")&&([O,z].forEach(function(K){K.setAttribute("data-cssvars-job",du.job),K.setAttribute("data-cssvars-group",H)}),z.textContent=P,y.push(P),S.push(z),z.parentNode||O.parentNode.insertBefore(z,O.nextSibling))}}else O.textContent.replace(/\s/g,"")!==P&&y.push(P)}catch(K){r(K.message,O)}k&&O.setAttribute("data-cssvars","skip"),O.hasAttribute("data-cssvars-job")||O.setAttribute("data-cssvars-job",du.job)}),gh=t.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])').length,t.shadowDOM){for(var T=[].concat(t.rootElement).concat([].slice.call(t.rootElement.querySelectorAll("*"))),I=0,L;L=T[I];++I)if(L.shadowRoot&&L.shadowRoot.querySelector("style")){var D=ca({},t,{rootElement:L.shadowRoot});To(D)}}t.updateDOM&&C&&N8(t.rootElement),hp=!1,t.onComplete(y.join(""),S,JSON.parse(JSON.stringify(Gr.job)),W_()-t.__benchmark),a(S.length)}}}));else document.addEventListener("DOMContentLoaded",function d(f){To(e),document.removeEventListener("DOMContentLoaded",d)})}}To.reset=function(){du.job=0,du.group=0,hp=!1,La&&(La.disconnect(),La=null),gh=0,ey=null,ty=!1;for(var e in Gr)Gr[e]={}};function S8(e){function n(l){var u=t(l)&&l.hasAttribute("disabled"),d=(l.sheet||{}).disabled;return u||d}function t(l){var u=l.nodeName.toLowerCase()==="link"&&(l.getAttribute("rel")||"").indexOf("stylesheet")!==-1;return u}function r(l){return l.nodeName.toLowerCase()==="style"}function i(l){var u=!1;if(l.type==="attributes"&&t(l.target)&&!n(l.target)){var d=l.attributeName==="disabled",f=l.attributeName==="href",p=l.target.getAttribute("data-cssvars")==="skip",m=l.target.getAttribute("data-cssvars")==="src";d?u=!p&&!m:f&&(p?l.target.setAttribute("data-cssvars",""):m&&ny(e.rootElement,!0),u=!0)}return u}function a(l){var u=!1;if(l.type==="childList"){var d=r(l.target),f=l.target.getAttribute("data-cssvars")==="out";u=d&&!f}return u}function s(l){var u=!1;return l.type==="childList"&&(u=[].slice.call(l.addedNodes).some(function(d){var f=d.nodeType===1,p=f&&d.hasAttribute("data-cssvars"),m=r(d)&&Bs.cssVars.test(d.textContent),E=!p&&(t(d)||m);return E&&!n(d)})),u}function o(l){var u=!1;return l.type==="childList"&&(u=[].slice.call(l.removedNodes).some(function(d){var f=d.nodeType===1,p=f&&d.getAttribute("data-cssvars")==="out",m=f&&d.getAttribute("data-cssvars")==="src",E=m;if(m||p){var g=d.getAttribute("data-cssvars-group"),y=e.rootElement.querySelector('[data-cssvars-group="'.concat(g,'"]'));m&&ny(e.rootElement,!0),y&&y.parentNode.removeChild(y)}return E})),u}window.MutationObserver&&(La&&(La.disconnect(),La=null),La=new MutationObserver(function(l){var u=l.some(function(d){return i(d)||a(d)||s(d)||o(d)});u&&To(e)}),La.observe(document.documentElement,{attributes:!0,attributeFilter:["disabled","href"],childList:!0,subtree:!0}))}function T8(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;clearTimeout(ey),ey=setTimeout(function(){e.__benchmark=null,To(e)},n)}function N8(e){var n=["animation-name","-moz-animation-name","-webkit-animation-name"].filter(function(p){return getComputedStyle(document.body)[p]})[0];if(n){for(var t=[].slice.call(e.querySelectorAll("*")),r=[],i="__CSSVARSPONYFILL-KEYFRAMES__",a=0,s=t.length;a<s;a++){var o=t[a],l=getComputedStyle(o)[n];l!=="none"&&(o.style[n]+=i,r.push(o))}document.body.offsetHeight;for(var u=0,d=r.length;u<d;u++){var f=r[u].style;f[n]=f[n].replace(i,"")}}}function I8(e,n){var t=e.replace(Bs.cssComments,"").match(Bs.cssUrls)||[];return t.forEach(function(r){var i=r.replace(Bs.cssUrls,"$1"),a=K2(i,n);e=e.replace(r,r.replace(i,a))}),e}function M8(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=/^-{2}/;return Object.keys(e).reduce(function(t,r){var i=n.test(r)?r:"--".concat(r.replace(/^-+/,""));return t[i]=e[r],t},{})}function K2(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:location.href,t=document.implementation.createHTMLDocument(""),r=t.createElement("base"),i=t.createElement("a");return t.head.appendChild(r),t.body.appendChild(i),r.href=n,i.href=e,i.href}function W_(){return vm&&(window.performance||{}).now?window.performance.now():new Date().getTime()}function ny(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=[].slice.call(e.querySelectorAll('[data-cssvars="skip"],[data-cssvars="src"]'));t.forEach(function(r){return r.setAttribute("data-cssvars","")}),n&&(Gr.dom={})}var Kr=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=Math.random()*16|0,t=e==="x"?n:n&3|8;return t.toString(16)})},A8=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t._channels=new Map,t._enteredChannelUrls=[],t}return B(n,e),Object.defineProperty(n.prototype,"enteredChannels",{get:function(){var t=this;return this._enteredChannelUrls.map(function(r){return t._channels.get(r)}).filter(function(r){return!!r})},enumerable:!1,configurable:!0}),n.prototype.isEnteredChannel=function(t){return this._enteredChannelUrls.includes(t)},n.prototype.enter=function(t){this._enteredChannelUrls.indexOf(t)<0&&this._enteredChannelUrls.push(t)},n.prototype.exit=function(t){var r=this._enteredChannelUrls.indexOf(t);r>=0&&this._enteredChannelUrls.splice(r,1)},n.prototype.exitAll=function(){this._enteredChannelUrls=[]},n.prototype.get=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){return[2,this._channels.get(t)]})})},n.prototype.upsert=function(t){return A(this,void 0,void 0,function(){var r,i=this;return M(this,function(a){return r=[],t.forEach(function(s){if(i._channels.has(s.url)){var o=i._channels.get(s.url);Object.assign(o,s),r.push(o)}else i._channels.set(s.url,s),r.push(s)}),[2,r]})})},n.prototype.remove=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){return this._channels.delete(t),this.exit(t),[2]})})},n.prototype.clear=function(){return A(this,void 0,void 0,function(){return M(this,function(t){return this._channels.clear(),this._enteredChannelUrls=[],[2]})})},n}(Ur),$2={channelUrl:void 0,name:void 0,coverUrlOrImage:void 0,data:void 0,customType:void 0,operatorUserIds:void 0,isEphemeral:void 0},w8=function(e){function n(t){var r=t.channelUrl,i=t.isInternalCall,a=e.call(this)||this;return a.method=we.GET,a.path="".concat(i?PL:Pu,"/").concat(encodeURIComponent(r)),a.params={show_pinned_messages:!0},a}return B(n,e),n}(Re),LI=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.channel=new Ol(t,r),i}return B(n,e),n}(He),R8=function(e){function n(t){var r=this,i=t.channelUrl,a=t.coverUrlOrImage,s=t.name,o=t.data,l=t.customType,u=t.operatorUserIds,d=t.isEphemeral;return(r=e.call(this)||this).method=we.POST,r.path=Pu,r.params=Xe(_t({channel_url:i,cover_url:X("string",a)?a:null,cover_file:jr(a)?a:null,name:s,data:o,custom_type:l,operators:u,is_ephemeral:d})),r}return B(n,e),n}(Re);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.channel=new Ol(t,r),i}B(n,e)})(He);var O8=function(e){function n(t){var r=t.channelUrl;return e.call(this,{code:"ENTR",payload:{channel_url:r},ackRequired:!0})||this}return B(n,e),n}(_i),W2=function(e){function n(t,r,i){var a,s,o=this;return o=e.call(this,t,"SYEV",i)||this,i.data&&(o.participantCount=(a=i.data.participant_count)!==null&&a!==void 0?a:0,o.user=new dn(t,i.data),o.ts=(s=i.data.edge_ts)!==null&&s!==void 0?s:0),o}return B(n,e),n}(Po),D8=function(e){function n(t){var r=t.channelUrl;return e.call(this,{code:"EXIT",payload:{channel_url:r},ackRequired:!0})||this}return B(n,e),n}(_i),Q2=function(e){function n(t,r,i){var a,s,o=this;return o=e.call(this,t,"EXIT",i)||this,i.data&&(o.participantCount=(a=i.data.participant_count)!==null&&a!==void 0?a:0,o.user=new dn(t,i.data),o.ts=(s=i.data.edge_ts)!==null&&s!==void 0?s:0),o}return B(n,e),n}(Po),Q_={},gs=function(e){function n(t,r){var i=e.call(this,t,W(W({},r),{channelType:cn.OPEN}))||this;return i.subscribeChannelEvent=jt,i.unsubscribeChannelEvent=jt,i.refreshChannel=function(){return A(i,void 0,void 0,function(){return M(this,function(a){return[2,jt()]})})},i._openChannelCache=new A8(t),i._openChannelHandlers=new Map,i._dispatcher.on(function(a){var s,o;if(a instanceof Wn)i._handleEvent(a).catch(function(f){if(Ai(f)&&i._sdkState.appState==="foreground")throw f});else if(a instanceof pa&&a.stateType===On.CONNECTED){var l=i._openChannelCache.enteredChannels;try{for(var u=je(l),d=u.next();!d.done;d=u.next())d.value.enter()}catch(f){s={error:f}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(s)throw s.error}}}}),Q_[t]||(Q_[t]=i),i}return B(n,e),n.of=function(t){return Q_[t]},n.prototype.buildOpenChannelFromSerializedData=function(t){var r=Tl(t);return new Ol(this._iid,Ol.payloadify(r))},n.prototype.getChannelFromCache=function(t){var r;return A(this,void 0,void 0,function(){return M(this,function(i){switch(i.label){case 0:return[4,this._openChannelCache.get(t)];case 1:return[2,(r=i.sent())!==null&&r!==void 0?r:null]}})})},n.prototype.upsertChannelsToCache=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){switch(r.label){case 0:return[4,this._openChannelCache.upsert(t)];case 1:return[2,r.sent()]}})})},n.prototype.removeChannelsFromCache=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l;return M(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,7]),r=je(t),i=r.next(),u.label=1;case 1:return i.done?[3,4]:(a=i.value,[4,this._openChannelCache.remove(a)]);case 2:u.sent(),u.label=3;case 3:return i=r.next(),[3,1];case 4:return[3,7];case 5:return s=u.sent(),o={error:s},[3,7];case 6:try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(o)throw o.error}return[7];case 7:return[2]}})})},n.prototype.setEnteredToCache=function(t){this._openChannelCache.enter(t.url)},n.prototype.setExitedToCache=function(t){this._openChannelCache.exit(t.url)},Object.defineProperty(n.prototype,"handlers",{get:function(){return At([],ft(this._openChannelHandlers.values()),!1)},enumerable:!1,configurable:!0}),n.prototype._handleEvent=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u,d,f,p,m,E,g,y,S,C,T,I,L,D,O,R,k,P,G,V,H,F,z,K,ee,$,Q,ne,j,Z,ie,fe,te,le,Me,ae,he,pe,Ne,_e,ge,me,Le,Qe,Pe,Ge,De,tt,Ue,Ye,yt,Nt,Rt,st,Be,nt,qe,rn,it,Ct,Je,pt,Ut,Pt,Ht,bt,qt,Lt,wt=this;return M(this,function(Et){switch(Et.label){case 0:switch(Et.trys.push([0,59,,60]),t.code){case"MESG":case"FILE":case"ADMM":case"BRDM":return[3,1];case"MEDI":case"FEDI":case"AEDI":return[3,4];case"DELM":return[3,7];case"MRCT":return[3,10];case"MTHD":return[3,13];case"MCNT":return[3,16];case"PEDI":return[3,27];case"VOTE":return[3,30];case"SYEV":return[3,33]}return[3,58];case 1:return s=null,t.code==="MESG"?s=t.as(Vy):t.code==="FILE"?s=t.as(xy):t.code!=="ADMM"&&t.code!="BRDM"||(s=t.as(n2)),s?(r=s.message,i=s.isMentioned,r.channelType!==cn.OPEN?[3,3]:[4,this.getChannel(r.channelUrl,!0)]):[3,3];case 2:a=Et.sent(),ut(function(){return A(wt,void 0,void 0,function(){var xe,ye,Ze,St,Ot;return M(this,function(an){try{for(xe=je(this._openChannelHandlers.values()),ye=xe.next();!ye.done;ye=xe.next())Ze=ye.value,this._openChannelCache.isEnteredChannel(a.url)&&(Ze.onMessageReceived&&Ze.onMessageReceived(a,r),i&&Ze.onMentionReceived&&Ze.onMentionReceived(a,r))}catch(xt){St={error:xt}}finally{try{ye&&!ye.done&&(Ot=xe.return)&&Ot.call(xe)}finally{if(St)throw St.error}}return[2]})})}),Et.label=3;case 3:return[3,58];case 4:return s=null,t.code==="MEDI"?s=t.as(Op):t.code==="FEDI"?s=t.as(Dp):t.code==="AEDI"&&(s=t.as(r2)),s?(o=s.message,l=s.mentionCountChange,o.channelType!==cn.OPEN?[3,6]:[4,this.getChannel(o.channelUrl,!0)]):[3,6];case 5:u=Et.sent(),d=!1,u.lastPinnedMessage&&u.lastPinnedMessage.messageId===o.messageId&&u.lastPinnedMessage.updatedAt<o.updatedAt&&(u.lastPinnedMessage=o,d=!0),ut(function(){return A(wt,void 0,void 0,function(){var xe,ye,Ze,St,Ot,an,xt;return M(this,function(dt){try{for(xe=je(this._openChannelHandlers.values()),ye=xe.next();!ye.done;ye=xe.next())Ze=ye.value,this._openChannelCache.isEnteredChannel(u.url)&&(d&&((an=Ze.onPinnedMessageUpdated)===null||an===void 0||an.call(Ze,u),(xt=Ze.onChannelChanged)===null||xt===void 0||xt.call(Ze,u)),Ze.onMessageUpdated&&Ze.onMessageUpdated(u,o),l>0&&Ze.onMentionReceived&&Ze.onMentionReceived(u,o))}catch(Jt){St={error:Jt}}finally{try{ye&&!ye.done&&(Ot=xe.return)&&Ot.call(xe)}finally{if(St)throw St.error}}return[2]})})}),Et.label=6;case 6:return[3,58];case 7:return f=t.as(DA),$=f.channelUrl,Q=f.channelType,p=f.messageId,Q!==cn.OPEN?[3,9]:[4,this.getChannel($,!0)];case 8:m=Et.sent(),ut(function(){return A(wt,void 0,void 0,function(){var xe,ye,Ze,St,Ot;return M(this,function(an){try{for(xe=je(this._openChannelHandlers.values()),ye=xe.next();!ye.done;ye=xe.next())Ze=ye.value,this._openChannelCache.isEnteredChannel(m.url)&&Ze.onMessageDeleted&&Ze.onMessageDeleted(m,p)}catch(xt){St={error:xt}}finally{try{ye&&!ye.done&&(Ot=xe.return)&&Ot.call(xe)}finally{if(St)throw St.error}}return[2]})})}),Et.label=9;case 9:return[3,58];case 10:return E=t.as(i2),$=E.channelUrl,Q=E.channelType,g=E.event,Q!==cn.OPEN?[3,12]:[4,this.getChannel($,!0)];case 11:y=Et.sent(),ut(function(){return A(wt,void 0,void 0,function(){var xe,ye,Ze,St,Ot;return M(this,function(an){try{for(xe=je(this._openChannelHandlers.values()),ye=xe.next();!ye.done;ye=xe.next())Ze=ye.value,this._openChannelCache.isEnteredChannel(y.url)&&Ze.onReactionUpdated&&Ze.onReactionUpdated(y,g)}catch(xt){St={error:xt}}finally{try{ye&&!ye.done&&(Ot=xe.return)&&Ot.call(xe)}finally{if(St)throw St.error}}return[2]})})}),Et.label=12;case 12:return[3,58];case 13:return(S=t.as(a2).event).channelType!==cn.OPEN?[3,15]:[4,this.getChannel(S.channelUrl,!0)];case 14:C=Et.sent(),ut(function(){return A(wt,void 0,void 0,function(){var xe,ye,Ze,St,Ot;return M(this,function(an){try{for(xe=je(this._openChannelHandlers.values()),ye=xe.next();!ye.done;ye=xe.next())Ze=ye.value,this._openChannelCache.isEnteredChannel(C.url)&&Ze.onThreadInfoUpdated&&Ze.onThreadInfoUpdated(C,S)}catch(xt){St={error:xt}}finally{try{ye&&!ye.done&&(Ot=xe.return)&&Ot.call(xe)}finally{if(St)throw St.error}}return[2]})})}),Et.label=15;case 15:return[3,58];case 16:T=t.as(s2).openChannelMemberCounts,I=[],Et.label=17;case 17:Et.trys.push([17,22,23,24]),L=je(T),D=L.next(),Et.label=18;case 18:return D.done?[3,21]:(O=D.value,$=O.channelUrl,ae=O.participantCount,R=O.updatedAt,[4,this.getChannelFromCache($)]);case 19:(k=Et.sent())&&k._updateParticipantCount(ae,R)&&I.push(k),Et.label=20;case 20:return D=L.next(),[3,18];case 21:return[3,24];case 22:return P=Et.sent(),qt={error:P},[3,24];case 23:try{D&&!D.done&&(Lt=L.return)&&Lt.call(L)}finally{if(qt)throw qt.error}return[7];case 24:return I.length>0?[4,this.upsertChannelsToCache(I)]:[3,26];case 25:G=Et.sent(),ut(function(){return A(wt,void 0,void 0,function(){var xe,ye,Ze,St,Ot;return M(this,function(an){try{for(xe=je(this._openChannelHandlers.values()),ye=xe.next();!ye.done;ye=xe.next())(Ze=ye.value).onChannelMemberCountChanged&&Ze.onChannelMemberCountChanged(G)}catch(xt){St={error:xt}}finally{try{ye&&!ye.done&&(Ot=xe.return)&&Ot.call(xe)}finally{if(St)throw St.error}}return[2]})})}),Et.label=26;case 26:return[3,58];case 27:return V=t.as(o2),H=V.event,F=V.status,$=V.channelUrl,Q=V.channelType,$&&Q===cn.OPEN?[4,this.getChannel($,!0)]:[3,29];case 28:z=Et.sent(),this._dispatcher.dispatch(new ky({event:H,source:ve.EVENT_POLL_UPDATED})),ut(F===vw?function(){return A(wt,void 0,void 0,function(){var xe,ye,Ze,St,Ot;return M(this,function(an){try{for(xe=je(this._openChannelHandlers.values()),ye=xe.next();!ye.done;ye=xe.next())(Ze=ye.value).onPollDeleted&&Ze.onPollDeleted(z,H.pollId)}catch(xt){St={error:xt}}finally{try{ye&&!ye.done&&(Ot=xe.return)&&Ot.call(xe)}finally{if(St)throw St.error}}return[2]})})}:function(){return A(wt,void 0,void 0,function(){var xe,ye,Ze,St,Ot;return M(this,function(an){try{for(xe=je(this._openChannelHandlers.values()),ye=xe.next();!ye.done;ye=xe.next())(Ze=ye.value).onPollUpdated&&Ze.onPollUpdated(z,H)}catch(xt){St={error:xt}}finally{try{ye&&!ye.done&&(Ot=xe.return)&&Ot.call(xe)}finally{if(St)throw St.error}}return[2]})})}),Et.label=29;case 29:return[3,58];case 30:return K=t.as(zy),ee=K.event,$=K.channelUrl,Q=K.channelType,$&&Q===cn.OPEN?[4,this.getChannel($,!0)]:[3,32];case 31:ne=Et.sent(),this._dispatcher.dispatch(new am({event:ee,source:ve.EVENT_POLL_VOTED})),ut(function(){return A(wt,void 0,void 0,function(){var xe,ye,Ze,St,Ot;return M(this,function(an){try{for(xe=je(this._openChannelHandlers.values()),ye=xe.next();!ye.done;ye=xe.next())(Ze=ye.value).onPollVoted&&Ze.onPollVoted(ne,ee)}catch(xt){St={error:xt}}finally{try{ye&&!ye.done&&(Ot=xe.return)&&Ot.call(xe)}finally{if(St)throw St.error}}return[2]})})}),Et.label=32;case 32:return[3,58];case 33:if(!(j=t.as(Po).event).isOpenChannelEvent)return[3,57];switch(j.category){case Ln.CHANNEL_ENTER:return[3,34];case Ln.CHANNEL_EXIT:return[3,36];case Ln.CHANNEL_OPERATOR_UPDATE:return[3,38];case Ln.USER_CHANNEL_MUTE:case Ln.USER_CHANNEL_UNMUTE:return[3,40];case Ln.USER_CHANNEL_BAN:case Ln.USER_CHANNEL_UNBAN:return[3,42];case Ln.CHANNEL_FREEZE:case Ln.CHANNEL_UNFREEZE:return[3,44];case Ln.CHANNEL_DELETED:return[3,46];case Ln.CHANNEL_PROP_CHANGED:return[3,49];case Ln.CHANNEL_META_DATA_CHANGED:return[3,51];case Ln.CHANNEL_META_COUNTERS_CHANGED:return[3,53];case Ln.PINNED_MESSAGE_CHANGED:return[3,55]}return[3,57];case 34:return[4,this.getChannel(j.channelUrl,!0)];case 35:return Z=Et.sent(),ie=t.as(W2),ae=ie.participantCount,fe=ie.user,te=Z._updateParticipantCount(ae,j.ts),ut(function(){return A(wt,void 0,void 0,function(){return M(this,function(xe){return this._openChannelHandlers.forEach(function(ye){ye.onUserEntered&&ye.onUserEntered(Z,fe),te&&ye.onChannelParticipantCountChanged&&ye.onChannelParticipantCountChanged(Z)}),[2]})})}),[3,57];case 36:return[4,this.getChannel(j.channelUrl,!0)];case 37:return le=Et.sent(),Me=t.as(Q2),ae=Me.participantCount,he=Me.user,pe=le._updateParticipantCount(ae,j.ts),ut(function(){return A(wt,void 0,void 0,function(){return M(this,function(xe){return this._openChannelHandlers.forEach(function(ye){ye.onUserExited&&ye.onUserExited(le,he),pe&&ye.onChannelParticipantCountChanged&&ye.onChannelParticipantCountChanged(le)}),[2]})})}),[3,57];case 38:return[4,this.getChannel(j.channelUrl,!0)];case 39:return Ne=Et.sent(),_e=t.as(Jw).operators,Ne.operators=_e,this.upsertChannelsToCache([Ne]),ut(function(){return A(wt,void 0,void 0,function(){return M(this,function(xe){return this._openChannelHandlers.forEach(function(ye){ye.onOperatorUpdated&&ye.onOperatorUpdated(Ne,_e)}),[2]})})}),[3,57];case 40:return[4,this.getChannel(j.channelUrl,!0)];case 41:return ge=Et.sent(),me=j.category===Ln.USER_CHANNEL_MUTE,Le=t.as(me?kw:Pw).user,ut(function(){return A(wt,void 0,void 0,function(){return M(this,function(xe){return this._openChannelHandlers.forEach(function(ye){me?ye.onUserMuted&&ye.onUserMuted(ge,Le):ye.onUserUnmuted&&ye.onUserUnmuted(ge,Le)}),[2]})})}),[3,57];case 42:return[4,this.getChannel(j.channelUrl,!0)];case 43:return Qe=Et.sent(),Pe=j.category===Ln.USER_CHANNEL_BAN,Ge=t.as(Pe?xw:Fw).user,ut(function(){return A(wt,void 0,void 0,function(){return M(this,function(xe){return this._openChannelHandlers.forEach(function(ye){Pe?ye.onUserBanned&&ye.onUserBanned(Qe,Ge):ye.onUserUnbanned&&ye.onUserUnbanned(Qe,Ge)}),[2]})})}),[3,57];case 44:return[4,this.getChannel(j.channelUrl,!0)];case 45:return De=Et.sent(),tt=t.as(Hw).freeze,De.isFrozen=tt,this.upsertChannelsToCache([De]),ut(function(){return A(wt,void 0,void 0,function(){return M(this,function(xe){return this._openChannelHandlers.forEach(function(ye){tt?ye.onChannelFrozen&&ye.onChannelFrozen(De):ye.onChannelUnfrozen&&ye.onChannelUnfrozen(De)}),[2]})})}),[3,57];case 46:return[4,this.getChannel(j.channelUrl,!0)];case 47:return Ue=Et.sent(),[4,this.removeChannelsFromCache([Ue.url])];case 48:return Et.sent(),ut(function(){return A(wt,void 0,void 0,function(){return M(this,function(xe){return this._openChannelHandlers.forEach(function(ye){ye.onChannelDeleted&&ye.onChannelDeleted(Ue.url,Ue.channelType)}),[2]})})}),[3,57];case 49:return[4,this.getChannelWithoutCache(j.channelUrl,!0)];case 50:return Ye=Et.sent(),ut(function(){return A(wt,void 0,void 0,function(){return M(this,function(xe){return this._openChannelHandlers.forEach(function(ye){ye.onChannelChanged&&ye.onChannelChanged(Ye)}),[2]})})}),[3,57];case 51:return[4,this.getChannel(j.channelUrl,!0)];case 52:return yt=Et.sent(),Nt=t.as(Lw),Rt=Nt.created,st=Nt.updated,Be=Nt.deleted,Rt&&yt._upsertCachedMetaData(Rt,j.ts),st&&yt._upsertCachedMetaData(st,j.ts),Be&&yt._removeFromCachedMetaData(Be,j.ts),ut(function(){return A(wt,void 0,void 0,function(){return M(this,function(xe){return this._openChannelHandlers.forEach(function(ye){Rt&&ye.onMetaDataCreated&&ye.onMetaDataCreated(yt,Rt),st&&ye.onMetaDataUpdated&&ye.onMetaDataUpdated(yt,st),Be&&ye.onMetaDataDeleted&&ye.onMetaDataDeleted(yt,Be)}),[2]})})}),[3,57];case 53:return[4,this.getChannel(j.channelUrl,!0)];case 54:return nt=Et.sent(),qe=t.as(Uw),rn=qe.created,it=qe.updated,Ct=qe.deleted,ut(function(){return A(wt,void 0,void 0,function(){return M(this,function(xe){return this._openChannelHandlers.forEach(function(ye){rn&&ye.onMetaCounterCreated&&ye.onMetaCounterCreated(nt,rn),it&&ye.onMetaCounterUpdated&&ye.onMetaCounterUpdated(nt,it),Ct&&ye.onMetaCounterDeleted&&ye.onMetaCounterDeleted(nt,Ct)}),[2]})})}),[3,57];case 55:return[4,this.getChannel(j.channelUrl,!0)];case 56:return Je=Et.sent(),pt=t.as(e2),Ut=pt.pinnedMessageIds,Pt=pt.latestPinnedMessage,(Ht=pt.ts)>Je._pinnedMessagesUpdatedAt&&(Je.pinnedMessageIds=Ut,Je.lastPinnedMessage=Pt,Je._pinnedMessagesUpdatedAt=Ht,this.upsertChannelsToCache([Je]),ut(function(){return A(wt,void 0,void 0,function(){var xe,ye,Ze,St,Ot;return M(this,function(an){try{for(xe=je(this._openChannelHandlers.values()),ye=xe.next();!ye.done;ye=xe.next())(Ze=ye.value).onChannelChanged&&Ze.onChannelChanged(Je)}catch(xt){St={error:xt}}finally{try{ye&&!ye.done&&(Ot=xe.return)&&Ot.call(xe)}finally{if(St)throw St.error}}return[2]})})}),ut(function(){return A(wt,void 0,void 0,function(){return M(this,function(xe){return this._openChannelHandlers.forEach(function(ye){ye.onPinnedMessageUpdated&&ye.onPinnedMessageUpdated(Je)}),[2]})})})),[3,57];case 57:return[3,58];case 58:return[3,60];case 59:if(bt=Et.sent(),Ai(bt))throw bt;return[3,60];case 60:return[2]}})})},n.prototype.addHandler=function(t,r){this._openChannelHandlers.set(t,r)},n.prototype.removeHandler=function(t){this._openChannelHandlers.delete(t)},n.prototype.clearHandler=function(){this._openChannelHandlers.clear()},n.prototype.getChannel=function(t,r){return r===void 0&&(r=!1),A(this,void 0,void 0,function(){var i;return M(this,function(a){switch(a.label){case 0:ke(X("string",t)).throw(J.invalidParameters),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.getChannelFromCache(t)];case 2:return(i=a.sent())?[2,i]:[3,4];case 3:return a.sent(),[3,4];case 4:return[4,this.getChannelWithoutCache(t,r)];case 5:return[2,a.sent()]}})})},n.prototype.getChannelWithoutCache=function(t,r){return r===void 0&&(r=!1),A(this,void 0,void 0,function(){var i,a,s;return M(this,function(o){switch(o.label){case 0:return ke(X("string",t)).throw(J.invalidParameters),i=new w8({channelUrl:t,isInternalCall:r}),[4,this._requestQueue.send(i)];case 1:return a=o.sent(),s=a.as(LI).channel,[4,this.upsertChannelsToCache([s])];case 2:return[2,o.sent()[0]]}})})},n.prototype.createChannel=function(t){return A(this,void 0,void 0,function(){var r,i,a,s;return M(this,function(o){switch(o.label){case 0:return r=W(W({},$2),t),ke(function(l){return nn("string",l.operatorUserIds,!0)&&(X("string",l.coverUrlOrImage,!0)||jr(l.coverUrlOrImage,!0))&&X("string",l.name,!0)&&X("string",l.data,!0)&&X("string",l.customType,!0)&&(X("string",l.channelUrl)&&/^\w+$/.test(l.channelUrl)||l.channelUrl===null||l.channelUrl===void 0)&&X("boolean",l.isEphemeral,!0)}(r)).throw(J.invalidParameters),i=new R8(r),[4,this._requestQueue.send(i)];case 1:return a=o.sent(),s=a.as(LI).channel,this.upsertChannelsToCache([s]),[2,s]}})})},n}(t2),UI={name:void 0,coverUrlOrImage:void 0,data:void 0,customType:void 0,operatorUserIds:void 0},L8=function(e){function n(t){var r=this,i=t.channelUrl,a=t.token,s=t.limit;return(r=e.call(this)||this).method=we.GET,r.path="".concat(Pu,"/").concat(encodeURIComponent(i),"/participants"),r.params={token:a,limit:s},r}return B(n,e),n}(Re),U8=function(e){function n(t,r){var i=e.call(this,t,r)||this;i.participants=[];var a=r.next,s=r.participants;return i.token=a,i.participants=s.map(function(o){return new oP(t,o)}),i}return B(n,e),n}(He),k8=function(e){function n(t,r,i){return e.call(this,t,r,cn.OPEN,i)||this}return B(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)},n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return M(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=Y.of(this._iid).requestQueue,r=new L8(W(W({},this),{token:this._token})),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),a=i.as(U8),s=a.participants,o=a.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw J.queryInProgress;case 4:return[3,6];case 5:throw J.invalidParameters;case 6:return[2]}})})},n}(Js),P8=function(e){function n(t){var r=this,i=t.channelUrl,a=t.coverUrlOrImage,s=t.name,o=t.data,l=t.customType,u=t.operatorUserIds;return(r=e.call(this)||this).method=we.PUT,r.path="".concat(Pu,"/").concat(encodeURIComponent(i)),r.params=Xe(_t({cover_url:X("string",a)?a:null,cover_file:jr(a)?a:null,name:s,data:o,custom_type:l,operators:u})),r}return B(n,e),n}(Re),x8=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.channel=new Ol(t,r),i}return B(n,e),n}(He),F8=function(e){function n(t){var r=this,i=t.channelUrl;return(r=e.call(this)||this).method=we.DELETE,r.path="".concat(Pu,"/").concat(encodeURIComponent(i)),r}return B(n,e),n}(Re);(function(e){function n(t,r){return e.call(this,t,r)||this}B(n,e)})(He);var Ol=function(e){function n(t,r){var i,a=this;return(a=e.call(this,t,r)||this)._lastParticipantCountUpdated=0,a.participantCount=0,a.operators=[],a.lastPinnedMessage=null,a._pinnedMessagesUpdatedAt=0,a.channelType=cn.OPEN,a.participantCount=(i=r.participant_count)!==null&&i!==void 0?i:0,a.operators=Array.isArray(r.operators)?r.operators.map(function(s){return new dn(t,s)}):[],a.lastPinnedMessage=r.latest_pinned_message?Ei(a._iid,W({channel_type:a.channelType},r.latest_pinned_message)):null,a}return B(n,e),n.payloadify=function(t){return Xe(_t(W(W({},Lp.payloadify(t)),{participant_count:t.participantCount,operators:t.operators.map(function(r){return dn.payloadify(r)}),latest_pinned_message:t.lastPinnedMessage?wg(t.lastPinnedMessage):null})))},n.prototype.serialize=function(){return ud(this)},n.prototype.isOperator=function(t){return t instanceof dn?this.isOperator(t.userId):this.operators.some(function(r){return r.userId===t})},n.prototype._updateParticipantCount=function(t,r){return r>this._lastParticipantCountUpdated&&(this.participantCount=t,this._lastParticipantCountUpdated=r,!0)},n.prototype.createParticipantListQuery=function(t){return new k8(this._iid,this.url,t)},n.prototype.refresh=function(){return A(this,void 0,void 0,function(){return M(this,function(t){switch(t.label){case 0:return[4,gs.of(this._iid).getChannelWithoutCache(this.url)];case 1:return[2,t.sent()]}})})},n.prototype.enter=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return M(this,function(l){switch(l.label){case 0:return t=Y.of(this._iid).requestQueue,r=new O8({channelUrl:this.url}),[4,t.send(r)];case 1:return i=l.sent(),a=i.as(W2),s=a.participantCount,o=a.ts,this._updateParticipantCount(s,o),gs.of(this._iid).setEnteredToCache(this),[2]}})})},n.prototype.exit=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return M(this,function(l){switch(l.label){case 0:return t=Y.of(this._iid).requestQueue,r=new D8({channelUrl:this.url}),[4,t.send(r)];case 1:return i=l.sent(),a=i.as(Q2),s=a.participantCount,o=a.ts,this._updateParticipantCount(s,o),gs.of(this._iid).setExitedToCache(this),xr.of(this._iid).fileMessageQueue.cancel(this),[2]}})})},n.prototype.updateChannel=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o;return M(this,function(l){switch(l.label){case 0:return r=W(W({},UI),t),ke(function(u){return nn("string",u.operatorUserIds,!0)&&(X("string",u.coverUrlOrImage,!0)||jr(u.coverUrlOrImage,!0))&&X("string",u.name,!0)&&X("string",u.data,!0)&&X("string",u.customType,!0)}(r)).throw(J.invalidParameters),i=Y.of(this._iid).requestQueue,a=new P8(W({channelUrl:this.url},r)),[4,i.send(a)];case 1:return s=l.sent(),o=s.as(x8).channel,this._update(o),[4,gs.of(this._iid).upsertChannelsToCache([o])];case 2:return l.sent(),[2,this]}})})},n.prototype.updateChannelWithOperatorUserIds=function(t,r,i,a,s){return A(this,void 0,void 0,function(){var o;return M(this,function(l){return o=W(W({},UI),{name:t,coverUrlOrImage:r,data:i,operatorUserIds:a,customType:s}),[2,this.updateChannel(o)]})})},n.prototype.delete=function(){return A(this,void 0,void 0,function(){var t,r;return M(this,function(i){switch(i.label){case 0:return t=Y.of(this._iid).requestQueue,r=new F8({channelUrl:this.url}),[4,t.send(r)];case 1:return i.sent(),[4,gs.of(this._iid).removeChannelsFromCache([this.url])];case 2:return i.sent(),[2]}})})},n.prototype.updateUserMessage=function(t,r){return A(this,void 0,void 0,function(){var i,a,s,o=this;return M(this,function(l){switch(l.label){case 0:return[4,e.prototype.updateUserMessage.call(this,t,r)];case 1:return i=l.sent(),a=!1,s=!1,this.lastPinnedMessage&&this.lastPinnedMessage.messageId===i.messageId&&(this.lastPinnedMessage=i,a=!0,s=!0),a&&gs.of(this._iid).handlers.map(function(u){u.onChannelChanged&&u.onChannelChanged(o)}),s&&gs.of(this._iid).handlers.map(function(u){u.onPinnedMessageUpdated&&u.onPinnedMessageUpdated(o)}),[2,i]}})})},n.prototype.updateFileMessage=function(t,r){return A(this,void 0,void 0,function(){var i,a,s,o=this;return M(this,function(l){switch(l.label){case 0:return[4,e.prototype.updateFileMessage.call(this,t,r)];case 1:return i=l.sent(),a=!1,s=!1,this.lastPinnedMessage&&this.lastPinnedMessage.messageId===i.messageId&&(this.lastPinnedMessage=i,a=!0,s=!0),a&&gs.of(this._iid).handlers.map(function(u){u.onChannelChanged&&u.onChannelChanged(o)}),s&&gs.of(this._iid).handlers.map(function(u){u.onPinnedMessageUpdated&&u.onPinnedMessageUpdated(o)}),[2,i]}})})},n}(Lp);(function(e){function n(t){t===void 0&&(t={});var r=e.call(this)||this;return Object.keys(t).forEach(function(i){r.hasOwnProperty(i)&&(r[i]=t[i])}),r}return B(n,e),n})(function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.onUserEntered=jt,t.onUserExited=jt,t.onChannelParticipantCountChanged=jt,t.onPollUpdated=jt,t.onPollVoted=jt,t.onPollDeleted=jt,t.onPinnedMessageUpdated=jt,t}return B(n,e),n}(d2));var H8=function(e){function n(t){var r=this,i=t.token,a=t.limit,s=t.nameKeyword,o=t.urlKeyword,l=t.customTypes,u=t.includeFrozen,d=t.includeMetaData;return(r=e.call(this)||this).method=we.GET,r.path=Pu,r.params=Xe({token:i,limit:a,name_contains:s,url_contains:o,custom_types:l,show_frozen:u,show_metadata:d,show_pinned_messages:!0}),r}return B(n,e),n}(Re),B8=function(e){function n(t,r){var i=e.call(this,t,r)||this;i.channels=[];var a=r.next,s=r.channels,o=r.ts;return i.token=a,s&&s.length>0&&(i.channels=s.map(function(l){return new Ol(t,l)})),i.ts=typeof o=="number"?o:null,i}return B(n,e),n}(He),G8=function(e){function n(t,r){var i,a,s,o,l,u=this;return(u=e.call(this,t,r)||this).includeFrozen=!0,u.includeMetaData=!0,u.nameKeyword=null,u.urlKeyword=null,u.customTypes=null,u.includeFrozen=(i=r.includeFrozen)===null||i===void 0||i,u.includeMetaData=(a=r.includeMetaData)===null||a===void 0||a,u.nameKeyword=(s=r.nameKeyword)!==null&&s!==void 0?s:null,u.urlKeyword=(o=r.urlKeyword)!==null&&o!==void 0?o:null,u.customTypes=(l=r.customTypes)!==null&&l!==void 0?l:null,u}return B(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&X("boolean",this.includeFrozen)&&X("boolean",this.includeMetaData)&&X("string",this.nameKeyword,!0)&&X("string",this.urlKeyword,!0)&&nn("string",this.customTypes,!0)},n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return M(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,4]:this._hasNext?(this._isLoading=!0,t=Y.of(this._iid).requestQueue,r=new H8(_t(W(W({},this),{token:this._token}))),[4,t.send(r)]):[3,3]:[3,6];case 1:return i=l.sent(),a=i.as(B8),s=a.channels,o=a.token,this._token=o,this._hasNext=!!o,[4,gs.of(this._iid).upsertChannelsToCache(s)];case 2:return l.sent(),this._isLoading=!1,[2,s];case 3:return[2,[]];case 4:throw J.queryInProgress;case 5:return[3,7];case 6:throw J.invalidParameters;case 7:return[2]}})})},n}(Uo),V8=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.name="openChannel",t}return B(n,e),n.prototype.init=function(t,r){var i=r.sdkState,a=r.dispatcher,s=r.sessionManager,o=r.requestQueue,l=r.logger,u=r.onlineDetector,d=r.cacheContext;e.prototype.init.call(this,t,{sdkState:i,dispatcher:a,sessionManager:s,requestQueue:o,logger:l,onlineDetector:u,cacheContext:d}),this._manager=new gs(t,{sdkState:i,dispatcher:a,requestQueue:o,logger:l,cacheContext:d,sessionManager:s})},n.prototype.createOpenChannelListQuery=function(t){return t===void 0&&(t={}),new G8(this._iid,t)},n.prototype.addOpenChannelHandler=function(t,r){this._manager.addHandler(t,r)},n.prototype.removeOpenChannelHandler=function(t){this._manager.removeHandler(t)},n.prototype.removeAllOpenChannelHandlers=function(){this._manager.clearHandler()},n.prototype.buildOpenChannelFromSerializedData=function(t){return this._manager.buildOpenChannelFromSerializedData(t)},n.prototype.getChannel=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){return[2,this._manager.getChannel(t)]})})},n.prototype.getChannelWithoutCache=function(t){return A(this,void 0,void 0,function(){return M(this,function(r){return[2,this._manager.getChannelWithoutCache(t)]})})},n.prototype.createChannel=function(t){return t===void 0&&(t={}),A(this,void 0,void 0,function(){return M(this,function(r){return[2,this._manager.createChannel(t)]})})},n.prototype.createChannelWithOperatorUserIds=function(t,r,i,a,s){return A(this,void 0,void 0,function(){var o;return M(this,function(l){return(o=W({},$2)).name=t,o.coverUrlOrImage=r,o.data=i,o.operatorUserIds=a,o.customType=s,[2,this._manager.createChannel(o)]})})},n}(im),z8="No sendbird state value available. Make sure you are rendering `<SendbirdProvider>` at the top of your app.";function Tt(){var e=N.useContext(b2);if(!e)throw new Error(z8);return e}var Y2="INITIALIZE_AUDIO_UNIT",ry="RESET_AUDIO_UNIT",X2="SET_CURRENT_PLAYER",Z2="ON_VOICE_PLAYER_PLAY",J2="ON_VOICE_PLAYER_PAUSE",eR="ON_CURRENT_TIME_UPDATE",Cs={IDLE:"IDLE",PREPARING:"PREPARING",PLAYING:"PLAYING",PAUSED:"PAUSED",COMPLETED:"COMPLETED"},hu=function(){return{audioFile:null,playbackTime:0,duration:1e3,playingStatus:Cs.IDLE}},j8={currentPlayer:null,currentGroupKey:"",audioStorage:{}};function q8(e,n){var t,r,i,a,s,o,l,u,d;switch(n.type){case Y2:{var f=n.payload.groupKey,p=!((o=e.audioStorage)===null||o===void 0)&&o[f]?e.audioStorage[f]:hu();return p.playingStatus=Cs.PREPARING,x(x({},e),{audioStorage:x(x({},e.audioStorage),(t={},t[f]=p,t))})}case ry:{var f=n.payload.groupKey;return x(x({},e),{audioStorage:x(x({},e.audioStorage),(r={},r[f]=hu(),r))})}case X2:{var m=n.payload,E=m.audioPlayer,f=m.groupKey;return x(x({},e),{currentPlayer:E,currentGroupKey:f})}case Z2:{var g=n.payload,f=g.groupKey,y=g.audioFile,p=!((l=e.audioStorage)===null||l===void 0)&&l[f]?e.audioStorage[f]:hu();return p.audioFile=y,p.playingStatus=Cs.PLAYING,x(x({},e),{audioStorage:x(x({},e.audioStorage),(i={},i[f]=p,i))})}case J2:{var S=n.payload,f=S.groupKey,C=S.duration,T=S.currentTime,p=!((u=e.audioStorage)===null||u===void 0)&&u[f]?e.audioStorage[f]:hu();return p.playingStatus=Cs.PAUSED,C===T&&(p.playbackTime=0),x(x({},e),{audioStorage:x(x({},e.audioStorage),(a={},a[f]=p,a))})}case eR:{var f=n.payload.groupKey,I=e.currentPlayer,T=I.currentTime,C=I.duration,p=!((d=e.audioStorage)===null||d===void 0)&&d[f]?e.audioStorage[f]:hu();return p.playbackTime===p.duration&&p.playingStatus===Cs.PAUSED?p.playbackTime=0:T>0&&C>0&&(p.playbackTime=T,p.duration=C),x(x({},e),{audioStorage:x(x({},e.audioStorage),(s={},s[f]=p,s))})}default:return e}}var K8=function(e,n){return e===void 0&&(e=""),n===void 0&&(n=""),"".concat(e,"-").concat(n)},kI=function(e){return $y(navigator.userAgent)&&e.includes("m4a")?{name:q5,mimeType:K5}:{name:Jc,mimeType:Mo}},iy="ALL",Y_=function(){},$8={currentGroupKey:"",currentPlayer:null,audioStorage:{}},tR=N.createContext({play:Y_,pause:Y_,stop:Y_,voicePlayerStore:$8}),W8=function(e){var n=e.children,t=N.useReducer(q8,j8),r=t[0],i=t[1],a=r.currentGroupKey,s=r.currentPlayer,o=r.audioStorage,l=Tt().config,u=l.logger,d=function(m){m===void 0&&(m=""),a.includes(m)&&(u.info("VoicePlayer: Pause playing(by text)."),f(a))},f=function(m){s?m===a?(u.info("VoicePlayer: Pause playing(by group key)."),s.pause()):m===iy&&(u.info("VoicePlayer: Pause playing(all)."),s.pause()):u.warning("VoicePlayer: No currentPlayer to pause.")},p=function(m){var E=m.groupKey,g=m.audioFile,y=m.audioFileUrl,S=y===void 0?"":y,C=m.audioFileMimeType,T=C===void 0?Mo:C;E!==a&&f(a);var I=document.getElementById(lp),L=document.getElementById(qg);I&&L&&I.removeChild(L),u.info("VoicePlayer: Start getting audio file."),new Promise(function(D,O){var R;if(i({type:Y2,payload:{groupKey:E}}),g){u.info("VoicePlayer: Use the audioFile instance."),D(g);return}var k=(R=o==null?void 0:o[E])===null||R===void 0?void 0:R.audioFile;if(k){u.info("VoicePlayer: Get from the audioStorage."),D(k);return}fetch(S).then(function(P){return P.blob()}).then(function(P){var G=new File([P],kI(T).name,{lastModified:new Date().getTime(),type:kI(T).mimeType});D(G),u.info("VoicePlayer: Get the audioFile from URL.")}).catch(O)}).then(function(D){var O,R=document.getElementById(lp);u.info("VoicePlayer: Succeeded getting audio file.",{audioFile:D});var k=o[E]||hu(),P=new Audio((O=URL==null?void 0:URL.createObjectURL)===null||O===void 0?void 0:O.call(URL,D));P.id=qg,P.currentTime=k.playbackTime,P.volume=1,P.loop=!1,P.onplaying=function(){u.info("VoicePlayer: OnPlaying event is called from audioPlayer",{groupKey:E,audioPlayer:P}),i({type:Z2,payload:{groupKey:E,audioFile:D}})},P.onpause=function(){u.info("VoicePlayer: OnPause event is called from audioPlayer",{groupKey:E,audioPlayer:P}),i({type:J2,payload:{groupKey:E,duration:P.duration,currentTime:P.currentTime}})},P.ontimeupdate=function(){i({type:eR,payload:{groupKey:E}})},P.onerror=function(G){u.error("VoicePlayer: Failed to load the audioFile on the audio player.",G),i({type:ry,payload:{groupKey:E}})},P.dataset.sbGroupId=E;try{R==null||R.childNodes.forEach(function(G){var V,H,F=G,z=(V=F.dataset)===null||V===void 0?void 0:V.sbGroupKey;z!==E&&((H=F==null?void 0:F.pause)===null||H===void 0||H.call(F),R.removeChild(F),u.info("VoicePlayer: Removed other player.",{element:F}))})}finally{P==null||P.play(),R==null||R.appendChild(P),i({type:X2,payload:{groupKey:E,audioPlayer:P}}),u.info("VoicePlayer: Succeeded playing audio player.",{groupKey:E,audioPlayer:P})}}).catch(function(D){u.warning("VoicePlayer: Failed loading audio file with URL.",D),i({type:ry,payload:{groupKey:E}})})};return v.createElement(tR.Provider,{value:{play:p,pause:f,stop:d,voicePlayerStore:r}},v.createElement("div",{id:lp,style:{display:"none"}}),n)},nR=function(){return N.useContext(tR)},PI="sendbird-sort-by-row";function Q8(e){var n=e.className,t=n===void 0?"":n,r=e.maxItemCount,i=e.itemWidth,a=e.itemHeight,s=e.children;if(Array.isArray(s)&&s.length>r){for(var o=[],l=0;l<s.length;l+=r)o.push(v.createElement("div",{className:Ae(Ae([],Array.isArray(t)?t:[t],!0),[PI],!1).join(" "),key:Kr(),style:{width:i*r,height:a}},s.slice(l,l+r)));return v.createElement(v.Fragment,null,o)}return v.createElement("div",{className:Ae(Ae([],Array.isArray(t)?t:[t],!0),[PI],!1).join(" "),style:{width:i*(Array.isArray(s)?s.length:1),height:a}},s)}var pm="sendbird-app__layout",Y8=60,X8=function(e){EA(n,e);function n(t){var r=e.call(this,t)||this;return r.menuRef=v.createRef(),r.setupEvents=function(){var i=r.props.closeDropdown,a=r.menuRef,s=function(o){var l,u;a!=null&&a.current&&!(!((u=(l=a==null?void 0:a.current)===null||l===void 0?void 0:l.contains)===null||u===void 0)&&u.call(l,o.target))&&(i==null||i())};r.setState({handleClickOutside:s}),document.addEventListener("mousedown",s)},r.cleanUpEvents=function(){var i=r.state.handleClickOutside;document.removeEventListener("mousedown",i)},r.getMenuPosition=function(){var i,a,s,o=r.props,l=o.parentRef,u=o.openLeft,d=document.getElementById(pm),f=((i=d==null?void 0:d.getBoundingClientRect)===null||i===void 0?void 0:i.call(d))||{top:0,left:0,width:window.innerWidth,height:window.innerHeight},p=(s=(a=l==null?void 0:l.current)===null||a===void 0?void 0:a.getBoundingClientRect)===null||s===void 0?void 0:s.call(a),m=((p==null?void 0:p.x)||(p==null?void 0:p.left)||0)-f.left,E=((p==null?void 0:p.y)||(p==null?void 0:p.top)||0)-f.top,g={top:E,left:m};if(!r.menuRef.current)return g;var y=r.menuRef.current.getBoundingClientRect();if(E+y.height+Y8>f.height&&(g.top-=y.height),m+y.width>f.width&&!u&&(g.left-=y.width),g.top<0&&(g.top=y.height<f.height?(f.height-y.height)/2:0),g.top+=32,u){var S=Number.isNaN(y.width-30)?108:y.width-30;g.left-=S}return g.left<0&&(g.left=y.width<f.width?(f.width-y.width)/2:0),r.setState({menuStyle:g}),g},r.state={menuStyle:{top:0,left:0},handleClickOutside:function(){}},r}return n.prototype.componentDidMount=function(){this.setupEvents(),this.getMenuPosition()},n.prototype.componentWillUnmount=function(){this.cleanUpEvents()},n.prototype.render=function(){var t=document.getElementById(td);if(!t)return v.createElement(v.Fragment,null);var r=this.state.menuStyle,i=this.props,a=i.children,s=i.style,o=i.className,l=o===void 0?"":o,u=i.testID,d=i.id;return dd.createPortal(v.createElement("div",{className:Zt(cf,l),"data-testid":u,id:d},v.createElement("div",{className:"sendbird-dropdown__menu-backdrop"}),v.createElement("ul",{className:"".concat(l," sendbird-dropdown__menu"),ref:this.menuRef,style:x({display:"inline-block",position:"fixed",left:"".concat(Math.round(r.left),"px"),top:"".concat(Math.round(r.top),"px")},s),"data-testid":"sendbird-dropdown-menu"},a)),t)},n}(v.Component),Z8={x:0,y:0,left:0,top:0,height:0},J8=function(e){var n=e.id,t=e.children,r=e.parentRef,i=e.parentContainRef,a=e.spaceFromTrigger,s=a===void 0?{x:0,y:0}:a,o=e.closeDropdown,l=N.useState({left:0,top:0}),u=l[0],d=l[1],f=N.useRef(null);N.useEffect(function(){return i&&(i!=null&&i.current)&&i.current.classList.add("sendbird-reactions--pressed"),function(){i&&(i!=null&&i.current)&&i.current.classList.remove("sendbird-reactions--pressed")}},[]),N.useEffect(function(){var m=function(E){var g,y;f!=null&&f.current&&!(!((y=(g=f==null?void 0:f.current)===null||g===void 0?void 0:g.contains)===null||y===void 0)&&y.call(g,E.target))&&o()};return document.addEventListener("mousedown",m),function(){document.removeEventListener("mousedown",m)}},[]),N.useEffect(function(){var m,E,g,y,S=(s==null?void 0:s.x)||0,C=(s==null?void 0:s.y)||0,T=document.getElementById(pm),I=((m=T==null?void 0:T.getBoundingClientRect)===null||m===void 0?void 0:m.call(T))||{top:0,left:0,width:window.innerWidth,height:window.innerHeight},L=(g=(E=r==null?void 0:r.current)===null||E===void 0?void 0:E.getBoundingClientRect())!==null&&g!==void 0?g:Z8,D=((L==null?void 0:L.x)||(L==null?void 0:L.left)||0)-I.left,O=((L==null?void 0:L.y)||(L==null?void 0:L.top)||0)-I.top,R={top:O,left:D};if(!(f!=null&&f.current))d(R);else{var k=(y=f==null?void 0:f.current)===null||y===void 0?void 0:y.getBoundingClientRect();R.top<k.height?(R.top+=L.height,R.top+=C):(R.top-=k.height,R.top-=C),R.left-=k.width/2,R.left+=L.height/2-2,R.left+=S;var P=I.width-k.width;P<R.left&&(R.left=P),R.left<0&&(R.left=0),d(R)}},[]);var p=document.getElementById(hf);return p?dd.createPortal(v.createElement("div",{className:cf,id:n},v.createElement("div",{className:"sendbird-dropdown__menu-backdrop"}),v.createElement("ul",{className:"sendbird-dropdown__reaction-bar","data-testid":"sendbird-dropdown__reaction-bar",ref:f,style:{display:"inline-block",position:"fixed",left:"".concat(Math.round(u.left),"px"),top:"".concat(Math.round(u.top),"px")}},v.createElement(Q8,{className:"sendbird-dropdown__reaction-bar__row",maxItemCount:8,itemWidth:44,itemHeight:40},t))),p):null},rR=N.createContext(void 0),sC=function(e){var n=e.children,t=e.value;return v.createElement(rR.Provider,{value:t},n)},$r=function(){var e=N.useContext(rR);if(!e)throw new Error("useMessageMenuContext must be used within a MessageMenuProvider.");return e},yi=function(e){var n=e.className,t=e.disabled,r=e.tabIndex,i=r===void 0?0:r,a=e.testID,s=e.onClick,o=e.children,l=function(u){!t&&s&&s(u)};return v.createElement("li",{className:Zt("sendbird-menu-item",n),role:"menuitem","aria-disabled":t,"data-testid":a,tabIndex:i,onClick:l,onKeyDown:function(u){u.code==="Enter"&&l(u)}},v.createElement(Ie,{className:"sendbird-menu-item__text",type:Ce.SUBTITLE_2,color:t?de.ONBACKGROUND_4:de.ONBACKGROUND_1},o))},ju=function(e){var n=e.className,t=e.disabled,r=t===void 0?!1:t,i=e.tabIndex,a=i===void 0?0:i,s=e.testID,o=e.onClick,l=e.children;return v.createElement("div",{className:Zt("sendbird-message__bottomsheet--action",n),role:"menuitem",tabIndex:a,"aria-disabled":r,onClick:o,"data-testid":s},l)},cf="sendbird-observing-message-menu",df=function(e){return"m_".concat(e)},Di=X8,iR=J8,pi=function(e){var n=e.className,t=n===void 0?"":n,r=e.children,i=e.onClick,a=e.disable,s=a===void 0?!1:a,o=e.dataSbId,l=o===void 0?"":o,u=e.testID;return v.createElement(yi,{className:Zt.apply(void 0,Ae(Ae([],Array.isArray(t)?t:[t],!1),["sendbird-dropdown__menu-item",s?"disable":""],!1)),disabled:s,testID:u??l,onClick:i},r)},td="sendbird-dropdown-portal",eB=function(){return v.createElement("div",{id:td,className:td})},hf="sendbird-emoji-list-portal",tB=function(){return v.createElement("div",{id:hf})};function zi(e){var n=e.menuTrigger,t=e.menuItems,r=e.isOpen,i=e.onClick,a=N.useState(!1),s=a[0],o=a[1];return v.createElement("div",{className:"sendbird-context-menu",onClick:i},n==null?void 0:n(function(){return o(!s)}),(s||r)&&t(function(){return o(!1)}))}var aR={100:"extra-light",200:"light",300:"main",400:"dark",500:"extra-dark","overlay-01":"overlay-dark","overlay-02":"overlay-light","onlight-01":"onlight-text-high-emphasis","onlight-02":"onlight-text-mid-emphasis","onlight-03":"onlight-text-low-emphasis","onlight-04":"onlight-text-disabled","ondark-01":"ondark-text-high-emphasis","ondark-02":"ondark-text-mid-emphasis","ondark-03":"ondark-text-low-emphasis","ondark-04":"ondark-text-disabled"},nB=Object.values(aR).sort(function(e,n){return n.length-e.length}),rB=new Map(Object.entries(aR).map(function(e){var n=e[0],t=e[1];return[t,n]})),iB=function(e){var n={};return Object.entries(e).forEach(function(t){for(var r=t[0],i=t[1],a=r,s=0,o=nB;s<o.length;s++){var l=o[s],u=new RegExp("-".concat(l,"$"));if(u.test(r)){var d=rB.get(l);if(d){a=r.replace(u,"-".concat(d));break}}}n[a]=i}),n},Du="sendbird-modal-root",aB=function(){return v.createElement("div",{id:Du,className:Du})},sB=function(e){var n=e.titleText,t=e.onCloseClick;return v.createElement("div",{className:"sendbird-modal__header"},v.createElement(Ie,{type:Ce.H_1,color:de.ONBACKGROUND_1},n),v.createElement("div",{className:"sendbird-modal__close"},v.createElement(fa,{width:"32px",height:"32px",onClick:t},v.createElement(We,{type:Se.CLOSE,fillColor:Ve.DEFAULT,width:"24px",height:"24px"}))))},oB=function(e){var n=e.children;return v.createElement("div",{className:"sendbird-modal__body"},v.createElement(Ie,{type:Ce.SUBTITLE_1,color:de.ONBACKGROUND_2},n))},nd=function(e){var n=e.submitText,t=e.disabled,r=t===void 0?!1:t,i=e.hideCancelButton,a=i===void 0?!1:i,s=e.type,o=s===void 0?Gn.DANGER:s,l=e.onSubmit,u=e.onCancel,d=N.useContext(wn).stringSet;return v.createElement("div",{className:"sendbird-modal__footer"},!a&&v.createElement(Oi,{type:Gn.SECONDARY,onClick:u},v.createElement(Ie,{type:Ce.BUTTON_1,color:de.ONBACKGROUND_1},d.BUTTON__CANCEL)),v.createElement(Oi,{type:o,disabled:r,onClick:l},n))};function Rr(e){var n,t=e.children,r=t===void 0?null:t,i=e.className,a=i===void 0?"":i,s=e.contentClassName,o=s===void 0?"":s,l=e.isCloseOnClickOutside,u=l===void 0?!1:l,d=e.isFullScreenOnMobile,f=d===void 0?!1:d,p=e.titleText,m=e.submitText,E=e.disabled,g=E===void 0?!1:E,y=e.hideFooter,S=y===void 0?!1:y,C=e.type,T=C===void 0?Gn.DANGER:C,I=e.renderHeader,L=e.onSubmit,D=L===void 0?Cn:L,O=e.onClose,R=e.onCancel,k=e.customFooter,P=(n=O??R)!==null&&n!==void 0?n:Cn,G=Tt().eventHandlers,V=N.useState(function(){return"sbu-modal-".concat(Kr())})[0];N.useEffect(function(){var F,z;return(z=(F=G==null?void 0:G.modal)===null||F===void 0?void 0:F.onMounted)===null||z===void 0?void 0:z.call(F,{close:P,id:V})},[]);var H=_r().isMobile;return dd.createPortal(v.createElement("div",{className:Zt("sendbird-modal",a,f&&H&&"sendbird-modal--full-mobile")},v.createElement("div",{className:Zt.apply(void 0,Ae(["sendbird-modal__content"],Array.isArray(o)?o:[o],!1))},(I==null?void 0:I())||v.createElement(sB,{titleText:p??"",onCloseClick:P}),v.createElement(oB,null,r),!S&&(k??v.createElement(nd,{disabled:g,onCancel:P,onSubmit:D,submitText:m??"",type:T}))),v.createElement("div",{className:Zt("sendbird-modal__backdrop",u&&"sendbird-modal__backdrop--clickoutside"),onClick:function(F){F==null||F.stopPropagation(),u&&P()}})),document.getElementById(Du))}var sR=N.createContext({start:Cn,stop:Cn,isRecordable:!1}),lB=function(e){var n,t=e.children,r=Tt().config,i=r.logger,a=r.groupChannel,s=N.useState(null),o=s[0],l=s[1],u=N.useState(!1),d=u[0],f=u[1],p=N.useState(!1),m=p[0],E=p[1],g=Ft().stringSet,y=a.enableVoiceMessage,S=N.useState(null),C=S[0],T=S[1],I=(n=aN.find(function(O){return MediaRecorder.isTypeSupported(O)}))!==null&&n!==void 0?n:"";y&&!I&&i.error("VoiceRecorder: Browser does not support mimeType",{mimmeTypes:aN}),N.useEffect(function(){y&&!C&&Xv(()=>import("./bundle-Bsy25tNQ-Bs3wKXfG.js"),[]).then(function(O){return T(O)})},[y,C]);var L=N.useCallback(function(O){var R,k;if(y&&!C){i.error("VoiceRecorder: Recording audio processor is being loaded.");return}var P=function(){try{navigator.permissions.query({name:"microphone"}).then(function(G){G.state==="denied"&&(i.warning("VoiceRecorder: Permission denied."),E(!0))})}catch(G){i.warning("VoiceRecorder: Failed to check permission.",G)}};i.info("VoiceRecorder: Start recording."),o&&(D(),i.info("VoiceRecorder: Previous mediaRecorder is stopped.")),P(),(k=(R=navigator==null?void 0:navigator.mediaDevices)===null||R===void 0?void 0:R.getUserMedia)===null||k===void 0||k.call(R,{audio:!0}).then(function(G){var V;i.info("VoiceRecorder: Succeeded getting media stream.",G),f(!0);var H=new MediaRecorder(G,{mimeType:I,audioBitsPerSecond:j5});H.ondataavailable=function(F){i.info("VoiceRecorder: Succeeded getting an available data.",F.data);var z=new File([F.data],Jc,{lastModified:new Date().getTime(),type:Mo});C==null||C.downsampleToWav(z,function(ee){var $,Q=C==null?void 0:C.encodeMp3(ee),ne=new Blob(Q,{type:Mo}),j=new File([ne],Jc,{lastModified:new Date().getTime(),type:Mo});($=O==null?void 0:O.onRecordingEnded)===null||$===void 0||$.call(O,j),i.info("VoiceRecorder: Succeeded converting audio file.",j)});var K=G.getAudioTracks();K.forEach(function(ee){return ee.stop()}),f(!1)},H.onstart=(V=O==null?void 0:O.onRecordingStarted)!==null&&V!==void 0?V:Cn,H==null||H.start(),l(H)}).catch(function(G){i.error("VoiceRecorder: Failed getting media stream.",G),l(null)})},[o,C]),D=N.useCallback(function(){o==null||o.stop(),l(null),f(!1),i.info("VoiceRecorder: Stop recording.")},[o]);return v.createElement(sR.Provider,{value:{start:L,stop:D,isRecordable:d}},t,m&&v.createElement(Rr,{hideFooter:!0,onClose:function(){return E(!1)}},v.createElement(v.Fragment,null,g.VOICE_RECORDING_PERMISSION_DENIED)))},oR=function(){return N.useContext(sR)},lR=N.createContext({openModal:Cn}),uB=function(e){var n=e.children,t=N.useState([]),r=t[0],i=t[1],a=N.useCallback(function(l){i(function(u){return Ae(Ae([],u,!0),[l],!1)})},[]),s=N.useCallback(function(){i(function(l){return l.slice(1)})},[]),o=N.useMemo(function(){return function(){return si(r).when(function(l){return l.length===0},function(){return v.createElement(v.Fragment,null)}).otherwise(function(){var l=r[0],u=l.modalProps,d=l.childElement;return v.createElement(Rr,x({},u,{className:Zt("sendbird-global-modal",u==null?void 0:u.className),onClose:function(){var f;(f=u==null?void 0:u.onClose)===null||f===void 0||f.call(u),s()}}),d({closeModal:s}))})}},[r]);return v.createElement(lR.Provider,{value:{openModal:a}},v.createElement(o,null),n)},oC=function(){return N.useContext(lR)},cB=function(){function e(n){var t=this,r,i=n.sdk,a=n.logger;(r=i==null?void 0:i.getAllEmoji)===null||r===void 0||r.call(i).then(function(s){t._emojiContainer=s,a==null||a.info("EmojiManager | Succeeded getting all emojis. ",s)}).catch(function(){a==null||a.warning("EmojiManager | Failed getting all emojis.")})}return Object.defineProperty(e.prototype,"AllEmojisAsArray",{get:function(){return this._emojiContainer.emojiCategories.flatMap(function(n){return n.emojis})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"AllEmojisAsMap",{get:function(){return this._emojiContainer.emojiCategories.flatMap(function(n){return n.emojis}).reduce(function(n,t){return n.set(t.key,t.url),n},new Map)},enumerable:!1,configurable:!0}),e.prototype.getAllEmojis=function(n){var t=this;return si(n).when(function(r){return["array","arr"].includes(r)},function(){return t.AllEmojisAsArray}).when(function(r){return["map"].includes(r)},function(){return t.AllEmojisAsMap}).otherwise(function(){return t.AllEmojisAsArray})},e.prototype.getEmojiUrl=function(n){var t,r;return(r=(t=this.AllEmojisAsArray.find(function(i){return i.key===n}))===null||t===void 0?void 0:t.url)!==null&&r!==void 0?r:""},Object.defineProperty(e.prototype,"emojiContainer",{get:function(){return this._emojiContainer},enumerable:!1,configurable:!0}),e}(),Ml={INIT_USER:"INIT_USER",RESET_USER:"RESET_USER",UPDATE_USER_INFO:"UPDATE_USER_INFO"};function uR(e,n){var t,r,i=N.useState(typeof window<"u"&&(r=(t=window==null?void 0:window.navigator)===null||t===void 0?void 0:t.onLine)!==null&&r!==void 0?r:!0),a=i[0],s=i[1];return N.useEffect(function(){var o=Kr();try{n.warning("sdk changed",o);var l=new qw({onDisconnected:function(){s(!1),n.warning("onDisconnected",{isOnline:a})},onReconnectStarted:function(){s(!1),n.warning("onReconnectStarted",{isOnline:a})},onReconnectSucceeded:function(){s(!0),n.warning("onReconnectSucceeded",{isOnline:a})},onReconnectFailed:function(){e.reconnect(),n.warning("onReconnectFailed")}});e!=null&&e.addConnectionHandler&&(e.addConnectionHandler(o,l),n.info("Added ConnectionHandler",o))}catch{}return function(){try{e.removeConnectionHandler(o),n.info("Removed ConnectionHandler",o)}catch{}}},[e]),N.useEffect(function(){var o=function(){try{n.warning("Try reconnecting SDK"),e.connectionState!=="OPEN"&&e.reconnect()}catch{}};return window.addEventListener("online",o),function(){window.removeEventListener("online",o)}},[e]),N.useEffect(function(){var o=document.querySelector("body");if(!a&&!(e!=null&&e.isCacheEnabled))try{o==null||o.classList.add("sendbird__offline"),n.info("Added class sendbird__offline to body")}catch{}else try{o==null||o.classList.remove("sendbird__offline"),n.info("Removed class sendbird__offline from body")}catch{}},[a,e==null?void 0:e.isCacheEnabled]),a}var dB=2e3;function cR(e){var n=e.logger,t=e.timeout,r=e.cb,i=[],a=null,s=function(l){var u=i.find(function(f){return f.url===l.url});if(u?n.info("Channel: Mark as read already in queue",{channel:l}):i.push(l),!a){var d=i.shift();d&&r(d),a=setInterval(function(){if(i.length===0&&a){clearInterval(a),a=null;return}var f=i.shift();f&&r(f)},t||dB)}},o=function(){i=[],a&&(clearInterval(a),a=null)};return{push:s,clear:o,getQueue:function(){return i}}}function lC(e,n){n===void 0&&(n=[]),N.useLayoutEffect(function(){return function(){e()}},n)}function dR(e,n){var t=this,r=e.isConnected,i=n.logger,a=N.useMemo(function(){return cR({logger:i,cb:function(s){return Wt(t,void 0,void 0,function(){var o;return Qt(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,s.markAsDelivered()];case 1:return l.sent(),[3,3];case 2:return o=l.sent(),i.warning("Channel: Mark as delivered failed",{channel:s,error:o}),[3,3];case 3:return[2]}})})}})},[]);return N.useEffect(function(){r||a.clear()},[r]),lC(function(){a.clear()}),a}var hR=function(e){var n={};return{__getTopics:function(){return n},subscribe:function(t,r){var i;return(i=n[t])!==null&&i!==void 0||(n[t]=new Set),n[t].add(r),{remove:function(){n[t].delete(r)}}},publish:function(t,r){n[t]&&n[t].forEach(function(i){e!=null&&e.publishSynchronous?i(r!==void 0?r:{}):setTimeout(function(){return i(r!==void 0?r:{})},0)})}}};function Ll(e){return{lowerCase:e.toLowerCase(),upperCase:e.toUpperCase()}}function fR(e){return{lowerCase:e.toLowerCase(),upperCase:e.toUpperCase()}}var hB={"--sendbird-dark-primary-500":"#4d2aa6","--sendbird-dark-primary-400":"#6440C4","--sendbird-dark-primary-300":"#7B53EF","--sendbird-dark-primary-200":"#9E8CF5","--sendbird-dark-primary-100":"#E2DFFF","--sendbird-dark-secondary-500":"#007A7A","--sendbird-dark-secondary-400":"#189A8D","--sendbird-dark-secondary-300":"#2EBA9F","--sendbird-dark-secondary-200":"#6FD6BE","--sendbird-dark-secondary-100":"#AEF2DC","--sendbird-dark-information-100":"#b2d9ff","--sendbird-dark-error-500":"#A30E2D","--sendbird-dark-error-400":"#C11F41","--sendbird-dark-error-300":"#E53157","--sendbird-dark-error-200":"#FF6183","--sendbird-dark-error-100":"#FFABBD","--sendbird-dark-background-700":"#000000","--sendbird-dark-background-600":"#161616","--sendbird-dark-background-500":"#2C2C2C","--sendbird-dark-background-400":"#393939","--sendbird-dark-background-300":"#A8A8A8","--sendbird-dark-background-200":"#D9D9D9","--sendbird-dark-background-100":"#F0F0F0","--sendbird-dark-background-50":"#FFFFFF","--sendbird-dark-overlay":"rgba(0, 0, 0, 0.32)","--sendbird-dark-onlight-01":"rgba(0, 0, 0, 0.88)","--sendbird-dark-onlight-02":"rgba(0, 0, 0, 0.50)","--sendbird-dark-onlight-03":"rgba(0, 0, 0, 0.38)","--sendbird-dark-onlight-04":"rgba(0, 0, 0, 0.12)","--sendbird-dark-ondark-01":"rgba(255, 255, 255, 0.88)","--sendbird-dark-ondark-02":"rgba(255, 255, 255, 0.50)","--sendbird-dark-ondark-03":"rgba(255, 255, 255, 0.38)","--sendbird-dark-ondark-04":"rgba(255, 255, 255, 0.12)","--sendbird-dark-shadow-01":"0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-02":"0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-03":"0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-04":"0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-message-input":"0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)","--sendbird-light-primary-500":"#4d2aa6","--sendbird-light-primary-400":"#6440C4","--sendbird-light-primary-300":"#7B53EF","--sendbird-light-primary-200":"#9E8CF5","--sendbird-light-primary-100":"#E2DFFF","--sendbird-light-secondary-500":"#007A7A","--sendbird-light-secondary-400":"#189A8D","--sendbird-light-secondary-300":"#2EBA9F","--sendbird-light-secondary-200":"#6FD6BE","--sendbird-light-secondary-100":"#AEF2DC","--sendbird-light-information-100":"#b2d9ff","--sendbird-light-error-500":"#A30E2D","--sendbird-light-error-400":"#C11F41","--sendbird-light-error-300":"#E53157","--sendbird-light-error-200":"#FF6183","--sendbird-light-error-100":"#FFABBD","--sendbird-light-background-700":"#000000","--sendbird-light-background-600":"#161616","--sendbird-light-background-500":"#2C2C2C","--sendbird-light-background-400":"#393939","--sendbird-light-background-300":"#A8A8A8","--sendbird-light-background-200":"#D9D9D9","--sendbird-light-background-100":"#F0F0F0","--sendbird-light-background-50":" #FFFFFF","--sendbird-light-overlay":"rgba(0, 0, 0, 0.32)","--sendbird-light-onlight-01":"rgba(0, 0, 0, 0.88)","--sendbird-light-onlight-02":"rgba(0, 0, 0, 0.50)","--sendbird-light-onlight-03":"rgba(0, 0, 0, 0.38)","--sendbird-light-onlight-04":"rgba(0, 0, 0, 0.12)","--sendbird-light-ondark-01":"rgba(255, 255, 255, 0.88)","--sendbird-light-ondark-02":"rgba(255, 255, 255, 0.50)","--sendbird-light-ondark-03":"rgba(255, 255, 255, 0.38)","--sendbird-light-ondark-04":"rgba(255, 255, 255, 0.12)","--sendbird-light-shadow-01":"0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-02":"0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-03":"0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-04":"0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-message-input":"0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)"},fB=function(e){if(e==null)return!0;for(var n in e)if(e.hasOwnProperty(n))return!1;return JSON.stringify(e)===JSON.stringify({})},vB=function(e){N.useLayoutEffect(function(){if(!fB(e)){var n=x(x({},hB),iB(e));To({variables:n})}},[e])},Ks={INIT_SDK:"INIT_SDK",SET_SDK_LOADING:"SET_SDK_LOADING",RESET_SDK:"RESET_SDK",SDK_ERROR:"SDK_ERROR"},vR={initialized:!1,loading:!1,sdk:{},error:!1};function pB(e,n){return si(n).with({type:Ks.SET_SDK_LOADING},function(t){var r=t.payload;return x(x({},e),{initialized:!1,loading:r})}).with({type:Ks.SDK_ERROR},function(){return x(x({},e),{initialized:!1,loading:!1,error:!0})}).with({type:Ks.INIT_SDK},function(t){var r=t.payload;return{sdk:r,initialized:!0,loading:!1,error:!1}}).with({type:Ks.RESET_SDK},function(){return vR}).otherwise(function(){return e})}var pR={initialized:!1,loading:!1,user:{}};function mB(e,n){return si(n).with({type:Ml.INIT_USER},function(t){var r=t.payload;return{initialized:!0,loading:!1,user:r}}).with({type:Ml.RESET_USER},function(){return pR}).with({type:Ml.UPDATE_USER_INFO},function(t){var r=t.payload;return x(x({},e),{user:r})}).otherwise(function(){return e})}var gl={INITIALIZE_MESSAGE_TEMPLATES_INFO:"INITIALIZE_MESSAGE_TEMPLATES_INFO",UPSERT_MESSAGE_TEMPLATES:"UPSERT_MESSAGE_TEMPLATES",UPSERT_WAITING_TEMPLATE_KEYS:"UPSERT_WAITING_TEMPLATE_KEYS",MARK_ERROR_WAITING_TEMPLATE_KEYS:"MARK_ERROR_WAITING_TEMPLATE_KEYS"};function _B(e,n){return si(n).with({type:gl.INITIALIZE_MESSAGE_TEMPLATES_INFO},function(t){var r=t.payload;return{messageTemplatesInfo:r,waitingTemplateKeysMap:{}}}).with({type:gl.UPSERT_MESSAGE_TEMPLATES},function(t){var r=t.payload,i=e.messageTemplatesInfo;if(!i)return e;var a=x({},e.waitingTemplateKeysMap);return r.forEach(function(s){var o=s.key,l=s.template;i.templatesMap[o]=l,delete a[o]}),x(x({},e),{waitingTemplateKeysMap:a,messageTemplatesInfo:i})}).with({type:gl.UPSERT_WAITING_TEMPLATE_KEYS},function(t){var r=t.payload,i=r.keys,a=r.requestedAt,s=x({},e.waitingTemplateKeysMap);return i.forEach(function(o){var l,u;s[o]={erroredMessageIds:(u=(l=s[o])===null||l===void 0?void 0:l.erroredMessageIds)!==null&&u!==void 0?u:[],requestedAt:a}}),x(x({},e),{waitingTemplateKeysMap:s})}).with({type:gl.MARK_ERROR_WAITING_TEMPLATE_KEYS},function(t){var r=t.payload,i=r.keys,a=r.messageId,s=x({},e.waitingTemplateKeysMap);return i.forEach(function(o){var l=s[o];l&&l.erroredMessageIds.indexOf(a)===-1&&l.erroredMessageIds.push(a)}),x(x({},e),{waitingTemplateKeysMap:s})}).otherwise(function(){return e})}var gB={waitingTemplateKeysMap:{}};function mR(e){return Wt(this,arguments,void 0,function(n){var t=n.sdkDispatcher,r=n.userDispatcher,i=n.sdk;return Qt(this,function(a){return[2,new Promise(function(s){t({type:Ks.SET_SDK_LOADING,payload:!0}),i!=null&&i.disconnectWebSocket?i.disconnectWebSocket().then(function(){t({type:Ks.RESET_SDK}),r({type:Ml.RESET_USER})}).finally(function(){s(!0)}):s(!0)})]})})}var X_="3.15.9",EB=Ks.INIT_SDK,yB=Ks.SET_SDK_LOADING,CB=Ks.RESET_SDK,xI=Ks.SDK_ERROR,bB=Ml.INIT_USER,SB=Ml.UPDATE_USER_INFO,TB=Ml.RESET_USER;function NB(e){var n=e.userId,t=e.appId;return"SendbirdProvider | useConnect/setupConnection/Connection failed UserId: ".concat(n," or appId: ").concat(t," missing")}function IB(e){return"SendbirdProvider | useConnect/setupConnection/Connection failed. ".concat((e==null?void 0:e.code)||""," ").concat((e==null?void 0:e.message)||"")}function MB(e){return Wt(this,arguments,void 0,function(n){var t,r=this,i,a,s=n.logger,o=n.sdkDispatcher,l=n.userDispatcher,u=n.initDashboardConfigs,d=n.userId,f=n.appId,p=n.isNewApp,m=n.customApiHost,E=n.customWebSocketHost,g=n.configureSession,y=n.nickname,S=n.profileUrl,C=n.accessToken,T=n.isUserIdUsedForNickname,I=n.sdkInitParams,L=n.customExtensionParams,D=n.isMobile,O=D===void 0?!1:D,R=n.eventHandlers,k=n.initializeMessageTemplatesInfo;return Qt(this,function(P){return(i=s.info)===null||i===void 0||i.call(s,"SendbirdProvider | useConnect/setupConnection/init",{userId:d,appId:f}),o({type:yB,payload:!0}),!d||!f?(t=NB({userId:d,appId:f}),(a=s.error)===null||a===void 0||a.call(s,t),o({type:xI}),[2,Promise.reject(t)]):[2,new Promise(function(G,V){var H;(H=s.info)===null||H===void 0||H.call(s,"SendbirdProvider | useConnect/setupConnection/connect connecting using ".concat(C??d));var F=AB({appId:f,customApiHost:m,customWebSocketHost:E,isNewApp:p,sdkInitParams:I}),z=typeof g=="function"?g(F):void 0;wB(F,{logger:s,sessionHandler:z,customExtensionParams:L,isMobile:O}),F.connect(d,C).then(function($){return K($)}).catch(function($){return Wt(r,void 0,void 0,function(){var Q,ne,j,Z;return Qt(this,function(ie){switch(ie.label){case 0:if(!(OB($)&&z))return[3,6];ie.label=1;case 1:return ie.trys.push([1,5,,6]),[4,new Promise(z.onSessionTokenRequired)];case 2:return Q=ie.sent(),Q?((Z=s.info)===null||Z===void 0||Z.call(s,"SendbirdProvider | useConnect/setupConnection/connect retry connect with valid session token: ".concat(Q.slice(0,10)+"...")),[4,F.connect(d,Q)]):[3,4];case 3:return ne=ie.sent(),[2,K(ne)];case 4:return[3,6];case 5:return j=ie.sent(),j instanceof J?[2,ee(j)]:[3,6];case 6:return[2,ee($)]}})})});var K=function($){return Wt(r,void 0,void 0,function(){var Q,ne,j,Z,ie,fe,te,le,Me,ae,he,pe;return Qt(this,function(Ne){switch(Ne.label){case 0:(ie=s.info)===null||ie===void 0||ie.call(s,"SendbirdProvider | useConnect/setupConnection/onConnected",$),o({type:EB,payload:F}),l({type:bB,payload:$}),Ne.label=1;case 1:return Ne.trys.push([1,3,,4]),[4,k(F)];case 2:return Ne.sent(),[3,4];case 3:return Q=Ne.sent(),(fe=s.error)===null||fe===void 0||fe.call(s,"SendbirdProvider | useConnect/setupConnection/upsertMessageTemplateListInLocalStorage failed",{error:Q}),[3,4];case 4:return Ne.trys.push([4,6,,7]),[4,u(F)];case 5:return Ne.sent(),(te=s.info)===null||te===void 0||te.call(s,"SendbirdProvider | useConnect/setupConnection/getUIKitConfiguration success"),[3,7];case 6:return ne=Ne.sent(),(le=s.error)===null||le===void 0||le.call(s,"SendbirdProvider | useConnect/setupConnection/getUIKitConfiguration failed",{error:ne}),[3,7];case 7:return Ne.trys.push([7,10,,11]),(y!==$.nickname||S!==$.profileUrl)&&!(fN(y)&&fN(S))?((Me=s.info)===null||Me===void 0||Me.call(s,"SendbirdProvider | useConnect/setupConnection/updateCurrentUserInfo",{nickname:y,profileUrl:S}),j={nickname:y||$.nickname||(T?$.userId:""),profileUrl:S||$.profileUrl},[4,F.updateCurrentUserInfo(j)]):[3,9];case 8:Z=Ne.sent(),(ae=s.info)===null||ae===void 0||ae.call(s,"SendbirdProvider | useConnect/setupConnection/updateCurrentUserInfo success",j),l({type:SB,payload:Z}),Ne.label=9;case 9:return[3,11];case 10:return Ne.sent(),[3,11];case 11:return G(),(pe=(he=R==null?void 0:R.connection)===null||he===void 0?void 0:he.onConnected)===null||pe===void 0||pe.call(he,$),[2]}})})},ee=function($){return Wt(r,void 0,void 0,function(){var Q,ne,j,Z,ie;return Qt(this,function(fe){switch(fe.label){case 0:return F.isCacheEnabled&&RB($)?((ne=s.error)===null||ne===void 0||ne.call(s,"SendbirdProvider | useConnect/setupConnection/connect clear cache [".concat($.code,"/").concat($.message,"]")),[4,F.clearCachedData()]):[3,2];case 1:fe.sent(),fe.label=2;case 2:return Q=IB($),(j=s.error)===null||j===void 0||j.call(s,Q,{e:$,appId:f,userId:d}),l({type:TB}),o({type:CB}),o({type:xI}),V(Q),(ie=(Z=R==null?void 0:R.connection)===null||Z===void 0?void 0:Z.onFailed)===null||ie===void 0||ie.call(Z,$),[2]}})})}})]})})}function AB(e){var n=e.appId,t=e.isNewApp,r=t===void 0?!1:t,i=e.customApiHost,a=e.customWebSocketHost,s=e.sdkInitParams,o=s===void 0?{}:s,l=Object.assign({},{appId:n,modules:[new Q6,new V8],newInstance:r,localCacheEnabled:!0},o);return i&&(l.customApiHost=i),a&&(l.customWebSocketHost=a),o5.init(l)}function wB(e,n){var t,r,i=n.logger,a=n.sessionHandler,s=n.isMobile,o=n.customExtensionParams;(t=i.info)===null||t===void 0||t.call(i,"SendbirdProvider | useConnect/setupConnection/setVersion",{version:X_}),e.addExtension("sb_uikit",X_),e.addSendbirdExtensions([{product:yg.UIKIT_CHAT,version:X_,platform:Cu==null?void 0:Cu.JS}],{platform:s?ml.MOBILE_WEB:ml.WEB},o),a&&((r=i.info)===null||r===void 0||r.call(i,"SendbirdProvider | useConnect/setupConnection/configureSession",a),e.setSessionHandler(a))}function RB(e){return e instanceof J?[at.USER_AUTH_DEACTIVATED,at.USER_AUTH_DELETED_OR_NOT_FOUND,at.SESSION_TOKEN_EXPIRED,at.SESSION_REVOKED].includes(e.code):!1}function OB(e){return e instanceof J?[at.SESSION_TOKEN_EXPIRED,at.INVALID_TOKEN].includes(e.code):!1}function FI(e){return Wt(this,arguments,void 0,function(n){var t=n.logger,r=n.sdkDispatcher,i=n.userDispatcher,a=n.appInfoDispatcher,s=n.initDashboardConfigs,o=n.userId,l=n.appId,u=n.isNewApp,d=u===void 0?!1:u,f=n.customApiHost,p=n.customWebSocketHost,m=n.configureSession,E=n.nickname,g=n.profileUrl,y=n.accessToken,S=n.sdk,C=n.sdkInitParams,T=n.customExtensionParams,I=n.isMobile,L=n.eventHandlers,D=n.isUserIdUsedForNickname,O=n.initializeMessageTemplatesInfo;return Qt(this,function(R){switch(R.label){case 0:return[4,mR({logger:t,sdkDispatcher:r,userDispatcher:i,sdk:S})];case 1:return R.sent(),[4,MB({logger:t,sdkDispatcher:r,userDispatcher:i,appInfoDispatcher:a,initDashboardConfigs:s,userId:o,appId:l,isNewApp:d,customApiHost:f,customWebSocketHost:p,configureSession:m,nickname:E,profileUrl:g,accessToken:y,sdkInitParams:C,customExtensionParams:T,isMobile:I,eventHandlers:L,isUserIdUsedForNickname:D,initializeMessageTemplatesInfo:O})];case 2:return R.sent(),[2]}})})}function DB(e,n){var t=this,r=e.userId,i=e.appId,a=e.accessToken,s=e.isMobile,o=e.isUserIdUsedForNickname,l=n.logger,u=n.nickname,d=n.profileUrl,f=n.configureSession,p=n.customApiHost,m=n.customWebSocketHost,E=n.sdk,g=n.sdkDispatcher,y=n.userDispatcher,S=n.appInfoDispatcher,C=n.initDashboardConfigs,T=n.sdkInitParams,I=n.customExtensionParams,L=n.eventHandlers,D=n.initializeMessageTemplatesInfo,O=N.useRef({appId:"",userId:""});N.useEffect(function(){var k;(k=l==null?void 0:l.info)===null||k===void 0||k.call(l,"SendbirdProvider | useConnect/useEffect",{userId:r,appId:i,accessToken:a});var P=O.current.appId!==i;O.current.appId===i&&O.current.userId===r||(O.current={appId:i,userId:r},FI({userId:r,appId:i,isNewApp:P,accessToken:a,logger:l,nickname:u,profileUrl:d,configureSession:f,customApiHost:p,customWebSocketHost:m,sdk:E,sdkDispatcher:g,userDispatcher:y,appInfoDispatcher:S,initDashboardConfigs:C,isUserIdUsedForNickname:o,sdkInitParams:T,customExtensionParams:I,isMobile:s,eventHandlers:L,initializeMessageTemplatesInfo:D}).catch(function(G){var V;(V=l==null?void 0:l.error)===null||V===void 0||V.call(l,"SendbirdProvider | useConnect/useEffect",G)}))},[r,i]);var R=N.useCallback(function(){return Wt(t,void 0,void 0,function(){var k,P,G;return Qt(this,function(V){switch(V.label){case 0:(P=l==null?void 0:l.info)===null||P===void 0||P.call(l,"SendbirdProvider | useConnect/reconnect/useCallback",{sdk:E}),V.label=1;case 1:return V.trys.push([1,3,,4]),[4,FI({userId:r,appId:i,accessToken:a,logger:l,nickname:u,profileUrl:d,configureSession:f,customApiHost:p,customWebSocketHost:m,sdk:E,sdkDispatcher:g,userDispatcher:y,appInfoDispatcher:S,initDashboardConfigs:C,isUserIdUsedForNickname:o,sdkInitParams:T,customExtensionParams:I,isMobile:s,eventHandlers:L,initializeMessageTemplatesInfo:D})];case 2:return V.sent(),[3,4];case 3:return k=V.sent(),(G=l==null?void 0:l.error)===null||G===void 0||G.call(l,"SendbirdProvider | useConnect/reconnect/useCallback",k),[3,4];case 4:return[2]}})})},[E]);return R}var Ta={DEBUG:"debug",WARNING:"warning",ERROR:"error",INFO:"info",ALL:"all"},LB=function(e){switch(e){case Ta.WARNING:return"color: Orange";case Ta.ERROR:return"color: Red";default:return"color: Gray"}},UB=function(e){var n=e.level,t=e.title,r=e.description,i=r===void 0?"":r,a=e.payload,s=a===void 0?[]:a;console.log.apply(console,Ae(["%c SendbirdUIKit | ".concat(n," | ").concat(new Date().toISOString()," | ").concat(t," ").concat(i&&"|"),LB(n),i],s,!1))},kB=function(){return{info:Cn,error:Cn,warning:Cn}},HI=function(e,n){var t=UB,r=Array.isArray(e)?e:[e],i=function(a){return function(s,o){for(var l=[],u=2;u<arguments.length;u++)l[u-2]=arguments[u];return t({level:a,title:s,description:o,payload:l})}};return r.reduce(function(a,s){return s===Ta.DEBUG||s===Ta.ALL?x(x({},a),{info:i(Ta.INFO),error:i(Ta.ERROR),warning:i(Ta.WARNING)}):s===Ta.INFO?x(x({},a),{info:i(Ta.INFO)}):s===Ta.ERROR?x(x({},a),{error:i(Ta.ERROR)}):s===Ta.WARNING?x(x({},a),{warning:i(Ta.WARNING)}):x({},a)},kB())},PB=function(e){var n=e.children;return v.createElement(W8,null,v.createElement(lB,null,n))};function xB(e){var n,t,r,i,a,s,o,l,u,d,f,p,m,E,g,y,S,C,T,I,L,D,O,R,k,P,G,V,H,F,z,K,ee=e.legacyConfig,$=e.uikitOptions,Q=$===void 0?{}:$,ne=ee.replyType,j=ee.isMentionEnabled,Z=ee.isReactionEnabled,ie=ee.disableUserProfile,fe=ee.isVoiceMessageEnabled,te=ee.isTypingIndicatorEnabledOnChannelList,le=ee.isMessageReceiptStatusEnabledOnChannelList,Me=ee.showSearchIcon;return{common:{enableUsingDefaultUserProfile:(t=(n=Q.common)===null||n===void 0?void 0:n.enableUsingDefaultUserProfile)!==null&&t!==void 0?t:typeof ie=="boolean"?!ie:void 0},groupChannel:{enableOgtag:(r=Q.groupChannel)===null||r===void 0?void 0:r.enableOgtag,enableMention:(a=(i=Q.groupChannel)===null||i===void 0?void 0:i.enableMention)!==null&&a!==void 0?a:j,enableReactions:(o=(s=Q.groupChannel)===null||s===void 0?void 0:s.enableReactions)!==null&&o!==void 0?o:Z,enableReactionsSupergroup:(l=Q.groupChannel)===null||l===void 0?void 0:l.enableReactionsSupergroup,enableTypingIndicator:(u=Q.groupChannel)===null||u===void 0?void 0:u.enableTypingIndicator,enableVoiceMessage:(f=(d=Q.groupChannel)===null||d===void 0?void 0:d.enableVoiceMessage)!==null&&f!==void 0?f:fe,replyType:(m=(p=Q.groupChannel)===null||p===void 0?void 0:p.replyType)!==null&&m!==void 0?m:ne!=null?Ll(ne).lowerCase:void 0,threadReplySelectType:(E=Q.groupChannel)===null||E===void 0?void 0:E.threadReplySelectType,input:{enableDocument:(y=(g=Q.groupChannel)===null||g===void 0?void 0:g.input)===null||y===void 0?void 0:y.enableDocument},typingIndicatorTypes:(S=Q.groupChannel)===null||S===void 0?void 0:S.typingIndicatorTypes,enableFeedback:(C=Q.groupChannel)===null||C===void 0?void 0:C.enableFeedback,enableSuggestedReplies:(T=Q.groupChannel)===null||T===void 0?void 0:T.enableSuggestedReplies,showSuggestedRepliesFor:(I=Q.groupChannel)===null||I===void 0?void 0:I.showSuggestedRepliesFor,suggestedRepliesDirection:(L=Q.groupChannel)===null||L===void 0?void 0:L.suggestedRepliesDirection,enableMarkdownForUserMessage:(D=Q.groupChannel)===null||D===void 0?void 0:D.enableMarkdownForUserMessage,enableFormTypeMessage:(O=Q.groupChannel)===null||O===void 0?void 0:O.enableFormTypeMessage},groupChannelList:{enableTypingIndicator:(k=(R=Q.groupChannelList)===null||R===void 0?void 0:R.enableTypingIndicator)!==null&&k!==void 0?k:te,enableMessageReceiptStatus:(G=(P=Q.groupChannelList)===null||P===void 0?void 0:P.enableMessageReceiptStatus)!==null&&G!==void 0?G:le},groupChannelSettings:{enableMessageSearch:(H=(V=Q.groupChannelSettings)===null||V===void 0?void 0:V.enableMessageSearch)!==null&&H!==void 0?H:Me},openChannel:{enableOgtag:(F=Q.openChannel)===null||F===void 0?void 0:F.enableOgtag,input:{enableDocument:(K=(z=Q.openChannel)===null||z===void 0?void 0:z.input)===null||K===void 0?void 0:K.enableDocument}}}}function FB(e,n){var t=e.isConnected,r=n.logger,i=N.useMemo(function(){return cR({logger:r,cb:function(a){try{a.markAsRead()}catch(s){r.warning("Channel: Mark as delivered failed",{channel:a,error:s})}}})},[]);return N.useEffect(function(){t||i.clear()},[t]),lC(function(){i.clear()}),i}var HB={getItem:function(e){return Wt(this,void 0,void 0,function(){var n;return Qt(this,function(t){return[2,(n=localStorage.getItem(e))!==null&&n!==void 0?n:null]})})},setItem:function(e,n){return Wt(this,void 0,void 0,function(){return Qt(this,function(t){return[2,localStorage.setItem(e,n)]})})}},_R=function(e){return{version:Number(e.ui_template.version),uiTemplate:JSON.stringify(e.ui_template.body.items),colorVariables:e.color_variables}},BI=function(e){var n={};return e.forEach(function(t){n[t.key]=_R(t)}),n},BB=20,GI=gl.INITIALIZE_MESSAGE_TEMPLATES_INFO,GB=gl.UPSERT_MESSAGE_TEMPLATES,VB=gl.UPSERT_WAITING_TEMPLATE_KEYS,zB=gl.MARK_ERROR_WAITING_TEMPLATE_KEYS;function jB(e){var n=this,t=e.sdk,r=e.logger,i=e.appInfoStore,a=e.appInfoDispatcher,s=i==null?void 0:i.messageTemplatesInfo,o=function(f){var p,m;if(!s)return null;var E=null,g=(p=s==null?void 0:s.templatesMap)!==null&&p!==void 0?p:null;return g&&(E=(m=g[f])!==null&&m!==void 0?m:null),E},l=function(f){return Wt(n,void 0,void 0,function(){var p,m,E,g;return Qt(this,function(y){switch(y.label){case 0:p=!0,m=null,E=[],y.label=1;case 1:return p?[4,f.message.getMessageTemplatesByToken(m,{limit:BB})]:[3,3];case 2:return g=y.sent(),p=g.hasMore,m=g.token,g.templates.forEach(function(S){E.push(JSON.parse(S.template))}),[3,1];case 3:return[2,E]}})})},u=function(f){return Wt(n,void 0,void 0,function(){var p,m,E,g,y,g,y,S;return Qt(this,function(C){switch(C.label){case 0:return p=(S=f.appInfo)===null||S===void 0?void 0:S.messageTemplateInfo.token,p?(m=localStorage.getItem(j_),E=localStorage.getItem(Mc),!m||m!==p?[4,l(f)]:[3,2]):(localStorage.removeItem(j_),localStorage.removeItem(Mc),[2]);case 1:return g=C.sent(),y={token:p,templatesMap:BI(g)},a({type:GI,payload:y}),localStorage.setItem(j_,p),localStorage.setItem(Mc,JSON.stringify(g)),[3,3];case 2:m&&m===p&&E&&(g=JSON.parse(E),y={token:p,templatesMap:BI(g)},a({type:GI,payload:y})),C.label=3;case 3:return[2]}})})},d=function(f,p,m){return Wt(n,void 0,void 0,function(){var E,g,y,S,C,T,I,L,D;return Qt(this,function(O){switch(O.label){case 0:if(!a)return[3,7];a({type:VB,payload:{keys:f,requestedAt:m}}),E=[],O.label=1;case 1:O.trys.push([1,5,,6]),g=!0,y=null,O.label=2;case 2:return g?[4,t.message.getMessageTemplatesByToken(y,{keys:f})]:[3,4];case 3:return S=O.sent(),S.templates.forEach(function(R){E.push(JSON.parse(R.template))}),g=S.hasMore,y=S.token,[3,2];case 4:return[3,6];case 5:return C=O.sent(),(D=r==null?void 0:r.error)===null||D===void 0||D.call(r,"Sendbird | fetchProcessedMessageTemplates failed",C,f),[3,6];case 6:E.length>0?(T=localStorage.getItem(Mc),T?(I=JSON.parse(T),L=I.map(function(R){return R.key}),E.forEach(function(R){L.includes(R.key)||I.push(R)}),localStorage.setItem(Mc,JSON.stringify(I))):localStorage.setItem(Mc,JSON.stringify([E])),a({type:GB,payload:E.map(function(R){return{key:R.key,template:_R(R)}})})):a({type:zB,payload:{keys:f,messageId:p}}),O.label=7;case 7:return[2]}})})};return{getCachedTemplate:o,updateMessageTemplatesInfo:d,initializeMessageTemplatesInfo:u}}var qB=function(e){N.useEffect(function(){var n=document.getElementById(lp);n.parentElement.dir=e},[e])};function KB(e){var n=xB({legacyConfig:{replyType:e.replyType,isMentionEnabled:e.isMentionEnabled,isReactionEnabled:e.isReactionEnabled,disableUserProfile:e.disableUserProfile,isVoiceMessageEnabled:e.isVoiceMessageEnabled,isTypingIndicatorEnabledOnChannelList:e.isTypingIndicatorEnabledOnChannelList,isMessageReceiptStatusEnabledOnChannelList:e.isMessageReceiptStatusEnabledOnChannelList,showSearchIcon:e.showSearchIcon},uikitOptions:e.uikitOptions});return v.createElement(x5,{storage:HB,localConfigs:{common:n==null?void 0:n.common,groupChannel:{channel:n==null?void 0:n.groupChannel,channelList:n==null?void 0:n.groupChannelList,setting:n==null?void 0:n.groupChannelSettings},openChannel:{channel:n==null?void 0:n.openChannel}}},v.createElement($B,x({},e)))}var $B=function(e){var n,t,r,i=e.appId,a=e.userId,s=e.children,o=e.accessToken,l=e.customApiHost,u=e.customWebSocketHost,d=e.configureSession,f=e.theme,p=f===void 0?"light":f,m=e.config,E=m===void 0?{}:m,g=e.nickname,y=g===void 0?"":g,S=e.colorSet,C=e.stringSet,T=e.dateLocale,I=e.profileUrl,L=I===void 0?"":I,D=e.voiceRecord,O=e.userListQuery,R=e.imageCompression,k=R===void 0?{}:R,P=e.allowProfileEdit,G=P===void 0?!1:P,V=e.disableMarkAsDelivered,H=V===void 0?!1:V,F=e.renderUserProfile,z=e.onUserProfileMessage,K=e.onStartDirectMessage,ee=e.breakpoint,$=ee===void 0?!1:ee,Q=e.isUserIdUsedForNickname,ne=Q===void 0?!0:Q,j=e.sdkInitParams,Z=e.customExtensionParams,ie=e.isMultipleFilesMessageEnabled,fe=ie===void 0?!1:ie,te=e.eventHandlers,le=e.htmlTextDirection,Me=le===void 0?"ltr":le,ae=e.forceLeftToRightMessageLayout,he=ae===void 0?!1:ae,pe=K??z,Ne=E.logLevel,_e=Ne===void 0?"":Ne,ge=E.userMention,me=ge===void 0?{}:ge,Le=E.isREMUnitEnabled,Qe=Le===void 0?!1:Le,Pe=E.pubSub,Ge=_r().isMobile,De=N.useState(HI(_e)),tt=De[0],Ue=De[1],Ye=N.useState(function(){return Pe??hR()})[0],yt=N.useReducer(pB,vR),Nt=yt[0],Rt=yt[1],st=N.useReducer(mB,pR),Be=st[0],nt=st[1],qe=N.useReducer(_B,gB),rn=qe[0],it=qe[1],Ct=F5(),Je=Ct.configs,pt=Ct.configsWithAppAttr,Ut=Ct.initDashboardConfigs,Pt=Nt.initialized,Ht=Nt==null?void 0:Nt.sdk,bt=(n=Ht==null?void 0:Ht.appInfo)!==null&&n!==void 0?n:{},qt=bt.uploadSizeLimit,Lt=bt.multipleFilesMessageFileCountLimit;vB(S);var wt=jB({sdk:Ht,logger:tt,appInfoStore:rn,appInfoDispatcher:it}),Et=wt.getCachedTemplate,xe=wt.updateMessageTemplatesInfo,ye=wt.initializeMessageTemplatesInfo,Ze={updateMessageTemplatesInfo:xe,getCachedTemplate:Et},St=DB({appId:i,userId:a,accessToken:o,isUserIdUsedForNickname:ne,isMobile:Ge},{logger:tt,nickname:y,profileUrl:L,configureSession:d,customApiHost:l,customWebSocketHost:u,sdkInitParams:j,customExtensionParams:Z,sdk:Ht,sdkDispatcher:Rt,userDispatcher:nt,appInfoDispatcher:it,initDashboardConfigs:Ut,eventHandlers:te,initializeMessageTemplatesInfo:ye});lC(function(){typeof Ht.disconnect=="function"&&mR({logger:tt,sdkDispatcher:Rt,userDispatcher:nt,sdk:Ht})},[Ht.disconnectWebSocket]),N.useEffect(function(){Ue(HI(_e))},[_e]);var Ot=N.useState(p),an=Ot[0],xt=Ot[1];N.useEffect(function(){xt(p)},[p]),N.useEffect(function(){var Ke=document.querySelector("body");Ke==null||Ke.classList.remove("sendbird-experimental__rem__units"),Qe&&(Ke==null||Ke.classList.add("sendbird-experimental__rem__units"))},[Qe]),N.useEffect(function(){tt.info("Setup theme","Theme: ".concat(an));try{var Ke=document.querySelector("body");Ke==null||Ke.classList.remove("sendbird-theme--light"),Ke==null||Ke.classList.remove("sendbird-theme--dark"),Ke==null||Ke.classList.add("sendbird-theme--".concat(an||"light")),tt.info("Finish setup theme")}catch(ht){tt.warning("Setup theme failed","".concat(ht))}return function(){try{var ht=document.querySelector("body");ht==null||ht.classList.remove("sendbird-theme--light"),ht==null||ht.classList.remove("sendbird-theme--dark")}catch{}}},[an]),qB(Me);var dt=uR(Nt.sdk,tt),Jt=FB({isConnected:dt},{logger:tt}),ln=dR({isConnected:dt},{logger:tt}),Bt=v.useMemo(function(){return x(x({},iC("en")),C)},[C]),En=N.useMemo(function(){return Math.min($5,Lt??Number.MAX_SAFE_INTEGER)},[Lt]),Mn=N.useMemo(function(){return new cB({sdk:Ht,logger:tt})},[Nt.initialized]);return v.createElement(b2.Provider,{value:{stores:{sdkStore:Nt,userStore:Be,appInfoStore:rn},dispatchers:{sdkDispatcher:Rt,userDispatcher:nt,appInfoDispatcher:it,reconnect:St},config:{disableMarkAsDelivered:H,renderUserProfile:F,onStartDirectMessage:pe,onUserProfileMessage:pe,allowProfileEdit:G,isOnline:dt,userId:a,appId:i,accessToken:o,theme:an,setCurrentTheme:xt,setCurrenttheme:xt,isMultipleFilesMessageEnabled:fe,uikitUploadSizeLimit:qt??W5,uikitMultipleFilesMessageLimit:En,userListQuery:O,logger:tt,pubSub:Ye,imageCompression:x({compressionRate:.7,outputFormat:"preserve"},k),voiceRecord:{maxRecordingTime:(t=D==null?void 0:D.maxRecordingTime)!==null&&t!==void 0?t:z5,minRecordingTime:(r=D==null?void 0:D.minRecordingTime)!==null&&r!==void 0?r:N2},userMention:{maxMentionCount:(me==null?void 0:me.maxMentionCount)||10,maxSuggestionCount:(me==null?void 0:me.maxSuggestionCount)||15},markAsReadScheduler:Jt,markAsDeliveredScheduler:ln,common:Je.common,groupChannel:{enableOgtag:Pt&&pt(Ht).groupChannel.channel.enableOgtag,enableTypingIndicator:Je.groupChannel.channel.enableTypingIndicator,enableReactions:Pt&&pt(Ht).groupChannel.channel.enableReactions,enableMention:Je.groupChannel.channel.enableMention,replyType:Je.groupChannel.channel.replyType,threadReplySelectType:Je.groupChannel.channel.threadReplySelectType,enableVoiceMessage:Je.groupChannel.channel.enableVoiceMessage,enableDocument:Je.groupChannel.channel.input.enableDocument,typingIndicatorTypes:Je.groupChannel.channel.typingIndicatorTypes,enableFeedback:Je.groupChannel.channel.enableFeedback,enableSuggestedReplies:Je.groupChannel.channel.enableSuggestedReplies,showSuggestedRepliesFor:Je.groupChannel.channel.showSuggestedRepliesFor,suggestedRepliesDirection:Je.groupChannel.channel.suggestedRepliesDirection,enableMarkdownForUserMessage:Je.groupChannel.channel.enableMarkdownForUserMessage,enableFormTypeMessage:Je.groupChannel.channel.enableFormTypeMessage,enableReactionsSupergroup:Pt&&pt(Ht).groupChannel.channel.enableReactionsSupergroup},groupChannelList:{enableTypingIndicator:Je.groupChannel.channelList.enableTypingIndicator,enableMessageReceiptStatus:Je.groupChannel.channelList.enableMessageReceiptStatus},groupChannelSettings:{enableMessageSearch:Pt&&pt(Ht).groupChannel.setting.enableMessageSearch},openChannel:{enableOgtag:Pt&&pt(Ht).openChannel.channel.enableOgtag,enableDocument:Je.openChannel.channel.input.enableDocument},disableUserProfile:!Je.common.enableUsingDefaultUserProfile,isReactionEnabled:Pt&&pt(Ht).groupChannel.channel.enableReactions,isMentionEnabled:Je.groupChannel.channel.enableMention,isVoiceMessageEnabled:Je.groupChannel.channel.enableVoiceMessage,replyType:Ll(Je.groupChannel.channel.replyType).upperCase,isTypingIndicatorEnabledOnChannelList:Je.groupChannel.channelList.enableTypingIndicator,isMessageReceiptStatusEnabledOnChannelList:Je.groupChannel.channelList.enableMessageReceiptStatus,showSearchIcon:Pt&&pt(Ht).groupChannel.setting.enableMessageSearch,htmlTextDirection:Me,forceLeftToRightMessageLayout:he},eventHandlers:te,emojiManager:Mn,utils:Ze}},v.createElement(aH,{logger:tt,breakpoint:$},v.createElement(rH,{stringSet:Bt,dateLocale:T},v.createElement(PB,null,v.createElement(uB,null,s)))),v.createElement(tB,null),v.createElement(aB,null),v.createElement(eB,null))},gR=v.createContext({disableUserProfile:!0,isOpenChannel:!1}),Ul=function(){return N.useContext(gR)},hd=function(e){var n,t=e.isOpenChannel,r=t===void 0?!1:t,i=e.disableUserProfile,a=i===void 0?!1:i,s=e.renderUserProfile,o=e.onUserProfileMessage,l=e.onStartDirectMessage,u=e.children,d=Tt().config,f=(n=l??o)!==null&&n!==void 0?n:d.onStartDirectMessage;return v.createElement(gR.Provider,{value:{isOpenChannel:r,disableUserProfile:a??!d.common.enableUsingDefaultUserProfile,renderUserProfile:s??d.renderUserProfile,onStartDirectMessage:f,onUserProfileMessage:f}},u)},nh="useToggleReactionCallback:";function ER(e,n){return N.useCallback(function(t,r,i){if(!e){n==null||n.warning("".concat(nh," currentChannel doesn't exist"),e);return}i?e.deleteReaction(t,r).then(function(a){n==null||n.info("".concat(nh," Delete reaction success"),a)}).catch(function(a){n==null||n.warning("".concat(nh," Delete reaction failed"),a)}):e.addReaction(t,r).then(function(a){n==null||n.info("".concat(nh," Add reaction success"),a)}).catch(function(a){n==null||n.warning("".concat(nh," Add reaction failed"),a)})},[e])}var yR=10,CR=15,Gh="@",WB=1,$a;(function(e){e.PARENT="PARENT",e.THREAD="THREAD"})($a||($a={}));function QB(e){return"sendingStatus"in e?e.sendingStatus==="succeeded"?String(e.messageId):e.reqId:String(e.messageId)}function YB(){var e,n;return((e=document.getElementById("sendbird-dropdown-portal"))===null||e===void 0?void 0:e.childElementCount)===0&&((n=document.getElementById("sendbird-emoji-list-portal"))===null||n===void 0?void 0:n.childElementCount)===0}function VI(e){var n,t=(n=document.querySelectorAll('[data-sb-created-at="'.concat(e,'"]')))===null||n===void 0?void 0:n[0];return t instanceof HTMLElement?t.offsetTop:null}var Jh=function(e){return e?e.isFrozen&&e.myRole!=="operator":!1},rd=function(e){return e?e.myMutedState==="muted":!1},zI=function(e,n){var t,r,i,a;return n&&Array.isArray((r=(t=e==null?void 0:e.lastMessage)===null||t===void 0?void 0:t.extendedMessagePayload)===null||r===void 0?void 0:r.suggested_replies)&&!!(!((a=(i=e==null?void 0:e.lastMessage)===null||i===void 0?void 0:i.extendedMessagePayload)===null||a===void 0)&&a.disable_chat_input)},bR=function(e){return e<=WB},jI=function(e,n){return n&&e.some(function(t){var r;return!!t.messageForm&&!t.messageForm.isSubmitted&&!!(!((r=t.extendedMessagePayload)===null||r===void 0)&&r.disable_chat_input)&&bR(t.messageForm.version)})},ai;(function(e){e.CHANNEL="CHANNEL",e.THREAD="THREAD"})(ai||(ai={}));var SR=function(e,n){return!n||n.length===0?!0:n.includes(e)};function fp(e){return SR(ai.CHANNEL,e)}function Eh(e){return SR(ai.THREAD,e)}var ei;(function(e){e.USER_UPDATED="USER_UPDATED",e.SEND_MESSAGE_START="SEND_MESSAGE_START",e.SEND_MESSAGE_FAILED="SEND_MESSAGE_FAILED",e.SEND_USER_MESSAGE="SEND_USER_MESSAGE",e.SEND_FILE_MESSAGE="SEND_FILE_MESSAGE",e.ON_FILE_INFO_UPLOADED="ON_FILE_INFO_UPLOADED",e.UPDATE_USER_MESSAGE="UPDATE_USER_MESSAGE",e.DELETE_MESSAGE="DELETE_MESSAGE",e.LEAVE_CHANNEL="LEAVE_CHANNEL",e.CREATE_CHANNEL="CREATE_CHANNEL",e.UPDATE_OPEN_CHANNEL="UPDATE_OPEN_CHANNEL"})(ei||(ei={}));var Fn=ei;function ff(e){var n=e.channel,t=e.config,r=e.moduleLevel;return!n||n.isBroadcast||n.isEphemeral?!1:n.isSuper?r??t.groupChannel.enableReactionsSupergroup:r??t.groupChannel.enableReactions}function XB(e,n){n===void 0&&(n=[]);var t=N.useRef(null),r=N.useRef(0),i=N.useRef(0),a=N.useState(function(){return hR({publishSynchronous:!0})})[0],s=N.useState(!0),o=s[0],l=s[1];return N.useLayoutEffect(function(){r.current=0,i.current=0,l(!0),t.current&&(t.current.scrollTop=t.current.scrollHeight)},n),N.useLayoutEffect(function(){var u=[];return u.push(a.subscribe("scrollToBottom",function(d){var f=d.resolve,p=d.animated;qI(function(){if(!t.current){f&&f();return}t.current.scroll?t.current.scroll({top:t.current.scrollHeight,behavior:KI(e,p)}):t.current.scrollTop=t.current.scrollHeight,i.current=0,l(!0),f&&f()})})),u.push(a.subscribe("scroll",function(d){var f=d.top,p=d.animated,m=d.lazy,E=d.resolve;qI(function(){if(t.current){var g=t.current,y=g.scrollTop,S=g.scrollHeight,C=g.clientHeight;t.current.scroll?t.current.scroll({top:f,behavior:KI(e,p)}):typeof f=="number"&&(t.current.scrollTop=f),i.current=Math.max(0,S-y-C),l(i.current===0),E&&E()}},m)})),function(){u.forEach(function(d){var f=d.remove;return f()})}},[e]),{scrollRef:t,scrollPubSub:a,isScrollBottomReached:o,setIsScrollBottomReached:l,scrollDistanceFromBottomRef:i,scrollPositionRef:r}}function qI(e,n){n===void 0&&(n=!0),n?setTimeout(function(){e()}):e()}function KI(e,n){return typeof n=="boolean"?n?"smooth":"auto":e}var rh=function(e){return e};function ZB(e){var n=this,t=e.onBeforeSendUserMessage,r=t===void 0?rh:t,i=e.onBeforeSendFileMessage,a=i===void 0?rh:i,s=e.onBeforeUpdateUserMessage,o=s===void 0?rh:s,l=e.onBeforeSendVoiceMessage,u=l===void 0?rh:l,d=e.onBeforeSendMultipleFilesMessage,f=d===void 0?rh:d,p=e.sendFileMessage,m=e.sendMultipleFilesMessage,E=e.sendUserMessage,g=e.updateUserMessage,y=e.scrollToBottom,S=e.quoteMessage,C=e.replyType,T=Tt().eventHandlers,I=N.useCallback(function(O){var R=x({},O);return e.quoteMessage&&C!=="NONE"&&(R.isReplyToChannel=!0,R.parentMessageId=S==null?void 0:S.messageId),R},[C,S]),L=N.useCallback(function(){setTimeout(y,0)},[]),D=N.useCallback(function(O,R,k){return Wt(n,void 0,void 0,function(){var P,G;return Qt(this,function(V){switch(V.label){case 0:return V.trys.push([0,2,,3]),[4,O(R)];case 1:return P=V.sent(),[2,P===void 0?R:P];case 2:throw G=V.sent(),typeof(T==null?void 0:T.message)=="object"&&si(k).with("file","voice",function(){var H,F,z,K;R.file&&((F=(H=T.message).onFileUploadFailed)===null||F===void 0||F.call(H,G)),(K=(z=T.message).onSendMessageFailed)===null||K===void 0||K.call(z,R,G)}).with("multipleFiles",function(){var H,F,z,K;R.fileInfoList&&((F=(H=T.message).onFileUploadFailed)===null||F===void 0||F.call(H,G)),(K=(z=T.message).onSendMessageFailed)===null||K===void 0||K.call(z,R,G)}).with("user",function(){var H,F;(F=(H=T.message).onSendMessageFailed)===null||F===void 0||F.call(H,R,G)}).with("update",function(){var H,F;(F=(H=T.message).onUpdateMessageFailed)===null||F===void 0||F.call(H,R,G)}).exhaustive(),G;case 3:return[2]}})})},[T]);return{sendUserMessage:N.useCallback(function(O){return Wt(n,void 0,void 0,function(){var R,k;return Qt(this,function(P){switch(P.label){case 0:return R=I(O),[4,D(r,R,"user")];case 1:return k=P.sent(),[2,E(k,L)]}})})},[I,E,y,D]),sendFileMessage:N.useCallback(function(O){return Wt(n,void 0,void 0,function(){var R,k;return Qt(this,function(P){switch(P.label){case 0:return R=I(O),[4,D(a,R,"file")];case 1:return k=P.sent(),[2,p(k,L)]}})})},[I,p,y,D]),sendMultipleFilesMessage:N.useCallback(function(O){return Wt(n,void 0,void 0,function(){var R,k;return Qt(this,function(P){switch(P.label){case 0:return R=I(O),[4,D(f,R,"multipleFiles")];case 1:return k=P.sent(),[2,m(k,L)]}})})},[I,m,y,D]),sendVoiceMessage:N.useCallback(function(O,R){return Wt(n,void 0,void 0,function(){var k,P;return Qt(this,function(G){switch(G.label){case 0:return k=I(x(x({},O),{fileName:Jc,mimeType:Mo,metaArrays:[new qr({key:Wy,value:["".concat(R)]}),new qr({key:Qy,value:[Yy]})]})),[4,D(u,k,"voice")];case 1:return P=G.sent(),[2,p(P,L)]}})})},[I,p,y,D]),updateUserMessage:N.useCallback(function(O,R){return Wt(n,void 0,void 0,function(){var k,P;return Qt(this,function(G){switch(G.label){case 0:return k=I(R),[4,D(o,k,"update")];case 1:return P=G.sent(),[2,g(O,P)]}})})},[I,g,D])}}var TR=v.createContext(null),JB=function(e){var n=e.channelUrl,t=e.children,r=e.isReactionEnabled,i=e.replyType,a=e.threadReplySelectType,s=e.isMessageGroupingEnabled,o=s===void 0?!0:s,l=e.isMultipleFilesMessageEnabled,u=e.showSearchIcon,d=e.disableMarkAsRead,f=d===void 0?!1:d,p=e.scrollBehavior,m=p===void 0?"auto":p,E=e.startingPoint,g=e.animatedMessageId,y=e.messageListQueryParams,S=e.onBeforeSendUserMessage,C=e.onBeforeSendFileMessage,T=e.onBeforeSendVoiceMessage,I=e.onBeforeSendMultipleFilesMessage,L=e.onBeforeUpdateUserMessage,D=e.onBeforeDownloadFileMessage,O=e.onMessageAnimated,R=e.onBackClick,k=e.onChatHeaderActionClick,P=e.onReplyInThreadClick,G=e.onSearchClick,V=e.onQuoteMessageClick,H=e.renderUserMentionItem,F=e.filterEmojiCategoryIds,z=Tt(),K=z.config,ee=z.stores,$=ee.sdkStore,Q=K.markAsReadScheduler,ne=K.logger,j=N.useState(null),Z=j[0],ie=j[1],fe=N.useState(null),te=fe[0],le=fe[1],Me=N.useState(null),ae=Me[0],he=Me[1],pe=N.useState(null),Ne=pe[0],_e=pe[1],ge=XB(m,[ae==null?void 0:ae.url]),me=ge.scrollRef,Le=ge.scrollPubSub,Qe=ge.scrollDistanceFromBottomRef,Pe=ge.isScrollBottomReached,Ge=ge.setIsScrollBottomReached,De=ge.scrollPositionRef,tt=N.useRef(null),Ue=ER(ae,ne),Ye=Ll(i??K.groupChannel.replyType).upperCase,yt=fR(a??K.groupChannel.threadReplySelectType).upperCase,Nt=g2(function(){return Ye==="NONE"?Ar.NONE:Ar.ONLY_REPLY_TO_CHANNEL}),Rt=ff({channel:ae,config:K,moduleLevel:r}),st=N.useMemo(function(){var it;return new Map(((it=ae==null?void 0:ae.members)!==null&&it!==void 0?it:[]).map(function(Ct){var Je=Ct.userId,pt=Ct.nickname;return[Je,pt]}))},[ae==null?void 0:ae.members]),Be=y5($.sdk,ae,{startingPoint:E,replyType:Nt,collectionCreator:eG(ae,y),shouldCountNewMessages:function(){return!Pe},markAsRead:function(it){Pe&&!f&&it.forEach(function(Ct){return Q.push(Ct)})},onMessagesReceived:function(){Pe&&YB()&&setTimeout(function(){Le.publish("scrollToBottom",{})},10)},onChannelDeleted:function(){he(null),_e(null),R==null||R()},onCurrentUserBanned:function(){he(null),_e(null),R==null||R()},onChannelUpdated:function(it){return he(it)},logger:ne});h2(function(){return Wt(void 0,void 0,void 0,function(){var it,Ct,Je;return Qt(this,function(pt){switch(pt.label){case 0:if(!($.initialized&&n))return[3,5];pt.label=1;case 1:return pt.trys.push([1,3,4,5]),[4,$.sdk.groupChannel.getChannel(n)];case 2:return it=pt.sent(),he(it),_e(null),[3,5];case 3:return Ct=pt.sent(),he(null),_e(Ct),(Je=ne==null?void 0:ne.error)===null||Je===void 0||Je.call(ne,"GroupChannelProvider: error when fetching channel",Ct),[3,5];case 4:return ie(null),le(null),[7];case 5:return[2]}})})},[$.initialized,$.sdk,n]),X6(function(){return Wt(void 0,void 0,void 0,function(){var it,Ct;return Qt(this,function(Je){return Be.initialized&&Le.publish("scrollToBottom",{}),it=function(pt){pt.channel.url===(ae==null?void 0:ae.url)&&Le.publish("scrollToBottom",{})},Ct=[K.pubSub.subscribe(Fn.SEND_USER_MESSAGE,it),K.pubSub.subscribe(Fn.SEND_FILE_MESSAGE,it)],[2,function(){Ct.forEach(function(pt){return pt.remove()})}]})})},[Be.initialized,ae==null?void 0:ae.url]),N.useEffect(function(){typeof E=="number"&&qe(E,0,!1,!1)},[E]),N.useEffect(function(){g&&le(g)},[g]);var nt=ur(function(it){return Wt(void 0,void 0,void 0,function(){return Qt(this,function(Ct){switch(Ct.label){case 0:return me.current?(le(null),Ge(!0),K.isOnline&&Be.hasNext()?[4,Be.resetWithStartingPoint(Number.MAX_SAFE_INTEGER)]:[3,2]):[2];case 1:return Ct.sent(),Le.publish("scrollToBottom",{animated:it}),[3,3];case 2:Le.publish("scrollToBottom",{animated:it}),Ct.label=3;case 3:return ae&&!Be.hasNext()&&(Be.resetNewMessages(),f||Q.push(ae)),[2]}})})}),qe=ur(function(it,Ct,Je,pt){return Wt(void 0,void 0,void 0,function(){var Ut,Pt,Ht,bt,qt;return Qt(this,function(Lt){switch(Lt.label){case 0:return Ut=me.current,Pt=Ut==null?void 0:Ut.parentNode,Ht={activate:function(){!Ut||!Pt||(Ut.style.pointerEvents="auto",Pt.style.cursor="auto")},deactivate:function(){!Ut||!Pt||(Ut.style.pointerEvents="none",Pt.style.cursor="wait")}},Ht.deactivate(),le(null),bt=Be.messages.find(function(wt){return wt.messageId===Ct||wt.createdAt===it}),bt?(qt=VI(bt.createdAt),qt&&Le.publish("scroll",{top:qt,animated:pt}),(Je??!0)&&le(Ct),[3,3]):[3,1];case 1:return[4,Be.resetWithStartingPoint(it)];case 2:Lt.sent(),setTimeout(function(){var wt=VI(it);wt&&Le.publish("scroll",{top:wt,lazy:!1,animated:pt}),(Je??!0)&&le(Ct)}),Lt.label=3;case 3:return Ht.activate(),[2]}})})}),rn=ZB(x(x(x({},e),Be),{scrollToBottom:nt,quoteMessage:Z,replyType:Ye}));return v.createElement(TR.Provider,{value:x(x({channelUrl:n,isReactionEnabled:Rt,isMessageGroupingEnabled:o,isMultipleFilesMessageEnabled:l,showSearchIcon:u??K.groupChannelSettings.enableMessageSearch,replyType:Ye,threadReplySelectType:yt,disableMarkAsRead:f,scrollBehavior:m,messageListQueryParams:y,onBeforeSendUserMessage:S,onBeforeSendFileMessage:C,onBeforeSendVoiceMessage:T,onBeforeSendMultipleFilesMessage:I,onBeforeUpdateUserMessage:L,onBeforeDownloadFileMessage:D,onMessageAnimated:O,onBackClick:R,onChatHeaderActionClick:k,onReplyInThreadClick:P,onSearchClick:G,onQuoteMessageClick:V,renderUserMentionItem:H,filterEmojiCategoryIds:F,currentChannel:ae,fetchChannelError:Ne,nicknamesMap:st,scrollRef:me,scrollDistanceFromBottomRef:Qe,scrollPositionRef:De,scrollPubSub:Le,messageInputRef:tt,quoteMessage:Z,setQuoteMessage:ie,animatedMessageId:te,setAnimatedMessageId:le,isScrollBottomReached:Pe,setIsScrollBottomReached:Ge,scrollToBottom:nt,scrollToMessage:qe,toggleReaction:Ue},Be),rn)},v.createElement(hd,x({},e),t))},qu=function(){var e=N.useContext(TR);if(!e)throw new Error("GroupChannelContext not found. Use within the GroupChannel module.");return e};function eG(e,n){return function(t){var r=x(x(x({},t),{prevResultLimit:30,nextResultLimit:30}),n);return e.createMessageCollection(x(x({},r),{filter:new Xs(r)}))}}var NR=function(e){var n=e.members;function t(){var r=N.useContext(wn).stringSet;return!n||n.length===0?"":n&&n.length===1?"".concat(n[0].nickname," ").concat(r.TYPING_INDICATOR__IS_TYPING):n&&n.length===2?"".concat(n[0].nickname," ").concat(r.TYPING_INDICATOR__AND," ").concat(n[1].nickname," ").concat(r.TYPING_INDICATOR__ARE_TYPING):r.TYPING_INDICATOR__MULTIPLE_TYPING}return v.createElement(v.Fragment,null,t())},tG=function(e){var n,t,r,i=e.channelUrl,a=Tt(),s=(t=(n=a==null?void 0:a.stores)===null||n===void 0?void 0:n.sdkStore)===null||t===void 0?void 0:t.sdk,o=(r=a==null?void 0:a.config)===null||r===void 0?void 0:r.logger,l=N.useState(Kr()),u=l[0],d=l[1],f=N.useState([]),p=f[0],m=f[1];return N.useEffect(function(){var E;if(!((E=s==null?void 0:s.groupChannel)===null||E===void 0)&&E.addGroupChannelHandler){s.groupChannel.removeGroupChannelHandler(u);var g=Kr(),y=new xo({onTypingStatusUpdated:function(S){if(o.info("Channel > Typing Indicator: onTypingStatusUpdated",S),S.url===i){var C=S.getTypingUsers();m(C)}}});s.groupChannel.addGroupChannelHandler(g,y),d(g)}return function(){var S;m([]),!((S=s==null?void 0:s.groupChannel)===null||S===void 0)&&S.removeGroupChannelHandler&&s.groupChannel.removeGroupChannelHandler(u)}},[i]),v.createElement(Ie,{className:"sendbird-conversation__footer__typing-indicator__text",type:Ce.CAPTION_2,color:de.ONBACKGROUND_2},v.createElement(NR,{members:p}))},ef;(function(e){e.Text="text",e.Bubble="bubble"})(ef||(ef={}));function nG(){var e=N.useContext(wn).stringSet;return v.createElement("div",{className:"sendbird-connection-status"},v.createElement(Ie,{type:Ce.BODY_2,color:de.ONBACKGROUND_2},e.TRYING_TO_CONNECT),v.createElement(We,{type:Se.DISCONNECTED,fillColor:Ve.SENT,width:"14px",height:"14px"}))}function Ho(e){var n=e.className,t=n===void 0?"":n,r=e.width,i=r===void 0?"26px":r,a=e.height,s=a===void 0?"26px":a,o=e.children,l=e.testID;return v.createElement("div",{className:Ae(Ae([],Array.isArray(t)?t:[t],!0),["sendbird-loader"],!1).join(" "),"data-testid":l,style:{width:typeof i=="string"?i:"".concat(i,"px"),height:typeof s=="string"?s:"".concat(s,"px")}},o||v.createElement(We,{type:Se.SPINNER,width:"26px",height:"26px"}))}var kn={LOADING:"LOADING",NO_CHANNELS:"NO_CHANNELS",NO_MESSAGES:"NO_MESSAGES",WRONG:"WRONG",SEARCH_IN:"SEARCH_IN",SEARCHING:"SEARCHING",NO_RESULTS:"NO_RESULTS"};function Mr(e){var n=e.className,t=n===void 0?"":n,r=e.type,i=e.iconSize,a=e.searchInString,s=a===void 0?"":a,o=e.retryToConnect,l=N.useContext(wn).stringSet;return v.createElement("div",{className:Ae(Ae([],Array.isArray(t)?t:[t],!0),["sendbird-place-holder"],!1).join(" ")},r===kn.LOADING&&v.createElement(Ho,{width:i||"48px",height:i||"48px"},v.createElement(We,{type:Se.SPINNER,fillColor:Ve.PRIMARY,width:i||"48px",height:i||"48px"})),(r===kn.NO_CHANNELS||r===kn.NO_MESSAGES||r===kn.WRONG)&&v.createElement("div",{className:"sendbird-place-holder__body"},r===kn.NO_CHANNELS&&v.createElement(We,{className:"sendbird-place-holder__body__icon",type:Se.CHAT,fillColor:Ve.ON_BACKGROUND_3,width:i||"64px",height:i||"64px"}),r===kn.WRONG&&v.createElement(We,{className:"sendbird-place-holder__body__icon",type:Se.ERROR,fillColor:Ve.ON_BACKGROUND_3,width:i||"64px",height:i||"64px"}),r===kn.NO_MESSAGES&&v.createElement(We,{className:"sendbird-place-holder__body__icon",type:Se.MESSAGE,fillColor:Ve.ON_BACKGROUND_3,width:i||"64px",height:i||"64px"}),v.createElement(Ie,{className:"sendbird-place-holder__body__text",type:Ce.BODY_1,color:de.ONBACKGROUND_2},r===kn.NO_CHANNELS&&l.PLACE_HOLDER__NO_CHANNEL,r===kn.WRONG&&l.PLACE_HOLDER__WRONG,r===kn.NO_MESSAGES&&l.PLACE_HOLDER__NO_MESSAGES),o&&v.createElement("div",{className:"sendbird-place-holder__body__reconnect",role:"button",onClick:o,onKeyPress:o,tabIndex:0},v.createElement(We,{className:"sendbird-place-holder__body__reconnect__icon",type:Se.REFRESH,fillColor:Ve.PRIMARY,width:"20px",height:"20px"}),v.createElement(Ie,{className:"sendbird-place-holder__body__reconnect__text",type:Ce.BUTTON_1,color:de.PRIMARY},l.PLACE_HOLDER__RETRY_TO_CONNECT))),(r===kn.NO_RESULTS||r===kn.SEARCH_IN||r===kn.SEARCHING)&&v.createElement("div",{className:"sendbird-place-holder__body--align-top"},r===kn.SEARCH_IN&&v.createElement("div",{className:"sendbird-place-holder__body--align-top__text"},v.createElement(Ie,{className:"sendbird-place-holder__body--align-top__text__search-in",type:Ce.BUTTON_2,color:de.ONBACKGROUND_2},l.SEARCH_IN),v.createElement(Ie,{className:"sendbird-place-holder__body--align-top__text__channel-name",type:Ce.BUTTON_2,color:de.PRIMARY},"'".concat(s)),v.createElement(Ie,{className:"sendbird-place-holder__body--align-top__text__quote",type:Ce.BUTTON_2,color:de.PRIMARY},"'")),r===kn.SEARCHING&&v.createElement(Ie,{className:"sendbird-place-hlder__body--align-top__searching",type:Ce.BODY_1,color:de.ONBACKGROUND_2},l.SEARCHING),r===kn.NO_RESULTS&&v.createElement(Ie,{className:"sendbird-place-hlder__body--align-top__no-result",type:Ce.BODY_1,color:de.ONBACKGROUND_2},l.NO_SEARCHED_MESSAGE)))}var IR=function(e){var n,t,r,i,a=e.isLoading,s=e.isInvalid,o=e.channelUrl,l=Fo(e),u=l.renderChannelHeader,d=l.renderMessageList,f=l.renderMessageInput,p=l.renderTypingIndicator,m=l.renderPlaceholderLoader,E=l.renderPlaceholderInvalid,g=Tt(),y=g.stores,S=g.config,C=(n=y==null?void 0:y.sdkStore)===null||n===void 0?void 0:n.error,T=S.logger,I=S.isOnline;return a?v.createElement("div",{className:"sendbird-conversation"},(m==null?void 0:m())||v.createElement(Mr,{type:kn.LOADING})):o?s?v.createElement("div",{className:"sendbird-conversation"},(E==null?void 0:E())||v.createElement(Mr,{type:kn.WRONG})):C?v.createElement("div",{className:"sendbird-conversation"},(E==null?void 0:E())||v.createElement(Mr,{type:kn.WRONG,retryToConnect:function(){T.info("Channel: reconnecting")}})):v.createElement("div",{className:"sendbird-conversation"},u==null?void 0:u({className:"sendbird-conversation__channel-header"}),d==null?void 0:d(e),v.createElement("div",{className:"sendbird-conversation__footer"},f==null?void 0:f(),v.createElement("div",{className:"sendbird-conversation__footer__typing-indicator"},(p==null?void 0:p())||((t=S==null?void 0:S.groupChannel)===null||t===void 0?void 0:t.enableTypingIndicator)&&((i=(r=S==null?void 0:S.groupChannel)===null||r===void 0?void 0:r.typingIndicatorTypes)===null||i===void 0?void 0:i.has(ef.Text))&&v.createElement(tG,{channelUrl:o}),!I&&v.createElement(nG,null)))):v.createElement("div",{className:"sendbird-conversation"},(E==null?void 0:E())||v.createElement(Mr,{type:kn.NO_CHANNELS}))},MR=function(e){if(e!==null)return typeof e=="number"?"".concat(e,"px"):e};function $I(e,n,t){var r;return"min(".concat(n??t,", ").concat((r=MR(e))!==null&&r!==void 0?r:t,")")}function rG(e){var n=e.width,t=e.height,r=e.maxSideLength,i=e.defaultMinLength,a=N.useMemo(function(){return $I(n,r,i)},[n]),s=N.useMemo(function(){return $I(t,r,i)},[t]);return[a,s]}var iG=function(){var e=N.useState(!1),n=e[0],t=e[1],r=N.useState(null),i=r[0],a=r[1],s=N.useCallback(function(o){o!==null&&a(o)},[]);return N.useEffect(function(){if(i){var o=new IntersectionObserver(function(l){var u=l[0];t(u.isIntersecting)});return o.observe(i),function(){o.disconnect()}}},[i]),[s,n]},aG=function(){var e=N.useRef(!1),n=iG(),t=n[0],r=n[1];return r&&(e.current=!0),[t,e.current]};function WI(e,n){return e===void 0&&(e=!1),n===void 0&&(n=null),e?"50%":MR(n)}function sG(e,n,t){var r=typeof e=="string"?parseInt(e,10):e,i=t-1,a=n===0?r*2:r,s=n===1?r*2:r,o=n===i?r*2:r,l=n===i-1?r*2:r;return"".concat(a,"px ").concat(s,"px ").concat(o,"px ").concat(l,"px")}var yr=function(e){var n=e.className,t=n===void 0?"":n,r=e.url,i=e.alt,a=i===void 0?"":i,s=e.width,o=s===void 0?null:s,l=e.maxSideLength,u=l===void 0?null:l,d=e.height,f=d===void 0?null:d,p=e.circle,m=p===void 0?!1:p,E=e.fixedSize,g=E===void 0?!1:E,y=e.placeHolder,S=y===void 0?null:y,C=e.defaultComponent,T=C===void 0?null:C,I=e.borderRadius,L=I===void 0?null:I,D=e.onLoad,O=D===void 0?Cn:D,R=e.onError,k=R===void 0?Cn:R,P=e.shadeOnHover,G=e.isUploaded,V=G===void 0?!0:G,H=aG(),F=H[0],z=H[1],K=z?r:null,ee=N.useState(!1),$=ee[0],Q=ee[1],ne=N.useState(!0),j=ne[0],Z=ne[1],ie=rG({width:o,height:f,maxSideLength:u,defaultMinLength:"400px"}),fe=ie[0],te=ie[1],le=function(){return typeof S=="function"?S({style:{width:"100%",minWidth:fe,maxWidth:g?fe:"400px",height:te,position:"absolute",display:"flex",justifyContent:"center",alignItems:"center"}}):S},Me=function(){return typeof T=="function"?T():T},ae=function(){var he=K?{backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover",backgroundImage:"url(".concat(K,")")}:{};return v.createElement("div",{className:"sendbird-image-renderer__image",style:x({width:"100%",minWidth:fe,maxWidth:g?fe:"400px",height:te,position:"absolute",borderRadius:WI(m,L)},he)})};return fe&&te&&v.createElement("div",{ref:F,className:Ae(Ae([],Array.isArray(t)?t:[t],!0),["sendbird-image-renderer"],!1).join(" "),style:{width:"100%",minWidth:fe,maxWidth:g?fe:"400px",height:te}},j&&le(),!K||$?Me():ae(),P&&v.createElement("div",{className:"sendbird-multiple-files-image-renderer__image-cover",style:x({borderRadius:WI(m,L)},V?{}:{display:"inline-flex"})}),K&&v.createElement(oG,{src:K,alt:a,onLoadStart:function(){Z(!0),Q(!1)},onLoad:function(){Z(!1),Q(!1),O()},onError:function(){Z(!1),Q(!0),k()}}))},oG=function(e){var n=e.src,t=e.alt,r=e.onLoadStart,i=r===void 0?Cn:r,a=e.onLoad,s=a===void 0?Cn:a,o=e.onError,l=o===void 0?Cn:o,u=N.useRef({currSrc:n,prevSrc:n,loadFailure:!1});return u.current.currSrc!==n&&(u.current.prevSrc=u.current.currSrc,u.current.currSrc=n),N.useLayoutEffect(function(){if(n){var d=u.current.prevSrc!==u.current.currSrc,f=u.current.loadFailure;(d||f)&&i()}},[n,navigator.onLine]),v.createElement("img",{className:"sendbird-image-renderer__hidden-image-loader",src:n,alt:t,onLoad:function(){u.current.loadFailure=!1,s()},onError:function(){u.current.loadFailure=!0,l()}})},id=function(e){if(typeof e=="number")return e;if(typeof e=="string"){var n=Number.parseFloat(e);if(!Number.isNaN(n))return n}return NaN},AR=function(e){var n=e.width,t=e.height,r=e.text,i=id(n),a=id(t);return typeof i=="number"&&!Number.isNaN(i)&&(i*=.575),typeof a=="number"&&!Number.isNaN(a)&&(a*=.575),v.createElement("div",{className:Zt("sendbird-avatar-img--default",r&&"text"),style:{width:n,height:t}},r?v.createElement("div",{className:"sendbird-avatar-text"},r):v.createElement(We,{type:Se.USER,fillColor:Ve.CONTENT,width:i,height:a}))},vo="sendbird-avatar-img",lG=function(e){var n=e.src,t=n===void 0?"":n,r=e.alt,i=r===void 0?"":r,a=e.height,s=e.width,o=e.customDefaultComponent,l=function(){return o?o({width:s,height:a}):v.createElement(AR,{width:s,height:a})};return typeof t=="string"?v.createElement(yr,{className:vo,url:t,height:a,width:s,alt:i,defaultComponent:l}):t&&t.length?t.length===1?v.createElement(yr,{className:vo,url:t[0],height:a,width:s,alt:i,defaultComponent:l}):t.length===2?v.createElement("div",{className:"sendbird-avatar--inner__two-child"},v.createElement(yr,{className:vo,url:t[0],height:a,width:s,alt:i,defaultComponent:l}),v.createElement(yr,{className:vo,url:t[1],height:a,width:s,alt:i,defaultComponent:l})):t.length===3?v.createElement(v.Fragment,null,v.createElement("div",{className:"sendbird-avatar--inner__three-child--upper"},v.createElement(yr,{className:vo,url:t[0],height:a,width:s,alt:i,defaultComponent:l})),v.createElement("div",{className:"sendbird-avatar--inner__three-child--lower"},v.createElement(yr,{className:vo,url:t[1],height:a,width:s,alt:i,defaultComponent:l}),v.createElement(yr,{className:vo,url:t[2],height:a,width:s,alt:i,defaultComponent:l}))):v.createElement("div",{className:"sendbird-avatar--inner__four-child"},t.slice(0,4).map(function(u,d){return v.createElement(yr,{className:vo,url:u,height:a,width:s,alt:i,key:"".concat(u,"-").concat(d),defaultComponent:l})})):v.createElement(yr,{className:vo,url:"",height:a,width:s,alt:i,defaultComponent:l})};function uG(e,n){var t=e.className,r=t===void 0?"":t,i=e.src,a=i===void 0?"":i,s=e.alt,o=s===void 0?"":s,l=e.width,u=l===void 0?"56px":l,d=e.height,f=d===void 0?"56px":d,p=e.zIndex,m=p===void 0?0:p,E=e.left,g=E===void 0?"":E,y=e.bottom,S=y===void 0?"":y,C=e.onClick,T=e.customDefaultComponent;return v.createElement("div",{className:Ae(Ae([],Array.isArray(r)?r:[r],!0),["sendbird-avatar"],!1).join(" "),role:"button",ref:n,style:{height:f,width:u,zIndex:m,left:g,bottom:S},onClick:C,onKeyDown:C,tabIndex:0},v.createElement(lG,{src:a,width:u,height:f,alt:o,customDefaultComponent:T}))}var Fr=v.forwardRef(uG),wR="https://static.sendbird.com/sample/cover/cover_",Z_=function(e,n){return e!=null&&e.coverUrl&&!new RegExp("^".concat(wR)).test(e.coverUrl)?e.coverUrl:((e==null?void 0:e.members)||[]).filter(function(t){return t.userId!==n}).map(function(t){var r=t.profileUrl;return r})},cG=function(e){return e!=null&&e.coverUrl?!!new RegExp("^".concat(wR)).test(e.coverUrl):!0};function mm(e){var n=e.channel,t=e.userId,r=e.theme,i=e.width,a=i===void 0?56:i,s=e.height,o=s===void 0?56:s,l=n==null?void 0:n.isBroadcast,u=N.useMemo(function(){return l?cG(n)?v.createElement("div",{className:"sendbird-chat-header--default-avatar",style:{width:a,height:o,display:"flex",justifyContent:"center",alignItems:"center"}},v.createElement(We,{type:Se.BROADCAST,fillColor:Ve.CONTENT,width:a*.575,height:o*.575})):v.createElement(Fr,{className:"sendbird-chat-header--avatar--broadcast-channel",src:Z_(n,t),width:a,height:o,alt:n==null?void 0:n.name}):v.createElement(Fr,{className:"sendbird-chat-header--avatar--group-channel",src:Z_(n,t),width:"".concat(a,"px"),height:"".concat(o,"px"),alt:n==null?void 0:n.name})},[Z_(n,t),r]);return v.createElement(v.Fragment,null,u)}var RR=function(e,n,t){var r,i=t||zu;return!(e!=null&&e.name)&&!(e!=null&&e.members)?i.NO_TITLE:e!=null&&e.name&&e.name!=="Group Channel"?e.name:((r=e==null?void 0:e.members)===null||r===void 0?void 0:r.length)===1?i.NO_MEMBERS:e==null?void 0:e.members.filter(function(a){var s=a.userId;return s!==n}).map(function(a){var s=a.nickname;return s||i.NO_NAME}).join(", ")},da;(function(e){e.ONBACKGROUND_1="ONBACKGROUND_1",e.ONBACKGROUND_2="ONBACKGROUND_2",e.ONBACKGROUND_3="ONBACKGROUND_3",e.ONBACKGROUND_4="ONBACKGROUND_4",e.ONCONTENT_1="ONCONTENT_1",e.ONCONTENT_2="ONCONTENT_2",e.PRIMARY="PRIMARY",e.ERROR="ERROR"})(da||(da={}));var ay=function(e){switch(e){case da.ONBACKGROUND_1:return"sendbird-color--onbackground-1";case da.ONBACKGROUND_2:return"sendbird-color--onbackground-2";case da.ONBACKGROUND_3:return"sendbird-color--onbackground-3";case da.ONBACKGROUND_4:return"sendbird-color--onbackground-4";case da.ONCONTENT_1:return"sendbird-color--oncontent-1";case da.PRIMARY:return"sendbird-color--primary";case da.ERROR:return"sendbird-color--error";default:return""}},to=function(e){var n=e.className,t=n===void 0?"":n,r=e.color,i=r===void 0?da.ONBACKGROUND_1:r,a=e.disabled,s=a===void 0?!1:a,o=e.disableUnderline,l=o===void 0?!1:o,u=e.onClick,d=u===void 0?function(){}:u,f=e.children;return v.createElement("div",{className:Ae(Ae([],Array.isArray(t)?t:[t],!0),[ay(i),l?"sendbird-textbutton--not-underline":"sendbird-textbutton",s?"sendbird-textbutton--disabled":""],!1).join(" "),role:"button",tabIndex:0,onClick:function(p){return d(p)},onKeyPress:function(p){return d(p)}},f)},dG=function(e){var n,t=e.className,r=e.renderLeft,i=e.renderRight,a=e.renderMiddle,s=!1;try{s=(n=_r==null?void 0:_r())===null||n===void 0?void 0:n.isMobile}catch{}return v.createElement("div",{className:Zt("sendbird-ui-header",t),"data-testid":"sendbird-ui-header"},r?v.createElement("div",{className:Zt("sendbird-ui-header__left",s?"sendbird-ui-header--is-mobile":"sendbird-ui-header--is-desktop")},r==null?void 0:r()):null,v.createElement("div",{className:"sendbird-ui-header__middle"},a==null?void 0:a()),i?v.createElement("div",{className:Zt("sendbird-ui-header__right",s?"sendbird-ui-header--is-mobile":"sendbird-ui-header--is-desktop")},i==null?void 0:i()):null)},hG=function(e){var n=e.title,t=e.subtitle,r=e.onClickSubtitle;return v.createElement("div",{className:"sendbird-ui-header__middle"},n&&v.createElement(Ie,{className:"sendbird-ui-header__middle__title",type:Ce.H_2,color:de.ONBACKGROUND_1},n),t&&(r?v.createElement(to,{className:"sendbird-ui-header__middle__subtitle__container",onClick:r,disableUnderline:!0},v.createElement(Ie,{className:"sendbird-ui-header__middle__subtitle",type:Ce.CAPTION_3,color:de.ONBACKGROUND_2},t)):v.createElement(Ie,{className:"sendbird-ui-header__middle__subtitle",type:Ce.BODY_1,color:de.ONBACKGROUND_2},t)))},fG=function(e){var n=e.className,t=e.onClick,r=e.type,i=e.color,a=e.width,s=a===void 0?"32px":a,o=e.height,l=o===void 0?"32px":o,u=e.renderIcon,d=u===void 0?function(f){return v.createElement(OR,x({},f))}:u;return v.createElement(fa,{className:n,width:s,height:l,onClick:t},d({type:r,color:i}))},OR=function(e){var n=e.className,t=e.type,r=e.color,i=e.width,a=i===void 0?"22px":i,s=e.height,o=s===void 0?"22px":s,l=e.onClick,u=l===void 0?Cn:l;return v.createElement(We,{className:n,type:t,fillColor:r,width:a,height:o,onClick:function(d){return u==null?void 0:u(d)}})},fi=Object.assign(dG,{Title:hG,IconButton:fG,Icon:OR}),DR=function(e){var n=e.className,t=e.currentChannel,r=e.showSearchIcon,i=e.onBackClick,a=e.onSearchClick,s=e.onChatHeaderActionClick,o=e.renderLeft,l=e.renderMiddle,u=e.renderRight,d=Tt().config,f=d.userId,p=d.theme,m=_r().isMobile,E=Ft().stringSet,g=(t==null?void 0:t.myMutedState)==="muted",y=RR(t,f,E);return v.createElement(fi,{className:Zt("sendbird-chat-header",n),renderLeft:o??function(){return v.createElement(v.Fragment,null,m&&v.createElement(fi.Icon,{className:"sendbird-chat-header__icon_back",onClick:i,type:Se.ARROW_LEFT,color:Ve.PRIMARY,width:"24px",height:"24px"}),v.createElement(mm,{theme:p,channel:t,userId:f,height:32,width:32}))},renderMiddle:l??function(){return v.createElement(fi.Title,{title:y})},renderRight:u??function(){return v.createElement(v.Fragment,null,g&&v.createElement(fi.Icon,{className:"sendbird-chat-header__right__mute",type:Se.NOTIFICATIONS_OFF_FILLED,color:Ve.ON_BACKGROUND_2,width:"24px",height:"24px"}),r&&!(t!=null&&t.isEphemeral)&&v.createElement(fi.IconButton,{className:"sendbird-chat-header__right__search",onClick:a,type:Se.SEARCH,color:Ve.PRIMARY,renderIcon:function(S){return v.createElement(fi.Icon,x({},S,{width:"24px",height:"24px"}))}}),v.createElement(fi.IconButton,{className:"sendbird-chat-header__right__info",onClick:s,type:Se.INFO,color:Ve.PRIMARY,renderIcon:function(S){return v.createElement(fi.Icon,x({},S,{width:"24px",height:"24px"}))}}))}})},vG=function(e){var n=qu();return v.createElement(DR,x({},e,n,{currentChannel:n.currentChannel}))};function pG(e){return Cr(1,arguments),e instanceof Date||Bp(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function mG(e){if(Cr(1,arguments),!pG(e)&&typeof e!="number")return!1;var n=ta(e);return!isNaN(Number(n))}function Do(e){if(e===null||e===!0||e===!1)return NaN;var n=Number(e);return isNaN(n)?n:n<0?Math.ceil(n):Math.floor(n)}function _G(e,n){Cr(2,arguments);var t=ta(e).getTime(),r=Do(n);return new Date(t+r)}function gG(e,n){Cr(2,arguments);var t=Do(n);return _G(e,-t)}var EG=864e5;function yG(e){Cr(1,arguments);var n=ta(e),t=n.getTime();n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0);var r=n.getTime(),i=t-r;return Math.floor(i/EG)+1}function jp(e){Cr(1,arguments);var n=1,t=ta(e),r=t.getUTCDay(),i=(r<n?7:0)+r-n;return t.setUTCDate(t.getUTCDate()-i),t.setUTCHours(0,0,0,0),t}function LR(e){Cr(1,arguments);var n=ta(e),t=n.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(t+1,0,4),r.setUTCHours(0,0,0,0);var i=jp(r),a=new Date(0);a.setUTCFullYear(t,0,4),a.setUTCHours(0,0,0,0);var s=jp(a);return n.getTime()>=i.getTime()?t+1:n.getTime()>=s.getTime()?t:t-1}function CG(e){Cr(1,arguments);var n=LR(e),t=new Date(0);t.setUTCFullYear(n,0,4),t.setUTCHours(0,0,0,0);var r=jp(t);return r}var bG=6048e5;function SG(e){Cr(1,arguments);var n=ta(e),t=jp(n).getTime()-CG(n).getTime();return Math.round(t/bG)+1}var TG={};function _m(){return TG}function qp(e,n){var t,r,i,a,s,o,l,u;Cr(1,arguments);var d=_m(),f=Do((t=(r=(i=(a=n==null?void 0:n.weekStartsOn)!==null&&a!==void 0?a:n==null||(s=n.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&i!==void 0?i:d.weekStartsOn)!==null&&r!==void 0?r:(l=d.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&t!==void 0?t:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=ta(e),m=p.getUTCDay(),E=(m<f?7:0)+m-f;return p.setUTCDate(p.getUTCDate()-E),p.setUTCHours(0,0,0,0),p}function UR(e,n){var t,r,i,a,s,o,l,u;Cr(1,arguments);var d=ta(e),f=d.getUTCFullYear(),p=_m(),m=Do((t=(r=(i=(a=n==null?void 0:n.firstWeekContainsDate)!==null&&a!==void 0?a:n==null||(s=n.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&i!==void 0?i:p.firstWeekContainsDate)!==null&&r!==void 0?r:(l=p.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&t!==void 0?t:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var E=new Date(0);E.setUTCFullYear(f+1,0,m),E.setUTCHours(0,0,0,0);var g=qp(E,n),y=new Date(0);y.setUTCFullYear(f,0,m),y.setUTCHours(0,0,0,0);var S=qp(y,n);return d.getTime()>=g.getTime()?f+1:d.getTime()>=S.getTime()?f:f-1}function NG(e,n){var t,r,i,a,s,o,l,u;Cr(1,arguments);var d=_m(),f=Do((t=(r=(i=(a=n==null?void 0:n.firstWeekContainsDate)!==null&&a!==void 0?a:n==null||(s=n.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&i!==void 0?i:d.firstWeekContainsDate)!==null&&r!==void 0?r:(l=d.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&t!==void 0?t:1),p=UR(e,n),m=new Date(0);m.setUTCFullYear(p,0,f),m.setUTCHours(0,0,0,0);var E=qp(m,n);return E}var IG=6048e5;function MG(e,n){Cr(1,arguments);var t=ta(e),r=qp(t,n).getTime()-NG(t,n).getTime();return Math.round(r/IG)+1}function or(e,n){for(var t=e<0?"-":"",r=Math.abs(e).toString();r.length<n;)r="0"+r;return t+r}var ol={y:function(n,t){var r=n.getUTCFullYear(),i=r>0?r:1-r;return or(t==="yy"?i%100:i,t.length)},M:function(n,t){var r=n.getUTCMonth();return t==="M"?String(r+1):or(r+1,2)},d:function(n,t){return or(n.getUTCDate(),t.length)},a:function(n,t){var r=n.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(n,t){return or(n.getUTCHours()%12||12,t.length)},H:function(n,t){return or(n.getUTCHours(),t.length)},m:function(n,t){return or(n.getUTCMinutes(),t.length)},s:function(n,t){return or(n.getUTCSeconds(),t.length)},S:function(n,t){var r=t.length,i=n.getUTCMilliseconds(),a=Math.floor(i*Math.pow(10,r-3));return or(a,t.length)}},Rc={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},AG={G:function(n,t,r){var i=n.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(n,t,r){if(t==="yo"){var i=n.getUTCFullYear(),a=i>0?i:1-i;return r.ordinalNumber(a,{unit:"year"})}return ol.y(n,t)},Y:function(n,t,r,i){var a=UR(n,i),s=a>0?a:1-a;if(t==="YY"){var o=s%100;return or(o,2)}return t==="Yo"?r.ordinalNumber(s,{unit:"year"}):or(s,t.length)},R:function(n,t){var r=LR(n);return or(r,t.length)},u:function(n,t){var r=n.getUTCFullYear();return or(r,t.length)},Q:function(n,t,r){var i=Math.ceil((n.getUTCMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return or(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(n,t,r){var i=Math.ceil((n.getUTCMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return or(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(n,t,r){var i=n.getUTCMonth();switch(t){case"M":case"MM":return ol.M(n,t);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(n,t,r){var i=n.getUTCMonth();switch(t){case"L":return String(i+1);case"LL":return or(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(n,t,r,i){var a=MG(n,i);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):or(a,t.length)},I:function(n,t,r){var i=SG(n);return t==="Io"?r.ordinalNumber(i,{unit:"week"}):or(i,t.length)},d:function(n,t,r){return t==="do"?r.ordinalNumber(n.getUTCDate(),{unit:"date"}):ol.d(n,t)},D:function(n,t,r){var i=yG(n);return t==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):or(i,t.length)},E:function(n,t,r){var i=n.getUTCDay();switch(t){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(n,t,r,i){var a=n.getUTCDay(),s=(a-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return or(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(n,t,r,i){var a=n.getUTCDay(),s=(a-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return or(s,t.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(n,t,r){var i=n.getUTCDay(),a=i===0?7:i;switch(t){case"i":return String(a);case"ii":return or(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(n,t,r){var i=n.getUTCHours(),a=i/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(n,t,r){var i=n.getUTCHours(),a;switch(i===12?a=Rc.noon:i===0?a=Rc.midnight:a=i/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(n,t,r){var i=n.getUTCHours(),a;switch(i>=17?a=Rc.evening:i>=12?a=Rc.afternoon:i>=4?a=Rc.morning:a=Rc.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(n,t,r){if(t==="ho"){var i=n.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return ol.h(n,t)},H:function(n,t,r){return t==="Ho"?r.ordinalNumber(n.getUTCHours(),{unit:"hour"}):ol.H(n,t)},K:function(n,t,r){var i=n.getUTCHours()%12;return t==="Ko"?r.ordinalNumber(i,{unit:"hour"}):or(i,t.length)},k:function(n,t,r){var i=n.getUTCHours();return i===0&&(i=24),t==="ko"?r.ordinalNumber(i,{unit:"hour"}):or(i,t.length)},m:function(n,t,r){return t==="mo"?r.ordinalNumber(n.getUTCMinutes(),{unit:"minute"}):ol.m(n,t)},s:function(n,t,r){return t==="so"?r.ordinalNumber(n.getUTCSeconds(),{unit:"second"}):ol.s(n,t)},S:function(n,t){return ol.S(n,t)},X:function(n,t,r,i){var a=i._originalDate||n,s=a.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return YI(s);case"XXXX":case"XX":return nu(s);case"XXXXX":case"XXX":default:return nu(s,":")}},x:function(n,t,r,i){var a=i._originalDate||n,s=a.getTimezoneOffset();switch(t){case"x":return YI(s);case"xxxx":case"xx":return nu(s);case"xxxxx":case"xxx":default:return nu(s,":")}},O:function(n,t,r,i){var a=i._originalDate||n,s=a.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+QI(s,":");case"OOOO":default:return"GMT"+nu(s,":")}},z:function(n,t,r,i){var a=i._originalDate||n,s=a.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+QI(s,":");case"zzzz":default:return"GMT"+nu(s,":")}},t:function(n,t,r,i){var a=i._originalDate||n,s=Math.floor(a.getTime()/1e3);return or(s,t.length)},T:function(n,t,r,i){var a=i._originalDate||n,s=a.getTime();return or(s,t.length)}};function QI(e,n){var t=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),a=r%60;if(a===0)return t+String(i);var s=n;return t+String(i)+s+or(a,2)}function YI(e,n){if(e%60===0){var t=e>0?"-":"+";return t+or(Math.abs(e)/60,2)}return nu(e,n)}function nu(e,n){var t=n||"",r=e>0?"-":"+",i=Math.abs(e),a=or(Math.floor(i/60),2),s=or(i%60,2);return r+a+t+s}var XI=function(n,t){switch(n){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},kR=function(n,t){switch(n){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},wG=function(n,t){var r=n.match(/(P+)(p+)?/)||[],i=r[1],a=r[2];if(!a)return XI(n,t);var s;switch(i){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",XI(i,t)).replace("{{time}}",kR(a,t))},RG={p:kR,P:wG};function OG(e){var n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),e.getTime()-n.getTime()}var DG=["D","DD"],LG=["YY","YYYY"];function UG(e){return DG.indexOf(e)!==-1}function kG(e){return LG.indexOf(e)!==-1}function ZI(e,n,t){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(n,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(n,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(n,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(n,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var PG=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,xG=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,FG=/^'([^]*?)'?$/,HG=/''/g,BG=/[a-zA-Z]/;function wr(e,n,t){var r,i,a,s,o,l,u,d,f,p,m,E,g,y,S,C,T,I;Cr(2,arguments);var L=String(n),D=_m(),O=(r=(i=t==null?void 0:t.locale)!==null&&i!==void 0?i:D.locale)!==null&&r!==void 0?r:P2,R=Do((a=(s=(o=(l=t==null?void 0:t.firstWeekContainsDate)!==null&&l!==void 0?l:t==null||(u=t.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&o!==void 0?o:D.firstWeekContainsDate)!==null&&s!==void 0?s:(f=D.locale)===null||f===void 0||(p=f.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(R>=1&&R<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var k=Do((m=(E=(g=(y=t==null?void 0:t.weekStartsOn)!==null&&y!==void 0?y:t==null||(S=t.locale)===null||S===void 0||(C=S.options)===null||C===void 0?void 0:C.weekStartsOn)!==null&&g!==void 0?g:D.weekStartsOn)!==null&&E!==void 0?E:(T=D.locale)===null||T===void 0||(I=T.options)===null||I===void 0?void 0:I.weekStartsOn)!==null&&m!==void 0?m:0);if(!(k>=0&&k<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!O.localize)throw new RangeError("locale must contain localize property");if(!O.formatLong)throw new RangeError("locale must contain formatLong property");var P=ta(e);if(!mG(P))throw new RangeError("Invalid time value");var G=OG(P),V=gG(P,G),H={firstWeekContainsDate:R,weekStartsOn:k,locale:O,_originalDate:P},F=L.match(xG).map(function(z){var K=z[0];if(K==="p"||K==="P"){var ee=RG[K];return ee(z,O.formatLong)}return z}).join("").match(PG).map(function(z){if(z==="''")return"'";var K=z[0];if(K==="'")return GG(z);var ee=AG[K];if(ee)return!(t!=null&&t.useAdditionalWeekYearTokens)&&kG(z)&&ZI(z,n,String(e)),!(t!=null&&t.useAdditionalDayOfYearTokens)&&UG(z)&&ZI(z,n,String(e)),ee(V,z,O.localize,H);if(K.match(BG))throw new RangeError("Format string contains an unescaped latin alphabet character `"+K+"`");return z}).join("");return F}function GG(e){var n=e.match(FG);return n?n[1].replace(HG,"'"):e}function JI(e){if(e){var n=e.querySelectorAll("[data-sb-mention='true']"),t=Array.from(n);return t}return[]}function vf(e,n){var t=e.ref,r=n.logger,i=t.current,a=N.useState([]),s=a[0],o=a[1];return N.useLayoutEffect(function(){if(i){var l=JI(i);o(l)}},[i]),N.useEffect(function(){var l={childList:!0,subtree:!0},u=function(f){var p=f.length>0;p&&o(JI(i))},d=new MutationObserver(u);return i&&d.observe(i,l),function(){try{d.disconnect()}catch{r.error("useDirtyGetMentions: observer disconnect failed",{observer:d})}}},[i]),s}var uC=function(e){var n=e.children,t=n===void 0?void 0:n,r=e.className,i=r===void 0?"":r,a=e.separatorColor,s=a===void 0?da.ONBACKGROUND_4:a;return v.createElement("div",{className:Ae(Ae([],Array.isArray(i)?i:[i],!0),["sendbird-separator"],!1).join(" ")},v.createElement("div",{className:["sendbird-separator__left","".concat(ay(s),"--background-color")].join(" ")}),v.createElement("div",{className:"sendbird-separator__text"},t||v.createElement(Ie,{type:Ce.CAPTION_2,color:de.ONBACKGROUND_2},"Date Separator")),v.createElement("div",{className:["sendbird-separator__right","".concat(ay(s),"--background-color")].join(" ")}))},Yr={Enter:"Enter",ArrowUp:"ArrowUp",ArrowDown:"ArrowDown",Backspace:"Backspace"},sy={ElementNode:1,TextNode:3},J_={Span:"SPAN",Br:"BR",Div:"DIV"};/*! @license DOMPurify 3.2.2 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.2/LICENSE */const{entries:PR,setPrototypeOf:eM,isFrozen:VG,getPrototypeOf:zG,getOwnPropertyDescriptor:jG}=Object;let{freeze:na,seal:ns,create:xR}=Object,{apply:oy,construct:ly}=typeof Reflect<"u"&&Reflect;na||(na=function(n){return n});ns||(ns=function(n){return n});oy||(oy=function(n,t,r){return n.apply(t,r)});ly||(ly=function(n,t){return new n(...t)});const Vv=Ha(Array.prototype.forEach),tM=Ha(Array.prototype.pop),ih=Ha(Array.prototype.push),vp=Ha(String.prototype.toLowerCase),eg=Ha(String.prototype.toString),nM=Ha(String.prototype.match),ah=Ha(String.prototype.replace),qG=Ha(String.prototype.indexOf),KG=Ha(String.prototype.trim),Es=Ha(Object.prototype.hasOwnProperty),Wi=Ha(RegExp.prototype.test),sh=$G(TypeError);function Ha(e){return function(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return oy(e,n,r)}}function $G(e){return function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return ly(e,t)}}function Bn(e,n){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:vp;eM&&eM(e,null);let r=n.length;for(;r--;){let i=n[r];if(typeof i=="string"){const a=t(i);a!==i&&(VG(n)||(n[r]=a),i=a)}e[i]=!0}return e}function WG(e){for(let n=0;n<e.length;n++)Es(e,n)||(e[n]=null);return e}function ru(e){const n=xR(null);for(const[t,r]of PR(e))Es(e,t)&&(Array.isArray(r)?n[t]=WG(r):r&&typeof r=="object"&&r.constructor===Object?n[t]=ru(r):n[t]=r);return n}function oh(e,n){for(;e!==null;){const r=jG(e,n);if(r){if(r.get)return Ha(r.get);if(typeof r.value=="function")return Ha(r.value)}e=zG(e)}function t(){return null}return t}const rM=na(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),tg=na(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ng=na(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),QG=na(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),rg=na(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),YG=na(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),iM=na(["#text"]),aM=na(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ig=na(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),sM=na(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),zv=na(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),XG=ns(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ZG=ns(/<%[\w\W]*|[\w\W]*%>/gm),JG=ns(/\${[\w\W]*}/gm),eV=ns(/^data-[\-\w.\u00B7-\uFFFF]/),tV=ns(/^aria-[\-\w]+$/),FR=ns(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),nV=ns(/^(?:\w+script|data):/i),rV=ns(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),HR=ns(/^html$/i),iV=ns(/^[a-z][.\w]*(-[.\w]+)+$/i);var oM=Object.freeze({__proto__:null,ARIA_ATTR:tV,ATTR_WHITESPACE:rV,CUSTOM_ELEMENT:iV,DATA_ATTR:eV,DOCTYPE_NAME:HR,ERB_EXPR:ZG,IS_ALLOWED_URI:FR,IS_SCRIPT_OR_DATA:nV,MUSTACHE_EXPR:XG,TMPLIT_EXPR:JG});const lh={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},aV=function(){return typeof window>"u"?null:window},sV=function(n,t){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(r=t.getAttribute(i));const a="dompurify"+(r?"#"+r:"");try{return n.createPolicy(a,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},lM=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function BR(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:aV();const n=ot=>BR(ot);if(n.version="3.2.2",n.removed=[],!e||!e.document||e.document.nodeType!==lh.document)return n.isSupported=!1,n;let{document:t}=e;const r=t,i=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:s,Node:o,Element:l,NodeFilter:u,NamedNodeMap:d=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:f,DOMParser:p,trustedTypes:m}=e,E=l.prototype,g=oh(E,"cloneNode"),y=oh(E,"remove"),S=oh(E,"nextSibling"),C=oh(E,"childNodes"),T=oh(E,"parentNode");if(typeof s=="function"){const ot=t.createElement("template");ot.content&&ot.content.ownerDocument&&(t=ot.content.ownerDocument)}let I,L="";const{implementation:D,createNodeIterator:O,createDocumentFragment:R,getElementsByTagName:k}=t,{importNode:P}=r;let G=lM();n.isSupported=typeof PR=="function"&&typeof T=="function"&&D&&D.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:V,ERB_EXPR:H,TMPLIT_EXPR:F,DATA_ATTR:z,ARIA_ATTR:K,IS_SCRIPT_OR_DATA:ee,ATTR_WHITESPACE:$,CUSTOM_ELEMENT:Q}=oM;let{IS_ALLOWED_URI:ne}=oM,j=null;const Z=Bn({},[...rM,...tg,...ng,...rg,...iM]);let ie=null;const fe=Bn({},[...aM,...ig,...sM,...zv]);let te=Object.seal(xR(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),le=null,Me=null,ae=!0,he=!0,pe=!1,Ne=!0,_e=!1,ge=!0,me=!1,Le=!1,Qe=!1,Pe=!1,Ge=!1,De=!1,tt=!0,Ue=!1;const Ye="user-content-";let yt=!0,Nt=!1,Rt={},st=null;const Be=Bn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let nt=null;const qe=Bn({},["audio","video","img","source","image","track"]);let rn=null;const it=Bn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ct="http://www.w3.org/1998/Math/MathML",Je="http://www.w3.org/2000/svg",pt="http://www.w3.org/1999/xhtml";let Ut=pt,Pt=!1,Ht=null;const bt=Bn({},[Ct,Je,pt],eg);let qt=Bn({},["mi","mo","mn","ms","mtext"]),Lt=Bn({},["annotation-xml"]);const wt=Bn({},["title","style","font","a","script"]);let Et=null;const xe=["application/xhtml+xml","text/html"],ye="text/html";let Ze=null,St=null;const Ot=t.createElement("form"),an=function(se){return se instanceof RegExp||se instanceof Function},xt=function(){let se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(St&&St===se)){if((!se||typeof se!="object")&&(se={}),se=ru(se),Et=xe.indexOf(se.PARSER_MEDIA_TYPE)===-1?ye:se.PARSER_MEDIA_TYPE,Ze=Et==="application/xhtml+xml"?eg:vp,j=Es(se,"ALLOWED_TAGS")?Bn({},se.ALLOWED_TAGS,Ze):Z,ie=Es(se,"ALLOWED_ATTR")?Bn({},se.ALLOWED_ATTR,Ze):fe,Ht=Es(se,"ALLOWED_NAMESPACES")?Bn({},se.ALLOWED_NAMESPACES,eg):bt,rn=Es(se,"ADD_URI_SAFE_ATTR")?Bn(ru(it),se.ADD_URI_SAFE_ATTR,Ze):it,nt=Es(se,"ADD_DATA_URI_TAGS")?Bn(ru(qe),se.ADD_DATA_URI_TAGS,Ze):qe,st=Es(se,"FORBID_CONTENTS")?Bn({},se.FORBID_CONTENTS,Ze):Be,le=Es(se,"FORBID_TAGS")?Bn({},se.FORBID_TAGS,Ze):{},Me=Es(se,"FORBID_ATTR")?Bn({},se.FORBID_ATTR,Ze):{},Rt=Es(se,"USE_PROFILES")?se.USE_PROFILES:!1,ae=se.ALLOW_ARIA_ATTR!==!1,he=se.ALLOW_DATA_ATTR!==!1,pe=se.ALLOW_UNKNOWN_PROTOCOLS||!1,Ne=se.ALLOW_SELF_CLOSE_IN_ATTR!==!1,_e=se.SAFE_FOR_TEMPLATES||!1,ge=se.SAFE_FOR_XML!==!1,me=se.WHOLE_DOCUMENT||!1,Pe=se.RETURN_DOM||!1,Ge=se.RETURN_DOM_FRAGMENT||!1,De=se.RETURN_TRUSTED_TYPE||!1,Qe=se.FORCE_BODY||!1,tt=se.SANITIZE_DOM!==!1,Ue=se.SANITIZE_NAMED_PROPS||!1,yt=se.KEEP_CONTENT!==!1,Nt=se.IN_PLACE||!1,ne=se.ALLOWED_URI_REGEXP||FR,Ut=se.NAMESPACE||pt,qt=se.MATHML_TEXT_INTEGRATION_POINTS||qt,Lt=se.HTML_INTEGRATION_POINTS||Lt,te=se.CUSTOM_ELEMENT_HANDLING||{},se.CUSTOM_ELEMENT_HANDLING&&an(se.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(te.tagNameCheck=se.CUSTOM_ELEMENT_HANDLING.tagNameCheck),se.CUSTOM_ELEMENT_HANDLING&&an(se.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(te.attributeNameCheck=se.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),se.CUSTOM_ELEMENT_HANDLING&&typeof se.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(te.allowCustomizedBuiltInElements=se.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),_e&&(he=!1),Ge&&(Pe=!0),Rt&&(j=Bn({},iM),ie=[],Rt.html===!0&&(Bn(j,rM),Bn(ie,aM)),Rt.svg===!0&&(Bn(j,tg),Bn(ie,ig),Bn(ie,zv)),Rt.svgFilters===!0&&(Bn(j,ng),Bn(ie,ig),Bn(ie,zv)),Rt.mathMl===!0&&(Bn(j,rg),Bn(ie,sM),Bn(ie,zv))),se.ADD_TAGS&&(j===Z&&(j=ru(j)),Bn(j,se.ADD_TAGS,Ze)),se.ADD_ATTR&&(ie===fe&&(ie=ru(ie)),Bn(ie,se.ADD_ATTR,Ze)),se.ADD_URI_SAFE_ATTR&&Bn(rn,se.ADD_URI_SAFE_ATTR,Ze),se.FORBID_CONTENTS&&(st===Be&&(st=ru(st)),Bn(st,se.FORBID_CONTENTS,Ze)),yt&&(j["#text"]=!0),me&&Bn(j,["html","head","body"]),j.table&&(Bn(j,["tbody"]),delete le.tbody),se.TRUSTED_TYPES_POLICY){if(typeof se.TRUSTED_TYPES_POLICY.createHTML!="function")throw sh('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof se.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw sh('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');I=se.TRUSTED_TYPES_POLICY,L=I.createHTML("")}else I===void 0&&(I=sV(m,i)),I!==null&&typeof L=="string"&&(L=I.createHTML(""));na&&na(se),St=se}},dt=Bn({},[...tg,...ng,...QG]),Jt=Bn({},[...rg,...YG]),ln=function(se){let ze=T(se);(!ze||!ze.tagName)&&(ze={namespaceURI:Ut,tagName:"template"});const mt=vp(se.tagName),vn=vp(ze.tagName);return Ht[se.namespaceURI]?se.namespaceURI===Je?ze.namespaceURI===pt?mt==="svg":ze.namespaceURI===Ct?mt==="svg"&&(vn==="annotation-xml"||qt[vn]):!!dt[mt]:se.namespaceURI===Ct?ze.namespaceURI===pt?mt==="math":ze.namespaceURI===Je?mt==="math"&&Lt[vn]:!!Jt[mt]:se.namespaceURI===pt?ze.namespaceURI===Je&&!Lt[vn]||ze.namespaceURI===Ct&&!qt[vn]?!1:!Jt[mt]&&(wt[mt]||!dt[mt]):!!(Et==="application/xhtml+xml"&&Ht[se.namespaceURI]):!1},Bt=function(se){ih(n.removed,{element:se});try{T(se).removeChild(se)}catch{y(se)}},En=function(se,ze){try{ih(n.removed,{attribute:ze.getAttributeNode(se),from:ze})}catch{ih(n.removed,{attribute:null,from:ze})}if(ze.removeAttribute(se),se==="is")if(Pe||Ge)try{Bt(ze)}catch{}else try{ze.setAttribute(se,"")}catch{}},Mn=function(se){let ze=null,mt=null;if(Qe)se="<remove></remove>"+se;else{const sn=nM(se,/^[\r\n\t ]+/);mt=sn&&sn[0]}Et==="application/xhtml+xml"&&Ut===pt&&(se='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+se+"</body></html>");const vn=I?I.createHTML(se):se;if(Ut===pt)try{ze=new p().parseFromString(vn,Et)}catch{}if(!ze||!ze.documentElement){ze=D.createDocument(Ut,"template",null);try{ze.documentElement.innerHTML=Pt?L:vn}catch{}}const Sn=ze.body||ze.documentElement;return se&&mt&&Sn.insertBefore(t.createTextNode(mt),Sn.childNodes[0]||null),Ut===pt?k.call(ze,me?"html":"body")[0]:me?ze.documentElement:Sn},Ke=function(se){return O.call(se.ownerDocument||se,se,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},ht=function(se){return se instanceof f&&(typeof se.nodeName!="string"||typeof se.textContent!="string"||typeof se.removeChild!="function"||!(se.attributes instanceof d)||typeof se.removeAttribute!="function"||typeof se.setAttribute!="function"||typeof se.namespaceURI!="string"||typeof se.insertBefore!="function"||typeof se.hasChildNodes!="function")},Fe=function(se){return typeof o=="function"&&se instanceof o};function Dt(ot,se,ze){Vv(ot,mt=>{mt.call(n,se,ze,St)})}const Gt=function(se){let ze=null;if(Dt(G.beforeSanitizeElements,se,null),ht(se))return Bt(se),!0;const mt=Ze(se.nodeName);if(Dt(G.uponSanitizeElement,se,{tagName:mt,allowedTags:j}),se.hasChildNodes()&&!Fe(se.firstElementChild)&&Wi(/<[/\w]/g,se.innerHTML)&&Wi(/<[/\w]/g,se.textContent)||se.nodeType===lh.progressingInstruction||ge&&se.nodeType===lh.comment&&Wi(/<[/\w]/g,se.data))return Bt(se),!0;if(!j[mt]||le[mt]){if(!le[mt]&&fn(mt)&&(te.tagNameCheck instanceof RegExp&&Wi(te.tagNameCheck,mt)||te.tagNameCheck instanceof Function&&te.tagNameCheck(mt)))return!1;if(yt&&!st[mt]){const vn=T(se)||se.parentNode,Sn=C(se)||se.childNodes;if(Sn&&vn){const sn=Sn.length;for(let zn=sn-1;zn>=0;--zn){const hr=g(Sn[zn],!0);hr.__removalCount=(se.__removalCount||0)+1,vn.insertBefore(hr,S(se))}}}return Bt(se),!0}return se instanceof l&&!ln(se)||(mt==="noscript"||mt==="noembed"||mt==="noframes")&&Wi(/<\/no(script|embed|frames)/i,se.innerHTML)?(Bt(se),!0):(_e&&se.nodeType===lh.text&&(ze=se.textContent,Vv([V,H,F],vn=>{ze=ah(ze,vn," ")}),se.textContent!==ze&&(ih(n.removed,{element:se.cloneNode()}),se.textContent=ze)),Dt(G.afterSanitizeElements,se,null),!1)},zt=function(se,ze,mt){if(tt&&(ze==="id"||ze==="name")&&(mt in t||mt in Ot))return!1;if(!(he&&!Me[ze]&&Wi(z,ze))){if(!(ae&&Wi(K,ze))){if(!ie[ze]||Me[ze]){if(!(fn(se)&&(te.tagNameCheck instanceof RegExp&&Wi(te.tagNameCheck,se)||te.tagNameCheck instanceof Function&&te.tagNameCheck(se))&&(te.attributeNameCheck instanceof RegExp&&Wi(te.attributeNameCheck,ze)||te.attributeNameCheck instanceof Function&&te.attributeNameCheck(ze))||ze==="is"&&te.allowCustomizedBuiltInElements&&(te.tagNameCheck instanceof RegExp&&Wi(te.tagNameCheck,mt)||te.tagNameCheck instanceof Function&&te.tagNameCheck(mt))))return!1}else if(!rn[ze]){if(!Wi(ne,ah(mt,$,""))){if(!((ze==="src"||ze==="xlink:href"||ze==="href")&&se!=="script"&&qG(mt,"data:")===0&&nt[se])){if(!(pe&&!Wi(ee,ah(mt,$,"")))){if(mt)return!1}}}}}}return!0},fn=function(se){return se!=="annotation-xml"&&nM(se,Q)},Dn=function(se){Dt(G.beforeSanitizeAttributes,se,null);const{attributes:ze}=se;if(!ze)return;const mt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ie,forceKeepAttr:void 0};let vn=ze.length;for(;vn--;){const Sn=ze[vn],{name:sn,namespaceURI:zn,value:hr}=Sn,fr=Ze(sn);let It=sn==="value"?hr:KG(hr);if(mt.attrName=fr,mt.attrValue=It,mt.keepAttr=!0,mt.forceKeepAttr=void 0,Dt(G.uponSanitizeAttribute,se,mt),It=mt.attrValue,Ue&&(fr==="id"||fr==="name")&&(En(sn,se),It=Ye+It),ge&&Wi(/((--!?|])>)|<\/(style|title)/i,It)){En(sn,se);continue}if(mt.forceKeepAttr||(En(sn,se),!mt.keepAttr))continue;if(!Ne&&Wi(/\/>/i,It)){En(sn,se);continue}_e&&Vv([V,H,F],gn=>{It=ah(It,gn," ")});const pn=Ze(se.nodeName);if(zt(pn,fr,It)){if(I&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!zn)switch(m.getAttributeType(pn,fr)){case"TrustedHTML":{It=I.createHTML(It);break}case"TrustedScriptURL":{It=I.createScriptURL(It);break}}try{zn?se.setAttributeNS(zn,sn,It):se.setAttribute(sn,It),ht(se)?Bt(se):tM(n.removed)}catch{}}}Dt(G.afterSanitizeAttributes,se,null)},Vn=function ot(se){let ze=null;const mt=Ke(se);for(Dt(G.beforeSanitizeShadowDOM,se,null);ze=mt.nextNode();)Dt(G.uponSanitizeShadowNode,ze,null),!Gt(ze)&&(ze.content instanceof a&&ot(ze.content),Dn(ze));Dt(G.afterSanitizeShadowDOM,se,null)};return n.sanitize=function(ot){let se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ze=null,mt=null,vn=null,Sn=null;if(Pt=!ot,Pt&&(ot="<!-->"),typeof ot!="string"&&!Fe(ot))if(typeof ot.toString=="function"){if(ot=ot.toString(),typeof ot!="string")throw sh("dirty is not a string, aborting")}else throw sh("toString is not a function");if(!n.isSupported)return ot;if(Le||xt(se),n.removed=[],typeof ot=="string"&&(Nt=!1),Nt){if(ot.nodeName){const hr=Ze(ot.nodeName);if(!j[hr]||le[hr])throw sh("root node is forbidden and cannot be sanitized in-place")}}else if(ot instanceof o)ze=Mn("<!---->"),mt=ze.ownerDocument.importNode(ot,!0),mt.nodeType===lh.element&&mt.nodeName==="BODY"||mt.nodeName==="HTML"?ze=mt:ze.appendChild(mt);else{if(!Pe&&!_e&&!me&&ot.indexOf("<")===-1)return I&&De?I.createHTML(ot):ot;if(ze=Mn(ot),!ze)return Pe?null:De?L:""}ze&&Qe&&Bt(ze.firstChild);const sn=Ke(Nt?ot:ze);for(;vn=sn.nextNode();)Gt(vn)||(vn.content instanceof a&&Vn(vn.content),Dn(vn));if(Nt)return ot;if(Pe){if(Ge)for(Sn=R.call(ze.ownerDocument);ze.firstChild;)Sn.appendChild(ze.firstChild);else Sn=ze;return(ie.shadowroot||ie.shadowrootmode)&&(Sn=P.call(r,Sn,!0)),Sn}let zn=me?ze.outerHTML:ze.innerHTML;return me&&j["!doctype"]&&ze.ownerDocument&&ze.ownerDocument.doctype&&ze.ownerDocument.doctype.name&&Wi(HR,ze.ownerDocument.doctype.name)&&(zn="<!DOCTYPE "+ze.ownerDocument.doctype.name+`>
`+zn),_e&&Vv([V,H,F],hr=>{zn=ah(zn,hr," ")}),I&&De?I.createHTML(zn):zn},n.setConfig=function(){let ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};xt(ot),Le=!0},n.clearConfig=function(){St=null,Le=!1},n.isValidAttribute=function(ot,se,ze){St||xt({});const mt=Ze(ot),vn=Ze(se);return zt(mt,vn,ze)},n.addHook=function(ot,se){typeof se=="function"&&ih(G[ot],se)},n.removeHook=function(ot){return tM(G[ot])},n.removeHooks=function(ot){G[ot]=[]},n.removeAllHooks=function(){G=lM()},n}var GR=BR(),VR="sendbird-mention-user-label",cC="sendbird-text-message-item-body",zR="sendbird-og-message-item-body__text-bubble";function uy(e){var n=e.userId,t=e.nickname,r='<span data-userid="'.concat(n,'" data-sb-mention="true" class="').concat(VR,'">').concat(t,"</span>"),i=GR(window),a=i.sanitize(r),s=a.split(" "),o=s[0],l=s.slice(1),u=Ae([o,'contenteditable="false"'],l,!0).join(" ");return u}var tf=function(e){return e===void 0&&(e=""),e?e.replace(/[<>]/g,function(n){return n==="<"?"&#60;":"&#62;"}):""},pp=function(e){return e?Array.from(e):[]};function oV(e){var n;return e&&((n=e.isGroupChannel)===null||n===void 0?void 0:n.call(e))&&!e.isBroadcast&&!e.isSuper}function ag(e){return e.nodeType===sy.ElementNode}function uM(e){var n="",t="";return e.forEach(function(r){if(ag(r)&&r.nodeName===J_.Span){var i=r.innerText,a=r.dataset,s=a===void 0?{}:a,o=s.userid,l=o===void 0?"":o;n+=i,t+="".concat(Gh,"{").concat(l,"}")}else if(ag(r)&&r.nodeName===J_.Br)n+=`
`,t+=`
`;else if(ag(r)&&r.nodeName===J_.Div){var u=r.textContent,d=u===void 0?"":u;n+=`
`.concat(d),t+=`
`.concat(d)}else{var f=r.textContent,d=f===void 0?"":f;n+=d,t+=d}}),{messageText:n,mentionTemplate:t}}function lV(e){var n=e.map(function(t){var r=t.text,i=t.userId;return i?uy({userId:i,nickname:r}):tf(r)}).join(" ").concat(" ");document.execCommand("insertHTML",!1,n)}var uV="sendbird-word",jR="sendbird-word__mention",qR="sendbird-mention-user-label",KR=".".concat(jR,", .").concat(qR);function cM(e,n){var t=Ae([e],Array.from(e.querySelectorAll(n)),!0).find(function(r){return r.matches(n)});return t}function cV(e){var n=cM(e,".".concat(zR));if(n)return pp(n.childNodes);var t=cM(e,".".concat(cC));return pp(t?t.childNodes:e.childNodes)}function dV(e){return!!(e!=null&&e.querySelector(KR))}var $R=function(e){var n="";return e.forEach(function(t){var r=t.querySelectorAll(".".concat(uV));r.length>0&&(n+=$R(Array.from(r))+" "),n+=t.innerText+" "}),n};function hV(e){var n=e==null?void 0:e.reduce(function(t,r){var i,a,s,o=r==null?void 0:r.innerText;if(r instanceof Text&&(s=!1,o=(i=r.textContent)!==null&&i!==void 0?i:""),r instanceof HTMLElement&&(s=r.classList.contains(jR)||r.classList.contains(qR)?r:r.querySelector(KR)),s){var l=r==null?void 0:r.innerText,u=(a=s.dataset)===null||a===void 0?void 0:a.userid;return Ae(Ae([],t,!0),[{text:l,userId:u}],!1)}return Ae(Ae([],t,!0),[{text:o}],!1)},[]);return n}function fV(e,n){var t={},r=n.members;return e.forEach(function(i){if(i.userId){var a=r.find(function(s){return s.userId===i.userId});a&&(t[i.userId]=a)}}),Object.values(t)}function dM(e){var n=window.getSelection();if(n&&n.rangeCount>0){var t=n.getRangeAt(n.rangeCount-1);t.deleteContents();var r=document.createTextNode(e+"​");t.insertNode(r),t.setStart(r,r.length),t.collapse(!0),n.removeAllRanges(),n.addRange(t)}}function vV(e){var n=document.createElement("div");return n.innerHTML=e,n}function pV(e){var n=e.ref,t=e.setIsInput,r=e.channel,i=e.setMentionedUsers;return N.useCallback(function(a){a.preventDefault();var s=a.clipboardData.getData("text/html"),o=a.clipboardData.getData("text")||mV(a);if(!s){dM(tf(o)),t(!0);return}var l=GR(window),u=l.sanitize(s),d=vV(u);if(!dV(d)){var f=$R(Array.from(d.children));dM(tf(f)),d.remove(),t(!0);return}var p=cV(d),m=hV(p),E=r.isGroupChannel()?fV(m,r):[];i(E),lV(m),d.remove(),t(!0)},[n,t,r,i])}function mV(e){var n=e.clipboardData.getData("text/uri-list");return n.length===0?"":n.split(`
`).reduce(function(t,r){var i=r.trim();return i!==""&&!i.startsWith("#")&&(t+=i+`
`),t},"")}var pf="@",Lr={string:"string",mention:"mention",url:"url",undetermined:"undetermined",markdown:"markdown"},_V=/\[(.*?)\]\((.*?)\)|\*\*(.*?)\*\*/g;function gV(e,n){var t=n||pf;return RegExp("(".concat(e.map(function(r){var i=r.userId.replace(/([.*+?^${}()|[\]\\])/g,"\\$1");return"".concat(t,"\\{").concat(i,"\\}")}).join("|"),")"),"g")}function EV(e){var n=e.tokens,t=e.mentionedUsers,r=t===void 0?[]:t,i=e.templatePrefix,a=i===void 0?pf:i;if(!(r!=null&&r.length))return n;var s=gV(r,a),o=n.map(function(l){if(l.type!==Lr.undetermined)return l;var u=l.value,d=u.split(s),f=d.map(function(p){if(p.match(s)){var m=r.find(function(g){return"@{".concat(g==null?void 0:g.userId,"}")===p}),E=(m==null?void 0:m.nickname)||"(No name)";return{value:E,type:Lr.mention,userId:m==null?void 0:m.userId}}else return{value:p,type:Lr.undetermined}});return f}).flat();return o}function yV(e){var n=/(?:https?:\/\/|www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.(xn--)?[a-z]{2,20}\b([-a-zA-Z0-9@:%_+[\],.~#?&/=]*[-a-zA-Z0-9@:%_+~#?&/=])*/g,t=e.map(function(r){if(r.type!==Lr.undetermined)return r;var i=r.value,a=i===void 0?"":i,s=Array.from(a.matchAll(n)),o=s.map(function(d){var f,p=d[0],m=(f=d.index)!==null&&f!==void 0?f:0,E=m+p.length;return{text:p,start:m,end:E}}),l=[{value:a,type:Lr.string}],u=0;return o.forEach(function(d){var f=d.text,p=d.start,m=d.end,E=l.pop().value,g=E.slice(0,p-u),y=f,S=E.slice(m-u);g.length>0&&l.push({value:g,type:Lr.string}),l.push({value:y,type:Lr.url}),S.length>0&&l.push({value:S,type:Lr.string}),u=m}),l}).flat();return t}function dC(e){var n=e,t=[];return n.forEach(function(r){if(r.type===Lr.mention||r.type===Lr.markdown){t.push(r);return}var i=r.value,a=Array.from(i.matchAll(_V)),s=a.map(function(d){var f,p=d[0],m=(f=d.index)!==null&&f!==void 0?f:0,E=m+p.length;return{text:p,start:m,end:E,groups:d.filter(function(g){return typeof g=="string"})}}),o=i,l=0;if(s.forEach(function(d){var f=d.text,p=d.start,m=d.end,E=d.groups,g={type:Lr.undetermined,value:o.slice(0,p-l)};t.push(g);var y;f.startsWith("[")?y="url":f.startsWith("**")&&(y="bold");var S={type:Lr.markdown,markdownType:y,value:f,groups:E};t.push(S),o=i.slice(m),l=m}),o){var u={type:Lr.undetermined,value:o};t.push(u)}}),t}function WR(e){var n=e.reduce(function(t,r){var i=t[t.length-1];return(i==null?void 0:i.type)===Lr.string&&r.type===Lr.string?(i.value="".concat(i.value).concat(r.value),t):Ae(Ae([],t,!0),[r],!1)},[]);return n}function Dl(e){var n=e.messageText,t=e.mentionedUsers,r=t===void 0?[]:t,i=e.templatePrefix,a=i===void 0?pf:i,s=e.includeMarkdown,o=s===void 0?!1:s,l=[{type:Lr.undetermined,value:n}],u=EV({tokens:l,mentionedUsers:r,templatePrefix:a}),d=yV(o?dC(u):u),f=WR(d);return f}function CV(e){var n=[{type:Lr.undetermined,value:e}],t=dC(n);return QR(t)}function QR(e){var n=e.map(function(t){return t.type===Lr.markdown?QR(cy({messageText:t.groups[1]})):t.value});return n.join("")}function cy(e){var n=e.messageText,t=[{type:Lr.undetermined,value:n}],r=WR(dC(t));return r}function bV(e){var n=" ",t=e.split(`
`),r=t.map(function(a){var s,o,l=((s=a.match(/^\s*/))===null||s===void 0?void 0:s[0])||"",u=((o=a.match(/\s*$/))===null||o===void 0?void 0:o[0])||"",d=l.replace(/ /g,n),f=u.replace(/ /g,n);return d+a.trim()+f}),i=r.join(`
`);return i}var Kp;(function(e){e.BASE="base",e.GROUP="group",e.OPEN="open"})(Kp||(Kp={}));var SV=function(e){var n=e.channel,t=e.config,r=si(n==null?void 0:n.channelType).with(Kp.GROUP,function(){var i;return(i=t==null?void 0:t.groupChannel)===null||i===void 0?void 0:i.enableDocument}).with(Kp.OPEN,function(){var i;return(i=t==null?void 0:t.openChannel)===null||i===void 0?void 0:i.enableDocument}).otherwise(function(){return!0});return r},TV="sendbird-message-input-text-field",Qi=function(){return null},sg=function(e){e&&e.current&&(e.current.innerHTML="")},hM={targetString:"",startNodeIndex:null,startOffsetIndex:null,endNodeIndex:null,endOffsetIndex:null},Ku=v.forwardRef(function(e,n){var t,r,i,a,s,o=e.channel,l=e.className,u=l===void 0?"":l,d=e.messageFieldId,f=d===void 0?"":d,p=e.isEdit,m=p===void 0?!1:p,E=e.isMobile,g=E===void 0?!1:E,y=e.isMentionEnabled,S=y===void 0?!1:y,C=e.isVoiceMessageEnabled,T=C===void 0?!0:C,I=e.isSelectingMultipleFilesEnabled,L=I===void 0?!1:I,D=e.disabled,O=D===void 0?!1:D,R=e.message,k=R===void 0?null:R,P=e.placeholder,G=P===void 0?"":P,V=e.maxLength,H=V===void 0?5e3:V,F=e.onFileUpload,z=F===void 0?Qi:F,K=e.onSendMessage,ee=K===void 0?Qi:K,$=e.onUpdateMessage,Q=$===void 0?Qi:$,ne=e.onCancelEdit,j=ne===void 0?Qi:ne,Z=e.onStartTyping,ie=Z===void 0?Qi:Z,fe=e.channelUrl,te=fe===void 0?"":fe,le=e.mentionSelectedUser,Me=le===void 0?null:le,ae=e.onUserMentioned,he=ae===void 0?Qi:ae,pe=e.onMentionStringChange,Ne=pe===void 0?Qi:pe,_e=e.onMentionedUserIdsUpdated,ge=_e===void 0?Qi:_e,me=e.onVoiceMessageIconClick,Le=me===void 0?Qi:me,Qe=e.onKeyUp,Pe=Qe===void 0?Qi:Qe,Ge=e.onKeyDown,De=Ge===void 0?Qi:Ge,tt=e.renderFileUploadIcon,Ue=tt===void 0?Qi:tt,Ye=e.renderVoiceMessageIcon,yt=Ye===void 0?Qi:Ye,Nt=e.renderSendMessageIcon,Rt=Nt===void 0?Qi:Nt,st=e.setMentionedUsers,Be=st===void 0?Qi:st,nt=e.acceptableMimeTypes,qe=n&&"current"in n?n:N.useRef(null),rn=N.useRef(null),it=f||TV,Ct=Ft().stringSet,Je=Tt(),pt=Je.config,Ut=Je.eventHandlers,Pt=SV({channel:o,config:pt}),Ht=N.useRef(),bt=N.useState(!1),qt=bt[0],Lt=bt[1],wt=N.useState([]),Et=wt[0],xe=wt[1],ye=N.useState(x({},hM)),Ze=ye[0],St=ye[1],Ot=e==null?void 0:e.value;N.useEffect(function(){var Ke=qe==null?void 0:qe.current;xe([]),Lt(Ke!=null&&Ke.textContent?Ke.textContent.trim().length>0:!1)},[Ot]),N.useEffect(function(){m||(Lt(!1),sg(qe))},[te]),N.useEffect(function(){var Ke,ht;if(m&&(k!=null&&k.messageId)){var Fe=qe==null?void 0:qe.current;if(S&&(k!=null&&k.mentionedUsers)&&k.mentionedUsers.length>0&&(k!=null&&k.mentionedMessageTemplate)&&k.mentionedMessageTemplate.length>0){var Dt=k.mentionedUsers,Gt=Dt===void 0?[]:Dt,zt=Dl({messageText:k==null?void 0:k.mentionedMessageTemplate,mentionedUsers:Gt,includeMarkdown:o.isGroupChannel()&&pt.groupChannel.enableMarkdownForUserMessage});Fe&&(Fe.innerHTML=zt.map(function(fn){if(fn.type===Lr.mention){var Dn=Gt.find(function(ot){return ot.userId===fn.userId}),Vn="".concat(pf).concat((Dn==null?void 0:Dn.nickname)||fn.value||Ct.MENTION_NAME__NO_NAME);return uy({userId:fn.userId,nickname:Vn})}return tf(fn.value)}).join(""))}else{try{Fe&&(Fe.innerHTML=(Ke=tf(k==null?void 0:k.message))!==null&&Ke!==void 0?Ke:"")}catch{}xe([])}Lt(Fe!=null&&Fe.textContent?((ht=Fe==null?void 0:Fe.textContent)===null||ht===void 0?void 0:ht.trim().length)>0:!1)}},[m,k]);var an=N.useCallback(function(){var Ke,ht=qe==null?void 0:qe.current;if(S&&ht){var Fe=Array.from(ht.getElementsByClassName("sendbird-mention-user-label")).map(function(Dt){var Gt;return(Gt=Dt==null?void 0:Dt.dataset)===null||Gt===void 0?void 0:Gt.userid});(!b7(Et,Fe)||Fe.length===0)&&(ge(Fe),xe(Fe))}Lt(ht!=null&&ht.textContent?((Ke=ht.textContent)===null||Ke===void 0?void 0:Ke.trim().length)>0:!1)},[Ze,S]);N.useEffect(function(){var Ke,ht,Fe,Dt;if(S&&Me){var Gt=Ze.targetString,zt=Ze.startNodeIndex,fn=Ze.startOffsetIndex,Dn=Ze.endNodeIndex,Vn=Ze.endOffsetIndex,ot=qe==null?void 0:qe.current;if(Gt&&zt!==null&&fn!==null&&Vn!==null&&Dn!==null&&ot){var se=pp(ot==null?void 0:ot.childNodes),ze=(ht=(Ke=se[zt])===null||Ke===void 0?void 0:Ke.textContent)!==null&&ht!==void 0?ht:"",mt=document.createTextNode(ze.slice(0,fn)),vn=(Dt=(Fe=se[Dn])===null||Fe===void 0?void 0:Fe.textContent)!==null&&Dt!==void 0?Dt:"",Sn=Vn&&document.createTextNode(" ".concat(vn.slice(Vn))),sn=uy({userId:Me==null?void 0:Me.userId,nickname:"".concat(Gh).concat((Me==null?void 0:Me.nickname)||Ct.MENTION_NAME__NO_NAME)}),zn=document.createElement("div");zn.innerHTML=sn;var hr=Ae(Ae(Ae([],se.slice(0,zt),!0),[mt,zn.childNodes[0],Sn],!1),se.slice(Dn+1),!0);if(ot&&(ot.innerHTML="",hr.forEach(function(pn){pn&&ot.appendChild(pn)})),he(Me),window.getSelection||document.getSelection){var fr=window.getSelection()||document.getSelection();fr==null||fr.removeAllRanges();var It=new Range;It.selectNodeContents(ot),It.setStart(ot.childNodes[zt+2],1),It.setEnd(ot.childNodes[zt+2],1),It.collapse(!1),fr==null||fr.addRange(It),ot.focus()}St(x({},hM)),an()}}},[Me,S]);var xt=N.useCallback(function(){var Ke,ht,Fe=((Ke=window==null?void 0:window.getSelection)===null||Ke===void 0?void 0:Ke.call(window))||((ht=document==null?void 0:document.getSelection)===null||ht===void 0?void 0:ht.call(document)),Dt=qe==null?void 0:qe.current;if((Fe==null?void 0:Fe.anchorNode)===Dt&&Ne(""),S&&Dt&&Fe&&Fe.anchorNode===Fe.focusNode&&Fe.anchorOffset===Fe.focusOffset)for(var Gt="",zt=null,fn=null,Dn=function(se){var ze=Dt.childNodes[se];if(ze.nodeType===sy.TextNode){var mt=function(){var zn;return ze===Fe.anchorNode?ze!=null&&ze.textContent?ze==null?void 0:ze.textContent.slice(0,Fe.anchorOffset):"":(zn=ze==null?void 0:ze.textContent)!==null&&zn!==void 0?zn:""}();if(Gt.length>0)Gt+=mt;else{for(var vn=mt.lastIndexOf(Gh),Sn=vn-1;Sn>-1&&mt[Sn]===Gh;Sn-=1)vn=Sn;vn>-1&&(Gt=mt,zt=se,fn=vn)}}else Gt="",zt=null,fn=null;if(ze===Fe.anchorNode){var sn=Gt&&fn!==null?Gt.slice(fn):"";return St({targetString:sn,startNodeIndex:zt,startOffsetIndex:fn,endNodeIndex:se,endOffsetIndex:Fe.anchorOffset}),Ne(sn),{value:void 0}}},Vn=0;Vn<Dt.childNodes.length;Vn+=1){var ot=Dn(Vn);if(typeof ot=="object")return ot.value}},[S]),dt=function(){var Ke,ht;try{var Fe=qe==null?void 0:qe.current;if(!m&&(Fe!=null&&Fe.textContent)){var Dt=uM(Fe.childNodes),Gt=Dt.messageText,zt=Dt.mentionTemplate,fn={message:Gt,mentionTemplate:zt};ee(fn),sg(qe),iN(navigator.userAgent)?(rn.current&&rn.current.focus(),requestAnimationFrame(function(){return Fe.focus()})):Fe.focus(),Lt(!1)}}catch(Dn){(ht=(Ke=Ut==null?void 0:Ut.message)===null||Ke===void 0?void 0:Ke.onSendMessageFailed)===null||ht===void 0||ht.call(Ke,k,Dn)}},Jt=!(!((r=(t=qe==null?void 0:qe.current)===null||t===void 0?void 0:t.textContent)===null||r===void 0)&&r.trim()),ln=function(){var Ke,ht;try{var Fe=qe==null?void 0:qe.current,Dt=k==null?void 0:k.messageId;if(m&&Dt&&Fe){var Gt=uM(Fe.childNodes),zt=Gt.messageText,fn=Gt.mentionTemplate,Dn={messageId:Dt,message:zt,mentionTemplate:fn};Q(Dn),sg(qe)}}catch(Vn){(ht=(Ke=Ut==null?void 0:Ut.message)===null||Ke===void 0?void 0:Ke.onUpdateMessageFailed)===null||ht===void 0||ht.call(Ke,k,Vn)}},Bt=pV({ref:qe,setMentionedUsers:Be,channel:o,setIsInput:Lt}),En=function(Ke){var ht,Fe,Dt=Ke.currentTarget.files;try{Dt&&z(Array.from(Dt))}catch(Gt){(Fe=(ht=Ut==null?void 0:Ut.message)===null||ht===void 0?void 0:ht.onFileUploadFailed)===null||Fe===void 0||Fe.call(ht,Gt)}finally{Ke.target.value=""}},Mn=function(){var Ke,ht=qe,Fe=window.getSelection();if(!(!Fe||Fe.rangeCount===0)){var Dt=Fe.getRangeAt(Fe.rangeCount-1),Gt=Dt.getBoundingClientRect(),zt=(Ke=ht.current)===null||Ke===void 0?void 0:Ke.getBoundingClientRect();if(!(!zt||!ht.current)){if(Gt.bottom>zt.bottom){var fn=Math.min(Gt.bottom-zt.bottom,ht.current.scrollHeight-ht.current.clientHeight);ht.current.scrollTop+=fn}else if(Gt.top<zt.top){var fn=Math.min(zt.top-Gt.top,ht.current.scrollTop);ht.current.scrollTop-=fn}}}};return v.createElement("form",{className:Zt.apply(void 0,Ae(Ae([],Array.isArray(u)?u:[u],!1),[m&&"sendbird-message-input__edit",O&&"sendbird-message-input-form__disabled"],!1))},v.createElement("div",{className:Zt("sendbird-message-input",O&&"sendbird-message-input__disabled"),"data-testid":"sendbird-message-input"},iN(navigator.userAgent)&&v.createElement("input",{id:"ghost-input-reset-ime-cjk",ref:rn,style:{opacity:0,padding:0,margin:0,height:0,border:"none",position:"absolute",top:-9999},defaultValue:"_"}),v.createElement("div",{id:"".concat(it).concat(m?k==null?void 0:k.messageId:""),className:"sendbird-message-input--textarea ".concat(it),contentEditable:!O,role:"textbox","aria-label":"Text Input",ref:qe,disabled:O,maxLength:H,onKeyDown:function(Ke){var ht,Fe,Dt,Gt,zt=De(Ke);zt?Ke.preventDefault():(!Ke.shiftKey&&Ke.key===Yr.Enter&&!g&&(!((ht=qe==null?void 0:qe.current)===null||ht===void 0)&&ht.textContent)&&qe.current.textContent.trim().length>0&&((Fe=Ke==null?void 0:Ke.nativeEvent)===null||Fe===void 0?void 0:Fe.isComposing)!==!0&&(Ke.preventDefault(),dt()),Ke.key===Yr.Backspace&&((Gt=(Dt=qe==null?void 0:qe.current)===null||Dt===void 0?void 0:Dt.childNodes)===null||Gt===void 0?void 0:Gt.length)===2&&!qe.current.childNodes[0].textContent&&qe.current.childNodes[1].nodeType===sy.ElementNode&&qe.current.removeChild(qe.current.childNodes[1]))},onKeyUp:function(Ke){var ht=Pe(Ke);ht?Ke.preventDefault():xt()},onClick:function(){xt()},onInput:function(){var Ke;ie(),Lt(!((Ke=qe==null?void 0:qe.current)===null||Ke===void 0)&&Ke.textContent?qe.current.textContent.trim().length>0:!1),an()},onPaste:function(Ke){Bt(Ke),setTimeout(Mn)}}),((s=(a=(i=qe==null?void 0:qe.current)===null||i===void 0?void 0:i.textContent)===null||a===void 0?void 0:a.length)!==null&&s!==void 0?s:0)===0&&v.createElement(Ie,{className:"sendbird-message-input--placeholder",type:Ce.BODY_1,color:O?de.ONBACKGROUND_4:de.ONBACKGROUND_3},G||Ct.MESSAGE_INPUT__PLACE_HOLDER),!m&&qt&&v.createElement(fa,{className:"sendbird-message-input--send",height:"32px",width:"32px",onClick:function(){return dt()},testID:"sendbird-message-input-send-button"},(Rt==null?void 0:Rt())||v.createElement(We,{type:Se.SEND,fillColor:O?Ve.ON_BACKGROUND_4:Ve.PRIMARY,width:"20px",height:"20px"})),!m&&!qt&&((Ue==null?void 0:Ue())||Pt&&v.createElement(fa,{className:Zt("sendbird-message-input--attach",T&&"is-voice-message-enabled"),height:"32px",width:"32px",onClick:function(){var Ke,ht;(ht=(Ke=Ht==null?void 0:Ht.current)===null||Ke===void 0?void 0:Ke.click)===null||ht===void 0||ht.call(Ke)}},v.createElement(We,{type:Se.ATTACH,fillColor:O?Ve.ON_BACKGROUND_4:Ve.CONTENT_INVERSE,width:"20px",height:"20px"}),v.createElement("input",{className:"sendbird-message-input--attach-input",type:"file",ref:Ht,onChange:function(Ke){return En(Ke)},accept:i7(nt),multiple:L&&oV(o)}))),T&&!m&&!qt&&v.createElement(fa,{className:"sendbird-message-input--voice-message",width:"32px",height:"32px",onClick:Le},(yt==null?void 0:yt())||v.createElement(We,{type:Se.AUDIO_ON_LINED,fillColor:O?Ve.ON_BACKGROUND_4:Ve.CONTENT_INVERSE,width:"20px",height:"20px"}))),m&&v.createElement("div",{className:"sendbird-message-input--edit-action","data-testid":"sendbird-message-input--edit-action"},v.createElement(Oi,{className:"sendbird-message-input--edit-action__cancel",type:Gn.SECONDARY,size:va.SMALL,onClick:j},Ct.BUTTON__CANCEL),v.createElement(Oi,{className:"sendbird-message-input--edit-action__save",type:Gn.PRIMARY,size:va.SMALL,disabled:Jt,onClick:function(){return ln()}},Ct.BUTTON__SAVE)))});function fM(e){Cr(1,arguments);var n=ta(e);return n.setHours(0,0,0,0),n}function gm(e,n){Cr(2,arguments);var t=fM(e),r=fM(n);return t.getTime()===r.getTime()}function hC(e){return Cr(1,arguments),gm(e,Date.now())}function NV(e,n){Cr(2,arguments);var t=ta(e),r=ta(n);return t.getFullYear()===r.getFullYear()}function fC(e){return Cr(1,arguments),NV(e,Date.now())}function IV(e,n){Cr(2,arguments);var t=ta(e),r=Do(n);return isNaN(r)?new Date(NaN):(r&&t.setDate(t.getDate()+r),t)}function MV(e,n){Cr(2,arguments);var t=Do(n);return IV(e,-t)}function vC(e){return Cr(1,arguments),gm(e,MV(Date.now(),1))}var YR=function(e,n,t){var r;return t===void 0&&(t=zu),!(e!=null&&e.name)&&!(e!=null&&e.members)?t.NO_TITLE:e!=null&&e.name&&e.name!=="Group Channel"?e.name:((r=e==null?void 0:e.members)===null||r===void 0?void 0:r.length)===1?t.NO_MEMBERS:((e==null?void 0:e.members)||[]).filter(function(i){var a=i.userId;return a!==n}).map(function(i){var a=i.nickname;return a||t.NO_NAME}).join(", ")},XR=function(e){var n,t=e.channel,r=e.locale,i=e.stringSet,a=i===void 0?zu:i,s=(n=t==null?void 0:t.lastMessage)===null||n===void 0?void 0:n.createdAt,o=r?{locale:r}:null;return s?hC(s)?wr(s,a.DATE_FORMAT__LAST_MESSAGE_CREATED_AT__TODAY,o):vC(s)?a.MESSAGE_STATUS__YESTERDAY||"Yesterday":fC(s)?wr(s,a.DATE_FORMAT__LAST_MESSAGE_CREATED_AT__THIS_YEAR,o):wr(s,a.DATE_FORMAT__LAST_MESSAGE_CREATED_AT__PREVIOUS_YEAR,o):""},AV=function(e){return e!=null&&e.memberCount?e.memberCount:0},vM=function(e,n){var t,r,i,a,s,o;return n===void 0&&(n=zu),Gu(e)?(t=n==null?void 0:n.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_GIF)!==null&&t!==void 0?t:"":As(e)?(r=n==null?void 0:n.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_PHOTO)!==null&&r!==void 0?r:"":Oo(e)?(i=n==null?void 0:n.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_VIDEO)!==null&&i!==void 0?i:"":Xy(e)?(a=n==null?void 0:n.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_AUDIO)!==null&&a!==void 0?a:"":U2(e)?(s=n==null?void 0:n.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_VOICE_MESSAGE)!==null&&s!==void 0?s:"":(o=n==null?void 0:n.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_GENERAL)!==null&&o!==void 0?o:""},wV=function(e,n){var t,r,i,a;if(e===void 0&&(e=null),n===void 0&&(n=zu),!e)return"";if(Vp(e))return n.CHANNEL_PREVIEW_LAST_MESSAGE_TEMPLATE_MESSAGE;if(e.isFileMessage())return vM(e.type,n);if(e.isMultipleFilesMessage()){var s=(r=(t=e.fileInfoList)===null||t===void 0?void 0:t[0])===null||r===void 0?void 0:r.mimeType;return As(s)||Gu(s)?(i=n==null?void 0:n.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_PHOTO)!==null&&i!==void 0?i:"":vM(s,n)}return(a=e.message)!==null&&a!==void 0?a:""},RV=function(e,n){return n===void 0&&(n=zu),e!=null&&e.lastMessage?wV(e==null?void 0:e.lastMessage,n):""},pM=function(e){return e!=null&&e.unreadMessageCount?e.unreadMessageCount:0},ll,ul,OV=(ll={},ll[lr.SENT]=Se.DONE,ll[lr.DELIVERED]=Se.DONE_ALL,ll[lr.READ]=Se.DONE_ALL,ll[lr.FAILED]=Se.ERROR,ll[lr.PENDING]=void 0,ll[lr.NONE]=void 0,ll),DV=(ul={},ul[lr.SENT]=Ve.SENT,ul[lr.DELIVERED]=Ve.SENT,ul[lr.READ]=Ve.READ,ul[lr.FAILED]=Ve.ERROR,ul[lr.PENDING]=void 0,ul[lr.NONE]=void 0,ul);function pC(e){var n,t=e.className,r=e.message,i=e.channel,a=e.isDateSeparatorConsidered,s=a===void 0?!0:a,o=Ft(),l=o.stringSet,u=o.dateLocale,d=S2(i,r),f=((n=i==null?void 0:i.isGroupChannel)===null||n===void 0?void 0:n.call(i))&&(i.isSuper||i.isPublic||i.isBroadcast)&&!(d===lr.PENDING||d===lr.FAILED);return v.createElement("div",{className:Ae(Ae([],Array.isArray(t)?t:[t],!0),["sendbird-message-status"],!1).join(" ")},d===lr.PENDING?v.createElement(Ho,{className:"sendbird-message-status__icon",testID:"sendbird-message-status-icon",width:"16px",height:"16px"},v.createElement(We,{type:Se.SPINNER,fillColor:Ve.PRIMARY,width:"16px",height:"16px"})):v.createElement(We,{className:Zt("sendbird-message-status__icon",f&&"hide-icon",d!==lr.FAILED&&"sendbird-message-status--sent"),testID:"sendbird-message-status-icon",type:OV[d]||Se.ERROR,fillColor:DV[d],width:"16px",height:"16px"}),l7(d)&&v.createElement(Ie,{className:"sendbird-message-status__text",testID:"sendbird-message-status-text",type:Ce.CAPTION_3,color:de.ONBACKGROUND_2},s?wr((r==null?void 0:r.createdAt)||0,l.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:u}):XR({channel:i,locale:u,stringSet:l})))}var LV=function(e){var n=e.ref,t=e.onClick,r=t===void 0?Cn:t,i=e.onBlur,a=i===void 0?Cn:i,s=e.renderIcon,o=s===void 0?function(l){return v.createElement(We,x({},l))}:s;return v.createElement(fa,{ref:n,width:"32px",height:"32px",onClick:r,onBlur:a},o({type:Se.MORE,fillColor:Ve.CONTENT_INVERSE,width:"24px",height:"24px"}))},mM=function(e){var n,t=Ft().stringSet,r=$r(),i=r.message,a=r.hideMenu;return v.createElement(yi,x({},e,{onClick:function(s){var o;Vi(i)&&tC(i.message),a(),(o=e.onClick)===null||o===void 0||o.call(e,s)}}),(n=e.children)!==null&&n!==void 0?n:t.MESSAGE_MENU__COPY)},_M=function(e){var n,t=Ft().stringSet,r=$r(),i=r.message,a=r.hideMenu,s=r.setQuoteMessage;return v.createElement(yi,x({},e,{disabled:i.parentMessageId>0,onClick:function(o){var l;s(i),a(),(l=e.onClick)===null||l===void 0||l.call(e,o)}}),(n=e.children)!==null&&n!==void 0?n:t.MESSAGE_MENU__REPLY)},gM=function(e){var n,t=Ft().stringSet,r=$r(),i=r.message,a=r.hideMenu,s=r.onReplyInThread;return v.createElement(yi,x({},e,{onClick:function(o){var l;s({message:i}),a(),(l=e.onClick)===null||l===void 0||l.call(e,o)}}),(n=e.children)!==null&&n!==void 0?n:t.MESSAGE_MENU__THREAD)},EM=function(e){var n,t=Ft().stringSet,r=$r(),i=r.hideMenu,a=r.onMoveToParentMessage;return v.createElement(yi,x({},e,{onClick:function(s){var o;a(),i(),(o=e.onClick)===null||o===void 0||o.call(e,s)}}),(n=e.children)!==null&&n!==void 0?n:t.MESSAGE_MENU__OPEN_IN_CHANNEL)},yM=function(e){var n,t=Ft().stringSet,r=$r(),i=r.hideMenu,a=r.showEdit,s=r.isOnline;return v.createElement(yi,x({},e,{onClick:function(o){var l;s&&(a(!0),i(),(l=e.onClick)===null||l===void 0||l.call(e,o))}}),(n=e.children)!==null&&n!==void 0?n:t.MESSAGE_MENU__EDIT)},CM=function(e){var n,t=Ft().stringSet,r=$r(),i=r.message,a=r.hideMenu,s=r.resendMessage,o=r.isOnline;return v.createElement(yi,x({},e,{onClick:function(l){var u;o&&(s(i),a(),(u=e.onClick)===null||u===void 0||u.call(e,l))}}),(n=e.children)!==null&&n!==void 0?n:t.MESSAGE_MENU__RESEND)},bM=function(e){var n,t,r,i=Ft().stringSet,a=$r(),s=a.message,o=a.hideMenu,l=a.deleteMessage,u=a.showRemove,d=a.isOnline,f=a.disableDeleteMessage;return v.createElement(yi,x({},e,{disabled:typeof f=="boolean"?f:((t=(n=s.threadInfo)===null||n===void 0?void 0:n.replyCount)!==null&&t!==void 0?t:0)>0,onClick:function(p){var m;ka(s)?l(s):d&&(u(!0),o(),(m=e.onClick)===null||m===void 0||m.call(e,p))}}),(r=e.children)!==null&&r!==void 0?r:i.MESSAGE_MENU__DELETE)},ZR=function(e){var n,t=e.channel,r=e.message;if(ka(r)||Ss(r)||!(!((n=t==null?void 0:t.isGroupChannel)===null||n===void 0)&&n.call(t))||t!=null&&t.isEphemeral)return!1;var i=t==null?void 0:t.isBroadcast,a=(t==null?void 0:t.myRole)===ri.OPERATOR;return i?a:!0},UV=function(e){var n=e.message;return Vi(n)},kV=function(e){var n=e.message,t=e.channel,r=e.isByMe;return!(t!=null&&t.isEphemeral)&&Vi(n)&&ed(n)&&r},PV=function(e){var n=e.message,t=e.isByMe;return ka(n)&&(n==null?void 0:n.isResendable)&&t},xV=function(e){var n=e.message,t=e.channel,r=e.isByMe;return!(t!=null&&t.isEphemeral)&&!Ss(n)&&r},FV=function(e){var n=e.onMoveToParentMessage,t=n===void 0?void 0:n;return!!t},HV=function(e){var n=e.channel,t=e.message,r=e.replyType;return ZR({channel:n,message:t})&&r==="QUOTE_REPLY"},BV=function(e){var n=e.channel,t=e.message,r=e.replyType,i=e.onReplyInThread;return ZR({channel:n,message:t})&&r==="THREAD"&&!(t!=null&&t.parentMessageId)&&typeof i=="function"},mC=function(e){var n,t=e.className,r=e.message,i=e.channel,a=e.isByMe,s=e.replyType,o=e.renderTrigger,l=o===void 0?LV:o,u=e.renderMenuItems,d=e.disableDeleteMessage,f=d===void 0?null:d,p=e.showEdit,m=p===void 0?Cn:p,E=e.showRemove,g=E===void 0?Cn:E,y=e.deleteMessage,S=e.resendMessage,C=e.setQuoteMessage,T=e.onReplyInThread,I=e.onMoveToParentMessage,L=Tt().config,D=L.isOnline,O=N.useRef(null),R=N.useRef(null),k=N.useState(!1),P=k[0],G=k[1],V=function(){return G(!1)},H=function(){return G(!0)},F=function(){return G(function(K){return!K})},z={message:r,channel:i,isByMe:a,replyType:s,onReplyInThread:T,onMoveToParentMessage:I};return v.createElement("div",{className:Zt("sendbird-message-menu",t),ref:R},v.createElement(sC,{value:{message:r,hideMenu:V,showMenu:H,toggleMenu:F,setQuoteMessage:C,onReplyInThread:T,onMoveToParentMessage:I,showEdit:m,showRemove:g,deleteMessage:y,resendMessage:S,isOnline:D,disableDeleteMessage:f,triggerRef:O,containerRef:R}},l({ref:O,onClick:F}),P&&v.createElement(Di,{id:df(r.messageId),parentRef:O,parentContainRef:R,closeDropdown:V,openLeft:a},(n=u==null?void 0:u({items:{CopyMenuItem:mM,ReplyMenuItem:_M,ThreadMenuItem:gM,OpenInChannelMenuItem:EM,EditMenuItem:yM,ResendMenuItem:CM,DeleteMenuItem:bM}}))!==null&&n!==void 0?n:v.createElement(v.Fragment,null,UV(z)&&v.createElement(mM,null),HV(z)&&v.createElement(_M,null),BV(z)&&v.createElement(gM,null),FV(z)&&v.createElement(EM,null),kV(z)&&v.createElement(yM,null),PV(z)&&v.createElement(CM,null),xV(z)&&v.createElement(bM,null)))))},GV=300;function SM(e){VV(e)&&e.touches.length<2&&e.preventDefault&&e.preventDefault()}function VV(e){return e&&"touches"in e}function rs(e,n){var t=e.onLongPress,r=e.onClick,i=n===void 0?{}:n,a=i.delay,s=a===void 0?GV:a,o=i.shouldPreventDefault,l=o===void 0?!0:o,u=i.shouldStopPropagation,d=u===void 0?!1:u,f=_r().isMobile,p=N.useState(!1),m=p[0],E=p[1],g=N.useState(!1),y=g[0],S=g[1],C=N.useRef(),T=N.useRef(),I=N.useCallback(function(D){D.persist();var O=x({},D);S(!1),d&&D.stopPropagation(),l&&D.target&&(D.target.addEventListener("touchend",SM,{passive:!1}),T.current=D.target),C.current=setTimeout(function(){t(O),E(!0)},s)},[t,s,l,d,f]),L=N.useCallback(function(D,O,R){O===void 0&&(O=!0),R===void 0&&(R=!1),S(!!R),C!=null&&C.current&&clearTimeout(C.current),O&&!m&&!y&&(r==null||r(D)),E(!1),l&&T.current&&T.current.removeEventListener("touchend",SM)},[l,r,m,y]);return{onMouseDown:function(D){return I(D)},onMouseUp:function(D){return L(D)},onMouseLeave:function(D){return L(D,!1)},onTouchStart:function(D){return I(D)},onTouchMove:function(D){return L(D,!1,!0)},onTouchEnd:function(D){return L(D)}}}var nf=v.forwardRef(function(e,n){var t=e.className,r=e.width,i=e.height,a=e.selected,s=e.dataSbId,o=s===void 0?"":s,l=e.testID,u=e.onClick,d=e.children,f=rs({onLongPress:Cn,onClick:u},{shouldPreventDefault:!0,shouldStopPropagation:!0});return v.createElement("div",x({className:Ae(Ae([],Array.isArray(t)?t:[t],!0),["sendbird-reaction-button".concat(a?"--selected":"")],!1).join(" "),ref:n,role:"button",style:{width:r,height:i}},f,{tabIndex:0,"data-sb-id":l??o,"data-testid":l??o}),v.createElement("div",{className:"sendbird-reaction-button__inner"},d))});function _C(e){var n=e.className,t=e.message,r=e.userId,i=e.spaceFromTrigger,a=i===void 0?{x:0,y:0}:i,s=e.emojiContainer,o=e.filterEmojiCategoryIds,l=e.toggleReaction,u=N.useRef(null),d=N.useRef(null),f=N.useMemo(function(){return cp(s,o==null?void 0:o(t))},[s,o]);return Ss(t)||ka(t)?null:v.createElement("div",{className:ii([n??"","sendbird-message-item-reaction-menu"]),ref:d},v.createElement(zi,{menuTrigger:function(p){return v.createElement(fa,{className:"sendbird-message-item-reaction-menu__trigger",ref:u,width:"32px",height:"32px",onClick:function(){p()}},v.createElement(We,{className:"sendbird-message-item-reaction-menu__trigger__icon",testID:"sendbird-message-item-reaction-menu__trigger__icon",type:Se.EMOJI_MORE,fillColor:Ve.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(p){return f.length===0?null:v.createElement(iR,{id:df(t.messageId),parentRef:u,parentContainRef:d,closeDropdown:p,spaceFromTrigger:a},f.map(function(m){var E,g,y,S=((y=(g=(E=t==null?void 0:t.reactions)===null||E===void 0?void 0:E.find(function(C){return C.key===m.key}))===null||g===void 0?void 0:g.userIds)===null||y===void 0?void 0:y.some(function(C){return C===r}))||!1;return v.createElement(nf,{key:m.key,width:"36px",height:"36px",selected:S,onClick:function(){p(),l==null||l(t,m.key,S)},testID:"ui_emoji_reactions_menu_".concat(m.key)},v.createElement(yr,{url:m.url,width:"28px",height:"28px",placeHolder:function(C){var T=C.style;return v.createElement("div",{style:T},v.createElement(We,{type:Se.QUESTION,fillColor:Ve.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}))}))}}))}var gC=v.forwardRef(function(e,n){var t=e.className,r=t===void 0?"":t,i=e.testID,a=e.children,s=e.count,o=s===void 0?"":s,l=e.isAdd,u=l===void 0?!1:l,d=e.selected,f=d===void 0?!1:d,p=e.onClick,m=p===void 0?function(){}:p,E=function(){return f&&!u?"--selected":u?"--is-add":""};return v.createElement("div",{className:Ae(Ae([],Array.isArray(r)?r:[r],!0),["sendbird-reaction-badge".concat(E())],!1).join(" "),"data-testid":i,role:"button",ref:n,onClick:m,onKeyDown:m,onTouchEnd:m,tabIndex:0},v.createElement("div",{className:"sendbird-reaction-badge__inner"},v.createElement("div",{className:"sendbird-reaction-badge__inner__icon"},a),v.createElement(Ie,{className:a&&o?"sendbird-reaction-badge__inner__count":"",type:Ce.CAPTION_3,color:de.ONBACKGROUND_1},o)))}),Em=function(e){var n,t,r,i=e.className,a=i===void 0?"":i,s=e.children,o=e.onBackdropClick,l=(t=(n=Tt())===null||n===void 0?void 0:n.config)===null||t===void 0?void 0:t.logger,u=N.useRef();return u.current=document.getElementById(Du),u.current||(u.current=document.createElement("div"),u.current.setAttribute("id",Du),document.body.appendChild(u.current),(r=l==null?void 0:l.warning)===null||r===void 0||r.call(l,"@sendbird/uikit-react/ui/BottomSheet | Should put a ModalRoot to use the BottomSheet.")),dd.createPortal(v.createElement("div",{className:"".concat(a," sendbird-bottomsheet")},v.createElement("div",{className:"sendbird-bottomsheet__content",role:"dialog","aria-modal":"true","aria-expanded":"true"},s),v.createElement("div",{className:"sendbird-bottomsheet__backdrop",onClick:function(d){d==null||d.stopPropagation(),o==null||o()}})),u.current)};function zV(e){var n=e.height,t=n===void 0?24:n,r=e.width,i=r===void 0?24:r;return v.createElement("div",{className:"sendbird-muted-avatar",style:{height:"".concat(t,"px"),width:"".concat(i,"px")}},v.createElement("div",{className:"sendbird-muted-avatar__icon"},v.createElement("div",{className:"sendbird-muted-avatar__bg",style:{height:"".concat(t,"px"),width:"".concat(i,"px")}}),v.createElement(We,{type:Se.MUTE,fillColor:Ve.WHITE,width:"".concat(t-8,"px"),height:"".concat(i-8,"px")})))}function jV(e){var n=e.id,t=e.checked,r=t===void 0?!1:t,i=e.disabled,a=e.onChange,s=N.useState(r),o=s[0],l=s[1];return v.createElement("label",{className:["sendbird-checkbox",i?"disabled":""].join(" "),htmlFor:n},v.createElement("input",{disabled:i,id:n,type:"checkbox",checked:o,onClick:function(){i||l(!o)},onChange:a}),v.createElement("span",{className:["sendbird-checkbox--checkmark",i?"disabled":""].join(" ")}))}var JR=function(e){var n=e.stores,t=n===void 0?{}:n,r=t.sdkStore,i=r===void 0?{}:r,a=i.sdk;return a},qV=function(e){var n=e.config,t=n===void 0?{}:n,r=t.pubSub;return r},eO=function(e){return function(n){return new Promise(function(t,r){var i=JR(e),a=qV(e);i||r(new Error("Sdk not found")),i.groupChannel||r(new Error("Not found GroupChannelModule")),i.groupChannel.createChannel&&typeof i.groupChannel.createChannel=="function"||r(new Error('Not found the function "createChannel"')),i.groupChannel.createChannel(n).then(function(s){t(s),a.publish(Fn.CREATE_CHANNEL,{channel:s})}).catch(r)})}};function kl(e){var n,t,r=e.user,i=e.currentUserId,a=e.disableMessaging,s=a===void 0?!1:a,o=e.onSuccess,l=Tt(),u=eO(l),d=(n=l==null?void 0:l.config)===null||n===void 0?void 0:n.logger,f=N.useContext(wn).stringSet,p=i||((t=l==null?void 0:l.config)===null||t===void 0?void 0:t.userId),m=Ul().onStartDirectMessage;return v.createElement("div",{className:"sendbird__user-profile"},v.createElement("section",{className:"sendbird__user-profile-avatar"},v.createElement(Fr,{height:"80px",width:"80px",src:r==null?void 0:r.profileUrl})),v.createElement("section",{className:"sendbird__user-profile-name"},v.createElement(Ie,{type:Ce.H_2,color:de.ONBACKGROUND_1},(r==null?void 0:r.nickname)||f.NO_NAME)),(r==null?void 0:r.userId)!==p&&!s&&v.createElement("section",{className:"sendbird__user-profile-message"},v.createElement(Oi,{type:Gn.SECONDARY,onClick:function(){var E={isDistinct:!1,invitedUserIds:r!=null&&r.userId?[r==null?void 0:r.userId]:[],operatorUserIds:[p]};o==null||o(),u(E).then(function(g){d.info("UserProfile, channel create",g),m==null||m(g)})}},f.USER_PROFILE__MESSAGE)),v.createElement("div",{className:"sendbird__user-profile-separator"}),v.createElement("section",{className:"sendbird__user-profile-userId"},v.createElement(Ie,{className:"sendbird__user-profile-userId--label",type:Ce.CAPTION_2,color:de.ONBACKGROUND_2},f.USER_PROFILE__USER_ID),v.createElement(Ie,{className:"sendbird__user-profile-userId--value",type:Ce.BODY_1,color:de.ONBACKGROUND_1},r==null?void 0:r.userId)))}function is(e){var n=e.user,t=e.channel,r=e.className,i=r===void 0?void 0:r,a=e.checked,s=e.checkBox,o=e.isOperator,l=e.disabled,u=e.disableMessaging,d=e.action,f=e.onChange,p=e.avatarSize,m=p===void 0?"40px":p,E=e.onClick,g=e.onUserAvatarClick,y=e.renderListItemMenu,S=e.size,C=S===void 0?"normal":S,T=o??(n==null?void 0:n.role)==="operator",I=n.userId,L=N.useRef(null),D=N.useRef(null),O=N.useRef(null),R=Ul(),k=R.disableUserProfile,P=R.renderUserProfile,G=Ft().stringSet,V=Tt().config,H=V.userId,F=C==="small"?"sendbird-user-list-item--small":"sendbird-user-list-item",z=C==="small"?"sendbird-user-list-item--small__avatar":"sendbird-user-list-item__avatar",K=C==="small"?"sendbird-user-list-item--small__title":"sendbird-user-list-item__title",ee=C==="small"?"sendbird-user-list-item--small__subtitle":"sendbird-user-list-item__subtitle",$=C==="small"?"sendbird-user-list-item--small__checkbox":"sendbird-user-list-item__checkbox",Q=C==="small"?"sendbird-user-list-item--small__action":"sendbird-user-list-item__action",ne=C==="small"?"sendbird-user-list-item--small__operator":"sendbird-user-list-item__operator";return v.createElement("div",{className:Zt.apply(void 0,Ae([F],Array.isArray(i)?i:[i],!1)),ref:D},v.createElement(zi,{menuTrigger:function(j){return v.createElement(v.Fragment,null,v.createElement(Fr,{className:z,ref:O,src:(n==null?void 0:n.profileUrl)||(n==null?void 0:n.plainProfileUrl)||"",width:m,height:m,onClick:function(){var Z;k||(j(),(Z=g??E)===null||Z===void 0||Z())}}),(n==null?void 0:n.isMuted)&&v.createElement(zV,{height:id(m),width:id(m)}))},menuItems:function(j){return P?P({user:n,currentUserId:H??"",close:j,avatarRef:O}):v.createElement(Di,{openLeft:!0,parentRef:O,parentContainRef:O,closeDropdown:j,style:{paddingTop:"0px",paddingBottom:"0px"}},v.createElement(kl,{disableMessaging:u,user:n,currentUserId:H,onSuccess:j}))}}),v.createElement(Ie,{className:K,type:Ce.SUBTITLE_1,color:de.ONBACKGROUND_1},n.nickname||G.NO_NAME,H===n.userId&&G.CHANNEL_SETTING__MEMBERS__YOU),!n.nickname&&v.createElement(Ie,{className:ee,type:Ce.CAPTION_3,color:de.ONBACKGROUND_2},n.userId),s&&v.createElement("label",{className:$,htmlFor:I},v.createElement(jV,{id:I,checked:a,disabled:l,onChange:function(j){return f==null?void 0:f(j)}})),T&&v.createElement(Ie,{className:Zt(ne,s&&"checkbox"),type:Ce.SUBTITLE_2,color:de.ONBACKGROUND_2},G.LABEL__OPERATOR),!s&&!y&&d&&v.createElement("div",{className:Q,ref:L},d({actionRef:L,parentRef:D})),!s&&y&&v.createElement("div",{className:Q,ref:L},y({channel:t,user:n})))}function KV(e){var n=e.className,t=n===void 0?"":n,r=e.children,i=r===void 0?"":r;return v.createElement("div",{className:Ae(Ae([],Array.isArray(t)?t:[t],!0),["sendbird-tooltip"],!1).join(" ")},v.createElement(Ie,{className:"sendbird-tooltip__text",type:Ce.CAPTION_2,color:de.ONCONTENT_1},i))}var $V=8;function WV(e){var n=e.className,t=n===void 0?"":n,r=e.children,i=e.hoverTooltip,a=N.useState(!1),s=a[0],o=a[1],l=N.useRef();return v.createElement("div",{className:Ae(Ae([],Array.isArray(t)?t:[t],!0),["sendbird-tooltip-wrapper"],!1).join(" "),onMouseOver:function(){o(!0)},onFocus:function(){o(!0)},onMouseOut:function(){o(!1)},onBlur:function(){o(!1)}},v.createElement("div",{className:"sendbird-tooltip-wrapper__children",ref:l},r),s&&v.createElement("div",{className:"sendbird-tooltip-wrapper__hover-tooltip",style:{bottom:"calc(100% + ".concat($V,"px)")}},v.createElement("div",{className:"sendbird-tooltip-wrapper__hover-tooltip__inner"},v.createElement("div",{className:"sendbird-tooltip-wrapper__hover-tooltip__inner__tooltip-container",style:{left:l.current?"calc(".concat(l.current.offsetWidth/2,"px - 50%)"):void 0}},i))))}var QV={message:{},isByMe:!1},tO=v.createContext(QV),Lu=function(e){var n=e.children,t=e.message,r=e.isByMe,i=r===void 0?!1:r;return v.createElement(tO.Provider,{value:{message:t,isByMe:i}},n)},nO=function(){var e=v.useContext(tO);if(e===void 0)throw new Error("useMessageContext must be used within a MessageProvider");return e},YV=function(e){var n,t,r,i=e.message,a=e.channel,s=e.emojiKey,o=s===void 0?"":s,l=e.hideMenu,u=e.emojiContainer,d=e.onPressUserProfileHandler,f=a.members,p=f===void 0?[]:f,m=N.useState(o),E=m[0],g=m[1];function y(){if(d&&i){var S=i==null?void 0:i.sender;d(S)}}return v.createElement(Em,{onBackdropClick:l},v.createElement("div",{className:"sendbird-message__bottomsheet"},v.createElement("div",{className:"sendbird-message__bottomsheet__reacted-members"},(n=i.reactions)===null||n===void 0?void 0:n.map(function(S){var C=g7(u,S.key);return v.createElement("div",{key:S.key,className:Zt("sendbird-message__bottomsheet__reacted-members__item",E===S.key&&"sendbird-message__bottomsheet__reacted-members__item__selected"),onClick:function(){g(S.key)}},v.createElement(yr,{url:C,width:"28px",height:"28px",placeHolder:function(T){var I=T.style;return v.createElement("div",{style:I},v.createElement(We,{type:Se.QUESTION,fillColor:Ve.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}),v.createElement(Ie,{type:Ce.BUTTON_2,color:E===S.key?de.PRIMARY:de.ONBACKGROUND_3},S.userIds.length))})),v.createElement("div",{className:"sendbird-message__bottomsheet__reactor-list"},((r=(t=i.reactions)===null||t===void 0?void 0:t.find(function(S){return S.key===E}))===null||r===void 0?void 0:r.userIds.map(function(S){return p.find(function(C){return C.userId===S})}).filter(function(S){return S!==void 0})).map(function(S){return v.createElement(is,{key:S.userId,className:"sendbird-message__bottomsheet__reactor-list__item",user:S,avatarSize:"36px",onUserAvatarClick:y})}))))};function XV(e){var n,t=e.reaction,r=e.memberNicknamesMap,i=e.setEmojiKey,a=e.toggleReaction,s=e.emojisMap,o=e.channel,l=e.message,u=e.isFiltered,d=oC().openModal,f=Tt(),p=_r().isMobile,m=nO(),E=N.useContext(wn).stringSet,g=f.config.userId,y=k2(g,t),S=t.userIds.length>0&&(o==null?void 0:o.isGroupChannel())&&!o.isSuper,C=function(){if(u&&!y){d({modalProps:{titleText:"Add reaction failed",hideFooter:!0,isCloseOnClickOutside:!0},childElement:function(I){var L=I.closeModal;return v.createElement(nd,{type:Gn.PRIMARY,submitText:E.BUTTON__OK,hideCancelButton:!0,onCancel:L,onSubmit:L})}});return}i(""),a==null||a(l??(m==null?void 0:m.message),t.key,y)},T=rs({onLongPress:function(){i(t.key)},onClick:C},{shouldPreventDefault:!0,shouldStopPropagation:!0});return v.createElement(WV,{className:"sendbird-emoji-reactions__reaction-badge",hoverTooltip:S?v.createElement(KV,null,p7(t,g,r,E)):v.createElement(v.Fragment,null)},v.createElement("div",x({},p?T:{onClick:C}),v.createElement(gC,{count:t.userIds.length,selected:y},v.createElement(yr,{circle:!0,url:((n=s.get(t==null?void 0:t.key))===null||n===void 0?void 0:n.url)||"",width:"20px",height:"20px",defaultComponent:v.createElement(We,{width:"20px",height:"20px",type:Se.QUESTION})}))))}var ZV=function(e){var n=e.onClick,t=rs({onLongPress:function(){},onClick:n},{shouldPreventDefault:!0,shouldStopPropagation:!0});return v.createElement("div",x({className:"sendbird-emoji-reactions__add-reaction-badge","data-testid":"sendbird-emoji-reactions__add-reaction-badge"},t),v.createElement(gC,{isAdd:!0},v.createElement(We,{type:Se.EMOJI_MORE,fillColor:Ve.ON_BACKGROUND_3,width:"20px",height:"20px"})))},JV=function(e){var n=e.userId,t=e.message,r=e.emojiContainer,i=e.hideMenu,a=e.toggleReaction,s=N.useMemo(function(){return nC(r)},[r]);return v.createElement(Em,{onBackdropClick:i},v.createElement("div",{className:"sendbird-message__bottomsheet sendbird-message__emojis-bottomsheet"},s.map(function(o){var l,u,d,f,p=(f=(d=(u=(l=t==null?void 0:t.reactions)===null||l===void 0?void 0:l.find(function(m){return m.key===o.key}))===null||u===void 0?void 0:u.userIds)===null||d===void 0?void 0:d.some(function(m){return m===n}))!==null&&f!==void 0?f:!1;return v.createElement(nf,{key:o.key,width:"44px",height:"44px",selected:p,onClick:function(m){m==null||m.stopPropagation(),a==null||a(t,o.key,p),i()},testID:"ui_mobile_emoji_reactions_menu_".concat(o.key)},v.createElement(yr,{url:o.url,width:"38px",height:"38px",placeHolder:function(m){var E=m.style;return v.createElement("div",{style:E},v.createElement(We,{type:Se.QUESTION,fillColor:Ve.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}))})))},EC=function(e){var n,t,r,i,a,s=e.className,o=s===void 0?"":s,l=e.userId,u=e.message,d=e.channel,f=e.emojiContainer,p=e.memberNicknamesMap,m=e.spaceFromTrigger,E=m===void 0?{x:0,y:0}:m,g=e.isByMe,y=g===void 0?!1:g,S=e.toggleReaction,C=e.onPressUserProfile,T=e.filterEmojiCategoryIds,I=!1;try{var L=Tt().config;I=d?ff({channel:d,config:L}):!1}catch{}var D=_r().isMobile,O=N.useRef(null),R=N.useState(!1),k=R[0],P=R[1],G=N.useState(""),V=G[0],H=G[1],F=m7(f),z=N.useMemo(function(){return cp(f,T==null?void 0:T(u))},[f,T]),K=((t=(n=u.reactions)===null||n===void 0?void 0:n.length)!==null&&t!==void 0?t:0)<F.size;return v.createElement("div",{className:ii([o,"sendbird-emoji-reactions",y?"outgoing":"incoming"])},((i=(r=u.reactions)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0)>0&&((a=u.reactions)===null||a===void 0?void 0:a.map(function(ee){return v.createElement(XV,{key:ee==null?void 0:ee.key,reaction:ee,memberNicknamesMap:p,setEmojiKey:H,toggleReaction:S,emojisMap:F,channel:d,message:u,isFiltered:cp(f,T==null?void 0:T(u)).every(function($){return $.key!==(ee==null?void 0:ee.key)})})})),!D&&K&&v.createElement(zi,{menuTrigger:function(ee){return v.createElement(gC,{className:"sendbird-emoji-reactions__add-reaction-badge",testID:"sendbird-emoji-reactions__add-reaction-badge",ref:O,isAdd:!0,onClick:function($){var Q;ee(),(Q=$==null?void 0:$.stopPropagation)===null||Q===void 0||Q.call($)}},v.createElement(We,{type:Se.EMOJI_MORE,fillColor:Ve.ON_BACKGROUND_3,width:"20px",height:"20px"}))},menuItems:function(ee){return z.length===0?null:v.createElement(iR,{parentRef:O,parentContainRef:O,closeDropdown:ee,spaceFromTrigger:E},cp(f,T==null?void 0:T(u)).map(function($){var Q,ne,j,Z=((j=(ne=(Q=u==null?void 0:u.reactions)===null||Q===void 0?void 0:Q.find(function(ie){return ie.key===$.key}))===null||ne===void 0?void 0:ne.userIds)===null||j===void 0?void 0:j.some(function(ie){return ie===l}))||!1;return v.createElement(nf,{key:$.key,width:"36px",height:"36px",selected:Z,onClick:function(ie){ee(),S==null||S(u,$.key,Z),ie==null||ie.stopPropagation()},testID:"ui_emoji_reactions_menu_".concat($.key)},v.createElement(yr,{url:($==null?void 0:$.url)||"",width:"28px",height:"28px",placeHolder:function(ie){var fe=ie.style;return v.createElement("div",{style:fe},v.createElement(We,{type:Se.QUESTION,fillColor:Ve.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}))}))}}),D&&K&&v.createElement(ZV,{onClick:function(){P(!0)}}),D&&k&&v.createElement(JV,{userId:l,message:u,emojiContainer:f,hideMenu:function(){P(!1)},toggleReaction:S}),D&&V&&d!==null&&I&&v.createElement(YV,{message:u,channel:d,emojiKey:V,hideMenu:function(){H("")},emojiContainer:f,onPressUserProfileHandler:C}))};function ez(e){var n,t=e.className,r=t===void 0?"":t,i=e.message;return!(i!=null&&i.isAdminMessage||i!=null&&i.messageType)||!(!((n=i==null?void 0:i.isAdminMessage)===null||n===void 0)&&n.call(i))||(i==null?void 0:i.messageType)!=="admin"?null:v.createElement("div",{className:Ae(Ae([],Array.isArray(r)?r:[r],!0),["sendbird-admin-message"],!1).join(" ")},v.createElement(Ie,{className:"sendbird-admin-message__text",type:Ce.CAPTION_2,color:de.ONBACKGROUND_2},i==null?void 0:i.message))}function $p(e){return si(e).when(Ui,function(){var n;return(n=e==null?void 0:e.type)!==null&&n!==void 0?n:""}).when(Ri,function(){var n,t;return(t=(n=ym(e))===null||n===void 0?void 0:n.mimeType)!==null&&t!==void 0?t:""}).otherwise(function(){return""})}function ym(e){var n=e.fileInfoList;return n.length>0?n[0]:null}function yC(e){return si(e).when(Ui,function(){var n;return(n=e==null?void 0:e.name)!==null&&n!==void 0?n:""}).when(Ri,function(){var n,t;return(t=(n=ym(e))===null||n===void 0?void 0:n.fileName)!==null&&t!==void 0?t:""}).otherwise(function(){return""})}function ad(e){return si(e).when(Ui,function(){var n;return(n=e==null?void 0:e.url)!==null&&n!==void 0?n:""}).when(Ri,function(){var n,t;return(t=(n=ym(e))===null||n===void 0?void 0:n.url)!==null&&t!==void 0?t:""}).otherwise(function(){return""})}function tz(e){return si(e).when(Ui,function(){return e.thumbnails}).when(Ri,function(){var n,t;return(t=(n=ym(e))===null||n===void 0?void 0:n.thumbnails)!==null&&t!==void 0?t:[]}).otherwise(function(){return[]})}function rO(e){var n=tz(e);return n&&n.length>0?n[0].url:""}function nz(e){var n,t,r,i,a,s,o,l=e.message,u=e.userId,d=u===void 0?"":u,f=e.isByMe,p=f===void 0?!1:f,m=e.className,E=m===void 0?"":m,g=e.isUnavailable,y=g===void 0?!1:g,S=e.onClick,C=N.useContext(wn).stringSet,T=l.parentMessage,I=T==null?void 0:T.sender,L=d===(I==null?void 0:I.userId)?C.QUOTED_MESSAGE__CURRENT_USER:I==null?void 0:I.nickname,D=ad(T),O=$p(T),R=d===((t=l==null?void 0:l.sender)===null||t===void 0?void 0:t.userId)?C.QUOTED_MESSAGE__CURRENT_USER:(r=l==null?void 0:l.sender)===null||r===void 0?void 0:r.nickname,k=N.useState(!1),P=k[0],G=k[1],V=o7(),H=(a=(i=yC(T))===null||i===void 0?void 0:i.split("/"))!==null&&a!==void 0?a:D.split("/");return v.createElement("div",{className:ii([E,"sendbird-quote-message",p?"outgoing":"incoming",y?"unavailable":""]),key:T==null?void 0:T.messageId,onClick:function(){!y&&S&&S()},onTouchEnd:function(){!y&&S&&S()}},v.createElement("div",{className:"sendbird-quote-message__replied-to"},v.createElement(We,{className:"sendbird-quote-message__replied-to__icon",type:Se.REPLY,fillColor:Ve.ON_BACKGROUND_3,width:"12px",height:"12px"}),v.createElement(Ie,{className:"sendbird-quote-message__replied-to__text",testID:"sendbird-quote-message__replied-to__text",type:Ce.CAPTION_2,color:de.ONBACKGROUND_3},v.createElement("span",{className:"sendbird-quote-message__replied-to__text__nickname"},R),v.createElement("span",{className:"sendbird-quote-message__replied-to__text__text"},C.QUOTED_MESSAGE__REPLIED_TO),v.createElement("span",{className:"sendbird-quote-message__replied-to__text__nickname"},L))),v.createElement("div",{className:"sendbird-quote-message__replied-message"},y&&v.createElement("div",{className:"sendbird-quote-message__replied-message__text-message"},v.createElement(Ie,{className:"sendbird-quote-message__replied-message__text-message__word",testID:"sendbird-quote-message__replied-message__text-message__word",type:Ce.BODY_2,color:de.ONBACKGROUND_1},C.QUOTED_MESSAGE__UNAVAILABLE)),Vi(T)&&((s=T==null?void 0:T.message)===null||s===void 0?void 0:s.length)>0&&!y&&v.createElement("div",{className:"sendbird-quote-message__replied-message__text-message"},v.createElement(Ie,{className:"sendbird-quote-message__replied-message__text-message__word",testID:"sendbird-quote-message__replied-message__text-message__word",type:Ce.BODY_2,color:de.ONBACKGROUND_1},T==null?void 0:T.message)),Fa(T)&&D&&!y&&v.createElement("div",{className:"sendbird-quote-message__replied-message__text-message"},v.createElement(Ie,{className:"sendbird-quote-message__replied-message__text-message__word",testID:"sendbird-quote-message__replied-message__text-message__word",type:Ce.BODY_2,color:de.ONBACKGROUND_1},C.VOICE_MESSAGE)),(eo(T)||Ri(T))&&D&&!y&&v.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message"},v.createElement(yr,{className:"sendbird-quote-message__replied-message__thumbnail-message__image",url:D,alt:O,width:"144px",height:"108px",onLoad:function(){return G(!0)},defaultComponent:v.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__placeholder"},v.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__placeholder__icon"},v.createElement(We,{type:Oo(O)?Se.PLAY:Se.PHOTO,fillColor:Ve.ON_BACKGROUND_2,width:"22px",height:"22px"})))}),Oo(O)&&!(((o=T==null?void 0:T.thumbnails)===null||o===void 0?void 0:o.length)>0)&&v.createElement(v.Fragment,null,v.createElement("video",{className:"sendbird-quote-message__replied-message__thumbnail-message__video"},v.createElement("source",{src:D,type:O})),v.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover"},v.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover__icon"},v.createElement(We,{type:Se.PLAY,fillColor:Ve.ON_BACKGROUND_2,width:"14px",height:"14px"})))),P&&Gu(O)&&v.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover"},v.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover__icon"},v.createElement(We,{type:Se.GIF,fillColor:Ve.THUMBNAIL_ICON,width:"14px",height:"14px"})))),Zh(T)===xs.FILE&&D&&!y&&v.createElement("div",{className:"sendbird-quote-message__replied-message__file-message"},v.createElement(We,{className:"sendbird-quote-message__replied-message__file-message__type-icon",type:(n={},n[V.IMAGE]=Se.PHOTO,n[V.VIDEO]=Se.PLAY,n[V.AUDIO]=Se.FILE_AUDIO,n[V.GIF]=Se.GIF,n[V.OTHERS]=Se.FILE_DOCUMENT,n)[Zy(O)],fillColor:Ve.ON_BACKGROUND_3,width:"16px",height:"16px"}),v.createElement(Ie,{className:"sendbird-quote-message__replied-message__file-message__file-name",type:Ce.BODY_2,color:de.ONBACKGROUND_3},eC(H[H.length-1])))))}var TM=function(e){var n,t=Ft().stringSet,r=$r(),i=r.message,a=r.hideMenu;return v.createElement(yi,x({},e,{onClick:function(s){var o;Vi(i)&&tC(i.message),a(),(o=e.onClick)===null||o===void 0||o.call(e,s)}}),(n=e.children)!==null&&n!==void 0?n:v.createElement(v.Fragment,null,v.createElement(Ie,{type:Ce.SUBTITLE_1,color:de.ONBACKGROUND_1},t.MESSAGE_MENU__COPY),v.createElement(We,{type:Se.COPY,fillColor:Ve.PRIMARY,width:"24px",height:"24px"})))},NM=function(e){var n,t,r,i=Ft().stringSet,a=$r(),s=a.message,o=a.hideMenu,l=a.setQuoteMessage;return v.createElement(yi,x({},e,{disabled:s.parentMessageId>0,onClick:function(u){var d;l(s),o(),(d=e.onClick)===null||d===void 0||d.call(e,u)}}),(n=e.children)!==null&&n!==void 0?n:v.createElement(v.Fragment,null,v.createElement(Ie,{type:Ce.SUBTITLE_1,color:((t=s.parentMessageId)!==null&&t!==void 0?t:0)>0?de.ONBACKGROUND_4:de.ONBACKGROUND_1},i.MESSAGE_MENU__REPLY),v.createElement(We,{type:Se.REPLY,fillColor:((r=s.parentMessageId)!==null&&r!==void 0?r:0)>0?Ve.ON_BACKGROUND_4:Ve.PRIMARY,width:"24px",height:"24px"})))},IM=function(e){var n,t=Ft().stringSet,r=$r(),i=r.message,a=r.hideMenu,s=r.onReplyInThread;return v.createElement(yi,x({},e,{onClick:function(o){var l;s({message:i}),a(),(l=e.onClick)===null||l===void 0||l.call(e,o)}}),(n=e.children)!==null&&n!==void 0?n:v.createElement(v.Fragment,null,v.createElement(Ie,{type:Ce.SUBTITLE_1,color:de.ONBACKGROUND_1},t.MESSAGE_MENU__THREAD),v.createElement(We,{type:Se.THREAD,fillColor:Ve.PRIMARY,width:"24px",height:"24px"})))},MM=function(e){var n,t=Ft().stringSet,r=$r(),i=r.hideMenu,a=r.showEdit,s=r.isOnline;return v.createElement(yi,x({},e,{onClick:function(o){var l;s&&(a(!0),i(),(l=e.onClick)===null||l===void 0||l.call(e,o))}}),(n=e.children)!==null&&n!==void 0?n:v.createElement(v.Fragment,null,v.createElement(Ie,{type:Ce.SUBTITLE_1,color:de.ONBACKGROUND_1},t.MESSAGE_MENU__EDIT),v.createElement(We,{type:Se.EDIT,fillColor:Ve.PRIMARY,width:"24px",height:"24px"})))},AM=function(e){var n,t=Ft().stringSet,r=$r(),i=r.message,a=r.hideMenu,s=r.resendMessage,o=r.isOnline;return v.createElement(yi,x({},e,{onClick:function(l){var u;o&&(s(i),a(),(u=e.onClick)===null||u===void 0||u.call(e,l))}}),(n=e.children)!==null&&n!==void 0?n:v.createElement(v.Fragment,null,v.createElement(Ie,{type:Ce.SUBTITLE_1,color:de.ONBACKGROUND_1},t.MESSAGE_MENU__RESEND),v.createElement(We,{type:Se.REFRESH,fillColor:Ve.PRIMARY,width:"24px",height:"24px"})))},wM=function(e){var n,t,r,i=Ft().stringSet,a=$r(),s=a.message,o=a.hideMenu,l=a.deleteMessage,u=a.showRemove,d=a.isOnline,f=a.disableDeleteMessage;return v.createElement(yi,x({},e,{disabled:typeof f=="boolean"?f:((t=(n=s.threadInfo)===null||n===void 0?void 0:n.replyCount)!==null&&t!==void 0?t:0)>0,onClick:function(p){var m;ka(s)?l(s):d&&(u(!0),o(),(m=e.onClick)===null||m===void 0||m.call(e,p))}}),(r=e.children)!==null&&r!==void 0?r:v.createElement(v.Fragment,null,v.createElement(Ie,{type:Ce.SUBTITLE_1,color:f?de.ONBACKGROUND_4:de.ONBACKGROUND_1},i.MESSAGE_MENU__DELETE),v.createElement(We,{type:Se.DELETE,fillColor:Ve.PRIMARY,width:"24px",height:"24px"})))},rz=function(e){var n,t=Ft().stringSet,r=$r(),i=r.hideMenu,a=r.message,s=r.onDownloadClick,o=a.url;return v.createElement(yi,x({},e,{onClick:function(){i()}}),(n=e.children)!==null&&n!==void 0?n:v.createElement("a",{className:"sendbird-message__contextmenu--hyperlink",rel:"noopener noreferrer",href:o,target:"_blank",onClick:s},v.createElement(Ie,{type:Ce.SUBTITLE_1,color:de.ONBACKGROUND_1},t.MESSAGE_MENU__SAVE),v.createElement(We,{type:Se.DOWNLOAD,fillColor:Ve.PRIMARY,width:"24px",height:"24px"})))},iz=function(e){var n,t,r,i,a=e.channel,s=e.message,o=e.replyType,l=e.userId,u=e.resendMessage,d=e.showEdit,f=e.showRemove,p=e.deleteMenuState,m=e.deleteMessage,E=e.setQuoteMessage,g=e.parentRef,y=e.onReplyInThread,S=e.isOpenedFromThread,C=S===void 0?!1:S,T=e.onDownloadClick,I=T===void 0?null:T,L=e.renderMenuItems,D=e.hideMenu,O=((n=s==null?void 0:s.sender)===null||n===void 0?void 0:n.userId)===l,R=Tt().config,k=R.isOnline,P=Vi(s),G=Vi(s)&&ed(s)&&O,V=ka(s)&&(s==null?void 0:s.isResendable)&&O,H=!Ss(s)&&O,F=O&&(p===void 0||p!=="HIDE"),z=F&&H,K=!Ss(s)&&Ui(s)&&!(Fa(s)&&(a!=null&&a.isSuper)||a!=null&&a.isBroadcast),ee=o==="QUOTE_REPLY"&&!ka(s)&&!Ss(s)&&(a==null?void 0:a.isGroupChannel()),$=o==="THREAD"&&!C&&!ka(s)&&!Ss(s)&&!w2(s)&&(a==null?void 0:a.isGroupChannel()),Q=p!==void 0&&p==="DISABLE"||((r=(t=s==null?void 0:s.threadInfo)===null||t===void 0?void 0:t.replyCount)!==null&&r!==void 0?r:0)>0,ne={message:s,hideMenu:D,setQuoteMessage:E,onReplyInThread:y,onMoveToParentMessage:Cn,showEdit:d,showRemove:f,deleteMessage:m,resendMessage:u,isOnline:k,disableDeleteMessage:Q,triggerRef:g,containerRef:g,onDownloadClick:I};return v.createElement(sC,{value:ne},v.createElement(Di,{className:"sendbird-message__mobile-context-menu",parentRef:g,parentContainRef:g,closeDropdown:D},(i=L==null?void 0:L({items:{CopyMenuItem:TM,ReplyMenuItem:NM,ThreadMenuItem:IM,EditMenuItem:MM,ResendMenuItem:AM,DeleteMenuItem:wM}}))!==null&&i!==void 0?i:v.createElement(v.Fragment,null,P&&v.createElement(TM,null),ee&&v.createElement(NM,null),$&&v.createElement(IM,null),G&&v.createElement(MM,null),V&&v.createElement(AM,null),z&&v.createElement(wM,null),K&&v.createElement(rz,null))))},RM=function(e){var n,t=Ft().stringSet,r=$r(),i=r.message,a=r.hideMenu;return v.createElement(ju,x({},e,{onClick:function(s){var o;Vi(i)&&tC(i.message),a(),(o=e.onClick)===null||o===void 0||o.call(e,s)}}),(n=e.children)!==null&&n!==void 0?n:v.createElement(v.Fragment,null,v.createElement(We,{type:Se.COPY,fillColor:Ve.PRIMARY,width:"24px",height:"24px"}),v.createElement(Ie,{type:Ce.SUBTITLE_1,color:de.ONBACKGROUND_1},t.MESSAGE_MENU__COPY)))},OM=function(e){var n,t=Ft().stringSet,r=$r(),i=r.hideMenu,a=r.showEdit,s=r.isOnline;return v.createElement(ju,x({},e,{onClick:function(o){var l;s&&(a(!0),i(),(l=e.onClick)===null||l===void 0||l.call(e,o))}}),(n=e.children)!==null&&n!==void 0?n:v.createElement(v.Fragment,null,v.createElement(We,{type:Se.EDIT,fillColor:Ve.PRIMARY,width:"24px",height:"24px"}),v.createElement(Ie,{type:Ce.SUBTITLE_1,color:de.ONBACKGROUND_1},t.MESSAGE_MENU__EDIT)))},DM=function(e){var n,t=Ft().stringSet,r=$r(),i=r.message,a=r.hideMenu,s=r.resendMessage,o=r.isOnline;return v.createElement(ju,x({},e,{onClick:function(l){var u;o&&(s(i),a(),(u=e.onClick)===null||u===void 0||u.call(e,l))}}),(n=e.children)!==null&&n!==void 0?n:v.createElement(v.Fragment,null,v.createElement(We,{type:Se.REFRESH,fillColor:Ve.PRIMARY,width:"24px",height:"24px"}),v.createElement(Ie,{type:Ce.SUBTITLE_1,color:de.ONBACKGROUND_1},t.MESSAGE_MENU__RESEND)))},LM=function(e){var n,t,r,i=Ft().stringSet,a=$r(),s=a.message,o=a.hideMenu,l=a.setQuoteMessage;return v.createElement(ju,x({},e,{disabled:s.parentMessageId>0,onClick:function(u){var d;l(s),o(),(d=e.onClick)===null||d===void 0||d.call(e,u)}}),(n=e.children)!==null&&n!==void 0?n:v.createElement(v.Fragment,null,v.createElement(We,{type:Se.REPLY,fillColor:((t=s.parentMessageId)!==null&&t!==void 0?t:0)>0?Ve.ON_BACKGROUND_3:Ve.PRIMARY,width:"24px",height:"24px"}),v.createElement(Ie,{type:Ce.SUBTITLE_1,color:((r=s.parentMessageId)!==null&&r!==void 0?r:0)>0?de.ONBACKGROUND_4:de.ONBACKGROUND_1},i.MESSAGE_MENU__REPLY)))},UM=function(e){var n,t=Ft().stringSet,r=$r(),i=r.message,a=r.hideMenu,s=r.onReplyInThread;return v.createElement(ju,x({},e,{onClick:function(o){var l;s({message:i}),a(),(l=e.onClick)===null||l===void 0||l.call(e,o)}}),(n=e.children)!==null&&n!==void 0?n:v.createElement(v.Fragment,null,v.createElement(We,{type:Se.THREAD,fillColor:Ve.PRIMARY,width:"24px",height:"24px"}),v.createElement(Ie,{type:Ce.SUBTITLE_1,color:de.ONBACKGROUND_1},t.MESSAGE_MENU__THREAD)))},kM=function(e){var n,t,r,i=Ft().stringSet,a=$r(),s=a.message,o=a.hideMenu,l=a.deleteMessage,u=a.showRemove,d=a.isOnline,f=a.disableDeleteMessage;return v.createElement(ju,x({},e,{disabled:typeof f=="boolean"?f:((t=(n=s.threadInfo)===null||n===void 0?void 0:n.replyCount)!==null&&t!==void 0?t:0)>0,onClick:function(p){var m;ka(s)?l(s):d&&(u(!0),o(),(m=e.onClick)===null||m===void 0||m.call(e,p))}}),(r=e.children)!==null&&r!==void 0?r:v.createElement(v.Fragment,null,v.createElement(We,{type:Se.DELETE,fillColor:Ve.PRIMARY,width:"24px",height:"24px"}),v.createElement(Ie,{type:Ce.SUBTITLE_1,color:f?de.ONBACKGROUND_4:de.ONBACKGROUND_1},i.MESSAGE_MENU__DELETE)))},az=function(e){var n,t=Ft().stringSet,r=$r(),i=r.hideMenu,a=r.message,s=r.onDownloadClick,o=a.url;return v.createElement(ju,{onClick:function(){return i()}},(n=e.children)!==null&&n!==void 0?n:v.createElement("a",{className:"sendbird-message__bottomsheet--hyperlink",rel:"noopener noreferrer",href:o,target:"_blank",onClick:s},v.createElement(We,{type:Se.DOWNLOAD,fillColor:Ve.PRIMARY,width:"24px",height:"24px"}),v.createElement(Ie,{type:Ce.SUBTITLE_1,color:de.ONBACKGROUND_1},t.MESSAGE_MENU__SAVE)))},og=38,sz=function(e){var n,t,r,i,a=e.hideMenu,s=e.channel,o=e.emojiContainer,l=e.message,u=e.replyType,d=e.userId,f=e.resendMessage,p=e.deleteMessage,m=e.toggleReaction,E=e.isReactionEnabled,g=E===void 0?!1:E,y=e.showEdit,S=e.showRemove,C=e.deleteMenuState,T=e.setQuoteMessage,I=e.onReplyInThread,L=e.isOpenedFromThread,D=L===void 0?!1:L,O=e.onDownloadClick,R=e.renderMenuItems,k=((n=l==null?void 0:l.sender)===null||n===void 0?void 0:n.userId)===d,P=Tt().config,G=P.isOnline,V=Vi(l),H=Vi(l)&&ed(l)&&k,F=G&&ka(l)&&(l==null?void 0:l.isResendable)&&k,z=!Ss(l)&&k,K=k&&(C===void 0||C!=="HIDE"),ee=K&&z,$=C!==void 0&&C==="DISABLE"||((r=(t=l==null?void 0:l.threadInfo)===null||t===void 0?void 0:t.replyCount)!==null&&r!==void 0?r:0)>0,Q=ed(l)&&Ui(l)&&!Fa(l),ne=!ka(l)&&!Ss(l)&&g,j=u==="QUOTE_REPLY"&&!ka(l)&&!Ss(l)&&(s==null?void 0:s.isGroupChannel())&&!(s!=null&&s.isBroadcast),Z=u==="THREAD"&&!D&&!ka(l)&&!Ss(l)&&!w2(l)&&(s==null?void 0:s.isGroupChannel())&&!(s!=null&&s.isBroadcast),ie=Math.floor(window.innerWidth/og)-1,fe=N.useState(!1),te=fe[0],le=fe[1],Me=o&&nC(o),ae=te?Me:Me==null?void 0:Me.slice(0,ie),he=Me&&Me.length>ie,pe={message:l,hideMenu:a,setQuoteMessage:T,onReplyInThread:I,onMoveToParentMessage:function(){},showEdit:y,showRemove:S,deleteMessage:p,resendMessage:f,isOnline:G,disableDeleteMessage:$,triggerRef:null,containerRef:null,onDownloadClick:O};return v.createElement(sC,{value:pe},v.createElement(Em,{onBackdropClick:a},v.createElement("div",{className:"sendbird-message__bottomsheet"},ne&&v.createElement("div",{className:"sendbird-message__bottomsheet-reactions"},v.createElement("ul",{className:"sendbird-message__bottomsheet-reaction-bar"},v.createElement("div",{className:Zt("sendbird-message__bottomsheet-reaction-bar__row",te&&"sendbird-message__bottomsheet-reaction-bar__all")},ae.map(function(Ne){var _e,ge,me,Le=(me=(ge=(_e=l==null?void 0:l.reactions)===null||_e===void 0?void 0:_e.filter(function(Qe){return Qe.key===Ne.key})[0])===null||ge===void 0?void 0:ge.userIds)===null||me===void 0?void 0:me.some(function(Qe){return Qe===d});return v.createElement(nf,{key:Ne.key,width:"".concat(og,"px"),height:"".concat(og,"px"),selected:Le,onClick:function(){a(),m==null||m(l,Ne.key,Le)},testID:"ui_mobile_emoji_reactions_menu_".concat(Ne.key)},v.createElement(yr,{url:(Ne==null?void 0:Ne.url)||"",width:"28px",height:"28px",placeHolder:function(Qe){var Pe=Qe.style;return v.createElement("div",{style:Pe},v.createElement(We,{type:Se.QUESTION,fillColor:Ve.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}))}),he&&!te&&v.createElement(nf,{key:"emoji_more",width:"38px",height:"38px",onClick:function(){return le(!0)},testID:"ui_mobile_emoji_reactions_menu_emojiadd"},v.createElement(yr,{url:"",width:"28px",height:"28px",placeHolder:function(Ne){var _e=Ne.style;return v.createElement("div",{style:_e},v.createElement(We,{type:Se.EMOJI_MORE,fillColor:Ve.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}))))),!te&&v.createElement("div",{className:"sendbird-message__bottomsheet--actions"},(i=R==null?void 0:R({items:{CopyMenuItem:RM,EditMenuItem:OM,ResendMenuItem:DM,ReplyMenuItem:LM,ThreadMenuItem:UM,DeleteMenuItem:kM}}))!==null&&i!==void 0?i:v.createElement(v.Fragment,null,V&&v.createElement(RM,null),H&&v.createElement(OM,null),F&&v.createElement(DM,null),j&&v.createElement(LM,null),Z&&v.createElement(UM,null),ee&&v.createElement(kM,null),Q&&v.createElement(az,null))))))},CC=function(e){return v.createElement(v.Fragment,null,e!=null&&e.isReactionEnabled?v.createElement(sz,x({},e)):v.createElement(iz,x({},e)))};function oz(e,n){var t,r=e.className,i=e.threadInfo,a=e.onClick,s=i.mostRepliedUsers,o=s===void 0?[]:s,l=i.replyCount,u=Ft().stringSet;return v.createElement("div",{className:"sendbird-ui-thread-replies ".concat(r),role:"button",onClick:function(d){a==null||a(d),d==null||d.stopPropagation()},onKeyDown:function(d){a==null||a(d),d==null||d.stopPropagation()},ref:n},v.createElement("div",{className:"sendbird-ui-thread-replies__user-profiles"},o.slice(0,4).map(function(d){return v.createElement(Fr,{key:d.userId,className:"sendbird-ui-thread-replies__user-profiles__avatar",src:d==null?void 0:d.profileUrl,alt:"user profile",width:"20px",height:"20px"})}),(o==null?void 0:o.length)>=5&&v.createElement("div",{className:"sendbird-ui-thread-replies__user-profiles__avatar"},v.createElement(Fr,{className:"sendbird-ui-thread-replies__user-profiles__avatar__image",src:(t=o==null?void 0:o[4])===null||t===void 0?void 0:t.profileUrl,alt:"user profile",width:"20px",height:"20px"}),v.createElement("div",{className:"sendbird-ui-thread-replies__user-profiles__avatar__cover"}),v.createElement("div",{className:"sendbird-ui-thread-replies__user-profiles__avatar__plus"},v.createElement(We,{type:Se.PLUS,fillColor:Ve.WHITE,width:"16px",height:"16px"})))),v.createElement(Ie,{className:"sendbird-ui-thread-replies__reply-counts",type:Ce.CAPTION_2,color:de.PRIMARY},l===1?"".concat(l," ").concat(u.CHANNEL__THREAD_REPLY):"".concat(l>99?u.CHANNEL__THREAD_OVER_MAX:l," ").concat(u.CHANNEL__THREAD_REPLIES)),v.createElement(We,{className:"sendbird-ui-thread-replies__icon",type:Se.CHEVRON_RIGHT,fillColor:Ve.PRIMARY,width:"16px",height:"16px"}))}var lz=v.forwardRef(oz);function uz(e){var n,t,r,i=e.mentionTemplate,a=e.mentionedUserId,s=e.mentionedUserNickname,o=e.isByMe,l=N.useRef(),u=Tt(),d=(n=u==null?void 0:u.config)===null||n===void 0?void 0:n.userId,f=(r=(t=u==null?void 0:u.stores)===null||t===void 0?void 0:t.sdkStore)===null||r===void 0?void 0:r.sdk,p=d===a,m=N.useState(),E=m[0],g=m[1],y=N.useCallback(function(S){if(E||!(f!=null&&f.createApplicationUserListQuery)){S();return}var C=f==null?void 0:f.createApplicationUserListQuery({userIdsFilter:[a]});C.next().then(function(T){(T==null?void 0:T.length)>0&&g(T[0]),S()})},[f,a]);return v.createElement(zi,{menuTrigger:function(S){return v.createElement("a",{className:Zt("sendbird-word__mention",p&&"sendbird-word__mention--me"),onClick:function(){return y(S)},ref:l,"data-userid":a,"data-nickname":s,"data-sb-mention":!0},v.createElement(Ie,{type:Ce.CAPTION_1,color:o?de.ONCONTENT_1:de.ONBACKGROUND_1},"".concat(i).concat(s)))},menuItems:function(S){return v.createElement(Di,{parentRef:l,parentContainRef:l,closeDropdown:S,style:{paddingTop:"0px",paddingBottom:"0px"}},v.createElement(kl,{user:E,onSuccess:S,currentUserId:d}))}})}var cz=/https?:\/\//;function iO(e){var n=e.className,t=n===void 0?"":n,r=e.src,i=e.type,a=e.color,s=e.children,o=cz.test(r)?r:"http://".concat(r);return v.createElement("a",{className:Ae(Ae([],Array.isArray(t)?t:[t],!0),["sendbird-link-label",B2(a)],!1).join(" "),href:o,target:"_blank",rel:"noopener noreferrer",onTouchEnd:function(l){l.preventDefault(),l.nativeEvent.stopImmediatePropagation(),cd(o)}},v.createElement(Ie,{className:"sendbird-link-label__label",testID:"sendbird-link-label__label",type:i,color:a},s))}function dz(e,n,t){return"sb-msg_".concat(e,"_").concat(n,"_").concat(t)}function hz(e){var n=decodeURIComponent(e);try{var t=new URL(n).protocol;return["https:","http:"].some(function(r){return r===t.toLowerCase()})?n:"#"}catch{!n.startsWith("http://")&&!n.startsWith("https://")&&(n="https://"+n)}return n}function sd(e){var n=e.tokens,t=nO(),r=t==null?void 0:t.message,i=t==null?void 0:t.isByMe,a=r.updatedAt,s=r.createdAt;return v.createElement(v.Fragment,null,n==null?void 0:n.map(function(o,l){var u=dz(s,a,l);return si(o.type).with(Lr.markdown,function(){var d=o,f=d.groups;return v.createElement("span",{className:"sendbird-word",key:u,"data-testid":"sendbird-ui-word"},si(d.markdownType).with("bold",function(){return v.createElement("span",{style:{fontWeight:"bold"}},v.createElement(sd,{tokens:cy({messageText:f[1]})}))}).with("url",function(){return v.createElement("a",{className:i?"sendbird-label--color-oncontent-1":"sendbird-label--color-onbackground-1",href:hz(f[2])},v.createElement(sd,{tokens:cy({messageText:f[1]})}))}).otherwise(function(){return v.createElement(v.Fragment,null)}))}).with(Lr.mention,function(){return v.createElement("span",{className:"sendbird-word",key:u,"data-testid":"sendbird-ui-word"},v.createElement(uz,{mentionTemplate:pf,mentionedUserId:o.userId,mentionedUserNickname:o.value,isByMe:i}))}).with(Lr.url,function(){return v.createElement("span",{className:"sendbird-word",key:u,"data-testid":"sendbird-ui-word"},v.createElement(iO,{src:o.value,type:Ce.BODY_1,color:i?de.ONCONTENT_1:de.ONBACKGROUND_1},o.value))}).otherwise(function(){return v.createElement(v.Fragment,{key:u},bV(o.value))})}))}function fz(e){var n,t,r,i,a=e.className,s=e.message,o=e.isByMe,l=o===void 0?!1:o,u=e.mouseHover,d=u===void 0?!1:u,f=e.isMentionEnabled,p=f===void 0?!1:f,m=e.isReactionEnabled,E=m===void 0?!1:m,g=e.isMarkdownEnabled,y=g===void 0?!1:g,S=e.onMessageHeightChange,C=S===void 0?function(){}:S,T=N.useContext(wn).stringSet,I=p&&((n=s==null?void 0:s.mentionedMessageTemplate)===null||n===void 0?void 0:n.length)>0&&(s==null?void 0:s.mentionedUsers)&&((t=s==null?void 0:s.mentionedUsers)===null||t===void 0?void 0:t.length)>0,L=N.useMemo(function(){var O;return Dl(I?{mentionedUsers:(O=s==null?void 0:s.mentionedUsers)!==null&&O!==void 0?O:void 0,messageText:s==null?void 0:s.mentionedMessageTemplate,includeMarkdown:y}:{messageText:s==null?void 0:s.message,includeMarkdown:y})},[s==null?void 0:s.updatedAt,s==null?void 0:s.message]),D=function(){var O;return cd((O=s==null?void 0:s.ogMetaData)===null||O===void 0?void 0:O.url)};return v.createElement("div",{className:ii([a??"","sendbird-og-message-item-body",l?"outgoing":"incoming",d?"mouse-hover":"",E&&((r=s==null?void 0:s.reactions)===null||r===void 0?void 0:r.length)>0?"reactions":""])},v.createElement(Ie,{type:Ce.BODY_1,color:l?de.ONCONTENT_1:de.ONBACKGROUND_1},v.createElement("div",{className:zR},v.createElement(sd,{tokens:L}),fm(s)&&v.createElement(Ie,{className:"sendbird-og-message-item-body__text-bubble__message",type:Ce.BODY_1,color:l?de.ONCONTENT_2:de.ONBACKGROUND_2}," ".concat(T.MESSAGE_EDITED," ")))),((i=s.ogMetaData)===null||i===void 0?void 0:i.defaultImage)&&v.createElement(vz,{onClick:D,ogImage:s.ogMetaData.defaultImage,onMessageHeightChange:C}),s.ogMetaData&&v.createElement(pz,{onClick:D,ogMetaData:s.ogMetaData,onMessageHeightChange:C}),v.createElement("div",{className:"sendbird-og-message-item-body__cover"}))}var vz=function(e){var n=e.onClick,t=e.ogImage,r=e.onMessageHeightChange,i=N.useRef(null),a=_r().isMobile;return v.createElement("div",{ref:i,className:Zt("sendbird-og-message-item-body__og-thumbnail",!t.url&&"sendbird-og-message-item-body__og-thumbnail__empty"),onClick:function(){return n()}},v.createElement(yr,{className:"sendbird-og-message-item-body__og-thumbnail__image",url:t.url||"",alt:t.alt||"",width:"100%",height:a?"136px":"240px",onLoad:r,onError:function(){var s,o;try{(o=(s=i==null?void 0:i.current)===null||s===void 0?void 0:s.classList)===null||o===void 0||o.add("sendbird-og-message-item-body__og-thumbnail__empty")}catch{}},defaultComponent:v.createElement("div",{className:"sendbird-og-message-item-body__og-thumbnail__place-holder"},v.createElement(We,{className:"sendbird-og-message-item-body__og-thumbnail__place-holder__icon",type:Se.THUMBNAIL_NONE,width:"56px",height:"56px"}))}))},pz=function(e){var n=e.onClick,t=e.ogMetaData,r=e.onMessageHeightChange;return N.useEffect(function(){r()},[t.title,t.description,t.url]),v.createElement("div",{className:"sendbird-og-message-item-body__description",onClick:function(){return n()}},t.title&&v.createElement(Ie,{className:"sendbird-og-message-item-body__description__title",type:Ce.SUBTITLE_2,color:de.ONBACKGROUND_1},t.title),t.description&&v.createElement(Ie,{className:"sendbird-og-message-item-body__description__description",type:Ce.BODY_2,color:de.ONBACKGROUND_1},t.description),t.url&&v.createElement(Ie,{className:"sendbird-og-message-item-body__description__url",type:Ce.CAPTION_3,color:de.ONBACKGROUND_2},t.url))};function mz(e){var n,t=e.className,r=t===void 0?"":t,i=e.message,a=e.isByMe,s=a===void 0?!1:a,o=e.mouseHover,l=o===void 0?!1:o,u=e.isMentionEnabled,d=u===void 0?!1:u,f=e.isReactionEnabled,p=f===void 0?!1:f,m=e.isMarkdownEnabled,E=m===void 0?!1:m,g=N.useContext(wn).stringSet,y=d&&(i==null?void 0:i.mentionedMessageTemplate)&&i.mentionedMessageTemplate.length>0&&(i==null?void 0:i.mentionedUsers)&&i.mentionedUsers.length>0,S=N.useMemo(function(){var C;return Dl(y?{mentionedUsers:(C=i==null?void 0:i.mentionedUsers)!==null&&C!==void 0?C:void 0,messageText:i==null?void 0:i.mentionedMessageTemplate,includeMarkdown:E}:{messageText:i==null?void 0:i.message,includeMarkdown:E})},[i==null?void 0:i.updatedAt,i==null?void 0:i.message]);return v.createElement(Ie,{type:Ce.BODY_1,color:s?de.ONCONTENT_1:de.ONBACKGROUND_1},v.createElement("div",{className:ii([r,cC,s?"outgoing":"incoming",l?"mouse-hover":"",p&&((n=i==null?void 0:i.reactions)===null||n===void 0?void 0:n.length)>0?"reactions":""])},v.createElement(sd,{tokens:S}),fm(i)&&v.createElement(Ie,{className:"sendbird-text-message-item-body__message edited",type:Ce.BODY_1,color:s?de.ONCONTENT_2:de.ONBACKGROUND_2}," ".concat(g.MESSAGE_EDITED," "))))}function _z(e){var n=this,t,r,i,a=e.className,s=a===void 0?"":a,o=e.message,l=e.isByMe,u=l===void 0?!1:l,d=e.mouseHover,f=d===void 0?!1:d,p=e.isReactionEnabled,m=p===void 0?!1:p,E=e.truncateLimit,g=e.onBeforeDownloadFileMessage,y=null;try{y=(r=(t=Tt())===null||t===void 0?void 0:t.config)===null||r===void 0?void 0:r.logger}catch{}var S=_r().isMobile,C=E??(S?20:void 0),T=function(){return cd(o==null?void 0:o.url)},I=g?function(){return Wt(n,void 0,void 0,function(){var L,D,O,R;return Qt(this,function(k){switch(k.label){case 0:return k.trys.push([0,2,,3]),[4,g({message:o})];case 1:return L=k.sent(),L?T():(O=y==null?void 0:y.info)===null||O===void 0||O.call(y,"FileMessageItemBody: Not allowed to download."),[3,3];case 2:return D=k.sent(),(R=y==null?void 0:y.error)===null||R===void 0||R.call(y,"FileMessageItemBody: Error occurred while determining download continuation:",D),[3,3];case 3:return[2]}})})}:T;return v.createElement("div",{className:ii([s,"sendbird-file-message-item-body",u?"outgoing":"incoming",f?"mouse-hover":"",m&&((i=o==null?void 0:o.reactions)===null||i===void 0?void 0:i.length)>0?"reactions":""])},v.createElement("div",{className:"sendbird-file-message-item-body__file-icon"},v.createElement(We,{className:"sendbird-file-message-item-body__file-icon__icon",type:{IMAGE:Se.PHOTO,VIDEO:Se.PLAY,AUDIO:Se.FILE_AUDIO,GIF:Se.GIF,OTHERS:Se.FILE_DOCUMENT}[Zy(o==null?void 0:o.type)],fillColor:Ve.PRIMARY,width:"24px",height:"24px"})),v.createElement(to,{className:"sendbird-file-message-item-body__file-name",onClick:I,color:u?da.ONCONTENT_1:da.ONBACKGROUND_1},v.createElement(Ie,{className:"sendbird-file-message-item-body__file-name__text",testID:"sendbird-file-message-item-body__file-name__text",type:Ce.BODY_1,color:u?de.ONCONTENT_1:de.ONBACKGROUND_1},eC((o==null?void 0:o.name)||(o==null?void 0:o.url),C))))}function bC(e,n){N.useLayoutEffect(function(){var r;(r=e.current)===null||r===void 0||r.focus()},[e.current]);var t=ur(function(r){var i=n[r.key];i==null||i(r),r.stopPropagation()});return t}var mf={SINGLE:"SINGLE",MULTI:"MULTI"};function gz(e){var n=e.props;if(n.viewerType===mf.MULTI){var t=n,r=t.fileInfoList,i=t.currentIndex;return r[i]}var a=n;return{name:a.name,type:a.type,url:a.url}}function Ez(e){if(e.viewerType!==mf.MULTI){var n=e.onDelete,t=e.isByMe,r=e.disableDelete,i=e.className;return t?v.createElement("div",{className:"sendbird-fileviewer__header__right__actions__delete ".concat(i)},v.createElement(We,{className:r?"disabled":"",type:Se.DELETE,fillColor:r?Ve.GRAY:Ve.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:function(a){r||n==null||n(a)}})):v.createElement(v.Fragment,null)}return v.createElement(v.Fragment,null)}function yz(e){if(e.viewerType===mf.MULTI){var n=e.onClickLeft,t=e.onClickRight;return v.createElement("div",{className:"sendbird-file-viewer-slider"},v.createElement("div",{className:"sendbird-file-viewer-arrow--left"},v.createElement(We,{type:Se.SLIDE_LEFT,fillColor:Ve.ON_BACKGROUND_1,height:Bv,width:Bv,onClick:function(r){n==null||n(),r.stopPropagation()}})),v.createElement("div",{className:"sendbird-file-viewer-arrow--right"},v.createElement(We,{type:Se.SLIDE_LEFT,fillColor:Ve.ON_BACKGROUND_1,height:Bv,width:Bv,onClick:function(r){r.stopPropagation(),t==null||t()}})))}return v.createElement(v.Fragment,null)}var PM=function(e){var n=e.profileUrl,t=e.nickname,r=e.onClose,i=e.onDownloadClick,a=e,s=a.onClickLeft,o=a.onClickRight,l=N.useRef(null),u=bC(l,{Escape:function(g){return r==null?void 0:r(g)},ArrowLeft:function(){return s==null?void 0:s()},ArrowRight:function(){return o==null?void 0:o()}}),d=gz({props:e}),f=d.name,p=d.type,m=d.url,E=N.useContext(wn).stringSet;return v.createElement(Rr,{onClose:r},v.createElement("div",{className:"sendbird-fileviewer","data-testid":"sendbird-fileviewer",onKeyDown:u,tabIndex:1,ref:l},v.createElement("div",{className:"sendbird-fileviewer__header"},v.createElement("div",{className:"sendbird-fileviewer__header__left"},v.createElement("div",{className:"sendbird-fileviewer__header__left__avatar"},v.createElement(Fr,{height:"32px",width:"32px",src:n})),v.createElement("div",{className:"sendbird-fileviewer__header__left__text-container"},v.createElement(Ie,{className:"sendbird-fileviewer__header__left__filename",type:Ce.H_2,color:de.ONBACKGROUND_1},f),v.createElement(Ie,{className:"sendbird-fileviewer__header__left__sender-name",type:Ce.BODY_1,color:de.ONBACKGROUND_2},t))),v.createElement("div",{className:"sendbird-fileviewer__header__right"},Xh(p)&&v.createElement("div",{className:"sendbird-fileviewer__header__right__actions"},v.createElement("a",{className:"sendbird-fileviewer__header__right__actions__download",rel:"noopener noreferrer",href:m,target:"_blank",onClick:i},v.createElement(We,{type:Se.DOWNLOAD,fillColor:Ve.ON_BACKGROUND_1,height:"24px",width:"24px"})),v.createElement(Ez,x({className:"sendbird-fileviewer__header__right__actions__delete"},e))),v.createElement("div",{className:"sendbird-fileviewer__header__right__actions__close"},v.createElement(We,{type:Se.CLOSE,fillColor:Ve.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:function(g){return r==null?void 0:r(g)}})))),v.createElement("div",{className:"sendbird-fileviewer__content"},Oo(p)&&v.createElement("video",{controls:!0,className:"sendbird-fileviewer__content__video"},v.createElement("source",{src:m,type:p})),As(p)&&v.createElement("img",{src:m,alt:f,className:e.viewerType===mf.MULTI?"sendbird-fileviewer__content__img__multi":"sendbird-fileviewer__content__img"}),!Xh(p)&&v.createElement("div",{className:"sendbird-fileviewer__content__unsupported"},v.createElement(Ie,{type:Ce.H_1,color:de.ONBACKGROUND_1},(E==null?void 0:E.UI__FILE_VIEWER__UNSUPPORT)||"Unsupported message")),v.createElement(yz,x({},e)))))};function Cm(e){var n,t,r,i=e.message,a=e.statefulFileInfoList,s=a===void 0?[]:a,o=e.onClose,l=e.isByMe,u=l===void 0?!1:l,d=e.onDelete,f=e.currentIndex,p=e.onClickLeft,m=e.onClickRight,E=e.onDownloadClick;if(Ri(i)){var g=i;return v.createElement(PM,{profileUrl:g.sender.profileUrl,nickname:g.sender.nickname,viewerType:mf.MULTI,fileInfoList:s.filter(function(y){return y.url}).map(function(y){return{name:y.fileName||"",type:y.mimeType||"",url:y.url||""}}),currentIndex:f||0,onClickLeft:p||Cn,onClickRight:m||Cn,onClose:o,onDownloadClick:E})}else if(Ui(i)){var g=i;return dd.createPortal(v.createElement(PM,{profileUrl:(n=g.sender)===null||n===void 0?void 0:n.profileUrl,nickname:(t=g.sender)===null||t===void 0?void 0:t.nickname,name:g.name,type:g.type,url:g==null?void 0:g.url,isByMe:u,disableDelete:(((r=g.threadInfo)===null||r===void 0?void 0:r.replyCount)||0)>0,onClose:o,onDelete:d||Cn,onDownloadClick:E}),document.getElementById(Du))}return v.createElement(v.Fragment,null)}function Cz(e){var n,t=e.children,r=e.className,i=e.message,a=e.isReactionEnabled;return v.createElement("div",{className:"sendbird-image-grid-wrap"},v.createElement("div",{className:ii([r??"","sendbird-image-grid",a&&((n=i==null?void 0:i.reactions)===null||n===void 0?void 0:n.length)>0?"reactions":""])},t))}var bz=400,lg=8,Oc=4,Sz=54,jv=40,Tz=48,Nz=320,xM=28,FM=12,Iz=200,Mz=8,Az=32,wz=60,ug={CHAT_WEB:"calc(".concat(bz/2,"px - ").concat((lg+Oc)/2,"px)"),CHAT_MOBILE:"calc(50vw - ".concat((Tz+jv+Sz+lg+Oc)/2,"px)"),THREAD_PARENT_WEB:"calc(".concat((Nz-(xM+jv+FM+Oc))/2,"px)"),THREAD_PARENT_MOBILE:"calc(50vw - ".concat((xM+jv+FM+Oc)/2,"px)"),THREAD_CHILD_WEB:"calc(".concat((Iz-Mz-Oc)/2,"px)"),THREAD_CHILD_MOBILE:"calc(50vw - ".concat((Az+jv+wz+lg+Oc)/2,"px)")},Rz={CHAT_WEB:"6px",CHAT_MOBILE:"6px",THREAD_PARENT_WEB:"6px",THREAD_PARENT_MOBILE:"6px",THREAD_CHILD_WEB:"6px",THREAD_CHILD_MOBILE:"6px"},Dc="34px",Wp={PARENT:"parent",CHILD:"child"};function aO(e){var n=this,t,r,i=e.className,a=e.message,s=e.isReactionEnabled,o=s===void 0?!1:s,l=e.threadMessageKindKey,u=e.statefulFileInfoList,d=u===void 0?[]:u,f=e.onBeforeDownloadFileMessage,p=f===void 0?null:f,m=(r=(t=Tt==null?void 0:Tt())===null||t===void 0?void 0:t.config)===null||r===void 0?void 0:r.logger,E=N.useState(-1),g=E[0],y=E[1];function S(){y(-1)}function C(){y(g===0?d.length-1:g-1)}function T(){y(g===d.length-1?0:g+1)}return l?v.createElement(v.Fragment,null,g>-1&&v.createElement(Cm,{message:a,statefulFileInfoList:d,currentIndex:g,onClickLeft:C,onClickRight:T,onClose:S,onDownloadClick:function(I){return Wt(n,void 0,void 0,function(){var L,D,O,R;return Qt(this,function(k){switch(k.label){case 0:if(!p)return[2];k.label=1;case 1:return k.trys.push([1,3,,4]),[4,p({message:a,index:g})];case 2:return L=k.sent(),L||(I.preventDefault(),(O=m==null?void 0:m.info)===null||O===void 0||O.call(m,"MultipleFilesMessageItemBody: Not allowed to download.")),[3,4];case 3:return D=k.sent(),(R=m==null?void 0:m.error)===null||R===void 0||R.call(m,"MultipleFilesMessageItemBody: Error occurred while determining download continuation:",D),[3,4];case 4:return[2]}})})}}),v.createElement(Cz,{className:i,message:a,isReactionEnabled:o},d.map(function(I,L){var D,O,R,k;return v.createElement("div",{className:"sendbird-multiple-files-image-renderer-wrapper",onClick:a.sendingStatus===yn.SUCCEEDED?function(){return y(L)}:void 0,key:"sendbird-multiple-files-image-renderer-".concat(L,"-").concat(I.url)},v.createElement(yr,{url:(k=(R=(O=(D=I.thumbnails)===null||D===void 0?void 0:D[0])===null||O===void 0?void 0:O.url)!==null&&R!==void 0?R:I.url)!==null&&k!==void 0?k:"",fixedSize:!1,width:ug[l],maxSideLength:ug.CHAT_WEB,height:ug[l],borderRadius:sG(Rz[l],L,d.length),shadeOnHover:!0,isUploaded:!!I.isUploaded,placeHolder:function(P){var G=P.style;return I.mimeType&&Gu(I.mimeType)?v.createElement(cg.GIF,{style:G}):v.createElement(cg.Default,{style:G})},defaultComponent:v.createElement(cg.LoadError,null)}))}))):v.createElement(v.Fragment,null)}var cg={Default:function(e){var n=e.style;return v.createElement("div",{className:"sendbird-multiple-files-image-renderer__thumbnail__placeholder",style:n},v.createElement(We,{type:Se.PHOTO,fillColor:Ve.ON_BACKGROUND_2,width:Dc,height:Dc}))},GIF:function(e){var n=e.style;return v.createElement("div",{className:"sendbird-multiple-files-image-renderer__thumbnail__placeholder",style:n},v.createElement("div",{className:"sendbird-multiple-files-image-renderer__thumbnail__placeholder__icon"},v.createElement(We,{type:Se.GIF,fillColor:Ve.THUMBNAIL_ICON,width:Dc,height:Dc})))},LoadError:function(){return v.createElement("div",{className:"sendbird-multiple-files-image-renderer__thumbnail__placeholder"},v.createElement(We,{type:Se.THUMBNAIL_NONE,fillColor:Ve.ON_BACKGROUND_2,width:Dc,height:Dc}))}};function SC(e){var n=e.threadMessageKind,t=e.isMobile,r=N.useMemo(function(){return si(n).with(Wp.PARENT,function(){return t?"THREAD_PARENT_MOBILE":"THREAD_PARENT_WEB"}).with(Wp.CHILD,function(){return t?"THREAD_CHILD_MOBILE":"THREAD_CHILD_WEB"}).otherwise(function(){return t?"CHAT_MOBILE":"CHAT_WEB"})},[t,n]);return r}var TC=function(e){var n,t,r=N.useRef(new Map),i=function(s,o){return!r.current.has(s)&&o&&r.current.set(s,URL.createObjectURL(o)),r.current.get(s)},a=function(){r.current.size>0&&(r.current.forEach(function(s){return URL.revokeObjectURL(s)}),r.current.clear())};return N.useEffect(function(){return function(){return a()}},[]),!e||!e.isMultipleFilesMessage||!e.isMultipleFilesMessage()?[]:e.sendingStatus===yn.SUCCEEDED?(a(),e.fileInfoList.map(function(s){var o,l;return x(x({},s),{url:s.url,isUploaded:!0,mimeType:(o=s.mimeType)!==null&&o!==void 0?o:void 0,fileName:(l=s.fileName)!==null&&l!==void 0?l:void 0})})):(t=(n=e==null?void 0:e.messageParams)===null||n===void 0?void 0:n.fileInfoList.map(function(s,o){var l,u;return x(x({},s),{url:(u=(l=i(o))!==null&&l!==void 0?l:s.fileUrl)!==null&&u!==void 0?u:s.file instanceof Blob?i(o,s.file):void 0,isUploaded:!s.file&&typeof s.fileUrl=="string"&&s.fileUrl.length>0})}))!==null&&t!==void 0?t:[]},dy={PRIMARY:"progress-bar-color--primary",GRAY:"progress-bar-color--gray"},sO=function(e){var n=e.className,t=n===void 0?"":n,r=e.disabled,i=r===void 0?!1:r,a=e.maxSize,s=e.currentSize,o=s===void 0?0:s,l=e.colorType,u=l===void 0?dy.PRIMARY:l,d=N.useMemo(function(){return"".concat(o/a*100,"%")},[o,a]);return v.createElement("div",{className:Zt("sendbird-progress-bar",t,u,i&&"progress-bar--disabled")},v.createElement("div",{className:"sendbird-progress-bar__fill",style:{width:d}}))},oO=function(e){var n,t=e.key,r=t===void 0?"":t,i=e.channelUrl,a=i===void 0?"":i,s=e.audioFile,o=e.audioFileUrl,l=o===void 0?"":o,u=e.audioFileMimeType,d=u===void 0?Mo:u,f=K8(a,r),p=nR(),m=p.play,E=p.pause,g=p.stop,y=p.voicePlayerStore,S=oR().isRecordable,C=((n=y==null?void 0:y.audioStorage)===null||n===void 0?void 0:n[f])||hu(),T=function(){S||m==null||m({groupKey:f,audioFile:s,audioFileUrl:l,audioFileMimeType:d})},I=function(){E==null||E(f)},L=function(D){D===void 0&&(D=""),g==null||g(D)};return N.useEffect(function(){return function(){var D;if(s||l){var O=document.getElementById(qg);(D=O==null?void 0:O.pause)===null||D===void 0||D.call(O)}}},[]),{play:T,pause:I,stop:L,playbackTime:((C==null?void 0:C.playbackTime)||0)*1e3,duration:((C==null?void 0:C.duration)||0)*1e3,playingStatus:C.playingStatus}},lO=function(e){var n=e.className,t=e.time,r=t===void 0?0:t,i=e.labelType,a=i===void 0?Ce.CAPTION_2:i,s=e.labelColor,o=s===void 0?de.ONCONTENT_1:s,l=r<0?0:r,u=Math.floor(l/36e5),d=Math.floor(l%36e5/6e4),f=Math.floor(l%36e5%6e4/1e3);return v.createElement("div",{className:"sendbird-ui-play-time ".concat(n)},v.createElement(Ie,{type:a,color:o},"".concat(u?u+":":"").concat(d<10?"0":"").concat(d||"0",":").concat(f<10?"0":"").concat(f)))},uO=function(e){var n,t=e.className,r=e.message,i=e.channelUrl,a=e.isByMe,s=a===void 0?!1:a,o=e.isReactionEnabled,l=o===void 0?!1:o,u=N.useState(!1),d=u[0],f=u[1],p=oO({channelUrl:i,key:"".concat(r==null?void 0:r.messageId),audioFileUrl:r==null?void 0:r.url,audioFileMimeType:r==null?void 0:r.type}),m=p.play,E=p.pause,g=p.playbackTime,y=g===void 0?0:g,S=p.duration,C=p.playingStatus,T=C===void 0?Cs.IDLE:C;N.useEffect(function(){var L;l&&((L=r==null?void 0:r.reactions)===null||L===void 0?void 0:L.length)>0?f(!0):f(!1)},[l,(n=r==null?void 0:r.reactions)===null||n===void 0?void 0:n.length]);var I=N.useMemo(function(){var L,D=1;if(r!=null&&r.metaArrays){var O=(L=r==null?void 0:r.metaArrays.find(function(R){return R.key==="KEY_VOICE_MESSAGE_DURATION"}))===null||L===void 0?void 0:L.value[0];return O?parseInt(O):D}return D},[r==null?void 0:r.metaArrays]);return v.createElement("div",{className:Zt("sendbird-voice-message-item-body",t,d&&"is-reactions-contained")},v.createElement(sO,{className:"sendbird-voice-message-item-body__progress-bar",maxSize:S||I,currentSize:y,colorType:s?dy.PRIMARY:dy.GRAY}),v.createElement("div",{className:"sendbird-voice-message-item-body__status-button"},(T===Cs.IDLE||T===Cs.PAUSED)&&v.createElement("div",{className:"sendbird-voice-message-item-body__status-button__button",onClick:m},v.createElement(We,{width:"18px",height:"18px",type:Se.PLAY,fillColor:Ve.PRIMARY})),T===Cs.PREPARING&&v.createElement(Ho,{width:"22.2px",height:"22.2px"},v.createElement(We,{width:"22.2px",height:"22.2px",type:Se.SPINNER,fillColor:Ve.PRIMARY_2})),T===Cs.PLAYING&&v.createElement("div",{className:"sendbird-voice-message-item-body__status-button__button",onClick:function(){E()}},v.createElement("div",{className:"sendbird-voice-message-item-body__status-button__button__pause"},v.createElement("div",{className:"sendbird-voice-message-item-body__status-button__button__pause__inner"}),v.createElement("div",{className:"sendbird-voice-message-item-body__status-button__button__pause__inner"})))),v.createElement(lO,{className:"sendbird-voice-message-item-body__playback-time",time:I-y,labelType:Ce.BODY_1,labelColor:s?de.ONCONTENT_1:de.ONBACKGROUND_1}))};function Oz(e){var n,t,r=e.className,i=r===void 0?"":r,a=e.message,s=e.isByMe,o=s===void 0?!1:s,l=e.mouseHover,u=l===void 0?!1:l,d=e.isReactionEnabled,f=d===void 0?!1:d,p=e.showFileViewer,m=p===void 0?Cn:p,E=e.style,g=E===void 0?{}:E,y=rO(a),S=N.useState(!1),C=S[0],T=S[1],I=rs({onLongPress:Cn,onClick:function(){ed(a)&&(m==null||m(!0))}});return v.createElement("div",x({className:ii([i,"sendbird-thumbnail-message-item-body",o?"outgoing":"incoming",u?"mouse-hover":"",f&&((t=(n=a.reactions)===null||n===void 0?void 0:n.length)!==null&&t!==void 0?t:0)>0?"reactions":""])},I),v.createElement(yr,{className:"sendbird-thumbnail-message-item-body__thumbnail",url:y||ad(a),alt:$p(a),width:(g==null?void 0:g.width)||"360px",height:(g==null?void 0:g.height)||"270px",onLoad:function(){T(!0)},placeHolder:function(L){var D=L.style;return v.createElement("div",{className:"sendbird-thumbnail-message-item-body__placeholder",style:D})}}),qs(a)&&!y&&!C&&v.createElement("video",{className:"sendbird-thumbnail-message-item-body__video"},v.createElement("source",{src:ad(a),type:$p(a)})),v.createElement("div",{className:"sendbird-thumbnail-message-item-body__image-cover"}),(qs(a)||zp(a))&&v.createElement("div",{className:"sendbird-thumbnail-message-item-body__icon-wrapper"},v.createElement("div",{className:"sendbird-thumbnail-message-item-body__icon-wrapper__icon"},v.createElement(We,{type:qs(a)?Se.PLAY:Se.GIF,fillColor:Ve.THUMBNAIL_ICON,width:"34px",height:"34px"}))))}function Dz(e){var n,t=e.className,r=e.message,i=e.isByMe,a=i===void 0?!1:i,s=e.mouseHover,o=s===void 0?!1:s,l=e.isReactionEnabled,u=l===void 0?!1:l,d=N.useContext(wn).stringSet;return v.createElement("div",{className:ii([t??"","sendbird-unknown-message-item-body",a?"outgoing":"incoming",o?"mouse-hover":"",u&&((n=r==null?void 0:r.reactions)===null||n===void 0?void 0:n.length)>0?"reactions":""])},v.createElement(Ie,{className:"sendbird-unknown-message-item-body__header",type:Ce.BODY_1,color:a?de.ONCONTENT_1:de.ONBACKGROUND_1},d.UNKNOWN__UNKNOWN_MESSAGE_TYPE),v.createElement(Ie,{className:"sendbird-unknown-message-item-body__description",type:Ce.BODY_1,color:a?de.ONCONTENT_2:de.ONBACKGROUND_2},d.UNKNOWN__CANNOT_READ_MESSAGE))}var vt;(function(e){e.Box="box",e.Text="text",e.Image="image",e.TextButton="textButton",e.ImageButton="imageButton",e.Carousel="carouselView"})(vt||(vt={}));const Qp=(e,n)=>typeof n[e]!="string"?{}:{[e]:Lz(n[e])};function Lz(e){return e.startsWith("#")?e.length===9?`#${e.slice(3)}${e[1]}${e[2]}`:e.length===5?`#${e.slice(2)}${e[1]}`:e:e}const dg=e=>e?{viewStyle:Object.assign(Object.assign(Object.assign({},e),Qp("backgroundColor",e)),Qp("borderColor",e))}:{},Uz=e=>e?{textStyle:Object.assign(Object.assign({},e),Qp("color",e))}:{},kz=e=>e?{imageStyle:Object.assign(Object.assign({},e),Qp("tintColor",e))}:{},Pz={run(e){return e.type===vt.Text||e.type===vt.TextButton?Object.assign(Object.assign(Object.assign({},e),dg(e.viewStyle)),Uz(e.textStyle)):e.type===vt.ImageButton||e.type===vt.Image?Object.assign(Object.assign(Object.assign({},e),dg(e.viewStyle)),kz(e.imageStyle)):Object.assign(Object.assign({},e),dg(e.viewStyle))}},El=e=>typeof e=="string"?!Number.isNaN(Number(e)):typeof e=="number"&&!Number.isNaN(e),od=(e,n)=>n[e]===void 0||n[e]===null?{}:El(n[e])?{[e]:Number(n[e])}:{},HM=(e,n)=>n?{[e]:{left:El(n.left)?Number(n.left):n.left,right:El(n.right)?Number(n.right):n.right,top:El(n.top)?Number(n.top):n.top,bottom:El(n.bottom)?Number(n.bottom):n.bottom}}:{},BM=(e,n)=>n?{[e]:{type:n.type,value:El(n.value)?Number(n.value):n.value}}:{},xz=e=>e?{metaData:{pixelWidth:El(e.pixelWidth)?Number(e.pixelWidth):e.pixelWidth,pixelHeight:El(e.pixelHeight)?Number(e.pixelHeight):e.pixelHeight}}:{},Fz=e=>e?{viewStyle:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),od("borderWidth",e)),od("radius",e)),HM("margin",e.margin)),HM("padding",e.padding))}:{},Hz=e=>e?{textStyle:Object.assign(Object.assign(Object.assign({},e),od("size",e)),od("weight",e))}:{},Bz=e=>e?{carouselStyle:Object.assign(Object.assign({},e),od("spacing",e))}:{},bm=e=>Object.assign(Object.assign(Object.assign({},BM("width",e.width)),BM("height",e.height)),Fz(e.viewStyle)),Gz=e=>Object.assign(Object.assign(Object.assign({},bm(e)),Hz(e.textStyle)),od("maxTextLines",e)),Vz=e=>Object.assign(Object.assign({},bm(e)),xz(e.metaData)),zz=e=>Object.assign(Object.assign(Object.assign({},bm(e)),Bz(e.carouselStyle)),{items:e.items.map(n=>Object.assign(Object.assign({},n),{body:Object.assign(Object.assign({},n.body),{items:n.body.items.map(t=>cO.run(t))})}))}),cO={run(e){return e.type===vt.Text||e.type===vt.TextButton?Object.assign(Object.assign({},e),Gz(e)):e.type===vt.ImageButton||e.type===vt.Image?Object.assign(Object.assign({},e),Vz(e)):e.type===vt.Carousel?Object.assign(Object.assign({},e),zz(e)):Object.assign(Object.assign({},e),bm(e))}},jz=()=>{},dO=e=>{var n;const t=(e==null?void 0:e.defaultMapper)||jz,r={defaultMapper:t,mapBoxProps:(e==null?void 0:e.mapBoxProps)||t,mapTextProps:(e==null?void 0:e.mapTextProps)||t,mapImageProps:(e==null?void 0:e.mapImageProps)||t,mapTextButtonProps:(e==null?void 0:e.mapTextButtonProps)||t,mapImageButtonProps:(e==null?void 0:e.mapImageButtonProps)||t,mapCarouselProps:(e==null?void 0:e.mapCarouselProps)||t},i=[Pz,cO,...(n=e==null?void 0:e.transforms)!==null&&n!==void 0?n:[]],a=new Set;return{setTransforms(s){i.length=0,i.push(...s),a.clear()},addTransforms(s){i.push(...s)},parse(s,o){const l=i.reduce((u,d)=>d.run(u),s);switch(l.type){case vt.Box:return{transformed:l,properties:r.mapBoxProps(l,o)};case vt.Text:return{transformed:l,properties:r.mapTextProps(l,o)};case vt.Image:return{transformed:l,properties:r.mapImageProps(l,o)};case vt.TextButton:return{transformed:l,properties:r.mapTextButtonProps(l,o)};case vt.ImageButton:return{transformed:l,properties:r.mapImageButtonProps(l,o)};case vt.Carousel:return{transformed:l,properties:r.mapCarouselProps(l,o)};default:return{transformed:l,properties:void 0}}}}},Lc=({children:e})=>v.createElement(v.Fragment,null,e);function hO(e){var n,t,r,i,a,s;return{box:((n=e==null?void 0:e.views)===null||n===void 0?void 0:n.box)||Lc,text:((t=e==null?void 0:e.views)===null||t===void 0?void 0:t.text)||Lc,image:((r=e==null?void 0:e.views)===null||r===void 0?void 0:r.image)||Lc,imageButton:((i=e==null?void 0:e.views)===null||i===void 0?void 0:i.imageButton)||Lc,textButton:((a=e==null?void 0:e.views)===null||a===void 0?void 0:a.textButton)||Lc,carouselView:((s=e==null?void 0:e.views)===null||s===void 0?void 0:s.carouselView)||Lc}}var qz=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]]);return t};const fO=N.createContext({sizes:{},updateSize:()=>{}}),Kz=({children:e})=>{const[n,t]=N.useState({}),r=N.useCallback(i=>{var{id:a}=i,s=qz(i,["id"]);a&&t(o=>Object.assign(Object.assign({},o),{[a]:s}))},[]);return v.createElement(fO.Provider,{value:{sizes:n,updateSize:r}},e)},$z=()=>N.useContext(fO);var Hn;(function(e){e.Row="row",e.Column="column"})(Hn||(Hn={}));var $n;(function(e){e.Center="center",e.Left="left",e.Right="right",e.Top="top",e.Bottom="bottom"})($n||($n={}));var Pn;(function(e){e[e.FillParent=0]="FillParent",e[e.WrapContent=1]="WrapContent"})(Pn||(Pn={}));var ti;(function(e){e.Normal="normal",e.Bold="bold"})(ti||(ti={}));var wi;(function(e){e.AspectFit="aspectFit",e.AspectFill="aspectFill",e.ScalesToFill="scalesToFill"})(wi||(wi={}));const vO=[1,2],qv=e=>{switch(e){case $n.Right:case $n.Bottom:return"flex-end";case $n.Center:return"center";case $n.Left:case $n.Top:default:return"flex-start"}},Wz=e=>e?vO.includes(Number(e)):!0,Qz=e=>{const n=new Map,t=function(r){return(n.has(r)||n.set(r,e.call(this,r)))&&n.get(r)};return t.cache=n,t},Yz=Qz(e=>{const n=(t,r)=>{"items"in t&&(t==null?void 0:t.items)!=null&&t.items.forEach((i,a)=>{const s=`${r}-${a}`;i.id=s,n(i,s)})};return e.forEach((t,r)=>{const i=`${r}`;t.id=i,n(t,i)}),e}),Ja={rootLayout:Hn.Column,view:{size:{width:{type:"flex",value:Pn.FillParent},height:{type:"flex",value:Pn.WrapContent}}},box:{layout:Hn.Row,align:{vertical:$n.Top,horizontal:$n.Left}},textButton:{maxTextLines:1},carousel:{style:{spacing:10,maxChildWidth:240}}},pO=e=>{const n=e.Container||v.Fragment,t=e.UnknownMessage||(()=>null),r=e.parser||dO(),i=e.renderer||hO(),a=({templateItems:s,templateVersion:o,parentLayout:l=Ja.box.layout,depth:u=0})=>{if(!Wz(o))throw new Error(`Cannot parse template item due to unsupported template version: ${o}, ${vO}`);return v.createElement(v.Fragment,null,s.map((d,f,p)=>{const m=r.parse(d,{parentLayout:l,depth:u,elemIdx:f,siblings:p}),E=m.transformed,g={key:f,siblings:p,parentLayout:l,parsedProperties:m.properties};switch(E.type){case vt.Carousel:{if(!Array.isArray(E.items)||E.items.length===0)throw new Error("Cannot parse template item as Carousel if carousel has no items.");return v.createElement(i.carouselView,Object.assign({},E,g),E.items.map((y,S)=>v.createElement(a,{key:S,templateItems:y.body.items||[],depth:u+1,templateVersion:y.version})))}case vt.Box:return v.createElement(i.box,Object.assign({},E,g),v.createElement(a,{templateItems:E.items||[],parentLayout:E.layout,depth:u+1,templateVersion:o}));case vt.Text:return v.createElement(i.text,Object.assign({},E,g));case vt.Image:return v.createElement(i.image,Object.assign({},E,g));case vt.TextButton:return v.createElement(i.textButton,Object.assign({},E,g));case vt.ImageButton:return v.createElement(i.imageButton,Object.assign({},E,g));default:return v.createElement(t,{item:E})}}))};return{MessageTemplate:({templateVersion:s,templateItems:o,parentLayout:l=Ja.rootLayout})=>{const u=Yz(o);return v.createElement(Kz,null,v.createElement(n,null,v.createElement(a,{isRoot:!0,parentLayout:l,templateItems:u,templateVersion:s})))},MessageTemplateBase:a}};var Pa;(function(e){e.Web="web",e.Custom="custom",e.UIKit="uikit"})(Pa||(Pa={}));vt.Image,Pa.Web,wi.AspectFill,vt.Box,Hn.Column,Pn.FillParent,vt.Box,Pn.FillParent,Pn.FillParent,vt.Box,Hn.Column,Pn.FillParent,Pn.WrapContent,vt.Text,$n.Center,$n.Center,Pn.FillParent,vt.Image,Pa.Web,Pn.FillParent,wi.AspectFill,vt.Box,Pn.FillParent,vt.Box,Pn.FillParent,Pn.FillParent,vt.Box,Hn.Column,vt.Box,$n.Left,$n.Center,Hn.Row,Pn.FillParent,vt.Text,Pn.FillParent,$n.Center,$n.Left,ti.Bold,vt.ImageButton,Pa.UIKit,wi.AspectFit,vt.Text,vt.TextButton,Pa.Web,ti.Bold;vt.Image,Pa.Web,wi.AspectFill,vt.Box,Hn.Column,Pn.FillParent,vt.Box,Pn.FillParent,Hn.Row,vt.TextButton,Pa.Web,ti.Bold,vt.TextButton,Pa.Web,Pn.FillParent,ti.Bold,vt.Box,Pn.FillParent,Hn.Row,vt.Text,Pn.FillParent,ti.Bold,vt.ImageButton,Pa.UIKit,wi.AspectFit,vt.Text;vt.Box,Hn.Column,vt.Image,wi.AspectFill,vt.Box,Hn.Column,vt.Text,ti.Bold,vt.Text,vt.Box,$n.Left,$n.Center,Hn.Row,vt.Image,wi.AspectFill,vt.Box,$n.Left,$n.Center,Hn.Column,vt.Text,ti.Bold,vt.Text,ti.Bold,vt.Box,$n.Left,$n.Center,Hn.Row,vt.Image,wi.AspectFill,vt.Box,$n.Left,$n.Center,Hn.Column,vt.Text,ti.Bold,vt.Text,ti.Bold,vt.Box,$n.Left,$n.Center,Hn.Row,vt.Image,wi.AspectFill,vt.Box,$n.Left,$n.Center,Hn.Column,vt.Text,ti.Bold,vt.Text,ti.Bold,vt.Box,$n.Left,$n.Center,Hn.Row,vt.TextButton,Pa.Web,ti.Bold,vt.TextButton,Pa.Web,ti.Bold;vt.Box,Hn.Column,vt.Image,vt.Box,Hn.Column,vt.Box,Hn.Row,vt.Box,Hn.Column,vt.Text,ti.Bold,vt.Text,vt.ImageButton,Pa.UIKit,vt.Box,Hn.Column,vt.Box,$n.Left,$n.Center,Hn.Row,vt.Image,wi.AspectFill,vt.Box,Hn.Column,vt.Text,ti.Bold,vt.Text,vt.Box,$n.Left,$n.Center,Hn.Row,vt.Image,wi.AspectFill,vt.Box,Hn.Column,vt.Text,ti.Bold,vt.Text;Pn.FillParent,Pn.FillParent,Pn.FillParent,Pn.FillParent,Pn.FillParent,Pn.FillParent;Pn.FillParent,Pn.WrapContent,Pn.FillParent,Pn.FillParent;const Xz=24;function Zz({spacing:e,childrenLength:n,paddingInlineStart:t,paddingInlineEnd:r}){const i=t,a=r,s=N.useRef(null),o=N.useRef(Array.from({length:n},()=>v.createRef())),l=N.useRef(!1),u=N.useRef(!1),d=N.useRef(null),f=N.useRef({sx:null,sy:null,offset:0,translateX:0,currentIndex:0}),[p,m]=N.useState(()=>o.current.map(()=>0)),E=N.useMemo(()=>{let z=i;return p.map((K,ee)=>{const $=z-(ee>0?e:0),Q=$-K;return z=Q,{start:$,end:Q}})},[p,e,i]),g=N.useMemo(()=>{const z=p.reduce((ee,$)=>ee+$,0),K=e*(n-1);return z+K},[p,e,n]);N.useLayoutEffect(()=>{m(o.current.map(z=>{var K,ee;return(ee=(K=z.current)===null||K===void 0?void 0:K.clientWidth)!==null&&ee!==void 0?ee:0}))},[n]),N.useLayoutEffect(()=>{E.length>0&&(f.current.translateX=E[0].start,L())},[E]);const y=()=>{s.current&&(l.current=!0,s.current.style.cursor="grabbing",s.current.style.transition="none",d.current=requestAnimationFrame(L))},S=()=>{s.current&&(l.current=!1,s.current.style.cursor="grab",s.current.style.transition="transform 0.5s ease",d.current&&(cancelAnimationFrame(d.current),d.current=null))},C=()=>{const{offset:z,currentIndex:K}=f.current,ee=Math.abs(z)>=Xz,$=z<0&&K<n-1,Q=z>0&&K>0;let ne=K;ee&&$?ne=K+1:ee&&Q&&(ne=K-1);function j(Z){var ie,fe;const te=(fe=(ie=s.current)===null||ie===void 0?void 0:ie.clientWidth)!==null&&fe!==void 0?fe:0,le=i,Me=Math.min(0,te-g)-a;return Math.min(le,Math.max(Me,Z))}f.current.currentIndex=ne,f.current.translateX=j(E[ne].start),f.current.offset=0},T=()=>{u.current=!0},I=()=>{u.current=!1},L=()=>{s.current&&(s.current.style.transform=`translateX(${f.current.translateX+f.current.offset}px)`),d.current&&(d.current=requestAnimationFrame(L))},D=()=>{s.current&&(s.current.style.touchAction="pan-x")},O=()=>{s.current&&(s.current.style.touchAction="pan-y")};return{carouselRef:s,childrenRefs:o,handlers:{onMouseDown:z=>{y(),I(),f.current.sx=z.clientX,f.current.sy=z.clientY,f.current.offset=0,d.current=requestAnimationFrame(L)},onMouseMove:z=>{!l.current||f.current.sx===null||(f.current.offset=z.clientX-f.current.sx)},onMouseUp:()=>{l.current&&(I(),C(),S())},onMouseLeave:()=>{l.current&&(I(),C(),S())},onTouchStart:z=>{I(),S();const K=z.touches[0];f.current.sx=K.clientX,f.current.sy=K.clientY,f.current.offset=0,d.current=requestAnimationFrame(L)},onTouchMove:z=>{if(f.current.sx===null||f.current.sy===null||u.current)return;const{clientX:K,clientY:ee}=z.touches[0],{sx:$,sy:Q}=f.current;if(l.current){f.current.offset=K-$;return}Math.abs(ee-Q)>Math.abs(K-$)?T():(f.current.offset=K-$,D(),y())},onTouchEnd:()=>{O(),I(),C(),S()}}}}var Jz=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]]);return t};const e9=({children:e,style:n,spacing:t=Ja.carousel.style.spacing,maxChildWidth:r=Ja.carousel.style.maxChildWidth})=>{const i=n??{},{paddingInlineStart:a=0,paddingInlineEnd:s=0}=i,o=Jz(i,["paddingInlineStart","paddingInlineEnd"]),{carouselRef:l,childrenRefs:u,handlers:d}=Zz({spacing:t,childrenLength:e.length,paddingInlineStart:Number(a),paddingInlineEnd:Number(s)});return v.createElement("div",Object.assign({},d,{ref:l,className:"sb-message-template__carousel",style:Object.assign(Object.assign({},o),{gap:t,width:"100%",overflow:"visible"})}),e.map((f,p)=>v.createElement(t9,{ref:u.current[p],key:p,maxChildWidth:r},f)))},t9=v.forwardRef(function({maxChildWidth:n,children:t},r){const i=n9(t.props,n)?n:"fit-content";return v.createElement("div",{ref:r,style:{maxWidth:i,width:"100%",flexShrink:0,overflow:"hidden",userSelect:"none"}},t)});function n9(e,n){return!!e.templateItems.find(t=>{var r,i,a,s;const o=((r=t.width)===null||r===void 0?void 0:r.type)==="flex"&&((i=t.width)===null||i===void 0?void 0:i.value)===Pn.FillParent,l=((a=t.width)===null||a===void 0?void 0:a.type)==="fixed"&&((s=t.width)===null||s===void 0?void 0:s.value)>=n;return o||l})}function r9(e){var n;return e.type===vt.Text&&((n=e.width)===null||n===void 0?void 0:n.value)==Pn.WrapContent}const GM=({size:e,option:n})=>n==="wrap"?e.type==="flex"&&e.value==Pn.WrapContent:n==="fill"?e.type==="flex"&&e.value==Pn.FillParent:e.type==="fixed",i9=e=>{var n;return typeof e!="string"?!1:((n=e.split(".").pop())===null||n===void 0?void 0:n.toLowerCase())==="gif"};var a9=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]]);return t};const s9=e=>{const{imageSize:n,canvasRef:t,canvasProps:r}=o9(e);return v.createElement("canvas",Object.assign({},r,{ref:t,width:n==null?void 0:n.width,height:n==null?void 0:n.height,onError:e.onError}))},o9=e=>{var{metaData:n,tintColor:t}=e,r=a9(e,["metaData","tintColor"]);const i=N.useRef(null),[a,s]=N.useState(),o=N.useMemo(()=>n!=null&&n.pixelHeight&&(n!=null&&n.pixelWidth)?{width:n.pixelWidth,height:n.pixelHeight}:a,[a,n==null?void 0:n.pixelHeight,n==null?void 0:n.pixelWidth]);return N.useEffect(()=>{if(o==null&&(console.log("Canvas_ReactMessageTemplateImage: no metaData, render fit to container"),i.current)){i.current.style.width="100%",i.current.style.height="100%";const l=i.current.getBoundingClientRect();s(l)}},[o]),N.useEffect(()=>{if(r.src){const l=new Image,u=()=>{if(i.current&&t&&o){const f=i.current.getContext("2d");if(f){const{width:p,height:m}=o;f.clearRect(0,0,p,m),f.beginPath(),f.globalCompositeOperation="source-over",f.fillStyle="#000",f.drawImage(l,0,0,p,m),f.globalCompositeOperation="source-atop",f.fillStyle=t,f.fillRect(0,0,p,m)}}},d=f=>{var p;(p=r.onError)===null||p===void 0||p.call(r,f)};return l.addEventListener("load",u),l.addEventListener("error",d),l.src=r.src,()=>{l.removeEventListener("load",u),l.removeEventListener("error",d)}}},[r.src,o,t]),{canvasRef:i,canvasProps:r,imageSize:o}},l9=e=>v.createElement("img",Object.assign({},e,{onError:e.onError,referrerPolicy:"no-referrer"})),u9=e=>v.createElement("div",{style:Object.assign(Object.assign({},e.style),{backgroundColor:"transparent"})});var c9=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]]);return t};const VM=e=>{var{tintColor:n,metaData:t}=e,r=c9(e,["tintColor","metaData"]);const{hasError:i,onError:a}=d9(r.src);return r.onError&&console.warn("`onError` is intercepted and not executed in the ReactMessageTemplateImage."),i?v.createElement(u9,Object.assign({},r)):n&&!i9(r.src)?v.createElement(s9,Object.assign({},r,{onError:a,tintColor:n,metaData:t})):v.createElement(l9,Object.assign({},r,{onError:a}))},d9=e=>{const[n,t]=N.useState(!1);return N.useEffect(()=>t(!1),[e]),{hasError:n,onError:N.useCallback(()=>t(!0),[])}};function Uc(e){return Object.assign({display:"flex",overflow:"hidden",boxSizing:"border-box"},e)}function kc(e,n,t){p9(e,n,t),f9(e,n)}function h9(e,n,t,r){n&&(e["--border-width"]=`${n}px`,e["--border-color"]=t||"transparent"),r&&(e.borderRadius=r,e["--border-radius"]=`${r}px`)}function f9(e,n){var t,r,i,a,s,o,l,u;const{viewStyle:d}=n;e.marginBlockStart=(t=d==null?void 0:d.margin)===null||t===void 0?void 0:t.top,e.marginBlockEnd=(r=d==null?void 0:d.margin)===null||r===void 0?void 0:r.bottom,e.marginInlineStart=(i=d==null?void 0:d.margin)===null||i===void 0?void 0:i.left,e.marginInlineEnd=(a=d==null?void 0:d.margin)===null||a===void 0?void 0:a.right;const f=((o=(s=d==null?void 0:d.margin)===null||s===void 0?void 0:s.left)!==null&&o!==void 0?o:0)+((u=(l=d==null?void 0:d.margin)===null||l===void 0?void 0:l.right)!==null&&u!==void 0?u:0);f>0&&e.width==="100%"&&(e.width=`calc(100% - ${f}px)`),d!=null&&d.backgroundColor&&(e.backgroundColor=d.backgroundColor),d!=null&&d.backgroundImageUrl&&(e.backgroundImage=`url(${JSON.stringify(d.backgroundImageUrl)})`,e.backgroundSize="100% 100%",e.backgroundPosition="center"),h9(e,d==null?void 0:d.borderWidth,d==null?void 0:d.borderColor,d==null?void 0:d.radius)}function v9(e,n,t){const r={};return e.type==="flex"&&e.value==Pn.FillParent?(r.width="100%",t===Hn.Row&&(r.flex=1)):e.type==="fixed"&&e.value>=0&&(r.width=e.value),n.type==="flex"&&n.value==Pn.FillParent?(r.height="100%",t===Hn.Column&&(r.flex=1)):n.type==="fixed"&&n.value>=0&&(r.height=n.value),r}function p9(e,n,t){var r,i;const{width:a,height:s}=Ja.view.size,{parentLayout:o}=t,l=v9((r=n.width)!==null&&r!==void 0?r:a,(i=n.height)!==null&&i!==void 0?i:s,o);Object.assign(e,l)}function zM(e,n=Ja.box.layout,t=Ja.box.align){n===Hn.Row&&(e.flexDirection="row",e.alignItems=qv(t.vertical),e.justifyContent=qv(t.horizontal)),n===Hn.Column&&(e.flexDirection="column",e.alignItems=qv(t.horizontal),e.justifyContent=qv(t.vertical))}function m9(e,n=Ja.box.align.horizontal){e.textAlign=n}function jM(e,n){const{contentMode:t=wi.AspectFit}=n||{};if(t)switch(t){case wi.AspectFill:e.objectFit="cover";break;case wi.AspectFit:e.objectFit="contain";break;case wi.ScalesToFill:e.objectFit="fill";break}}function qM(e,n){var t,r,i,a;const s=n==null?void 0:n.metaData;!(s!=null&&s.pixelHeight)||!(s!=null&&s.pixelWidth)||((t=n==null?void 0:n.width)===null||t===void 0?void 0:t.type)==="fixed"||((r=n==null?void 0:n.height)===null||r===void 0?void 0:r.type)==="fixed"||(e.aspectRatio=`${(i=n==null?void 0:n.metaData)===null||i===void 0?void 0:i.pixelWidth} / ${(a=n==null?void 0:n.metaData)===null||a===void 0?void 0:a.pixelHeight}`)}function KM(e){return{WebkitLineClamp:e,WebkitBoxOrient:"vertical",display:"-webkit-box",overflow:"hidden",overflowWrap:"anywhere",flex:1}}function $M(e,n,t){const{textStyle:r,width:i}=n,{size:a,color:s,weight:o}=r||{};if(a&&(e.fontSize=a),s&&(e.color=s),o&&(e.fontWeight=o),(i==null?void 0:i.type)==="flex"&&(i==null?void 0:i.value)==Pn.WrapContent&&(e.width="fit-content",e.maxWidth="100%"),n.type===vt.Text){const{siblings:l,elemIdx:u}=t;l!=null&&l.length>=2&&l.every(r9)&&(e.flexShrink=l.length-1===u?1:0)}}const mO=v.createContext(null),_9=e=>{const{message:n,handleWebAction:t,handleCustomAction:r,handlePredefinedAction:i,children:a}=e,s=v.useMemo(()=>({message:n,handleWebAction:t,handleCustomAction:r,handlePredefinedAction:i}),[n==null?void 0:n.updatedAt]);return v.createElement(mO.Provider,{value:s},a)},g9=()=>{const e=v.useContext(mO);if(!e)throw new Error("useMessageContext must be used within a MessageProvider");return e};function _O(e){const n=N.useRef(e);return N.useEffect(()=>{n.current=e},[e]),N.useCallback((...t)=>n.current(...t),[n])}function E9(e,n){const t=_O(e),r=N.useRef(WM);return N.useCallback(a=>{if(r.current(),r.current=WM,a!=null){const s=e(a);typeof s=="function"&&(r.current=s)}},[t,...n])}function WM(){}function y9(e){const n=_O(e);return E9(r=>{const i=new ResizeObserver(a=>{a[0]!=null&&n(a[0])});return i.observe(r),()=>{i.unobserve(r)}},[n])}function C9(){const[e,n]=N.useState(-1),[t,r]=N.useState(-1),[i,a]=N.useState(-1),[s,o]=N.useState(-1),[l,u]=N.useState(-1),[d,f]=N.useState(-1);return{ref:y9(m=>{const{width:E,height:g}=m.contentRect,y=m.target,{width:S,height:C}=y.getBoundingClientRect();n(S),r(C),a(E),o(g),u(S-E),f(C-g)}),width:e,height:t,contentWidth:i,contentHeight:s,paddingWidth:l,paddingHeight:d}}var b9=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]]);return t};function Kv({width:e=Ja.view.size.width,height:n=Ja.view.size.height,parentLayout:t=Ja.box.layout,option:r}){return t===Hn.Row?GM({size:e,option:r}):GM({size:n,option:r})}function S9(e){const{style:n,props:t}=e,r=C9(),{ref:i}=r,a=b9(r,["ref"]),{updateSize:s,sizes:o}=$z(),{id:l,siblings:u,parentLayout:d}=t,{width:f,height:p,paddingWidth:m,paddingHeight:E,contentWidth:g,contentHeight:y}=a;return N.useEffect(()=>{s({id:t.id,width:f,height:p,paddingWidth:m,paddingHeight:E,contentWidth:g,contentHeight:y})},[t.id,f,p,m,E,g,y,s]),{recalculatedStyle:N.useMemo(()=>{const C=(I=0,L)=>{var D,O,R,k;return d===Hn.Row?I+((O=(D=o[L.id])===null||D===void 0?void 0:D.contentWidth)!==null&&O!==void 0?O:0):I+((k=(R=o[L.id])===null||R===void 0?void 0:R.contentHeight)!==null&&k!==void 0?k:0)};if(Kv({width:t.width,height:t.height,parentLayout:d,option:"fill"})){const I=u.filter(({width:O,height:R})=>!Kv({width:O,height:R,parentLayout:d,option:"fill"})).reduce(C,0),L=u.filter(({width:O,height:R})=>Kv({width:O,height:R,parentLayout:d,option:"fill"})).length,D=d===Hn.Row?{maxWidth:`calc((100% - ${I}px) / ${L})`}:{maxHeight:`calc((100% - ${I}px) / ${L})`};return Object.assign(Object.assign(Object.assign({},n),D),f==0&&{height:0})}else{const I=u.findIndex(D=>D.id===l),L=u.slice(0,I).filter(({width:D,height:O})=>Kv({width:D,height:O,parentLayout:d,option:"wrap"})).reduce(C,0);return Object.assign(Object.assign(Object.assign({},n),f===0&&{height:0}),d===Hn.Row?{maxWidth:`calc(100% - ${L}px)`}:{maxHeight:`calc(100% - ${L}px)`})}},[t.width,t.height,d,o,u,n,f,l]),elemRef:i}}var T9=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]]);return t};const N9=(e="")=>["http://","https://","ftp://"].some(n=>e.startsWith(n)),QM=(e="")=>N9(e)?e:`https://${e}`,uh=({children:e,props:n,className:t,style:r})=>{var i,a,s,o,l,u,d,f,p;const{recalculatedStyle:m,elemRef:E}=S9({style:r,props:n}),{message:g,handleWebAction:y,handleCustomAction:S,handlePredefinedAction:C}=g9(),T=!((i=n.viewStyle)===null||i===void 0)&&i.borderWidth?"sb-message-template__border":"",I={paddingBlockStart:(s=(a=n.viewStyle)===null||a===void 0?void 0:a.padding)===null||s===void 0?void 0:s.top,paddingBlockEnd:(l=(o=n.viewStyle)===null||o===void 0?void 0:o.padding)===null||l===void 0?void 0:l.bottom,paddingInlineStart:(d=(u=n.viewStyle)===null||u===void 0?void 0:u.padding)===null||d===void 0?void 0:d.left,paddingInlineEnd:(p=(f=n.viewStyle)===null||f===void 0?void 0:f.padding)===null||p===void 0?void 0:p.right},L=V=>{var H,F,z,K,ee,$,Q;((H=n.action)===null||H===void 0?void 0:H.type)==="web"?y?y(V,n.action,g):(z=window==null?void 0:window.open(QM((F=n==null?void 0:n.action)===null||F===void 0?void 0:F.data),"_blank","noopener noreferrer"))===null||z===void 0||z.focus():((K=n.action)===null||K===void 0?void 0:K.type)==="custom"?S?S(V,n.action,g):($=window==null?void 0:window.open(QM((ee=n==null?void 0:n.action)===null||ee===void 0?void 0:ee.data),"_blank","noopener noreferrer"))===null||$===void 0||$.focus():((Q=n.action)===null||Q===void 0?void 0:Q.type)==="uikit"&&(C==null||C(V,n.action,g))};if(n.type===vt.TextButton)return v.createElement("button",{className:YM(t,T),"data-sb-template-id":n.elementId,style:Object.assign(Object.assign({},r),I),onClick:L},e);const{display:D,flexDirection:O,justifyContent:R,alignItems:k,objectFit:P}=m,G=T9(m,["display","flexDirection","justifyContent","alignItems","objectFit"]);return v.createElement("div",{ref:E,className:YM(t,T,n.action&&"sb-message-template__action"),"data-sb-template-id":n.elementId,style:G,onClick:L},v.createElement("div",{style:Object.assign({display:D,flexDirection:O,justifyContent:R,alignItems:k,objectFit:P,width:"100%",height:"100%"},I)},e))};function YM(...e){return e.filter(n=>!!n).join(" ")}function I9(e){var n,t,r,i;const a=(n=e==null?void 0:e.height)===null||n===void 0?void 0:n.type,s=(t=e==null?void 0:e.width)===null||t===void 0?void 0:t.type,o=a==="fixed"||s==="fixed",l=a==="flex"&&((r=e==null?void 0:e.height)===null||r===void 0?void 0:r.value)===Pn.FillParent||s==="flex"&&((i=e==null?void 0:e.width)===null||i===void 0?void 0:i.value)===Pn.FillParent;return o||l}function M9(e){return e.split(`
`).map((n,t)=>v.createElement(v.Fragment,{key:t},n,v.createElement("br",null)))}function XM(e){const{text:n,maxTextLines:t}=e,r=I9(e),i=typeof t=="number"&&t>0,a=M9(n);if(i||r){const s=Object.assign(Object.assign({},(i||r)&&{maxWidth:"100%"}),r&&{maxHeight:"100%",overflow:"hidden"});return v.createElement("div",{style:s},i?v.createElement("div",{style:KM(t)},a):a)}return i?v.createElement("div",{style:KM(t)},a):a}const gO=hO({views:{box(e){return v.createElement(uh,{className:"sb-message-template__box",elementId:e.elementId,style:e.parsedProperties,props:e},e.children)},text(e){return v.createElement(uh,{className:"sb-message-template__text",elementId:e.elementId,style:e.parsedProperties,props:e},XM(e))},image(e){var n;return v.createElement(uh,{className:"sb-message-template__image-container",elementId:e.elementId,style:e.parsedProperties,props:e},v.createElement(VM,{className:"sb-message-template__image",alt:"image",src:e.imageUrl,style:{width:"100%",height:"100%",aspectRatio:"inherit",objectFit:"inherit"},tintColor:(n=e.imageStyle)===null||n===void 0?void 0:n.tintColor,metaData:e.metaData}))},textButton(e){return v.createElement(uh,{className:"sb-message-template__text-button",elementId:e.elementId,style:e.parsedProperties,props:e},XM(Object.assign({maxTextLines:Ja.textButton.maxTextLines},e)))},imageButton(e){var n;return v.createElement(uh,{className:"sb-message-template__image-container sb-message-template__image-button",elementId:e.elementId,style:e.parsedProperties,props:e},v.createElement(VM,{className:"sb-message-template__image",alt:"image-button",src:e.imageUrl,style:{width:"100%",height:"100%",aspectRatio:"inherit",objectFit:"inherit"},tintColor:(n=e.imageStyle)===null||n===void 0?void 0:n.tintColor,metaData:e.metaData}))},carouselView(e){var n,t;return v.createElement(e9,{maxChildWidth:(n=e.carouselStyle)===null||n===void 0?void 0:n.maxChildWidth,spacing:(t=e.carouselStyle)===null||t===void 0?void 0:t.spacing,style:e.parsedProperties},e.children)}}}),EO=dO({mapBoxProps(e,n){const t=Uc();return kc(t,e,n),zM(t,e.layout,e.align),t},mapTextProps(e,n){var t;const r=Uc({whiteSpace:"pre-line",wordBreak:"break-word"});return kc(r,e,n),$M(r,e,n),zM(r,Hn.Row,e.align),m9(r,(t=e.align)===null||t===void 0?void 0:t.horizontal),r},mapImageProps(e,n){const t=Uc();return kc(t,e,n),jM(t,e.imageStyle),qM(t,e),t},mapTextButtonProps(e,n){const t=Uc({whiteSpace:"pre-line",alignItems:"center",justifyContent:"center"});return kc(t,e,n),$M(t,e,n),t},mapImageButtonProps(e,n){const t=Uc();return kc(t,e,n),jM(t,e.imageStyle),qM(t,e),t},mapCarouselProps(e,n){var t,r,i,a,s,o,l,u;const d=Uc();return kc(d,e,n),d.paddingBlockStart=(r=(t=e.viewStyle)===null||t===void 0?void 0:t.padding)===null||r===void 0?void 0:r.top,d.paddingBlockEnd=(a=(i=e.viewStyle)===null||i===void 0?void 0:i.padding)===null||a===void 0?void 0:a.bottom,d.paddingInlineStart=(o=(s=e.viewStyle)===null||s===void 0?void 0:s.padding)===null||o===void 0?void 0:o.left,d.paddingInlineEnd=(u=(l=e.viewStyle)===null||l===void 0?void 0:l.padding)===null||u===void 0?void 0:u.right,d}});pO({renderer:gO,parser:EO,Container:({children:e,className:n})=>v.createElement("div",{className:`sb-message-template__parent ${n}`,style:{display:"flex",flexDirection:"column",maxWidth:400,marginBlockEnd:24}},e)});var A9=pO({parser:EO,renderer:gO,Container:function(e){var n=e.children,t=e.className;return v.createElement("div",{className:["sb-message-template__parent ".concat(t),"sendbird-message-template__root"].join(" ")},n)}}).MessageTemplate;function w9(e){var n=e.templateItems,t=e.templateVersion;return v.createElement(A9,{templateItems:n,templateVersion:t})}function ZM(e){var n=e.className,t=e.message,r=e.isByMe,i=N.useContext(wn).stringSet,a=t.message;return v.createElement("div",{className:ii([n??"",r?"outgoing":"incoming","sendbird-template-message-item-body__fallback_message"])},a?v.createElement(v.Fragment,null,v.createElement(Ie,{type:Ce.BODY_1,color:de.ONCONTENT_INVERSE_1},a)):v.createElement(v.Fragment,null,v.createElement(Ie,{className:"sendbird-template-message-item-body__fallback_message__header",type:Ce.BODY_1,color:de.ONCONTENT_INVERSE_1},i.UNKNOWN__TEMPLATE_ERROR),v.createElement(Ie,{className:"sendbird-template-message-item-body__fallback_message__description",type:Ce.BODY_1,color:de.ONCONTENT_INVERSE_3},i.UNKNOWN__CANNOT_READ_TEMPLATE)))}var $v="40px";function R9(e){var n=e.className,t=e.isByMe;return v.createElement("div",{className:Zt(n,t?"outgoing":"incoming","sendbird-template-loading-message-item-body")},v.createElement(Ho,{className:"sendbird-message-status__icon",testID:"sendbird-message-status-icon",width:$v,height:$v},v.createElement(We,{type:Se.SPINNER,fillColor:Ve.CONTENT_INVERSE_3,width:$v,height:$v})))}var O9=function(e){var n=e.message,t=e.templateVersion,r=e.templateItems;return v.createElement(_9,{message:n},v.createElement(w9,{templateVersion:t,templateItems:r}))},yO=function(e){var n={},t={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=e[r];if(typeof i=="object"&&i!==null){var a=yO(i),s=a[0],o=a[1];n[r]=s,t[r]=o}else if(typeof i=="string"){var l=i.split(","),u=l[0],d=l[1];n[r]=u,t[r]=d||u}else n[r]=i,t[r]=i}return[n,t]};function D9(e){var n=e.colorVariables,t=e.theme,r=yO(n),i=r[0],a=r[1];return t==="light"?i:a}var L9=function(e){EA(n,e);function n(t){var r=e.call(this,t)||this;return r.state={hasError:!1},r}return n.getDerivedStateFromError=function(){return{hasError:!0}},n.prototype.componentDidCatch=function(t,r){var i;(i=this.props.logger)===null||i===void 0||i.error("Error caught by ErrorBoundary: ",t,r)},n.prototype.render=function(){return this.state.hasError?this.props.fallbackMessage:this.props.children},n}(N.Component),CO=function(e,n,t){t===void 0&&(t="");for(var r=0,i=Object.entries(e);r<i.length;r++){var a=i[r],s=a[0],o=a[1],l=t?"".concat(t,".").concat(s):s;o&&typeof o=="object"?CO(o,n,l):n[l]=o}};function U9(e){var n={};return CO(e,n),n}var k9=500,JM=function(e){var n=e.template,t=e.templateData,r=t===void 0?{}:t,i=e.colorVariables,a=e.theme,s={};i&&a&&(s=D9({colorVariables:i,theme:a}));var o=x(x({},r),s),l=U9(o),u=n;return Object.entries(l).forEach(function(d){var f=d[0],p=d[1],m="\\{".concat(f,"\\}"),E=new RegExp(m,"g");u=u.replace(E,p)}),u};function P9(e){var n,t=e.className,r=t===void 0?"":t,i=e.message,a=e.isByMe,s=a===void 0?!1:a,o=e.theme,l=o===void 0?"light":o,u=(n=i.extendedMessagePayload)===null||n===void 0?void 0:n[uf],d=function(){return v.createElement(ZM,{className:r,message:i,isByMe:s})};if(!(u!=null&&u.key))return d();var f=u.key,p=Tt();if(!p)return d();var m=p.config.logger,E=p.utils,g=E.getCachedTemplate,y=E.updateMessageTemplatesInfo,S=p.stores.appInfoStore.waitingTemplateKeysMap,C=Object.entries(S).map(function(V){var H=V[0],F=V[1];return[H,F.requestedAt,F.erroredMessageIds.join(",")].join("-")}).join("_"),T=N.useState(P()),I=T[0],L=T[1];function D(V,H){for(var F=[],z=0;(z=V.indexOf(H,z))!==-1;)F.push({start:z,end:z+H.length}),z+=H.length;return F}function O(V,H,F){var z="",K=0;return H.forEach(function(ee){var $=ee.start,Q=ee.end;z+=V.slice(K,$)+F,K=Q}),z+=V.slice(K),z}function R(V,H,F){var z=D(V,H);return O(V,z,F)}function k(V){var H=JM({template:V.uiTemplate,templateData:u.variables,colorVariables:V.colorVariables,theme:l});if(u.view_variables){var F={};Object.entries(u.view_variables).forEach(function(z){var K=z[0],ee=z[1],$=[];ee.forEach(function(Q){var ne=Q==null?void 0:Q.key;if(ne){var j=g(ne);j||m.error("TemplateMessageItemBody | simple template is expected to be cached: ",ne);var Z=JM({template:j.uiTemplate,templateData:Q.variables,colorVariables:j.colorVariables,theme:l});$.push({version:j.version,body:{items:JSON.parse(Z)}}),F[K]=JSON.stringify($)}})}),Object.entries(F).forEach(function(z){var K=z[0],ee=z[1];H=R(H,'"@{'.concat(K,'}"'),ee)})}return JSON.parse(H)}function P(){var V={filledMessageTemplateItemsList:[],isErrored:!1},H=[],F=g(f);if(F||H.push(f),u!=null&&u.view_variables)try{Object.entries(u.view_variables).forEach(function(K){var ee=K[0],$=K[1];$.forEach(function(Q){var ne=Q==null?void 0:Q.key;ne&&!g(ne)&&!H.includes(ne)&&H.push(ne)})})}catch{return m.error("TemplateMessageItemBody | received view_variables is malformed: ",u),V.isErrored=!0,V}try{if(H.length>0)G(H);else if(F){var z=k(F);V.filledMessageTemplateItemsList.push({version:F.version,items:z})}}catch(K){m.error("TemplateMessageItemBody | fetching non-cached templates by given template keys failed: ",K),V.isErrored=!0}return V}N.useEffect(function(){if(!I.isErrored&&I.filledMessageTemplateItemsList.length===0){var V=P();L(V)}},[u.key,C]);function G(V){if(V.length>0){var H=[];V.forEach(function(K){var ee=S[K];H.push([K,ee])});var F=Date.now(),z=[];H.forEach(function(K){var ee=K[0],$=K[1];if(!$||$.erroredMessageIds.indexOf(i.messageId)===-1&&F>$.requestedAt+k9)z.push(ee);else if($.erroredMessageIds.indexOf(i.messageId)>-1)throw new Error("TemplateMessageItemBody | fetching template key ".concat(ee," for messageId: ").concat(i.messageId," has failed."))}),z.length>0&&y(z,i.messageId,F)}}return I.isErrored?d():I.filledMessageTemplateItemsList.length===0?v.createElement(R9,{className:r,isByMe:s}):v.createElement("div",{className:ii([r,s?"outgoing":"incoming","sendbird-template-message-item-body"])},v.createElement(L9,{fallbackMessage:v.createElement(ZM,{className:r,message:i,isByMe:s}),logger:m},I.filledMessageTemplateItemsList.map(function(V,H){var F;return v.createElement(O9,{key:H,message:i,templateVersion:(F=V.version)!==null&&F!==void 0?F:0,templateItems:V.items})})))}function bO(e){var n=e.text,t=e.onCancel,r=N.useContext(wn).stringSet,i=N.useRef(null),a=bC(i,{Enter:function(){return t==null?void 0:t()},Escape:function(){return t==null?void 0:t()}});return v.createElement("div",{onKeyDown:a},v.createElement(Rr,{contentClassName:"sendbird-message-feedback-modal-content__mobile",type:Gn.PRIMARY,onSubmit:t,onClose:t,submitText:r.BUTTON__OK,renderHeader:function(){return v.createElement("div",{className:"sendbird-modal__header"},v.createElement(Ie,{type:Ce.H_1,color:de.ONBACKGROUND_1,className:"sendbird-message-feedback-modal-header"},n))},customFooter:v.createElement("div",{className:"sendbird-message-feedback-modal-footer__root_failed"},v.createElement(Oi,{onClick:t},v.createElement(Ie,{type:Ce.BUTTON_3,color:de.ONCONTENT_1},r.BUTTON__OK)))}))}function SO(e){var n=e.className,t=n===void 0?"":n,r=e.isByMe,i=e.displayThreadReplies,a=e.bottom,s=e.message,o=e.channel,l=e.userId,u=e.chainBottom,d=u===void 0?!1:u,f=N.useRef(null),p=Ul(),m=p.disableUserProfile,E=p.renderUserProfile;return r||d||!Vu(s)?null:v.createElement(zi,{menuTrigger:function(g){var y,S;return v.createElement(Fr,{className:Zt(t,i&&"use-thread-replies"),src:((S=(y=o==null?void 0:o.members)===null||y===void 0?void 0:y.find(function(C){return(C==null?void 0:C.userId)===s.sender.userId}))===null||S===void 0?void 0:S.profileUrl)||s.sender.profileUrl||"",ref:f,width:"28px",height:"28px",bottom:a,onClick:function(){m||g()}})},menuItems:function(g){return E?E({user:s.sender,close:g,currentUserId:l,avatarRef:f}):v.createElement(Di,{parentRef:f,parentContainRef:f,closeDropdown:g,style:{paddingTop:"0px",paddingBottom:"0px"}},v.createElement(kl,{user:s.sender,onSuccess:g}))}})}var x9=function(e){var n=e.children;return v.createElement(Ie,{className:"sendbird-form-message__input__label",type:Ce.CAPTION_2,color:de.ONBACKGROUND_2},n)},F9=function(e){var n=e.name,t=e.required,r=e.errorMessage,i=e.isValid,a=e.values,s=e.isInvalidated,o=e.isSubmitTried,l=e.style,u=e.onFocused,d=e.onChange,f=e.placeHolder,p=e.isSubmitted,m=l.layout,E=l.options,g=E===void 0?[]:E,y=l.resultCount,S=y??{},C=S.min,T=C===void 0?1:C,I=S.max,L=I===void 0?1:I,D=P(),O=N.useContext(wn).stringSet,R=function(){u==null||u(!0)},k=function(){u==null||u(!1)};function P(){return p?g.map(function(V){return{state:a.includes(V)?"submittedSelected":"submittedDefault",option:V}}):g.map(function(V){return{state:a.includes(V)?"selected":"default",option:V}})}var G=function(V){if(!p){var H;T===1&&L===1?H=D[V].state==="selected"?[]:[D[V].option]:H=D.reduce(function(F,z,K){return K===V?z.state==="default"&&a.length<L&&F.push(z.option):z.state==="selected"&&F.push(z.option),F},[]),d(H)}};return v.createElement("div",{className:"sendbird-form-message__input__root"},v.createElement(x9,null,v.createElement("div",{className:"sendbird-form-message__input__title-container"},n," ",!t&&v.createElement("span",{className:"sendbird-form-message__input__title-optional"},"(optional)"))),v.createElement("div",{className:"sendbird-input_for_form"},function(){switch(m){case"chip":return v.createElement("div",{className:"sendbird-form-message__input__chip-container"},D.map(function(H,F){return v.createElement("div",{className:"sendbird-form-message__input__chip ".concat(H.state),key:F,onClick:function(){return G(F)}},v.createElement("div",{className:"sendbird-form-message__input__chip-text"},H.option),p&&H.state==="submittedSelected"&&v.createElement(We,{className:"sendbird-form-message__submitted-check-icon-chip",type:Se.DONE,fillColor:Ve.SECONDARY_2,width:"20px",height:"20px"}))}));case"textarea":{var V=a.length>0?a[0]:"";return v.createElement("div",{className:"sendbird-form-message__input__container"},p?v.createElement("div",{className:"sendbird-form-message__submitted-input-box textarea"},v.createElement("div",{className:"sendbird-form-message__submitted-input-box-text"},V),i&&v.createElement("div",{className:"sendbird-form-message__submitted-check-icon-container"},v.createElement(We,{type:Se.DONE,fillColor:Ve.SECONDARY_2,width:"20px",height:"20px"})),!V&&v.createElement(Ie,{className:"sendbird-input__placeholder",type:Ce.BODY_1,color:de.ONBACKGROUND_3},O.FORM_ITEM_OPTIONAL_EMPTY)):v.createElement(v.Fragment,null,v.createElement("textarea",{className:Zt("sendbird-input__input",!!r&&"error","sendbird-form-message__input__textarea"),required:t,disabled:p,value:V,onFocus:R,onBlur:k,onChange:function(H){var F=H.target.value;d(F?[F]:[])}}),f&&!V&&v.createElement(Ie,{className:"sendbird-input__placeholder textarea",type:Ce.BODY_1,color:de.ONBACKGROUND_3},f)))}case"text":case"number":case"phone":case"email":{var V=a.length>0?a[0]:"";return v.createElement("div",{className:"sendbird-form-message__input__container"},p?v.createElement("div",{className:"sendbird-form-message__submitted-input-box"},v.createElement("div",{className:"sendbird-form-message__submitted-input-box-text"},V),i&&v.createElement("div",{className:"sendbird-form-message__submitted-check-icon-container"},v.createElement(We,{type:Se.DONE,fillColor:Ve.SECONDARY_2,width:"20px",height:"20px"})),!V&&v.createElement(Ie,{className:"sendbird-input__placeholder",type:Ce.BODY_1,color:de.ONBACKGROUND_3},O.FORM_ITEM_OPTIONAL_EMPTY)):v.createElement(v.Fragment,null,v.createElement("input",{type:m==="number"?"text":m,inputMode:m==="number"?"numeric":"text",className:"sendbird-input__input ".concat(r?"error":""),name:n,required:t,disabled:p,value:V,onFocus:R,onBlur:k,onChange:function(F){var z=F.target.value;d(z?[z]:[])}}),f&&!V&&v.createElement(Ie,{className:"sendbird-input__placeholder",type:Ce.BODY_1,color:de.ONBACKGROUND_3},f)))}default:return v.createElement(v.Fragment,null)}}(),r&&(o||s)&&v.createElement(Ie,{className:"sendbird-form-message__error-label",type:Ce.CAPTION_3},r)))},H9=function(e){var n=e.isByMe,t=e.text;return v.createElement("div",{className:ii(["sendbird-unknown-message-item-body",n?"outgoing":"incoming"])},v.createElement(Ie,{className:"sendbird-unknown-message-item-body__description",type:Ce.BODY_1,color:n?de.ONCONTENT_3:de.ONBACKGROUND_3},t))};function B9(e){var n=this,t=e.message,r=e.form,i=e.isByMe,a=e.logger,s=r.items,o=r.id,l=N.useContext(wn).stringSet,u=N.useState(!1),d=u[0],f=u[1],p=N.useState(!1),m=p[0],E=p[1],g=N.useState(function(){var O=[];return s.forEach(function(R){var k=R.required,P=R.style,G=P===void 0?{}:P,V=G.layout,H=G.defaultOptions,F=H===void 0?[]:H;O.push({draftValues:V==="chip"?F:[],required:k,errorMessage:null,isInvalidated:!1})}),O}),y=g[0],S=g[1],C=r.isSubmitted,T=y.some(function(O){var R=O.errorMessage;return!!R}),I=y.some(function(O){var R=O.isInvalidated;return R}),L=T&&(m||I)||C,D=N.useCallback(function(){return Wt(n,void 0,void 0,function(){var O,R,k;return Qt(this,function(P){switch(P.label){case 0:E(!0),P.label=1;case 1:return P.trys.push([1,3,,4]),O=y.some(function(G){var V=G.errorMessage;return V}),O?[2]:(R=y.some(function(G){return G.required&&(!G.draftValues||G.draftValues.length===0)}),R?(S(function(G){return G.map(function(V){return V.required&&V.draftValues.length===0?x(x({},V),{errorMessage:l.FORM_ITEM_REQUIRED}):V})}),[2]):(y.forEach(function(G,V){s[V].draftValues=G.draftValues}),[4,t.submitMessageForm()]));case 2:return P.sent(),[3,4];case 3:return k=P.sent(),f(!0),a==null||a.error(k),[3,4];case 4:return[2]}})})},[y,t.messageId,t.submitMessageForm,o]);return bR(r.version)?v.createElement("div",{className:ii(["".concat(cC," disable-hover"),"sendbird-form-message__root","incoming"])},s.map(function(O,R){var k,P=O.name,G=O.placeholder,V=O.id,H=O.required,F=O.style,z=y[R],K=z.draftValues,ee=K===void 0?[]:K,$=z.errorMessage;return v.createElement(F9,{key:V,style:F,placeHolder:G,values:(k=O.submittedValues)!==null&&k!==void 0?k:ee,isInvalidated:y[R].isInvalidated,isSubmitTried:m,errorMessage:$,isValid:C,isSubmitted:C,name:P,required:H,onFocused:function(Q){$&&!Q&&!y[R].isInvalidated?S(function(ne){var j=ne.slice(0);return j[R]=x(x({},j[R]),{isInvalidated:!0}),j}):$||S(function(ne){var j=ne.slice(0);return j[R]=x(x({},j[R]),{isInvalidated:!1}),j})},onChange:function(Q){S(function(ne){var j=ne.slice(0);return j[R]=x(x({},j[R]),{draftValues:Q,errorMessage:function(){return O.isValid(Q)?H&&Q.length===0?l.FORM_ITEM_REQUIRED:null:l.FORM_ITEM_INVALID}()}),j})}})}),v.createElement(Oi,{className:"sendbird-form-message__submit-button",onClick:D,disabled:L,labelType:Ce.BUTTON_2,labelColor:de.ONCONTENT_1},C?"Submitted successfully":"Submit"),d&&v.createElement(bO,{text:"Submit failed.",onCancel:function(){f(!1)}})):v.createElement(H9,{isByMe:i,text:l.FORM_VERSION_ERROR})}var G9="sendbird-message-content__middle__message-item-body",TO=function(e){var n,t=e.className,r=t===void 0?G9:t,i=e.message,a=e.channel,s=e.showFileViewer,o=e.onMessageHeightChange,l=e.onBeforeDownloadFileMessage,u=e.mouseHover,d=e.isMobile,f=e.config,p=e.isReactionEnabledInChannel,m=e.isByMe,E=(n=e.customSubcomponentsProps)!==null&&n!==void 0?n:{},g=SC({isMobile:d}),y=TC(i),S=mh(),C=(a==null?void 0:a.isGroupChannel())&&f.groupChannel.enableOgtag,T=(a==null?void 0:a.isGroupChannel())&&f.groupChannel.enableFormTypeMessage,I=function(){return v.createElement(Dz,{className:r,message:i,isByMe:m,mouseHover:u,isReactionEnabled:p})};return si(i).when(function(L){return T&&R2(L)},function(){return v.createElement(B9,{isByMe:m,message:i,form:i.messageForm,logger:f.logger})}).when(Vp,function(){var L,D,O=i.extendedMessagePayload[uf];return O2(O)?v.createElement(P9,{className:r,message:i,isByMe:m,theme:f==null?void 0:f.theme}):((D=(L=f.logger)===null||L===void 0?void 0:L.error)===null||D===void 0||D.call(L,"TemplateMessageItemBody: invalid type value in message.extendedMessagePayload.message_template.",O),I())}).when(function(L){return C&&Vu(L)&&hm(L)},function(){var L;return v.createElement(fz,{className:r,message:i,isByMe:m,mouseHover:u,isMentionEnabled:(L=f.groupChannel.enableMention)!==null&&L!==void 0?L:!1,isReactionEnabled:p,onMessageHeightChange:o,isMarkdownEnabled:f.groupChannel.enableMarkdownForUserMessage})}).when(c7,function(){var L;return v.createElement(mz,{className:r,message:i,isByMe:m,mouseHover:u,isMentionEnabled:(L=f.groupChannel.enableMention)!==null&&L!==void 0?L:!1,isReactionEnabled:p,isMarkdownEnabled:f.groupChannel.enableMarkdownForUserMessage})}).when(function(L){return Zh(L)===S.FILE},function(){return v.createElement(_z,{className:r,message:i,isByMe:m,mouseHover:u,isReactionEnabled:p,onBeforeDownloadFileMessage:l})}).when(Ri,function(){var L;return v.createElement(aO,x({className:r,message:i,isByMe:m,mouseHover:u,isReactionEnabled:p,threadMessageKindKey:g,statefulFileInfoList:y,onBeforeDownloadFileMessage:l},(L=E.MultipleFilesMessageItemBody)!==null&&L!==void 0?L:{}))}).when(Fa,function(){var L;return v.createElement(uO,{className:r,message:i,channelUrl:(L=a==null?void 0:a.url)!==null&&L!==void 0?L:"",isByMe:m,isReactionEnabled:p})}).when(eo,function(){var L;return v.createElement(Oz,x({className:r,message:i,isByMe:m,mouseHover:u,isReactionEnabled:p,showFileViewer:s,style:d?{width:"100%"}:{}},(L=E.ThumbnailMessageItemBody)!==null&&L!==void 0?L:{}))}).otherwise(function(){return I()})},NO=function(e){var n,t,r=e.channel,i=e.message;return v.createElement(Ie,{className:"sendbird-message-content__middle__sender-name",type:Ce.CAPTION_2,color:de.ONBACKGROUND_2},((t=(n=r==null?void 0:r.members)===null||n===void 0?void 0:n.find(function(a){var s;return(a==null?void 0:a.userId)===((s=i==null?void 0:i.sender)===null||s===void 0?void 0:s.userId)}))===null||t===void 0?void 0:t.nickname)||dp(i))},eA=v.forwardRef(function(e,n){var t=e.children,r=e.isSelected,i=e.onClick,a=i===void 0?function(){}:i,s=e.disabled,o=s===void 0?!1:s;return v.createElement("button",{className:["sendbird-iconbutton__feedback",r?"sendbird-iconbutton__feedback__pressed":"",o?"sendbird-iconbutton__feedback__disabled":""].join(" "),ref:n,type:"button",onClick:function(l){a==null||a(l)},disabled:o},v.createElement("span",{className:["sendbird-iconbutton__feedback__inner",r?"sendbird-iconbutton__feedback__inner__pressed":"",o?"sendbird-iconbutton__feedback__inner__disabled":""].join(" ")},t))});function V9(e){var n=e.hideMenu,t=e.onEditFeedback,r=e.onRemoveFeedback,i=Ft().stringSet;return v.createElement(Em,{onBackdropClick:n},v.createElement("div",{className:"sendbird-message__bottomsheet--feedback-options-menu"},v.createElement("div",{className:"sendbird-message__bottomsheet--feedback-option",onClick:function(){n(),t()}},v.createElement(Ie,{type:Ce.BODY_1,color:de.ONBACKGROUND_1},i.EDIT_COMMENT)),v.createElement("div",{className:"sendbird-message__bottomsheet--feedback-option",onClick:function(){n(),r()}},v.createElement(Ie,{type:Ce.BODY_1,color:de.ERROR},i.REMOVE_FEEDBACK))))}var Gc=function(e){var n=e.children;return v.createElement(Ie,{className:"sendbird-input-label",type:Ce.CAPTION_3,color:de.ONBACKGROUND_1},n)},Yp=v.forwardRef(function(e,n){var t=e.name,r=e.required,i=e.disabled,a=e.value,s=e.placeHolder,o=e.autoFocus,l=o===void 0?!1:o,u=N.useState(a),d=u[0],f=u[1];return v.createElement("div",{className:"sendbird-input"},v.createElement("input",{className:"sendbird-input__input",ref:n,name:t,required:r,disabled:i,value:d,onChange:function(p){f(p.target.value)},autoFocus:l}),s&&!d&&v.createElement(Ie,{className:"sendbird-input__placeholder",type:Ce.BODY_1,color:de.ONBACKGROUND_3},s))});function z9(e){var n,t,r=e.selectedFeedback,i=e.message,a=e.onClose,s=e.onSubmit,o=e.onUpdate,l=e.onRemove,u=N.useContext(wn).stringSet,d=_r().isMobile,f=(i==null?void 0:i.myFeedback)&&r===i.myFeedback.rating,p=(n=i==null?void 0:i.myFeedback)===null||n===void 0?void 0:n.comment,m=function(){var S,C,T;if(r){var I=(C=(S=g.current)===null||S===void 0?void 0:S.value)!==null&&C!==void 0?C:"";f?I!==((T=i.myFeedback)===null||T===void 0?void 0:T.comment)?o==null||o(r,I):a==null||a():i.myFeedback||s==null||s(r,I)}},E=N.useRef(),g=N.useRef(),y=bC(E,{Enter:function(){return m()},Escape:function(){return a==null?void 0:a()}});return v.createElement("div",{onKeyDown:y},v.createElement(Rr,{contentClassName:"sendbird-message-feedback-modal-content__mobile",type:Gn.PRIMARY,onCancel:a,onSubmit:function(){m()},submitText:u.BUTTON__SUBMIT,renderHeader:function(){return v.createElement("div",{className:"sendbird-modal__header"},v.createElement(Ie,{type:Ce.H_1,color:de.ONBACKGROUND_1,className:"sendbird-message-feedback-modal-header"},u.FEEDBACK_MODAL_TITLE))},customFooter:v.createElement("div",{className:"sendbird-message-feedback-modal-footer__root"},!d&&(i!=null&&i.myFeedback)&&r===i.myFeedback.rating?v.createElement(Oi,{type:Gn.WARNING,onClick:l,labelType:Ce.BUTTON_3},u.BUTTON__REMOVE_FEEDBACK):v.createElement("div",null),v.createElement("div",{className:"sendbird-message-feedback-modal-footer__right-content"},v.createElement(Oi,{type:Gn.SECONDARY,onClick:a},v.createElement(Ie,{type:Ce.BUTTON_3,color:de.ONBACKGROUND_1},u.BUTTON__CANCEL)),v.createElement(Oi,{onClick:function(){return m()}},v.createElement(Ie,{type:Ce.BUTTON_3,color:de.ONCONTENT_1},p?u.BUTTON__SAVE:u.BUTTON__SUBMIT))))},v.createElement("div",{className:"sendbird-message-feedback-modal-body__root"},v.createElement(Yp,{name:"sendbird-message-feedback-modal-body__root",ref:g,value:f?(t=i.myFeedback)===null||t===void 0?void 0:t.comment:void 0,placeHolder:u.FEEDBACK_CONTENT_PLACEHOLDER,autoFocus:!0}))))}function NC(e,n){var t=N.useState(!1),r=t[0],i=t[1];return N.useEffect(function(){var a=Array.isArray(n)?n:[n],s=function(){var d,f=a==null?void 0:a.map(function(p){return p==null?void 0:p.querySelector(e)});i((d=f==null?void 0:f.some(function(p){return!!p}))!==null&&d!==void 0?d:!1)};s();var o=function(d){d.forEach(function(f){(f.addedNodes.length||f.removedNodes.length)&&(Array.from(f.addedNodes).forEach(function(p){p.nodeType===Node.ELEMENT_NODE&&p.matches(e)&&i(!0)}),Array.from(f.removedNodes).forEach(function(p){p.nodeType===Node.ELEMENT_NODE&&p.matches(e)&&i(!1)}))})},l=new MutationObserver(o),u={childList:!0,subtree:!0};return a==null||a.forEach(function(d){d&&l.observe(d,u)}),function(){l.disconnect()}},[e,n]),r}var hy;(function(e){e.NOT_APPLICABLE="NOT_APPLICABLE",e.NO_FEEDBACK="NO_FEEDBACK",e.SUBMITTED="SUBMITTED"})(hy||(hy={}));function j9(e){var n,t,r,i=e.channel,a=e.message,s=e.showFileViewer,o=e.onMessageHeightChange,l=e.onBeforeDownloadFileMessage,u=e.renderSenderProfile,d=e.renderMessageHeader,f=e.renderMessageBody,p=e.isByMe,m=e.displayThreadReplies,E=e.mouseHover,g=e.isMobile,y=e.isReactionEnabledInChannel,S=e.hoveredMenuClassName,C=e.templateType,T=e.useReplying,I=Tt().config,L=Ft().dateLocale,D=(n=u7[C])!==null&&n!==void 0?n:"",O=u(x(x({},e),{chainBottom:!1,className:"",isByMe:p,displayThreadReplies:m})),R=d(e),k=f({message:a,channel:i,showFileViewer:s,onMessageHeightChange:o,mouseHover:E,isMobile:g,config:I,isReactionEnabledInChannel:y,isByMe:p,onBeforeDownloadFileMessage:l}),P=v.createElement(Ie,{className:Zt("sendbird-message-content__middle__body-container__created-at","right",S,D),type:Ce.CAPTION_3,color:de.ONBACKGROUND_2},wr((a==null?void 0:a.createdAt)||0,"p",{locale:L})),G=(t=a.extendedMessagePayload)===null||t===void 0?void 0:t[uf],V=(r=G==null?void 0:G.container_options)!==null&&r!==void 0?r:{},H=V.profile,F=H===void 0?!0:H,z=V.time,K=z===void 0?!0:z,ee=V.nickname,$=ee===void 0?!0:ee,Q=F||$;return v.createElement("div",{className:"sendbird-message-content__sendbird-ui-container-type__default__root"},!p&&Q&&!T&&v.createElement("div",{className:"sendbird-message-content__sendbird-ui-container-type__default__header-container"},v.createElement("div",{className:"sendbird-message-content__sendbird-ui-container-type__default__header-container__left__profile"},F&&O),$&&R),k,!p&&K&&v.createElement("div",{className:"sendbird-message-content__sendbird-ui-container-type__default__bottom"},P))}function q9(e){var n=this,t,r,i,a,s,o,l,u,d,f,p,m,E,g=e.className,y=e.userId,S=e.channel,C=e.message,T=e.disabled,I=T===void 0?!1:T,L=e.chainTop,D=L===void 0?!1:L,O=e.chainBottom,R=O===void 0?!1:O,k=e.isReactionEnabled,P=k===void 0?!1:k,G=e.disableQuoteMessage,V=G===void 0?!1:G,H=e.replyType,F=e.threadReplySelectType,z=e.nicknamesMap,K=e.emojiContainer,ee=e.scrollToMessage,$=e.showEdit,Q=e.showRemove,ne=e.showFileViewer,j=e.resendMessage,Z=e.deleteMessage,ie=e.toggleReaction,fe=e.setQuoteMessage,te=e.onReplyInThread,le=e.onQuoteMessageClick,Me=e.onMessageHeightChange,ae=e.onBeforeDownloadFileMessage,he=e.filterEmojiCategoryIds,pe=Fo(e),Ne=pe.renderSenderProfile,_e=Ne===void 0?function(It){return v.createElement(SO,x({},It))}:Ne,ge=pe.renderMessageBody,me=ge===void 0?function(It){return v.createElement(TO,x({},It))}:ge,Le=pe.renderMessageHeader,Qe=Le===void 0?function(It){return v.createElement(NO,x({},It))}:Le,Pe=pe.renderMessageMenu,Ge=Pe===void 0?function(It){return v.createElement(mC,x({},It))}:Pe,De=pe.renderEmojiMenu,tt=De===void 0?function(It){return v.createElement(_C,x({},It))}:De,Ue=pe.renderEmojiReactions,Ye=Ue===void 0?function(It){return v.createElement(EC,x({},It))}:Ue,yt=pe.renderMobileMenuOnLongPress,Nt=yt===void 0?function(It){return v.createElement(CC,x({},It))}:yt,Rt=Ft(),st=Rt.dateLocale,Be=Rt.stringSet,nt=Tt(),qe=nt.config,rn=nt.eventHandlers,it=qe.logger,Ct=(t=rn==null?void 0:rn.reaction)===null||t===void 0?void 0:t.onPressUserProfile,Je=N.useRef(),pt=N.useRef(),Ut=N.useRef(),Pt=_r().isMobile,Ht=N.useState(!1),bt=Ht[0],qt=Ht[1],Lt=N.useState(!1),wt=Lt[0],Et=Lt[1],xe=NC("#".concat(df(C.messageId),".").concat(cf),[document.getElementById(td),document.getElementById(hf)]),ye=N.useState(!1),Ze=ye[0],St=ye[1],Ot=N.useState(!1),an=Ot[0],xt=Ot[1],dt=N.useState(""),Jt=dt[0],ln=dt[1],Bt=y===((r=C==null?void 0:C.sender)===null||r===void 0?void 0:r.userId)||(C==null?void 0:C.sendingStatus)==="pending"||(C==null?void 0:C.sendingStatus)==="failed",En=Bt?"outgoing":"incoming",Mn=D?"chain-top":"",Ke=P&&!(S!=null&&S.isEphemeral),ht=Ke?"use-reactions":"",Fe=xe?"sendbird-mouse-hover":"",Dt=!!((H==="QUOTE_REPLY"||H==="THREAD")&&(C!=null&&C.parentMessageId)&&(C!=null&&C.parentMessage)&&!V),Gt=Dt?"use-quote":"",zt=((i=C==null?void 0:C.threadInfo)===null||i===void 0?void 0:i.replyCount)&&C.threadInfo.replyCount>0&&H==="THREAD",fn=!Bt&&!!(C!=null&&C.myFeedbackStatus)&&C.myFeedbackStatus!==hy.NOT_APPLICABLE,Dn=!!(!((a=qe==null?void 0:qe.groupChannel)===null||a===void 0)&&a.enableFeedback)&&fn,Vn=(s=C==null?void 0:C.myFeedback)===null||s===void 0?void 0:s.rating,ot=!Vp(C)&&!R2(C),se=ot&&Pt,ze=ot&&Bt&&!Pt,mt=ot&&zt,vn=ot&&!Bt&&!Pt,Sn=function(){var It=2;return pt.current&&(It+=4+pt.current.clientHeight),Ut.current&&(It+=4+Ut.current.clientHeight),It>0?It+"px":""},sn=function(){xt(!1)},zn=function(It){It===void 0&&(It=!1),Pt&&It?St(!0):xt(!0)},hr=rs({onLongPress:function(){se&&qt(!0)},onClick:Cn},{delay:300,shouldPreventDefault:!1});if(A2(C))return v.createElement(ez,{message:C});if(Vp(C)){var fr=C.extendedMessagePayload[uf];if(O2(fr))return v.createElement(j9,x({},e,{renderSenderProfile:_e,renderMessageHeader:Qe,renderMessageBody:me,isByMe:Bt,displayThreadReplies:zt,mouseHover:wt,isMobile:Pt,isReactionEnabledInChannel:Ke,hoveredMenuClassName:Fe,templateType:fr.type,useReplying:Dt}))}return v.createElement("div",{className:ii([g??"","sendbird-message-content",En]),onMouseOver:function(){return Et(!0)},onMouseLeave:function(){return Et(!1)}},v.createElement("div",{className:Zt("sendbird-message-content__left",ht,En,Gt),"data-testid":"sendbird-message-content__left"},_e(x(x({},e),{className:"sendbird-message-content__left__avatar",isByMe:Bt,displayThreadReplies:zt,bottom:Sn()})),ze&&v.createElement("div",{className:Zt("sendbird-message-content-menu",ht,Fe,En)},Ge({channel:S,message:C,isByMe:Bt,replyType:H,showEdit:$,showRemove:Q,resendMessage:j,setQuoteMessage:fe,onReplyInThread:function(It){var pn,gn,on=It.message;F===$a.THREAD?te==null||te({message:on}):F===$a.PARENT&&(ee==null||ee((gn=(pn=on.parentMessage)===null||pn===void 0?void 0:pn.createdAt)!==null&&gn!==void 0?gn:0,on.parentMessageId))},deleteMessage:Z}),Ke&&tt({message:C,userId:y,emojiContainer:K,toggleReaction:ie,filterEmojiCategoryIds:he}))),v.createElement("div",x({className:Zt("sendbird-message-content__middle"),"data-testid":"sendbird-message-content__middle"},Pt?x({},hr):{},{ref:Je}),!Bt&&!D&&!Dt&&Qe(e),Dt?v.createElement("div",{className:Zt("sendbird-message-content__middle__quote-message",Bt?"outgoing":"incoming",Gt),"data-testid":"sendbird-message-content__middle__quote-message"},v.createElement(nz,{className:"sendbird-message-content__middle__quote-message__quote",message:C,userId:y,isByMe:Bt,isUnavailable:((o=S==null?void 0:S.messageOffsetTimestamp)!==null&&o!==void 0?o:0)>((u=(l=C.parentMessage)===null||l===void 0?void 0:l.createdAt)!==null&&u!==void 0?u:0),onClick:function(){var It;H==="THREAD"&&F===$a.THREAD&&(le==null||le({message:C})),(H==="QUOTE_REPLY"||H==="THREAD"&&F===$a.PARENT)&&(!((It=C==null?void 0:C.parentMessage)===null||It===void 0)&&It.createdAt)&&(C!=null&&C.parentMessageId)&&(ee==null||ee(C.parentMessage.createdAt,C.parentMessageId))}})):null,v.createElement("div",{className:Zt("sendbird-message-content__middle__body-container")},Bt&&!R&&v.createElement("div",{className:Zt("sendbird-message-content__middle__body-container__created-at","left",Fe)},v.createElement("div",{className:"sendbird-message-content__middle__body-container__created-at__component-container"},v.createElement(pC,{message:C,channel:S}))),me({message:C,channel:S,showFileViewer:ne,onMessageHeightChange:Me,mouseHover:wt,isMobile:Pt,config:qe,isReactionEnabledInChannel:Ke,isByMe:Bt,onBeforeDownloadFileMessage:ae}),Ke&&((d=C==null?void 0:C.reactions)===null||d===void 0?void 0:d.length)>0&&v.createElement("div",{className:Zt("sendbird-message-content-reactions",Ri(C)?"image-grid":Bt&&!eo(C)&&!hm(C)&&"primary",wt&&"mouse-hover")},Ye({userId:y,message:C,channel:S,isByMe:Bt,emojiContainer:K??new m2({}),memberNicknamesMap:z??new Map,toggleReaction:ie,onPressUserProfile:Ct,filterEmojiCategoryIds:he})),!Bt&&!R&&v.createElement(Ie,{className:Zt("sendbird-message-content__middle__body-container__created-at","right",Fe),type:Ce.CAPTION_3,color:de.ONBACKGROUND_2},wr((C==null?void 0:C.createdAt)||0,Be.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:st}))),mt&&(C==null?void 0:C.threadInfo)&&v.createElement(lz,{className:"sendbird-message-content__middle__thread-replies",threadInfo:C==null?void 0:C.threadInfo,onClick:function(){return te==null?void 0:te({message:C})},ref:pt}),Dn&&v.createElement("div",{className:"sendbird-message-content__middle__body-container__feedback-buttons-container",ref:Ut},v.createElement(eA,{isSelected:((f=C==null?void 0:C.myFeedback)===null||f===void 0?void 0:f.rating)===hl.GOOD,onClick:function(){return Wt(n,void 0,void 0,function(){var It,pn,gn;return Qt(this,function(on){switch(on.label){case 0:if(Vn)return[3,5];on.label=1;case 1:return on.trys.push([1,3,,4]),[4,C.submitFeedback({rating:hl.GOOD})];case 2:return on.sent(),zn(),[3,4];case 3:return It=on.sent(),(gn=(pn=qe==null?void 0:qe.logger)===null||pn===void 0?void 0:pn.error)===null||gn===void 0||gn.call(pn,"Channel: Submit feedback failed.",It),ln(Be.FEEDBACK_FAILED_SUBMIT),[3,4];case 4:return[3,6];case 5:zn(!0),on.label=6;case 6:return[2]}})})},disabled:!!(C!=null&&C.myFeedback)&&C.myFeedback.rating!==hl.GOOD},v.createElement(We,{type:Se.FEEDBACK_LIKE,width:"24px",height:"24px"})),v.createElement(eA,{isSelected:((p=C==null?void 0:C.myFeedback)===null||p===void 0?void 0:p.rating)===hl.BAD,onClick:function(){return Wt(n,void 0,void 0,function(){var It,pn,gn;return Qt(this,function(on){switch(on.label){case 0:if(Vn)return[3,5];on.label=1;case 1:return on.trys.push([1,3,,4]),[4,C.submitFeedback({rating:hl.BAD})];case 2:return on.sent(),zn(),[3,4];case 3:return It=on.sent(),(gn=(pn=qe==null?void 0:qe.logger)===null||pn===void 0?void 0:pn.error)===null||gn===void 0||gn.call(pn,"Channel: Submit feedback failed.",It),ln(Be.FEEDBACK_FAILED_SUBMIT),[3,4];case 4:return[3,6];case 5:zn(!0),on.label=6;case 6:return[2]}})})},disabled:!!(C!=null&&C.myFeedback)&&C.myFeedback.rating!==hl.BAD},v.createElement(We,{type:Se.FEEDBACK_DISLIKE,width:"24px",height:"24px"})))),vn&&v.createElement("div",{className:Zt("sendbird-message-content__right",Mn,ht,Gt),"data-testid":"sendbird-message-content__right"},v.createElement("div",{className:Zt("sendbird-message-content-menu",Mn,Fe,En)},Ke&&tt({className:"sendbird-message-content-menu__reaction-menu",message:C,userId:y,emojiContainer:K,toggleReaction:ie,filterEmojiCategoryIds:he}),Ge({className:"sendbird-message-content-menu__normal-menu",channel:S,message:C,isByMe:Bt,replyType:H,showRemove:Q,resendMessage:j,setQuoteMessage:fe,onReplyInThread:function(It){var pn,gn,on=It.message;F===$a.THREAD?te==null||te({message:on}):F===$a.PARENT&&(ee==null||ee((gn=(pn=on.parentMessage)===null||pn===void 0?void 0:pn.createdAt)!==null&&gn!==void 0?gn:0,on.parentMessageId))},deleteMessage:Z}))),bt&&Vu(C)&&S&&Nt({parentRef:Je,channel:S,hideMenu:function(){qt(!1)},message:C,isReactionEnabled:Ke,isByMe:Bt,userId:y,replyType:H,disabled:I,showRemove:Q,emojiContainer:K,resendMessage:j,deleteMessage:Z,setQuoteMessage:fe,toggleReaction:ie,showEdit:$,onReplyInThread:function(It){var pn,gn=It.message;F===$a.THREAD?te==null||te({message:gn}):F===$a.PARENT&&(ee==null||ee(((pn=gn==null?void 0:gn.parentMessage)===null||pn===void 0?void 0:pn.createdAt)||0,(gn==null?void 0:gn.parentMessageId)||0))},onDownloadClick:function(It){return Wt(n,void 0,void 0,function(){var pn,gn,on,br;return Qt(this,function(oi){switch(oi.label){case 0:if(!ae)return[2];oi.label=1;case 1:return oi.trys.push([1,3,,4]),[4,ae({message:C})];case 2:return pn=oi.sent(),pn||(It.preventDefault(),(on=it==null?void 0:it.info)===null||on===void 0||on.call(it,"MessageContent: Not allowed to download.")),[3,4];case 3:return gn=oi.sent(),(br=it==null?void 0:it.error)===null||br===void 0||br.call(it,"MessageContent: Error occurred while determining download continuation:",gn),[3,4];case 4:return[2]}})})}}),((m=C==null?void 0:C.myFeedback)===null||m===void 0?void 0:m.rating)&&Ze&&v.createElement(V9,{hideMenu:function(){St(!1)},onEditFeedback:function(){St(!1),xt(!0)},onRemoveFeedback:function(){return Wt(n,void 0,void 0,function(){var It,pn,gn;return Qt(this,function(on){switch(on.label){case 0:return on.trys.push([0,3,,4]),C.myFeedback===null?[3,2]:[4,C.deleteFeedback(C.myFeedback.id)];case 1:on.sent(),on.label=2;case 2:return[3,4];case 3:return It=on.sent(),(gn=(pn=qe==null?void 0:qe.logger)===null||pn===void 0?void 0:pn.error)===null||gn===void 0||gn.call(pn,"Channel: Delete feedback failed.",It),ln(Be.FEEDBACK_FAILED_DELETE),[3,4];case 4:return St(!1),[2]}})})}}),((E=C==null?void 0:C.myFeedback)===null||E===void 0?void 0:E.rating)&&an&&v.createElement(z9,{selectedFeedback:C.myFeedback.rating,message:C,onUpdate:function(It,pn){return Wt(n,void 0,void 0,function(){var gn,on,br,oi;return Qt(this,function(Sr){switch(Sr.label){case 0:if(C.myFeedback===null)return[3,4];gn=new So({id:C.myFeedback.id,rating:It,comment:pn}),Sr.label=1;case 1:return Sr.trys.push([1,3,,4]),[4,C.updateFeedback(gn)];case 2:return Sr.sent(),[3,4];case 3:return on=Sr.sent(),(oi=(br=qe==null?void 0:qe.logger)===null||br===void 0?void 0:br.error)===null||oi===void 0||oi.call(br,"Channel: Update feedback failed.",on),ln(Be.FEEDBACK_FAILED_SAVE),[3,4];case 4:return sn(),[2]}})})},onClose:sn,onRemove:function(){return Wt(n,void 0,void 0,function(){var It,pn,gn;return Qt(this,function(on){switch(on.label){case 0:return on.trys.push([0,3,,4]),C.myFeedback===null?[3,2]:[4,C.deleteFeedback(C.myFeedback.id)];case 1:on.sent(),on.label=2;case 2:return[3,4];case 3:return It=on.sent(),(gn=(pn=qe==null?void 0:qe.logger)===null||pn===void 0?void 0:pn.error)===null||gn===void 0||gn.call(pn,"Channel: Delete feedback failed.",It),ln(Be.FEEDBACK_FAILED_DELETE),[3,4];case 4:return sn(),[2]}})})}}),Jt&&v.createElement(bO,{text:Jt,onCancel:function(){ln("")}}))}var K9=function(e){var n=e.value,t=e.onClickReply,r=e.type,i=r===void 0?"vertical":r;return v.createElement("div",{className:"sendbird-suggested-replies__option ".concat(i),id:n,onClick:function(a){return t(a,n)}},n)},$9=function(e){var n=e.replyOptions,t=e.onSendMessage,r=e.type,i=r===void 0?"vertical":r,a=N.useState(!1),s=a[0],o=a[1],l=function(d,f){d.preventDefault(),t({message:f}),o(!0)};if(s)return null;var u=n.map(function(d,f){return v.createElement(K9,{key:f,value:d,onClickReply:l,type:i})});return v.createElement("div",{className:"sendbird-suggested-replies ".concat(i)},u)};function W9(e){var n=e.member,t=e.isFocused,r=t===void 0?!1:t,i=e.parentScrollRef,a=e.onClick,s=e.onMouseOver,o=e.onMouseMove,l=e.renderUserMentionItem,u=N.useRef(null),d=N.useContext(wn).stringSet;N.useEffect(function(){r&&(i==null?void 0:i.current)!=null&&(u==null?void 0:u.current)!=null&&(i.current.scrollTop>=u.current.offsetTop||i.current.scrollTop+i.current.clientHeight<=u.current.offsetTop)&&u.current.scrollIntoView({block:"nearest",inline:"nearest"})},[r]);var f=N.useMemo(function(){if(l)return v.createElement("div",{className:"sendbird-mention-suggest-list__user-item",onClick:function(p){return a==null?void 0:a({event:p,member:n,itemRef:u})},onMouseOver:function(p){return s==null?void 0:s({event:p,member:n,itemRef:u})},onMouseMove:function(p){return o==null?void 0:o({event:p,member:n,itemRef:u})},key:(n==null?void 0:n.userId)||Kr(),ref:u},l({user:n}))},[l]);return f||v.createElement("div",{className:Zt("sendbird-mention-suggest-list__user-item",r&&"focused"),onClick:function(p){return a==null?void 0:a({event:p,member:n,itemRef:u})},onMouseOver:function(p){return s==null?void 0:s({event:p,member:n,itemRef:u})},onMouseMove:function(p){return o==null?void 0:o({event:p,member:n,itemRef:u})},key:(n==null?void 0:n.userId)||Kr(),ref:u},v.createElement(Fr,{className:"sendbird-mention-suggest-list__user-item__avatar",src:n==null?void 0:n.profileUrl,alt:"user-profile",width:"24px",height:"24px"}),v.createElement(Ie,{className:"sendbird-mention-suggest-list__user-item__nickname",testID:"sendbird-mention-suggest-list__user-item__nickname",type:Ce.SUBTITLE_2,color:n!=null&&n.nickname?de.ONBACKGROUND_1:de.ONBACKGROUND_3},(n==null?void 0:n.nickname)||(d==null?void 0:d.MENTION_NAME__NO_NAME)),v.createElement(Ie,{className:"sendbird-mention-suggest-list__user-item__user-id",testID:"sendbird-mention-suggest-list__user-item__user-id",type:Ce.SUBTITLE_2,color:de.ONBACKGROUND_2},n==null?void 0:n.userId))}function Q9(e,n,t,r){return Wt(this,void 0,void 0,function(){return Qt(this,function(i){return[2,n.members.sort(function(a,s){var o;return(o=a.nickname)===null||o===void 0?void 0:o.localeCompare(s.nickname)}).filter(function(a){var s;return((s=a.nickname)===null||s===void 0?void 0:s.toLowerCase().startsWith(r.toLowerCase()))&&a.userId!==e&&a.isActive}).slice(0,t)]})})}function Y9(e,n,t,r){return Wt(this,void 0,void 0,function(){var i;return Qt(this,function(a){return i=n.createMemberListQuery({limit:t+1,nicknameStartsWithFilter:r}),[2,i.next().then(function(s){return s.filter(function(o){return e!==(o==null?void 0:o.userId)}).slice(0,t)})]})})}var X9=300,IC=function(e){var n,t,r,i=e.className,a=e.currentChannel,s=e.targetNickname,o=s===void 0?"":s,l=e.onUserItemClick,u=e.onFocusItemChange,d=e.onFetchUsers,f=e.renderUserMentionItem,p=e.inputEvent,m=e.ableAddMention,E=m===void 0?!0:m,g=e.maxMentionCount,y=g===void 0?yR:g,S=e.maxSuggestionCount,C=S===void 0?CR:S,T=Tt(),I=T.config,L=T.stores,D=I.logger,O=((r=(t=(n=L==null?void 0:L.sdkStore)===null||n===void 0?void 0:n.sdk)===null||t===void 0?void 0:t.currentUser)===null||r===void 0?void 0:r.userId)||"",R=N.useRef(null),k=Ft().stringSet,P=N.useState(null),G=P[0],V=P[1],H=N.useState(""),F=H[0],z=H[1],K=N.useState(""),ee=K[0],$=K[1],Q=N.useState(null),ne=Q[0],j=Q[1],Z=N.useState([]),ie=Z[0],fe=Z[1];return N.useEffect(function(){clearTimeout(G??void 0),V(setTimeout(function(){z(o)},X9))},[o]),N.useEffect(function(){if((p==null?void 0:p.key)===Yr.Enter&&ne&&ie.length>0&&(l==null||l(ne)),(p==null?void 0:p.key)===Yr.ArrowUp){var te=ie.findIndex(function(le){return(le==null?void 0:le.userId)===(ne==null?void 0:ne.userId)});0<te&&(j(ie[te-1]),u==null||u(ie[te-1]))}if((p==null?void 0:p.key)===Yr.ArrowDown){var te=ie.findIndex(function(Me){return(Me==null?void 0:Me.userId)===(ne==null?void 0:ne.userId)});te<ie.length-1&&(j(ie[te+1]),u==null||u(ie[te+1]))}},[p]),N.useEffect(function(){if(!(ee&&F.indexOf(ee)===0&&ie.length===0)){if(a!=null&&a.isSuper&&!(a!=null&&a.createMemberListQuery)){D.warning("SuggestedMentionList: Creating member list query failed");return}var te=a!=null&&a.isSuper?Y9:Q9;te(O,a,C,F.slice(Gh.length)).then(function(le){le.length<1?D.info("SuggestedMentionList: Fetched member list is empty"):(D.info("SuggestedMentionList: Fetching member list succeeded",{memberList:le}),j(le[0])),$(F),d==null||d(le),fe(le)}).catch(function(le){le&&D.error("SuggestedMentionList: Fetching member list failed",le)})}},[a==null?void 0:a.url,a==null?void 0:a.members.map(function(te){return te.nickname}).join(),a==null?void 0:a.members.map(function(te){return te.isActive}).join(),F,C,O,ie.length,ee]),!E&&ie.length===0?null:v.createElement("div",{className:Zt("sendbird-mention-suggest-list",i),"data-testid":"sendbird-mention-suggest-list",key:"sendbird-mention-suggest-list",ref:R},E&&(ie==null?void 0:ie.map(function(te){return v.createElement(W9,{key:(te==null?void 0:te.userId)||Kr(),member:te,isFocused:(te==null?void 0:te.userId)===(ne==null?void 0:ne.userId),parentScrollRef:R,onClick:function(le){var Me=le.member;l==null||l(Me)},onMouseOver:function(le){var Me=le.member;j(Me)},renderUserMentionItem:f})})),!E&&v.createElement("div",{className:"sendbird-mention-suggest-list__notice-item"},v.createElement(We,{className:"sendbird-mention-suggest-list__notice-item__icon",type:Se.INFO,fillColor:Ve.ON_BACKGROUND_2,width:"20px",height:"20px"}),v.createElement(Ie,{className:"sendbird-mention-suggest-list__notice-item__text",type:Ce.SUBTITLE_2,color:de.ONBACKGROUND_2},k.MENTION_COUNT__OVER_LIMIT.replace("%d",String(y)))))},tA=function(e,n){var t=N.useState(!1),r=t[0],i=t[1];N.useEffect(function(){r?e():i(!0)},n)},IO=function(e){var n,t,r=e.message,i=e.children,a=e.hasSeparator,s=e.chainTop,o=e.chainBottom,l=e.handleScroll,u=e.channel,d=e.emojiContainer,f=e.editInputDisabled,p=e.shouldRenderSuggestedReplies,m=e.isReactionEnabled,E=e.replyType,g=e.threadReplySelectType,y=e.nicknamesMap,S=e.scrollToMessage,C=e.toggleReaction,T=e.setQuoteMessage,I=e.onQuoteMessageClick,L=e.onReplyInThreadClick,D=e.onBeforeDownloadFileMessage,O=e.sendUserMessage,R=e.updateUserMessage,k=e.resendMessage,P=e.deleteMessage,G=e.setAnimatedMessageId,V=e.animatedMessageId,H=e.onMessageAnimated,F=e.usedInLegacy,z=F===void 0?!0:F,K=Fo(e),ee=K.renderUserMentionItem,$=K.renderMessage,Q=K.renderMessageContent,ne=Q===void 0?function(Fe){return v.createElement(q9,x({},Fe))}:Q,j=K.renderSuggestedReplies,Z=j===void 0?function(Fe){return v.createElement($9,x({},Fe))}:j,ie=K.renderCustomSeparator,fe=K.renderEditInput,te=K.renderFileViewer,le=K.renderRemoveMessageModal,Me=K.filterEmojiCategoryIds,ae=Ft(),he=ae.dateLocale,pe=ae.stringSet,Ne=Tt(),_e=Ne.config,ge=_e.userId,me=_e.isOnline,Le=_e.userMention,Qe=_e.logger,Pe=_e.groupChannel,Ge=(Le==null?void 0:Le.maxMentionCount)||yR,De=(Le==null?void 0:Le.maxSuggestionCount)||CR,tt=N.useState(!1),Ue=tt[0],Ye=tt[1],yt=N.useState(!1),Nt=yt[0],Rt=yt[1],st=N.useState(!1),Be=st[0],nt=st[1],qe=N.useState(!1),rn=qe[0],it=qe[1],Ct=N.useState(""),Je=Ct[0],pt=Ct[1],Ut=N.useState([]),Pt=Ut[0],Ht=Ut[1],bt=N.useState([]),qt=bt[0],Lt=bt[1],wt=N.useState(null),Et=wt[0],xe=wt[1],ye=N.useState(null),Ze=ye[0],St=ye[1],Ot=N.useState([]),an=Ot[0],xt=Ot[1],dt=N.useRef(null),Jt=N.useRef(null),ln=me&&Pe.enableMention&&Je.length>0&&!Jh(u)&&!rd(u),Bt=vf({ref:dt},{logger:Qe}),En=(Bt==null?void 0:Bt.length)<Ge;N.useEffect(function(){Ht(Pt.filter(function(Fe){var Dt=Fe.userId,Gt=qt.indexOf(Dt);return Gt<0?!1:(qt.splice(Gt,1),!0)}))},[qt]),tA(function(){l==null||l()},[Ue,(n=r==null?void 0:r.reactions)===null||n===void 0?void 0:n.length]),tA(function(){l==null||l(!0)},[r==null?void 0:r.updatedAt,r==null?void 0:r.message]);var Mn=N.useRef(p);N.useEffect(function(){Mn.current!==p?l==null||l():Mn.current=p},[p]),N.useLayoutEffect(function(){z&&(l==null||l(!0))},[]),N.useLayoutEffect(function(){var Fe=[];return V===r.messageId&&(Jt!=null&&Jt.current)?(Fe.push(setTimeout(function(){it(!0)},500)),Fe.push(setTimeout(function(){G(null),H==null||H()},1600))):it(!1),function(){Fe.forEach(function(Dt){return clearTimeout(Dt)})}},[V,Jt.current,r.messageId]);var Ke=N.useMemo(function(){var Fe;return(Fe=ie==null?void 0:ie({message:r}))!==null&&Fe!==void 0?Fe:null},[r,ie]),ht=function(){if(i)return i;if($){var Fe=x(x({},e),{renderMessage:void 0});return $(Fe)}return v.createElement(v.Fragment,null,ne({className:"sendbird-message-hoc__message-content",userId:ge,scrollToMessage:S,channel:u,message:r,disabled:!me,chainTop:s,chainBottom:o,isReactionEnabled:m,replyType:E,threadReplySelectType:g,nicknamesMap:y,emojiContainer:d,showEdit:Ye,showRemove:Rt,showFileViewer:nt,resendMessage:k,deleteMessage:P,toggleReaction:C,setQuoteMessage:T,onReplyInThread:L,onQuoteMessageClick:I,onMessageHeightChange:l,onBeforeDownloadFileMessage:D,filterEmojiCategoryIds:Me}),p&&Z({replyOptions:Jy(r),onSendMessage:O,type:Pe==null?void 0:Pe.suggestedRepliesDirection}),Nt&&(le==null?void 0:le({message:r,onCancel:function(){return Rt(!1)}})),Be&&te({message:r,onCancel:function(){return nt(!1)}}))};return Ue&&(!((t=r==null?void 0:r.isUserMessage)===null||t===void 0)&&t.call(r))?(fe==null?void 0:fe())||v.createElement(v.Fragment,null,ln&&v.createElement(IC,{currentChannel:u,targetNickname:Je,inputEvent:Et??void 0,renderUserMentionItem:ee,onUserItemClick:function(Fe){Fe&&Ht(Ae(Ae([],Pt,!0),[Fe],!1)),pt(""),St(Fe),xe(null)},onFocusItemChange:function(){xe(null)},onFetchUsers:function(Fe){xt(Fe)},ableAddMention:En,maxMentionCount:Ge,maxSuggestionCount:De}),v.createElement(Ku,{isEdit:!0,channel:u,disabled:f,ref:dt,mentionSelectedUser:Ze,isMentionEnabled:Pe.enableMention,message:r,onStartTyping:function(){var Fe;(Fe=u==null?void 0:u.startTyping)===null||Fe===void 0||Fe.call(u)},onUpdateMessage:function(Fe){var Dt,Gt=Fe.messageId,zt=Fe.message,fn=Fe.mentionTemplate;R(Gt,{message:zt,mentionedUsers:Pt,mentionedMessageTemplate:fn}),Ye(!1),(Dt=u==null?void 0:u.endTyping)===null||Dt===void 0||Dt.call(u)},onCancelEdit:function(){var Fe;pt(""),Ht([]),Lt([]),xt([]),Ye(!1),(Fe=u==null?void 0:u.endTyping)===null||Fe===void 0||Fe.call(u)},onUserMentioned:function(Fe){(Ze==null?void 0:Ze.userId)===(Fe==null?void 0:Fe.userId)&&(St(null),pt(""))},onMentionStringChange:function(Fe){pt(Fe)},onMentionedUserIdsUpdated:function(Fe){Lt(Fe)},onKeyDown:function(Fe){return ln&&(an==null?void 0:an.length)>0&&(Fe.key===Yr.Enter&&En||Fe.key===Yr.ArrowUp||Fe.key===Yr.ArrowDown)?(xe(Fe),!0):!1}})):v.createElement("div",{className:Zt("sendbird-msg-hoc sendbird-msg--scroll-ref",rn&&"sendbird-msg-hoc__animated"),"data-testid":"sendbird-message-view",style:i||$?void 0:{marginBottom:"2px"},"data-sb-message-id":r.messageId,"data-sb-created-at":r.createdAt,ref:Jt},a&&(Ke||v.createElement(uC,null,v.createElement(Ie,{type:Ce.CAPTION_2,color:de.ONBACKGROUND_2},wr(r.createdAt,pe.DATE_FORMAT__MESSAGE_LIST__DATE_SEPARATOR,{locale:he})))),ht())},MO=function(e){var n=e.message,t=e.onCancel,r=e.deleteMessage,i=e.onDownloadClick,a=n.sender,s=n.type,o=n.url,l=n.name,u=l===void 0?"":l,d=n.threadInfo,f=a.profileUrl,p=a.nickname,m=a.userId,E=Tt().config;return dd.createPortal(v.createElement(Z9,{profileUrl:f,nickname:p,type:s,url:o,name:u,onCancel:t,onDelete:function(){return r(n).then(function(){return t()})},isByMe:E.userId===m,disableDelete:d!=null&&d.replyCount?d.replyCount>0:!1,onDownloadClick:i}),document.getElementById(Du))},Z9=function(e){var n=e.profileUrl,t=e.nickname,r=e.name,i=e.type,a=e.url,s=e.isByMe,o=e.onCancel,l=e.onDelete,u=e.disableDelete,d=e.onDownloadClick;return v.createElement(Rr,{onClose:o},v.createElement("div",{className:"sendbird-fileviewer","data-testid":"sendbird-fileviewer"},v.createElement("div",{className:"sendbird-fileviewer__header"},v.createElement("div",{className:"sendbird-fileviewer__header__left"},v.createElement("div",{className:"sendbird-fileviewer__header__left__avatar"},v.createElement(Fr,{height:"32px",width:"32px",src:n})),v.createElement("div",{className:"sendbird-fileviewer__header__left__text-container"},v.createElement(Ie,{className:"sendbird-fileviewer__header__left__filename",type:Ce.H_2,color:de.ONBACKGROUND_1},r),v.createElement(Ie,{className:"sendbird-fileviewer__header__left__sender-name",type:Ce.BODY_1,color:de.ONBACKGROUND_2},t))),v.createElement("div",{className:"sendbird-fileviewer__header__right"},Xh(i)&&v.createElement("div",{className:"sendbird-fileviewer__header__right__actions"},v.createElement("a",{className:"sendbird-fileviewer__header__right__actions__download",rel:"noopener noreferrer",href:a,target:"_blank",onClick:d},v.createElement(We,{type:Se.DOWNLOAD,fillColor:Ve.ON_BACKGROUND_1,height:"24px",width:"24px"})),l&&s&&v.createElement("div",{className:"sendbird-fileviewer__header__right__actions__delete"},v.createElement(We,{className:u?"disabled":"",type:Se.DELETE,fillColor:u?Ve.GRAY:Ve.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:function(){u||l()}}))),v.createElement("div",{className:"sendbird-fileviewer__header__right__actions__close"},v.createElement(We,{type:Se.CLOSE,fillColor:Ve.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:o})))),v.createElement("div",{className:"sendbird-fileviewer__content"},Oo(i)&&v.createElement("video",{controls:!0,className:"sendbird-fileviewer__content__video"},v.createElement("source",{src:a,type:i})),As(i)&&v.createElement("img",{src:a,alt:r,className:"sendbird-fileviewer__content__img"}),!Xh(i)&&v.createElement("div",{className:"sendbird-fileviewer__content__unsupported"},v.createElement(Ie,{type:Ce.H_1,color:de.ONBACKGROUND_1},zu.UI__FILE_VIEWER__UNSUPPORT)))))},J9=function(e){var n=qu(),t=n.deleteMessage,r=n.onBeforeDownloadFileMessage,i=Tt().config,a=i.logger;return v.createElement(MO,x({},e,{deleteMessage:t,onDownloadClick:function(s){return Wt(void 0,void 0,void 0,function(){var o,l,u,d;return Qt(this,function(f){switch(f.label){case 0:if(!r)return[2];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,r({message:e.message})];case 2:return o=f.sent(),o||(s.preventDefault(),(u=a.info)===null||u===void 0||u.call(a,"FileViewer: Not allowed to download.")),[3,4];case 3:return l=f.sent(),(d=a.error)===null||d===void 0||d.call(a,"FileViewer: Error occurred while determining download continuation:",l),[3,4];case 4:return[2]}})})}}))};function MC(e,n){return si(n).when(Ri,function(){var t=n.fileInfoList.length;return"Do you want to delete all ".concat(t," photos?")}).otherwise(function(){return e.MODAL__DELETE_MESSAGE__TITLE})}var AO=function(e){var n,t=e.onSubmit,r=t===void 0?function(){}:t,i=e.onCancel,a=e.message,s=e.deleteMessage,o=N.useContext(wn).stringSet;return v.createElement(Rr,{type:Gn.DANGER,disabled:!((n=a==null?void 0:a.threadInfo)===null||n===void 0)&&n.replyCount?a.threadInfo.replyCount>0:void 0,onCancel:i,onSubmit:function(){(a.isUserMessage()||a.isFileMessage()||a.isMultipleFilesMessage())&&s(a).then(function(){r(),i()})},submitText:o.MESSAGE_MENU__DELETE,titleText:MC(o,a)})},ej=function(e){var n=qu().deleteMessage;return v.createElement(AO,x({},e,{deleteMessage:n}))},tj=function(e){var n=Tt(),t=n.config,r=n.emojiManager,i=qu(),a=i.loading,s=i.currentChannel,o=i.animatedMessageId,l=i.setAnimatedMessageId,u=i.scrollToMessage,d=i.replyType,f=i.threadReplySelectType,p=i.isReactionEnabled,m=i.toggleReaction,E=i.nicknamesMap,g=i.setQuoteMessage,y=i.renderUserMentionItem,S=i.filterEmojiCategoryIds,C=i.onQuoteMessageClick,T=i.onReplyInThreadClick,I=i.onMessageAnimated,L=i.onBeforeDownloadFileMessage,D=i.messages,O=i.updateUserMessage,R=i.sendUserMessage,k=i.resendMessage,P=i.deleteMessage,G=e.message,V=!a&&!!s,H=g2(function(){var F=t.groupChannel,z=F.enableSuggestedReplies,K=F.showSuggestedRepliesFor,ee=D[D.length-1],$=Vu(ee)&&ee.sendingStatus!=="succeeded",Q=K==="all_messages"?!0:G.messageId===ee.messageId;return z&&Jy(G).length>0&&!$&&Q});return v.createElement(IO,x({},e,{channel:s,emojiContainer:r.emojiContainer,editInputDisabled:!V||Jh(s??void 0)||rd(s??void 0)||!t.isOnline,shouldRenderSuggestedReplies:H,isReactionEnabled:p??!1,replyType:d??"NONE",threadReplySelectType:f??$a.PARENT,nicknamesMap:E,renderUserMentionItem:y,filterEmojiCategoryIds:S,scrollToMessage:u,toggleReaction:m,setQuoteMessage:g,onQuoteMessageClick:C,onReplyInThreadClick:T,sendUserMessage:R,updateUserMessage:O,resendMessage:k,deleteMessage:P,animatedMessageId:o,setAnimatedMessageId:l,onMessageAnimated:I,renderFileViewer:function(F){return v.createElement(J9,x({},F))},renderRemoveMessageModal:function(F){return v.createElement(ej,x({},F))},usedInLegacy:!1,onBeforeDownloadFileMessage:L}))},wO=function(e){var n=e.className,t=n===void 0?"":n,r=e.count,i=r===void 0?0:r,a=e.time,s=a===void 0?"":a,o=e.onClick,l=e.lastReadAt,u=N.useContext(wn),d=u.stringSet,f=u.dateLocale,p=N.useMemo(function(){var m,E;if(d.CHANNEL__MESSAGE_LIST__NOTIFICATION__ON!=="on"){var g=((E=(m=s==null?void 0:s.toString)===null||m===void 0?void 0:m.call(s))===null||E===void 0?void 0:E.split(" "))||[];return g==null||g.splice(-2,0,d.CHANNEL__MESSAGE_LIST__NOTIFICATION__ON),g.join(" ")}else if(l)return wr(l,d.DATE_FORMAT__MESSAGE_LIST__NOTIFICATION__UNREAD_SINCE,{locale:f})},[s,l]);return v.createElement("div",{className:Zt(i<1?"sendbird-notification--hide":"sendbird-notification",t),"data-testid":"sendbird-notification",onClick:o},v.createElement(Ie,{className:"sendbird-notification__text",testID:"sendbird-notification__text",color:de.ONCONTENT_1,type:Ce.CAPTION_2},"".concat(i," "),d.CHANNEL__MESSAGE_LIST__NOTIFICATION__NEW_MESSAGE," ".concat(p)),v.createElement(We,{width:"24px",height:"24px",type:Se.CHEVRON_DOWN,fillColor:Ve.CONTENT}))},RO=function(e){var n=e.className,t=n===void 0?"":n,r=N.useContext(wn).stringSet;return v.createElement("div",{className:Zt("sendbird-notification","sendbird-notification--frozen",t),"data-testid":"sendbird-notification"},v.createElement(Ie,{className:"sendbird-notification__text",testID:"sendbird-notification__text",type:Ce.CAPTION_2},r.CHANNEL_FROZEN))},nj=function(){return v.createElement("div",{className:"typing-dots-container"},v.createElement("span",null),v.createElement("span",null),v.createElement("span",null))},OO=2,rf=28,nA=rf+OO*2,fy=24,Wv=3,rj=OO,ij=function(e){var n=e.sources,t=e.max;return v.createElement(v.Fragment,null," ",n.slice(0,t).map(function(r,i){return v.createElement(Fr,{className:"sendbird-message-content__left__avatar multiple",src:r||"",key:"avatar_stack_item_".concat(r),width:"".concat(rf,"px"),height:"".concat(rf,"px"),zIndex:i,left:"".concat(i*fy-rj,"px")})})," ")},aj=function(e){var n=e.typingMembers,t=n.length,r=Math.min(t,4),i=t-Wv,a=(r-1)*(nA-fy),s=12;return v.createElement("div",{className:"sendbird-message-content__left incoming",style:{minWidth:r*nA-a+s}},v.createElement(ij,{sources:n.map(function(o){return o.profileUrl}),max:Wv}),i>0?v.createElement(Fr,{className:"sendbird-message-content__left__avatar multiple",width:"".concat(rf,"px"),height:"".concat(rf,"px"),zIndex:Wv,left:"".concat(Wv*fy,"px"),customDefaultComponent:function(o){var l=o.width,u=o.height;return v.createElement(AR,{width:l,height:u,text:"+".concat(i)})}}):null)},DO=function(e){var n=e.typingMembers,t=e.handleScroll;return N.useLayoutEffect(function(){t==null||t(!0)},[]),n.length===0?null:v.createElement("div",{className:"sendbird-message-content incoming",style:{marginBottom:"2px"}},v.createElement(aj,{typingMembers:n}),v.createElement("div",{className:"sendbird-message-content__middle"},v.createElement(nj,null)))},AC=function(e,n,t,r,i){if(!r||r.channelType!=="group")return[Qv(e,n),Qv(n,t)];if(i==="THREAD"&&(n!=null&&n.threadInfo))return[!1,!1];var a=(n==null?void 0:n.sendingStatus)||"",s=a!=="pending"&&a!=="failed";return[Qv(e,n,r)&&s,Qv(n,t,r)&&s]},rA=function(e){var n=Ft().stringSet;return wr(e.createdAt,n.DATE_FORMAT__MESSAGE_CREATED_AT)},Qv=function(e,n,t){var r,i;return e&&n&&e.messageType&&e.messageType!=="admin"&&n.messageType&&(n==null?void 0:n.messageType)!=="admin"&&"sender"in e&&"sender"in n&&e.createdAt&&n.createdAt&&e.sender.userId&&n.sender.userId?(e==null?void 0:e.sendingStatus)===(n==null?void 0:n.sendingStatus)&&((r=e==null?void 0:e.sender)===null||r===void 0?void 0:r.userId)===((i=n==null?void 0:n.sender)===null||i===void 0?void 0:i.userId)&&rA(e)===rA(n)&&(t?vN(t,e)===vN(t,n):!0):!1},vy=function(e){var n=e.allMessages,t=n===void 0?[]:n,r=e.isMessageGroupingEnabled,i=r===void 0?!0:r,a=e.currentIndex,s=a===void 0?0:a,o=e.currentMessage,l=e.currentChannel,u=l===void 0?null:l,d=e.replyType,f=d===void 0?"":d,p=t[s-1],m=t[s+1],E=i?AC(p,o,m,u,f):[!1,!1],g=E[0],y=E[1],S=p==null?void 0:p.createdAt,C=o.createdAt,T="sendingStatus"in o&&o.sendingStatus!=="succeeded",I=T?!1:!(S&&gm(C,S));return{chainTop:g,chainBottom:y,hasSeparator:I}},LO=function(e,n,t){var r;try{var i=e.current,a=(r=i==null?void 0:i.querySelectorAll('[data-sb-created-at="'.concat(n,'"]')))===null||r===void 0?void 0:r[0];i&&a instanceof HTMLElement&&(i.scrollTop=a.offsetTop)}catch{}finally{t==null||t(!0)}},Zs=function(e,n,t){e===void 0&&(e=0);var r=10,i=e;if(i>r){t==null||t(!0);return}try{var a=(n==null?void 0:n.current)||document.querySelector(".sendbird-conversation__messages-padding");a&&(a.scrollTop=a.scrollHeight),t==null||t(!0)}catch{setTimeout(function(){Zs(i+1,n,t)},500*i)}},UO=function(e){var n=e==null?void 0:e.myRole;return n==="operator"},kO=function(e){var n=e==null?void 0:e.isFrozen;return n&&!UO(e)},PO=function(e){var n=e==null?void 0:e.myMutedState;return n==="muted"},sj=function(e){for(var n=e.emojiCategories,t=n===void 0?[]:n,r=new Map,i=0;i<t.length;i+=1)for(var a=t[i].emojis,s=0;s<a.length;s+=1){var o=a[s],l=o.key,u=o.url;r.set(l,u)}return r},oj=function(e){e===void 0&&(e=[]);for(var n=new Map,t=0;t<e.length;t+=1){var r=e[t],i=r.userId,a=r.nickname;n.set(i,a)}return n},lj=function(e,n){var t=e.map(function(r){return[r[n],r]});return Array.from(new Map(t).values())},uj=function(e){return lj(e,"messageId")},cj=function(e){return e.sort(function(n,t){return n.createdAt-t.createdAt})},dj=function(e,n){var t=e[e.length-1],r=n[0];if((t==null?void 0:t.createdAt)<(r==null?void 0:r.createdAt))return Ae(Ae([],e,!0),n,!0);var i=Ae(Ae([],e,!0),n,!0),a=uj(i);return cj(a)},iA=function(e,n){if("sendingStatus"in n&&(n.sendingStatus===yn.SUCCEEDED||n.sendingStatus===yn.PENDING)){var t=e.map(function(i){return"sendingStatus"in i&&i.sendingStatus?i.sendingStatus:i.isAdminMessage()?yn.SUCCEEDED:null}).lastIndexOf(yn.SUCCEEDED);if(t+1<e.length){var r=Ae([],e,!0);return r.splice(t+1,0,n),r}}return Ae(Ae([],e,!0),[n],!1)},Ao=function(e,n,t){return Math.abs(e-n)<=t},hj=N.forwardRef(function(e,n){var t=e.messages,r=e.renderMessage,i=e.scrollPositionRef,a=e.scrollDistanceFromBottomRef,s=e.onLoadPrevious,o=e.onLoadNext,l=e.loadThreshold,u=l===void 0?.05:l,d=e.typingIndicator,f=e.onScrollPosition,p=f===void 0?Cn:f,m=e.initDeps,E=v.useRef(!1),g=v.useRef(),y=N.useRef(0);N.useLayoutEffect(function(){n.current&&(n.current.scrollTop=n.current.scrollHeight)},m),N.useLayoutEffect(function(){n.current&&(g.current==="top"&&(n.current.scrollTop=n.current.scrollHeight-i.current),g.current==="bottom"&&(n.current.scrollTop=y.current),g.current=void 0)},[n.current,t.length]);var S=function(){return Wt(void 0,void 0,void 0,function(){var C,T;return Qt(this,function(I){switch(I.label){case 0:return n.current?(C=n.current,p(fj(C)),i.current=C.scrollHeight-C.scrollTop,a.current=i.current-C.clientHeight,y.current=C.scrollTop,E.current?[2]:(T=C.clientHeight*Math.min(Math.max(0,u),1),C.scrollTop<=T?(E.current=!0,g.current="top",[4,s()]):[3,2])):[2];case 1:return I.sent(),E.current=!1,[3,5];case 2:return C.scrollHeight-C.scrollTop-C.clientHeight<=T?(E.current=!0,g.current="bottom",[4,o()]):[3,4];case 3:return I.sent(),E.current=!1,[3,5];case 4:g.current=void 0,I.label=5;case 5:return[2]}})})};return v.createElement("div",{className:"sendbird-conversation__scroll-container"},v.createElement("div",{className:"sendbird-conversation__padding"}),v.createElement("div",{ref:n,className:"sendbird-conversation__messages-padding","data-testid":"sendbird-message-list-container",onScroll:S},t.map(function(C,T){return r({message:C,index:T})}),d))});function fj(e){return Ao(e.scrollTop,0,bs)?"top":Ao(e.scrollHeight,e.clientHeight+e.scrollTop,bs)?"bottom":"middle"}var vj=function(e){var n,t,r,i,a,s,o,l=e.className,u=l===void 0?"":l,d=Fo(e),f=d.renderMessage,p=f===void 0?function(Ne){return v.createElement(tj,x({},Ne))}:f,m=d.renderMessageContent,E=d.renderSuggestedReplies,g=d.renderCustomSeparator,y=d.renderPlaceholderLoader,S=y===void 0?function(){return v.createElement(Mr,{type:kn.LOADING})}:y,C=d.renderPlaceholderEmpty,T=C===void 0?function(){return v.createElement(Mr,{className:"sendbird-conversation__no-messages",type:kn.NO_MESSAGES})}:C,I=d.renderFrozenNotification,L=I===void 0?function(){return v.createElement(RO,{className:"sendbird-conversation__messages__notification"})}:I,D=qu(),O=D.channelUrl,R=D.hasNext,k=D.loading,P=D.messages,G=D.newMessages,V=D.scrollToBottom,H=D.isScrollBottomReached,F=D.isMessageGroupingEnabled,z=D.scrollRef,K=D.scrollDistanceFromBottomRef,ee=D.scrollPositionRef,$=D.currentChannel,Q=D.replyType,ne=D.scrollPubSub,j=D.loadNext,Z=D.loadPrevious,ie=D.setIsScrollBottomReached,fe=D.resetNewMessages,te=Tt(),le=N.useState(),Me=le[0],ae=le[1];N.useEffect(function(){ae(H?void 0:new Date)},[H]);var he=function(Ne){Ne===void 0&&(Ne=!1);var _e=z.current;if(_e){var ge=K.current,me=_e.scrollHeight-_e.scrollTop-_e.offsetHeight;if(ge<me&&(!Ne||ge<bs)){var Le=me-ge;ne.publish("scroll",{top:_e.scrollTop+Le,lazy:!1,animated:!1})}}},pe={frozenNotification:function(){return!$||!$.isFrozen?null:L()},unreadMessagesNotification:function(){return H||!Me?null:v.createElement(wO,{className:"sendbird-conversation__messages__notification",count:G.length,lastReadAt:Me,onClick:function(){return V()}})},scrollToBottomButton:function(){return!R()&&H?null:v.createElement("div",{className:"sendbird-conversation__scroll-bottom-button",onClick:function(){return V()},onKeyDown:function(){return V()},tabIndex:0,role:"button"},v.createElement(We,{width:"24px",height:"24px",type:Se.CHEVRON_DOWN,fillColor:Ve.PRIMARY}))}};return k?S():P.length===0?T():v.createElement(v.Fragment,null,v.createElement("div",{className:"sendbird-conversation__messages ".concat(u),dir:rC((n=te==null?void 0:te.config)===null||n===void 0?void 0:n.htmlTextDirection,(t=te==null?void 0:te.config)===null||t===void 0?void 0:t.forceLeftToRightMessageLayout)},v.createElement(hj,{ref:z,initDeps:[O],scrollPositionRef:ee,scrollDistanceFromBottomRef:K,onLoadNext:j,onLoadPrevious:Z,onScrollPosition:function(Ne){var _e=Ne==="bottom";G.length>0&&_e&&fe(),ie(_e)},messages:P,renderMessage:function(Ne){var _e=Ne.message,ge=Ne.index,me=vy({allMessages:P,replyType:Q??"NONE",isMessageGroupingEnabled:F??!1,currentIndex:ge,currentMessage:_e,currentChannel:$}),Le=me.chainTop,Qe=me.chainBottom,Pe=me.hasSeparator,Ge=Vu(_e)&&_e.sender.userId===te.config.userId;return v.createElement(Lu,{message:_e,key:QB(_e),isByMe:Ge},p({handleScroll:he,message:_e,hasSeparator:Pe,chainTop:Le,chainBottom:Qe,renderMessageContent:m,renderSuggestedReplies:E,renderCustomSeparator:g}))},typingIndicator:!R()&&((i=(r=te==null?void 0:te.config)===null||r===void 0?void 0:r.groupChannel)===null||i===void 0?void 0:i.enableTypingIndicator)&&((o=(s=(a=te==null?void 0:te.config)===null||a===void 0?void 0:a.groupChannel)===null||s===void 0?void 0:s.typingIndicatorTypes)===null||o===void 0?void 0:o.has(ef.Bubble))&&v.createElement(pj,{channelUrl:O,handleScroll:he})}),v.createElement(v.Fragment,null,pe.frozenNotification()),v.createElement(v.Fragment,null,pe.unreadMessagesNotification()),v.createElement(v.Fragment,null,pe.scrollToBottomButton())))},pj=function(e){var n=Tt().stores,t=N.useState([]),r=t[0],i=t[1];return dm(n.sdkStore.sdk,{onTypingStatusUpdated:function(a){a.url===e.channelUrl&&i(a.getTypingUsers())}}),v.createElement(DO,{typingMembers:r,handleScroll:e.handleScroll})},mj=function(e){return v.createElement(IC,x({},e))},Yv="sendbird-quote_message_input__avatar";function _j(e){var n,t=e.message;if(!Ui(t)&&!Ri(t)||Fa(t))return v.createElement(v.Fragment,null);var r=rO(t);return r||(L2(t)||qs(t)?r=ad(t):Ri(t)&&h7((n=t.fileInfoList)===null||n===void 0?void 0:n[0])&&(r=t.fileInfoList[0].url)),qs(t)&&r?v.createElement("div",{className:Yv},v.createElement("video",{style:{width:"44px",height:"44px"},src:r})):(eo(t)||Ri(t))&&r?v.createElement(yr,{className:Yv,url:r,alt:$p(t),width:"44px",height:"44px",fixedSize:!0}):d7(t)?v.createElement("div",{className:Yv},v.createElement(We,{type:Se.FILE_AUDIO,fillColor:Ve.ON_BACKGROUND_2,width:"24px",height:"24px"})):v.createElement("div",{className:Yv},v.createElement(We,{type:Se.FILE_DOCUMENT,fillColor:Ve.ON_BACKGROUND_2,width:"24px",height:"24px"}))}function gj(e){var n=e.className,t=e.replyingMessage,r=e.onClose,i=N.useContext(wn).stringSet,a=t,s=t==null?void 0:t.sender,o=(Ui(t)||Ri(t))&&!Fa(t);return v.createElement("div",{className:ii(["sendbird-quote_message_input",n??""])},o&&v.createElement(_j,{message:a}),v.createElement("div",{className:"sendbird-quote_message_input__body",style:{width:"calc(100% - ".concat(o?"164px":"120px",")"),left:o?"92px":"40px"}},v.createElement(Ie,{className:"sendbird-quote_message_input__body__sender-name",type:Ce.CAPTION_1,color:de.ONBACKGROUND_1},"".concat(i.QUOTE_MESSAGE_INPUT__REPLY_TO," ").concat(s&&s.nickname?s.nickname:i.NO_NAME)),v.createElement(Ie,{className:"sendbird-quote_message_input__body__message-content",type:Ce.BODY_2,color:de.ONBACKGROUND_3},L2(a)&&!zp(a)&&i.QUOTE_MESSAGE_INPUT__FILE_TYPE_IMAGE,qs(a)&&i.QUOTE_MESSAGE_INPUT__FILE_TYPE__VIDEO,zp(a)&&i.QUOTE_MESSAGE_INPUT__FILE_TYPE_GIF,Vi(t)&&t.message,Zh(t)===xs.FILE&&yC(a),Ri(t)&&"".concat(a.fileInfoList.length," Photos"),Fa(t)&&i.VOICE_MESSAGE)),v.createElement(We,{className:"sendbird-quote_message_input__close-button",type:Se.CLOSE,fillColor:Ve.ON_BACKGROUND_2,width:"24px",height:"24px",onClick:function(){return r==null?void 0:r(t)}}))}var fu={PREPARING:"PREPARING",READY_TO_RECORD:"READY_TO_RECORD",RECORDING:"RECORDING",COMPLETED:"COMPLETED"},Ej=function(e){var n=e.onRecordingStarted,t=n===void 0?Cn:n,r=e.onRecordingEnded,i=r===void 0?Cn:r,a=Tt().config,s=a.voiceRecord,o=s.maxRecordingTime,l=oR(),u=l.isRecordable,d=N.useState(null),f=d[0],p=d[1],m=N.useState(fu.PREPARING),E=m[0],g=m[1];N.useEffect(function(){u&&E===fu.PREPARING&&g(fu.READY_TO_RECORD)},[u]);var y=N.useCallback(function(){l==null||l.start({onRecordingStarted:function(){g(fu.RECORDING),t(),O()},onRecordingEnded:function(k){g(fu.COMPLETED),i(k),p(k),R()}})},[t,i]),S=N.useCallback(function(){l==null||l.stop(),R()},[l]),C=N.useCallback(function(){S(),p(null)},[l]),T=N.useState(0),I=T[0],L=T[1],D=N.useRef(null);function O(){R(),L(0),D.current=setInterval(function(){L(function(k){var P=k+100;return P>o&&R(),P})},100)}function R(){D.current&&(clearInterval(D.current),D.current=null)}return N.useEffect(function(){I>o&&S()},[I,o,S]),{start:y,stop:S,cancel:C,recordingStatus:E,recordingTime:I,recordedFile:f,recordingLimit:o}},Pr={READY_TO_RECORD:"READY_TO_RECORD",RECORDING:"RECORDING",READY_TO_PLAY:"READY_TO_PLAY",PLAYING:"PLAYING"},yj=function(e){var n=e.inputState;switch(n){case Pr.READY_TO_RECORD:return v.createElement("div",{className:"sendbird-controler-icon record-icon"});case Pr.RECORDING:return v.createElement("div",{className:"sendbird-controler-icon stop-icon"});case Pr.READY_TO_PLAY:return v.createElement(We,{className:"sendbird-controler-icon play-icon",width:"20px",height:"20px",type:Se.PLAY,fillColor:Ve.ON_BACKGROUND_1});case Pr.PLAYING:return v.createElement("div",{className:"sendbird-controler-icon pause-icon"},v.createElement("div",{className:"sendbird-controler-icon pause-icon-inner"}),v.createElement("div",{className:"sendbird-controler-icon pause-icon-inner"}));default:return v.createElement(v.Fragment,null)}},Cj=function(e){var n=e.minRecordTime,t=n===void 0?N2:n,r=e.maximumValue,i=e.currentValue,a=i===void 0?0:i,s=e.currentType,o=e.onCancelClick,l=e.onControlClick,u=e.onSubmitClick,d=e.renderCancelButton,f=e.renderControlButton,p=e.renderSubmitButton,m=N.useState(0),E=m[0],g=m[1],y=N.useMemo(function(){return s===Pr.READY_TO_RECORD},[s]),S=N.useMemo(function(){return s===Pr.RECORDING},[s]),C=N.useMemo(function(){return s===Pr.READY_TO_RECORD||s===Pr.RECORDING?t>a:!1},[s,t,a]),T=N.useMemo(function(){return s===Pr.READY_TO_PLAY||s===Pr.PLAYING},[s]),I=Ft().stringSet,L=function(){var R=Date.now();R-E>z_&&(o==null||o(),g(R))},D=N.useCallback(function(){var R=Date.now();R-E>z_&&(l==null||l(s),g(R))},[s]),O=function(){var R=Date.now();R-E>z_&&(C||u==null||u(),g(R))};return v.createElement("div",{className:"sendbird-voice-message-input"},v.createElement("div",{className:"sendbird-voice-message-input__indicator"},v.createElement("div",{className:"sendbird-voice-message-input__indicator__progress-bar"},v.createElement(sO,{className:"sendbird-voice-message-input__indicator__progress-bar__bar",disabled:y,maxSize:r,currentSize:a})),S?v.createElement("div",{className:"sendbird-voice-message-input__indicator__on-rec"}):null,v.createElement(lO,{className:"sendbird-voice-message-input__indicator__playback-time",time:T?r-a:a,labelColor:y?de.ONBACKGROUND_4:de.ONCONTENT_1})),v.createElement("div",{className:"sendbird-voice-message-input__controler"},(d==null?void 0:d())||v.createElement(to,{className:"sendbird-voice-message-input__controler__cancel",onClick:L,disableUnderline:!0},v.createElement(Ie,{type:Ce.BUTTON_1,color:de.PRIMARY},I.BUTTON__CANCEL)),(f==null?void 0:f(s))||v.createElement("div",{className:"sendbird-voice-message-input__controler__main",onClick:D},v.createElement(yj,{inputState:s})),(p==null?void 0:p())||v.createElement("div",{className:Zt("sendbird-voice-message-input__controler__submit",C&&"voice-message--disabled"),onClick:O},v.createElement(We,{width:"19px",height:"19px",type:Se.SEND,fillColor:C?Ve.ON_BACKGROUND_4:Ve.CONTENT}))))},bj=function(e){var n=e.imageFile,t=e.compressionRate,r=e.resizingWidth,i=e.resizingHeight,a=e.outputFormat,s=document.createElement("img");return new Promise(function(o,l){s.src=URL.createObjectURL(n),s.onerror=l,s.onload=function(){URL.revokeObjectURL(s.src);var u=document.createElement("canvas"),d=s.width,f=s.height,p=!r||r>d?d:r,m=!i||i>f?f:i,E=d/p,g=f/m;E>g?m=f/(r?E:1):g>E&&(p=d/(i?g:1)),u.width=p,u.height=m;var y=u.getContext("2d");if(!y){l(new Error("Failed to get canvas 2d context"));return}y.drawImage(s,0,0,p,m);var S=a==="preserve"?n.type:"image/".concat(a),C=S.split("/").pop(),T=n.name.lastIndexOf("."),I="".concat(T===-1?n.name:n.name.substring(0,T),".").concat(C);y.canvas.toBlob(function(L){if(L){var D=new File([L],I,{type:S});o(D)}else l(new Error("Failed to compress image"))},S,t)}})},xO=function(e){return Wt(void 0,[e],void 0,function(n){var t,r,i,a,s,o,l=n.files,u=n.logger,d=n.imageCompression;return Qt(this,function(f){switch(f.label){case 0:return t=d.compressionRate,r=d.outputFormat,i=r===void 0?"preserve":r,a=d.resizingWidth?id(d.resizingWidth):void 0,s=d.resizingHeight?id(d.resizingHeight):void 0,o={failedIndexes:[],compressedFiles:[]},Array.isArray(l)&&l.length>0?!t||t<0||1<t?(u==null||u.warning("utils - compressImages: The compressionRate is not acceptable.",t),[2,o]):[4,Promise.all(l.map(function(p,m){return Wt(void 0,void 0,void 0,function(){var E,g;return Qt(this,function(y){switch(y.label){case 0:if(!(p.type==="image/jpg"||p.type==="image/png"||p.type==="image/jpeg"))return u==null||u.warning("utils - compressImages: The fileType is not compressible.",{file:p,index:m}),o.failedIndexes.push(m),o.compressedFiles.push(p),[2];y.label=1;case 1:return y.trys.push([1,3,,4]),[4,bj({imageFile:p,compressionRate:t,resizingWidth:a,resizingHeight:s,outputFormat:i})];case 2:return E=y.sent(),o.compressedFiles.push(E),[3,4];case 3:return g=y.sent(),o.compressedFiles.push(p),o.failedIndexes.push(m),u==null||u.warning("utils - compressImages: Failed to compress image file",{file:p,err:g}),[3,4];case 4:return[2]}})})}))]:(u==null||u.warning("utils - compressImages: There are no files.",l),[2,o]);case 1:return f.sent(),u==null||u.info("utils - compressImages: Finished compressing images",o),[2,o]}})})},FO=function(e){var n=e.channel,t=e.onCancelClick,r=e.onSubmitClick,i=N.useRef(Kr()).current,a=N.useState(null),s=a[0],o=a[1],l=N.useState(Pr.READY_TO_RECORD),u=l[0],d=l[1],f=N.useState(!1),p=f[0],m=f[1],E=N.useState(!1),g=E[0],y=E[1],S=N.useState(!1),C=S[0],T=S[1],I=Ft().stringSet,L=Tt().config,D=Ej({onRecordingStarted:function(){d(Pr.RECORDING)},onRecordingEnded:function(Q){o(Q)}}),O=D.start,R=D.stop,k=D.cancel,P=D.recordingTime,G=D.recordingStatus,V=D.recordingLimit,H=oO({channelUrl:n==null?void 0:n.url,key:i,audioFile:s??void 0}),F=H.play,z=H.pause,K=H.playbackTime,ee=H.playingStatus,$=H.stop;return N.useEffect(function(){Jh(n)||rd(n)?y(!0):y(!1)},[n==null?void 0:n.myRole,n==null?void 0:n.isFrozen,n==null?void 0:n.myMutedState]),N.useEffect(function(){p&&s&&(r==null||r(s,P),m(!1),o(null))},[p,s,P]),N.useEffect(function(){s&&(P<L.voiceRecord.minRecordingTime?(d(Pr.READY_TO_RECORD),o(null)):ee===Cs.PLAYING?d(Pr.PLAYING):d(Pr.READY_TO_PLAY))},[s,P,ee]),v.createElement("div",{className:"sendbird-voice-message-input-wrapper"},v.createElement(Cj,{currentValue:G===fu.COMPLETED?K:P,maximumValue:G===fu.COMPLETED?P:V,currentType:u,onCancelClick:function(){t==null||t(),k(),$()},onSubmitClick:function(){g?(T(!0),d(Pr.READY_TO_RECORD)):(R(),z(),m(!0))},onControlClick:function(Q){switch(Q){case Pr.READY_TO_RECORD:{$(),O();break}case Pr.RECORDING:{P>=L.voiceRecord.minRecordingTime&&!g?R():g?(k(),T(!0),d(Pr.READY_TO_RECORD)):(k(),d(Pr.READY_TO_RECORD));break}case Pr.READY_TO_PLAY:{F();break}case Pr.PLAYING:{z();break}}}}),C&&v.createElement(Rr,{className:"sendbird-voice-message-input-wrapper-alert",titleText:rd(n)?I.MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_MUTED:I.MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_FROZEN,hideFooter:!0,isCloseOnClickOutside:!0,onClose:function(){T(!1),t==null||t()}},v.createElement("div",{className:"sendbird-voice-message-input-wrapper-alert__body"},v.createElement(Oi,{className:"sendbird-voice-message-input-wrapper-alert__body__ok-button",type:Gn.PRIMARY,size:va.BIG,onClick:function(){T(!1),t==null||t()}},I.BUTTON__OK))))},Sj=function(e,n){var t=e.sendFileMessage,r=e.sendMultipleFilesMessage,i=e.quoteMessage,a=n.logger,s=Ft().stringSet,o=Tt().config,l=o.imageCompression,u=o==null?void 0:o.uikitUploadSizeLimit,d=o==null?void 0:o.uikitMultipleFilesMessageLimit,f=oC().openModal;return N.useCallback(function(p){return Wt(void 0,void 0,void 0,function(){var m,E,g,y,S,C;return Qt(this,function(T){switch(T.label){case 0:return p.length===0?(a.warning("Channel|useHandleUploadFiles: given file list is empty.",{files:p}),[2]):p.length>d?(a.info("Channel|useHandleUploadFiles: Cannot upload files more than ".concat(d)),f({modalProps:{titleText:s.FILE_UPLOAD_NOTIFICATION__COUNT_LIMIT.replace("%d","".concat(u)),hideFooter:!0},childElement:function(I){var L=I.closeModal;return v.createElement(nd,{type:Gn.PRIMARY,submitText:s.BUTTON__OK,hideCancelButton:!0,onCancel:L,onSubmit:L})}}),[2]):p.some(function(I){return I.size>u})?(a.info("Channel|useHandleUploadFiles: Cannot upload file size exceeding ".concat(u)),m=1024*1024,f({modalProps:{titleText:s.FILE_UPLOAD_NOTIFICATION__SIZE_LIMIT.replace("%d","".concat(Math.floor(u/m))),hideFooter:!0},childElement:function(I){var L=I.closeModal;return v.createElement(nd,{type:Gn.PRIMARY,submitText:s.BUTTON__OK,hideCancelButton:!0,onCancel:L,onSubmit:L})}}),[2]):[4,xO({files:p,imageCompression:l,logger:a})];case 1:return E=T.sent().compressedFiles,g=E,g.length===1?(a.info("Channel|useHandleUploadFiles: sending one file."),y=g[0],[2,t({file:y,parentMessageId:i==null?void 0:i.messageId})]):g.length>1?(a.info("Channel|useHandleUploadFiles: sending multiple files."),S=[],C=[],g.forEach(function(I){As(I.type)?S.push(I):C.push(I)}),[2,C.reduce(function(I,L){return I.then(function(){return t({file:L,parentMessageId:i==null?void 0:i.messageId})})},function(){return S.length===0?Promise.resolve():S.length===1?t({file:S[0]}):r({fileInfoList:S.map(function(I){return{file:I,fileName:I.name,fileSize:I.size,mimeType:I.type}}),parentMessageId:i==null?void 0:i.messageId})}())]):[2]}})})},[t,r,i])},HO=v.forwardRef(function(e,n){var t,r=e.currentChannel,i=e.messages,a=e.loading,s=e.quoteMessage,o=e.setQuoteMessage,l=e.messageInputRef,u=e.sendUserMessage,d=e.sendFileMessage,f=e.sendVoiceMessage,p=e.sendMultipleFilesMessage,m=e.renderUserMentionItem,E=e.renderFileUploadIcon,g=e.renderVoiceMessageIcon,y=e.renderSendMessageIcon,S=e.acceptableMimeTypes,C=e.disabled,T=Ft().stringSet,I=_r().isMobile,L=Tt(),D=L.stores,O=L.config,R=O.isOnline,k=O.userMention,P=O.logger,G=O.groupChannel,V=D.sdkStore.sdk,H=k.maxMentionCount,F=k.maxSuggestionCount,z=r==null?void 0:r.isBroadcast,K=(r==null?void 0:r.myRole)==="operator",ee=(t=e.isMultipleFilesMessageEnabled)!==null&&t!==void 0?t:O.isMultipleFilesMessageEnabled,$=G.enableMention,Q=G.enableVoiceMessage,ne=N.useState(""),j=ne[0],Z=ne[1],ie=N.useState([]),fe=ie[0],te=ie[1],le=N.useState([]),Me=le[0],ae=le[1],he=N.useState(null),pe=he[0],Ne=he[1],_e=N.useState([]),ge=_e[0],me=_e[1],Le=N.useState(null),Qe=Le[0],Pe=Le[1],Ge=N.useState(!1),De=Ge[0],tt=Ge[1],Ue=a||!r||!V||!V.isCacheEnabled&&!R||Jh(r)||rd(r)||zI(r,O.groupChannel.enableSuggestedReplies)||jI(i,O.groupChannel.enableFormTypeMessage)||C,Ye=!Ue&&$&&j.length>0&&!z,yt=vf({ref:n||l},{logger:P}),Nt=(yt==null?void 0:yt.length)<H;N.useEffect(function(){Z(""),te([]),ae([]),Ne(null),me([]),Pe(null),tt(!1)},[r==null?void 0:r.url]),N.useEffect(function(){te(fe.filter(function(st){var Be=st.userId,nt=Me.indexOf(Be);return nt<0?!1:(Me.splice(nt,1),!0)}))},[Me]);var Rt=Sj({sendFileMessage:d,sendMultipleFilesMessage:p,quoteMessage:s??void 0},{logger:P});return z&&!K?null:v.createElement("div",{className:De?"sendbird-message-input-wrapper--voice-message":"sendbird-message-input-wrapper"},Ye&&v.createElement(mj,{currentChannel:r,targetNickname:j,inputEvent:Qe??void 0,renderUserMentionItem:m,onUserItemClick:function(st){st&&te(Ae(Ae([],fe,!0),[st],!1)),Z(""),Ne(st),Pe(null)},onFocusItemChange:function(){Pe(null)},onFetchUsers:function(st){me(st)},ableAddMention:Nt,maxMentionCount:H,maxSuggestionCount:F}),s&&v.createElement("div",{className:"sendbird-message-input-wrapper__quote-message-input"},v.createElement(gj,{replyingMessage:s,onClose:function(){return o(null)}})),De?v.createElement(FO,{channel:r??void 0,onSubmitClick:function(st,Be){f({file:st,parentMessageId:s==null?void 0:s.messageId},Be),o(null),tt(!1)},onCancelClick:function(){tt(!1)}}):v.createElement(Ku,{className:"sendbird-message-input-wrapper__message-input",channel:r,channelUrl:r==null?void 0:r.url,isMobile:I,acceptableMimeTypes:S,mentionSelectedUser:pe,isMentionEnabled:$,isVoiceMessageEnabled:Q,isSelectingMultipleFilesEnabled:ee,onVoiceMessageIconClick:function(){tt(!0)},setMentionedUsers:te,placeholder:s&&T.MESSAGE_INPUT__QUOTE_REPLY__PLACE_HOLDER||Jh(r)&&T.MESSAGE_INPUT__PLACE_HOLDER__FROZEN||rd(r)&&(I?T.MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT:T.MESSAGE_INPUT__PLACE_HOLDER__MUTED)||zI(r,O.groupChannel.enableSuggestedReplies)&&T.MESSAGE_INPUT__PLACE_HOLDER__SUGGESTED_REPLIES||jI(i,O.groupChannel.enableFormTypeMessage)&&T.MESSAGE_INPUT__PLACE_HOLDER__MESSAGE_FORM||C&&T.MESSAGE_INPUT__PLACE_HOLDER__DISABLED||void 0,ref:n||l,disabled:Ue,renderFileUploadIcon:E,renderSendMessageIcon:y,renderVoiceMessageIcon:g,onStartTyping:function(){r==null||r.startTyping()},onSendMessage:function(st){var Be,nt=st.message,qe=st.mentionTemplate;u({message:nt,mentionedUsers:fe,mentionedMessageTemplate:qe,parentMessageId:s==null?void 0:s.messageId}),Z(""),te([]),o(null),(Be=r==null?void 0:r.endTyping)===null||Be===void 0||Be.call(r)},onFileUpload:function(st){Rt(st),o(null)},onUserMentioned:function(st){(pe==null?void 0:pe.userId)===(st==null?void 0:st.userId)&&(Ne(null),Z(""))},onMentionStringChange:function(st){Z(st)},onMentionedUserIdsUpdated:function(st){ae(st)},onKeyDown:function(st){return Ye&&(ge==null?void 0:ge.length)>0&&(st.key===Yr.Enter&&Nt||st.key===Yr.ArrowUp||st.key===Yr.ArrowDown)?(Pe(st),!0):!1}}))}),Tj=function(e){var n=qu();return v.createElement(HO,x({},e,n))},Nj=function(e){var n=qu(),t=n.channelUrl,r=n.fetchChannelError,i=Fo(e),a=i.renderChannelHeader,s=a===void 0?function(f){return v.createElement(vG,x({},f))}:a,o=i.renderMessageList,l=o===void 0?function(f){return v.createElement(vj,x({},f,{className:"sendbird-conversation__message-list"}))}:o,u=i.renderMessageInput,d=u===void 0?function(){return v.createElement(Tj,x({},e))}:u;return v.createElement(IR,x({},e,n,{isInvalid:r!==null,channelUrl:t,renderChannelHeader:s,renderMessageList:l,renderMessageInput:d}))},BO=function(e){return v.createElement(JB,x({},e),v.createElement(Nj,x({},e)))},GO=v.createContext(null),Ij=function(e){var n,t,r,i=e.children,a=e.className,s=a===void 0?"":a,o=e.selectedChannelUrl,l=e.disableAutoSelect,u=l===void 0?!1:l,d=e.allowProfileEdit,f=e.isTypingIndicatorEnabled,p=e.isMessageReceiptStatusEnabled,m=e.channelListQueryParams,E=e.onThemeChange,g=e.onChannelSelect,y=g===void 0?Cn:g,S=e.onChannelCreated,C=S===void 0?Cn:S,T=e.onCreateChannelClick,I=e.onBeforeCreateChannel,L=e.onUserProfileUpdated,D=Tt(),O=D.config,R=D.stores,k=R.sdkStore,P=k.sdk,G=uR(P,O.logger),V=dR({isConnected:G},O),H=aF(P,{collectionCreator:Mj(P,m),markAsDelivered:function(Z){return Z.forEach(V.push)},onChannelsDeleted:function(Z){Z.forEach(function(ie){ie===o&&y(null)})}}),F=H.refreshing,z=H.initialized,K=H.groupChannels,ee=H.refresh,$=H.loadMore;N.useEffect(function(){var Z;!u&&R.sdkStore.initialized&&z&&(o||y((Z=K[0])!==null&&Z!==void 0?Z:null))},[u,R.sdkStore.initialized,z,o]),N.useEffect(function(){ee()},[Object.keys(m??{}).sort().map(function(Z){return"".concat(Z,"=").concat(encodeURIComponent(JSON.stringify(m[Z])))}).join("&")]);var Q=N.useState([]),ne=Q[0],j=Q[1];return dm(P,{onTypingStatusUpdated:function(Z){var ie,fe=ne.filter(function(te){return te!==Z.url});((ie=Z.getTypingUsers())===null||ie===void 0?void 0:ie.length)>0?j(fe.concat(Z.url)):j(fe)}}),v.createElement(GO.Provider,{value:{className:s,selectedChannelUrl:o,disableAutoSelect:u,allowProfileEdit:(n=d??O.allowProfileEdit)!==null&&n!==void 0?n:!0,isTypingIndicatorEnabled:(t=f??O.groupChannelList.enableTypingIndicator)!==null&&t!==void 0?t:!1,isMessageReceiptStatusEnabled:(r=p??O.groupChannelList.enableMessageReceiptStatus)!==null&&r!==void 0?r:!1,onChannelSelect:y,onChannelCreated:C,onThemeChange:E,onCreateChannelClick:T,onBeforeCreateChannel:I,onUserProfileUpdated:L,typingChannelUrls:ne,refreshing:F,initialized:z,groupChannels:K,refresh:ee,loadMore:$}},v.createElement(hd,x({},e),v.createElement("div",{className:"sendbird-channel-list ".concat(s)},i)))},wC=function(){var e=N.useContext(GO);if(!e)throw new Error("GroupChannelListContext not found. Use within the GroupChannelList module.");return e};function Mj(e,n){return function(t){var r=x(x({},t),n);return e.groupChannel.createGroupChannelCollection(x(x({},r),{filter:new cm(r)}))}}var Aj=function(e){var n=e.renderTitle,t=e.renderIconButton,r=e.onEdit,i=e.allowProfileEdit,a=e.renderLeft,s=e.renderMiddle,o=e.renderRight,l=Tt().stores,u=l.userStore.user,d=Ft().stringSet,f=s??n;return v.createElement(fi,{className:Zt("sendbird-channel-header",i&&"sendbird-channel-header--allow-edit"),renderLeft:a,renderMiddle:function(){var p;return(p=f==null?void 0:f())!==null&&p!==void 0?p:v.createElement("div",{className:"sendbird-channel-header__title",role:"button",onClick:function(){r==null||r()},onKeyDown:function(){r==null||r()},tabIndex:0},v.createElement("div",{className:"sendbird-channel-header__title__left"},v.createElement(Fr,{width:"32px",height:"32px",src:u.profileUrl,alt:u.nickname})),v.createElement("div",{className:"sendbird-channel-header__title__right"},v.createElement(Ie,{className:"sendbird-channel-header__title__right__name",type:Ce.SUBTITLE_2,color:de.ONBACKGROUND_1},u.nickname||d.NO_NAME),v.createElement(Ie,{className:"sendbird-channel-header__title__right__user-id",type:Ce.BODY_2,color:de.ONBACKGROUND_2},u.userId)))},renderRight:o??t})},VO=v.createContext(null),wj=function(e){var n=e.children,t=Ty(e,["children"]);return v.createElement(VO.Provider,{value:t},n)},Rj=function(){var e=v.useContext(VO);if(!e)throw new Error("EditUserProfileContext not found. Use within the EditUserProfile module.");return e},Oj=function(e){var n,t=e.formRef,r=e.inputRef,i=e.onThemeChange,a=e.setProfileImage,s=Tt(),o=s.stores,l=s.config,u=l.theme,d=l.setCurrentTheme,f=(n=o.userStore)===null||n===void 0?void 0:n.user,p=Ft().stringSet,m=N.useState(null),E=m[0],g=m[1],y=N.useRef(null);return v.createElement("form",{className:"sendbird-edit-user-profile",ref:t,onSubmit:function(S){S.preventDefault()}},v.createElement("section",{className:"sendbird-edit-user-profile__img"},v.createElement(Gc,null,p.EDIT_PROFILE__IMAGE_LABEL),v.createElement("div",{className:"sendbird-edit-user-profile__img__avatar"},v.createElement(Fr,{width:"80px",height:"80px",src:E||(f==null?void 0:f.profileUrl)})),v.createElement("input",{ref:y,type:"file",accept:"image/gif, image/jpeg, image/png",style:{display:"none"},onChange:function(S){S.target.files&&(g(URL.createObjectURL(S.target.files[0])),a(S.target.files[0])),y.current&&(y.current.value="")}}),v.createElement(to,{className:"sendbird-edit-user-profile__img__avatar-button",disableUnderline:!0,onClick:function(){var S;return(S=y.current)===null||S===void 0?void 0:S.click()}},v.createElement(Ie,{type:Ce.BUTTON_1,color:de.PRIMARY},p.EDIT_PROFILE__IMAGE_UPLOAD))),v.createElement("section",{className:"sendbird-edit-user-profile__name"},v.createElement(Gc,null,p.EDIT_PROFILE__NICKNAME_LABEL),v.createElement(Yp,{required:(f==null?void 0:f.nickname)!=="",name:"sendbird-edit-user-profile__name__input",ref:r,value:f==null?void 0:f.nickname,placeHolder:p.EDIT_PROFILE__NICKNAME_PLACEHOLDER})),v.createElement("section",{className:"sendbird-edit-user-profile__userid"},v.createElement(Gc,null,p.EDIT_PROFILE__USERID_LABEL),v.createElement(Yp,{disabled:!0,name:"sendbird-edit-user-profile__userid__input",value:f==null?void 0:f.userId})),v.createElement("section",{className:"sendbird-edit-user-profile__theme"},v.createElement(Gc,null,p.EDIT_PROFILE__THEME_LABEL),v.createElement("div",{className:"sendbird-edit-user-profile__theme__theme-icon"},u==="dark"?v.createElement(We,{onClick:function(){d("light"),i==null||i("light")},type:Se.TOGGLE_ON,width:44,height:24}):v.createElement(We,{onClick:function(){d("dark"),i==null||i("dark")},type:Se.TOGGLE_OFF,width:44,height:24}))))},Dj=function(e){var n,t,r,i=e.globalContext,a=e.formRef,s=e.inputRef,o=e.profileImage,l=e.onEditProfile,u=i.stores,d=i.dispatchers,f=u.sdkStore.sdk,p=u.userStore.user,m=d.userDispatcher;if((p==null?void 0:p.nickname)!==""&&!s.current.value){(t=(n=a.current).reportValidity)===null||t===void 0||t.call(n);return}f==null||f.updateCurrentUserInfo({nickname:(r=s==null?void 0:s.current)===null||r===void 0?void 0:r.value,profileImage:o??void 0}).then(function(E){m({type:Ml.UPDATE_USER_INFO,payload:E}),l==null||l(E)})},Lj=function(e){var n=e.onEditProfile,t=Tt(),r=N.useRef(null),i=N.useRef(null),a=N.useState(null),s=a[0],o=a[1],l=function(){Dj({globalContext:t,formRef:i,inputRef:r,profileImage:s,onEditProfile:n})};return{formRef:i,inputRef:r,updateUserInfo:l,profileImage:s,setProfileImage:o}},Uj=function(){var e=Rj(),n=e.onEditProfile,t=e.onCancel,r=e.onThemeChange,i=N.useContext(wn).stringSet,a=Lj({onEditProfile:n}),s=a.formRef,o=a.inputRef,l=a.updateUserInfo,u=a.setProfileImage;return v.createElement(Rr,{titleText:i.EDIT_PROFILE__TITLE,submitText:i.BUTTON__SAVE,type:Gn.PRIMARY,onCancel:t,isFullScreenOnMobile:!0,onSubmit:l},v.createElement(Oj,{formRef:s,inputRef:o,setProfileImage:u,onThemeChange:r}))},kj=function(e){var n=e.onEditProfile,t=e.onCancel,r=e.onThemeChange;return v.createElement(wj,{onEditProfile:n,onCancel:t,onThemeChange:r},v.createElement(Uj,null))};function RC(e,n,t){t===void 0&&(t={leading:!0,trailing:!1});var r=N.useRef(null),i=N.useRef(null);return N.useEffect(function(){return function(){r.current&&clearTimeout(r.current)}},[]),ur(function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(r.current){i.current=a;return}t.leading?e.apply(void 0,a):i.current=a;var o=function(){t.trailing&&i.current?(e.apply(void 0,i.current),i.current=null,r.current=setTimeout(o,n)):r.current=null};r.current=setTimeout(o,n)})}var Pj=100;function Pl(e){var n=e.onReachedTop,t=e.onReachedBottom,r=e.onInBetween,i=ur(function(a){if(a!=null&&a.target){var s=a.target,o=s.scrollTop,l=s.scrollHeight,u=s.clientHeight,d={distanceFromBottom:l-o-u};n&&Ao(o,0,bs)?n(d):t&&Ao(l,u+o,bs)?t(d):r&&r(d)}});return RC(i,Pj,{trailing:!0})}var zO=function(e){var n=e.renderHeader,t=e.renderPlaceHolderError,r=e.renderPlaceHolderLoading,i=e.renderPlaceHolderEmptyList,a=e.onChangeTheme,s=e.onUserProfileUpdated,o=e.allowProfileEdit,l=e.channels,u=e.onLoadMore,d=e.initialized,f=e.renderChannel,p=e.renderAddChannel,m=N.useState(!1),E=m[0],g=m[1],y=Tt().stores,S={addChannel:p,channel:f,placeholder:{loading:function(){return d?null:r?r():v.createElement(Mr,{type:kn.LOADING})},empty:function(){return d?i?i():v.createElement(Mr,{type:kn.NO_CHANNELS}):null},error:function(){return!d||!y.sdkStore.error?null:t?t():v.createElement(Mr,{type:kn.WRONG})}}};return v.createElement(v.Fragment,null,v.createElement("div",{className:"sendbird-channel-list__header"},(n==null?void 0:n())||v.createElement(Aj,{onEdit:function(){return o&&g(!0)},allowProfileEdit:o,renderIconButton:function(){return S.addChannel()}})),E&&v.createElement(kj,{onThemeChange:a,onCancel:function(){return g(!1)},onEditProfile:function(C){g(!1),s(C)}}),v.createElement(xj,{data:l,renderItem:S.channel,onLoadMore:u,placeholderLoading:S.placeholder.loading(),placeholderEmpty:S.placeholder.empty(),placeholderError:S.placeholder.error()}))},xj=function(e){var n=e.data,t=e.renderItem,r=e.onLoadMore,i=e.placeholderLoading,a=e.placeholderError,s=e.placeholderEmpty,o=Pl({onReachedBottom:function(){return r==null?void 0:r()}});return v.createElement("div",{className:"sendbird-channel-list__body",onScroll:o},a,v.createElement("div",null,n.map(function(l,u){return t({item:l,index:u})})),i,n.length===0&&s)},Fj=function(e){var n=e.channel,t=e.onSubmit,r=e.onCancel,i=Tt().config,a=i.logger,s=i.isOnline,o=Ft().stringSet;if(n)return v.createElement(Rr,{disabled:!s,onCancel:r,onSubmit:function(){a.info("LeaveGroupChannel: Leaving channel",n),n.leave().then(function(){a.info("LeaveGroupChannel: Leaving channel successful!",n),t==null||t()})},submitText:o.MODAL__LEAVE_CHANNEL__FOOTER,titleText:o.MODAL__LEAVE_CHANNEL__TITLE})};function jO(e){var n=e.channel,t=e.disabled,r=t===void 0?!1:t,i=e.onLeaveChannel,a=N.useRef(null),s=N.useRef(null),o=N.useState(!1),l=o[0],u=o[1],d=N.useContext(wn).stringSet;return v.createElement("div",{ref:s,tabIndex:0,role:"button",style:{display:"inline-block"},onKeyDown:function(f){return f.stopPropagation()},onClick:function(f){return f.stopPropagation()}},v.createElement(zi,{menuTrigger:function(f){return v.createElement(fa,{ref:a,onClick:f,height:"32px",width:"32px"},v.createElement(We,{type:Se.MORE,fillColor:Ve.PRIMARY,width:"24px",height:"24px"}))},menuItems:function(f){return v.createElement(Di,{parentRef:a,parentContainRef:s,closeDropdown:f},v.createElement(pi,{onClick:function(){r||(u(!0),f())},testID:"channel_list_item_context_menu_leave_channel"},d.CHANNEL_SETTING__LEAVE_CHANNEL__TITLE))}}),l&&v.createElement(Fj,{channel:n,onSubmit:function(){u(!1),i==null||i()},onCancel:function(){return u(!1)}}))}function py(e){var n=e.count,t=e.maxLevel,r=t===void 0?2:t,i=e.className,a=i===void 0?"":i,s=N.useContext(wn).stringSet,o=parseInt("9".repeat(r>6?6:r),10);return v.createElement("div",{className:Ae(Ae([],Array.isArray(a)?a:[a],!0),["sendbird-badge"],!1).join(" ")},v.createElement("div",{className:"sendbird-badge__text"},v.createElement(Ie,{type:Ce.CAPTION_2,color:de.ONCONTENT_1},typeof n=="string"?n:n>o?"".concat(o).concat(s.BADGE__OVER):n)))}function Hj(e){var n=e.className,t=n===void 0?"":n,r=e.children,i=e.isReverse,a=i===void 0?!1:i,s=e.color,o=e.userId;return v.createElement("span",{className:Zt(VR,t,a&&"reverse",s),contentEditable:!1,"data-userid":o,"data-sb-mention":!0},r)}var qO=function(e){var n=e.channel,t=e.tabIndex,r=e.isTyping,i=e.isSelected,a=e.channelName,s=e.isMessageStatusEnabled,o=s===void 0?!0:s,l=e.onClick,u=l===void 0?Cn:l,d=e.onLeaveChannel,f=d===void 0?function(){return Promise.resolve()}:d,p=e.renderChannelAction,m=Tt().config,E=m.theme,g=m.userId,y=Ft(),S=y.dateLocale,C=y.stringSet,T=_r().isMobile,I=m.groupChannel.enableMention,L=RV(n,C),D=m.groupChannel.enableMarkdownForUserMessage?CV(L):L,O=N.useState(!1),R=O[0],k=O[1],P=rs({onLongPress:function(){T&&k(!0)},onClick:u},{delay:1e3});return v.createElement(v.Fragment,null,v.createElement("div",x({className:["sendbird-channel-preview",i?"sendbird-channel-preview--active":""].join(" "),role:"link",tabIndex:t},T?x({},P):{onClick:u}),v.createElement("div",{className:"sendbird-channel-preview__avatar"},v.createElement(mm,{channel:n,userId:g,theme:E})),v.createElement("div",{className:"sendbird-channel-preview__content"},v.createElement("div",{className:"sendbird-channel-preview__content__upper"},v.createElement("div",{className:"sendbird-channel-preview__content__upper__header"},(n.isBroadcast||!1)&&v.createElement("div",{className:"sendbird-channel-preview__content__upper__header__broadcast-icon"},v.createElement(We,{type:Se.BROADCAST,fillColor:Ve.SECONDARY,height:"16px",width:"16px"})),v.createElement(Ie,{className:"sendbird-channel-preview__content__upper__header__channel-name",testID:"sendbird-channel-preview__content__upper__header__channel-name",type:Ce.SUBTITLE_2,color:de.ONBACKGROUND_1},a),v.createElement(Ie,{className:"sendbird-channel-preview__content__upper__header__total-members",type:Ce.CAPTION_2,color:de.ONBACKGROUND_2},AV(n)),n.isFrozen&&v.createElement("div",{title:"Frozen",className:"sendbird-channel-preview__content__upper__header__frozen-icon"},v.createElement(We,{type:Se.FREEZE,fillColor:Ve.PRIMARY,height:12,width:12}))),!n.isEphemeral&&o&&v.createElement(pC,{className:"sendbird-channel-preview__content__upper__last-message-at",channel:n,message:n.lastMessage,isDateSeparatorConsidered:!1}),!n.isEphemeral&&!o&&v.createElement(Ie,{className:"sendbird-channel-preview__content__upper__last-message-at",type:Ce.CAPTION_3,color:de.ONBACKGROUND_2},XR({channel:n,locale:S,stringSet:C}))),v.createElement("div",{className:"sendbird-channel-preview__content__lower"},v.createElement(Ie,{className:"sendbird-channel-preview__content__lower__last-message",type:Ce.BODY_2,color:de.ONBACKGROUND_3},r&&v.createElement(NR,{members:n.getTypingUsers()}),!r&&!Fa(n.lastMessage)&&D,!r&&Fa(n.lastMessage)&&C.VOICE_MESSAGE),!i&&!n.isEphemeral&&v.createElement("div",{className:"sendbird-channel-preview__content__lower__unread-message-count"},I&&n.unreadMentionCount>0?v.createElement(Hj,{className:"sendbird-channel-preview__content__lower__unread-message-count__mention",color:"purple"},"@"):null,pM(n)?v.createElement(py,{count:pM(n)}):null))),!T&&v.createElement("div",{className:"sendbird-channel-preview__action"},p({channel:n}))),R&&T&&v.createElement(Rr,{className:"sendbird-channel-preview__leave--mobile",titleText:a,hideFooter:!0,isCloseOnClickOutside:!0,onCancel:function(){return k(!1)}},v.createElement(to,{onClick:function(){f(),k(!1)},className:"sendbird-channel-preview__leave-label--mobile"},v.createElement(Ie,{type:Ce.SUBTITLE_1,color:de.ONBACKGROUND_1},C.CHANNEL_PREVIEW_MOBILE_LEAVE))))},Bj=function(e){var n,t,r,i=e.channel,a=e.isSelected,s=e.isTyping,o=e.renderChannelAction,l=e.onLeaveChannel,u=e.onClick,d=e.tabIndex,f=Tt().config,p=Ft().stringSet,m=wC(),E=m.isTypingIndicatorEnabled,g=E===void 0?!1:E,y=m.isMessageReceiptStatusEnabled,S=y===void 0?!1:y,C=f.userId,T=S&&!(!((n=i.lastMessage)===null||n===void 0)&&n.isAdminMessage())&&((r=(t=i.lastMessage)===null||t===void 0?void 0:t.sender)===null||r===void 0?void 0:r.userId)===C;return v.createElement(qO,{channel:i,tabIndex:d,channelName:YR(i,C,p),isTyping:g&&s,isSelected:a,isMessageStatusEnabled:T,onClick:u,onLeaveChannel:l,renderChannelAction:o})},Co;(function(e){e.GROUP="group",e.SUPERGROUP="supergroup",e.BROADCAST="broadcast"})(Co||(Co={}));var KO=v.createContext(null),Gj=function(e){var n,t=e.children,r=e.onCreateChannelClick,i=e.onBeforeCreateChannel,a=e.onChannelCreated,s=e.userListQuery,o=e.onCreateChannel,l=e.overrideInviteUser,u=Tt(),d=s??((n=u==null?void 0:u.config)===null||n===void 0?void 0:n.userListQuery),f=N.useState(0),p=f[0],m=f[1],E=N.useState(Co.GROUP),g=E[0],y=E[1];return v.createElement(KO.Provider,{value:{sdk:u.stores.sdkStore.sdk,createChannel:eO(u),onCreateChannelClick:r,onBeforeCreateChannel:i,onChannelCreated:a,userListQuery:d,step:p,setStep:m,type:g,setType:y,onCreateChannel:o,overrideInviteUser:l}},t)},OC=function(){var e=v.useContext(KO);if(!e)throw new Error("CreateChannelContext not found. Use within the CreateChannel module.");return e},Vj=function(e){return function(n){return e==null?void 0:e.includes(n)}},aA=function(e,n){return n==="broadcast"&&(e.isBroadcast=!0),n==="supergroup"&&(e.isSuper=!0),e},zj=function(e){var n=e.sdk,t=e.userFilledApplicationUserListQuery,r=n.createApplicationUserListQuery();return t&&Object.keys(t).forEach(function(i){r[i]=t[i]}),r},jj=50,qj=function(e){var n,t,r,i=e.onCancel,a=e.userListQuery,s=OC(),o=s.onCreateChannelClick,l=s.onBeforeCreateChannel,u=s.onChannelCreated,d=s.createChannel,f=s.onCreateChannel,p=s.overrideInviteUser,m=s.type,E=Tt(),g=(n=E==null?void 0:E.config)===null||n===void 0?void 0:n.userId,y=(r=(t=E==null?void 0:E.stores)===null||t===void 0?void 0:t.sdkStore)===null||r===void 0?void 0:r.sdk,S=[g],C=N.useState([]),T=C[0],I=C[1],L=N.useState({}),D=L[0],O=L[1],R=N.useContext(wn).stringSet,k=N.useState(null),P=k[0],G=k[1],V=Object.keys(D).length,H=R.MODAL__CREATE_CHANNEL__TITLE,F=R.BUTTON__CREATE,z=_r().isMobile,K=N.useState(window.innerHeight),ee=K[0],$=K[1];return N.useEffect(function(){var Q=a?a():zj({sdk:y});G(Q),Q!=null&&Q.isLoading||Q.next().then(function(ne){I(ne)})},[]),N.useEffect(function(){var Q=function(){$(window.innerHeight)};return window.addEventListener("resize",Q),function(){window.removeEventListener("resize",Q)}},[]),v.createElement(Rr,{isFullScreenOnMobile:!0,titleText:H,submitText:F,type:Gn.PRIMARY,disabled:T.length>1&&Object.keys(D).length===0,onCancel:i,onSubmit:function(){var Q=Object.keys(D).length>0?Object.keys(D):[g],ne=u??f,j=o??p;if(typeof j=="function"){j({users:Q,onClose:i??Cn,channelType:m});return}if(l){var Z=l(Q);aA(Z,m),d(Z).then(function(ie){return ne==null?void 0:ne(ie)})}else{var Z={};Z.invitedUserIds=Q,Z.isDistinct=!1,g&&(Z.operatorUserIds=[g]),aA(Z,m),d(Z).then(function(fe){return ne==null?void 0:ne(fe)})}i==null||i()}},v.createElement("div",null,v.createElement(Ie,{color:V>0?de.PRIMARY:de.ONBACKGROUND_3,type:Ce.CAPTION_1},"".concat(V," ").concat(R.MODAL__INVITE_MEMBER__SELECTED)),v.createElement("div",{className:"sendbird-create-channel--scroll",style:z?{height:"calc(".concat(ee,"px - 200px)")}:{},onScroll:function(Q){if(P){var ne=Q.target,j=P.hasNext,Z=P.isLoading,ie=ne.clientHeight+ne.scrollTop+jj>ne.scrollHeight;j&&ie&&!Z&&P.next().then(function(fe){I(Ae(Ae([],T,!0),fe,!0))})}}},T.map(function(Q){return!Vj(S)(Q.userId)&&v.createElement(is,{key:Q.userId,user:Q,checkBox:!0,checked:D[Q.userId],onChange:function(ne){var j,Z=x(x({},D),(j={},j[ne.target.id]=ne.target.checked,j));ne.target.checked||delete Z[ne.target.id],O(Z)}})}))))},Kj=function(e){var n,t="allow_broadcast_channel",r=(n=e==null?void 0:e.appInfo)===null||n===void 0?void 0:n.applicationAttributes;return Array.isArray(r)?r.includes(t):!1},$j=function(e){var n,t="allow_super_group_channel",r=(n=e==null?void 0:e.appInfo)===null||n===void 0?void 0:n.applicationAttributes;return Array.isArray(r)?r.includes(t):!1},Wj=function(e){var n=e.onCancel,t=Tt(),r=JR(t),i=OC(),a=i.setStep,s=i.setType,o=N.useContext(wn).stringSet,l=Kj(r),u=$j(r);return v.createElement(Rr,{titleText:o==null?void 0:o.MODAL__CREATE_CHANNEL__TITLE,hideFooter:!0,onCancel:function(){n==null||n()},className:"sendbird-add-channel__modal"},v.createElement("div",{className:"sendbird-add-channel__rectangle-wrap"},v.createElement("div",{className:"sendbird-add-channel__rectangle",onClick:function(){s(Co.GROUP),a(1)},role:"button",tabIndex:0,onKeyDown:function(){s(Co.GROUP),a(1)}},v.createElement(We,{className:"sendbird-add-channel__rectangle__chat-icon",type:Se.CHAT,fillColor:Ve.PRIMARY,width:"28px",height:"28px"}),v.createElement(Ie,{type:Ce.SUBTITLE_1,color:de.ONBACKGROUND_1},o.MODAL__CREATE_CHANNEL__GROUP)),u&&v.createElement("div",{className:"sendbird-add-channel__rectangle",onClick:function(){s(Co.SUPERGROUP),a(1)},role:"button",tabIndex:0,onKeyDown:function(){s(Co.SUPERGROUP),a(1)}},v.createElement(We,{className:"sendbird-add-channel__rectangle__supergroup-icon",type:Se.SUPERGROUP,fillColor:Ve.PRIMARY,width:"28px",height:"28px"}),v.createElement(Ie,{type:Ce.SUBTITLE_1,color:de.ONBACKGROUND_1},o.MODAL__CREATE_CHANNEL__SUPER)),l&&v.createElement("div",{className:"sendbird-add-channel__rectangle",onClick:function(){s(Co.BROADCAST),a(1)},role:"button",tabIndex:0,onKeyDown:function(){s(Co.BROADCAST),a(1)}},v.createElement(We,{className:"sendbird-add-channel__rectangle__broadcast-icon",type:Se.BROADCAST,fillColor:Ve.PRIMARY,width:"28px",height:"28px"}),v.createElement(Ie,{type:Ce.SUBTITLE_1,color:de.ONBACKGROUND_1},o.MODAL__CREATE_CHANNEL__BROADCAST))))},Qj=function(e){var n=e.onCancel,t=e.renderStepOne,r=OC(),i=r.step,a=r.setStep,s=r.userListQuery;return v.createElement(v.Fragment,null,i===0&&((t==null?void 0:t())||v.createElement(Wj,{onCancel:n})),i===1&&v.createElement(qj,{userListQuery:s,onCancel:function(){a(0),n==null||n()}}))},Yj=function(e){return v.createElement(Gj,x({},e),v.createElement(Qj,x({},e)))},$O=function(e){var n=e.createChannelVisible,t=e.onChangeCreateChannelVisible,r=e.onBeforeCreateChannel,i=e.onCreateChannelClick,a=e.onChannelCreated,s=Tt().config;return v.createElement(v.Fragment,null,v.createElement(fa,{height:"32px",width:"32px",disabled:!s.isOnline,onClick:function(){return t(!0)}},v.createElement(We,{type:Se.CREATE,fillColor:Ve.PRIMARY,width:"24px",height:"24px"})),n&&v.createElement(Yj,{onCancel:function(){return t(!1)},onChannelCreated:function(o){a==null||a(o),t(!1)},onBeforeCreateChannel:r,onCreateChannelClick:i}))},Xj=function(){var e=N.useState(!1),n=e[0],t=e[1],r=wC(),i=r.onChannelCreated,a=r.onBeforeCreateChannel,s=r.onCreateChannelClick;return v.createElement($O,{createChannelVisible:n,onChangeCreateChannelVisible:t,onCreateChannelClick:s,onBeforeCreateChannel:a,onChannelCreated:i})},Zj=function(e){var n=e.renderHeader,t=e.renderChannelPreview,r=e.renderPlaceHolderError,i=e.renderPlaceHolderLoading,a=e.renderPlaceHolderEmptyList,s=wC(),o=s.onChannelSelect,l=s.onThemeChange,u=s.allowProfileEdit,d=s.typingChannelUrls,f=s.groupChannels,p=s.initialized,m=s.selectedChannelUrl,E=s.loadMore,g=s.onUserProfileUpdated,y=Tt(),S=y.stores,C=y.config,T=C.logger,I=C.isOnline,L=S.sdkStore.sdk,D=function(O){var R=O.item,k=O.index,P={channel:R,tabIndex:k,isSelected:R.url===m,isTyping:d.includes(R.url),renderChannelAction:function(G){return v.createElement(jO,x({},G))},onClick:function(){I||L!=null&&L.isCacheEnabled?(T.info("ChannelList: Clicked on channel:",R),o(R)):T.warning("ChannelList: Inactivated clicking channel item during offline.")},onLeaveChannel:function(){return Wt(this,void 0,void 0,function(){return Qt(this,function(G){switch(G.label){case 0:return T.info("ChannelList: Leaving channel",R),[4,R.leave()];case 1:return G.sent(),T.info("ChannelList: Leaving channel success"),[2]}})})}};return t?v.createElement("div",{key:R.url,onClick:P.onClick},t(P)):v.createElement(Bj,x({key:R.url},P))};return v.createElement(zO,{renderHeader:n,renderChannel:D,renderPlaceHolderError:r,renderPlaceHolderLoading:i,renderPlaceHolderEmptyList:a,onChangeTheme:l??Cn,allowProfileEdit:u,onUserProfileUpdated:g??Cn,channels:f,onLoadMore:E,initialized:p,renderAddChannel:function(){return v.createElement(Xj,null)}})},WO=function(e){return v.createElement(Ij,x({},e),v.createElement(Zj,x({},e)))},DC="RESET_MESSAGES",Sm="FETCH_INITIAL_MESSAGES_START",Tm="FETCH_INITIAL_MESSAGES_SUCCESS",af="FETCH_INITIAL_MESSAGES_FAILURE",LC="FETCH_PREV_MESSAGES_SUCCESS",UC="FETCH_PREV_MESSAGES_FAILURE",kC="FETCH_NEXT_MESSAGES_SUCCESS",PC="FETCH_NEXT_MESSAGES_FAILURE",xC="SEND_MESSAGE_START",Ys="SEND_MESSAGE_SUCCESS",wo="SEND_MESSAGE_FAILURE",Vh="RESEND_MESSAGE_START",FC="ON_MESSAGE_RECEIVED",_f="ON_MESSAGE_UPDATED",HC="ON_MESSAGE_THREAD_INFO_UPDATED",gf="ON_MESSAGE_DELETED",BC="ON_MESSAGE_DELETED_BY_REQ_ID",Ia="SET_CURRENT_CHANNEL",GC="SET_CHANNEL_INVALID",QO="MARK_AS_READ",VC="ON_REACTION_UPDATED",zC="SET_EMOJI_CONTAINER",jC="MESSAGE_LIST_PARAMS_CHANGED",Nm="ON_FILE_INFO_UPLOADED",Im="ON_TYPING_STATUS_UPDATED",Jj=Object.freeze({__proto__:null,FETCH_INITIAL_MESSAGES_FAILURE:af,FETCH_INITIAL_MESSAGES_START:Sm,FETCH_INITIAL_MESSAGES_SUCCESS:Tm,FETCH_NEXT_MESSAGES_FAILURE:PC,FETCH_NEXT_MESSAGES_SUCCESS:kC,FETCH_PREV_MESSAGES_FAILURE:UC,FETCH_PREV_MESSAGES_SUCCESS:LC,MARK_AS_READ:QO,MESSAGE_LIST_PARAMS_CHANGED:jC,ON_FILE_INFO_UPLOADED:Nm,ON_MESSAGE_DELETED:gf,ON_MESSAGE_DELETED_BY_REQ_ID:BC,ON_MESSAGE_RECEIVED:FC,ON_MESSAGE_THREAD_INFO_UPDATED:HC,ON_MESSAGE_UPDATED:_f,ON_REACTION_UPDATED:VC,ON_TYPING_STATUS_UPDATED:Im,RESEND_MESSAGE_START:Vh,RESET_MESSAGES:DC,SEND_MESSAGE_FAILURE:wo,SEND_MESSAGE_START:xC,SEND_MESSAGE_SUCCESS:Ys,SET_CHANNEL_INVALID:GC,SET_CURRENT_CHANNEL:Ia,SET_EMOJI_CONTAINER:zC}),sA=function(e){return e==null};function jn(e,n){if(sA(e)||sA(n))return!1;var t=e.toString(),r=n.toString();return t===r}var Mm=30,Am=15;function eq(e,n){var t=e.currentGroupChannel,r=e.initialTimeStamp,i=e.userFilledMessageListQuery,a=e.replyType,s=e.setIsScrolled,o=n.logger,l=n.scrollRef,u=n.messagesDispatcher,d=t==null?void 0:t.url,f=N.useCallback(function(){if(o.info("Channel useInitialMessagesFetch: Setup started",t),s(!1),u({type:DC,payload:null}),t&&(t!=null&&t.getMessagesByTimestamp)){var p={prevResultSize:Mm,isInclusive:!0,includeReactions:!0,includeMetaArray:!0};r&&(p.nextResultSize=Am),(a==="QUOTE_REPLY"||a==="THREAD")&&(p.includeThreadInfo=!0,p.includeParentMessageInfo=!0,p.replyType=Ar.ONLY_REPLY_TO_CHANNEL),i&&Object.keys(i).forEach(function(m){p[m]=i[m]}),(a&&(a==="QUOTE_REPLY"||a==="THREAD")||i)&&(o.info("Channel useInitialMessagesFetch: Setup messageListParams",p),u({type:jC,payload:p})),o.info("Channel: Fetching messages",{currentGroupChannel:t,userFilledMessageListQuery:i}),u({type:Sm,payload:null}),t.getMessagesByTimestamp(r||new Date().getTime(),p).then(function(m){u({type:Tm,payload:{currentGroupChannel:t,messages:m}})}).catch(function(m){o.error("Channel: Fetching messages failed",m),u({type:af,payload:{currentGroupChannel:t}})}).finally(function(){r?setTimeout(function(){LO(l,r,s)},500):setTimeout(function(){return Zs(0,l,s)},T2)})}},[d,i,r]);return N.useEffect(function(){f()},[f]),f}function YO(e,n,t){t===void 0&&(t=!0);var r=N.useState(!1),i=r[0],a=r[1],s=!e;N.useEffect(function(){var l=function(){t&&a(document.hidden)};return document.addEventListener("visibilitychange",l),function(){document.removeEventListener("visibilitychange",l)}},[t,document.hidden]);var o=s&&!!n&&!i;return{shouldReconnect:o}}var tq=function(e){e===void 0&&(e=[]);for(var n=new Map,t=0;t<e.length;t+=1){var r=e[t],i=r.userId,a=r.nickname;n.set(i,a)}return n},nq=function(e){return e?rq(e)?e:iq(e)&&(e==null?void 0:e.parentMessage)||null:null},rq=function(e){return(e==null?void 0:e.parentMessage)===null&&typeof(e==null?void 0:e.parentMessageId)=="number"&&!(e!=null&&e.parentMessageId)},iq=function(e){return(e==null?void 0:e.parentMessage)!==null&&typeof(e==null?void 0:e.parentMessageId)=="number"&&(e==null?void 0:e.parentMessageId)>0&&(e==null?void 0:e.threadInfo)===null},oA=function(e,n,t){return Math.abs(e-n)<=t},lA=function(e){return e==null};function cl(e,n){if(lA(e)||lA(n))return!1;var t=e.toString(),r=n.toString();return t===r}var Ma=function(e){e===void 0&&(e=0);var n=10,t=e;if(!(t>n))try{var r=document.querySelector(".sendbird-thread-ui--scroll");r&&(r.scrollTop=r.scrollHeight)}catch{setTimeout(function(){Ma(t+1)},500*t)}},XO=function(e,n){var t=e.currentChannel,r=e.onBeforeSendMultipleFilesMessage,i=e.publishingModules,a=n.logger,s=n.pubSub,o=n.scrollRef,l=N.useCallback(function(u,d){return new Promise(function(f,p){t||(a.warning("Channel: Sending MFm failed, because currentChannel is null.",{currentChannel:t}),p()),u.length<=1&&(a.warning("Channel: Sending MFM failed, because there are no multiple files.",{files:u}),p());var m={fileInfoList:u.map(function(E){return{file:E,fileName:E.name,fileSize:E.size,mimeType:E.type}})};d&&(m.isReplyToChannel=!0,m.parentMessageId=d.messageId),typeof r=="function"&&(m=r(u,d)),a.info("Channel: Start sending MFM",{messageParams:m});try{t==null||t.sendMultipleFilesMessage(m).onFileUploaded(function(E,g,y,S){a.info("Channel: onFileUploaded during sending MFM",{requestId:E,index:g,error:S,uploadableFileInfo:y}),s.publish(Fn.ON_FILE_INFO_UPLOADED,{response:{channelUrl:t.url,requestId:E,index:g,uploadableFileInfo:y,error:S},publishingModules:i})}).onPending(function(E){a.info("Channel: in progress of sending MFM",{pendingMessage:E,fileInfoList:m.fileInfoList}),s.publish(Fn.SEND_MESSAGE_START,{message:E,channel:t,publishingModules:i}),setTimeout(function(){o&&fp(i)&&Zs(0,o),Eh(i)&&Ma(0)},wl)}).onFailed(function(E,g){a.error("Channel: Sending MFM failed.",{error:E,failedMessage:g}),s.publish(Fn.SEND_MESSAGE_FAILED,{channel:t,message:g,publishingModules:i}),p(E)}).onSucceeded(function(E){a.info("Channel: Sending voice message success!",{succeededMessage:E}),s.publish(Fn.SEND_FILE_MESSAGE,{channel:t,message:E,publishingModules:i}),f(E)})}catch(E){a.error("Channel: Sending MFM failed.",{error:E}),p(E)}})},[t,r,i]);return[l]},aq={initialized:!1,loading:!0,allMessages:[],localMessages:[],currentGroupChannel:null,hasMorePrev:!1,oldestMessageTimeStamp:0,hasMoreNext:!1,latestMessageTimeStamp:0,emojiContainer:{emojiCategories:[],emojiHash:""},unreadSince:null,unreadSinceDate:null,isInvalid:!1,readStatus:null,messageListParams:null,typingMembers:[]},uA=function(e){e===void 0&&(e=[]);var n=e[0];return n&&n.createdAt||null},cA=function(e){e===void 0&&(e=[]);var n=e[e.length-1];return n&&n.createdAt||null};function Pc(e){return"reqId"in e}function sq(e,n){var t=Ft().stringSet;return si(n).with({type:DC},function(){return x(x({},e),{hasMorePrev:!1,hasMoreNext:!1,allMessages:[],localMessages:[]})}).with({type:Sm},function(){return x(x({},e),{loading:!0,allMessages:e.allMessages.filter(function(r){return Vu(r)?r.sendingStatus!==yn.SUCCEEDED:!0}),localMessages:[]})}).with({type:Tm},function(r){var i,a=r.payload,s=a.currentGroupChannel,o=a.messages;if((s==null?void 0:s.url)!==((i=e.currentGroupChannel)===null||i===void 0?void 0:i.url))return e;var l=uA(o),u=cA(o);return x(x({},e),{loading:!1,initialized:!0,hasMorePrev:!0,hasMoreNext:!0,oldestMessageTimeStamp:l,latestMessageTimeStamp:u,allMessages:Ae([],o,!0)})}).with({type:LC},function(r){var i,a,s,o,l=r.payload,u=l.currentGroupChannel,d=l.messages;if((u==null?void 0:u.url)!==((i=e.currentGroupChannel)===null||i===void 0?void 0:i.url))return e;var f=((a=d==null?void 0:d.length)!==null&&a!==void 0?a:0)>=((o=(s=e==null?void 0:e.messageListParams)===null||s===void 0?void 0:s.prevResultSize)!==null&&o!==void 0?o:Mm)+1,p=uA(d),m=[],E=e.allMessages.map(function(y){var S=d.find(function(C){var T=C.messageId;return jn(T,y.messageId)});return S?(m.push(S.messageId),S.updatedAt>y.updatedAt?S:y):y}),g=m.length>0?d.filter(function(y){return!m.find(function(S){return jn(S,y.messageId)})}):d;return x(x({},e),{hasMorePrev:f,oldestMessageTimeStamp:p,allMessages:Ae(Ae([],g,!0),E,!0)})}).with({type:kC},function(r){var i,a,s,o,l=r.payload,u=l.currentGroupChannel,d=l.messages;if((u==null?void 0:u.url)!==((i=e.currentGroupChannel)===null||i===void 0?void 0:i.url))return e;var f=((a=d==null?void 0:d.length)!==null&&a!==void 0?a:0)===((o=(s=e==null?void 0:e.messageListParams)===null||s===void 0?void 0:s.nextResultSize)!==null&&o!==void 0?o:Am)+1,p=cA(d),m=dj(e.allMessages,d);return x(x({},e),{hasMoreNext:f,latestMessageTimeStamp:p,allMessages:m})}).with({type:$g.union(af,UC,PC)},function(r){var i,a=r.payload.currentGroupChannel;if((a==null?void 0:a.url)!==((i=e==null?void 0:e.currentGroupChannel)===null||i===void 0?void 0:i.url))return e;var s=[af].includes(r.type);return x(x({},e),{loading:!1,isInvalid:s,initialized:!1,allMessages:[],hasMorePrev:!1,hasMoreNext:!1,oldestMessageTimeStamp:null,latestMessageTimeStamp:null})}).with({type:xC},function(r){return x(x({},e),{localMessages:Ae(Ae([],e.localMessages,!0),[r.payload],!1)})}).with({type:Ys},function(r){var i=r.payload,a=e.allMessages.filter(function(s){return!Pc(s)||(s==null?void 0:s.reqId)!==(i==null?void 0:i.reqId)});return x(x({},e),{allMessages:Ae(Ae([],a,!0),[i],!1),localMessages:e.localMessages.filter(function(s){return Pc(s)&&(s==null?void 0:s.reqId)!==(i==null?void 0:i.reqId)})})}).with({type:wo},function(r){return r.payload.failed=!0,x(x({},e),{localMessages:e.localMessages.map(function(i){return jn(Pc(i)&&i.reqId,r.payload.reqId)?r.payload:i})})}).with({type:Ia},function(r){return x(x({},e),{currentGroupChannel:r.payload,isInvalid:!1})}).with({type:GC},function(){return x(x({},e),{currentGroupChannel:null,allMessages:[],localMessages:[],isInvalid:!0})}).with({type:FC},function(r){var i,a,s=r.payload,o=s.channel,l=s.message,u=o.members,d=l.sender,f=e.currentGroupChannel,p=f==null?void 0:f.url;if(!jn(o==null?void 0:o.url,p)||e.allMessages.some(function(E){return E.messageId===l.messageId})||e.messageListParams&&!mN(e.messageListParams,l))return e;if(l.isAdminMessage&&l.isAdminMessage())return x(x({},e),{allMessages:iA(e.allMessages,l)});var m=u==null?void 0:u.find(function(E){return(E==null?void 0:E.userId)===(d==null?void 0:d.userId)});return((m==null?void 0:m.profileUrl)!==(d==null?void 0:d.profileUrl)||(m==null?void 0:m.friendName)!==(d==null?void 0:d.friendName)||(m==null?void 0:m.nickname)!==(d==null?void 0:d.nickname))&&(o.members=u.map(function(E){return E.userId===d.userId?d:E})),x(x({},e),{currentGroupChannel:o,unreadSince:(i=e.unreadSince)!==null&&i!==void 0?i:wr(new Date,t.DATE_FORMAT__UNREAD_SINCE),unreadSinceDate:(a=e.unreadSinceDate)!==null&&a!==void 0?a:new Date,allMessages:iA(e.allMessages,l)})}).with({type:_f},function(r){var i,a=r.payload,s=a.channel,o=a.message,l=((i=e==null?void 0:e.currentGroupChannel)===null||i===void 0?void 0:i.url)||"";return jn(s==null?void 0:s.url,l)?e.messageListParams&&!mN(e.messageListParams,o)?x(x({},e),{allMessages:e.allMessages.filter(function(u){return!jn(u.messageId,o==null?void 0:o.messageId)})}):x(x({},e),{allMessages:e.allMessages.map(function(u){return jn(u.messageId,o.messageId)?o:(jn(u.parentMessageId,o.messageId)&&(u.parentMessage=o),u)})}):e}).with({type:HC},function(r){var i,a=r.payload,s=a.channel,o=a.event,l=o.channelUrl,u=o.threadInfo,d=o.targetMessageId,f=((i=e==null?void 0:e.currentGroupChannel)===null||i===void 0?void 0:i.url)||"";return!jn(s==null?void 0:s.url,f)||!jn(s==null?void 0:s.url,l)?e:x(x({},e),{allMessages:e.allMessages.map(function(p){return jn(p.messageId,d)&&(p.threadInfo=u),p})})}).with({type:Vh},function(r){return x(x({},e),{localMessages:e.localMessages.map(function(i){return jn(Pc(i)&&i.reqId,r.payload.reqId)?r.payload:i})})}).with({type:QO},function(r){var i,a,s;return((i=e.currentGroupChannel)===null||i===void 0?void 0:i.url)!==((s=(a=r.payload)===null||a===void 0?void 0:a.channel)===null||s===void 0?void 0:s.url)?e:x(x({},e),{unreadSince:null,unreadSinceDate:null})}).with({type:gf},function(r){return x(x({},e),{allMessages:e.allMessages.filter(function(i){return!jn(i.messageId,r.payload)})})}).with({type:BC},function(r){return x(x({},e),{localMessages:e.localMessages.filter(function(i){return!jn(Pc(i)&&i.reqId,r.payload)})})}).with({type:zC},function(r){return x(x({},e),{emojiContainer:r.payload})}).with({type:VC},function(r){return x(x({},e),{allMessages:e.allMessages.map(function(i){return jn(i.messageId,r.payload.messageId)&&i.applyReactionEvent&&typeof i.applyReactionEvent=="function"&&i.applyReactionEvent(r.payload),i})})}).with({type:jC},function(r){return x(x({},e),{messageListParams:r.payload})}).with({type:Nm},function(r){var i,a,s=r.payload,o=s.channelUrl,l=s.requestId,u=s.index,d=s.uploadableFileInfo,f=s.error;if(!jn(o,(i=e==null?void 0:e.currentGroupChannel)===null||i===void 0?void 0:i.url)||f)return e;var p=e.localMessages,m=p.find(function(g){return jn(Pc(g)&&g.reqId,l)}),E=(a=m.messageParams)===null||a===void 0?void 0:a.fileInfoList;return Array.isArray(E)&&(E[u]=d),x(x({},e),{localMessages:p})}).with({type:Im},function(r){var i,a=r.payload,s=a.channel,o=a.typingMembers;return jn(s.url,(i=e==null?void 0:e.currentGroupChannel)===null||i===void 0?void 0:i.url)?x(x({},e),{typingMembers:o}):e}).otherwise(function(){return e})}var oq="delivery_receipt";function lq(e,n){var t,r,i,a=e.sdkInit,s=e.currentGroupChannel,o=e.disableMarkAsRead,l=n.sdk,u=n.logger,d=n.scrollRef,f=n.setQuoteMessage,p=n.messagesDispatcher,m=Tt(),E=m.config,g=E.markAsReadScheduler,y=E.markAsDeliveredScheduler,S=E.disableMarkAsDelivered,C=(i=(r=(t=m.stores.sdkStore.sdk)===null||t===void 0?void 0:t.appInfo)===null||r===void 0?void 0:r.premiumFeatureList)===null||i===void 0?void 0:i.find(function(T){return T===oq});N.useEffect(function(){var T,I=s==null?void 0:s.url,L=Kr();if(I&&a){var D={onMessageReceived:function(O,R){var k,P;if(O.isGroupChannel()&&jn(O==null?void 0:O.url,I)){var G=!1;try{var V=d.current;V&&(G=V.offsetHeight+V.scrollTop>=V.scrollHeight-10)}catch{}if(u.info("Channel | useHandleChannelEvents: onMessageReceived",R),p({type:FC,payload:{channel:O,message:R}}),G&&((k=document.getElementById("sendbird-dropdown-portal"))===null||k===void 0?void 0:k.childElementCount)===0&&((P=document.getElementById("sendbird-emoji-list-portal"))===null||P===void 0?void 0:P.childElementCount)===0)try{setTimeout(function(){return Zs(0,d)}),o||g.push(s),C&&!S&&y.push(s)}catch{u.warning("Channel | onMessageReceived | scroll to end failed")}}},onUnreadMemberStatusUpdated:function(O){u.info("Channel | useHandleChannelEvents: onUnreadMemberStatusUpdated",O),jn(O==null?void 0:O.url,I)&&p({type:Ia,payload:O})},onUndeliveredMemberStatusUpdated:function(O){jn(O==null?void 0:O.url,I)&&(u.info("Channel | useHandleChannelEvents: onDeliveryReceiptUpdated",O),p({type:Ia,payload:O}))},onMessageUpdated:function(O,R){O.isGroupChannel()&&jn(O==null?void 0:O.url,I)&&(u.info("Channel | useHandleChannelEvents: onMessageUpdated",R),p({type:_f,payload:{channel:O,message:R}}))},onThreadInfoUpdated:function(O,R){O.isGroupChannel()&&jn(O==null?void 0:O.url,I)&&(u.info("Channel | useHandleChannelEvents: onThreadInfoUpdated",{channel:O,threadInfoUpdateEvent:R}),p({type:HC,payload:{channel:O,event:R}}))},onMessageDeleted:function(O,R){u.info("Channel | useHandleChannelEvents: onMessageDeleted",{channel:O,messageId:R}),f(null),p({type:gf,payload:R})},onReactionUpdated:function(O,R){u.info("Channel | useHandleChannelEvents: onReactionUpdated",{channel:O,reactionEvent:R}),p({type:VC,payload:R})},onChannelChanged:function(O){O.isGroupChannel()&&jn(O==null?void 0:O.url,I)&&(u.info("Channel | useHandleChannelEvents: onChannelChanged",O),p({type:Ia,payload:O}))},onChannelFrozen:function(O){O.isGroupChannel()&&jn(O==null?void 0:O.url,I)&&(u.info("Channel | useHandleChannelEvents: onChannelFrozen",O),p({type:Ia,payload:O}))},onChannelUnfrozen:function(O){O.isGroupChannel()&&jn(O==null?void 0:O.url,I)&&(u.info("Channel | useHandleChannelEvents: onChannelUnFrozen",O),p({type:Ia,payload:O}))},onUserMuted:function(O,R){O.isGroupChannel()&&jn(O==null?void 0:O.url,I)&&(u.info("Channel | useHandleChannelEvents: onUserMuted",{channel:O,user:R}),p({type:Ia,payload:O}))},onUserUnmuted:function(O,R){O.isGroupChannel()&&jn(O==null?void 0:O.url,I)&&(u.info("Channel | useHandleChannelEvents: onUserUnmuted",{channel:O,user:R}),p({type:Ia,payload:O}))},onUserBanned:function(O,R){var k;if(jn(O==null?void 0:O.url,I)&&O.isGroupChannel()){u.info("Channel | useHandleChannelEvents: onUserBanned",{channel:O,user:R});var P=(R==null?void 0:R.userId)===((k=l==null?void 0:l.currentUser)===null||k===void 0?void 0:k.userId);p({type:Ia,payload:P?null:O})}},onOperatorUpdated:function(O,R){O.isGroupChannel()&&jn(O==null?void 0:O.url,I)&&(u.info("Channel | useHandleChannelEvents: onOperatorUpdated",{channel:O,users:R}),p({type:Ia,payload:O}))},onUserLeft:function(O,R){var k;if(jn(O==null?void 0:O.url,I)){u.info("Channel | useHandleChannelEvents: onUserLeft",{channel:O,user:R});var P=(R==null?void 0:R.userId)===((k=l==null?void 0:l.currentUser)===null||k===void 0?void 0:k.userId);p({type:Ia,payload:P?null:O})}},onTypingStatusUpdated:function(O){if(jn(O==null?void 0:O.url,I)){u.info("Channel | onTypingStatusUpdated",{channel:O});var R=O.getTypingUsers();p({type:Im,payload:{channel:O,typingMembers:R}})}}};u.info("Channel | useHandleChannelEvents: Setup event handler",{channelHandlerId:L,channelHandler:D}),(T=l.groupChannel)===null||T===void 0||T.addGroupChannelHandler(L,new xo(D))}return function(){var O;!((O=l==null?void 0:l.groupChannel)===null||O===void 0)&&O.removeGroupChannelHandler?(u.info("Channel | useHandleChannelEvents: Removing message reciver handler",L),l.groupChannel.removeGroupChannelHandler(L)):l!=null&&l.groupChannel&&u.error("Channel | useHandleChannelEvents: Not found the removeGroupChannelHandler")}},[s==null?void 0:s.url,a])}function uq(e,n){var t=e.channelUrl,r=e.sdkInit,i=e.disableMarkAsRead,a=n.messagesDispatcher,s=n.sdk,o=n.logger,l=n.markAsReadScheduler;N.useEffect(function(){t&&r&&s&&s.groupChannel&&(o.info("Channel | useSetChannel fetching channel",t),s.groupChannel.getChannel(t).then(function(u){o.info("Channel | useSetChannel fetched channel",u),a({type:Ia,payload:u}),o.info("Channel: Mark as read",u),i||l.push(u)}).catch(function(u){o.warning("Channel | useSetChannel fetch channel failed",{channelUrl:t,e:u}),a({type:GC})}),s.getAllEmoji().then(function(u){o.info("Channel: Getting emojis success",u),a({type:zC,payload:u})}).catch(function(u){o.error("Channel: Getting emojis failed",u)}))},[t,r])}function cq(e,n){var t=e.isOnline,r=e.replyType,i=e.disableMarkAsRead,a=e.reconnectOnIdle,s=n.logger,o=n.sdk,l=n.scrollRef,u=n.currentGroupChannel,d=n.messagesDispatcher,f=n.markAsReadScheduler,p=n.userFilledMessageListQuery,m=YO(t,u,a).shouldReconnect;N.useEffect(function(){return function(){var E,g,y;if(m){s.info("Refreshing conversation state");var S=((E=o==null?void 0:o.appInfo)===null||E===void 0?void 0:E.useReaction)||!1,C={prevResultSize:Mm,isInclusive:!0,includeReactions:S,includeMetaArray:!0,nextResultSize:Am};r&&r==="QUOTE_REPLY"&&(C.includeThreadInfo=!0,C.includeParentMessageInfo=!0,C.replyType=Ar.ONLY_REPLY_TO_CHANNEL),p&&Object.keys(p).forEach(function(T){C[T]=p[T]}),s.info("Channel: Fetching messages",{currentGroupChannel:u,userFilledMessageListQuery:p}),d({type:Sm,payload:null}),(g=o==null?void 0:o.groupChannel)===null||g===void 0||g.getChannel((y=u==null?void 0:u.url)!==null&&y!==void 0?y:"").then(function(T){var I=new Date().getTime();T.getMessagesByTimestamp(I,C).then(function(L){d({type:Tm,payload:{currentGroupChannel:T,messages:L}}),setTimeout(function(){return Zs(0,l)},T2)}).catch(function(L){s.error("Channel: Fetching messages failed",L),d({type:af,payload:{currentGroupChannel:T}})}),i||f.push(T)})}}},[m,r])}function dq(e,n){var t=e.currentGroupChannel,r=e.oldestMessageTimeStamp,i=e.userFilledMessageListQuery,a=e.replyType,s=n.hasMorePrev,o=n.logger,l=n.messagesDispatcher,u=n.sdk;return N.useCallback(function(d){var f,p;if(s){var m={prevResultSize:Mm,isInclusive:!0,includeMetaArray:!0,includeReactions:(p=(f=u==null?void 0:u.appInfo)===null||f===void 0?void 0:f.useReaction)!==null&&p!==void 0?p:!1};(a==="QUOTE_REPLY"||a==="THREAD")&&(m.includeThreadInfo=!0,m.includeParentMessageInfo=!0,m.replyType=Ar.ONLY_REPLY_TO_CHANNEL),i&&Object.keys(i).forEach(function(E){m[E]=i[E]}),o.info("Channel: Fetching messages",{currentGroupChannel:t,userFilledMessageListQuery:i}),t==null||t.getMessagesByTimestamp(r||new Date().getTime(),m).then(function(E){l({type:LC,payload:{currentGroupChannel:t,messages:E}}),d&&setTimeout(function(){return d()})}).catch(function(){l({type:UC,payload:{currentGroupChannel:t}})})}},[t,r,a])}function hq(e,n){var t=e.currentGroupChannel,r=e.latestMessageTimeStamp,i=e.userFilledMessageListQuery,a=e.hasMoreNext,s=e.replyType,o=n.logger,l=n.messagesDispatcher,u=n.sdk;return N.useCallback(function(d){var f,p;if(a){var m=(p=(f=u==null?void 0:u.appInfo)===null||f===void 0?void 0:f.useReaction)!==null&&p!==void 0?p:!1,E={nextResultSize:Am,isInclusive:!0,includeReactions:m,includeMetaArray:!0};s&&(s==="QUOTE_REPLY"||s==="THREAD")&&(E.includeThreadInfo=!0,E.includeParentMessageInfo=!0,E.replyType=Ar.ONLY_REPLY_TO_CHANNEL),i&&Object.keys(i).forEach(function(g){E[g]=i[g]}),o.info("Channel: Fetching later messages",{currentGroupChannel:t,userFilledMessageListQuery:i}),t==null||t.getMessagesByTimestamp(r||new Date().getTime(),E).then(function(g){l({type:kC,payload:{currentGroupChannel:t,messages:g}}),setTimeout(function(){return d([g,null])})}).catch(function(g){o.error("Channel: Fetching later messages failed",g),l({type:PC,payload:{currentGroupChannel:t}}),setTimeout(function(){return d([null,g])})})}},[t,r,a,s])}function fq(e,n){var t=e.currentGroupChannel,r=e.messagesDispatcher,i=n.logger;return N.useCallback(function(a){i.info("Channel | useDeleteMessageCallback: Deleting message",a);var s=Vu(a)?a.sendingStatus:void 0;return new Promise(function(o,l){i.info("Channel | useDeleteMessageCallback: Deleting message requestState:",s),(s===yn.FAILED||s===yn.PENDING)&&"reqId"in a?(i.info("Channel | useDeleteMessageCallback: Deleted message from local:",a),r({type:BC,payload:a.reqId}),o()):(i.info("Channel | useDeleteMessageCallback: Deleting message from remote:",s),t==null||t.deleteMessage(a).then(function(){i.info("Channel | useDeleteMessageCallback: Deleting message success!",a),r({type:gf,payload:a.messageId}),o()}).catch(function(u){i.warning("Channel | useDeleteMessageCallback: Deleting message failed!",u),l(u)}))})},[t,r])}function vq(e,n){var t=e.currentGroupChannel,r=e.messagesDispatcher,i=e.onBeforeUpdateUserMessage,a=e.isMentionEnabled,s=n.logger,o=n.pubSub;return N.useCallback(function(l,u){var d=l.messageId,f=l.message,p=l.mentionedUsers,m=l.mentionTemplate,E=function(S){var C={message:S};return a&&p&&p.length>0&&(C.mentionedUsers=p),a&&m?C.mentionedMessageTemplate=m:C.mentionedMessageTemplate=S,C},g=i&&typeof i=="function";g&&s.info("Channel: creating params using onBeforeUpdateUserMessage",i);var y=g?i(f):E(f);s.info("Channel: Updating message!",y),t==null||t.updateUserMessage(d,y).then(function(S){u&&u(null,S),s.info("Channel: Updating message success!",S),r({type:_f,payload:{channel:t,message:S}}),o.publish(Fn.UPDATE_USER_MESSAGE,{message:S,channel:t,publishingModules:[ai.CHANNEL]})}).catch(function(S){u&&u(S,null)})},[t==null?void 0:t.url,r,i])}function pq(e,n){var t=e.currentGroupChannel,r=e.messagesDispatcher,i=n.logger,a=n.pubSub;return N.useCallback(function(s){i.info("Channel: Resending message has started",s),s!=null&&s.isResendable?s.isUserMessage()?t==null||t.resendMessage(s).onPending(function(o){i.info("Channel: Resending message start!",o),r({type:Vh,payload:o})}).onSucceeded(function(o){i.info("Channel: Resending message success!",o),r({type:Ys,payload:o})}).onFailed(function(o,l){i.warning("Channel: Resending message failed!",o),r({type:wo,payload:l})}):s.isFileMessage()?t==null||t.resendMessage(s).onPending(function(o){i.info("Channel: Resending file message start!",o),r({type:Vh,payload:o})}).onSucceeded(function(o){i.info("Channel: Resending file message success!",o),r({type:Ys,payload:o})}).onFailed(function(o,l){i.warning("Channel: Resending file message failed!",o),r({type:wo,payload:l})}):s.isMultipleFilesMessage()&&(t==null||t.resendMessage(s).onPending(function(o){i.info("Channel: Resending multiple files message start!",o),r({type:Vh,payload:o})}).onFileUploaded(function(o,l,u,d){var f;i.info("Channel: Resending multiple files message file uploaded!",{requestId:o,index:l,error:d,uploadableFileInfo:u}),a.publish(Fn.ON_FILE_INFO_UPLOADED,{response:{channelUrl:(f=t==null?void 0:t.url)!==null&&f!==void 0?f:"",requestId:o,index:l,uploadableFileInfo:u,error:d},publishingModules:[ai.CHANNEL]})}).onSucceeded(function(o){i.info("Channel: Resending multiple files message success!",o),r({type:Ys,payload:o})}).onFailed(function(o,l){i.warning("Channel: Resending multiple files message failed!",o),r({type:wo,payload:l})})):i.error("Message is not resendable",s)},[t,r])}function mq(e,n){var t=e.isMentionEnabled,r=e.currentGroupChannel,i=e.onBeforeSendUserMessage,a=n.logger,s=n.pubSub,o=n.scrollRef,l=n.messagesDispatcher,u=N.useRef(null),d=N.useCallback(function(f){var p=f.quoteMessage,m=f.message,E=f.mentionTemplate,g=f.mentionedUsers,y=function(){var T={message:m};return t&&g&&g.length>0&&(T.mentionedUsers=g),t&&E&&g&&g.length>0&&(T.mentionedMessageTemplate=E),p&&(T.isReplyToChannel=!0,T.parentMessageId=p.messageId),T},S=i&&typeof i=="function";S&&a.info("Channel: creating params using onBeforeSendUserMessage",i);var C=S?i(m,p):y();a.info("Channel: Sending message has started",C),r==null||r.sendUserMessage(C).onPending(function(T){s.publish(Fn.SEND_MESSAGE_START,{message:T,channel:r,publishingModules:[ai.CHANNEL]}),setTimeout(function(){return Zs(0,o)},wl)}).onFailed(function(T,I){a.warning("Channel: Sending message failed!",{message:I,error:T}),l({type:wo,payload:I})}).onSucceeded(function(T){a.info("Channel: Sending message success!",T),l({type:Ys,payload:T})})},[r,i]);return[u,d]}function _q(e,n){var t=e.currentGroupChannel,r=e.onBeforeSendFileMessage,i=e.imageCompression,a=n.logger,s=n.pubSub,o=n.scrollRef,l=n.messagesDispatcher,u=N.useCallback(function(d,f){return new Promise(function(p,m){var E=r==null?void 0:r(d,f);E||(E={file:d},f&&(E.isReplyToChannel=!0,E.parentMessageId=f.messageId)),a.info("Channel: Uploading file message start!",E),t==null||t.sendFileMessage(E).onPending(function(g){s.publish(Fn.SEND_MESSAGE_START,{message:x(x({},g),{url:URL.createObjectURL(d),requestState:"pending",isUserMessage:g.isUserMessage,isFileMessage:g.isFileMessage,isAdminMessage:g.isAdminMessage,isMultipleFilesMessage:g.isMultipleFilesMessage}),channel:t,publishingModules:[ai.CHANNEL]}),setTimeout(function(){return Zs(0,o)},wl)}).onFailed(function(g,y){a.error("Channel: Sending file message failed!",{failedMessage:y,err:g}),y.localUrl=URL.createObjectURL(d),y.file=d,l({type:wo,payload:y}),m(g)}).onSucceeded(function(g){a.info("Channel: Sending file message success!",g),l({type:Ys,payload:g}),p(g)})})},[t,r,i]);return[u]}function gq(e){var n=e.current,t=n==null?void 0:n.parentNode;n&&t&&(n.style.pointerEvents="none",t.style.cursor="wait")}function Eq(e){var n=e.current,t=n==null?void 0:n.parentNode;n&&t&&(n.style.pointerEvents="auto",t.style.cursor="auto")}function yq(e,n){var t=e.setInitialTimeStamp,r=e.setAnimatedMessageId,i=e.allMessages,a=e.scrollRef,s=n.logger;return N.useCallback(function(o,l){var u=i.find(function(d){return d.messageId===l});r(null),setTimeout(function(){try{s.info("Channel: scroll to message - disabling mouse events"),gq(a),u?(s.info("Channel: scroll to message - message is present"),r(l),LO(a,o)):(s.info("Channel: scroll to message - fetching older messages"),t(null),t(o),r(l))}finally{s.info("Channel: scroll to message - enabled mouse events"),Eq(a)}})},[t,r,i])}var Cq=function(e,n){var t=e.currentGroupChannel,r=e.onBeforeSendVoiceMessage,i=n.logger,a=n.pubSub,s=n.scrollRef,o=n.messagesDispatcher,l=N.useCallback(function(u,d,f){return new Promise(function(p,m){if(t){var E=r&&typeof r=="function"?r(u,f):{file:u,fileName:Jc,mimeType:Mo,metaArrays:[new qr({key:Wy,value:["".concat(d)]}),new qr({key:Qy,value:[Yy]})]};f&&(E.isReplyToChannel=!0,E.parentMessageId=f.messageId),i.info("Channel: Start sending voice message",E),t.sendFileMessage(E).onPending(function(g){a.publish(Fn.SEND_MESSAGE_START,{message:g,channel:t,publishingModules:[ai.CHANNEL]}),setTimeout(function(){return Zs(0,s)},wl)}).onFailed(function(g,y){i.error("Channel: Sending voice message failed!",{failedMessage:y,err:g}),o({type:wo,payload:y}),m(g)}).onSucceeded(function(g){i.info("Channel: Sending voice message success!",g),o({type:Ys,payload:g}),p(g)})}})},[t,r]);return[l]},bq=function(e){var n=e.channelUrl,t=e.sdkInit,r=e.pubSub,i=e.dispatcher,a=e.scrollRef;N.useEffect(function(){var s=new Map;return r!=null&&r.subscribe&&(s.set(ei.SEND_USER_MESSAGE,r.subscribe(ei.SEND_USER_MESSAGE,function(o){var l=o.channel,u=o.message;n===(l==null?void 0:l.url)&&(i({type:Ys,payload:u}),setTimeout(function(){return Zs(0,a)},wl))})),s.set(ei.SEND_MESSAGE_START,r.subscribe(ei.SEND_MESSAGE_START,function(o){var l=o.channel,u=o.message,d=o.publishingModules;n===(l==null?void 0:l.url)&&fp(d)&&i({type:xC,payload:u})})),s.set(ei.ON_FILE_INFO_UPLOADED,r.subscribe(ei.ON_FILE_INFO_UPLOADED,function(o){var l=o.response,u=o.publishingModules;n===l.channelUrl&&fp(u)&&i({type:Nm,payload:l})})),s.set(ei.SEND_MESSAGE_FAILED,r.subscribe(ei.SEND_MESSAGE_FAILED,function(o){var l=o.channel,u=o.message,d=o.publishingModules;n===(l==null?void 0:l.url)&&fp(d)&&i({type:wo,payload:u})})),s.set(ei.SEND_FILE_MESSAGE,r.subscribe(ei.SEND_FILE_MESSAGE,function(o){var l=o.channel,u=o.message;n===(l==null?void 0:l.url)&&(i({type:Ys,payload:u}),setTimeout(function(){return Zs(0,a)},wl))})),s.set(ei.UPDATE_USER_MESSAGE,r.subscribe(ei.UPDATE_USER_MESSAGE,function(o){var l=o.channel,u=o.message,d=o.fromSelector;d&&n===(l==null?void 0:l.url)&&l.isGroupChannel()&&i({type:_f,payload:{channel:l,message:u}})})),s.set(ei.DELETE_MESSAGE,r.subscribe(ei.DELETE_MESSAGE,function(o){var l=o.channel,u=o.messageId;n===(l==null?void 0:l.url)&&i({type:gf,payload:u})}))),function(){s.forEach(function(o){try{o.remove()}catch{}})}},[n,t])},ZO=v.createContext(null),Sq=function(e){var n,t,r,i,a,s,o=e.channelUrl,l=e.children,u=e.isReactionEnabled,d=e.isMessageGroupingEnabled,f=d===void 0?!0:d,p=e.isMultipleFilesMessageEnabled,m=e.showSearchIcon,E=e.animatedMessage,g=e.highlightedMessage,y=e.startingPoint,S=e.onBeforeSendUserMessage,C=e.onBeforeSendFileMessage,T=e.onBeforeUpdateUserMessage,I=e.onBeforeSendVoiceMessage,L=e.onBeforeSendMultipleFilesMessage,D=e.onChatHeaderActionClick,O=e.onSearchClick,R=e.onBackClick,k=e.threadReplySelectType,P=e.queries,G=e.filterMessageList,V=e.disableMarkAsRead,H=V===void 0?!1:V,F=e.onReplyInThread,z=e.onQuoteMessageClick,K=e.onMessageAnimated,ee=e.onMessageHighlighted,$=e.scrollBehavior,Q=$===void 0?"auto":$,ne=e.reconnectOnIdle,j=ne===void 0?!0:ne,Z=Tt(),ie=Z.config,fe=(n=e.replyType)!==null&&n!==void 0?n:Ll(ie.groupChannel.replyType).upperCase,te=ie.pubSub,le=ie.logger,Me=ie.userId,ae=ie.isOnline,he=ie.imageCompression,pe=ie.markAsReadScheduler,Ne=ie.groupChannel,_e=(r=(t=Z==null?void 0:Z.stores)===null||t===void 0?void 0:t.sdkStore)===null||r===void 0?void 0:r.sdk,ge=(a=(i=Z==null?void 0:Z.stores)===null||i===void 0?void 0:i.sdkStore)===null||a===void 0?void 0:a.initialized,me=Z==null?void 0:Z.config,Le=N.useState(y),Qe=Le[0],Pe=Le[1];N.useEffect(function(){Pe(y)},[y,o]);var Ge=N.useState(null),De=Ge[0],tt=Ge[1],Ue=N.useState(g),Ye=Ue[0],yt=Ue[1];N.useEffect(function(){yt(g)},[g]);var Nt=P==null?void 0:P.messageListParams,Rt=N.useState(null),st=Rt[0],Be=Rt[1],nt=N.useState(!1),qe=nt[0],rn=nt[1],it=N.useReducer(sq,aq),Ct=it[0],Je=it[1],pt=N.useRef(null),Ut=Ne.enableMention,Pt=Ct.allMessages,Ht=Ct.localMessages,bt=Ct.loading,qt=Ct.initialized,Lt=Ct.unreadSince,wt=Ct.unreadSinceDate,Et=Ct.isInvalid,xe=Ct.currentGroupChannel,ye=Ct.hasMorePrev,Ze=Ct.oldestMessageTimeStamp,St=Ct.hasMoreNext,Ot=Ct.latestMessageTimeStamp,an=Ct.emojiContainer,xt=Ct.readStatus,dt=Ct.typingMembers,Jt=ff({channel:xe,config:ie,moduleLevel:u}),ln=N.useMemo(function(){return Jt?sj(an):new Map},[an]),Bt=N.useMemo(function(){return Jt&&xe?oj(xe==null?void 0:xe.members):new Map},[xe==null?void 0:xe.members]);N.useEffect(function(){E&&tt(E)},[E]);var En=dq({currentGroupChannel:xe,oldestMessageTimeStamp:Ze,userFilledMessageListQuery:Nt,replyType:fe},{hasMorePrev:ye,logger:le,messagesDispatcher:Je,sdk:_e}),Mn=yq({setInitialTimeStamp:Pe,setAnimatedMessageId:tt,allMessages:Pt,scrollRef:pt},{logger:le}),Ke=hq({currentGroupChannel:xe,latestMessageTimeStamp:Ot,userFilledMessageListQuery:Nt,hasMoreNext:St,replyType:fe},{logger:le,messagesDispatcher:Je,sdk:_e}),ht=ER(xe,le);uq({channelUrl:o,sdkInit:ge,disableMarkAsRead:H},{messagesDispatcher:Je,sdk:_e,logger:le,markAsReadScheduler:pe}),N.useEffect(function(){Be(null)},[o]),lq({currentGroupChannel:xe,sdkInit:ge,currentUserId:Me,disableMarkAsRead:H},{messagesDispatcher:Je,sdk:_e,logger:le,scrollRef:pt,setQuoteMessage:Be}),eq({currentGroupChannel:xe,userFilledMessageListQuery:Nt,initialTimeStamp:Qe,replyType:fe,setIsScrolled:rn},{logger:le,scrollRef:pt,messagesDispatcher:Je}),bq({channelUrl:o,sdkInit:ge,pubSub:te,dispatcher:Je,scrollRef:pt}),cq({isOnline:ae,replyType:fe,disableMarkAsRead:H,reconnectOnIdle:j},{logger:le,sdk:_e,scrollRef:pt,currentGroupChannel:xe,messagesDispatcher:Je,userFilledMessageListQuery:Nt,markAsReadScheduler:pe});var Fe=fq({currentGroupChannel:xe,messagesDispatcher:Je},{logger:le}),Dt=vq({currentGroupChannel:xe,messagesDispatcher:Je,onBeforeUpdateUserMessage:T,isMentionEnabled:Ut},{logger:le,pubSub:te}),Gt=pq({currentGroupChannel:xe,messagesDispatcher:Je},{logger:le,pubSub:te}),zt=mq({currentGroupChannel:xe,isMentionEnabled:Ut,onBeforeSendUserMessage:S},{logger:le,pubSub:te,scrollRef:pt,messagesDispatcher:Je}),fn=zt[0],Dn=zt[1],Vn=_q({currentGroupChannel:xe,imageCompression:he,onBeforeSendFileMessage:C},{logger:le,pubSub:te,scrollRef:pt,messagesDispatcher:Je})[0],ot=Cq({currentGroupChannel:xe,onBeforeSendVoiceMessage:I},{logger:le,pubSub:te,scrollRef:pt,messagesDispatcher:Je})[0],se=XO({currentChannel:xe,onBeforeSendMultipleFilesMessage:L,publishingModules:[ai.CHANNEL]},{logger:le,pubSub:te,scrollRef:pt})[0];return v.createElement(ZO.Provider,{value:{channelUrl:o,isReactionEnabled:Jt,isMessageGroupingEnabled:f,isMultipleFilesMessageEnabled:p,showSearchIcon:m??me.groupChannelSettings.enableMessageSearch,highlightedMessage:g,startingPoint:y,onBeforeSendUserMessage:S,onBeforeSendFileMessage:C,onBeforeUpdateUserMessage:T,onChatHeaderActionClick:D,onSearchClick:O,onBackClick:R,replyType:fe,threadReplySelectType:(s=k??fR(Ne.threadReplySelectType).upperCase)!==null&&s!==void 0?s:$a.THREAD,queries:P,filterMessageList:G,disableMarkAsRead:H,onReplyInThread:F,onQuoteMessageClick:z,onMessageAnimated:K,onMessageHighlighted:ee,allMessages:Pt,localMessages:Ht,loading:bt,initialized:qt,unreadSince:Lt,unreadSinceDate:wt,isInvalid:Et,currentGroupChannel:xe,hasMorePrev:ye,hasMoreNext:St,oldestMessageTimeStamp:Ze,latestMessageTimeStamp:Ot,emojiContainer:an,readStatus:xt,typingMembers:dt,scrollToMessage:Mn,quoteMessage:st,setQuoteMessage:Be,deleteMessage:Fe,updateMessage:Dt,resendMessage:Gt,messageInputRef:fn,sendMessage:Dn,sendFileMessage:Vn,sendVoiceMessage:ot,sendMultipleFilesMessage:se,initialTimeStamp:Qe,messageActionTypes:Jj,messagesDispatcher:Je,setInitialTimeStamp:Pe,setAnimatedMessageId:tt,setHighLightedMessageId:yt,animatedMessageId:De,highLightedMessageId:Ye,nicknamesMap:Bt,emojiAllMap:ln,onScrollCallback:En,onScrollDownCallback:Ke,scrollRef:pt,scrollBehavior:Q,toggleReaction:ht,isScrolled:qe,setIsScrolled:rn}},v.createElement(hd,x({},e),l))},xl=function(){var e=v.useContext(ZO);if(!e)throw new Error("ChannelContext not found. Use within the Channel module.");return e},Tq=function(e){var n=e.className,t=xl();return v.createElement(DR,x({},t,{className:n,currentChannel:t.currentGroupChannel}))},Nq=function(e){var n=xl().deleteMessage;return v.createElement(MO,x({},e,{deleteMessage:n}))},Iq=function(e){var n=xl().deleteMessage;return v.createElement(AO,x({},e,{deleteMessage:n}))},dA=function(e){var n,t,r=Tt().config,i=xl(),a=i.initialized,s=i.currentGroupChannel,o=i.animatedMessageId,l=i.setAnimatedMessageId,u=i.updateMessage,d=i.scrollToMessage,f=i.replyType,p=i.threadReplySelectType,m=i.isReactionEnabled,E=i.toggleReaction,g=i.emojiContainer,y=i.nicknamesMap,S=i.setQuoteMessage,C=i.resendMessage,T=i.deleteMessage,I=i.renderUserMentionItem,L=i.onReplyInThread,D=i.onQuoteMessageClick,O=i.onMessageAnimated,R=i.sendMessage,k=i.localMessages,P=i.allMessages,G=e.message;return s?v.createElement(IO,x({},e,{channel:s,emojiContainer:g,editInputDisabled:!a||kO(s)||PO(s)||!r.isOnline,shouldRenderSuggestedReplies:((n=r==null?void 0:r.groupChannel)===null||n===void 0?void 0:n.enableSuggestedReplies)&&(((t=r==null?void 0:r.groupChannel)===null||t===void 0?void 0:t.showSuggestedRepliesFor)==="all_messages"?!0:G.messageId===P[P.length-1].messageId)&&(k==null?void 0:k.length)===0&&Jy(G).length>0,isReactionEnabled:m,replyType:f,threadReplySelectType:p,nicknamesMap:y,renderUserMentionItem:I,scrollToMessage:d,toggleReaction:E,setQuoteMessage:S,onQuoteMessageClick:D,onReplyInThreadClick:L,sendUserMessage:function(V){R({message:V.message,mentionedUsers:V.mentionedUsers,mentionTemplate:V.mentionedMessageTemplate})},updateUserMessage:function(V,H){var F;u({messageId:V,message:(F=H.message)!==null&&F!==void 0?F:"",mentionedUsers:H.mentionedUsers,mentionTemplate:H.mentionedMessageTemplate})},resendMessage:C,deleteMessage:T,animatedMessageId:o,setAnimatedMessageId:l,onMessageAnimated:O,renderFileViewer:function(V){return v.createElement(Nq,x({},V))},renderRemoveMessageModal:function(V){return v.createElement(Iq,x({},V))}})):null},Mq=100;function Aq(e,n){return e-n}function JO(e){var n=e.hasMore,t=e.hasNext,r=e.onScroll,i=e.scrollRef,a=e.setShowScrollDownButton,s=ur(function(){var o=i==null?void 0:i.current;if(o!=null){var l=o.scrollTop,u=o.scrollHeight,d=o.clientHeight,f=Aq(u,l);typeof a=="function"&&a(u>l+d+1),n&&Ao(l,0,bs)&&r(function(){var p=o.scrollHeight>u;p&&(o.scrollTop=o.scrollHeight-f)}),t&&Ao(d+l,u,bs)&&r(function(){var p=o.scrollHeight>u;p&&(o.scrollTop=l)})}});return RC(s,Mq,{trailing:!0})}var wq=100;function Rq(e){var n=e.loading,t=N.useState(0),r=t[0],i=t[1];N.useEffect(function(){n&&i(0)},[n]);var a=function(s){var o=s.target;try{i(o.scrollHeight-o.scrollTop-o.offsetHeight)}catch{}};return{scrollBottom:r,scrollToBottomHandler:RC(a,wq,{trailing:!0})}}function Oq(){var e=xl(),n=e.scrollRef,t=e.scrollBehavior,r=t===void 0?"auto":t;return N.useEffect(function(){n.current&&(n.current.style.scrollBehavior=r)},[n.current]),null}var Dq=50,Lq=function(e){var n,t,r,i,a,s,o,l=e.className,u=l===void 0?"":l,d=Fo(e),f=d.renderMessage,p=d.renderMessageContent,m=d.renderSuggestedReplies,E=d.renderCustomSeparator,g=d.renderPlaceholderLoader,y=g===void 0?function(){return v.createElement(Mr,{type:kn.LOADING})}:g,S=d.renderPlaceholderEmpty,C=S===void 0?function(){return v.createElement(Mr,{className:"sendbird-conversation__no-messages",type:kn.NO_MESSAGES})}:S,T=d.renderFrozenNotification,I=T===void 0?function(){return v.createElement(RO,{className:"sendbird-conversation__messages__notification"})}:T,L=xl(),D=L.allMessages,O=L.localMessages,R=L.hasMorePrev,k=L.hasMoreNext,P=L.setInitialTimeStamp,G=L.setAnimatedMessageId,V=L.setHighLightedMessageId,H=L.isMessageGroupingEnabled,F=L.scrollRef,z=L.onScrollCallback,K=L.onScrollDownCallback,ee=L.messagesDispatcher,$=L.messageActionTypes,Q=L.currentGroupChannel,ne=L.disableMarkAsRead,j=L.filterMessageList,Z=L.replyType,ie=L.loading,fe=L.isScrolled,te=L.unreadSince,le=L.unreadSinceDate,Me=L.typingMembers,ae=Tt(),he=typeof j=="function"?D.filter(j):D,pe=ae.config.markAsReadScheduler,Ne=N.useState(!1),_e=Ne[0],ge=Ne[1];Oq();var me=function(Ye){var yt=F==null?void 0:F.current;if(yt!=null){var Nt=yt.scrollTop,Rt=yt.clientHeight,st=yt.scrollHeight;R&&Ao(Nt,0,bs)&&z(Ye),k&&Ao(Rt+Nt,st,bs)&&K(Ye),!ne&&Ao(Rt+Nt,st,bs)&&Q&&(ee({type:$.MARK_AS_READ,payload:{channel:Q}}),pe.push(Q))}},Le=function(){var Ye,yt;P==null||P(null),G==null||G(null),V==null||V(null),F.current&&F.current.scrollTop>-1&&(F.current.scrollTop=((Ye=F.current.scrollHeight)!==null&&Ye!==void 0?Ye:0)-((yt=F.current.offsetHeight)!==null&&yt!==void 0?yt:0))},Qe=function(Ye){Ye===void 0&&(Ye=!1);var yt=F==null?void 0:F.current;if(yt){var Nt=yt.scrollHeight-yt.scrollTop-yt.offsetHeight;Ue<Nt&&(!Ye||Ue<bs)&&(yt.scrollTop+=Nt-Ue)}},Pe=JO({hasMore:R,hasNext:k,onScroll:me,scrollRef:F}),Ge=Pl({onReachedBottom:function(){!k&&!ne&&Q&&(ee({type:$.MARK_AS_READ,payload:{channel:Q}}),pe.push(Q)),ge(!0)},onReachedTop:function(){ge(!1)},onInBetween:function(){ge(!1)}}),De=Rq({loading:ie}),tt=De.scrollToBottomHandler,Ue=De.scrollBottom;return ie?y():he.length<1?C():v.createElement(v.Fragment,null,!fe&&v.createElement(Mr,{type:kn.LOADING}),v.createElement("div",{className:"sendbird-conversation__messages ".concat(u),dir:rC((n=ae==null?void 0:ae.config)===null||n===void 0?void 0:n.htmlTextDirection,(t=ae==null?void 0:ae.config)===null||t===void 0?void 0:t.forceLeftToRightMessageLayout)},v.createElement("div",{className:"sendbird-conversation__scroll-container"},v.createElement("div",{className:"sendbird-conversation__padding"}),v.createElement("div",{className:"sendbird-conversation__messages-padding","data-testid":"sendbird-message-list-container",ref:F,onScroll:function(Ye){Pe(),tt(Ye),Ge(Ye)}},he.map(function(Ye,yt){var Nt,Rt,st=vy({allMessages:he,replyType:Z,isMessageGroupingEnabled:H,currentIndex:yt,currentMessage:Ye,currentChannel:Q}),Be=st.chainTop,nt=st.chainBottom,qe=st.hasSeparator,rn=((Nt=Ye==null?void 0:Ye.sender)===null||Nt===void 0?void 0:Nt.userId)===((Rt=ae==null?void 0:ae.config)===null||Rt===void 0?void 0:Rt.userId);return v.createElement(Lu,{message:Ye,key:Ye==null?void 0:Ye.messageId,isByMe:rn},v.createElement(dA,{handleScroll:Qe,message:Ye,hasSeparator:qe,chainTop:Be,chainBottom:nt,renderMessageContent:p,renderSuggestedReplies:m,renderCustomSeparator:E,renderMessage:f}))}),O.map(function(Ye,yt){var Nt,Rt,st=vy({allMessages:he,replyType:Z,isMessageGroupingEnabled:H,currentIndex:yt,currentMessage:Ye,currentChannel:Q}),Be=st.chainTop,nt=st.chainBottom,qe=((Nt=Ye==null?void 0:Ye.sender)===null||Nt===void 0?void 0:Nt.userId)===((Rt=ae==null?void 0:ae.config)===null||Rt===void 0?void 0:Rt.userId);return v.createElement(Lu,{message:Ye,key:Ye==null?void 0:Ye.messageId,isByMe:qe},v.createElement(dA,{handleScroll:Qe,message:Ye,chainTop:Be,chainBottom:nt,renderMessageContent:p,renderSuggestedReplies:m,renderCustomSeparator:E,renderMessage:f}))}),!k&&((i=(r=ae==null?void 0:ae.config)===null||r===void 0?void 0:r.groupChannel)===null||i===void 0?void 0:i.enableTypingIndicator)&&((o=(s=(a=ae==null?void 0:ae.config)===null||a===void 0?void 0:a.groupChannel)===null||s===void 0?void 0:s.typingIndicatorTypes)===null||o===void 0?void 0:o.has(ef.Bubble))&&v.createElement(DO,{typingMembers:Me,handleScroll:Qe}))),(Q==null?void 0:Q.isFrozen)&&I(),(!_e||k)&&(te||le)&&v.createElement(wO,{className:"sendbird-conversation__messages__notification",count:Q==null?void 0:Q.unreadMessageCount,time:te,lastReadAt:le,onClick:function(){F!=null&&F.current&&(F.current.scrollTop=F.current.scrollHeight),!ne&&Q&&(pe.push(Q),ee({type:$.MARK_AS_READ,payload:{channel:Q}})),P(null),G(null),V(null)}}),Ue>Dq&&v.createElement("div",{className:"sendbird-conversation__scroll-bottom-button",onClick:Le,onKeyDown:Le,tabIndex:0,role:"button"},v.createElement(We,{width:"24px",height:"24px",type:Se.CHEVRON_DOWN,fillColor:Ve.PRIMARY}))))},Uq=function(e){var n=xl(),t=n.quoteMessage,r=n.currentGroupChannel,i=n.sendMessage,a=n.sendFileMessage,s=n.sendVoiceMessage,o=n.sendMultipleFilesMessage;return v.createElement(HO,x({},e,n,{currentChannel:r,messages:n.allMessages,sendUserMessage:function(l){return i({message:l.message,mentionTemplate:l.mentionedMessageTemplate,mentionedUsers:l.mentionedUsers,quoteMessage:t??void 0})},sendFileMessage:function(l){return a(l.file,t??void 0)},sendVoiceMessage:function(l,u){var d=l.file;return s(d,u,t??void 0)},sendMultipleFilesMessage:function(l){var u=l.fileInfoList;return o(u.map(function(d){return d.file}),t??void 0)}}))},kq=function(e){var n=xl(),t=n.channelUrl,r=n.isInvalid,i=Fo(e),a=i.renderChannelHeader,s=a===void 0?function(f){return v.createElement(Tq,x({},f))}:a,o=i.renderMessageList,l=o===void 0?function(f){return v.createElement(Lq,x({},f,{className:"sendbird-conversation__message-list"}))}:o,u=i.renderMessageInput,d=u===void 0?function(){return v.createElement(Uq,x({},e))}:u;return v.createElement(IR,x({},e,n,{isLoading:e==null?void 0:e.isLoading,isInvalid:r,channelUrl:t,renderChannelHeader:s,renderMessageList:l,renderMessageInput:d}))},e3=function(e){return v.createElement(Sq,x({},e),v.createElement(kq,x({},e)))},t3="RESET_CHANNEL_LIST",n3="CREATE_CHANNEL",qC="LEAVE_CHANNEL_SUCCESS",Xp="SET_CURRENT_CHANNEL",Pq="FETCH_CHANNELS_START",KC="FETCH_CHANNELS_SUCCESS",xq="FETCH_CHANNELS_FAILURE",$C="INIT_CHANNELS_START",r3="INIT_CHANNELS_SUCCESS",i3="REFRESH_CHANNELS_SUCCESS",a3="INIT_CHANNELS_FAILURE",s3="ON_USER_JOINED",o3="ON_CHANNEL_DELETED",bo="ON_LAST_MESSAGE_UPDATED",my="ON_USER_LEFT",l3="ON_CHANNEL_CHANGED",u3="ON_CHANNEL_ARCHIVED",c3="ON_CHANNEL_FROZEN",d3="ON_CHANNEL_UNFROZEN",h3="ON_READ_RECEIPT_UPDATED",f3="ON_DELIVERY_RECEIPT_UPDATED",WC="CHANNEL_LIST_PARAMS_UPDATED",Fq="delivery_receipt",Hq=function(e){var n=e.sdk,t=e.sdkChannelHandlerId,r=e.channelListDispatcher,i=e.logger,a=new xo({onChannelChanged:function(s){s.isGroupChannel()&&(i.info("ChannelList: onChannelChanged",s),r({type:l3,payload:s}))},onChannelDeleted:function(s){i.info("ChannelList: onChannelDeleted",s),r({type:o3,payload:s})},onUserJoined:function(s){i.info("ChannelList: onUserJoined",s),r({type:s3,payload:s})},onUserBanned:function(s,o){var l;if(s.isGroupChannel()){i.info("Channel: onUserBanned",s);var u=o.userId===((l=n==null?void 0:n.currentUser)===null||l===void 0?void 0:l.userId);r({type:my,payload:{channel:s,isMe:u}})}},onUserLeft:function(s,o){var l;i.info("ChannelList: onUserLeft",s);var u=o.userId===((l=n==null?void 0:n.currentUser)===null||l===void 0?void 0:l.userId);r({type:my,payload:{channel:s,isMe:u}})},onUnreadMemberStatusUpdated:function(s){i.info("ChannelList: onUnreadMemberStatusUpdated",s),r({type:h3,payload:s})},onUndeliveredMemberStatusUpdated:function(s){i.info("ChannelList: onUndeliveredMemberStatusUpdated",s),s.lastMessage&&r({type:f3,payload:s})},onMessageUpdated:function(s,o){var l;s.isGroupChannel()&&(!((l=s.lastMessage)===null||l===void 0)&&l.isEqual(o))&&(i.info("ChannelList: onMessageUpdated",s),r({type:bo,payload:s}))},onChannelHidden:function(s){i.info("ChannelList: onChannelHidden",s),r({type:u3,payload:s})},onChannelFrozen:function(s){s.isGroupChannel()&&(i.info("ChannelList: onChannelFrozen",s),r({type:c3,payload:s}))},onChannelUnfrozen:function(s){s.isGroupChannel()&&(i.info("ChannelList: onChannelUnfrozen",s),r({type:d3,payload:s}))}});i.info("ChannelList: Added channelHandler"),n.groupChannel.addGroupChannelHandler(t,a)},v3=function(e){var n=e.sdk,t=e.userFilledChannelListQuery,r=t===void 0?{}:t,i={includeEmpty:!1,limit:20,order:er.LATEST_LAST_MESSAGE};return r&&Object.keys(r).forEach(function(a){i[a]=r[a]}),n.groupChannel.createMyGroupChannelListQuery(i)};function Bq(e){var n,t,r,i,a=e.sdk,s=e.sdkChannelHandlerId,o=e.channelListDispatcher,l=e.setChannelSource,u=e.onChannelSelect,d=e.userFilledChannelListQuery,f=e.logger,p=e.sortChannelList,m=e.disableAutoSelect,E=e.markAsDeliveredScheduler,g=e.disableMarkAsDelivered;a!=null&&a.groupChannel?Hq({sdk:a,channelListDispatcher:o,sdkChannelHandlerId:s,logger:f}):f.warning("ChannelList - createEventHandler: sdk or sdk.ChannelHandler does not exist",a),f.info("ChannelList - creating query",{userFilledChannelListQuery:d});var y=v3({sdk:a,userFilledChannelListQuery:d});f.info("ChannelList - created query",y),l(y),o({type:$C,payload:{currentUserId:(t=(n=a==null?void 0:a.currentUser)===null||n===void 0?void 0:n.userId)!==null&&t!==void 0?t:""}}),d&&(f.info("ChannelList - setting up channelListQuery",y),o({type:WC,payload:{channelListQuery:y,currentUserId:(i=(r=a==null?void 0:a.currentUser)===null||r===void 0?void 0:r.userId)!==null&&i!==void 0?i:""}})),f.info("ChannelList - fetching channels"),y.hasNext?y.next().then(function(S){var C,T;f.info("ChannelList - fetched channels",S),f.info("ChannelList - highlight channel",S[0]);var I=S;p&&typeof p=="function"&&(I=p(S),f.info("ChannelList - channel list sorted",I)),m||u==null||u(I[0]),o({type:r3,payload:{channelList:I,disableAutoSelect:m}});var L=(T=(C=a==null?void 0:a.appInfo)===null||C===void 0?void 0:C.premiumFeatureList)===null||T===void 0?void 0:T.find(function(D){return D===Fq});L&&!g&&I.forEach(function(D){E.push(D)})}).catch(function(S){S&&(f.error("ChannelList - couldnt fetch channels",S),o({type:a3}))}):f.info("ChannelList - there are no more channels")}var Gq=function(e){e.forEach(function(n){try{n.remove()}catch{}})},Vq=function(e,n){var t=new Map;return e&&(t.set(Fn.CREATE_CHANNEL,e.subscribe(Fn.CREATE_CHANNEL,function(r){var i=r.channel;n({type:n3,payload:i})})),t.set(Fn.UPDATE_USER_MESSAGE,e.subscribe(Fn.UPDATE_USER_MESSAGE,function(r){var i,a=r.channel,s=r.message;a.isGroupChannel()&&((i=a==null?void 0:a.lastMessage)===null||i===void 0?void 0:i.messageId)===s.messageId&&(a.lastMessage=s,n({type:bo,payload:a}))})),t.set(Fn.LEAVE_CHANNEL,e.subscribe(Fn.LEAVE_CHANNEL,function(r){var i=r.channel;n({type:qC,payload:i==null?void 0:i.url})}))),t},ch=function(e){var n=e.channel,t=e.currentChannel,r=e.allChannels,i=e.disableAutoSelect,a=null;if((t==null?void 0:t.url)===n.url){if(!i&&r.length>0){var s=r[0],o=r[1],l=o===void 0?null:o;a=s.url===n.url?l:s}}else a=t;return a},p3={initialized:!1,loading:!0,allChannels:[],currentChannel:null,channelListQuery:null,currentUserId:"",disableAutoSelect:!1};function zq(e,n){return si(n).with({type:$C},function(t){var r=t.payload;return x(x({},e),{loading:!0,currentUserId:r.currentUserId})}).with({type:t3},function(){return p3}).with({type:r3},function(t){var r=t.payload,i=r.channelList,a=r.disableAutoSelect;return x(x({},e),{initialized:!0,loading:!1,allChannels:i,disableAutoSelect:a,currentChannel:!a&&i&&i.length&&i.length>0?i[0]:e.currentChannel})}).with({type:i3},function(t){var r=t.payload,i=r.channelList,a=r.currentChannel;return x(x({},e),{loading:!1,allChannels:i,currentChannel:a})}).with({type:KC},function(t){var r=e.allChannels.map(function(a){return a.url}),i=t.payload.filter(function(a){var s=a.url;return!r.find(function(o){return o===s})});return x(x({},e),{allChannels:Ae(Ae([],e.allChannels,!0),i,!0)})}).with({type:n3},function(t){var r,i=t.payload,a=e.allChannels,s=e.currentUserId,o=e.channelListQuery;return o?Ac(o,i,s)?x(x({},e),{currentChannel:i,allChannels:wc(a,i,(r=e.channelListQuery)===null||r===void 0?void 0:r.order)}):x(x({},e),{currentChannel:i}):x(x({},e),{currentChannel:i,allChannels:Ae([i],a.filter(function(l){return l.url!==(i==null?void 0:i.url)}),!0)})}).with({type:u3},function(t){var r,i=t.payload,a=e.allChannels,s=e.currentUserId,o=e.currentChannel,l=e.channelListQuery,u=e.disableAutoSelect;if(l&&Ac(l,i,s))return x(x({},e),{allChannels:wc(a,i,(r=e.channelListQuery)===null||r===void 0?void 0:r.order)});var d=ch({channel:i,currentChannel:o,allChannels:a,disableAutoSelect:u});return x(x({},e),{currentChannel:d,allChannels:a.filter(function(f){var p=f.url;return p!==(i==null?void 0:i.url)})})}).with({type:$g.union(qC,o3)},function(t){var r,i=t.payload,a=e.allChannels.filter(function(s){var o=s.url;return o!==i});return x(x({},e),{currentChannel:i===((r=e.currentChannel)===null||r===void 0?void 0:r.url)?a[0]:e.currentChannel,allChannels:a})}).with({type:my},function(t){var r,i=t.payload,a=i.channel,s=i.isMe,o=e.allChannels,l=e.currentUserId,u=e.currentChannel,d=e.channelListQuery,f=e.disableAutoSelect,p=Ae([],o,!0),m=a;if(s||d&&!Ac(d,a,l)){var E=o.findIndex(function(g){return g.url===a.url});E>-1&&(p.splice(E,1),m=ch({channel:a,currentChannel:u,allChannels:o,disableAutoSelect:f}))}else p=wc(o,a,(r=e.channelListQuery)===null||r===void 0?void 0:r.order),(u==null?void 0:u.url)===a.url&&(m=a);return x(x({},e),{currentChannel:m,allChannels:p})}).with({type:$g.union(s3,l3,h3,f3)},function(t){var r,i,a,s=t.payload,o=e.allChannels,l=o===void 0?[]:o,u=e.currentUserId,d=e.currentChannel,f=e.channelListQuery,p=e.disableAutoSelect,m=s.unreadMessageCount;if(f){if(Ac(f,s,u))return x(x({},e),{allChannels:wc(l,s,(r=e.channelListQuery)===null||r===void 0?void 0:r.order)});if(S7(s))return e;var E=ch({channel:s,currentChannel:d,allChannels:l,disableAutoSelect:p});return x(x({},e),{currentChannel:E,allChannels:l.filter(function(g){var y=g.url;return y!==(s==null?void 0:s.url)})})}return m===0&&((a=(i=s==null?void 0:s.lastMessage)===null||i===void 0?void 0:i.sender)===null||a===void 0?void 0:a.userId)!==u?x(x({},e),{allChannels:l.map(function(g){return g.url===(s==null?void 0:s.url)?s:g})}):x(x({},e),{allChannels:Ae([s],l.filter(function(g){var y=g.url;return y!==s.url}),!0)})}).with({type:Xp},function(t){return x(x({},e),{currentChannel:t.payload})}).with({type:bo},function(t){return x(x({},e),{allChannels:e.allChannels.map(function(r){return(r==null?void 0:r.url)===t.payload.url?t.payload:r})})}).with({type:c3},function(t){var r,i=t.payload,a=e.allChannels,s=e.currentUserId,o=e.currentChannel,l=e.channelListQuery,u=e.disableAutoSelect;if(l){if(Ac(l,i,s))return x(x({},e),{allChannels:wc(a,i,(r=e.channelListQuery)===null||r===void 0?void 0:r.order)});var d=ch({channel:i,currentChannel:o,allChannels:a,disableAutoSelect:u});return x(x({},e),{currentChannel:d,allChannels:a.filter(function(f){var p=f.url;return p!==(i==null?void 0:i.url)})})}return x(x({},e),{allChannels:a.map(function(f){return f.url===(i==null?void 0:i.url)&&(f.isFrozen=!0),f})})}).with({type:d3},function(t){var r,i=t.payload,a=e.allChannels,s=e.currentUserId,o=e.currentChannel,l=e.channelListQuery,u=e.disableAutoSelect;if(l){if(Ac(l,i,s))return x(x({},e),{allChannels:wc(a,i,(r=e.channelListQuery)===null||r===void 0?void 0:r.order)});var d=ch({channel:i,currentChannel:o,allChannels:a,disableAutoSelect:u});return x(x({},e),{currentChannel:d,allChannels:a.filter(function(f){var p=f.url;return p!==(i==null?void 0:i.url)})})}return x(x({},e),{allChannels:a.map(function(f){return f.url===(i==null?void 0:i.url)&&(f.isFrozen=!1),f})})}).with({type:WC},function(t){return x(x({},e),{channelListQuery:t.payload.channelListQuery,currentUserId:t.payload.currentUserId})}).otherwise(function(){return e})}function jq(e,n){var t=e.activeChannelUrl,r=e.channels,i=e.sdk,a=n.logger,s=n.channelListDispatcher;return N.useEffect(function(){var o;if(t){a.info("ChannelListProvider: looking for active channel",{activeChannelUrl:t});var l=r==null?void 0:r.find(function(u){return u.url===t});l?s({type:Xp,payload:l}):(a.info("ChannelListProvider: searching backend for active channel",{activeChannelUrl:t}),(o=i==null?void 0:i.groupChannel)===null||o===void 0||o.getChannel(t).then(function(u){s({type:KC,payload:[u]}),s({type:Xp,payload:u})}).catch(function(){a.warning("ChannelListProvider: Active channel not found")}))}},[t])}var qq=function(e,n){var t=e.channelSource,r=e.disableMarkAsDelivered,i=n.channelListDispatcher,a=n.logger,s=n.markAsDeliveredScheduler;return N.useCallback(function(){return Wt(void 0,void 0,void 0,function(){var o,l;return Qt(this,function(u){switch(u.label){case 0:if(!(t!=null&&t.hasNext))return a.info("ChannelList: not able to fetch"),[2];a.info("ChannelList: starting fetch"),i({type:Pq,payload:null}),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,t.next()];case 2:return o=u.sent(),a.info("ChannelList: succeeded fetch",{channelList:o}),i({type:KC,payload:o}),r||(a.info("ChannelList: mark as delivered to fetched channels"),o==null||o.forEach(function(d){(d==null?void 0:d.unreadMessageCount)>0&&s.push(d)})),[3,4];case 3:return l=u.sent(),a.error("ChannelList: failed fetch",{error:l}),i({type:xq,payload:l}),[3,4];case 4:return[2]}})})},[t,r])};function Kq(e){var n=e.isOnline,t=e.reconnectOnIdle,r=e.logger,i=e.sdk,a=e.currentGroupChannel,s=e.channelListDispatcher,o=e.setChannelSource,l=e.userFilledChannelListQuery,u=e.sortChannelList,d=e.disableAutoSelect,f=e.markAsDeliveredScheduler,p=e.disableMarkAsDelivered,m=YO(n,a,t).shouldReconnect;N.useEffect(function(){return function(){var E,g,y,S;if(m){r.info("ChannelList refresh - creating query",{userFilledChannelListQuery:l});var C=v3({sdk:i,userFilledChannelListQuery:l});r.info("ChannelList refresh - created query",C),o(C),s({type:$C,payload:{currentUserId:(g=(E=i==null?void 0:i.currentUser)===null||E===void 0?void 0:E.userId)!==null&&g!==void 0?g:""}}),l&&(r.info("ChannelList refresh - setting up channelListQuery",C),s({type:WC,payload:{channelListQuery:C,currentUserId:(S=(y=i==null?void 0:i.currentUser)===null||y===void 0?void 0:y.userId)!==null&&S!==void 0?S:""}})),r.info("ChannelList refresh - fetching channels"),C.hasNext?C.next().then(function(T){var I,L;r.info("ChannelList refresh - fetched channels",T);var D=T;u&&typeof u=="function"&&(D=u(T),r.info("ChannelList refresh - channel list sorted",D));var O=d?null:D[0];if(a!=null&&a.url){var R=D.find(function(P){return P.url===a.url});R&&(O=R)}r.info("ChannelList refresh - highlight channel",O),s({type:i3,payload:{channelList:D,currentChannel:O}});var k=(L=(I=i==null?void 0:i.appInfo)===null||I===void 0?void 0:I.premiumFeatureList)===null||L===void 0?void 0:L.find(function(P){return P===I2});k&&!p&&D.forEach(function(P){f.push(P)})}).catch(function(T){T&&(r.error("ChannelList refresh - could not fetch channels",T),s({type:a3}))}):r.info("ChannelList refresh - there are no more channels")}}},[m])}var m3=v.createContext(null),$q=function(e){var n,t,r=e.children,i=e.className,a=e.disableUserProfile,s=e.allowProfileEdit,o=e.queries,l=e.onProfileEditSuccess,u=e.onThemeChange,d=e.onBeforeCreateChannel,f=e.sortChannelList,p=e.overrideInviteUser,m=e.activeChannelUrl,E=e.isTypingIndicatorEnabled,g=E===void 0?null:E,y=e.isMessageReceiptStatusEnabled,S=y===void 0?null:y,C=e.reconnectOnIdle,T=(e==null?void 0:e.disableAutoSelect)||!!m,I=(e==null?void 0:e.onChannelSelect)||Cn,L=Tt(),D=L.config,O=L.stores,R=O.sdkStore,k=D.pubSub,P=D.logger,G=D.markAsDeliveredScheduler,V=D.disableMarkAsDelivered,H=V===void 0?!1:V,F=D.isOnline,z=R==null?void 0:R.sdk,K=((n=z==null?void 0:z.appInfo)!==null&&n!==void 0?n:{}).premiumFeatureList,ee=K===void 0?[]:K,$=s||D.allowProfileEdit,Q=o==null?void 0:o.channelListQuery,ne=o==null?void 0:o.applicationUserListQuery,j=R==null?void 0:R.initialized,Z=N.useReducer(zq,p3),ie=Z[0],fe=Z[1],te=ie.currentChannel,le=N.useState(null),Me=le[0],ae=le[1],he=N.useState([]),pe=he[0],Ne=he[1];N.useEffect(function(){var Pe=Vq(k,fe);return function(){Gq(Pe)}},[j]),N.useEffect(function(){var Pe,Ge=Kr();return j?(P.info("ChannelList: Setup channelHandlers"),Bq({sdk:z,sdkChannelHandlerId:Ge,channelListDispatcher:fe,setChannelSource:ae,onChannelSelect:I,userFilledChannelListQuery:x({},Q),logger:P,sortChannelList:f,disableAutoSelect:T,markAsDeliveredScheduler:G,disableMarkAsDelivered:H})):(P.info("ChannelList: Removing channelHandlers"),!((Pe=z==null?void 0:z.groupChannel)===null||Pe===void 0)&&Pe.removeGroupChannelHandler&&z.groupChannel.removeGroupChannelHandler(Ge),ae(null),fe({type:t3,payload:null})),function(){var De,tt;P.info("ChannelList: Removing channelHandlers"),!((De=z==null?void 0:z.groupChannel)===null||De===void 0)&&De.removeGroupChannelHandler&&((tt=z==null?void 0:z.groupChannel)===null||tt===void 0||tt.removeGroupChannelHandler(Ge))}},[j,f,Object.entries(Q??{}).map(function(Pe){var Ge=Pe[0],De=Pe[1];return Ge+De}).join()]),N.useEffect(function(){var Pe,Ge,De="";if(!((Pe=z==null?void 0:z.groupChannel)===null||Pe===void 0)&&Pe.addGroupChannelHandler){De=Kr();var tt=new xo({onTypingStatusUpdated:function(Ue){var Ye,yt=(Ye=Ue==null?void 0:Ue.getTypingUsers())===null||Ye===void 0?void 0:Ye.length,Nt=pe.filter(function(Rt){return Rt.url!==Ue.url});yt>0?Ne(Ae(Ae([],Nt,!0),[Ue],!1)):Ne(Nt)},onUnreadMemberStatusUpdated:function(Ue){fe({type:bo,payload:Ue})},onUndeliveredMemberStatusUpdated:function(Ue){fe({type:bo,payload:Ue})},onMessageUpdated:function(Ue){Ue.isGroupChannel()&&(fe({type:bo,payload:Ue}),z.groupChannel.getChannelWithoutCache(Ue.url).then(function(Ye){fe({type:bo,payload:Ye})}))},onMentionReceived:function(Ue){Ue.isGroupChannel()&&(fe({type:bo,payload:Ue}),z.groupChannel.getChannelWithoutCache(Ue.url).then(function(Ye){fe({type:bo,payload:Ye})}))}});(Ge=z==null?void 0:z.groupChannel)===null||Ge===void 0||Ge.addGroupChannelHandler(De,tt)}return function(){var Ue;!((Ue=z==null?void 0:z.groupChannel)===null||Ue===void 0)&&Ue.removeGroupChannelHandler&&De!==""&&z.groupChannel.removeGroupChannelHandler(De)}},[(t=z==null?void 0:z.currentUser)===null||t===void 0?void 0:t.userId]);var _e=N.useMemo(function(){return{applicationUserListQuery:ne,channelListQuery:Q}},[ne,Q]),ge=ie.allChannels,me=f&&typeof f=="function"?f(ge):ge;if(me.length!==ge.length){var Le=`ChannelList: You have removed/added extra channels on sortChannelList
      this could cause unexpected problems`;console.warn(Le,{before:ge,after:me}),P.warning(Le,{before:ge,after:me})}N.useEffect(function(){if(!(!z||!z.groupChannel)){if(!(te!=null&&te.url)){I(null);return}z.groupChannel.getChannel(te.url).then(function(Pe){I(Pe||null)})}},[te==null?void 0:te.url]),jq({activeChannelUrl:m,channels:me,sdk:z},{logger:P,channelListDispatcher:fe}),Kq({isOnline:F,reconnectOnIdle:C,logger:P,sdk:z,currentGroupChannel:te,channelListDispatcher:fe,setChannelSource:ae,userFilledChannelListQuery:Q,sortChannelList:f,disableAutoSelect:T,markAsDeliveredScheduler:G,disableMarkAsDelivered:H});var Qe=qq({channelSource:Me,disableMarkAsDelivered:H||!ee.some(function(Pe){return Pe===I2})},{channelListDispatcher:fe,logger:P,markAsDeliveredScheduler:G});return v.createElement(m3.Provider,{value:x(x({className:i,disableUserProfile:a,queries:_e,onProfileEditSuccess:l,onThemeChange:u,onBeforeCreateChannel:d,overrideInviteUser:p,onChannelSelect:I,sortChannelList:f,allowProfileEdit:$,channelListDispatcher:fe,channelSource:Me},ie),{allChannels:me,typingChannels:pe,isTypingIndicatorEnabled:g??D.groupChannelList.enableTypingIndicator,isMessageReceiptStatusEnabled:S??D.groupChannelList.enableMessageReceiptStatus,fetchChannelList:Qe})},v.createElement(hd,x({},e),v.createElement("div",{className:"sendbird-channel-list ".concat(i)},r)))};function QC(){var e=N.useContext(m3);if(!e)throw new Error("ChannelListContext not found. Use within the ChannelList module.");return e}var Wq=function(e){var n,t,r,i,a=e.channel,s=e.isActive,o=s===void 0?!1:s,l=e.isSelected,u=l===void 0?!1:l,d=e.isTyping,f=d===void 0?!1:d,p=e.renderChannelAction,m=e.onLeaveChannel,E=e.onClick,g=e.tabIndex,y=Tt().config,S=Ft().stringSet,C=QC(),T=C.isTypingIndicatorEnabled,I=T===void 0?!1:T,L=C.isMessageReceiptStatusEnabled,D=L===void 0?!1:L,O=y.userId,R=D&&(((n=a==null?void 0:a.lastMessage)===null||n===void 0?void 0:n.messageType)==="user"||((t=a==null?void 0:a.lastMessage)===null||t===void 0?void 0:t.messageType)==="file")&&((i=(r=a==null?void 0:a.lastMessage)===null||r===void 0?void 0:r.sender)===null||i===void 0?void 0:i.userId)===O;return v.createElement(qO,{channel:a,tabIndex:g,isTyping:I&&f,isSelected:u??o,channelName:YR(a,O,S),isMessageStatusEnabled:R,onClick:E,onLeaveChannel:m,renderChannelAction:p})},Qq=function(){var e=N.useState(!1),n=e[0],t=e[1],r=QC(),i=r.overrideInviteUser,a=r.onBeforeCreateChannel,s=r.onChannelSelect;return v.createElement($O,{createChannelVisible:n,onChangeCreateChannelVisible:t,onCreateChannelClick:i,onBeforeCreateChannel:a,onChannelCreated:function(o){return s==null?void 0:s(o)}})},Yq=function(e){var n=e.renderHeader,t=e.renderChannelPreview,r=e.renderPlaceHolderError,i=e.renderPlaceHolderLoading,a=e.renderPlaceHolderEmptyList,s=QC(),o=s.onThemeChange,l=s.allowProfileEdit,u=s.allChannels,d=s.currentChannel,f=s.channelListDispatcher,p=s.typingChannels,m=s.initialized,E=s.fetchChannelList,g=s.onProfileEditSuccess,y=Tt(),S=y.stores,C=y.config,T=C.logger,I=C.isOnline,L=I===void 0?!1:I,D=S.sdkStore.sdk,O=function(R){var k=R.item,P=R.index,G={channel:k,tabIndex:P,isSelected:(k==null?void 0:k.url)===(d==null?void 0:d.url),isTyping:p==null?void 0:p.some(function(V){var H=V.url;return H===(k==null?void 0:k.url)}),renderChannelAction:function(V){return v.createElement(jO,x({},V))},onClick:function(){if(!L&&!(D!=null&&D.isCacheEnabled)){T.warning("ChannelList: Inactivated clicking channel item during offline.");return}T.info("ChannelList: Clicked on channel:",k),f({type:Xp,payload:k})},onLeaveChannel:function(V,H){return Wt(this,void 0,void 0,function(){var F,z;return Qt(this,function(K){switch(K.label){case 0:if(T.info("ChannelList: Leaving channel",V),!V)return[3,4];K.label=1;case 1:return K.trys.push([1,3,,4]),[4,V.leave()];case 2:return F=K.sent(),T.info("ChannelList: Leaving channel success",F),H&&typeof H=="function"&&H(V,null),f({type:qC,payload:V.url}),[3,4];case 3:return z=K.sent(),T.error("ChannelList: Leaving channel failed",z),H&&typeof H=="function"&&H(V,z),[3,4];case 4:return[2]}})})}};return t?v.createElement("div",{key:k==null?void 0:k.url,onClick:G.onClick},t(G)):v.createElement(Wq,x({key:k==null?void 0:k.url},G))};return v.createElement(zO,{renderHeader:n,renderChannel:O,renderPlaceHolderError:r,renderPlaceHolderLoading:i,renderPlaceHolderEmptyList:a,onChangeTheme:o??Cn,allowProfileEdit:l,onUserProfileUpdated:g??Cn,channels:u,onLoadMore:E,initialized:m,renderAddChannel:function(){return v.createElement(Qq,null)}})},_3=function(e){return v.createElement($q,x({},e),v.createElement(Yq,x({},e)))};function Xq(e,n){var t=this,r,i=N.useState({loading:!0,response:void 0,error:void 0}),a=i[0],s=i[1],o=function(){return Wt(t,void 0,void 0,function(){var l,u;return Qt(this,function(d){switch(d.label){case 0:return d.trys.push([0,2,,3]),s(function(f){return{loading:!0,error:void 0,response:n!=null&&n.resetResponseOnRefresh?void 0:f.response}}),[4,e()];case 1:return l=d.sent(),s(l?function(f){return x(x({},f),{response:l,loading:!1})}:function(f){return x(x({},f),{loading:!!(n!=null&&n.persistLoadingIfNoResponse)})}),[3,3];case 2:return u=d.sent(),s(function(f){return x(x({},f),{error:u,loading:!1})}),[3,3];case 3:return[2]}})})};return N.useEffect(function(){return o(),function(){e.cancel&&typeof e.cancel=="function"&&e.cancel()}},(r=n==null?void 0:n.deps)!==null&&r!==void 0?r:[]),x(x({},a),{refresh:o})}var g3=v.createContext(null),Zq=function(e){var n=e.children,t=e.className,r=e.channelUrl,i=e.onCloseClick,a=e.onLeaveChannel,s=e.onChannelModified,o=e.overrideInviteUser,l=e.onBeforeUpdateChannel,u=e.queries,d=e.renderUserListItem,f=Tt(),p=f.config,m=f.stores,E=m.sdkStore,g=p.logger,y=N.useState(),S=y[0],C=y[1],T=N.useState(function(){return Kr()}),I=T[0],L=T[1],D=function(){return L(Kr())},O=Xq(function(){return Wt(void 0,void 0,void 0,function(){var H,F,z,K,ee,$,Q,ne;return Qt(this,function(j){switch(j.label){case 0:if(g.info("ChannelSettings: fetching channel"),r){if(!E.initialized||!E.sdk)return g.warning("ChannelSettings: SDK is not initialized"),[2];if(!E.sdk.groupChannel)return g.warning("ChannelSettings: GroupChannelModule is not specified in the SDK"),[2]}else return g.warning("ChannelSettings: channel url is required"),[2];j.label=1;case 1:return j.trys.push([1,3,,4]),S&&(!(($=(ee=E.sdk)===null||ee===void 0?void 0:ee.groupChannel)===null||$===void 0)&&$.removeGroupChannelHandler?(g.info("ChannelSettings: Removing message reciver handler",S),E.sdk.groupChannel.removeGroupChannelHandler(S)):!((Q=E.sdk)===null||Q===void 0)&&Q.groupChannel&&g.error("ChannelSettings: Not found the removeGroupChannelHandler"),C(void 0)),[4,E.sdk.groupChannel.getChannel(r)];case 2:return H=j.sent(),F={onUserLeft:function(Z,ie){jn(Z==null?void 0:Z.url,r)&&(g.info("ChannelSettings: onUserLeft",{channel:Z,user:ie}),V())},onUserBanned:function(Z,ie){jn(Z==null?void 0:Z.url,r)&&Z.isGroupChannel()&&(g.info("ChannelSettings: onUserBanned",{channel:Z,user:ie}),V())}},z=Kr(),(ne=E.sdk.groupChannel)===null||ne===void 0||ne.addGroupChannelHandler(z,new xo(F)),C(z),[2,H];case 3:throw K=j.sent(),g.error("ChannelSettings: fetching channel error:",K),K;case 4:return[2]}})})},{resetResponseOnRefresh:!0,persistLoadingIfNoResponse:!0,deps:[E.initialized,E.sdk.groupChannel]}),R=O.response,k=R===void 0?null:R,P=O.loading,G=O.error,V=O.refresh;return N.useEffect(function(){V()},[r,I]),v.createElement(g3.Provider,{value:{channelUrl:r,onCloseClick:i,onLeaveChannel:a,onChannelModified:s,onBeforeUpdateChannel:l,queries:u,overrideInviteUser:o,setChannelUpdateId:L,forceUpdateUI:D,channel:k,loading:P,invalidChannel:!!G,renderUserListItem:d}},v.createElement(hd,x({},e),v.createElement("div",{className:"sendbird-channel-settings ".concat(t)},n)))},ji=function(){var e=v.useContext(g3);if(!e)throw new Error("ChannelSettingsContext not found. Use within the ChannelSettings module");return e},Jq=function(e){var n=e.onCloseClick,t=e.renderLeft,r=e.renderMiddle,i=e.renderRight,a=Ft().stringSet,s=Tt().config,o=s.logger;return v.createElement(fi,{className:"sendbird-channel-settings__header",renderLeft:t,renderMiddle:r??function(){return v.createElement(fi.Title,{title:a.CHANNEL_SETTING__HEADER__TITLE})},renderRight:i??function(){return v.createElement("div",{className:"sendbird-channel-settings__header-icon"},v.createElement(fi.IconButton,{type:Se.CLOSE,onClick:function(l){o.info("ChannelSettings: Click close"),n(l)}}))}})},eK=function(e){var n,t,r,i=e.onSubmit,a=e.onCancel,s=ji(),o=s.channel,l=s.onChannelModified,u=s.onBeforeUpdateChannel,d=s.setChannelUpdateId,f=o==null?void 0:o.name,p=Tt(),m=(n=p==null?void 0:p.config)===null||n===void 0?void 0:n.userId,E=(t=p==null?void 0:p.config)===null||t===void 0?void 0:t.theme,g=(r=p==null?void 0:p.config)===null||r===void 0?void 0:r.logger,y=N.useRef(null),S=N.useRef(null),C=N.useRef(null),T=N.useState(null),I=T[0],L=T[1],D=N.useState(null),O=D[0],R=D[1],k=N.useContext(wn).stringSet;return v.createElement(Rr,{isFullScreenOnMobile:!0,titleText:k.MODAL__CHANNEL_INFORMATION__TITLE,submitText:k.BUTTON__SAVE,onCancel:a,onSubmit:function(){var P,G,V;if(f!==""&&!(!((P=y.current)===null||P===void 0)&&P.value)){!((G=S.current)===null||G===void 0)&&G.reportValidity&&S.current.reportValidity();return}var H=(V=y.current)===null||V===void 0?void 0:V.value,F=O;if(g.info("ChannelSettings: Channel information being updated",{currentTitle:H,currentImg:F}),u){g.info("ChannelSettings: onBeforeUpdateChannel");var z=u(H??"",F,o==null?void 0:o.data);o==null||o.updateChannel(z).then(function(K){l==null||l(K),d(Kr()),i()})}else g.info("ChannelSettings: normal"),o==null||o.updateChannel({coverImage:F,name:H,data:(o==null?void 0:o.data)||""}).then(function(K){g.info("ChannelSettings: Channel information updated",K),l==null||l(K),d==null||d(Kr()),i()})},type:Gn.PRIMARY},v.createElement("form",{className:"channel-profile-form",ref:S,onSubmit:function(P){P.preventDefault()}},v.createElement("div",{className:"channel-profile-form__img-section"},v.createElement(Gc,null,k.MODAL__CHANNEL_INFORMATION__CHANNEL_IMAGE),v.createElement("div",{className:"channel-profile-form__avatar"},I?v.createElement(Fr,{height:"80px",width:"80px",src:I}):v.createElement(mm,{height:80,width:80,channel:o,userId:m,theme:E})),v.createElement("input",{ref:C,type:"file",accept:"image/gif, image/jpeg, image/png",style:{display:"none"},onChange:function(P){P.target.files&&(L(URL.createObjectURL(P.target.files[0])),R(P.target.files[0])),C.current&&(C.current.value="")}}),v.createElement(to,{className:"channel-profile-form__avatar-button",onClick:function(){var P;return(P=C.current)===null||P===void 0?void 0:P.click()},disableUnderline:!0},v.createElement(Ie,{type:Ce.BUTTON_1,color:de.PRIMARY},k.MODAL__CHANNEL_INFORMATION__UPLOAD))),v.createElement("div",{className:"channel-profile-form__name-section"},v.createElement(Gc,null,k.MODAL__CHANNEL_INFORMATION__CHANNEL_NAME),v.createElement(Yp,{required:f!=="",name:"channel-profile-form__name",ref:y,value:f,placeHolder:k.MODAL__CHANNEL_INFORMATION__INPUT__PLACE_HOLDER}))))},tK=function(){var e,n,t,r=Tt(),i=ji(),a=N.useContext(wn).stringSet,s=N.useState(!1),o=s[0],l=s[1],u=(e=r==null?void 0:r.config)===null||e===void 0?void 0:e.userId,d=((n=r==null?void 0:r.config)===null||n===void 0?void 0:n.theme)||"light",f=(t=r==null?void 0:r.config)===null||t===void 0?void 0:t.isOnline,p=!f,m=i==null?void 0:i.channel,E=N.useMemo(function(){return m!=null&&m.name&&m.name!=="Group Channel"?m.name:(m==null?void 0:m.name)==="Group Channel"||!(m!=null&&m.name)?((m==null?void 0:m.members)||[]).map(function(g){return g.nickname||a.NO_NAME}).join(", "):a.NO_TITLE},[m==null?void 0:m.name,m==null?void 0:m.joinedMemberCount]);return v.createElement("div",{className:"sendbird-channel-profile"},v.createElement("div",{className:"sendbird-channel-profile--inner"},v.createElement("div",{className:"sendbird-channel-profile__avatar"},v.createElement(mm,{channel:m,userId:u,theme:d,width:80,height:80})),v.createElement(Ie,{className:"sendbird-channel-profile__title",type:Ce.SUBTITLE_2,color:de.ONBACKGROUND_1},E),v.createElement(to,{disabled:p,className:"sendbird-channel-profile__edit",onClick:function(){p||l(!0)},disableUnderline:!0},v.createElement(Ie,{type:Ce.BUTTON_1,color:p?de.ONBACKGROUND_2:de.PRIMARY},a.CHANNEL_SETTING__PROFILE__EDIT)),o&&v.createElement(eK,{onCancel:function(){return l(!1)},onSubmit:function(){return l(!1)}})))},nK=function(e){var n,t,r=e.onSubmit,i=r===void 0?Cn:r,a=e.onCancel,s=a===void 0?Cn:a,o=ji(),l=o.channel,u=o.onLeaveChannel,d=Ft().stringSet,f=Tt(),p=(n=f==null?void 0:f.config)===null||n===void 0?void 0:n.logger,m=(t=f==null?void 0:f.config)===null||t===void 0?void 0:t.isOnline,E=_r().isMobile,g=function(y){return y!=null&&y.name&&(y==null?void 0:y.name)!=="Group Channel"?y.name:(y==null?void 0:y.name)==="Group Channel"||!(y!=null&&y.name)?((y==null?void 0:y.members)||[]).map(function(S){return S.nickname||d.NO_NAME}).join(", "):d.NO_TITLE};return E?v.createElement(Rr,{className:"sendbird-channel-settings__leave--mobile",titleText:g(l),hideFooter:!0,isCloseOnClickOutside:!0,onCancel:s},v.createElement(to,{onClick:function(){p.info("ChannelSettings: Leaving channel",l),l==null||l.leave().then(function(){p.info("ChannelSettings: Leaving channel successful!",l),u==null||u()})},className:"sendbird-channel-settings__leave-label--mobile"},v.createElement(Ie,{type:Ce.SUBTITLE_1,color:de.ONBACKGROUND_1},d.CHANNEL_PREVIEW_MOBILE_LEAVE))):v.createElement(Rr,{isFullScreenOnMobile:!0,disabled:!m,onCancel:s,onSubmit:function(){p.info("ChannelSettings: Leaving channel",l),l==null||l.leave().then(function(){p.info("ChannelSettings: Leaving channel successful!",l),u?u():i()})},submitText:d.MODAL__LEAVE_CHANNEL__FOOTER,titleText:d.MODAL__LEAVE_CHANNEL__TITLE})},E3=function(e){var n=e.renderLeft,t=e.renderMiddle,r=e.renderRight,i=r===void 0?function(p){return v.createElement(_y,x({},p))}:r,a=e.renderAccordion,s=e.className,o=e.onClick,l=e.onKeyDown,u=e.accordionOpened,d=e.setAccordionOpened,f=typeof a=="function";return v.createElement(v.Fragment,null,v.createElement("div",{className:Zt("sendbird-channel-settings__panel-item",s),onClick:function(p){o==null||o(p),f&&d(!u)},onKeyDown:function(p){l==null||l(p),f&&d(!u)}},n(),t(),i({useAccordion:f,accordionOpened:u})),u&&(a==null?void 0:a()))},_y=function(e){var n=e.useAccordion,t=e.accordionOpened,r=e.children;return n?v.createElement(We,{type:Se.CHEVRON_RIGHT,className:["sendbird-accordion__panel-icon-right","sendbird-accordion__panel-icon--chevron",t?"sendbird-accordion__panel-icon--open":""].join(" "),height:"24px",width:"24px"}):r||null},rK=function(e){var n=e.menuItems,t=ji().channel,r=UO(t)?n.operator:n.nonOperator,i=N.useState(null),a=i[0],s=i[1];return v.createElement("div",{className:"sendbird-channel-settings__operator"},Object.entries(r).map(function(o){var l=o[0],u=o[1];return u.hideMenu?null:v.createElement(E3,{key:l,onClick:u.onClick,onKeyDown:u.onKeyDown,renderLeft:function(){return v.createElement(We,x({},u.icon))},renderMiddle:function(){return v.createElement(Ie,x({},u.label))},renderRight:u.rightComponent,renderAccordion:u.accordionComponent,accordionOpened:a===l,setAccordionOpened:function(){s(function(d){return d===l?null:l})}})}))},YC=function(e,n,t){return Wt(void 0,void 0,void 0,function(){var r;return Qt(this,function(i){switch(i.label){case 0:if(e.current)return t==null||t(new Error("Processing in progress")),[2];e.current=!0,i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,n()];case 2:return i.sent(),[3,5];case 3:return r=i.sent(),t==null||t(r),[3,5];case 4:return e.current=!1,[7];case 5:return[2]}})})},iK=function(e,n){return e?e instanceof Ol?e.isOperator(n):(n==null?void 0:n.role)===ri.OPERATOR:!1},aK=function(e,n){return e?n==null?void 0:n.isMuted:!1},sK=function(e){var n=e.channel,t=e.user,r=e.onToggleOperatorState,i=e.isOperator,a=N.useState(i??iK(n,t)),s=a[0],o=a[1],l=N.useRef(!1),u=N.useCallback(function(){return n?YC(l,function(){return Wt(void 0,void 0,void 0,function(){var d,f;return Qt(this,function(p){switch(p.label){case 0:return d=s?n.removeOperators([t.userId]):n.addOperators([t.userId]),[4,d];case 1:return p.sent(),f=!s,o(f),r==null||r({user:t,newStatus:f}),[2]}})})},function(d){r==null||r({user:t,newStatus:s,error:d})}):Promise.resolve()},[s,n.url,t.userId,r]);return{isOperator:s,toggleOperator:u}},oK=function(e){var n=e.channel,t=e.user,r=e.onToggleMuteState,i=e.isMuted,a=N.useState(i??aK(n,t)),s=a[0],o=a[1],l=N.useRef(!1),u=N.useCallback(function(){return n?YC(l,function(){return Wt(void 0,void 0,void 0,function(){var d,f;return Qt(this,function(p){switch(p.label){case 0:return d=s?n.unmuteUser(t):n.muteUser(t),[4,d];case 1:return p.sent(),f=!s,o(f),r==null||r({user:t,newStatus:f}),[2]}})})},function(d){r==null||r({user:t,newStatus:s,error:d})}):Promise.resolve()},[s,n.url,t.userId,r]);return{isMuted:s,toggleMute:u}},lK=function(e){var n=e.channel,t=e.user,r=e.onToggleBanState,i=e.isBanned,a=N.useState(i??!1),s=a[0],o=a[1],l=N.useRef(!1),u=N.useCallback(function(){return n?YC(l,function(){return Wt(void 0,void 0,void 0,function(){var d,f;return Qt(this,function(p){switch(p.label){case 0:return d=s?n.unbanUser(t):n.banUser(t),[4,d];case 1:return p.sent(),f=!s,o(f),r==null||r({user:t,newStatus:f}),[2]}})})},function(d){r==null||r({user:t,newStatus:s,error:d})}):Promise.resolve()},[s,n.url,t.userId,r]);return{isBanned:s,toggleBan:u}},y3=N.createContext(void 0),uK=function(e){var n=e.children,t=Ty(e,["children"]),r=Tt().config,i=r.userId,a=t.channel,s=t.user,o=s.userId===i,l=function(){return a?a instanceof Ol?a.isOperator(i):a.myRole===ri.OPERATOR:!1}(),u=sK(t),d=oK(t),f=lK(t);return v.createElement(y3.Provider,{value:x(x(x(x(x({},t),u),d),f),{isCurrentUser:o,isCurrentUserOperator:l})},n)},XC=function(){var e=N.useContext(y3);if(!e)throw new Error("useUserListItemMenuContext must be used within a UserListItemMenuProvider.");return e},cK=function(e){var n,t=Ft().stringSet,r=XC(),i=r.isOperator,a=r.toggleOperator,s=r.isCurrentUser,o=r.isCurrentUserOperator,l=r.hideMenu;return o?v.createElement(yi,x({},e,{onClick:function(u){var d;(d=e==null?void 0:e.onClick)===null||d===void 0||d.call(e,u),a(),l()},disabled:s}),(n=e==null?void 0:e.children)!==null&&n!==void 0?n:i?t.CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR:t.CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR):v.createElement(v.Fragment,null)},dK=function(e){var n,t=Ft().stringSet,r=XC(),i=r.isMuted,a=r.toggleMute,s=r.isCurrentUserOperator,o=r.hideMenu,l=r.channel;return!s||l!=null&&l.isBroadcast?v.createElement(v.Fragment,null):v.createElement(yi,x({},e,{onClick:function(u){var d;(d=e==null?void 0:e.onClick)===null||d===void 0||d.call(e,u),a(),o()}}),(n=e==null?void 0:e.children)!==null&&n!==void 0?n:i?t.CHANNEL_SETTING__MODERATION__UNMUTE:t.CHANNEL_SETTING__MODERATION__MUTE)},hK=function(e){var n,t=Ft().stringSet,r=XC(),i=r.isBanned,a=r.toggleBan,s=r.isCurrentUserOperator,o=r.hideMenu;return s?v.createElement(yi,x({},e,{onClick:function(l){var u;(u=e==null?void 0:e.onClick)===null||u===void 0||u.call(e,l),a(),o()}}),(n=e==null?void 0:e.children)!==null&&n!==void 0?n:i?t.CHANNEL_SETTING__MODERATION__UNBAN:t.CHANNEL_SETTING__MODERATION__BAN):v.createElement(v.Fragment,null)},fK=function(e){var n=e.toggleMenu,t=e.ref;return v.createElement(fa,{ref:t,className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:n},v.createElement(We,{width:"24px",height:"24px",type:Se.MORE,fillColor:Ve.CONTENT_INVERSE}))},vK=function(e){var n=e.items,t=n.OperatorToggleMenuItem,r=n.MuteToggleMenuItem,i=n.BanToggleMenuItem;return v.createElement(v.Fragment,null,v.createElement(t,null),v.createElement(r,null),v.createElement(i,null))},Fl=function(e){var n=e.user,t=e.className,r=e.renderTrigger,i=r===void 0?fK:r,a=e.renderMenuItems,s=a===void 0?vK:a,o=N.useState(!1),l=o[0],u=o[1],d=N.useRef(null),f=N.useRef(null),p=Tt().config,m=p.userId,E=function(){u(function(y){return!y})},g=function(){u(!1)};return n.userId===m?null:v.createElement("div",{className:Zt("sendbird-user-list-item-menu",t),ref:d},v.createElement(uK,x({},e,{hideMenu:g,toggleMenu:E}),i({ref:f,toggleMenu:E}),l&&v.createElement(Di,{parentRef:f,parentContainRef:d,closeDropdown:g},s({items:{OperatorToggleMenuItem:cK,MuteToggleMenuItem:dK,BanToggleMenuItem:hK}}))))};function pK(e){var n=this,t=e.onCancel,r=e.renderUserListItem,i=r===void 0?function(g){return v.createElement(is,x({},g))}:r,a=e.operatorListQueryParams,s=a===void 0?{}:a,o=N.useState([]),l=o[0],u=o[1],d=N.useState(null),f=d[0],p=d[1],m=ji().channel,E=N.useContext(wn).stringSet;return N.useEffect(function(){var g=m==null?void 0:m.createOperatorListQuery(x({limit:20},s));g==null||g.next().then(function(y){u(y)}),p(g??null)},[]),v.createElement("div",null,v.createElement(Rr,{isFullScreenOnMobile:!0,hideFooter:!0,titleText:E.CHANNEL_SETTING__OPERATORS__TITLE_ALL,onCancel:t},v.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:Pl({onReachedBottom:function(){return Wt(n,void 0,void 0,function(){return Qt(this,function(g){return f&&f.hasNext&&f.next().then(function(y){u(Ae(Ae([],l,!0),y,!0))}),[2]})})}})},l.map(function(g){return v.createElement(v.Fragment,{key:g.userId},i({user:g,channel:m,renderListItemMenu:function(y){return v.createElement(Fl,x({},y,{isOperator:!0,onToggleOperatorState:function(S){var C=S.user;u(l.filter(function(T){var I=T.userId;return I!==C.userId}))},renderMenuItems:function(S){var C=S.items;return v.createElement(C.OperatorToggleMenuItem,null)}}))}}))}))))}function mK(e){var n=this,t=e.onCancel,r=e.onSubmit,i=e.renderUserListItem,a=i===void 0?function(C){return v.createElement(is,x({},C))}:i,s=N.useState([]),o=s[0],l=s[1],u=N.useState({}),d=u[0],f=u[1],p=N.useState(null),m=p[0],E=p[1],g=N.useContext(wn).stringSet,y=ji().channel;N.useEffect(function(){var C=y==null?void 0:y.createMemberListQuery({operatorFilter:Wh.NONOPERATOR,limit:20});C==null||C.next().then(function(T){l(T)}),E(C??null)},[]);var S=Object.keys(d).filter(function(C){return d[C]}).length;return v.createElement("div",null,v.createElement(Rr,{isFullScreenOnMobile:!0,type:Gn.PRIMARY,submitText:g.CHANNEL_SETTING__OPERATORS__ADD_BUTTON,onCancel:t,onSubmit:function(){var C=Object.keys(d).filter(function(T){return d[T]});y==null||y.addOperators(C).then(function(){r(C)})},titleText:g.CHANNEL_SETTING__MEMBERS__SELECT_TITLE},v.createElement(Ie,{color:S>0?de.PRIMARY:de.ONBACKGROUND_3,type:Ce.CAPTION_1},"".concat(S," ").concat(g.MODAL__INVITE_MEMBER__SELECTED)),v.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:Pl({onReachedBottom:function(){return Wt(n,void 0,void 0,function(){var C;return Qt(this,function(T){return C=m.hasNext,C&&m.next().then(function(I){l(Ae(Ae([],o,!0),I,!0))}),[2]})})}})},o.map(function(C){return v.createElement(v.Fragment,{key:C.userId},a({user:C,checkBox:!0,checked:d[C.userId],disabled:(C==null?void 0:C.role)==="operator",onChange:function(T){var I,L=x(x({},d),(I={},I[T.target.id]=T.target.checked,I));T.target.checked||delete L[T.target.id],f(L)}}))}))))}var _K=function(e){var n=e.renderUserListItem,t=n===void 0?function(I){return v.createElement(is,x({},I))}:n,r=e.operatorListQueryParams,i=r===void 0?{}:r,a=N.useState([]),s=a[0],o=a[1],l=N.useState(!1),u=l[0],d=l[1],f=N.useState(!1),p=f[0],m=f[1],E=N.useState(!1),g=E[0],y=E[1],S=N.useContext(wn).stringSet,C=ji().channel,T=N.useCallback(function(){if(!C){o([]);return}var I=C==null?void 0:C.createOperatorListQuery(x({limit:10},i));I.next().then(function(L){o(L),y(I.hasNext)})},[C==null?void 0:C.url,C==null?void 0:C.createOperatorListQuery]);return N.useEffect(T,[C==null?void 0:C.url]),v.createElement(v.Fragment,null,s.map(function(I){return v.createElement(v.Fragment,{key:I.userId},t({user:I,channel:C,size:"small",avatarSize:"24px",renderListItemMenu:function(L){return v.createElement(Fl,x({},L,{isOperator:!0,onToggleOperatorState:function(){setTimeout(function(){T()},500)},renderMenuItems:function(D){var O=D.items;return v.createElement(O.OperatorToggleMenuItem,null)}}))}}))}),v.createElement("div",{className:"sendbird-channel-settings-accordion__footer"},v.createElement(Oi,{type:Gn.SECONDARY,size:va.SMALL,onClick:function(){m(!0)}},S.CHANNEL_SETTING__OPERATORS__TITLE_ADD),g&&v.createElement(Oi,{type:Gn.SECONDARY,size:va.SMALL,onClick:function(){d(!0)}},S.CHANNEL_SETTING__OPERATORS__TITLE_ALL)),u&&v.createElement(pK,{onCancel:function(){d(!1),T()},renderUserListItem:t,operatorListQueryParams:i}),p&&v.createElement(mK,{onCancel:function(){return m(!1)},onSubmit:function(){setTimeout(function(){T()},500),m(!1)},renderUserListItem:t}))};function gK(e){var n=this,t=e.onCancel,r=e.renderUserListItem,i=r===void 0?function(g){return v.createElement(is,x({},g))}:r,a=e.bannedUserListQueryParams,s=a===void 0?{}:a,o=N.useState([]),l=o[0],u=o[1],d=N.useState(null),f=d[0],p=d[1],m=ji().channel,E=Ft().stringSet;return N.useEffect(function(){var g=m==null?void 0:m.createBannedUserListQuery(x({limit:20},s));g&&(g.next().then(function(y){u(y)}),p(g))},[]),v.createElement("div",null,v.createElement(Rr,{isFullScreenOnMobile:!0,hideFooter:!0,onCancel:function(){return t()},onSubmit:Cn,titleText:E.CHANNEL_SETTING__BANNED_MEMBERS__TITLE},v.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:Pl({onReachedBottom:function(){return Wt(n,void 0,void 0,function(){var g;return Qt(this,function(y){return f?(g=f.hasNext,g&&f.next().then(function(S){u(Ae(Ae([],l,!0),S,!0))}),[2]):[2]})})}})},l.map(function(g){return i({user:g,channel:m,renderListItemMenu:function(y){return v.createElement(Fl,x({},y,{isBanned:!0,onToggleBanState:function(){u(l.filter(function(S){return S.userId!==g.userId}))},renderMenuItems:function(S){var C=S.items;return v.createElement(C.BanToggleMenuItem,null)}}))}})}))))}var EK=function(e){var n=e.renderUserListItem,t=n===void 0?function(S){return v.createElement(is,x({},S))}:n,r=e.bannedUserListQueryParams,i=r===void 0?{}:r,a=N.useState([]),s=a[0],o=a[1],l=N.useState(!1),u=l[0],d=l[1],f=N.useState(!1),p=f[0],m=f[1],E=N.useContext(wn).stringSet,g=ji().channel,y=N.useCallback(function(){if(!g){o([]);return}var S=g==null?void 0:g.createBannedUserListQuery(x({limit:10},i));S.next().then(function(C){o(C),d(S.hasNext)})},[g==null?void 0:g.url,g==null?void 0:g.createBannedUserListQuery]);return N.useEffect(y,[g==null?void 0:g.url]),v.createElement(v.Fragment,null,s.map(function(S){return v.createElement(v.Fragment,{key:S.userId},t({user:S,channel:g,size:"small",avatarSize:"24px",renderListItemMenu:function(C){return v.createElement(Fl,x({},C,{isBanned:!0,onToggleBanState:function(){return y()},renderMenuItems:function(T){var I=T.items;return v.createElement(I.BanToggleMenuItem,null)}}))}}))}),s&&s.length===0&&v.createElement(Ie,{className:"sendbird-channel-settings__empty-list",type:Ce.SUBTITLE_2,color:de.ONBACKGROUND_3},E.CHANNEL_SETTING__MODERATION__EMPTY_BAN),u&&v.createElement("div",{className:"sendbird-channel-settings-accordion__footer"},v.createElement(Oi,{type:Gn.SECONDARY,size:va.SMALL,onClick:function(){m(!0)}},E.CHANNEL_SETTING__MODERATION__ALL_BAN)),p&&v.createElement(gK,{onCancel:function(){m(!1),y()},renderUserListItem:t,bannedUserListQueryParams:i}))};function yK(e){var n=this,t=e.onCancel,r=e.renderUserListItem,i=r===void 0?function(g){return v.createElement(is,x({},g))}:r,a=e.memberListQueryParams,s=a===void 0?{}:a,o=N.useState([]),l=o[0],u=o[1],d=N.useState(null),f=d[0],p=d[1],m=ji().channel,E=Ft().stringSet;return N.useEffect(function(){var g=m==null?void 0:m.createMemberListQuery(x(x({limit:20},s),{mutedMemberFilter:"muted"}));g==null||g.next().then(function(y){u(y)}),p(g??null)},[]),v.createElement("div",null,v.createElement(Rr,{isFullScreenOnMobile:!0,hideFooter:!0,onCancel:function(){return t()},onSubmit:Cn,titleText:E.CHANNEL_SETTING__MUTED_MEMBERS__TITLE},v.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:Pl({onReachedBottom:function(){return Wt(n,void 0,void 0,function(){var g;return Qt(this,function(y){return g=f.hasNext,g&&f.next().then(function(S){u(Ae(Ae([],l,!0),S,!0))}),[2]})})}})},l.map(function(g){return v.createElement(v.Fragment,{key:g.userId},i({user:g,channel:m,renderListItemMenu:function(y){return v.createElement(Fl,x({},y,{onToggleMuteState:function(){u(l.filter(function(S){return S.userId!==g.userId}))},renderMenuItems:function(S){var C=S.items;return v.createElement(C.MuteToggleMenuItem,null)}}))}}))}))))}var CK=function(e){var n=e.renderUserListItem,t=n===void 0?function(S){return v.createElement(is,x({},S))}:n,r=e.memberListQueryParams,i=r===void 0?{}:r,a=N.useState([]),s=a[0],o=a[1],l=N.useState(!1),u=l[0],d=l[1],f=N.useState(!1),p=f[0],m=f[1],E=Ft().stringSet,g=ji().channel,y=N.useCallback(function(){if(!g){o([]);return}var S=g==null?void 0:g.createMemberListQuery(x(x({limit:10},i),{mutedMemberFilter:"muted"}));S.next().then(function(C){o(C),d(S.hasNext)})},[g==null?void 0:g.url,g==null?void 0:g.createMemberListQuery]);return N.useEffect(y,[g==null?void 0:g.url]),v.createElement(v.Fragment,null,s.map(function(S){return v.createElement(v.Fragment,{key:S.userId},t({user:S,channel:g,size:"small",avatarSize:"24px",renderListItemMenu:function(C){return v.createElement(Fl,x({},C,{onToggleMuteState:function(){setTimeout(function(){y()},500)},renderMenuItems:function(T){var I=T.items;return v.createElement(I.MuteToggleMenuItem,null)}}))}}))}),s&&s.length===0&&v.createElement(Ie,{className:"sendbird-channel-settings__empty-list",type:Ce.SUBTITLE_2,color:de.ONBACKGROUND_3},E.CHANNEL_SETTING__NO_UNMUTED),u&&v.createElement("div",{className:"sendbird-channel-settings-accordion__footer"},v.createElement(Oi,{type:Gn.SECONDARY,size:va.SMALL,onClick:function(){m(!0)}},E.CHANNEL_SETTING__MUTED_MEMBERS__TITLE_ALL)),p&&v.createElement(yK,{onCancel:function(){m(!1),y()},renderUserListItem:t,memberListQueryParams:i}))};function bK(e){var n=this,t=e.onCancel,r=e.renderUserListItem,i=r===void 0?function(g){return v.createElement(is,x({},g))}:r,a=e.memberListQueryParams,s=a===void 0?{}:a,o=N.useState([]),l=o[0],u=o[1],d=N.useState(null),f=d[0],p=d[1],m=ji().channel,E=N.useContext(wn).stringSet;return N.useEffect(function(){var g=m==null?void 0:m.createMemberListQuery(x({limit:20},s));g==null||g.next().then(function(y){u(y)}),p(g??null)},[]),v.createElement("div",null,v.createElement(Rr,{isFullScreenOnMobile:!0,hideFooter:!0,onCancel:function(){return t()},onSubmit:Cn,titleText:E.CHANNEL_SETTING__MEMBERS__SEE_ALL_MEMBERS},v.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:Pl({onReachedBottom:function(){return Wt(n,void 0,void 0,function(){return Qt(this,function(g){return f&&f.hasNext&&f.next().then(function(y){u(Ae(Ae([],l,!0),y,!0))}),[2]})})}})},l.map(function(g,y){return v.createElement(v.Fragment,{key:g.userId},i({index:y,user:g,channel:m,renderListItemMenu:function(S){return v.createElement(Fl,x({},S,{onToggleOperatorState:function(C){for(var T=C.newStatus,I=Ae([],l,!0),L=0,D=I;L<D.length;L++){var O=D[L];if(O.userId===g.userId){O.role=T?ri.OPERATOR:ri.NONE;break}}u(I)},onToggleMuteState:function(C){for(var T=C.newStatus,I=Ae([],l,!0),L=0,D=I;L<D.length;L++){var O=D[L];if(O.userId===g.userId){O.isMuted=T;break}}u(I)},onToggleBanState:function(){u(l.filter(function(C){var T=C.userId;return T!==g.userId}))}}))}}))}))))}function SK(e){var n=this,t,r,i,a=e.onCancel,s=e.onSubmit,o=e.renderUserListItem,l=o===void 0?function(F){return v.createElement(is,x({},F))}:o,u=N.useState([]),d=u[0],f=u[1],p=N.useState(null),m=p[0],E=p[1],g=N.useState({}),y=g[0],S=g[1],C=Tt(),T=(r=(t=C==null?void 0:C.stores)===null||t===void 0?void 0:t.sdkStore)===null||r===void 0?void 0:r.sdk,I=(i=C==null?void 0:C.config)===null||i===void 0?void 0:i.userListQuery,L=ji(),D=L.channel,O=L.overrideInviteUser,R=L.queries,k=Ft().stringSet,P=Pl({onReachedBottom:function(){return Wt(this,void 0,void 0,function(){var F;return Qt(this,function(z){switch(z.label){case 0:return m!=null&&m.hasNext?[4,m.next()]:[3,2];case 1:F=z.sent(),f(function(K){return Ae(Ae([],K,!0),F,!0)}),z.label=2;case 2:return[2]}})})}}),G=function(){return Wt(n,void 0,void 0,function(){var F;return Qt(this,function(z){switch(z.label){case 0:return F=Object.keys(y),D&&typeof O=="function"?(O({users:F,onClose:a,channel:D}),[3,3]):[3,1];case 1:return[4,D==null?void 0:D.inviteWithUserIds(F)];case 2:z.sent(),s(F),z.label=3;case 3:return[2]}})})},V=function(F){S(function(z){var K=Ty(z,[]);return K[F.userId]?delete K[F.userId]:K[F.userId]=F,K})},H=N.useMemo(function(){var F,z,K;return D!=null&&D.isSuper||D!=null&&D.isBroadcast?(F={},F[(K=(z=T.currentUser)===null||z===void 0?void 0:z.userId)!==null&&K!==void 0?K:""]=T.currentUser,F):D==null?void 0:D.members.reduce(function(ee,$){return ee[$.userId]=$,ee},{})},[D==null?void 0:D.members.length]);return N.useEffect(function(){var F=function(){return Wt(n,void 0,void 0,function(){var z,K,ee;return Qt(this,function($){switch($.label){case 0:return z=(ee=I==null?void 0:I())!==null&&ee!==void 0?ee:T==null?void 0:T.createApplicationUserListQuery(R==null?void 0:R.applicationUserListQuery),z?[4,z.next()]:[3,2];case 1:K=$.sent(),E(z),f(K),$.label=2;case 2:return[2]}})})};F()},[T]),v.createElement("div",null,v.createElement(Rr,{isFullScreenOnMobile:!0,disabled:Object.keys(y).length===0,submitText:k.BUTTON__INVITE,type:Gn.PRIMARY,onCancel:function(){return a()},onSubmit:G,titleText:k.CHANNEL_SETTING__MEMBERS__SELECT_TITLE},v.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:P},v.createElement("div",{className:"sendbird-more-members__popup-scroll__inner"},d.map(function(F){var z=!!(H&&H[F.userId]),K=!!y[F.userId];return v.createElement(v.Fragment,{key:F.userId},l({user:F,checkBox:!0,checked:z||K,disabled:z,onChange:function(){return V(F)}}))})))))}var hA=function(e){var n=e.renderUserListItem,t=n===void 0?function(D){return v.createElement(is,x({},D))}:n,r=e.memberListQueryParams,i=r===void 0?{}:r,a=N.useState([]),s=a[0],o=a[1],l=N.useState(!1),u=l[0],d=l[1],f=N.useState(!1),p=f[0],m=f[1],E=N.useState(!1),g=E[0],y=E[1],S=ji(),C=S.channel,T=S.forceUpdateUI,I=N.useContext(wn).stringSet,L=N.useCallback(function(){if(!C){o([]);return}var D=C==null?void 0:C.createMemberListQuery(x({limit:10},i));D.next().then(function(O){o(O),d(D.hasNext)})},[C==null?void 0:C.url,C==null?void 0:C.createMemberListQuery]);return N.useEffect(L,[C==null?void 0:C.url]),v.createElement("div",{className:"sendbird-channel-settings-member-list"},s.map(function(D,O){return v.createElement(v.Fragment,{key:D.userId},t({index:O,user:D,channel:C,size:"small",avatarSize:"24px",renderListItemMenu:function(R){return v.createElement(Fl,x({},R,{onToggleOperatorState:function(k){for(var P=k.newStatus,G=Ae([],s,!0),V=0,H=G;V<H.length;V++){var F=H[V];if(F.userId===D.userId){F.role=P?ri.OPERATOR:ri.NONE;break}}o(G)},onToggleMuteState:function(k){for(var P=k.newStatus,G=Ae([],s,!0),V=0,H=G;V<H.length;V++){var F=H[V];if(F.userId===D.userId){F.isMuted=P;break}}o(G)},onToggleBanState:function(){o(s.filter(function(k){var P=k.userId;return P!==D.userId}))}}))}}))}),v.createElement("div",{className:"sendbird-channel-settings-accordion__footer"},u&&v.createElement(Oi,{type:Gn.SECONDARY,size:va.SMALL,onClick:function(){return m(!0)}},I.CHANNEL_SETTING__MEMBERS__SEE_ALL_MEMBERS),v.createElement(Oi,{type:Gn.SECONDARY,size:va.SMALL,onClick:function(){return y(!0)}},I.CHANNEL_SETTING__MEMBERS__INVITE_MEMBER)),p&&v.createElement(bK,{onCancel:function(){m(!1),L(),T()},renderUserListItem:t,memberListQueryParams:i}),g&&v.createElement(SK,{onCancel:function(){return y(!1)},onSubmit:function(){y(!1),L(),T()},renderUserListItem:t}))},hg=function(){},iu={checked:null,defaultChecked:!1,disabled:!1,onChange:hg,onFocus:hg,onBlur:hg},C3=v.createContext(iu);function TK(){var e=v.useContext(C3);if(e===void 0)throw new Error("@sendbird/uikit-react/ui/Toggle: useToggleContext must be used within a ToggleContainer.");return e}function NK(e){var n=e.checked,t=n===void 0?iu.checked:n,r=e.defaultChecked,i=r===void 0?iu.defaultChecked:r,a=e.disabled,s=a===void 0?iu.disabled:a,o=e.onChange,l=o===void 0?iu.onChange:o,u=e.onFocus,d=u===void 0?iu.onFocus:u,f=e.onBlur,p=f===void 0?iu.onBlur:f,m=e.children,E=N.useState(i||!1),g=E[0],y=E[1],S=N.useCallback(function(C){s||(t===null&&y(C.currentTarget.checked),l(C))},[l,t]);return v.createElement(C3.Provider,{value:{checked:t!==null?t:g,disabled:s,onChange:S,onFocus:function(C){s||d(C)},onBlur:function(C){s||p(C)}}},m)}function IK(e){if(typeof e!="string"&&typeof e!="number"){try{var n=Tt().config,t=n.logger;t.warning("@sendbird/uikit-react/ui/Toggle: TypeError - expected string or number.",e)}catch{}return[]}if(typeof e=="number")return[e];var r=/(-?\d+)(\.\d+)?/g,i=e.match(r)||[];return i.map(parseFloat)}function MK(e){var n,t=e.reversed,r=t===void 0?!1:t,i=e.width,a=i===void 0?"40px":i,s=e.animationDuration,o=s===void 0?"0.5s":s,l=e.style,u=l===void 0?{}:l,d=e.name,f=d===void 0?"":d,p=e.id,m=p===void 0?"":p,E=e.ariaLabel,g=E===void 0?"":E,y=e.ariaLabelledby,S=y===void 0?"":y,C=TK(),T=C.checked,I=C.disabled,L=C.onChange,D=C.onFocus,O=C.onBlur,R=N.useState(""),k=R[0],P=R[1],G=(n=IK(a))===null||n===void 0?void 0:n[0],V=G/2,H=V*.6;return v.createElement("label",{className:["sendbird-input-toggle-button",k,T?"sendbird-input-toggle-button--checked":"sendbird-input-toggle-button--unchecked",I?"sendbird-input-toggle-button--disabled":[],r?"sendbird-input-toggle-button--reversed":[]].flat().join(" "),"data-testid":"sendbird-input-toggle-button",style:x({width:"".concat(G,"px"),height:"".concat(V,"px"),borderRadius:"".concat(H,"px")},u)},v.createElement("div",{className:["sendbird-input-toggle-button__inner-dot",T?"sendbird-input-toggle-button__inner-dot--activate":"sendbird-input-toggle-button__inner-dot--inactivate"].join(" "),style:{width:"".concat(H,"px"),height:"".concat(H,"px"),animationDuration:o}}),v.createElement("input",{type:"checkbox","aria-label":g,"aria-labelledby":S,name:f,id:m,checked:T??void 0,disabled:I,onChange:function(F){L==null||L(F),P(F.currentTarget.checked?"sendbird-input-toggle-button--turned-on":"sendbird-input-toggle-button--turned-off")},onFocus:D,onBlur:O}))}function AK(e){var n=e.checked,t=e.defaultChecked,r=e.disabled,i=e.onChange,a=e.onFocus,s=e.onBlur,o=e.className,l=e.reversed,u=e.width,d=e.animationDuration,f=e.style,p=e.name,m=e.id,E=e.ariaLabel,g=e.ariaLabelledby;return v.createElement("div",{className:"sendbird-ui-toggle ".concat(o)},v.createElement(NK,{checked:n,defaultChecked:t,disabled:r,onChange:i,onFocus:a,onBlur:s},v.createElement(MK,{reversed:l,width:u,animationDuration:d,style:f,name:p,id:m,ariaLabel:E,ariaLabelledby:g})))}var fA=function(e){return Math.abs(e)>999?"".concat((Math.abs(e)/1e3).toFixed(1),"K"):e},xc={fillColor:Ve.PRIMARY,width:24,height:24,className:"sendbird-channel-settings__accordion-icon"},Fc={type:Ce.SUBTITLE_1,color:de.ONBACKGROUND_1},wK=function(){var e=N.useState(!1),n=e[0],t=e[1],r=N.useContext(wn).stringSet,i=ji(),a=i.channel,s=i.renderUserListItem;return N.useEffect(function(){var o;t((o=a==null?void 0:a.isFrozen)!==null&&o!==void 0?o:!1)},[a==null?void 0:a.isFrozen]),N.useMemo(function(){return{operator:{operators:{icon:x(x({},xc),{type:Se.OPERATOR}),label:x(x({},Fc),{children:r.CHANNEL_SETTING__OPERATORS__TITLE}),accordionComponent:function(){return v.createElement(_K,{renderUserListItem:s})}},allUsers:{icon:x(x({},xc),{type:Se.MEMBERS}),label:x(x({},Fc),{children:r.CHANNEL_SETTING__MEMBERS__TITLE}),rightComponent:function(o){return v.createElement("div",{className:"sendbird-channel-settings__members"},v.createElement(py,{count:a!=null&&a.memberCount?fA(a.memberCount):""}),v.createElement(_y,x({},o)))},accordionComponent:function(){return v.createElement(hA,{renderUserListItem:s})}},mutedUsers:{icon:x(x({},xc),{type:Se.MUTE}),label:x(x({},Fc),{children:r.CHANNEL_SETTING__MUTED_MEMBERS__TITLE}),accordionComponent:function(){return v.createElement(CK,{renderUserListItem:s})}},bannedUsers:{icon:x(x({},xc),{type:Se.BAN}),label:x(x({},Fc),{children:r.CHANNEL_SETTING__BANNED_MEMBERS__TITLE}),accordionComponent:function(){return v.createElement(EK,{renderUserListItem:s})}},freezeChannel:{hideMenu:a==null?void 0:a.isBroadcast,icon:x(x({},xc),{type:Se.FREEZE}),label:x(x({},Fc),{children:r.CHANNEL_SETTING__FREEZE_CHANNEL}),rightComponent:function(){return v.createElement(AK,{className:"sendbird-channel-settings__frozen-icon",checked:n,onChange:function(){n?a==null||a.unfreeze().then(function(){t(function(o){return!o})}):a==null||a.freeze().then(function(){t(function(o){return!o})})}})}}},nonOperator:{allUsers:{icon:x(x({},xc),{type:Se.MEMBERS}),label:x(x({},Fc),{children:r.CHANNEL_SETTING__MEMBERS__TITLE}),rightComponent:function(o){return v.createElement("div",{className:"sendbird-channel-settings__members"},v.createElement(py,{count:a!=null&&a.memberCount?fA(a.memberCount):""}),v.createElement(_y,x({},o)))},accordionComponent:function(){return v.createElement(hA,{renderUserListItem:s})}}}}},[a==null?void 0:a.url,n])},RK=function(e){var n,t=ji(),r=t.channel,i=t.invalidChannel,a=t.onCloseClick,s=t.loading,o=Fo(e),l=o.renderHeader,u=l===void 0?function(R){return v.createElement(Jq,x({},R))}:l,d=o.renderLeaveChannel,f=o.renderChannelProfile,p=o.renderModerationPanel,m=p===void 0?function(R){return v.createElement(rK,x({},R))}:p,E=o.renderPlaceholderError,g=o.renderPlaceholderLoading,y=wK(),S=Tt(),C=N.useState(!1),T=C[0],I=C[1],L=(n=S==null?void 0:S.config)===null||n===void 0?void 0:n.isOnline,D=N.useContext(wn).stringSet;if(s)return g?g():v.createElement(Mr,{type:kn.LOADING});var O={onCloseClick:a};return i||!r?v.createElement("div",null,u(O),v.createElement("div",null,E?E():v.createElement(Mr,{type:kn.WRONG}))):v.createElement(v.Fragment,null,u(O),v.createElement("div",{className:"sendbird-channel-settings__scroll-area"},(f==null?void 0:f())||v.createElement(tK,null),m==null?void 0:m({menuItems:y}),(d==null?void 0:d())||v.createElement(E3,{className:Zt(L?"":"sendbird-channel-settings__panel-item__disabled","sendbird-channel-settings__panel-item__leave-channel"),onKeyDown:function(){L&&I(!0)},onClick:function(){L&&I(!0)},renderLeft:function(){return v.createElement(We,{className:["sendbird-channel-settings__panel-icon-left","sendbird-channel-settings__panel-icon__leave"].join(" "),type:Se.LEAVE,fillColor:Ve.ERROR,height:"24px",width:"24px"})},renderMiddle:function(){return v.createElement(Ie,{type:Ce.SUBTITLE_1,color:de.ONBACKGROUND_1},D.CHANNEL_SETTING__LEAVE_CHANNEL__TITLE)}}),T&&v.createElement(nK,{onCancel:function(){I(!1)},onSubmit:function(){I(!1),a==null||a()}})))},b3=function(e){return v.createElement(Zq,x({},e),v.createElement(RK,x({},e)))},S3="GET_SEARCHED_MESSAGES",T3="GET_NEXT_SEARCHED_MESSAGES",N3="START_MESSAGE_SEARCH",I3="START_GETTING_SEARCHED_MESSAGES",gy="SET_QUERY_INVALID",M3="SET_CURRENT_CHANNEL",A3="CHANNEL_INVALID",w3="RESET_SEARCH_STRING";function OK(e,n){switch(n.type){case M3:{var t=n.payload;return x(x({},e),{currentChannel:t,initialized:!0})}case A3:return x(x({},e),{currentChannel:null,initialized:!1});case S3:{var r=n.payload,i=r.messages,a=r.createdQuery;return a&&a.channelUrl===(e==null?void 0:e.currentMessageSearchQuery).channelUrl&&a.key===(e==null?void 0:e.currentMessageSearchQuery).key?x(x({},e),{loading:!1,isInvalid:!1,allMessages:Ae([],i,!0),hasMoreResult:(e==null?void 0:e.currentMessageSearchQuery).hasNext}):x({},e)}case gy:return x(x({},e),{isInvalid:!0});case N3:return x(x({},e),{isInvalid:!1,loading:!1});case I3:{var s=n.payload;return x(x({},e),{loading:!0,currentMessageSearchQuery:s})}case T3:{var i=n.payload;return x(x({},e),{allMessages:Ae(Ae([],e.allMessages,!0),i,!0),hasMoreResult:(e==null?void 0:e.currentMessageSearchQuery).hasNext})}case w3:return x(x({},e),{allMessages:[]});default:return e}}var DK={allMessages:[],loading:!1,isInvalid:!1,initialized:!1,currentChannel:null,currentMessageSearchQuery:null,hasMoreResult:!1};function LK(e,n){var t=e.channelUrl,r=e.sdkInit,i=n.sdk,a=n.logger,s=n.messageSearchDispatcher;N.useEffect(function(){t&&r&&(i!=null&&i.groupChannel)&&i.groupChannel.getChannel(t).then(function(o){a.info("MessageSearch | useSetChannel group channel",o),s({type:M3,payload:o})}).catch(function(){s({type:A3,payload:null})})},[t,r])}var Ey;(function(e){e.SCORE="score",e.TIMESTAMP="ts"})(Ey||(Ey={}));function UK(e,n){var t=e.currentChannel,r=e.channelUrl,i=e.requestString,a=e.messageSearchQuery,s=e.onResultLoaded,o=e.retryCount,l=n.sdk,u=n.logger,d=n.messageSearchDispatcher;N.useEffect(function(){d({type:N3,payload:null}),l&&r&&l.createMessageSearchQuery&&t&&(i?t.refresh().then(function(f){var p=x({order:Ey.TIMESTAMP,channelUrl:r,messageTimestampFrom:f.invitedAt,keyword:i},a),m=l.createMessageSearchQuery(p);m.next().then(function(E){u.info("MessageSearch | useGetSearchedMessages: succeeded getting messages",E),d({type:S3,payload:{messages:E,createdQuery:m}}),s&&typeof s=="function"&&s(E,void 0)}).catch(function(E){u.warning("MessageSearch | useGetSearchedMessages: failed getting search messages.",E),d({type:gy,payload:null}),s&&typeof s=="function"&&s(void 0,E)}),d({type:I3,payload:m})}).catch(function(f){u.warning("MessageSearch | useGetSearchedMessages: failed getting channel.",f),d({type:gy,payload:null}),s&&typeof s=="function"&&s(void 0,f)}):u.info("MessageSearch | useGetSeasrchedMessages: search string is empty"))},[r,a,i,t,o])}function kK(e,n){var t=e.currentMessageSearchQuery,r=e.hasMoreResult,i=e.onResultLoaded,a=n.logger,s=n.messageSearchDispatcher;return N.useCallback(function(o){r||a.warning("MessageSearch | useScrollCallback: no more searched results",r),t&&t.hasNext?t.next().then(function(l){a.info("MessageSearch | useScrollCallback: succeeded getting searched messages",l),s({type:T3,payload:l}),o(l,null),i&&typeof i=="function"&&i(l,null)}).catch(function(l){a.warning("MessageSearch | useScrollCallback: failed getting searched messages",l),o(null,l),i&&typeof i=="function"&&i(null,l)}):a.warning("MessageSearch | useScrollCallback: no currentMessageSearchQuery")},[t,r])}var PK=500;function xK(e,n){var t=e.searchString,r=n.messageSearchDispatcher,i=N.useState(""),a=i[0],s=i[1],o=N.useState(null),l=o[0],u=o[1];return N.useEffect(function(){clearTimeout(l??void 0),t?u(setTimeout(function(){s(t)},PK)):(s(""),r({type:w3,payload:""}))},[t]),a}var R3=v.createContext(null),FK=function(e){var n,t,r,i,a,s=e.channelUrl,o=e.searchString,l=e.messageSearchQuery,u=e.onResultLoaded,d=e.onResultClick,f=Tt(),p=N.useState(0),m=p[0],E=p[1],g=N.useState(0),y=g[0],S=g[1],C=N.useReducer(OK,DK),T=C[0],I=C[1],L=T.allMessages,D=T.loading,O=T.isInvalid,R=T.currentChannel,k=T.currentMessageSearchQuery,P=T.hasMoreResult,G=(n=f==null?void 0:f.config)===null||n===void 0?void 0:n.logger,V=(r=(t=f==null?void 0:f.stores)===null||t===void 0?void 0:t.sdkStore)===null||r===void 0?void 0:r.sdk,H=(a=(i=f==null?void 0:f.stores)===null||i===void 0?void 0:i.sdkStore)===null||a===void 0?void 0:a.initialized,F=N.useRef(null),z=function(Q){var ne=Q.target,j=ne.scrollTop,Z=ne.scrollHeight,ie=ne.clientHeight;P&&j+ie>=Z&&ee(function(){})};LK({channelUrl:s,sdkInit:H},{sdk:V,logger:G,messageSearchDispatcher:I});var K=xK({searchString:o??""},{messageSearchDispatcher:I});UK({currentChannel:R,channelUrl:s,requestString:K,messageSearchQuery:l,onResultLoaded:u,retryCount:m},{sdk:V,logger:G,messageSearchDispatcher:I});var ee=kK({currentMessageSearchQuery:k,hasMoreResult:P,onResultLoaded:u},{logger:G,messageSearchDispatcher:I}),$=function(){E(m+1)};return v.createElement(R3.Provider,{value:{channelUrl:s,searchString:o,requestString:K,messageSearchQuery:l,onResultLoaded:u,onResultClick:d,retryCount:m,setRetryCount:E,selectedMessageId:y,setSelectedMessageId:S,messageSearchDispatcher:I,allMessages:L,loading:D,isInvalid:O,currentChannel:R,currentMessageSearchQuery:k,hasMoreResult:P,onScroll:ee,scrollRef:F,handleRetryToConnect:$,handleOnScroll:z}},e==null?void 0:e.children)},HK=function(){var e=v.useContext(R3);if(!e)throw new Error("MessageSearchContext not found. Use within the MessageSearch module.");return e};function BK(e){var n=e.createdAt,t=e.locale,r=e.stringSet,i={locale:t};return n?hC(n)?wr(n,r.DATE_FORMAT__LAST_MESSAGE_CREATED_AT__TODAY,i):vC(n)?r.MESSAGE_STATUS__YESTERDAY:fC(n)?wr(n,r.DATE_FORMAT__LAST_MESSAGE_CREATED_AT__THIS_YEAR,i):wr(n,r.DATE_FORMAT__LAST_MESSAGE_CREATED_AT__PREVIOUS_YEAR,i):""}function GK(e){var n=e.className,t=e.message,r=e.selected,i=e.onClick,a=t.createdAt,s=t.message,o=t.sender||t._sender,l=o.profileUrl,u=o.nickname,d=Ft(),f=d.stringSet,p=d.dateLocale;return v.createElement("div",{className:Ae(Ae([],Array.isArray(n)?n:[n],!0),["sendbird-message-search-item",r?"sendbird-message-search-item--selected":""],!1).join(" "),onClick:function(m){m.stopPropagation(),i==null||i(t)}},v.createElement("div",{className:"sendbird-message-search-item__left"},v.createElement(Fr,{className:"sendbird-message-search-item__left__sender-avatar",src:l,alt:"profile image",width:"56px",height:"56px"})),v.createElement("div",{className:"sendbird-message-search-item__right"},v.createElement(Ie,{className:"sendbird-message-search-item__right__sender-name",type:Ce.SUBTITLE_2,color:de.ONBACKGROUND_1},u||f.NO_NAME),v.createElement(Ie,{className:"sendbird-message-search-item__right__message-text",type:Ce.BODY_2,color:de.ONBACKGROUND_3},s),v.createElement(Ie,{className:"sendbird-message-search-item__right__message-created-at",type:Ce.CAPTION_3,color:de.ONBACKGROUND_2},BK({createdAt:a,locale:p,stringSet:f}))),v.createElement("div",{className:"sendbird-message-search-item__right-footer"}))}function VK(e){var n=e.createdAt,t=e.locale,r=e.stringSet,i={locale:t};return n?hC(n)?wr(n,r.DATE_FORMAT__LAST_MESSAGE_CREATED_AT__TODAY,i):vC(n)?r.MESSAGE_STATUS__YESTERDAY:fC(n)?wr(n,r.DATE_FORMAT__LAST_MESSAGE_CREATED_AT__THIS_YEAR,i):wr(n,r.DATE_FORMAT__LAST_MESSAGE_CREATED_AT__PREVIOUS_YEAR,i):""}function zK(e){var n,t,r,i=(n=ad(e))!==null&&n!==void 0?n:"",a=(r=(t=i.match(/\.([^.]*?)(?=\?|#|$)/))===null||t===void 0?void 0:t[1])!==null&&r!==void 0?r:"";return/(jpg|jpeg|png)$/i.test(a)?Se.PHOTO:/mp4$/i.test(a)||Fa(e)?Se.PLAY:/mp3/i.test(a)?Se.FILE_AUDIO:/gif/i.test(a)?Se.GIF:Se.FILE_DOCUMENT}function jK(e){var n=e.className,t=e.message,r=e.selected,i=e.onClick,a=t.createdAt,s=ad(t),o=yC(t),l=t.sender||t._sender,u=l.profileUrl,d=l.nickname,f=Ft(),p=f.stringSet,m=f.dateLocale,E=Fa(t),g=E?p.VOICE_MESSAGE:o||s;return v.createElement("div",{className:Ae(Ae([],Array.isArray(n)?n:[n],!0),["sendbird-message-search-file-item",r?"sendbird-message-search-file-item--selected":""],!1).join(" "),onClick:function(y){y.stopPropagation(),i==null||i(t)}},v.createElement("div",{className:"sendbird-message-search-file-item__left"},v.createElement(Fr,{className:"sendbird-message-search-file-item__left__sender-avatar",src:u,alt:"profile image",width:"56px",height:"56px"})),v.createElement("div",{className:"sendbird-message-search-file-item__right"},v.createElement(Ie,{className:"sendbird-message-search-file-item__right__sender-name",type:Ce.SUBTITLE_2,color:de.ONBACKGROUND_1},d||p.NO_NAME),v.createElement("div",{className:"sendbird-message-search-file-item__right__content"},!E&&v.createElement("div",{className:"sendbird-message-search-file-item__right__content__type-icon"},v.createElement(We,{type:zK(t),fillColor:Ve.PRIMARY,width:"18px",height:"18px"})),v.createElement(Ie,{className:"sendbird-message-search-file-item__right__content__url",type:Ce.BODY_2,color:de.ONBACKGROUND_1},g))),v.createElement(Ie,{className:"sendbird-message-search-file-item__message-created-at",type:Ce.CAPTION_3,color:de.ONBACKGROUND_2},VK({createdAt:a,locale:m,stringSet:p})),v.createElement("div",{className:"sendbird-message-search-file-item__right-footer"}))}var qK=function(e){var n=e.renderPlaceHolderError,t=e.renderPlaceHolderLoading,r=e.renderPlaceHolderNoString,i=e.renderPlaceHolderEmptyList,a=e.renderSearchItem,s=HK(),o=s.isInvalid,l=s.searchString,u=s.requestString,d=s.currentChannel,f=s.retryCount,p=s.setRetryCount,m=s.loading,E=s.scrollRef,g=s.hasMoreResult,y=s.onScroll,S=s.allMessages,C=s.onResultClick,T=s.selectedMessageId,I=s.setSelectedMessageId,L=N.useContext(wn).stringSet,D=function(){p(f+1)},O=function(k){var P=k.target,G=P.scrollTop,V=P.scrollHeight,H=P.clientHeight;g&&G+H>=V-1&&y(function(){})},R=function(){return d&&(d!=null&&d.name)&&(d==null?void 0:d.name)!=="Group Channel"?d==null?void 0:d.name:d&&((d==null?void 0:d.name)==="Group Channel"||!(d!=null&&d.name))?d.members.map(function(k){return k.nickname||L.NO_NAME}).join(", "):L.NO_TITLE};return o&&l&&u?(n==null?void 0:n())||v.createElement("div",{className:"sendbird-message-search"},v.createElement(Mr,{type:kn.WRONG,retryToConnect:D})):m&&l&&u?(t==null?void 0:t())||v.createElement("div",{className:"sendbird-message-search"},v.createElement(Mr,{type:kn.SEARCHING})):l?v.createElement("div",{className:"sendbird-message-search",onScroll:O,ref:E},S.length>0?S.map(function(k){return a?a({message:k,onResultClick:C}):k.messageType==="file"?v.createElement(jK,{className:"sendbird-message-search__message-search-item",message:k,key:k.messageId,selected:T===k.messageId,onClick:function(){C==null||C(k),I(k.messageId)}}):v.createElement(GK,{className:"sendbird-message-search__message-search-item",message:k,key:k.messageId,selected:T===k.messageId,onClick:function(){C==null||C(k),I(k.messageId)}})}):(i==null?void 0:i())||v.createElement(Mr,{type:kn.NO_RESULTS})):(r==null?void 0:r())||v.createElement("div",{className:"sendbird-message-search"},v.createElement(Mr,{type:kn.SEARCH_IN,searchInString:R()}))};function O3(e){var n=e.channelUrl,t=e.onResultClick,r=e.onCloseClick,i=e.messageSearchQuery,a=e.renderPlaceHolderError,s=e.renderPlaceHolderLoading,o=e.renderPlaceHolderNoString,l=e.renderPlaceHolderEmptyList,u=e.renderSearchItem,d=N.useState(""),f=d[0],p=d[1],m=N.useState(""),E=m[0],g=m[1],y=N.useState(!1),S=y[0],C=y[1],T=N.useContext(wn).stringSet,I=null;N.useEffect(function(){I&&clearTimeout(I),I=setTimeout(function(){p(E),C(!0),I=null},500)},[E]);var L=function(R){g(R.target.value)},D=function(){C(!1)},O=function(R){R.stopPropagation(),g(""),p("")};return v.createElement("div",{className:"sendbird-message-search-pannel"},v.createElement(fi,{className:"sendbird-message-search-pannel__header",renderMiddle:function(){return v.createElement(fi.Title,{title:T.SEARCH_IN_CHANNEL})},renderRight:function(){return v.createElement(fi.IconButton,{className:"sendbird-message-search-pannel__header__close-button",onClick:r,type:Se.CLOSE,color:Ve.ON_BACKGROUND_1})}}),v.createElement("div",{className:"sendbird-message-search-pannel__input"},v.createElement("div",{className:"sendbird-message-search-pannel__input__container"},v.createElement(We,{className:"sendbird-message-search-pannel__input__container__search-icon",type:Se.SEARCH,fillColor:Ve.ON_BACKGROUND_3,width:"24px",height:"24px"}),v.createElement("input",{className:"sendbird-message-search-pannel__input__container__input-area",placeholder:T.SEARCH,value:E,onChange:L}),E&&S&&v.createElement(Ho,{className:"sendbird-message-search-pannel__input__container__spinner",width:"20px",height:"20px"},v.createElement(We,{type:Se.SPINNER,fillColor:Ve.PRIMARY,width:"20px",height:"20px"})),!S&&E&&v.createElement(We,{className:"sendbird-message-search-pannel__input__container__reset-input-button",type:Se.REMOVE,fillColor:Ve.ON_BACKGROUND_3,width:"20px",height:"20px",onClick:O}))),v.createElement("div",{className:"sendbird-message-search-pannel__message-search"},v.createElement(FK,{channelUrl:n,searchString:f,onResultClick:t,onResultLoaded:D,messageSearchQuery:i},v.createElement(qK,{renderPlaceHolderError:a,renderPlaceHolderLoading:s,renderPlaceHolderNoString:o,renderPlaceHolderEmptyList:l,renderSearchItem:u}))))}var pl;(function(e){e.NIL="NIL",e.LOADING="LOADING",e.INVALID="INVALID",e.INITIALIZED="INITIALIZED"})(pl||(pl={}));var Bi;(function(e){e.NIL="NIL",e.LOADING="LOADING",e.INVALID="INVALID",e.INITIALIZED="INITIALIZED"})(Bi||(Bi={}));var Mi;(function(e){e.NIL="NIL",e.LOADING="LOADING",e.INVALID="INVALID",e.INITIALIZED="INITIALIZED"})(Mi||(Mi={}));var yy=30,Cy=30,ct;(function(e){e.INIT_USER_ID="INIT_USER_ID",e.GET_CHANNEL_START="GET_CHANNEL_START",e.GET_CHANNEL_SUCCESS="GET_CHANNEL_SUCCESS",e.GET_CHANNEL_FAILURE="GET_CHANNEL_FAILURE",e.SET_EMOJI_CONTAINER="SET_EMOJI_CONTAINER",e.GET_PARENT_MESSAGE_START="GET_PARENT_MESSAGE_START",e.GET_PARENT_MESSAGE_SUCCESS="GET_PARENT_MESSAGE_SUCCESS",e.GET_PARENT_MESSAGE_FAILURE="GET_PARENT_MESSAGE_FAILURE",e.INITIALIZE_THREAD_LIST_START="INITIALIZE_THREAD_LIST_START",e.INITIALIZE_THREAD_LIST_SUCCESS="INITIALIZE_THREAD_LIST_SUCCESS",e.INITIALIZE_THREAD_LIST_FAILURE="INITIALIZE_THREAD_LIST_FAILURE",e.GET_PREV_MESSAGES_START="GET_PREV_MESSAGES_START",e.GET_PREV_MESSAGES_SUCESS="GET_PREV_MESSAGES_SUCESS",e.GET_PREV_MESSAGES_FAILURE="GET_PREV_MESSAGES_FAILURE",e.GET_NEXT_MESSAGES_START="GET_NEXT_MESSAGES_START",e.GET_NEXT_MESSAGES_SUCESS="GET_NEXT_MESSAGES_SUCESS",e.GET_NEXT_MESSAGES_FAILURE="GET_NEXT_MESSAGES_FAILURE",e.SEND_MESSAGE_START="SEND_MESSAGE_START",e.SEND_MESSAGE_SUCESS="SEND_MESSAGE_SUCESS",e.SEND_MESSAGE_FAILURE="SEND_MESSAGE_FAILURE",e.RESEND_MESSAGE_START="RESEND_MESSAGE_START",e.ON_MESSAGE_DELETED_BY_REQ_ID="ON_MESSAGE_DELETED_BY_REQ_ID",e.ON_MESSAGE_RECEIVED="ON_MESSAGE_RECEIVED",e.ON_MESSAGE_UPDATED="ON_MESSAGE_UPDATED",e.ON_MESSAGE_DELETED="ON_MESSAGE_DELETED",e.ON_REACTION_UPDATED="ON_REACTION_UPDATED",e.ON_FILE_INFO_UPLOADED="ON_FILE_INFO_UPLOADED",e.ON_USER_MUTED="ON_USER_MUTED",e.ON_USER_UNMUTED="ON_USER_UNMUTED",e.ON_USER_BANNED="ON_USER_BANNED",e.ON_USER_UNBANNED="ON_USER_UNBANNED",e.ON_USER_LEFT="ON_USER_LEFT",e.ON_CHANNEL_FROZEN="ON_CHANNEL_FROZEN",e.ON_CHANNEL_UNFROZEN="ON_CHANNEL_UNFROZEN",e.ON_OPERATOR_UPDATED="ON_OPERATOR_UPDATED",e.ON_TYPING_STATUS_UPDATED="ON_TYPING_STATUS_UPDATED"})(ct||(ct={}));function KK(e,n){var t,r,i,a,s,o,l,u,d,f,p,m,E,g,y,S,C,T,I,L,D,O,R;switch(n.type){case ct.INIT_USER_ID:return x(x({},e),{currentUserId:n.payload});case ct.GET_CHANNEL_START:return x(x({},e),{channelState:pl.LOADING,currentChannel:null});case ct.GET_CHANNEL_SUCCESS:{var k=n.payload.groupChannel;return x(x({},e),{channelState:pl.INITIALIZED,currentChannel:k,isMuted:((r=(t=k==null?void 0:k.members)===null||t===void 0?void 0:t.find(function(Be){return(Be==null?void 0:Be.userId)===e.currentUserId}))===null||r===void 0?void 0:r.isMuted)||!1,isChannelFrozen:(k==null?void 0:k.isFrozen)||!1})}case ct.GET_CHANNEL_FAILURE:return x(x({},e),{channelState:pl.INVALID,currentChannel:null});case ct.SET_EMOJI_CONTAINER:{var P=n.payload.emojiContainer;return x(x({},e),{emojiContainer:P})}case ct.GET_PARENT_MESSAGE_START:return x(x({},e),{parentMessageState:Bi.LOADING,parentMessage:null});case ct.GET_PARENT_MESSAGE_SUCCESS:return x(x({},e),{parentMessageState:Bi.INITIALIZED,parentMessage:n.payload.parentMessage});case ct.GET_PARENT_MESSAGE_FAILURE:return x(x({},e),{parentMessageState:Bi.INVALID,parentMessage:null});case ct.INITIALIZE_THREAD_LIST_START:return x(x({},e),{threadListState:Mi.LOADING,allThreadMessages:[]});case ct.INITIALIZE_THREAD_LIST_SUCCESS:{var G=n.payload,V=G.parentMessage,H=G.anchorMessage,F=G.threadedMessages,z=H!=null&&H.messageId?H==null?void 0:H.createdAt:V==null?void 0:V.createdAt,K=F.findIndex(function(Be){return(Be==null?void 0:Be.createdAt)>z}),ee=K>-1?F.slice(0,K):F,$=H!=null&&H.messageId?[H]:[],Q=K>-1?F.slice(K):[];return x(x({},e),{threadListState:Mi.INITIALIZED,hasMorePrev:K===-1||K===yy,hasMoreNext:F.length-K===Cy,allThreadMessages:[ee,$,Q].flat()})}case ct.INITIALIZE_THREAD_LIST_FAILURE:return x(x({},e),{threadListState:Mi.INVALID,allThreadMessages:[]});case ct.GET_NEXT_MESSAGES_START:return x({},e);case ct.GET_NEXT_MESSAGES_SUCESS:{var F=n.payload.threadedMessages;return x(x({},e),{hasMoreNext:F.length===Cy,allThreadMessages:Ae(Ae([],e.allThreadMessages,!0),F,!0)})}case ct.GET_NEXT_MESSAGES_FAILURE:return x(x({},e),{hasMoreNext:!1});case ct.GET_PREV_MESSAGES_START:return x({},e);case ct.GET_PREV_MESSAGES_SUCESS:{var F=n.payload.threadedMessages;return x(x({},e),{hasMorePrev:F.length===yy,allThreadMessages:Ae(Ae([],F,!0),e.allThreadMessages,!0)})}case ct.GET_PREV_MESSAGES_FAILURE:return x(x({},e),{hasMorePrev:!1});case ct.ON_MESSAGE_RECEIVED:{var ne=n.payload,j=ne.channel,Z=ne.message;if(((i=e.currentChannel)===null||i===void 0?void 0:i.url)!==(j==null?void 0:j.url)||e.hasMoreNext||((a=Z==null?void 0:Z.parentMessage)===null||a===void 0?void 0:a.messageId)!==((s=e==null?void 0:e.parentMessage)===null||s===void 0?void 0:s.messageId))return e;var ie=e.allThreadMessages.findIndex(function(Be){return Be.messageId===Z.messageId})>-1;return x(x({},e),{parentMessage:((o=e.parentMessage)===null||o===void 0?void 0:o.messageId)===(Z==null?void 0:Z.messageId)?Z:e.parentMessage,allThreadMessages:ie?e.allThreadMessages.map(function(Be){return Be.messageId===Z.messageId?Z:Be}):Ae(Ae([],e.allThreadMessages.filter(function(Be){return(Be==null?void 0:Be.reqId)!==(Z==null?void 0:Z.reqId)}),!0),[Z],!1)})}case ct.ON_MESSAGE_UPDATED:{var fe=n.payload,j=fe.channel,te=fe.message;return((l=e.currentChannel)===null||l===void 0?void 0:l.url)!==(j==null?void 0:j.url)?e:x(x({},e),{parentMessage:((u=e.parentMessage)===null||u===void 0?void 0:u.messageId)===(te==null?void 0:te.messageId)?te:e.parentMessage,allThreadMessages:(d=e.allThreadMessages)===null||d===void 0?void 0:d.map(function(nt){return(nt==null?void 0:nt.messageId)===(te==null?void 0:te.messageId)?te:nt})})}case ct.ON_MESSAGE_DELETED:{var le=n.payload,j=le.channel,Me=le.messageId;return((f=e.currentChannel)===null||f===void 0?void 0:f.url)!==(j==null?void 0:j.url)?e:((p=e==null?void 0:e.parentMessage)===null||p===void 0?void 0:p.messageId)===Me?x(x({},e),{parentMessage:null,parentMessageState:Bi.NIL,allThreadMessages:[]}):x(x({},e),{allThreadMessages:(m=e.allThreadMessages)===null||m===void 0?void 0:m.filter(function(nt){return(nt==null?void 0:nt.messageId)!==Me}),localThreadMessages:(E=e.localThreadMessages)===null||E===void 0?void 0:E.filter(function(nt){return(nt==null?void 0:nt.messageId)!==Me})})}case ct.ON_MESSAGE_DELETED_BY_REQ_ID:return x(x({},e),{localThreadMessages:e.localThreadMessages.filter(function(Be){return!cl(Be.reqId,n.payload)})});case ct.ON_REACTION_UPDATED:{var ae=(g=n.payload)===null||g===void 0?void 0:g.reactionEvent;return((y=e==null?void 0:e.parentMessage)===null||y===void 0?void 0:y.messageId)===(ae==null?void 0:ae.messageId)&&((C=(S=e.parentMessage)===null||S===void 0?void 0:S.applyReactionEvent)===null||C===void 0||C.call(S,ae)),x(x({},e),{allThreadMessages:e.allThreadMessages.map(function(Be){var nt;return(ae==null?void 0:ae.messageId)===(Be==null?void 0:Be.messageId)&&((nt=Be==null?void 0:Be.applyReactionEvent)===null||nt===void 0||nt.call(Be,ae)),Be})})}case ct.ON_USER_MUTED:{var he=n.payload,j=he.channel,pe=he.user;return((T=e.currentChannel)===null||T===void 0?void 0:T.url)!==(j==null?void 0:j.url)||e.currentUserId!==(pe==null?void 0:pe.userId)?e:x(x({},e),{isMuted:!0})}case ct.ON_USER_UNMUTED:{var Ne=n.payload,j=Ne.channel,pe=Ne.user;return((I=e.currentChannel)===null||I===void 0?void 0:I.url)!==(j==null?void 0:j.url)||e.currentUserId!==(pe==null?void 0:pe.userId)?e:x(x({},e),{isMuted:!1})}case ct.ON_USER_BANNED:return x(x({},e),{channelState:pl.NIL,threadListState:Mi.NIL,parentMessageState:Bi.NIL,currentChannel:null,parentMessage:null,allThreadMessages:[],hasMorePrev:!1,hasMoreNext:!1});case ct.ON_USER_UNBANNED:return x({},e);case ct.ON_USER_LEFT:return x(x({},e),{channelState:pl.NIL,threadListState:Mi.NIL,parentMessageState:Bi.NIL,currentChannel:null,parentMessage:null,allThreadMessages:[],hasMorePrev:!1,hasMoreNext:!1});case ct.ON_CHANNEL_FROZEN:return x(x({},e),{isChannelFrozen:!0});case ct.ON_CHANNEL_UNFROZEN:return x(x({},e),{isChannelFrozen:!1});case ct.ON_OPERATOR_UPDATED:{var j=n.payload.channel;return(j==null?void 0:j.url)===((L=e.currentChannel)===null||L===void 0?void 0:L.url)?x(x({},e),{currentChannel:j}):e}case ct.SEND_MESSAGE_START:{var _e=n.payload.message;return x(x({},e),{localThreadMessages:Ae(Ae([],e.localThreadMessages,!0),[_e],!1)})}case ct.SEND_MESSAGE_SUCESS:{var ge=n.payload.message;return x(x({},e),{allThreadMessages:Ae(Ae([],e.allThreadMessages.filter(function(Be){return!cl(Be==null?void 0:Be.reqId,ge==null?void 0:ge.reqId)}),!0),[ge],!1),localThreadMessages:e.localThreadMessages.filter(function(Be){return!cl(Be==null?void 0:Be.reqId,ge==null?void 0:ge.reqId)})})}case ct.SEND_MESSAGE_FAILURE:{var me=n.payload.message;return x(x({},e),{localThreadMessages:e.localThreadMessages.map(function(Be){return cl(Be==null?void 0:Be.reqId,me==null?void 0:me.reqId)?me:Be})})}case ct.RESEND_MESSAGE_START:{var Le=n.payload.message;return x(x({},e),{localThreadMessages:e.localThreadMessages.map(function(Be){return cl(Be==null?void 0:Be.reqId,Le==null?void 0:Le.reqId)?Le:Be})})}case ct.ON_FILE_INFO_UPLOADED:{var Qe=n.payload,Pe=Qe.channelUrl,Ge=Qe.requestId,De=Qe.index,tt=Qe.uploadableFileInfo,Ue=Qe.error;if(!cl(Pe,(D=e.currentChannel)===null||D===void 0?void 0:D.url)||Ue)return e;var Ye=e.localThreadMessages,yt=Ye.find(function(Be){return cl($K(Be)&&Be.reqId,Ge)}),Nt=(O=yt.messageParams)===null||O===void 0?void 0:O.fileInfoList;return Array.isArray(Nt)&&(Nt[De]=tt),x(x({},e),{localThreadMessages:Ye})}case ct.ON_TYPING_STATUS_UPDATED:{var Rt=n.payload,j=Rt.channel,st=Rt.typingMembers;return cl(j.url,(R=e.currentChannel)===null||R===void 0?void 0:R.url)?x(x({},e),{typingMembers:st}):e}default:return e}}function $K(e){return"reqId"in e}var WK={currentChannel:null,allThreadMessages:[],localThreadMessages:[],parentMessage:null,channelState:pl.NIL,parentMessageState:Bi.NIL,threadListState:Mi.NIL,hasMorePrev:!1,hasMoreNext:!1,emojiContainer:{},isMuted:!1,isChannelFrozen:!1,currentUserId:"",typingMembers:[]};function QK(e,n){var t=e.channelUrl,r=e.sdkInit,i=e.message,a=n.sdk,s=n.logger,o=n.threadDispatcher;N.useEffect(function(){var l,u;r&&t&&(a!=null&&a.groupChannel)&&(o({type:ct.GET_CHANNEL_START,payload:null}),(u=(l=a.groupChannel).getChannel)===null||u===void 0||u.call(l,t).then(function(d){s.info("Thread | useInitialize: Get channel succeeded",d),o({type:ct.GET_CHANNEL_SUCCESS,payload:{groupChannel:d}})}).catch(function(d){s.info("Thread | useInitialize: Get channel failed",d),o({type:ct.GET_CHANNEL_FAILURE,payload:d})}))},[i,r])}function YK(e,n){var t=e.sdk,r=n.logger,i=n.threadDispatcher;N.useEffect(function(){t!=null&&t.getAllEmoji&&(t==null||t.getAllEmoji().then(function(a){r.info("Thread | useGetAllEmoji: Getting emojis succeeded.",a),i({type:ct.SET_EMOJI_CONTAINER,payload:{emojiContainer:a}})}).catch(function(a){r.info("Thread | useGetAllEmoji: Getting emojis failed.",a)}))},[t])}function XK(e,n){var t=e.channelUrl,r=e.sdkInit,i=e.parentMessage,a=n.sdk,s=n.logger,o=n.threadDispatcher;N.useEffect(function(){var l,u,d;if(r&&(!((l=a==null?void 0:a.message)===null||l===void 0)&&l.getMessage)&&i){o({type:ct.GET_PARENT_MESSAGE_START,payload:null});var f={channelUrl:t,channelType:cn.GROUP,messageId:i.messageId,includeMetaArray:!0,includeReactions:!0,includeThreadInfo:!0,includeParentMessageInfo:!0};s.info("Thread | useGetParentMessage: Get parent message start.",f),(d=(u=a.message).getMessage)===null||d===void 0||d.call(u,f).then(function(p){s.info("Thread | useGetParentMessage: Get parent message succeeded.",i),p.ogMetaData=(i==null?void 0:i.ogMetaData)||null,o({type:ct.GET_PARENT_MESSAGE_SUCCESS,payload:{parentMessage:p}})}).catch(function(p){s.info("Thread | useGetParentMessage: Get parent message failed.",p),o({type:ct.GET_PARENT_MESSAGE_FAILURE,payload:p})})}},[r,i==null?void 0:i.messageId])}function ZK(e,n){var t=e.sdkInit,r=e.currentChannel,i=e.parentMessage,a=n.pubSub,s=n.threadDispatcher;N.useEffect(function(){var o=new Map;return a!=null&&a.subscribe&&(o.set(Fn.SEND_MESSAGE_START,a.subscribe(Fn.SEND_MESSAGE_START,function(l){var u,d,f=l.channel,p=l.message,m=l.publishingModules;if((r==null?void 0:r.url)===(f==null?void 0:f.url)&&(p==null?void 0:p.parentMessageId)===(i==null?void 0:i.messageId)&&Eh(m)){var E=x({},p);p.isMultipleFilesMessage()&&(E.fileInfoList=(d=(u=p==null?void 0:p.messageParams)===null||u===void 0?void 0:u.fileInfoList.map(function(g){return x(x({},g),{url:URL.createObjectURL(g.file)})}))!==null&&d!==void 0?d:[]),s({type:ct.SEND_MESSAGE_START,payload:{message:E}})}Ma==null||Ma()})),o.set(ei.ON_FILE_INFO_UPLOADED,a.subscribe(ei.ON_FILE_INFO_UPLOADED,function(l){var u=l.response,d=l.publishingModules;(r==null?void 0:r.url)===u.channelUrl&&Eh(d)&&s({type:Nm,payload:u})})),o.set(Fn.SEND_USER_MESSAGE,a.subscribe(Fn.SEND_USER_MESSAGE,function(l){var u=l,d=u.channel,f=u.message;(r==null?void 0:r.url)===(d==null?void 0:d.url)&&(f==null?void 0:f.parentMessageId)===(i==null?void 0:i.messageId)&&s({type:ct.SEND_MESSAGE_SUCESS,payload:{message:f}}),Ma==null||Ma()})),o.set(Fn.SEND_MESSAGE_FAILED,a.subscribe(Fn.SEND_MESSAGE_FAILED,function(l){var u=l.channel,d=l.message,f=l.publishingModules;(r==null?void 0:r.url)===(u==null?void 0:u.url)&&(d==null?void 0:d.parentMessageId)===(i==null?void 0:i.messageId)&&Eh(f)&&s({type:ct.SEND_MESSAGE_FAILURE,payload:{message:d}})})),o.set(Fn.SEND_FILE_MESSAGE,a.subscribe(Fn.SEND_FILE_MESSAGE,function(l){var u=l.channel,d=l.message,f=l.publishingModules;(r==null?void 0:r.url)===(u==null?void 0:u.url)&&Eh(f)&&s({type:ct.SEND_MESSAGE_SUCESS,payload:{message:d}}),Ma==null||Ma()})),o.set(Fn.UPDATE_USER_MESSAGE,a.subscribe(Fn.UPDATE_USER_MESSAGE,function(l){var u=l,d=u.channel,f=u.message;(r==null?void 0:r.url)===(d==null?void 0:d.url)&&s({type:ct.ON_MESSAGE_UPDATED,payload:{channel:d,message:f}})})),o.set(Fn.DELETE_MESSAGE,a.subscribe(Fn.DELETE_MESSAGE,function(l){var u=l,d=u.channel,f=u.messageId;(r==null?void 0:r.url)===(d==null?void 0:d.url)&&s({type:ct.ON_MESSAGE_DELETED,payload:{messageId:f}})}))),function(){o==null||o.forEach(function(l){try{l==null||l.remove()}catch{}})}},[t,r,i==null?void 0:i.messageId])}function JK(e,n){var t=e.sdk,r=e.currentChannel,i=n.logger,a=n.threadDispatcher;N.useEffect(function(){var s,o,l,u=Kr();if(!((s=t==null?void 0:t.groupChannel)===null||s===void 0)&&s.addGroupChannelHandler&&r){var d={onMessageReceived:function(p,m){i.info("Thread | useHandleChannelEvents: onMessageReceived",{channel:p,message:m}),a({type:ct.ON_MESSAGE_RECEIVED,payload:{channel:p,message:m}})},onMessageUpdated:function(p,m){i.info("Thread | useHandleChannelEvents: onMessageUpdated",{channel:p,message:m}),a({type:ct.ON_MESSAGE_UPDATED,payload:{channel:p,message:m}})},onMessageDeleted:function(p,m){i.info("Thread | useHandleChannelEvents: onMessageDeleted",{channel:p,messageId:m}),a({type:ct.ON_MESSAGE_DELETED,payload:{channel:p,messageId:m}})},onReactionUpdated:function(p,m){i.info("Thread | useHandleChannelEvents: onReactionUpdated",{channel:p,reactionEvent:m}),a({type:ct.ON_REACTION_UPDATED,payload:{channel:p,reactionEvent:m}})},onUserMuted:function(p,m){i.info("Thread | useHandleChannelEvents: onUserMuted",{channel:p,user:m}),a({type:ct.ON_USER_MUTED,payload:{channel:p,user:m}})},onUserUnmuted:function(p,m){i.info("Thread | useHandleChannelEvents: onUserUnmuted",{channel:p,user:m}),a({type:ct.ON_USER_UNMUTED,payload:{channel:p,user:m}})},onUserBanned:function(p,m){i.info("Thread | useHandleChannelEvents: onUserBanned",{channel:p,user:m}),a({type:ct.ON_USER_BANNED,payload:{channel:p,user:m}})},onUserUnbanned:function(p,m){i.info("Thread | useHandleChannelEvents: onUserUnbanned",{channel:p,user:m}),a({type:ct.ON_USER_UNBANNED,payload:{channel:p,user:m}})},onUserLeft:function(p,m){i.info("Thread | useHandleChannelEvents: onUserLeft",{channel:p,user:m}),a({type:ct.ON_USER_LEFT,payload:{channel:p,user:m}})},onChannelFrozen:function(p){i.info("Thread | useHandleChannelEvents: onChannelFrozen",{channel:p}),a({type:ct.ON_CHANNEL_FROZEN,payload:{channel:p}})},onChannelUnfrozen:function(p){i.info("Thread | useHandleChannelEvents: onChannelUnfrozen",{channel:p}),a({type:ct.ON_CHANNEL_UNFROZEN,payload:{channel:p}})},onOperatorUpdated:function(p,m){i.info("Thread | useHandleChannelEvents: onOperatorUpdated",{channel:p,users:m}),a({type:ct.ON_OPERATOR_UPDATED,payload:{channel:p,users:m}})},onTypingStatusUpdated:function(p){if(jn(p==null?void 0:p.url,r.url)){i.info("Channel | onTypingStatusUpdated",{channel:p});var m=p.getTypingUsers();a({type:Im,payload:{channel:p,typingMembers:m}})}}},f=new xo(d);(l=(o=t.groupChannel).addGroupChannelHandler)===null||l===void 0||l.call(o,u,f),i.info("Thread | useHandleChannelEvents: Added channelHandler in Thread",{handlerId:u,channelHandler:f})}return function(){var p,m,E;u&&(!((p=t==null?void 0:t.groupChannel)===null||p===void 0)&&p.removeGroupChannelHandler)&&((E=(m=t.groupChannel).removeGroupChannelHandler)===null||E===void 0||E.call(m,u),i.info("Thread | useHandleChannelEvents: Removed channelHandler in Thread.",u))}},[t==null?void 0:t.groupChannel,r])}function e$(e,n){var t=e.currentChannel,r=e.onBeforeSendFileMessage,i=n.logger,a=n.pubSub,s=n.threadDispatcher;return N.useCallback(function(o,l){return new Promise(function(u,d){var f,p=function(){var E={};return E.file=o,l&&(E.isReplyToChannel=!0,E.parentMessageId=l.messageId),E},m=(f=r==null?void 0:r(o,l))!==null&&f!==void 0?f:p();i.info("Thread | useSendFileMessageCallback: Sending file message start.",m),t==null||t.sendFileMessage(m).onPending(function(E){s({type:ct.SEND_MESSAGE_START,payload:{message:x(x({},E),{url:URL.createObjectURL(o),requestState:"pending",isUserMessage:E.isUserMessage,isFileMessage:E.isFileMessage,isAdminMessage:E.isAdminMessage,isMultipleFilesMessage:E.isMultipleFilesMessage})}}),setTimeout(function(){return Ma()},wl)}).onFailed(function(E,g){g.localUrl=URL.createObjectURL(o),g.file=o,i.info("Thread | useSendFileMessageCallback: Sending file message failed.",{message:g,error:E}),s({type:ct.SEND_MESSAGE_FAILURE,payload:{message:g,error:E}}),d(E)}).onSucceeded(function(E){i.info("Thread | useSendFileMessageCallback: Sending file message succeeded.",E),a.publish(Fn.SEND_FILE_MESSAGE,{channel:t,message:E,publishingModules:[ai.THREAD]}),u(E)})})},[t])}function t$(e,n){var t=e.currentChannel,r=e.isMentionEnabled,i=n.logger,a=n.pubSub,s=n.threadDispatcher;return N.useCallback(function(o){var l,u=o.messageId,d=o.message,f=o.mentionedUsers,p=o.mentionTemplate,m=function(){var g={};return g.message=d,r&&f&&(f==null?void 0:f.length)>0&&(g.mentionedUsers=f),r&&p?g.mentionedMessageTemplate=p:g.mentionedMessageTemplate=d,g},E=m();i.info("Thread | useUpdateMessageCallback: Message update start.",E),(l=t==null?void 0:t.updateUserMessage)===null||l===void 0||l.call(t,u,E).then(function(g){i.info("Thread | useUpdateMessageCallback: Message update succeeded.",g),s({type:ct.ON_MESSAGE_UPDATED,payload:{channel:t,message:g}}),a.publish(Fn.UPDATE_USER_MESSAGE,{fromSelector:!0,channel:t,message:g,publishingModules:[ai.THREAD]})})},[t,r])}function n$(e,n){var t=e.currentChannel,r=e.threadDispatcher,i=n.logger;return N.useCallback(function(a){i.info("Thread | useDeleteMessageCallback: Deleting message.",a);var s=a.sendingStatus;return new Promise(function(o,l){var u;i.info("Thread | useDeleteMessageCallback: Deleting message requestState:",s),(s==="failed"||s==="pending")&&(i.info("Thread | useDeleteMessageCallback: Deleted message from local:",a),r({type:ct.ON_MESSAGE_DELETED_BY_REQ_ID,payload:a.reqId}),o()),i.info("Thread | useDeleteMessageCallback: Deleting message from remote:",s),(u=t==null?void 0:t.deleteMessage)===null||u===void 0||u.call(t,a).then(function(){i.info("Thread | useDeleteMessageCallback: Deleting message success!",a),r({type:ct.ON_MESSAGE_DELETED,payload:{message:a,channel:t}}),o()}).catch(function(d){i.warning("Thread | useDeleteMessageCallback: Deleting message failed!",d),l(d)})})},[t])}function r$(e,n){var t=e.currentChannel,r=n.logger;return N.useCallback(function(i,a,s){var o,l;if(s){(o=t==null?void 0:t.deleteReaction)===null||o===void 0||o.call(t,i,a).then(function(u){r.info("Thread | useToggleReactionsCallback: Delete reaction succeeded.",u)}).catch(function(u){r.warning("Thread | useToggleReactionsCallback: Delete reaction failed.",u)});return}(l=t==null?void 0:t.addReaction)===null||l===void 0||l.call(t,i,a).then(function(u){r.info("Thread | useToggleReactionsCallback: Add reaction succeeded.",u)}).catch(function(u){r.warning("Thread | useToggleReactionsCallback: Add reaction failed.",u)})},[t])}function i$(e,n){var t=e.isMentionEnabled,r=e.currentChannel,i=e.onBeforeSendUserMessage,a=n.logger,s=n.pubSub,o=n.threadDispatcher,l=N.useCallback(function(u){var d,f=u.message,p=u.quoteMessage,m=u.mentionTemplate,E=u.mentionedUsers,g=function(){var S={};S.message=f;var C=(E==null?void 0:E.length)||0;return t&&C&&(S.mentionedUsers=E),t&&m&&C&&(S.mentionedMessageTemplate=m),p&&(S.isReplyToChannel=!0,S.parentMessageId=p.messageId),S},y=(d=i==null?void 0:i(f,p))!==null&&d!==void 0?d:g();a.info("Thread | useSendUserMessageCallback: Sending user message start.",y),r!=null&&r.sendUserMessage&&(r==null||r.sendUserMessage(y).onPending(function(S){o({type:ct.SEND_MESSAGE_START,payload:{message:S}})}).onFailed(function(S,C){a.info("Thread | useSendUserMessageCallback: Sending user message failed.",{message:C,error:S}),o({type:ct.SEND_MESSAGE_FAILURE,payload:{error:S,message:C}})}).onSucceeded(function(S){a.info("Thread | useSendUserMessageCallback: Sending user message succeeded.",S),s.publish(Fn.SEND_USER_MESSAGE,{channel:r,message:S,publishingModules:[ai.THREAD]})}))},[t,r]);return l}function a$(e,n){var t=e.currentChannel,r=n.logger,i=n.pubSub,a=n.threadDispatcher;return N.useCallback(function(s){var o,l,u,d,f;if(s!=null&&s.isResendable)if(r.info("Thread | useResendMessageCallback: Resending failedMessage start.",s),!((o=s==null?void 0:s.isUserMessage)===null||o===void 0)&&o.call(s)||(s==null?void 0:s.messageType)===ir.USER)try{t==null||t.resendMessage(s).onPending(function(p){r.info("Thread | useResendMessageCallback: Resending user message started.",p),a({type:ct.RESEND_MESSAGE_START,payload:{message:p}})}).onSucceeded(function(p){r.info("Thread | useResendMessageCallback: Resending user message succeeded.",p),a({type:ct.SEND_MESSAGE_SUCESS,payload:{message:p}}),i.publish(Fn.SEND_USER_MESSAGE,{channel:t,message:p,publishingModules:[ai.THREAD]})}).onFailed(function(p){r.warning("Thread | useResendMessageCallback: Resending user message failed.",p),s.sendingStatus=yn.FAILED,a({type:ct.SEND_MESSAGE_FAILURE,payload:{message:s}})})}catch(p){r.warning("Thread | useResendMessageCallback: Resending user message failed.",p),s.sendingStatus=yn.FAILED,a({type:ct.SEND_MESSAGE_FAILURE,payload:{message:s}})}else if(!((l=s==null?void 0:s.isFileMessage)===null||l===void 0)&&l.call(s))try{(u=t==null?void 0:t.resendMessage)===null||u===void 0||u.call(t,s).onPending(function(p){r.info("Thread | useResendMessageCallback: Resending file message started.",p),a({type:ct.RESEND_MESSAGE_START,payload:{message:p}})}).onSucceeded(function(p){r.info("Thread | useResendMessageCallback: Resending file message succeeded.",p),a({type:ct.SEND_MESSAGE_SUCESS,payload:{message:p}}),i.publish(Fn.SEND_FILE_MESSAGE,{channel:t,message:s,publishingModules:[ai.THREAD]})}).onFailed(function(p){r.warning("Thread | useResendMessageCallback: Resending file message failed.",p),s.sendingStatus=yn.FAILED,a({type:ct.SEND_MESSAGE_FAILURE,payload:{message:s}})})}catch(p){r.warning("Thread | useResendMessageCallback: Resending file message failed.",p),s.sendingStatus=yn.FAILED,a({type:ct.SEND_MESSAGE_FAILURE,payload:{message:s}})}else if(!((d=s==null?void 0:s.isMultipleFilesMessage)===null||d===void 0)&&d.call(s))try{(f=t==null?void 0:t.resendMessage)===null||f===void 0||f.call(t,s).onPending(function(p){r.info("Thread | useResendMessageCallback: Resending multiple files message started.",p),a({type:ct.RESEND_MESSAGE_START,payload:{message:p}})}).onFileUploaded(function(p,m,E,g){r.info("Thread | useResendMessageCallback: onFileUploaded during resending multiple files message.",{requestId:p,index:m,error:g,uploadableFileInfo:E}),i.publish(Fn.ON_FILE_INFO_UPLOADED,{response:{channelUrl:t.url,requestId:p,index:m,uploadableFileInfo:E,error:g},publishingModules:[ai.THREAD]})}).onSucceeded(function(p){r.info("Thread | useResendMessageCallback: Resending MFM succeeded.",p),a({type:ct.SEND_MESSAGE_SUCESS,payload:{message:p}}),i.publish(Fn.SEND_FILE_MESSAGE,{channel:t,message:p,publishingModules:[ai.THREAD]})}).onFailed(function(p,m){r.warning("Thread | useResendMessageCallback: Resending MFM failed.",p),a({type:ct.SEND_MESSAGE_FAILURE,payload:{message:m}})})}catch(p){r.warning("Thread | useResendMessageCallback: Resending MFM failed.",p),a({type:ct.SEND_MESSAGE_FAILURE,payload:{message:s}})}else r.warning("Thread | useResendMessageCallback: Message is not resendable.",s),s.sendingStatus=yn.FAILED,a({type:ct.SEND_MESSAGE_FAILURE,payload:{message:s}})},[t])}var s$=function(e,n){var t=e.currentChannel,r=e.onBeforeSendVoiceMessage,i=n.logger,a=n.pubSub,s=n.threadDispatcher,o=N.useCallback(function(l,u,d){var f=r&&typeof r=="function"?r(l,d):{file:l,fileName:Jc,mimeType:Mo,metaArrays:[new qr({key:Wy,value:["".concat(u)]}),new qr({key:Qy,value:[Yy]})]};d&&(f.isReplyToChannel=!0,f.parentMessageId=d.messageId),i.info("Thread | useSendVoiceMessageCallback:  Start sending voice message",f),t==null||t.sendFileMessage(f).onPending(function(p){s({type:ct.SEND_MESSAGE_START,payload:{message:x(x({},p),{url:URL.createObjectURL(l),requestState:"pending",isUserMessage:p.isUserMessage,isFileMessage:p.isFileMessage,isAdminMessage:p.isAdminMessage,isMultipleFilesMessage:p.isMultipleFilesMessage})}}),setTimeout(function(){return Ma()},wl)}).onFailed(function(p,m){m.localUrl=URL.createObjectURL(l),m.file=l,i.info("Thread | useSendVoiceMessageCallback: Sending voice message failed.",{message:m,error:p}),s({type:ct.SEND_MESSAGE_FAILURE,payload:{message:m,error:p}})}).onSucceeded(function(p){i.info("Thread | useSendVoiceMessageCallback: Sending voice message succeeded.",p),a.publish(Fn.SEND_FILE_MESSAGE,{channel:t,message:p,publishingModules:[ai.THREAD]})})},[t,r]);return o};function fg(e){return x({prevResultSize:yy,nextResultSize:Cy,includeMetaArray:!0},e)}var o$=function(e){var n=e.isReactionEnabled,t=e.anchorMessage,r=e.parentMessage,i=e.threadDispatcher,a=e.logger,s=e.oldestMessageTimeStamp,o=e.latestMessageTimeStamp,l=e.threadListState,u=Tt().stores,d=(t==null?void 0:t.createdAt)||0,f=N.useCallback(function(E){return Wt(void 0,void 0,void 0,function(){var g,y,S,C,T;return Qt(this,function(I){switch(I.label){case 0:if(!u.sdkStore.initialized||!r)return[2];i({type:ct.INITIALIZE_THREAD_LIST_START,payload:null}),I.label=1;case 1:return I.trys.push([1,3,,4]),g=fg({includeReactions:n}),a.info("Thread | useGetThreadList: Initialize thread list start.",{timestamp:d,params:g}),[4,r.getThreadedMessagesByTimestamp(d,g)];case 2:return y=I.sent(),S=y.threadedMessages,C=y.parentMessage,a.info("Thread | useGetThreadList: Initialize thread list succeeded.",{staleParentMessage:r,threadedMessages:S}),i({type:ct.INITIALIZE_THREAD_LIST_SUCCESS,payload:{parentMessage:C,anchorMessage:t,threadedMessages:S}}),setTimeout(function(){return E==null?void 0:E(S)}),[3,4];case 3:return T=I.sent(),a.info("Thread | useGetThreadList: Initialize thread list failed.",T),i({type:ct.INITIALIZE_THREAD_LIST_FAILURE,payload:T}),[3,4];case 4:return[2]}})})},[u.sdkStore.initialized,r,t,n]),p=N.useCallback(function(E){return Wt(void 0,void 0,void 0,function(){var g,y,S,C,T;return Qt(this,function(I){switch(I.label){case 0:if(l!==Mi.INITIALIZED||s===0||!r)return[2];i({type:ct.GET_PREV_MESSAGES_START,payload:null}),I.label=1;case 1:return I.trys.push([1,3,,4]),g=fg({nextResultSize:0,includeReactions:n}),[4,r.getThreadedMessagesByTimestamp(s,g)];case 2:return y=I.sent(),S=y.threadedMessages,C=y.parentMessage,a.info("Thread | useGetPrevThreadsCallback: Fetch prev threads succeeded.",{parentMessage:C,threadedMessages:S}),i({type:ct.GET_PREV_MESSAGES_SUCESS,payload:{parentMessage:C,threadedMessages:S}}),setTimeout(function(){return E==null?void 0:E(S)}),[3,4];case 3:return T=I.sent(),a.info("Thread | useGetPrevThreadsCallback: Fetch prev threads failed.",T),i({type:ct.GET_PREV_MESSAGES_FAILURE,payload:T}),[3,4];case 4:return[2]}})})},[l,s,n,r]),m=N.useCallback(function(E){return Wt(void 0,void 0,void 0,function(){var g,y,S,C,T;return Qt(this,function(I){switch(I.label){case 0:if(l!==Mi.INITIALIZED||o===0||!r)return[2];i({type:ct.GET_NEXT_MESSAGES_START,payload:null}),I.label=1;case 1:return I.trys.push([1,3,,4]),g=fg({prevResultSize:0,includeReactions:n}),[4,r.getThreadedMessagesByTimestamp(o,g)];case 2:return y=I.sent(),S=y.threadedMessages,C=y.parentMessage,a.info("Thread | useGetNextThreadsCallback: Fetch next threads succeeded.",{parentMessage:C,threadedMessages:S}),i({type:ct.GET_NEXT_MESSAGES_SUCESS,payload:{parentMessage:C,threadedMessages:S}}),setTimeout(function(){return E==null?void 0:E(S)}),[3,4];case 3:return T=I.sent(),a.info("Thread | useGetNextThreadsCallback: Fetch next threads failed.",T),i({type:ct.GET_NEXT_MESSAGES_FAILURE,payload:T}),[3,4];case 4:return[2]}})})},[l,o,n,r]);return{initialize:f,loadPrevious:p,loadNext:m}},D3=v.createContext(null),l$=function(e){var n,t,r=e.children,i=e.channelUrl,a=e.onHeaderActionClick,s=e.onMoveToParentMessage,o=e.onBeforeSendUserMessage,l=e.onBeforeSendFileMessage,u=e.onBeforeSendVoiceMessage,d=e.onBeforeSendMultipleFilesMessage,f=e.onBeforeDownloadFileMessage,p=e.isMultipleFilesMessageEnabled,m=e.filterEmojiCategoryIds,E=e==null?void 0:e.message,g=nq(E),y=Tt(),S=y.stores,C=y.config,T=S.sdkStore,I=S.userStore,L=T.sdk,D=I.user,O=T==null?void 0:T.initialized,R=C.logger,k=C.pubSub,P=C.groupChannel.enableMention,G=C.groupChannel.enableReactions,V=N.useReducer(KK,WK),H=V[0],F=V[1],z=H.currentChannel,K=H.allThreadMessages,ee=H.localThreadMessages,$=H.parentMessage,Q=H.channelState,ne=H.threadListState,j=H.parentMessageState,Z=H.hasMorePrev,ie=H.hasMoreNext,fe=H.emojiContainer,te=H.isMuted,le=H.isChannelFrozen,Me=H.currentUserId,ae=H.typingMembers;N.useEffect(function(){F({type:ct.INIT_USER_ID,payload:D==null?void 0:D.userId})},[D]),QK({channelUrl:i,sdkInit:O,message:E},{sdk:L,logger:R,threadDispatcher:F}),XK({channelUrl:i,sdkInit:O,parentMessage:g},{sdk:L,logger:R,threadDispatcher:F}),YK({sdk:L},{logger:R,threadDispatcher:F}),JK({sdk:L,currentChannel:z},{logger:R,threadDispatcher:F}),ZK({sdkInit:O,currentChannel:z,parentMessage:$},{logger:R,pubSub:k,threadDispatcher:F});var he=o$({parentMessage:$,anchorMessage:(E==null?void 0:E.messageId)!==(g==null?void 0:g.messageId)&&E||void 0,logger:R,isReactionEnabled:G,threadDispatcher:F,threadListState:ne,oldestMessageTimeStamp:((n=K[0])===null||n===void 0?void 0:n.createdAt)||0,latestMessageTimeStamp:((t=K[K.length-1])===null||t===void 0?void 0:t.createdAt)||0}),pe=he.initialize,Ne=he.loadPrevious,_e=he.loadNext;N.useEffect(function(){S.sdkStore.initialized&&C.isOnline&&pe()},[S.sdkStore.initialized,C.isOnline,pe]);var ge=r$({currentChannel:z},{logger:R}),me=i$({isMentionEnabled:P,currentChannel:z,onBeforeSendUserMessage:o},{logger:R,pubSub:k,threadDispatcher:F}),Le=e$({currentChannel:z,onBeforeSendFileMessage:l},{logger:R,pubSub:k,threadDispatcher:F}),Qe=s$({currentChannel:z,onBeforeSendVoiceMessage:u},{logger:R,pubSub:k,threadDispatcher:F}),Pe=XO({currentChannel:z,onBeforeSendMultipleFilesMessage:d,publishingModules:[ai.THREAD]},{logger:R,pubSub:k})[0],Ge=a$({currentChannel:z},{logger:R,pubSub:k,threadDispatcher:F}),De=t$({currentChannel:z,isMentionEnabled:P},{logger:R,pubSub:k,threadDispatcher:F}),tt=n$({currentChannel:z,threadDispatcher:F},{logger:R}),Ue=N.useMemo(function(){return C.groupChannel.replyType!=="none"&&z?tq(z==null?void 0:z.members):new Map},[z==null?void 0:z.members]);return v.createElement(D3.Provider,{value:{channelUrl:i,message:E,onHeaderActionClick:a,onMoveToParentMessage:s,isMultipleFilesMessageEnabled:p,onBeforeDownloadFileMessage:f,currentChannel:z,allThreadMessages:K,localThreadMessages:ee,parentMessage:$,channelState:Q,threadListState:ne,parentMessageState:j,hasMorePrev:Z,hasMoreNext:ie,emojiContainer:fe,fetchPrevThreads:Ne,fetchNextThreads:_e,toggleReaction:ge,sendMessage:me,sendFileMessage:Le,sendVoiceMessage:Qe,sendMultipleFilesMessage:Pe,resendMessage:Ge,updateMessage:De,deleteMessage:tt,nicknamesMap:Ue,isMuted:te,isChannelFrozen:le,currentUserId:Me,typingMembers:ae,filterEmojiCategoryIds:m}},v.createElement(hd,x({},e),r))},Ts=function(){var e=v.useContext(D3);if(!e)throw new Error("ThreadContext not found. Use within the Thread module");return e},L3=function(e){var n,t,r=e.onCancel,i=e.onSubmit,a=e.message,s=N.useContext(wn).stringSet,o=Ts().deleteMessage;return v.createElement(Rr,{type:Gn.DANGER,disabled:((t=(n=a.threadInfo)===null||n===void 0?void 0:n.replyCount)!==null&&t!==void 0?t:0)>0,onCancel:r,onSubmit:function(){o(a).then(function(){r==null||r(),i==null||i()})},submitText:s.MESSAGE_MENU__DELETE,titleText:MC(s,a)})};function u$(e){var n=this,t,r,i,a,s,o,l,u,d=e.className,f=e.message,p=e.showFileViewer,m=e.onBeforeDownloadFileMessage,E=m===void 0?null:m,g=Tt(),y=g.stores,S=g.config,C=g.eventHandlers,T=S.logger,I=(t=C==null?void 0:C.reaction)===null||t===void 0?void 0:t.onPressUserProfile,L=(i=(r=y==null?void 0:y.userStore)===null||r===void 0?void 0:r.user)===null||i===void 0?void 0:i.userId,D=Ft().stringSet,O=Ts(),R=O.currentChannel,k=O.emojiContainer,P=O.nicknamesMap,G=O.toggleReaction,V=O.filterEmojiCategoryIds,H=_r().isMobile,F=S.groupChannel.enableReactions,z=S.groupChannel.enableMention,K=SC({threadMessageKind:Wp.PARENT,isMobile:H}),ee=TC(f),$=z&&((a=f==null?void 0:f.mentionedMessageTemplate)===null||a===void 0?void 0:a.length)>0&&(f==null?void 0:f.mentionedUsers)&&f.mentionedUsers.length>0,Q=F&&S.groupChannel.replyType==="thread"&&((s=f==null?void 0:f.reactions)===null||s===void 0?void 0:s.length)>0,ne=N.useMemo(function(){var Me;return Dl($?{mentionedUsers:(Me=f==null?void 0:f.mentionedUsers)!==null&&Me!==void 0?Me:void 0,messageText:f==null?void 0:f.mentionedMessageTemplate,includeMarkdown:S.groupChannel.enableMarkdownForUserMessage}:{messageText:f==null?void 0:f.message,includeMarkdown:S.groupChannel.enableMarkdownForUserMessage})},[f==null?void 0:f.updatedAt,f==null?void 0:f.message]),j=function(){Ui(f)&&cd(f.url)},Z=E?function(){return Wt(n,void 0,void 0,function(){var Me,ae,he,pe;return Qt(this,function(Ne){switch(Ne.label){case 0:if(f.messageType!=="file")return[3,4];Ne.label=1;case 1:return Ne.trys.push([1,3,,4]),[4,E({message:f})];case 2:return Me=Ne.sent(),Me?j():(he=T==null?void 0:T.info)===null||he===void 0||he.call(T,"ParentMessageInfoItem: Not allowed to download."),[3,4];case 3:return ae=Ne.sent(),(pe=T==null?void 0:T.error)===null||pe===void 0||pe.call(T,"ParentMessageInfoItem: Error occurred while determining download continuation:",ae),[3,4];case 4:return[2]}})})}:j,ie=N.useState(!1),fe=ie[0],te=ie[1],le=((o=f==null?void 0:f.thumbnails)===null||o===void 0?void 0:o.length)>0?(l=f==null?void 0:f.thumbnails[0])===null||l===void 0?void 0:l.url:"";return v.createElement("div",{className:"sendbird-parent-message-info-item ".concat(d)},Vi(f)&&v.createElement(Ie,{className:"sendbird-parent-message-info-item__text-message",type:Ce.BODY_1,color:de.ONBACKGROUND_1},v.createElement(sd,{tokens:ne}),fm(f)&&v.createElement(Ie,{className:"sendbird-parent-message-info-item__text-message edited",type:Ce.BODY_1,color:de.ONBACKGROUND_2}," ".concat(D.MESSAGE_EDITED," "))),Zh(f)===mh().FILE&&v.createElement("div",{className:"sendbird-parent-message-info-item__file-message"},v.createElement("div",{className:"sendbird-parent-message-info-item__file-message__file-icon"},v.createElement(We,{className:"sendbird-parent-message-info-item__file-message__file-icon__icon",type:{IMAGE:Se.PHOTO,VIDEO:Se.PLAY,AUDIO:Se.FILE_AUDIO,GIF:Se.GIF,OTHERS:Se.FILE_DOCUMENT}[Zy(f==null?void 0:f.type)],fillColor:Ve.PRIMARY,width:"24px",height:"24px"})),v.createElement(to,{className:"sendbird-parent-message-info-item__file-message__file-name",onClick:Z,color:da.ONBACKGROUND_1},v.createElement(Ie,{className:"sendbird-parent-message-info-item__file-message__file-name__text",type:Ce.BODY_1,color:de.ONBACKGROUND_1},eC((f==null?void 0:f.name)||(f==null?void 0:f.url),30)))),Ri(f)&&v.createElement(aO,{className:"sendbird-parent-message-info-item__multiple-files-message-wrapper",message:f,isByMe:!1,isReactionEnabled:F,threadMessageKindKey:K,statefulFileInfoList:ee,onBeforeDownloadFileMessage:E}),Fa(f)&&v.createElement("div",{className:"sendbird-parent-message-info-item__voice-message"},v.createElement(uO,{className:"sendbird-parent-message-info-item__voice-message__item",message:f,channelUrl:R==null?void 0:R.url,isByMe:!1,isReactionEnabled:F})),eo(f)&&v.createElement("div",{className:"sendbird-parent-message-info-item__thumbnail-message",onClick:function(){ed(f)&&(p==null||p(!0))}},v.createElement(yr,{className:"sendbird-parent-message-info-item__thumbnail-message__thumbnail",url:le||(f==null?void 0:f.url)||(f==null?void 0:f.plainUrl),alt:f==null?void 0:f.type,width:"200px",height:"148px",onLoad:function(){te(!0)},placeHolder:function(Me){var ae=Me.style;return v.createElement("div",{className:"sendbird-parent-message-info-item__thumbnail-message__placeholder",style:ae},v.createElement("div",{className:"sendbird-parent-message-info-item__thumbnail-message__placeholder__icon"},v.createElement(We,{type:qs(f)?Se.PLAY:Se.PHOTO,fillColor:Ve.ON_BACKGROUND_2,width:"34px",height:"34px"})))}}),qs(f)&&!le&&!fe&&v.createElement("video",{className:"sendbird-parent-message-info-item__thumbnail-message__video"},v.createElement("source",{src:(f==null?void 0:f.url)||(f==null?void 0:f.plainUrl),type:f==null?void 0:f.type})),v.createElement("div",{className:"sendbird-parent-message-info-item__thumbnail-message__image-cover"}),(qs(f)||zp(f))&&v.createElement("div",{className:"sendbird-parent-message-info-item__thumbnail-message__icon-wrapper"},v.createElement("div",{className:"sendbird-parent-message-info-item__thumbnail-message__icon-wrapper__icon"},v.createElement(We,{type:qs(f)?Se.PLAY:Se.GIF,fillColor:Ve.ON_BACKGROUND_2,width:"34px",height:"34px"})))),Zh(f)===((u=mh==null?void 0:mh())===null||u===void 0?void 0:u.UNKNOWN)&&v.createElement("div",{className:"sendbird-parent-message-info-item__unknown-message"},v.createElement(Ie,{className:"sendbird-parent-message-info-item__unknown-message__header",type:Ce.BODY_1,color:de.ONBACKGROUND_1},D.UNKNOWN__UNKNOWN_MESSAGE_TYPE),v.createElement(Ie,{className:"sendbird-parent-message-info-item__unknown-message__description",type:Ce.BODY_1,color:de.ONBACKGROUND_2},D.UNKNOWN__CANNOT_READ_MESSAGE)),Q&&v.createElement("div",{className:"sendbird-parent-message-info__reactions"},v.createElement(EC,{userId:L,message:f,channel:R,isByMe:!1,emojiContainer:k,memberNicknamesMap:P,toggleReaction:G,onPressUserProfile:I,filterEmojiCategoryIds:V})))}var ZC=function(e){var n=Ts().currentChannel;return v.createElement(IC,x({},e,{currentChannel:n}))},qc={OPERATOR:"operator",NONE:"none"};function c$(e){var n=this,t,r,i,a,s,o,l=e.className,u=e.renderEmojiMenu,d=u===void 0?function(dt){return v.createElement(_C,x({},dt))}:u,f=e.renderMessageMenu,p=f===void 0?function(dt){return v.createElement(mC,x({},dt))}:f,m=Tt(),E=m.stores,g=m.config,y=g.isOnline,S=g.userMention,C=g.logger,T=g.groupChannel,I=(r=(t=E.userStore.user)===null||t===void 0?void 0:t.userId)!==null&&r!==void 0?r:"",L=Ft(),D=L.dateLocale,O=L.stringSet,R=Ts(),k=R.currentChannel,P=R.parentMessage,G=R.allThreadMessages,V=R.emojiContainer,H=R.toggleReaction,F=R.updateMessage,z=R.deleteMessage,K=R.onMoveToParentMessage,ee=R.onHeaderActionClick,$=R.isMuted,Q=R.isChannelFrozen,ne=R.onBeforeDownloadFileMessage,j=R.filterEmojiCategoryIds,Z=_r().isMobile,ie=NC("#".concat(df(P.messageId),".").concat(cf),[document.getElementById(td),document.getElementById(hf)]),fe=N.useState(!1),te=fe[0],le=fe[1],Me=N.useState(!1),ae=Me[0],he=Me[1],pe=ff({channel:k,config:g}),Ne=T.enableMention,_e=Ll(T.replyType).upperCase,ge=I===P.sender.userId,me=N.useRef(null),Le=N.useState(!1),Qe=Le[0],Pe=Le[1],Ge=rs({onLongPress:function(){Z&&Pe(!0)}},{shouldPreventDefault:!1}),De=N.useState(!1),tt=De[0],Ue=De[1],Ye=!y||$||Q&&(k==null?void 0:k.myRole)!==qc.OPERATOR,yt=N.useRef(null),Nt=N.useState(""),Rt=Nt[0],st=Nt[1],Be=N.useState([]),nt=Be[0],qe=Be[1],rn=N.useState([]),it=rn[0],Ct=rn[1],Je=N.useState(null),pt=Je[0],Ut=Je[1],Pt=N.useState(null),Ht=Pt[0],bt=Pt[1],qt=N.useState([]),Lt=qt[0],wt=qt[1],Et=y&&Ne&&Rt.length>0&&!$&&!(Q&&k.myRole!==qc.OPERATOR),xe=vf({ref:yt},{logger:C}),ye=(xe==null?void 0:xe.length)<(S==null?void 0:S.maxMentionCount);N.useEffect(function(){qe(nt.filter(function(dt){var Jt=dt.userId,ln=it.indexOf(Jt);return ln<0?!1:(it.splice(ln,1),!0)}))},[it]);var Ze=function(dt){return Wt(n,void 0,void 0,function(){var Jt,ln,Bt,En;return Qt(this,function(Mn){switch(Mn.label){case 0:if(!ne)return[2];Mn.label=1;case 1:return Mn.trys.push([1,3,,4]),[4,ne({message:P})];case 2:return Jt=Mn.sent(),Jt||(dt.preventDefault(),(Bt=C==null?void 0:C.info)===null||Bt===void 0||Bt.call(C,"ParentMessageInfo: Not allowed to download.")),[3,4];case 3:return ln=Mn.sent(),(En=C==null?void 0:C.error)===null||En===void 0||En.call(C,"ParentMessageInfo: Error occurred while determining download continuation:",ln),[3,4];case 4:return[2]}})})},St=N.useRef(null),Ot=Ul(),an=Ot.disableUserProfile,xt=Ot.renderUserProfile;return tt&&(!((i=P==null?void 0:P.isUserMessage)===null||i===void 0)&&i.call(P))?v.createElement(v.Fragment,null,Et&&v.createElement(ZC,{className:"parent-message-info--suggested-mention-list",targetNickname:Rt,inputEvent:pt??void 0,onUserItemClick:function(dt){dt&&qe(Ae(Ae([],nt,!0),[dt],!1)),st(""),bt(dt),Ut(null)},onFocusItemChange:function(){Ut(null)},onFetchUsers:function(dt){wt(dt)},ableAddMention:ye,maxMentionCount:S==null?void 0:S.maxMentionCount,maxSuggestionCount:S==null?void 0:S.maxSuggestionCount}),v.createElement(Ku,{channel:k,isEdit:!0,disabled:Ye,ref:yt,mentionSelectedUser:Ht,isMentionEnabled:Ne,message:P,onStartTyping:function(){var dt;(dt=k==null?void 0:k.startTyping)===null||dt===void 0||dt.call(k)},onUpdateMessage:function(dt){var Jt,ln=dt.messageId,Bt=dt.message,En=dt.mentionTemplate;F({messageId:ln,message:Bt,mentionedUsers:nt,mentionTemplate:En}),Ue(!1),(Jt=k==null?void 0:k.endTyping)===null||Jt===void 0||Jt.call(k)},onCancelEdit:function(){var dt;st(""),qe([]),Ct([]),wt([]),Ue(!1),(dt=k==null?void 0:k.endTyping)===null||dt===void 0||dt.call(k)},onUserMentioned:function(dt){(Ht==null?void 0:Ht.userId)===(dt==null?void 0:dt.userId)&&(bt(null),st(""))},onMentionStringChange:function(dt){st(dt)},onMentionedUserIdsUpdated:function(dt){Ct(dt)},onKeyDown:function(dt){return Et&&(Lt==null?void 0:Lt.length)>0&&(dt.key===Yr.Enter&&ye||dt.key===Yr.ArrowUp||dt.key===Yr.ArrowDown)?(Ut(dt),!0):!1}})):v.createElement("div",x({className:"sendbird-parent-message-info ".concat(l)},Z?x({},Ge):{},{ref:me}),v.createElement(zi,{menuTrigger:function(dt){var Jt,ln,Bt;return v.createElement(Fr,{className:"sendbird-parent-message-info__sender",ref:St,src:((ln=(Jt=k==null?void 0:k.members)===null||Jt===void 0?void 0:Jt.find(function(En){var Mn;return(En==null?void 0:En.userId)===((Mn=P==null?void 0:P.sender)===null||Mn===void 0?void 0:Mn.userId)}))===null||ln===void 0?void 0:ln.profileUrl)||((Bt=P==null?void 0:P.sender)===null||Bt===void 0?void 0:Bt.profileUrl),alt:"thread message sender",width:"40px",height:"40px",onClick:function(){an||dt()}})},menuItems:function(dt){return xt?xt({user:P==null?void 0:P.sender,close:dt,currentUserId:I,avatarRef:St}):v.createElement(Di,{parentRef:St,parentContainRef:St,closeDropdown:dt,style:{paddingTop:"0px",paddingBottom:"0px"}},v.createElement(kl,{user:P==null?void 0:P.sender,currentUserId:I,onSuccess:dt}))}}),v.createElement("div",{className:"sendbird-parent-message-info__content"},v.createElement("div",{className:"sendbird-parent-message-info__content__info"},v.createElement(Ie,{className:pe?"sendbird-parent-message-info__content__info__sender-name--use-reaction":"sendbird-parent-message-info__content__info__sender-name",type:Ce.CAPTION_2,color:de.ONBACKGROUND_2},((s=(a=k==null?void 0:k.members)===null||a===void 0?void 0:a.find(function(dt){var Jt;return(dt==null?void 0:dt.userId)===((Jt=P==null?void 0:P.sender)===null||Jt===void 0?void 0:Jt.userId)}))===null||s===void 0?void 0:s.nickname)||(dp==null?void 0:dp(P))),v.createElement(Ie,{className:"sendbird-parent-message-info__content__info__sent-at",type:Ce.CAPTION_3,color:de.ONBACKGROUND_2},wr((P==null?void 0:P.createdAt)||0,O.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:D}))),v.createElement(u$,{message:P,showFileViewer:he,onBeforeDownloadFileMessage:ne})),!Z&&v.createElement("div",{className:"sendbird-parent-message-info__menu-container"},p({className:Zt("sendbird-parent-message-info__context-menu",pe&&"use-reaction",ie&&"sendbird-mouse-hover"),channel:k,message:P,isByMe:I===((o=P==null?void 0:P.sender)===null||o===void 0?void 0:o.userId),disableDeleteMessage:G.length>0,replyType:_e,showEdit:Ue,showRemove:le,onMoveToParentMessage:function(){K==null||K({message:P,channel:k})},deleteMessage:z}),pe&&d({className:Zt("sendbird-parent-message-info__reaction-menu",ie&&"sendbird-mouse-hover"),message:P,userId:I,emojiContainer:V,toggleReaction:H,filterEmojiCategoryIds:j})),te&&v.createElement(L3,{onCancel:function(){return le(!1)},onSubmit:function(){ee==null||ee()},message:P}),ae&&v.createElement(Cm,{message:P,onClose:function(){return he(!1)},onDelete:function(){z(P).then(function(){he(!1)})},onDownloadClick:Ze}),Qe&&v.createElement(CC,{parentRef:me,channel:k,message:P,userId:I,replyType:_e,hideMenu:function(){Pe(!1)},deleteMessage:z,deleteMenuState:(G==null?void 0:G.length)===0?"ACTIVE":"HIDE",isReactionEnabled:pe,isByMe:ge,emojiContainer:V,showEdit:Ue,showRemove:le,toggleReaction:H,isOpenedFromThread:!0,onDownloadClick:Ze}))}function d$(e){var n=e.className,t=e.channelName,r=e.renderActionIcon,i=e.onActionIconClick,a=e.onChannelNameClick,s=Ft().stringSet,o=N.useMemo(function(){return typeof r=="function"&&i?r({onActionIconClick:i}):null},[r]);return v.createElement(fi,{className:"sendbird-thread-header ".concat(n),renderMiddle:function(){return v.createElement(fi.Title,{title:s.THREAD__HEADER_TITLE,subtitle:t,onClickSubtitle:a})},renderRight:function(){return o||v.createElement("div",{className:"sendbird-thread-header__action"},v.createElement(fi.IconButton,{onClick:function(l){return i(l)},type:Se.CLOSE,color:Ve.ON_BACKGROUND_1}))}})}function h$(e){var n=this,t,r,i,a=e.className,s=e.userId,o=e.channel,l=e.message,u=e.chainTop,d=u===void 0?!1:u,f=e.chainBottom,p=f===void 0?!1:f,m=e.isReactionEnabled,E=m===void 0?!1:m,g=e.disableQuoteMessage,y=g===void 0?!1:g,S=e.replyType,C=e.nicknamesMap,T=e.emojiContainer,I=e.showEdit,L=e.showRemove,D=e.showFileViewer,O=e.resendMessage,R=e.toggleReaction,k=e.onReplyInThread,P=Fo(e),G=P.renderSenderProfile,V=G===void 0?function(it){return v.createElement(SO,x({},it))}:G,H=P.renderMessageBody,F=H===void 0?function(it){return v.createElement(TO,x({},it))}:H,z=P.renderMessageHeader,K=z===void 0?function(it){return v.createElement(NO,x({},it))}:z,ee=P.renderMessageMenu,$=ee===void 0?function(it){return v.createElement(mC,x({},it))}:ee,Q=P.renderEmojiMenu,ne=Q===void 0?function(){return v.createElement(_C,x({},e))}:Q,j=P.renderEmojiReactions,Z=j===void 0?function(it){return v.createElement(EC,x({},it))}:j,ie=P.renderMobileMenuOnLongPress,fe=ie===void 0?function(it){return v.createElement(CC,x({},it))}:ie,te=_r().isMobile,le=Ft(),Me=le.dateLocale,ae=le.stringSet,he=(Tt==null?void 0:Tt())||{},pe=he.config,Ne=he.eventHandlers,_e=pe.logger,ge=(t=Ne==null?void 0:Ne.reaction)===null||t===void 0?void 0:t.onPressUserProfile,me=NC("#".concat(df(l.messageId),".").concat(cf),[document.getElementById(td),document.getElementById(hf)]),Le=Ts(),Qe=Le.deleteMessage,Pe=Le.onBeforeDownloadFileMessage,Ge=Le.filterEmojiCategoryIds,De=s===((r=l==null?void 0:l.sender)===null||r===void 0?void 0:r.userId)||(l==null?void 0:l.sendingStatus)==="pending"||(l==null?void 0:l.sendingStatus)==="failed",tt=!!((S==="QUOTE_REPLY"||S==="THREAD")&&(l!=null&&l.parentMessageId)&&(l!=null&&l.parentMessage)&&!y),Ue=me?"sendbird-mouse-hover":"",Ye=E&&!(o!=null&&o.isEphemeral),yt=o.isGroupChannel()&&pe.groupChannel.enableOgtag,Nt=N.useRef(null),Rt=N.useState(!1),st=Rt[0],Be=Rt[1],nt=rs({onLongPress:function(){te&&Be(!0)}},{shouldPreventDefault:!1}),qe=SC({threadMessageKind:Wp.CHILD,isMobile:te}),rn=TC(l);return v.createElement("div",{className:Zt("sendbird-thread-list-item-content",a,De?"outgoing":"incoming"),ref:Nt},v.createElement("div",{className:Zt("sendbird-thread-list-item-content__left",Ye&&"use-reaction",De?"outgoing":"incoming")},!De&&!p&&V(x(x({},e),{className:"sendbird-thread-list-item-content__left__avatar",isByMe:De,displayThreadReplies:!1})),De&&!te&&v.createElement("div",{className:Zt("sendbird-thread-list-item-content-menu",Ye&&"use-reaction",De?"outgoing":"incoming",Ue)},$({className:"sendbird-thread-list-item-content-menu__normal-menu",channel:o,message:l,isByMe:De,replyType:S,showEdit:I,showRemove:L,resendMessage:O,onReplyInThread:k,deleteMessage:Qe}),Ye&&v.createElement(v.Fragment,null,ne({className:"sendbird-thread-list-item-content-menu__reaction-menu",message:l,userId:s,emojiContainer:T,toggleReaction:R,filterEmojiCategoryIds:Ge})))),v.createElement("div",x({className:"sendbird-thread-list-item-content__middle"},te?x({},nt):{}),!De&&!d&&!tt&&K(e),v.createElement("div",{className:ii(["sendbird-thread-list-item-content__middle__body-container"])},De&&!p&&v.createElement("div",{className:ii(["sendbird-thread-list-item-content__middle__body-container__created-at","left",Ue])},v.createElement("div",{className:"sendbird-thread-list-item-content__middle__body-container__created-at__component-container"},v.createElement(pC,{message:l,channel:o}))),F({className:"sendbird-thread-list-item-content__middle__message-item-body",message:l,channel:o,showFileViewer:D,mouseHover:!1,isMobile:te,config:pe,isReactionEnabledInChannel:Ye,isByMe:De,onBeforeDownloadFileMessage:Pe,customSubcomponentsProps:{ThumbnailMessageItemBody:{style:{width:te?"100%":"200px",height:"148px"}},MultipleFilesMessageItemBody:{threadMessageKindKey:qe,statefulFileInfoList:rn}}}),Ye&&((i=l==null?void 0:l.reactions)===null||i===void 0?void 0:i.length)>0&&v.createElement("div",{className:ii(["sendbird-thread-list-item-content-reactions",!De||eo(l)||yt&&hm(l)||Ri(l)?"":"primary"])},Z({userId:s,message:l,channel:o,isByMe:De,emojiContainer:T,memberNicknamesMap:C,toggleReaction:R,onPressUserProfile:ge,filterEmojiCategoryIds:Ge})),!De&&!p&&v.createElement(Ie,{className:ii(["sendbird-thread-list-item-content__middle__body-container__created-at","right",Ue]),type:Ce.CAPTION_3,color:de.ONBACKGROUND_2},wr((l==null?void 0:l.createdAt)||0,ae.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:Me})))),v.createElement("div",{className:Zt("sendbird-thread-list-item-content__right",d&&"chain-top",De?"outgoing":"incoming")},!De&&!te&&v.createElement("div",{className:"sendbird-thread-list-item-content-menu ".concat(Ue)},Ye&&ne({className:"sendbird-thread-list-item-content-menu__reaction-menu",message:l,userId:s,emojiContainer:T,toggleReaction:R,filterEmojiCategoryIds:Ge}),$({className:"sendbird-thread-list-item-content-menu__normal-menu",channel:o,message:l,isByMe:De,replyType:S,showRemove:L,resendMessage:O,onReplyInThread:k,deleteMessage:Qe}))),st&&fe({parentRef:Nt,channel:o,message:l,userId:s,replyType:S,hideMenu:function(){Be(!1)},isReactionEnabled:E,isByMe:De,emojiContainer:T,showEdit:I,showRemove:L,toggleReaction:R,isOpenedFromThread:!0,deleteMessage:Qe,onDownloadClick:function(it){return Wt(n,void 0,void 0,function(){var Ct,Je,pt,Ut;return Qt(this,function(Pt){switch(Pt.label){case 0:if(!Pe)return[2];Pt.label=1;case 1:return Pt.trys.push([1,3,,4]),[4,Pe({message:l})];case 2:return Ct=Pt.sent(),Ct||(it.preventDefault(),(pt=_e==null?void 0:_e.info)===null||pt===void 0||pt.call(_e,"ThreadListItemContent: Not allowed to download.")),[3,4];case 3:return Je=Pt.sent(),(Ut=_e==null?void 0:_e.error)===null||Ut===void 0||Ut.call(_e,"ThreadListItemContent: Error occurred while determining download continuation:",Je),[3,4];case 4:return[2]}})})}}))}function f$(e){var n=this,t,r,i,a,s=e.className,o=e.message,l=e.chainTop,u=e.chainBottom,d=e.hasSeparator,f=e.renderCustomSeparator,p=e.handleScroll,m=Tt(),E=m.stores,g=m.config,y=g.isOnline,S=g.userMention,C=g.logger,T=g.groupChannel,I=(r=(t=E==null?void 0:E.userStore)===null||t===void 0?void 0:t.user)===null||r===void 0?void 0:r.userId,L=Ft(),D=L.dateLocale,O=L.stringSet,R=Ts==null?void 0:Ts(),k=R.currentChannel,P=R.nicknamesMap,G=R.emojiContainer,V=R.toggleReaction,H=R.threadListState,F=R.updateMessage,z=R.resendMessage,K=R.deleteMessage,ee=R.isMuted,$=R.isChannelFrozen,Q=R.onBeforeDownloadFileMessage,ne=R==null?void 0:R.message,j=N.useState(!1),Z=j[0],ie=j[1],fe=N.useState(!1),te=fe[0],le=fe[1],Me=N.useState(!1),ae=Me[0],he=Me[1],pe=ff({channel:k,config:g}),Ne=T.enableMention,_e=Ll(T.replyType).upperCase,ge=N.useRef(null);N.useLayoutEffect(function(){var bt;(ne==null?void 0:ne.messageId)===(o==null?void 0:o.messageId)&&(ge!=null&&ge.current)&&((bt=ge.current)===null||bt===void 0||bt.scrollIntoView({block:"center",inline:"center"}))},[ne,ge==null?void 0:ge.current]),N.useLayoutEffect(function(){p==null||p()},[Z,(i=o==null?void 0:o.reactions)===null||i===void 0?void 0:i.length]);var me=N.useRef(null),Le=N.useState(""),Qe=Le[0],Pe=Le[1],Ge=N.useState([]),De=Ge[0],tt=Ge[1],Ue=N.useState([]),Ye=Ue[0],yt=Ue[1],Nt=N.useState(null),Rt=Nt[0],st=Nt[1],Be=N.useState(null),nt=Be[0],qe=Be[1],rn=N.useState([]),it=rn[0],Ct=rn[1],Je=y&&Ne&&Qe.length>0&&!ee&&!($&&k.myRole!==qc.OPERATOR),pt=vf({ref:me},{logger:C}),Ut=(pt==null?void 0:pt.length)<(S==null?void 0:S.maxMentionCount);N.useEffect(function(){tt(De.filter(function(bt){var qt=bt.userId,Lt=Ye.indexOf(qt);return Lt<0?!1:(Ye.splice(Lt,1),!0)}))},[Ye]);var Pt=H!==Mi.INITIALIZED||!y||ee||$,Ht=N.useMemo(function(){if(typeof f=="function")return f==null?void 0:f({message:o})},[o,f]);return Z&&o.isUserMessage()?v.createElement(v.Fragment,null,Je&&v.createElement(ZC,{targetNickname:Qe,inputEvent:Rt??void 0,onUserItemClick:function(bt){bt&&tt(Ae(Ae([],De,!0),[bt],!1)),Pe(""),qe(bt),st(null)},onFocusItemChange:function(){st(null)},onFetchUsers:function(bt){Ct(bt)},ableAddMention:Ut,maxMentionCount:S==null?void 0:S.maxMentionCount,maxSuggestionCount:S==null?void 0:S.maxSuggestionCount}),v.createElement(Ku,{isEdit:!0,channel:k,disabled:Pt,ref:me,mentionSelectedUser:nt,isMentionEnabled:Ne,message:o,onStartTyping:function(){var bt;(bt=k==null?void 0:k.startTyping)===null||bt===void 0||bt.call(k)},onUpdateMessage:function(bt){var qt,Lt=bt.messageId,wt=bt.message,Et=bt.mentionTemplate;F({messageId:Lt,message:wt,mentionedUsers:De,mentionTemplate:Et}),ie(!1),(qt=k==null?void 0:k.endTyping)===null||qt===void 0||qt.call(k)},onCancelEdit:function(){var bt;Pe(""),tt([]),yt([]),Ct([]),ie(!1),(bt=k==null?void 0:k.endTyping)===null||bt===void 0||bt.call(k)},onUserMentioned:function(bt){(nt==null?void 0:nt.userId)===(bt==null?void 0:bt.userId)&&(qe(null),Pe(""))},onMentionStringChange:function(bt){Pe(bt)},onMentionedUserIdsUpdated:function(bt){yt(bt)},onKeyDown:function(bt){return Je&&(it==null?void 0:it.length)>0&&(bt.key===Yr.Enter&&Ut||bt.key===Yr.ArrowUp||bt.key===Yr.ArrowDown)?(st(bt),!0):!1}})):v.createElement("div",{ref:ge,className:Zt("sendbird-thread-list-item",s),"data-testid":"sendbird-thread-list-item"},d&&(o==null?void 0:o.createdAt)&&(Ht||v.createElement(uC,null,v.createElement(Ie,{type:Ce.CAPTION_2,color:de.ONBACKGROUND_2},wr(o==null?void 0:o.createdAt,O.DATE_FORMAT__THREAD_LIST__DATE_SEPARATOR,{locale:D})))),v.createElement(h$,x({},e,{userId:I,channel:k,message:o,chainTop:l,chainBottom:u,isReactionEnabled:pe,disableQuoteMessage:!0,replyType:_e,nicknamesMap:P,emojiContainer:G,resendMessage:z,showRemove:le,showFileViewer:he,toggleReaction:V,showEdit:ie})),te&&v.createElement(L3,{message:o,onCancel:function(){return le(!1)}}),ae&&v.createElement(Cm,{message:o,isByMe:((a=o==null?void 0:o.sender)===null||a===void 0?void 0:a.userId)===I,onClose:function(){return he(!1)},onDelete:function(){K(o),he(!1)},onDownloadClick:function(bt){return Wt(n,void 0,void 0,function(){var qt,Lt,wt,Et;return Qt(this,function(xe){switch(xe.label){case 0:if(!Q)return[2];xe.label=1;case 1:return xe.trys.push([1,3,,4]),[4,Q({message:o})];case 2:return qt=xe.sent(),qt||(bt.preventDefault(),(wt=C.info)===null||wt===void 0||wt.call(C,"ThreadListItem: Not allowed to download.")),[3,4];case 3:return Lt=xe.sent(),(Et=C.error)===null||Et===void 0||Et.call(C,"ThreadListItem: Error occurred while determining download continuation:",Lt),[3,4];case 4:return[2]}})})}}))}function by(e){"@babel/helpers - typeof";return by=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},by(e)}function JC(e,n){if(n.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+n.length+" present")}function v$(e){JC(1,arguments);var n=Object.prototype.toString.call(e);return e instanceof Date||by(e)==="object"&&n==="[object Date]"?new Date(e.getTime()):typeof e=="number"||n==="[object Number]"?new Date(e):((typeof e=="string"||n==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function vA(e){JC(1,arguments);var n=v$(e);return n.setHours(0,0,0,0),n}function p$(e,n){JC(2,arguments);var t=vA(e),r=vA(n);return t.getTime()===r.getTime()}function m$(e){var n=e.className,t=e.renderMessage,r=t===void 0?function(m){return v.createElement(f$,x({},m))}:t,i=e.renderCustomSeparator,a=e.scrollRef,s=e.scrollBottom,o=Tt().config,l=o.userId,u=Ts(),d=u.currentChannel,f=u.allThreadMessages,p=u.localThreadMessages;return v.createElement("div",{className:"sendbird-thread-list ".concat(n)},f.map(function(m,E){var g,y=((g=m==null?void 0:m.sender)===null||g===void 0?void 0:g.userId)===l,S=f[E-1],C=f[E+1],T=AC(S,m,C,d,Ll(o.groupChannel.replyType).upperCase),I=T[0],L=T[1],D=!((S==null?void 0:S.createdAt)>0&&p$(m==null?void 0:m.createdAt,S==null?void 0:S.createdAt)),O=function(){var R=a==null?void 0:a.current;if(R&&s){var k=R.scrollHeight-R.scrollTop-R.offsetHeight;s<k&&(R.scrollTop+=k-s)}};return v.createElement(Lu,{message:m,isByMe:y,key:m==null?void 0:m.messageId},r({message:m,chainTop:I,chainBottom:L,hasSeparator:D,renderCustomSeparator:i,handleScroll:O}))}),p.map(function(m){var E,g=((E=m==null?void 0:m.sender)===null||E===void 0?void 0:E.userId)===l,y=function(){var S=a==null?void 0:a.current;if(S){var C=S.scrollHeight-S.scrollTop-S.offsetHeight;s<C&&(S.scrollTop+=C-s)}};return v.createElement(Lu,{message:m,isByMe:g,key:m==null?void 0:m.messageId},r({message:m,hasSeparator:!1,renderCustomSeparator:i,handleScroll:y}))}))}var _$=function(e,n){var t=e.sendFileMessage,r=e.sendMultipleFilesMessage,i=e.quoteMessage,a=n.logger,s=Ft().stringSet,o=Tt().config,l=o.imageCompression,u=o==null?void 0:o.uikitUploadSizeLimit,d=o==null?void 0:o.uikitMultipleFilesMessageLimit,f=oC().openModal,p=N.useCallback(function(m){return Wt(void 0,void 0,void 0,function(){var E,g,y,S,C;return Qt(this,function(T){switch(T.label){case 0:return!t||!r?(a.warning("Channel|useHandleUploadFiles: required functions are undefined",{sendFileMessage:t,sendMultipleFilesMessage:r}),[2]):m.length===0?(a.warning("Channel|useHandleUploadFiles: given file list is empty.",{files:m}),[2]):m.length>d?(a.info("Channel|useHandleUploadFiles: Cannot upload files more than ".concat(d)),f({modalProps:{titleText:s.FILE_UPLOAD_NOTIFICATION__COUNT_LIMIT.replace("%d","".concat(d)),hideFooter:!0},childElement:function(I){var L=I.closeModal;return v.createElement(nd,{type:Gn.PRIMARY,submitText:s.BUTTON__OK,hideCancelButton:!0,onCancel:L,onSubmit:L})}}),[2]):m.some(function(I){return I.size>u})?(a.info("Channel|useHandleUploadFiles: Cannot upload file size exceeding ".concat(u)),f({modalProps:{titleText:s.FILE_UPLOAD_NOTIFICATION__SIZE_LIMIT.replace("%d","".concat(Math.floor(u/V5))),hideFooter:!0},childElement:function(I){var L=I.closeModal;return v.createElement(nd,{type:Gn.PRIMARY,submitText:s.BUTTON__OK,hideCancelButton:!0,onCancel:L,onSubmit:L})}}),[2]):[4,xO({files:m,imageCompression:l,logger:a})];case 1:if(E=T.sent().compressedFiles,g=E,g.length===1)a.info("Channel|useHandleUploadFiles: sending one file."),y=g[0],t(y,i);else if(g.length>1)return a.info("Channel|useHandleUploadFiles: sending multiple files."),S=[],C=[],g.forEach(function(I){As(I.type)?S.push(I):C.push(I)}),[2,C.reduce(function(I,L){return I.then(function(){return t(L,i)})},function(){return S.length===0?Promise.resolve():S.length===1?t(S[0],i):r(S,i)}())];return[2]}})})},[t,r,i]);return p},g$=function(e,n){var t,r=e.className,i=e.renderFileUploadIcon,a=e.renderVoiceMessageIcon,s=e.renderSendMessageIcon,o=e.acceptableMimeTypes,l=Tt().config,u=_r().isMobile,d=Ft().stringSet,f=l.isOnline,p=l.userMention,m=l.logger,E=l.groupChannel,g=Ts(),y=g.currentChannel,S=g.parentMessage,C=g.sendMessage,T=g.sendFileMessage,I=g.sendVoiceMessage,L=g.sendMultipleFilesMessage,D=g.isMuted,O=g.isChannelFrozen,R=g.allThreadMessages,k=N.useRef(),P=E.enableMention,G=E.enableVoiceMessage,V=(t=g.isMultipleFilesMessageEnabled)!==null&&t!==void 0?t:l.isMultipleFilesMessageEnabled,H=e.disabled||!f||D||(y==null?void 0:y.myRole)!==qc.OPERATOR&&O||S===null,F=_$({sendFileMessage:T,sendMultipleFilesMessage:L,quoteMessage:S},{logger:m}),z=N.useState(""),K=z[0],ee=z[1],$=N.useState([]),Q=$[0],ne=$[1],j=N.useState([]),Z=j[0],ie=j[1],fe=N.useState(null),te=fe[0],le=fe[1],Me=N.useState([]),ae=Me[0],he=Me[1],pe=N.useState(null),Ne=pe[0],_e=pe[1],ge=N.useState(!1),me=ge[0],Le=ge[1],Qe=f&&P&&K.length>0&&!kO(y)&&!PO(y)&&!(y!=null&&y.isBroadcast);N.useEffect(function(){Le(!1)},[y==null?void 0:y.url]);var Pe=vf({ref:n||k},{logger:m}),Ge=(Pe==null?void 0:Pe.length)<(p==null?void 0:p.maxMentionCount);return N.useEffect(function(){ne(Q.filter(function(De){var tt=De.userId,Ue=Z.indexOf(tt);return Ue<0?!1:(Z.splice(Ue,1),!0)}))},[Z]),y!=null&&y.isBroadcast&&(y==null?void 0:y.myRole)!==qc.OPERATOR?v.createElement(v.Fragment,null):v.createElement("div",{className:Zt(me?"sendbird-thread-message-input--voice-message":"sendbird-thread-message-input",r)},Qe&&v.createElement(ZC,{targetNickname:K,inputEvent:Ne??void 0,onUserItemClick:function(De){De&&ne(Ae(Ae([],Q,!0),[De],!1)),ee(""),le(De),_e(null)},onFocusItemChange:function(){_e(null)},onFetchUsers:function(De){he(De)},ableAddMention:Ge,maxMentionCount:p==null?void 0:p.maxMentionCount,maxSuggestionCount:p==null?void 0:p.maxSuggestionCount}),me?v.createElement(FO,{channel:y,onSubmitClick:function(De,tt){I(De,tt,S),Le(!1)},onCancelClick:function(){Le(!1)}}):v.createElement(Ku,{className:"sendbird-thread-message-input__message-input",messageFieldId:"sendbird-message-input-text-field--thread",channel:y,channelUrl:y==null?void 0:y.url,isMobile:u,disabled:H,acceptableMimeTypes:o,setMentionedUsers:ne,mentionSelectedUser:te,isMentionEnabled:P,isVoiceMessageEnabled:G,isSelectingMultipleFilesEnabled:V,onVoiceMessageIconClick:function(){Le(!0)},renderFileUploadIcon:i,renderVoiceMessageIcon:a,renderSendMessageIcon:s,ref:n||k,placeholder:(y==null?void 0:y.isFrozen)&&(y==null?void 0:y.myRole)!==qc.OPERATOR&&d.MESSAGE_INPUT__PLACE_HOLDER__DISABLED||(y==null?void 0:y.myMutedState)===Ya.MUTED&&d.MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT||(R.length>0?d.THREAD__INPUT__REPLY_TO_THREAD:d.THREAD__INPUT__REPLY_IN_THREAD),onStartTyping:function(){var De;(De=y==null?void 0:y.startTyping)===null||De===void 0||De.call(y)},onSendMessage:function(De){var tt,Ue=De.message,Ye=De.mentionTemplate;C({message:Ue,mentionedUsers:Q,mentionTemplate:Ye,quoteMessage:S}),ee(""),ne([]),(tt=y==null?void 0:y.endTyping)===null||tt===void 0||tt.call(y)},onFileUpload:F,onUserMentioned:function(De){(te==null?void 0:te.userId)===(De==null?void 0:De.userId)&&(le(null),ee(""))},onMentionStringChange:function(De){ee(De)},onMentionedUserIdsUpdated:function(De){ie(De)},onKeyDown:function(De){return Qe&&(ae==null?void 0:ae.length)>0&&(De.key===Yr.Enter&&Ge||De.key===Yr.ArrowUp||De.key===Yr.ArrowDown)?(_e(De),!0):!1}}))},E$=v.forwardRef(g$),y$=function(e){var n=e.renderHeader;return N.useMemo(function(){return typeof n=="function"?n():null},[n])},C$=function(e){var n=e.parentMessage,t=e.parentMessageState,r=e.renderParentMessageInfo,i=e.renderParentMessageInfoPlaceholder;return N.useMemo(function(){if(t===Bi.NIL||t===Bi.LOADING||t===Bi.INVALID){if(typeof i=="function")return i(t);switch(t){case Bi.NIL:return v.createElement(Mr,{className:"sendbird-thread-ui__parent-message-info placeholder-nil",type:kn.NO_RESULTS,iconSize:"64px"});case Bi.LOADING:return v.createElement(Mr,{className:"sendbird-thread-ui__parent-message-info placeholder-loading",type:kn.LOADING,iconSize:"64px"});case Bi.INVALID:return v.createElement(Mr,{className:"sendbird-thread-ui__parent-message-info placeholder-invalid",type:kn.WRONG,iconSize:"64px"});default:return null}}else if(t===Bi.INITIALIZED&&typeof r=="function")return r();return null},[n,t,r,i])},b$=function(e){var n=e.threadListState,t=e.renderThreadListPlaceHolder;return N.useMemo(function(){if(n===Mi.NIL||n===Mi.LOADING||n===Mi.INVALID){if(typeof t=="function")return t(n);switch(n){case Mi.LOADING:return v.createElement(Mr,{className:"sendbird-thread-ui__thread-list placeholder-loading",type:kn.LOADING,iconSize:"64px"});case Mi.INVALID:return v.createElement(Mr,{className:"sendbird-thread-ui__thread-list placeholder-invalid",type:kn.WRONG,iconSize:"64px"});case Mi.NIL:return v.createElement(v.Fragment,null);default:return null}}return null},[n,t])},S$=function(e){var n,t,r,i,a=e.renderHeader,s=e.renderParentMessageInfo,o=s===void 0?function(){return v.createElement(c$,{className:"sendbird-thread-ui__parent-message-info"})}:s,l=e.renderMessage,u=e.renderMessageInput,d=e.renderCustomSeparator,f=e.renderParentMessageInfoPlaceholder,p=e.renderThreadListPlaceHolder,m=e.renderFileUploadIcon,E=e.renderVoiceMessageIcon,g=e.renderSendMessageIcon,y=Tt(),S=y.stores,C=y.config,T=(r=(t=(n=S==null?void 0:S.sdkStore)===null||n===void 0?void 0:n.sdk)===null||t===void 0?void 0:t.currentUser)===null||r===void 0?void 0:r.userId,I=Ft().stringSet,L=Ts(),D=L.currentChannel,O=L.allThreadMessages,R=L.parentMessage,k=L.parentMessageState,P=L.threadListState,G=L.hasMorePrev,V=L.hasMoreNext,H=L.fetchPrevThreads,F=L.fetchNextThreads,z=L.onHeaderActionClick,K=L.onMoveToParentMessage,ee=O.length,$=T===((i=R==null?void 0:R.sender)===null||i===void 0?void 0:i.userId),Q=y$({renderHeader:a}),ne=C$({parentMessage:R,parentMessageState:k,renderParentMessageInfo:o,renderParentMessageInfoPlaceholder:f}),j=b$({threadListState:P,renderThreadListPlaceHolder:p}),Z=N.useState(0),ie=Z[0],fe=Z[1],te=N.useRef(null),le=function(Me){var ae,he=Me.target,pe=he.scrollTop,Ne=he.clientHeight,_e=he.scrollHeight,ge=(ae=te.current)===null||ae===void 0?void 0:ae.querySelectorAll(".sendbird-thread-list-item"),me=ge==null?void 0:ge[0];if(oA(pe,0,10)&&G&&H(function(Pe){var Ge;if(Pe)try{(Ge=me==null?void 0:me.scrollIntoView)===null||Ge===void 0||Ge.call(me,{block:"start",inline:"nearest"})}catch{}}),oA(Ne+pe,_e,10)&&V){var Le=pe;F(function(Pe){if(Pe)try{he.scrollTop=Le,te.current&&(te.current.scrollTop=Le)}catch{}})}if(te!=null&&te.current){var Qe=te==null?void 0:te.current;fe(Qe.scrollHeight-Qe.scrollTop-Qe.offsetHeight)}};return v.createElement("div",{className:"sendbird-thread-ui"},Q||v.createElement(d$,{className:"sendbird-thread-ui__header",channelName:RR(D,T??"",I),onActionIconClick:z,onChannelNameClick:function(){K==null||K({message:R,channel:D})}}),v.createElement("div",{className:Zt("sendbird-thread-ui--scroll","sendbird-conversation__messages"),ref:te,onScroll:le,dir:rC(C==null?void 0:C.htmlTextDirection,C==null?void 0:C.forceLeftToRightMessageLayout)},v.createElement(Lu,{message:R,isByMe:$},ne),ee>0&&v.createElement("div",{className:"sendbird-thread-ui__reply-counts"},v.createElement(Ie,{type:Ce.BODY_1,color:de.ONBACKGROUND_3},"".concat(ee," ").concat(ee>1?I.THREAD__THREAD_REPLIES:I.THREAD__THREAD_REPLY))),j||v.createElement(m$,{className:"sendbird-thread-ui__thread-list",renderMessage:l,renderCustomSeparator:d,scrollRef:te,scrollBottom:ie})),(u==null?void 0:u())||v.createElement(E$,{className:"sendbird-thread-ui__message-input",renderFileUploadIcon:m,renderVoiceMessageIcon:E,renderSendMessageIcon:g}))},U3=function(e){var n;return v.createElement("div",{className:Zt("sendbird-thread",(n=e==null?void 0:e.className)!==null&&n!==void 0?n:"")},v.createElement(l$,x({},e),v.createElement(S$,x({},e))))},T$=function(e){var n=e.isReactionEnabled,t=e.replyType,r=e.isMessageGroupingEnabled,i=e.isMultipleFilesMessageEnabled,a=e.allowProfileEdit,s=e.showSearchIcon,o=e.onProfileEditSuccess,l=e.disableAutoSelect,u=e.currentChannel,d=e.setCurrentChannel,f=e.showSettings,p=e.setShowSettings,m=e.showSearch,E=e.setShowSearch,g=e.highlightedMessage,y=e.setHighlightedMessage,S=e.startingPoint,C=e.setStartingPoint,T=e.showThread,I=e.setShowThread,L=e.threadTargetMessage,D=e.setThreadTargetMessage,O=e.enableLegacyChannelModules,R=function(V){C==null||C(null),y==null||y(null),d(V||void 0)},k=function(V){var H=V.message;p(!1),E(!1),t==="THREAD"&&(D(H),I(!0))},P={allowProfileEdit:a,activeChannelUrl:u==null?void 0:u.url,onProfileEditSuccess:o,disableAutoSelect:l,onChannelSelect:R,selectedChannelUrl:u==null?void 0:u.url,onChannelCreated:R,onUserProfileUpdated:o},G={channelUrl:(u==null?void 0:u.url)||"",onChatHeaderActionClick:function(){E(!1),I(!1),p(!f)},onSearchClick:function(){p(!1),I(!1),E(!m)},onReplyInThread:k,onQuoteMessageClick:function(V){var H=V.message;p(!1),E(!1),t==="THREAD"&&(D(H),I(!0))},animatedMessage:g,onMessageAnimated:function(){return y==null?void 0:y(null)},showSearchIcon:s,startingPoint:S??void 0,isReactionEnabled:n,replyType:t,isMessageGroupingEnabled:r,isMultipleFilesMessageEnabled:i,animatedMessageId:g,onReplyInThreadClick:k};return v.createElement("div",{className:"sendbird-app__wrap",id:pm},v.createElement("div",{className:"sendbird-app__channellist-wrap"},O?v.createElement(_3,x({},P)):v.createElement(WO,x({},P))),v.createElement("div",{className:Zt("sendbird-app__conversation-wrap",f&&"sendbird-app__conversation--settings-open",m&&"sendbird-app__conversation--search-open")},O?v.createElement(e3,x({},G)):v.createElement(BO,x({},G))),f&&v.createElement("div",{className:"sendbird-app__settingspanel-wrap"},v.createElement(b3,{className:"sendbird-channel-settings",channelUrl:(u==null?void 0:u.url)||"",onCloseClick:function(){p(!1)}})),m&&v.createElement("div",{className:"sendbird-app__searchpanel-wrap"},v.createElement(O3,{channelUrl:(u==null?void 0:u.url)||"",onResultClick:function(V){V.messageId===g?(y==null||y(null),setTimeout(function(){y==null||y(V.messageId)})):(C==null||C(V.createdAt),y==null||y(V.messageId))},onCloseClick:function(){E(!1)}})),T&&v.createElement(U3,{className:"sendbird-app__thread",channelUrl:(u==null?void 0:u.url)||"",message:L,onHeaderActionClick:function(){I(!1)},onMoveToParentMessage:function(V){var H=V.message,F=V.channel;(F==null?void 0:F.url)!==(u==null?void 0:u.url)&&d(F),(H==null?void 0:H.messageId)!==g&&(C==null||C(H==null?void 0:H.createdAt)),setTimeout(function(){C==null||C(null),y==null||y(H==null?void 0:H.messageId)},500)}}))},sr;(function(e){e.CHANNEL_LIST="CHANNEL_LIST",e.CHANNEL="CHANNEL",e.CHANNEL_SETTINGS="CHANNEL_SETTINGS",e.MESSAGE_SEARCH="MESSAGE_SEARCH",e.THREAD="THREAD"})(sr||(sr={}));var N$=function(e){var n,t,r,i=e.replyType,a=e.isMessageGroupingEnabled,s=e.isMultipleFilesMessageEnabled,o=e.allowProfileEdit,l=e.isReactionEnabled,u=e.showSearchIcon,d=e.onProfileEditSuccess,f=e.currentChannel,p=e.setCurrentChannel,m=e.startingPoint,E=e.setStartingPoint,g=e.threadTargetMessage,y=e.setThreadTargetMessage,S=e.highlightedMessage,C=e.setHighlightedMessage,T=e.enableLegacyChannelModules,I=N.useState(sr.CHANNEL_LIST),L=I[0],D=I[1],O=Tt(),R=(t=(n=O==null?void 0:O.stores)===null||n===void 0?void 0:n.sdkStore)===null||t===void 0?void 0:t.sdk,k=(r=O==null?void 0:O.config)===null||r===void 0?void 0:r.userId,P=nR().pause,G=function(F,z){E==null||E((F==null?void 0:F.createdAt)||null),setTimeout(function(){z==null||z((F==null?void 0:F.messageId)||null)},500)};N.useEffect(function(){L!==sr.CHANNEL&&G(null,function(){return C==null?void 0:C(null)})},[L]),N.useEffect(function(){var F,z,K=Kr();if(!((F=R==null?void 0:R.groupChannel)===null||F===void 0)&&F.addGroupChannelHandler){var ee=new xo({onUserBanned:function($,Q){$.url===(f==null?void 0:f.url)&&(Q==null?void 0:Q.userId)===k&&D(sr.CHANNEL_LIST)},onChannelDeleted:function($){$===(f==null?void 0:f.url)&&D(sr.CHANNEL_LIST)},onUserLeft:function($,Q){$.url===(f==null?void 0:f.url)&&(Q==null?void 0:Q.userId)===k&&D(sr.CHANNEL_LIST)}});(z=R==null?void 0:R.groupChannel)===null||z===void 0||z.addGroupChannelHandler(K,ee)}return function(){var $,Q;(Q=($=R==null?void 0:R.groupChannel)===null||$===void 0?void 0:$.removeGroupChannelHandler)===null||Q===void 0||Q.call($,K)}},[R,f==null?void 0:f.url]),N.useEffect(function(){L===sr.THREAD&&D(sr.CHANNEL)},[f==null?void 0:f.url]);var V={allowProfileEdit:o,onProfileEditSuccess:d,disableAutoSelect:!0,onChannelSelect:function(F){p(F??void 0),D(F?sr.CHANNEL:sr.CHANNEL_LIST)},onChannelCreated:function(F){p(F),D(sr.CHANNEL)},onUserProfileUpdated:d},H={channelUrl:(f==null?void 0:f.url)||"",onChatHeaderActionClick:function(){D(sr.CHANNEL_SETTINGS)},onBackClick:function(){D(sr.CHANNEL_LIST),P(iy)},onSearchClick:function(){D(sr.MESSAGE_SEARCH)},onReplyInThread:function(F){var z=F.message;i==="THREAD"&&(D(sr.THREAD),y(z))},onQuoteMessageClick:function(F){var z=F.message;i==="THREAD"&&(y(z),D(sr.THREAD))},animatedMessage:S,onMessageAnimated:function(){return C==null?void 0:C(null)},showSearchIcon:u,startingPoint:m??void 0,isReactionEnabled:l,replyType:i,isMessageGroupingEnabled:a,isMultipleFilesMessageEnabled:s,animatedMessageId:S,onReplyInThreadClick:function(F){var z=F.message;i==="THREAD"&&(D(sr.THREAD),y(z))}};return v.createElement("div",{className:"sb_mobile",id:pm},L===sr.CHANNEL_LIST&&v.createElement("div",{className:"sb_mobile__panelwrap"},T?v.createElement(_3,x({},V)):v.createElement(WO,x({},V))),L===sr.CHANNEL&&v.createElement("div",{className:"sb_mobile__panelwrap"},T?v.createElement(e3,x({},H)):v.createElement(BO,x({},H))),L===sr.CHANNEL_SETTINGS&&v.createElement("div",{className:"sb_mobile__panelwrap"},v.createElement(b3,{channelUrl:(f==null?void 0:f.url)||"",onCloseClick:function(){D(sr.CHANNEL)},onLeaveChannel:function(){D(sr.CHANNEL_LIST)}})),L===sr.MESSAGE_SEARCH&&v.createElement("div",{className:"sb_mobile__panelwrap"},v.createElement(O3,{channelUrl:(f==null?void 0:f.url)||"",onCloseClick:function(){D(sr.CHANNEL)},onResultClick:function(F){D(sr.CHANNEL),G(F,function(z){C==null||C(z)})}})),L===sr.THREAD&&v.createElement("div",{className:"sb_mobile__panelwrap"},v.createElement(U3,{channelUrl:(f==null?void 0:f.url)||"",message:g,onHeaderActionClick:function(){D(sr.CHANNEL),P(iy)},onMoveToParentMessage:function(F){var z=F.message,K=F.channel;p(K),G(z,function(ee){D(sr.CHANNEL),C==null||C(ee)})}})))},I$=function(e){var n,t,r,i=e.isMessageGroupingEnabled,a=e.allowProfileEdit,s=e.onProfileEditSuccess,o=e.disableAutoSelect,l=e.currentChannel,u=e.setCurrentChannel,d=e.enableLegacyChannelModules,f=Tt(),p=f.config,m=N.useState(!1),E=m[0],g=m[1],y=N.useState(null),S=y[0],C=y[1],T=N.useState(!1),I=T[0],L=T[1],D=N.useState(!1),O=D[0],R=D[1],k=N.useState(null),P=k[0],G=k[1],V=N.useState(null),H=V[0],F=V[1],z=_r().isMobile,K=(n=e.replyType)!==null&&n!==void 0?n:Ll(p.groupChannel.replyType).upperCase,ee=(t=e.isReactionEnabled)!==null&&t!==void 0?t:p.groupChannel.enableReactions,$=(r=e.showSearchIcon)!==null&&r!==void 0?r:p.groupChannelSettings.enableMessageSearch;return v.createElement(v.Fragment,null,z?v.createElement(N$,{replyType:K,showSearchIcon:$,isReactionEnabled:ee,isMessageGroupingEnabled:i,allowProfileEdit:a,onProfileEditSuccess:s,currentChannel:l,setCurrentChannel:u,highlightedMessage:P,setHighlightedMessage:G,startingPoint:H,setStartingPoint:F,threadTargetMessage:S,setThreadTargetMessage:C,enableLegacyChannelModules:d}):v.createElement(T$,{replyType:K,isReactionEnabled:ee,showSearchIcon:$,isMessageGroupingEnabled:i,allowProfileEdit:a,onProfileEditSuccess:s,disableAutoSelect:o,currentChannel:l,setCurrentChannel:u,showThread:E,setShowThread:g,threadTargetMessage:S,setThreadTargetMessage:C,showSettings:I,setShowSettings:L,showSearch:O,setShowSearch:R,highlightedMessage:P,setHighlightedMessage:G,startingPoint:H,setStartingPoint:F,enableLegacyChannelModules:d}))};function M$(e){var n=e.appId,t=e.userId,r=e.accessToken,i=r===void 0?"":r,a=e.customApiHost,s=a===void 0?"":a,o=e.customWebSocketHost,l=o===void 0?"":o,u=e.breakpoint,d=e.theme,f=d===void 0?"light":d,p=e.userListQuery,m=e.nickname,E=m===void 0?"":m,g=e.profileUrl,y=g===void 0?"":g,S=e.dateLocale,C=e.config,T=C===void 0?{}:C,I=e.voiceRecord,L=e.isMessageGroupingEnabled,D=L===void 0?!0:L,O=e.colorSet,R=e.stringSet,k=e.allowProfileEdit,P=k===void 0?!1:k,G=e.disableMarkAsDelivered,V=G===void 0?!1:G,H=e.renderUserProfile,F=e.onProfileEditSuccess,z=e.imageCompression,K=z===void 0?{}:z,ee=e.disableAutoSelect,$=ee===void 0?!1:ee,Q=e.sdkInitParams,ne=e.customExtensionParams,j=e.eventHandlers,Z=e.isMultipleFilesMessageEnabled,ie=e.isUserIdUsedForNickname,fe=ie===void 0?!0:ie,te=e.enableLegacyChannelModules,le=te===void 0?!1:te,Me=e.uikitOptions,ae=e.htmlTextDirection,he=ae===void 0?"ltr":ae,pe=e.forceLeftToRightMessageLayout,Ne=pe===void 0?!1:pe,_e=e.showSearchIcon,ge=e.isMentionEnabled,me=e.isReactionEnabled,Le=e.replyType,Qe=e.disableUserProfile,Pe=e.isVoiceMessageEnabled,Ge=e.isTypingIndicatorEnabledOnChannelList,De=e.isMessageReceiptStatusEnabledOnChannelList,tt=N.useState(),Ue=tt[0],Ye=tt[1];return v.createElement(KB,{stringSet:R,appId:n,userId:t,accessToken:i,customApiHost:s,customWebSocketHost:l,breakpoint:u,theme:f,nickname:E,profileUrl:y,dateLocale:S,userListQuery:p,config:T,colorSet:O,disableMarkAsDelivered:V,renderUserProfile:H,imageCompression:K,isMultipleFilesMessageEnabled:Z,voiceRecord:I,onStartDirectMessage:function(yt){Ye(yt)},uikitOptions:Me,isUserIdUsedForNickname:fe,sdkInitParams:Q,customExtensionParams:ne,eventHandlers:j,isTypingIndicatorEnabledOnChannelList:Ge,isMessageReceiptStatusEnabledOnChannelList:De,replyType:Le,showSearchIcon:_e,disableUserProfile:Qe,isReactionEnabled:me,isMentionEnabled:ge,isVoiceMessageEnabled:Pe,htmlTextDirection:he,forceLeftToRightMessageLayout:Ne},v.createElement(I$,{isMessageGroupingEnabled:D,allowProfileEdit:P,onProfileEditSuccess:F,disableAutoSelect:$,currentChannel:Ue,setCurrentChannel:Ye,enableLegacyChannelModules:le,isReactionEnabled:me,replyType:Le,showSearchIcon:_e}))}var A$=v.createContext(null),eb=function(){var e=v.useContext(A$);if(!e)throw new Error("OpenChannelContext not found. Use within the OpenChannel module");return e};v.forwardRef(function(e,n){var t=eb(),r=t.currentOpenChannel,i=t.disabled,a=t.handleSendMessage,s=t.handleFileUpload,o=t.amIMuted,l=r,u=N.useContext(wn).stringSet,d=e.value;function f(){return o?u.MESSAGE_INPUT__PLACE_HOLDER__MUTED:i?u.MESSAGE_INPUT__PLACE_HOLDER__DISABLED:""}return l?v.createElement("div",{className:"sendbird-openchannel-footer"},v.createElement(Ku,{channel:r,ref:n,value:d,disabled:i,isVoiceMessageEnabled:!1,onSendMessage:a,onFileUpload:s,placeholder:f()})):null});var Zp=function(e){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",e);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var n=document.createElement("textarea");n.textContent=e,n.style.position="fixed",document.body.appendChild(n),n.select();try{return document.execCommand("copy")}catch{return!1}finally{document.body.removeChild(n)}}return!1},tb={NONE:"none",PENDING:"pending",FAILED:"failed",CANCELED:"canceled",SUCCEEDED:"succeeded"},Ef=function(e){return e.sender||e._sender},nb=function(e){return e===tb.SUCCEEDED},wm=function(e){return e===tb.PENDING},yf=function(e){return e===tb.FAILED},rb=function(e,n){return Ef(e).userId===n},Rm=function(e){var n,t=e.message;return(t==null?void 0:t.messageType)==="user"&&((n=t==null?void 0:t.message)===null||n===void 0?void 0:n.length)>0},Lo=function(e){var n=e.message,t=e.status,r=e.userId;return rb(n,r)&&yf(t)&&(n==null?void 0:n.isResendable)},Om=function(e){var n,t=e.message,r=e.status,i=e.userId;return rb(t,i)&&nb(r)&&((n=t==null?void 0:t.isUserMessage)===null||n===void 0?void 0:n.call(t))},Uu=function(e){var n=e.message,t=e.userId;return rb(n,t)},w$=function(e){var n,t=e.message,r=e.status;return!!(!((n=t==null?void 0:t.isFileMessage)===null||n===void 0)&&n.call(t)&&nb(r))},Dm=function(e){var n=e.message,t=e.status,r=e.userId;return n.messageType==="user"?Uu({message:n,status:t,userId:r})||Om({message:n,status:t,userId:r})||Rm({message:n,status:t,userId:r})||Lo({message:n,status:t,userId:r}):Uu({message:n,status:t,userId:r})||Lo({message:n,status:t,userId:r})},Lm=function(e){var n,t,r=e.message,i=e.parentRef,a=e.resendMessage,s=e.showEdit,o=e.showRemove,l=e.copyToClipboard,u=e.hideMenu,d=e.isEphemeral,f=d===void 0?!1:d,p=r,m=r==null?void 0:r.sendingStatus,E=Ft().stringSet,g=(t=(n=Tt())===null||n===void 0?void 0:n.config)===null||t===void 0?void 0:t.userId,y=r;return v.createElement(zi,{isOpen:!0,menuItems:function(){return v.createElement(Di,{className:"sendbird-openchannel__mobile-menu",parentRef:i,parentContainRef:i,closeDropdown:u},Rm({message:p,userId:g,status:m})&&v.createElement(pi,{className:"sendbird-openchannel-og-message__top__context-menu__copy",onClick:function(){l==null||l()},testID:"open_channel_mobile_context_menu_copy"},v.createElement(v.Fragment,null,E.CONTEXT_MENU_DROPDOWN__COPY)),!f&&Om({message:r,userId:g,status:m})&&v.createElement(pi,{className:"sendbird-openchannel-og-message__top__context-menu__edit",onClick:function(){s==null||s()},testID:"open_channel_mobile_context_menu_edit"},v.createElement(v.Fragment,null,E.CONTEXT_MENU_DROPDOWN__EDIT)),Lo({message:r,userId:g,status:m})&&v.createElement(pi,{onClick:function(){a==null||a()},testID:"open_channel_mobile_context_menu_resend"},v.createElement(v.Fragment,null,E.CONTEXT_MENU_DROPDOWN__RESEND)),!f&&Uu({message:r,userId:g,status:m})&&v.createElement(pi,{onClick:function(){o==null||o()},testID:"open_channel_mobile_context_menu_delete"},v.createElement(v.Fragment,null,E.CONTEXT_MENU_DROPDOWN__DELETE)),w$({message:r,status:m})&&v.createElement(pi,{onClick:function(){u()},testID:"open_channel_mobile_context_menu_download_file"},v.createElement("a",{className:"sendbird-openchannel__mobile-menu-hyperlink",rel:"noopener noreferrer",href:y==null?void 0:y.url,target:"_blank"},E.CONTEXT_MENU_DROPDOWN__SAVE)))}})};function R$(e){var n=e.className,t=e.message,r=e.isOperator,i=e.isEphemeral,a=i===void 0?!1:i,s=e.userId,o=e.resendMessage,l=e.disabled,u=e.showEdit,d=e.showRemove,f=e.chainTop,p=Ft(),m=p.stringSet,E=p.dateLocale,g=Ul(),y=g.disableUserProfile,S=g.renderUserProfile,C=N.useRef(),T=N.useRef(),I=N.useRef(),L=N.useRef(),D=N.useState({}),O=D[0],R=D[1],k=N.useState(!1),P=k[0],G=k[1],V=t==null?void 0:t.sendingStatus,H=wm(V),F=yf(V),z=Ef(t);N.useEffect(function(){var $;!(($=C==null?void 0:C.current)===null||$===void 0)&&$.clientHeight&&C.current.clientHeight>36?R({top:"8px "}):R({top:"2px"})},[window.innerWidth]);var K=rs({onLongPress:function(){G(!0)}}),ee=_r().isMobile;return!t||t.messageType!=="user"?v.createElement(v.Fragment,null):v.createElement(v.Fragment,null,v.createElement("div",{className:Ae(Ae([],Array.isArray(n)?n:[n],!0),["sendbird-openchannel-user-message"],!1).join(" "),ref:C},v.createElement("div",{className:"sendbird-openchannel-user-message__left"},!f&&v.createElement(zi,{menuTrigger:function($){return v.createElement(Fr,{className:"sendbird-openchannel-user-message__left__avatar",src:z.profileUrl||"",ref:T,width:"28px",height:"28px",onClick:function(){y||$()}})},menuItems:function($){return S?S({user:z,close:$,currentUserId:s,avatarRef:T}):v.createElement(Di,{parentRef:T,parentContainRef:T,closeDropdown:$,style:{paddingTop:"0px",paddingBottom:"0px"}},v.createElement(kl,{user:z,onSuccess:$,disableMessaging:!0}))}})),v.createElement("div",{className:"sendbird-openchannel-user-message__right"},!f&&v.createElement("div",{className:"sendbird-openchannel-user-message__right__top"},v.createElement(Ie,{className:"sendbird-openchannel-user-message__right__top__sender-name",type:Ce.CAPTION_2,color:r?de.SECONDARY_3:de.ONBACKGROUND_2},z&&(z.friendName||z.nickname||z.userId)),v.createElement(Ie,{className:"sendbird-openchannel-user-message__right__top__sent-at",type:Ce.CAPTION_3,color:de.ONBACKGROUND_3},(t==null?void 0:t.createdAt)&&wr(t==null?void 0:t.createdAt,m.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:E}))),v.createElement("div",x({},ee?x({},K):{},{className:"sendbird-openchannel-user-message__right__bottom",ref:L}),v.createElement(Ie,{className:"sendbird-openchannel-user-message__right__bottom__message",type:Ce.BODY_1,color:de.ONBACKGROUND_1},t==null?void 0:t.message,fm(t)&&v.createElement(Ie,{key:Kr(),type:Ce.BODY_1,color:de.ONBACKGROUND_2,className:"sendbird-openchannel-user-message-word"}," ".concat(m.MESSAGE_EDITED," ")))),(H||F)&&v.createElement("div",{className:"sendbird-openchannel-user-message__right__tail"},H&&v.createElement(Ho,{width:"16px",height:"16px"},v.createElement(We,{className:"sendbird-openchannel-user-message__right__tail__pending",type:Se.SPINNER,fillColor:Ve.PRIMARY,width:"16px",height:"16px"})),F&&v.createElement(We,{className:"sendbird-openchannel-user-message__right__tail__failed",type:Se.ERROR,fillColor:Ve.ERROR,width:"16px",height:"16px"}))),!ee&&v.createElement("div",{className:"sendbird-openchannel-user-message__context-menu",ref:I,style:O},v.createElement(zi,{menuTrigger:function($){return Dm({message:t,userId:s,status:V})&&v.createElement(fa,{className:"sendbird-openchannel-user-message__context-menu--icon",width:"32px",height:"32px",onClick:function(){$()}},v.createElement(We,{type:Se.MORE,fillColor:Ve.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function($){return v.createElement(Di,{parentRef:I,parentContainRef:I,closeDropdown:$,openLeft:!0},Rm({message:t,userId:s,status:V})&&v.createElement(pi,{className:"sendbird-openchannel-user-message__context-menu__copy",onClick:function(){Zp(t.message),$()},testID:"open_channel_user_message_menu_copy"},m.CONTEXT_MENU_DROPDOWN__COPY),!a&&Om({message:t,userId:s,status:V})&&v.createElement(pi,{className:"sendbird-openchannel-user-message__context-menu__edit",onClick:function(){l||(u(!0),$())},testID:"open_channel_user_message_menu_edit"},m.CONTEXT_MENU_DROPDOWN__EDIT),Lo({message:t,userId:s,status:V})&&v.createElement(pi,{className:"sendbird-openchannel-user-message__context-menu__resend",onClick:function(){o(t),$()},testID:"open_channel_user_message_menu_resend"},m.CONTEXT_MENU_DROPDOWN__RESEND),!a&&Uu({message:t,userId:s,status:V})&&v.createElement(pi,{className:"sendbird-openchannel-user-message__context-menu__delete",onClick:function(){l||(d(!0),$())},testID:"open_channel_user_message_menu_delete"},m.CONTEXT_MENU_DROPDOWN__DELETE))}}))),P&&v.createElement(Lm,{message:t,parentRef:L,hideMenu:function(){G(!1)},showRemove:function(){G(!1),d(!0)},showEdit:function(){G(!1),u(!0)},copyToClipboard:function(){G(!1),Zp(t==null?void 0:t.message)},resendMessage:function(){G(!1),o(t)}}))}function O$(e){var n=e.className,t=e.message;return v.createElement("div",{className:Ae(Ae([],Array.isArray(n)?n:[n],!0),["sendbird-openchannel-admin-message"],!1).join(" ")},v.createElement(Ie,{className:"sendbird-openchannel-admin-message__text",type:Ce.CAPTION_2,color:de.ONBACKGROUND_2},t.message||""))}function D$(e){var n,t,r,i=e.message,a=e.isOperator,s=e.isEphemeral,o=s===void 0?!1:s,l=e.className,u=e.disabled,d=e.showEdit,f=e.showRemove,p=e.resendMessage,m=e.chainTop,E=e.userId,g=i==null?void 0:i.sendingStatus,y=(n=i.ogMetaData)!==null&&n!==void 0?n:null,S=y==null?void 0:y.defaultImage,C=Ft(),T=C.stringSet,I=C.dateLocale,L=_r().isMobile,D=Ul(),O=D.disableUserProfile,R=D.renderUserProfile,k=N.useState({}),P=k[0],G=k[1],V=N.useState(!1),H=V[0],F=V[1],z=function(){return cd(y==null?void 0:y.url)},K=rs({onLongPress:function(){return F(!0)},onClick:z},{delay:300}),ee=N.useRef(),$=N.useRef(),Q=N.useRef(),ne=N.useRef(),j=wm(g),Z=yf(g),ie=Ef(i),fe=N.useMemo(function(){return Dl({messageText:i.message})},[i==null?void 0:i.updatedAt,i==null?void 0:i.message]);return N.useEffect(function(){var te,le;!((te=ee==null?void 0:ee.current)===null||te===void 0)&&te.clientHeight&&((le=ee==null?void 0:ee.current)===null||le===void 0?void 0:le.clientHeight)>36?G({top:"8px "}):G({top:"2px"})},[window.innerWidth]),!i||i.messageType!=="user"?v.createElement(v.Fragment,null):v.createElement(v.Fragment,null,v.createElement("div",x({className:Ae(Ae([],Array.isArray(l)?l:[l],!0),["sendbird-openchannel-og-message"],!1).join(" "),ref:ee},L?x({},K):{}),v.createElement("div",{className:"sendbird-openchannel-og-message__top"},v.createElement("div",{className:"sendbird-openchannel-og-message__top__left"},!m&&v.createElement(zi,{menuTrigger:function(te){return v.createElement(Fr,{className:"sendbird-openchannel-og-message__top__left__avatar",src:ie.profileUrl||"",ref:ne,width:"28px",height:"28px",onClick:function(){O||te()}})},menuItems:function(te){return R?R({user:ie,close:te,currentUserId:E,avatarRef:ne}):v.createElement(Di,{parentRef:ne,parentContainRef:ne,closeDropdown:te,style:{paddingTop:"0px",paddingBottom:"0px"}},v.createElement(kl,{user:ie,onSuccess:te,disableMessaging:!0}))}})),v.createElement("div",{className:"sendbird-openchannel-og-message__top__right"},!m&&v.createElement("div",{className:"sendbird-openchannel-og-message__top__right__title"},v.createElement(Ie,{className:"sendbird-openchannel-og-message__top__right__title__sender-name",type:Ce.CAPTION_2,color:a?de.SECONDARY_3:de.ONBACKGROUND_2},ie&&(ie.friendName||ie.nickname||ie.userId)),v.createElement(Ie,{className:"sendbird-openchannel-og-message__top__right__title__sent-at",type:Ce.CAPTION_3,color:de.ONBACKGROUND_3},(i==null?void 0:i.createdAt)&&wr(i==null?void 0:i.createdAt,T.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:I}))),v.createElement("div",{className:"sendbird-openchannel-og-message__top__right__description"},v.createElement(Ie,{className:"sendbird-openchannel-og-message__top__right__description__message",type:Ce.BODY_1,color:de.ONBACKGROUND_1},v.createElement(sd,{tokens:fe}),((t=i==null?void 0:i.updatedAt)!==null&&t!==void 0?t:0)>0&&v.createElement(Ie,{key:Kr(),className:"sendbird-openchannel-og-message--word",type:Ce.BODY_1,color:de.ONBACKGROUND_2},T.MESSAGE_EDITED)))),!L&&v.createElement("div",{className:"sendbird-openchannel-og-message__top__context-menu",ref:$,style:P},v.createElement(zi,{menuTrigger:function(te){return Dm({message:i,userId:E,status:g})&&v.createElement(fa,{className:"sendbird-openchannel-og-message__top__context-menu--icon",width:"32px",height:"32px",onClick:function(){te()}},v.createElement(We,{type:Se.MORE,fillColor:Ve.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(te){return v.createElement(Di,{parentRef:$,parentContainRef:$,closeDropdown:te,openLeft:!0},Rm({message:i,userId:E,status:g})&&v.createElement(pi,{className:"sendbird-openchannel-og-message__top__context-menu__copy",onClick:function(){Zp(i.message),te()},testID:"open_channel_og_message_menu_copy"},T.CONTEXT_MENU_DROPDOWN__COPY),!o&&Om({message:i,userId:E,status:g})&&v.createElement(pi,{className:"sendbird-openchannel-og-message__top__context-menu__edit",onClick:function(){u||(d(!0),te())},testID:"open_channel_og_message_menu_edit"},T.CONTEXT_MENU_DROPDOWN__EDIT),Lo({message:i,userId:E,status:g})&&v.createElement(pi,{className:"sendbird-openchannel-og-message__top__context-menu__resend",onClick:function(){p(i),te()},testID:"open_channel_og_message_menu_resend"},T.CONTEXT_MENU_DROPDOWN__RESEND),!o&&Uu({message:i,userId:E,status:g})&&v.createElement(pi,{className:"sendbird-openchannel-og-message__top__context-menu__delete",onClick:function(){u||(f(!0),te())},testID:"open_channel_og_message_menu_delete"},T.CONTEXT_MENU_DROPDOWN__DELETE))}}))),v.createElement("div",{className:"sendbird-openchannel-og-message__bottom"},v.createElement("div",{className:"sendbird-openchannel-og-message__bottom__og-tag",ref:Q},(y==null?void 0:y.url)&&v.createElement(Ie,{className:"sendbird-openchannel-og-message__bottom__og-tag__url",type:Ce.CAPTION_3,color:de.ONBACKGROUND_2},y.url),(y==null?void 0:y.title)&&v.createElement(iO,{className:"sendbird-openchannel-og-message__bottom__og-tag__title",src:(r=y.url)!==null&&r!==void 0?r:"",type:Ce.SUBTITLE_2,color:de.PRIMARY},y.title),(y==null?void 0:y.description)&&v.createElement(Ie,{className:"sendbird-openchannel-og-message__bottom__og-tag__description",type:Ce.BODY_2,color:de.ONBACKGROUND_1},y.description),(y==null?void 0:y.url)&&v.createElement("div",{className:"sendbird-openchannel-og-message__bottom__og-tag__thumbnail",role:"button",onClick:z,onKeyDown:z,tabIndex:0},S&&v.createElement(yr,{className:"sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image",url:S.url||"",alt:S.alt||"",width:"334px",height:"189px",defaultComponent:v.createElement("div",{className:"sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image--placeholder"},v.createElement(We,{type:Se.THUMBNAIL_NONE,width:"56px",height:"56px"}))}))),(j||Z)&&v.createElement("div",{className:"sendbird-openchannel-og-message__top__right__tail"},j&&v.createElement(Ho,{width:"16px",height:"16px"},v.createElement(We,{className:"sendbird-openchannel-og-message__top__right__tail__pending",type:Se.SPINNER,fillColor:Ve.PRIMARY,width:"16px",height:"16px"})),Z&&v.createElement(We,{className:"sendbird-openchannel-og-message__top__right__tail__failed",type:Se.ERROR,fillColor:Ve.ERROR,width:"16px",height:"16px"})))),H&&v.createElement(Lm,{message:i,parentRef:Q,hideMenu:function(){F(!1)},showRemove:function(){F(!1),f(!0)},showEdit:function(){F(!1),d(!0)},copyToClipboard:function(){F(!1),Zp(i==null?void 0:i.message)},resendMessage:function(){F(!1),p(i)}}))}var Kc={IMAGE:"IMAGE",VIDEO:"VIDEO",UNSUPPORTED:"UNSUPPORTED"},pA={IMAGE:["image/jpeg","image/jpg","image/png","image/gif","image/webp"],VIDEO:["video/mpeg","video/ogg","video/webm","video/mp4"]},L$=function(e){return pA.IMAGE.indexOf(e)>=0?Kc.IMAGE:pA.VIDEO.indexOf(e)>=0?Kc.VIDEO:Kc.UNSUPPORTED};function U$(e){var n,t=e.className,r=e.message,i=e.isOperator,a=e.isEphemeral,s=a===void 0?!1:a,o=e.disabled,l=e.userId,u=e.chainTop,d=e.onClick,f=e.showRemove,p=e.resendMessage,m=r.type,E=r.url,g=r.thumbnails,y=r.localUrl,S=r==null?void 0:r.sendingStatus,C=g&&g.length>0&&g[0].url||null,T=Ft(),I=T.stringSet,L=T.dateLocale,D=Ul(),O=D.disableUserProfile,R=D.renderUserProfile,k=N.useState(360),P=k[0],G=k[1],V=N.useState(!1),H=V[0],F=V[1],z=N.useRef(null),K=N.useRef(null),ee=N.useRef(null),$=N.useRef(null),Q=rs({onLongPress:function(){F(!0)},onClick:function(){d(!0)}}),ne=_r().isMobile,j=N.useMemo(function(){return function(le){return function(Me){var ae=Me.style;return v.createElement("div",{style:ae},v.createElement(We,{type:le,fillColor:Ve.ON_BACKGROUND_2,width:"56px",height:"56px"}))}}},[]),Z=nb(S),ie=wm(S),fe=yf(S),te=Ef(r);return N.useEffect(function(){var le,Me,ae=((Me=(le=z==null?void 0:z.current)===null||le===void 0?void 0:le.clientWidth)!==null&&Me!==void 0?Me:0)-80;G(ae>360?360:ae)},[]),v.createElement(v.Fragment,null,v.createElement("div",{className:Ae(Ae([],Array.isArray(t)?t:[t],!0),["sendbird-openchannel-thumbnail-message"],!1).join(" "),ref:z},v.createElement("div",{className:"sendbird-openchannel-thumbnail-message__left"},!u&&v.createElement(zi,{menuTrigger:function(le){return v.createElement(Fr,{className:"sendbird-openchannel-thumbnail-message__left__avatar",src:te.profileUrl||"",ref:$,width:"28px",height:"28px",onClick:function(){O||le()}})},menuItems:function(le){return R?R({user:te,close:le,currentUserId:l,avatarRef:$}):v.createElement(Di,{parentRef:$,parentContainRef:$,closeDropdown:le,style:{paddingTop:"0px",paddingBottom:"0px"}},v.createElement(kl,{user:te,onSuccess:le,disableMessaging:!0}))}})),v.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right"},!u&&v.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__title"},v.createElement(Ie,{className:"sendbird-openchannel-thumbnail-message__right__title__sender-name",type:Ce.CAPTION_2,color:i?de.SECONDARY_3:de.ONBACKGROUND_2},te&&(te.friendName||te.nickname||te.userId)),v.createElement(Ie,{className:"sendbird-openchannel-thumbnail-message__right__title__sent-at",type:Ce.CAPTION_3,color:de.ONBACKGROUND_3},(r==null?void 0:r.createdAt)&&wr(r.createdAt,I.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:L}))),v.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__body",ref:K},v.createElement("div",x({className:"sendbird-openchannel-thumbnail-message__right__body__wrap",role:"button",onClick:function(){Z&&d(!0)},onKeyDown:function(){Z&&d(!0)},tabIndex:0},ne?x({},Q):{}),v.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__overlay"}),(n={},n[Kc.VIDEO]=E||y?v.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video"},C?v.createElement(yr,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video",url:C,width:P,height:"270px",alt:"image",placeHolder:j(Se.PLAY)}):v.createElement("video",{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video__video"},v.createElement("source",{src:E||y,type:m})),v.createElement(We,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video__icon",type:Se.PLAY,fillColor:Ve.ON_BACKGROUND_2,width:"56px",height:"56px"})):v.createElement(We,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video--icon",type:Se.PHOTO,fillColor:Ve.ON_BACKGROUND_2,width:"56px",height:"56px"}),n[Kc.IMAGE]=E||y?v.createElement(yr,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__image",url:C||E||y||"",alt:"image",width:P,height:"270px",placeHolder:j(Se.PHOTO)}):v.createElement(We,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__image--icon",type:Se.PHOTO,fillColor:Ve.ON_BACKGROUND_2,width:"56px",height:"56px"}),n[Kc.UNSUPPORTED]=v.createElement(We,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__unknown",type:Se.PHOTO,fillColor:Ve.ON_BACKGROUND_2,width:"56px",height:"56px"}),n)[L$(m)])),(ie||fe)&&v.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__tail"},ie&&v.createElement(Ho,{width:"16px",height:"16px"},v.createElement(We,{className:"sendbird-openchannel-thumbnail-message__right__tail__pending",type:Se.SPINNER,fillColor:Ve.PRIMARY,width:"16px",height:"16px"})),fe&&v.createElement(We,{className:"sendbird-openchannel-thumbnail-message__right__tail__failed",type:Se.ERROR,fillColor:Ve.ERROR,width:"16px",height:"16px"}))),!ne&&v.createElement("div",{className:"sendbird-openchannel-thumbnail-message__context-menu",ref:ee},(Lo({message:r,userId:l,status:S})||!s)&&v.createElement(zi,{menuTrigger:function(le){return Dm({message:r,userId:l,status:S})&&v.createElement(fa,{className:"sendbird-openchannel-thumbnail-message__context-menu--icon",width:"32px",height:"32px",onClick:le},v.createElement(We,{type:Se.MORE,fillColor:Ve.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(le){return v.createElement(Di,{parentRef:ee,parentContainRef:ee,closeDropdown:le,openLeft:!0},Lo({message:r,userId:l,status:S})&&v.createElement(pi,{onClick:function(){p(r),le()},testID:"open_channel_thumbnail_message_menu_resend"},I.CONTEXT_MENU_DROPDOWN__RESEND),!s&&Uu({message:r,userId:l,status:S})&&v.createElement(pi,{onClick:function(){o||(f(!0),le())},testID:"open_channel_thumbnail_message_menu_delete"},I.CONTEXT_MENU_DROPDOWN__DELETE))}}))),H&&v.createElement(Lm,{message:r,parentRef:K,hideMenu:function(){F(!1)},showRemove:function(){F(!1),f(!0)},resendMessage:function(){F(!1),p(r)}}))}var mA=function(e){var n=/(\.mp3)$/i,t=/(\.gif)$/i;return n.test(e)?Se.FILE_AUDIO:t.test(e)?Se.GIF:Se.FILE_DOCUMENT},k$=function(e,n){if(e==null)return"";if(e.length<=n)return e;var t="...",r=t.length,i=n-r,a=Math.ceil(i/2),s=Math.floor(i/2);return e.substr(0,a)+t+e.substr(e.length-s)};function P$(e){var n=e.className,t=e.message,r=e.isOperator,i=e.isEphemeral,a=i===void 0?!1:i,s=e.userId,o=e.disabled,l=e.chainTop,u=e.showRemove,d=e.resendMessage,f=t==null?void 0:t.sendingStatus,p=Ft(),m=p.dateLocale,E=p.stringSet,g=N.useRef(null),y=N.useRef(null),S=N.useRef(null),C=Ul(),T=C.disableUserProfile,I=C.renderUserProfile,L=_r().isMobile,D=function(){return cd(t.url)},O=wm(f),R=yf(f),k=Ef(t),P=N.useState(!1),G=P[0],V=P[1],H=rs({onLongPress:function(){L&&V(!0)},onClick:D},{delay:300});return v.createElement(v.Fragment,null,v.createElement("div",{className:Ae(Ae([],Array.isArray(n)?n:[n],!0),["sendbird-openchannel-file-message"],!1).join(" "),ref:y},v.createElement("div",{className:"sendbird-openchannel-file-message__left"},!l&&v.createElement(zi,{menuTrigger:function(F){return v.createElement(Fr,{className:"sendbird-openchannel-file-message__left__avatar",src:k.profileUrl||"",ref:S,width:"28px",height:"28px",onClick:function(){T||F()}})},menuItems:function(F){return I?I({user:k,close:F,currentUserId:s,avatarRef:S}):v.createElement(Di,{parentRef:S,parentContainRef:S,closeDropdown:F,style:{paddingTop:"0px",paddingBottom:"0px"}},v.createElement(kl,{user:k,onSuccess:F,disableMessaging:!0}))}})),v.createElement("div",{className:"sendbird-openchannel-file-message__right"},!l&&v.createElement("div",{className:"sendbird-openchannel-file-message__right__title"},v.createElement(Ie,{className:"sendbird-openchannel-file-message__right__title__sender-name",type:Ce.CAPTION_2,color:r?de.SECONDARY_3:de.ONBACKGROUND_2},k&&(k.friendName||k.nickname||k.userId)),v.createElement(Ie,{className:"sendbird-openchannel-file-message__right__title__sent-at",type:Ce.CAPTION_3,color:de.ONBACKGROUND_3},(t==null?void 0:t.createdAt)&&wr(t.createdAt,E.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:m}))),v.createElement("div",x({className:"sendbird-openchannel-file-message__right__body"},L?x({},H):{}),mA(t.url)&&v.createElement(We,{className:"sendbird-openchannel-file-message__right__body__icon",type:mA(t.url),fillColor:Ve.PRIMARY,width:"48px",height:"48px"}),v.createElement(to,{className:"sendbird-openchannel-file-message__right__body__file-name",onClick:D},v.createElement(Ie,{type:Ce.BODY_1,color:de.ONBACKGROUND_1},k$(t.name||t.url,40)))),(O||R)&&v.createElement("div",{className:"sendbird-openchannel-file-message__right__tail"},O&&v.createElement(Ho,{width:"16px",height:"16px"},v.createElement(We,{className:"sendbird-openchannel-file-message__right__tail__pending",type:Se.SPINNER,fillColor:Ve.PRIMARY,width:"16px",height:"16px"})),R&&v.createElement(We,{className:"sendbird-openchannel-file-message__right__tail__failed",type:Se.ERROR,fillColor:Ve.ERROR,width:"16px",height:"16px"}))),!L&&v.createElement("div",{className:"sendbird-openchannel-file-message__context-menu",ref:g},(Lo({message:t,userId:s,status:f})||!a)&&v.createElement(zi,{menuTrigger:function(F){return Dm({message:t,userId:s,status:f})&&v.createElement(fa,{className:"sendbird-openchannel-file-message__context-menu__icon",width:"32px",height:"32px",onClick:F},v.createElement(We,{type:Se.MORE,width:"24px",height:"24px"}))},menuItems:function(F){return v.createElement(Di,{parentRef:g,parentContainRef:g,closeDropdown:F,openLeft:!0},Lo({message:t,userId:s,status:f})&&v.createElement(pi,{onClick:function(){o||(d(t),F())},testID:"open_channel_file_message_context_menu_resend"},E.CONTEXT_MENU_DROPDOWN__RESEND),!a&&Uu({message:t,userId:s,status:f})&&v.createElement(pi,{onClick:function(){o||(u(!0),F())},testID:"open_channel_file_message_context_menu_delete"},E.CONTEXT_MENU_DROPDOWN__DELETE))}}))),G&&v.createElement(Lm,{message:t,hideMenu:function(){V(!1)},parentRef:y,showRemove:function(){V(!1),u(!0)}}))}function x$(e){var n=e.message,t=e.onCloseModal,r=e.onDeleteMessage,i=N.useContext(wn).stringSet;return v.createElement(Rr,{onCancel:t,onSubmit:r,submitText:i.MESSAGE_MENU__DELETE,titleText:MC(i,n)})}var Qa={ADMIN:"ADMIN",USER:"USER",FILE:"FILE",THUMBNAIL:"THUMBNAIL",OG:"OG",UNKNOWN:"UNKNOWN"},_A={NONE:"none",SUCCEEDED:"succeeded",FAILED:"failed",PENDING:"pending"},F$=function(e,n){var t,r,i=n==null?void 0:n.isOgMessageEnabledInOpenChannel;return!((t=e==null?void 0:e.isUserMessage)===null||t===void 0)&&t.call(e)||(e==null?void 0:e.messageType)==="user"?e!=null&&e.ogMetaData&&i?Qa.OG:Qa.USER:!((r=e==null?void 0:e.isAdminMessage)===null||r===void 0)&&r.call(e)?Qa.ADMIN:(e==null?void 0:e.messageType)==="file"?As(e.type)||Oo(e.type)?Qa.THUMBNAIL:Qa.FILE:Qa.UNKNOWN};function H$(e){var n,t,r=e.message,i=e.chainTop,a=e.chainBottom,s=e.hasSeparator,o=e.renderMessage,l=eb(),u=l.currentOpenChannel,d=l.deleteMessage,f=l.updateMessage,p=l.resendMessage,m=Ft(),E=m.dateLocale,g=m.stringSet,y=u==null?void 0:u.isFrozen,S=Tt(),C=(t=S==null?void 0:S.config)===null||t===void 0?void 0:t.userId,T=S.config.openChannel.enableOgtag,I;(r==null?void 0:r.messageType)!=="admin"&&(I=r==null?void 0:r.sender);var L=N.useState(!1),D=L[0],O=L[1],R=N.useState(!1),k=R[0],P=R[1],G=N.useState(!1),V=G[0],H=G[1],F=N.useRef(null),z=!1;return I&&(r==null?void 0:r.messageType)!=="admin"&&(z=C===I.userId||(r==null?void 0:r.sendingStatus)===_A.PENDING||(r==null?void 0:r.sendingStatus)===_A.FAILED),o?v.createElement("div",{className:"sendbird-msg-hoc sendbird-msg--scroll-ref","data-testid":"sendbird-message-hoc"},o({message:r,chainTop:i,chainBottom:a})):(r==null?void 0:r.messageType)==="user"&&D?v.createElement(Ku,{isEdit:!0,channel:u,disabled:y,ref:F,message:r,onUpdateMessage:function(K){var ee=K.messageId,$=K.message;f(ee,$),O(!1)},onCancelEdit:function(){O(!1)}}):v.createElement("div",{className:"sendbird-msg-hoc sendbird-msg--scroll-ref","data-testid":"sendbird-message-hoc"},v.createElement(v.Fragment,null,s&&(r==null?void 0:r.createdAt)&&v.createElement(uC,null,v.createElement(Ie,{type:Ce.CAPTION_2,color:de.ONBACKGROUND_2},wr(r==null?void 0:r.createdAt,g.DATE_FORMAT__MESSAGE_LIST__DATE_SEPARATOR,{locale:E}))),(n={},n[Qa.ADMIN]=function(){if((r==null?void 0:r.messageType)==="admin")return v.createElement(O$,{message:r})}(),n[Qa.FILE]=function(){var K;if((r==null?void 0:r.messageType)==="file")return v.createElement(P$,{message:r,isOperator:u==null?void 0:u.isOperator((K=r==null?void 0:r.sender)===null||K===void 0?void 0:K.userId),isEphemeral:u==null?void 0:u.isEphemeral,disabled:y,userId:C,showRemove:P,resendMessage:p,chainTop:i,chainBottom:a})}(),n[Qa.OG]=function(){var K;if((r==null?void 0:r.messageType)==="user"&&T)return v.createElement(D$,{message:r,isOperator:u==null?void 0:u.isOperator((K=r==null?void 0:r.sender)===null||K===void 0?void 0:K.userId),isEphemeral:u==null?void 0:u.isEphemeral,userId:C,showEdit:O,disabled:y,showRemove:P,resendMessage:p,chainTop:i,chainBottom:a})}(),n[Qa.THUMBNAIL]=function(){var K;if((r==null?void 0:r.messageType)==="file")return v.createElement(U$,{message:r,isOperator:u==null?void 0:u.isOperator((K=r==null?void 0:r.sender)===null||K===void 0?void 0:K.userId),isEphemeral:u==null?void 0:u.isEphemeral,disabled:y,userId:C,showRemove:P,resendMessage:p,onClick:H,chainTop:i,chainBottom:a})}(),n[Qa.USER]=function(){var K;if((r==null?void 0:r.messageType)==="user")return v.createElement(R$,{message:r,isOperator:u==null?void 0:u.isOperator((K=r==null?void 0:r.sender)===null||K===void 0?void 0:K.userId),isEphemeral:u==null?void 0:u.isEphemeral,userId:C,disabled:y,showEdit:O,showRemove:P,resendMessage:p,chainTop:i,chainBottom:a})}(),n[Qa.UNKNOWN]=function(){}(),n)[F$(r,{isOgMessageEnabledInOpenChannel:T})],k&&v.createElement(x$,{message:r,onCloseModal:function(){return P(!1)},onDeleteMessage:function(){(r==null?void 0:r.messageType)!=="admin"&&d(r)}}),V&&(r==null?void 0:r.messageType)==="file"&&v.createElement(Cm,{onClose:function(){return H(!1)},message:r,onDelete:function(){return d(r)},isByMe:z})))}function B$(e,n){var t=eb(),r=t.isMessageGroupingEnabled,i=r===void 0?!0:r,a=t.allMessages,s=t.hasMore,o=t.onScroll,l=Tt(),u=l.config.userId,d=N.useRef(null),f=n||d,p=N.useState(!1),m=p[0],E=p[1],g=function(){f&&"current"in f&&f.current&&(f.current.scrollTo(0,f.current.scrollHeight),E(!1))},y=JO({setShowScrollDownButton:E,hasMore:s,onScroll:o,scrollRef:f}),S=N.useMemo(function(){var C;return a.length>0?a.map(function(T,I){var L,D=a[I-1],O=a[I-1],R=D&&D.createdAt,k=T==null?void 0:T.createdAt,P=!(R&&gm(k,R)),G=i?AC(D,T,O):[!1,!1],V=G[0],H=G[1],F=((L=T==null?void 0:T.sender)===null||L===void 0?void 0:L.userId)===u,z=(T==null?void 0:T.messageId)||(T==null?void 0:T.reqId);return v.createElement(Lu,{message:T,isByMe:F,key:z},v.createElement(H$,{message:T,chainTop:V,chainBottom:H,hasSeparator:P,renderMessage:e==null?void 0:e.renderMessage}))}):((C=e==null?void 0:e.renderPlaceHolderEmptyList)===null||C===void 0?void 0:C.call(e))||v.createElement(Mr,{className:"sendbird-openchannel-conversation-scroll__container__place-holder",type:kn.NO_MESSAGES})},[a]);return v.createElement("div",{className:"sendbird-openchannel-conversation-scroll"},v.createElement("div",{className:"sendbird-openchannel-conversation-scroll__container"},v.createElement("div",{className:"sendbird-openchannel-conversation-scroll__container__padding"}),v.createElement("div",{className:["sendbird-openchannel-conversation-scroll__container__item-container",a.length>0?"":"no-messages"].join(" "),onScroll:y,ref:f},S)),m&&v.createElement("div",{className:"sendbird-openchannel-conversation-scroll__container__scroll-bottom-button",onClick:g,onKeyDown:g,tabIndex:0,role:"button"},v.createElement(We,{width:"24px",height:"24px",type:Se.CHEVRON_DOWN,fillColor:Ve.CONTENT})))}v.forwardRef(B$);v.createContext(null);N.createContext({openedListKeys:[],addOpenedListKey:Cn,removeOpenedListKey:Cn,clearOpenedListKeys:Cn,allowMultipleOpen:!1});function G$(){const[e,n]=N.useState({userId:"",nickname:"",accessToken:""}),[t,r]=N.useState(!1);return N.useEffect(()=>{const i=()=>{r(window.innerWidth<=768)};return i(),window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i)}},[]),N.useEffect(()=>{fetch("/api/chat-session",{credentials:"include"}).then(i=>{if(!i.ok)throw new Error("Failed to fetch session data");return i.json()}).then(i=>{console.log("Session Data:",i),n({userId:i.userId.toString(),nickname:i.nickname||"Guest",accessToken:i.accessToken||""})}).catch(i=>{console.error("Error fetching session:",i)})},[]),yh.jsx("div",{style:{width:"100vw",height:"100vh",overflow:"hidden",backgroundColor:"#242424",color:"rgba(255, 255, 255, 0.87)"},children:e.userId?yh.jsx(M$,{appId:"E36B0FE7-C481-4327-B8B2-715E0B1F4F76",userId:e.userId,accessToken:e.accessToken,nickname:e.nickname,theme:"dark",breakpoint:t?"768px":void 0}):yh.jsx("p",{children:"Loading..."})})}EL.createRoot(document.getElementById("root")).render(yh.jsx(N.StrictMode,{children:yh.jsx(G$,{})}));const V$=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{He as M,RA as Q,j$ as V,z$ as c,dL as g,Ep as i,Gi as n,Qc as q,Y as s,J as v,Iy as z};
