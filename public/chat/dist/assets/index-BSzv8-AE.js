(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var Ene=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qD(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var zg={exports:{}},gh={},jg={exports:{}},Bn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _T;function KD(){if(_T)return Bn;_T=1;var e=Symbol.for("react.element"),n=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function m($){return $===null||typeof $!="object"?null:($=f&&$[f]||$["@@iterator"],typeof $=="function"?$:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,_={};function b($,te,re){this.props=$,this.context=te,this.refs=_,this.updater=re||p}b.prototype.isReactComponent={},b.prototype.setState=function($,te){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,te,"setState")},b.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function C(){}C.prototype=b.prototype;function y($,te,re){this.props=$,this.context=te,this.refs=_,this.updater=re||p}var T=y.prototype=new C;T.constructor=y,E(T,b.prototype),T.isPureReactComponent=!0;var N=Array.isArray,w=Object.prototype.hasOwnProperty,O={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function P($,te,re){var ve,ie={},le=null,Ae=null;if(te!=null)for(ve in te.ref!==void 0&&(Ae=te.ref),te.key!==void 0&&(le=""+te.key),te)w.call(te,ve)&&!L.hasOwnProperty(ve)&&(ie[ve]=te[ve]);var oe=arguments.length-2;if(oe===1)ie.children=re;else if(1<oe){for(var he=Array(oe),me=0;me<oe;me++)he[me]=arguments[me+2];ie.children=he}if($&&$.defaultProps)for(ve in oe=$.defaultProps,oe)ie[ve]===void 0&&(ie[ve]=oe[ve]);return{$$typeof:e,type:$,key:le,ref:Ae,props:ie,_owner:O.current}}function U($,te){return{$$typeof:e,type:$.type,key:te,ref:$.ref,props:$.props,_owner:$._owner}}function B($){return typeof $=="object"&&$!==null&&$.$$typeof===e}function F($){var te={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(re){return te[re]})}var H=/\/+/g;function G($,te){return typeof $=="object"&&$!==null&&$.key!=null?F(""+$.key):te.toString(36)}function j($,te,re,ve,ie){var le=typeof $;(le==="undefined"||le==="boolean")&&($=null);var Ae=!1;if($===null)Ae=!0;else switch(le){case"string":case"number":Ae=!0;break;case"object":switch($.$$typeof){case e:case n:Ae=!0}}if(Ae)return Ae=$,ie=ie(Ae),$=ve===""?"."+G(Ae,0):ve,N(ie)?(re="",$!=null&&(re=$.replace(H,"$&/")+"/"),j(ie,te,re,"",function(me){return me})):ie!=null&&(B(ie)&&(ie=U(ie,re+(!ie.key||Ae&&Ae.key===ie.key?"":(""+ie.key).replace(H,"$&/")+"/")+$)),te.push(ie)),1;if(Ae=0,ve=ve===""?".":ve+":",N($))for(var oe=0;oe<$.length;oe++){le=$[oe];var he=ve+G(le,oe);Ae+=j(le,te,re,he,ie)}else if(he=m($),typeof he=="function")for($=he.call($),oe=0;!(le=$.next()).done;)le=le.value,he=ve+G(le,oe++),Ae+=j(le,te,re,he,ie);else if(le==="object")throw te=String($),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return Ae}function x($,te,re){if($==null)return $;var ve=[],ie=0;return j($,ve,"","",function(le){return te.call(re,le,ie++)}),ve}function V($){if($._status===-1){var te=$._result;te=te(),te.then(function(re){($._status===0||$._status===-1)&&($._status=1,$._result=re)},function(re){($._status===0||$._status===-1)&&($._status=2,$._result=re)}),$._status===-1&&($._status=0,$._result=te)}if($._status===1)return $._result.default;throw $._result}var K={current:null},W={transition:null},Q={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:W,ReactCurrentOwner:O};function J(){throw Error("act(...) is not supported in production builds of React.")}return Bn.Children={map:x,forEach:function($,te,re){x($,function(){te.apply(this,arguments)},re)},count:function($){var te=0;return x($,function(){te++}),te},toArray:function($){return x($,function(te){return te})||[]},only:function($){if(!B($))throw Error("React.Children.only expected to receive a single React element child.");return $}},Bn.Component=b,Bn.Fragment=t,Bn.Profiler=i,Bn.PureComponent=y,Bn.StrictMode=r,Bn.Suspense=l,Bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,Bn.act=J,Bn.cloneElement=function($,te,re){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var ve=E({},$.props),ie=$.key,le=$.ref,Ae=$._owner;if(te!=null){if(te.ref!==void 0&&(le=te.ref,Ae=O.current),te.key!==void 0&&(ie=""+te.key),$.type&&$.type.defaultProps)var oe=$.type.defaultProps;for(he in te)w.call(te,he)&&!L.hasOwnProperty(he)&&(ve[he]=te[he]===void 0&&oe!==void 0?oe[he]:te[he])}var he=arguments.length-2;if(he===1)ve.children=re;else if(1<he){oe=Array(he);for(var me=0;me<he;me++)oe[me]=arguments[me+2];ve.children=oe}return{$$typeof:e,type:$.type,key:ie,ref:le,props:ve,_owner:Ae}},Bn.createContext=function($){return $={$$typeof:s,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:a,_context:$},$.Consumer=$},Bn.createElement=P,Bn.createFactory=function($){var te=P.bind(null,$);return te.type=$,te},Bn.createRef=function(){return{current:null}},Bn.forwardRef=function($){return{$$typeof:o,render:$}},Bn.isValidElement=B,Bn.lazy=function($){return{$$typeof:d,_payload:{_status:-1,_result:$},_init:V}},Bn.memo=function($,te){return{$$typeof:u,type:$,compare:te===void 0?null:te}},Bn.startTransition=function($){var te=W.transition;W.transition={};try{$()}finally{W.transition=te}},Bn.unstable_act=J,Bn.useCallback=function($,te){return K.current.useCallback($,te)},Bn.useContext=function($){return K.current.useContext($)},Bn.useDebugValue=function(){},Bn.useDeferredValue=function($){return K.current.useDeferredValue($)},Bn.useEffect=function($,te){return K.current.useEffect($,te)},Bn.useId=function(){return K.current.useId()},Bn.useImperativeHandle=function($,te,re){return K.current.useImperativeHandle($,te,re)},Bn.useInsertionEffect=function($,te){return K.current.useInsertionEffect($,te)},Bn.useLayoutEffect=function($,te){return K.current.useLayoutEffect($,te)},Bn.useMemo=function($,te){return K.current.useMemo($,te)},Bn.useReducer=function($,te,re){return K.current.useReducer($,te,re)},Bn.useRef=function($){return K.current.useRef($)},Bn.useState=function($){return K.current.useState($)},Bn.useSyncExternalStore=function($,te,re){return K.current.useSyncExternalStore($,te,re)},Bn.useTransition=function(){return K.current.useTransition()},Bn.version="18.3.1",Bn}var ET;function vb(){return ET||(ET=1,jg.exports=KD()),jg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yT;function WD(){if(yT)return gh;yT=1;var e=vb(),n=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function s(o,l,u){var d,f={},m=null,p=null;u!==void 0&&(m=""+u),l.key!==void 0&&(m=""+l.key),l.ref!==void 0&&(p=l.ref);for(d in l)r.call(l,d)&&!a.hasOwnProperty(d)&&(f[d]=l[d]);if(o&&o.defaultProps)for(d in l=o.defaultProps,l)f[d]===void 0&&(f[d]=l[d]);return{$$typeof:n,type:o,key:m,ref:p,props:f,_owner:i.current}}return gh.Fragment=t,gh.jsx=s,gh.jsxs=s,gh}var bT;function QD(){return bT||(bT=1,zg.exports=WD()),zg.exports}var ui=QD(),M=vb();const v=qD(M);var $v={},Vg={exports:{}},ha={},$g={exports:{}},qg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CT;function YD(){return CT||(CT=1,function(e){function n(W,Q){var J=W.length;W.push(Q);e:for(;0<J;){var $=J-1>>>1,te=W[$];if(0<i(te,Q))W[$]=Q,W[J]=te,J=$;else break e}}function t(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var Q=W[0],J=W.pop();if(J!==Q){W[0]=J;e:for(var $=0,te=W.length,re=te>>>1;$<re;){var ve=2*($+1)-1,ie=W[ve],le=ve+1,Ae=W[le];if(0>i(ie,J))le<te&&0>i(Ae,ie)?(W[$]=Ae,W[le]=J,$=le):(W[$]=ie,W[ve]=J,$=ve);else if(le<te&&0>i(Ae,J))W[$]=Ae,W[le]=J,$=le;else break e}}return Q}function i(W,Q){var J=W.sortIndex-Q.sortIndex;return J!==0?J:W.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],u=[],d=1,f=null,m=3,p=!1,E=!1,_=!1,b=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(W){for(var Q=t(u);Q!==null;){if(Q.callback===null)r(u);else if(Q.startTime<=W)r(u),Q.sortIndex=Q.expirationTime,n(l,Q);else break;Q=t(u)}}function N(W){if(_=!1,T(W),!E)if(t(l)!==null)E=!0,V(w);else{var Q=t(u);Q!==null&&K(N,Q.startTime-W)}}function w(W,Q){E=!1,_&&(_=!1,C(P),P=-1),p=!0;var J=m;try{for(T(Q),f=t(l);f!==null&&(!(f.expirationTime>Q)||W&&!F());){var $=f.callback;if(typeof $=="function"){f.callback=null,m=f.priorityLevel;var te=$(f.expirationTime<=Q);Q=e.unstable_now(),typeof te=="function"?f.callback=te:f===t(l)&&r(l),T(Q)}else r(l);f=t(l)}if(f!==null)var re=!0;else{var ve=t(u);ve!==null&&K(N,ve.startTime-Q),re=!1}return re}finally{f=null,m=J,p=!1}}var O=!1,L=null,P=-1,U=5,B=-1;function F(){return!(e.unstable_now()-B<U)}function H(){if(L!==null){var W=e.unstable_now();B=W;var Q=!0;try{Q=L(!0,W)}finally{Q?G():(O=!1,L=null)}}else O=!1}var G;if(typeof y=="function")G=function(){y(H)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,x=j.port2;j.port1.onmessage=H,G=function(){x.postMessage(null)}}else G=function(){b(H,0)};function V(W){L=W,O||(O=!0,G())}function K(W,Q){P=b(function(){W(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_continueExecution=function(){E||p||(E=!0,V(w))},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return t(l)},e.unstable_next=function(W){switch(m){case 1:case 2:case 3:var Q=3;break;default:Q=m}var J=m;m=Q;try{return W()}finally{m=J}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(W,Q){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var J=m;m=W;try{return Q()}finally{m=J}},e.unstable_scheduleCallback=function(W,Q,J){var $=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?$+J:$):J=$,W){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=J+te,W={id:d++,callback:Q,priorityLevel:W,startTime:J,expirationTime:te,sortIndex:-1},J>$?(W.sortIndex=J,n(u,W),t(l)===null&&W===t(u)&&(_?(C(P),P=-1):_=!0,K(N,J-$))):(W.sortIndex=te,n(l,W),E||p||(E=!0,V(w))),W},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(W){var Q=m;return function(){var J=m;m=Q;try{return W.apply(this,arguments)}finally{m=J}}}}(qg)),qg}var ST;function XD(){return ST||(ST=1,$g.exports=YD()),$g.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TT;function ZD(){if(TT)return ha;TT=1;var e=vb(),n=XD();function t(c){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+c,g=1;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(c,h){s(c,h),s(c+"Capture",h)}function s(c,h){for(i[c]=h,c=0;c<h.length;c++)r.add(h[c])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},f={};function m(c){return l.call(f,c)?!0:l.call(d,c)?!1:u.test(c)?f[c]=!0:(d[c]=!0,!1)}function p(c,h,g,S){if(g!==null&&g.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return S?!1:g!==null?!g.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function E(c,h,g,S){if(h===null||typeof h>"u"||p(c,h,g,S))return!0;if(S)return!1;if(g!==null)switch(g.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function _(c,h,g,S,R,k,q){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=S,this.attributeNamespace=R,this.mustUseProperty=g,this.propertyName=c,this.type=h,this.sanitizeURL=k,this.removeEmptyString=q}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){b[c]=new _(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var h=c[0];b[h]=new _(h,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){b[c]=new _(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){b[c]=new _(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){b[c]=new _(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){b[c]=new _(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){b[c]=new _(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){b[c]=new _(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){b[c]=new _(c,5,!1,c.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function y(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var h=c.replace(C,y);b[h]=new _(h,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var h=c.replace(C,y);b[h]=new _(h,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var h=c.replace(C,y);b[h]=new _(h,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){b[c]=new _(c,1,!1,c.toLowerCase(),null,!1,!1)}),b.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){b[c]=new _(c,1,!1,c.toLowerCase(),null,!0,!0)});function T(c,h,g,S){var R=b.hasOwnProperty(h)?b[h]:null;(R!==null?R.type!==0:S||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(E(h,g,R,S)&&(g=null),S||R===null?m(h)&&(g===null?c.removeAttribute(h):c.setAttribute(h,""+g)):R.mustUseProperty?c[R.propertyName]=g===null?R.type===3?!1:"":g:(h=R.attributeName,S=R.attributeNamespace,g===null?c.removeAttribute(h):(R=R.type,g=R===3||R===4&&g===!0?"":""+g,S?c.setAttributeNS(S,h,g):c.setAttribute(h,g))))}var N=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),O=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),F=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),W=Symbol.iterator;function Q(c){return c===null||typeof c!="object"?null:(c=W&&c[W]||c["@@iterator"],typeof c=="function"?c:null)}var J=Object.assign,$;function te(c){if($===void 0)try{throw Error()}catch(g){var h=g.stack.trim().match(/\n( *(at )?)/);$=h&&h[1]||""}return`
`+$+c}var re=!1;function ve(c,h){if(!c||re)return"";re=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(Re){var S=Re}Reflect.construct(c,[],h)}else{try{h.call()}catch(Re){S=Re}c.call(h.prototype)}else{try{throw Error()}catch(Re){S=Re}c()}}catch(Re){if(Re&&S&&typeof Re.stack=="string"){for(var R=Re.stack.split(`
`),k=S.stack.split(`
`),q=R.length-1,ne=k.length-1;1<=q&&0<=ne&&R[q]!==k[ne];)ne--;for(;1<=q&&0<=ne;q--,ne--)if(R[q]!==k[ne]){if(q!==1||ne!==1)do if(q--,ne--,0>ne||R[q]!==k[ne]){var se=`
`+R[q].replace(" at new "," at ");return c.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",c.displayName)),se}while(1<=q&&0<=ne);break}}}finally{re=!1,Error.prepareStackTrace=g}return(c=c?c.displayName||c.name:"")?te(c):""}function ie(c){switch(c.tag){case 5:return te(c.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return c=ve(c.type,!1),c;case 11:return c=ve(c.type.render,!1),c;case 1:return c=ve(c.type,!0),c;default:return""}}function le(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case L:return"Fragment";case O:return"Portal";case U:return"Profiler";case P:return"StrictMode";case G:return"Suspense";case j:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case F:return(c.displayName||"Context")+".Consumer";case B:return(c._context.displayName||"Context")+".Provider";case H:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case x:return h=c.displayName||null,h!==null?h:le(c.type)||"Memo";case V:h=c._payload,c=c._init;try{return le(c(h))}catch{}}return null}function Ae(c){var h=c.type;switch(c.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=h.render,c=c.displayName||c.name||"",h.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return le(h);case 8:return h===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function oe(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function he(c){var h=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function me(c){var h=he(c)?"checked":"value",g=Object.getOwnPropertyDescriptor(c.constructor.prototype,h),S=""+c[h];if(!c.hasOwnProperty(h)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var R=g.get,k=g.set;return Object.defineProperty(c,h,{configurable:!0,get:function(){return R.call(this)},set:function(q){S=""+q,k.call(this,q)}}),Object.defineProperty(c,h,{enumerable:g.enumerable}),{getValue:function(){return S},setValue:function(q){S=""+q},stopTracking:function(){c._valueTracker=null,delete c[h]}}}}function Be(c){c._valueTracker||(c._valueTracker=me(c))}function pe(c){if(!c)return!1;var h=c._valueTracker;if(!h)return!0;var g=h.getValue(),S="";return c&&(S=he(c)?c.checked?"true":"false":c.value),c=S,c!==g?(h.setValue(c),!0):!1}function ye(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function Ee(c,h){var g=h.checked;return J({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??c._wrapperState.initialChecked})}function Ue(c,h){var g=h.defaultValue==null?"":h.defaultValue,S=h.checked!=null?h.checked:h.defaultChecked;g=oe(h.value!=null?h.value:g),c._wrapperState={initialChecked:S,initialValue:g,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function Ye(c,h){h=h.checked,h!=null&&T(c,"checked",h,!1)}function De(c,h){Ye(c,h);var g=oe(h.value),S=h.type;if(g!=null)S==="number"?(g===0&&c.value===""||c.value!=g)&&(c.value=""+g):c.value!==""+g&&(c.value=""+g);else if(S==="submit"||S==="reset"){c.removeAttribute("value");return}h.hasOwnProperty("value")?Je(c,h.type,g):h.hasOwnProperty("defaultValue")&&Je(c,h.type,oe(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(c.defaultChecked=!!h.defaultChecked)}function We(c,h,g){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var S=h.type;if(!(S!=="submit"&&S!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+c._wrapperState.initialValue,g||h===c.value||(c.value=h),c.defaultValue=h}g=c.name,g!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,g!==""&&(c.name=g)}function Je(c,h,g){(h!=="number"||ye(c.ownerDocument)!==c)&&(g==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+g&&(c.defaultValue=""+g))}var Le=Array.isArray;function He(c,h,g,S){if(c=c.options,h){h={};for(var R=0;R<g.length;R++)h["$"+g[R]]=!0;for(g=0;g<c.length;g++)R=h.hasOwnProperty("$"+c[g].value),c[g].selected!==R&&(c[g].selected=R),R&&S&&(c[g].defaultSelected=!0)}else{for(g=""+oe(g),h=null,R=0;R<c.length;R++){if(c[R].value===g){c[R].selected=!0,S&&(c[R].defaultSelected=!0);return}h!==null||c[R].disabled||(h=c[R])}h!==null&&(h.selected=!0)}}function At(c,h){if(h.dangerouslySetInnerHTML!=null)throw Error(t(91));return J({},h,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function Ve(c,h){var g=h.value;if(g==null){if(g=h.children,h=h.defaultValue,g!=null){if(h!=null)throw Error(t(92));if(Le(g)){if(1<g.length)throw Error(t(93));g=g[0]}h=g}h==null&&(h=""),g=h}c._wrapperState={initialValue:oe(g)}}function st(c,h){var g=oe(h.value),S=oe(h.defaultValue);g!=null&&(g=""+g,g!==c.value&&(c.value=g),h.defaultValue==null&&c.defaultValue!==g&&(c.defaultValue=g)),S!=null&&(c.defaultValue=""+S)}function mt(c){var h=c.textContent;h===c._wrapperState.initialValue&&h!==""&&h!==null&&(c.value=h)}function et(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function St(c,h){return c==null||c==="http://www.w3.org/1999/xhtml"?et(h):c==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var Rt,xe=function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,g,S,R){MSApp.execUnsafeLocalFunction(function(){return c(h,g,S,R)})}:c}(function(c,h){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=h;else{for(Rt=Rt||document.createElement("div"),Rt.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=Rt.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;h.firstChild;)c.appendChild(h.firstChild)}});function Ht(c,h){if(h){var g=c.firstChild;if(g&&g===c.lastChild&&g.nodeType===3){g.nodeValue=h;return}}c.textContent=h}var Xt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ke=["Webkit","ms","Moz","O"];Object.keys(Xt).forEach(function(c){Ke.forEach(function(h){h=h+c.charAt(0).toUpperCase()+c.substring(1),Xt[h]=Xt[c]})});function Ct(c,h,g){return h==null||typeof h=="boolean"||h===""?"":g||typeof h!="number"||h===0||Xt.hasOwnProperty(c)&&Xt[c]?(""+h).trim():h+"px"}function Dt(c,h){c=c.style;for(var g in h)if(h.hasOwnProperty(g)){var S=g.indexOf("--")===0,R=Ct(g,h[g],S);g==="float"&&(g="cssFloat"),S?c.setProperty(g,R):c[g]=R}}var Vt=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rn(c,h){if(h){if(Vt[c]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(t(137,c));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(t(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(t(61))}if(h.style!=null&&typeof h.style!="object")throw Error(t(62))}}function Zt(c,h){if(c.indexOf("-")===-1)return typeof h.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mn=null;function cn(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var ht=null,ct=null,dt=null;function ke(c){if(c=nh(c)){if(typeof ht!="function")throw Error(t(280));var h=c.stateNode;h&&(h=sv(h),ht(c.stateNode,c.type,h))}}function ge(c){ct?dt?dt.push(c):dt=[c]:ct=c}function Xe(){if(ct){var c=ct,h=dt;if(dt=ct=null,ke(c),h)for(c=0;c<h.length;c++)ke(h[c])}}function Et(c,h){return c(h)}function Pt(){}var Jt=!1;function Tt(c,h,g){if(Jt)return c(h,g);Jt=!0;try{return Et(c,h,g)}finally{Jt=!1,(ct!==null||dt!==null)&&(Pt(),Xe())}}function vn(c,h){var g=c.stateNode;if(g===null)return null;var S=sv(g);if(S===null)return null;g=S[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(c=c.type,S=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!S;break e;default:c=!1}if(c)return null;if(g&&typeof g!="function")throw Error(t(231,h,typeof g));return g}var Sn=!1;if(o)try{var pt={};Object.defineProperty(pt,"passive",{get:function(){Sn=!0}}),window.addEventListener("test",pt,pt),window.removeEventListener("test",pt,pt)}catch{Sn=!1}function Mt(c,h,g,S,R,k,q,ne,se){var Re=Array.prototype.slice.call(arguments,3);try{h.apply(g,Re)}catch(rt){this.onError(rt)}}var dn=!1,In=null,Ze=!1,ot=null,Fe={onError:function(c){dn=!0,In=c}};function Ot(c,h,g,S,R,k,q,ne,se){dn=!1,In=null,Mt.apply(Fe,arguments)}function Lt(c,h,g,S,R,k,q,ne,se){if(Ot.apply(this,arguments),dn){if(dn){var Re=In;dn=!1,In=null}else throw Error(t(198));Ze||(Ze=!0,ot=Re)}}function $t(c){var h=c,g=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,h.flags&4098&&(g=h.return),c=h.return;while(c)}return h.tag===3?g:null}function an(c){if(c.tag===13){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function Nn(c){if($t(c)!==c)throw Error(t(188))}function xn(c){var h=c.alternate;if(!h){if(h=$t(c),h===null)throw Error(t(188));return h!==c?null:c}for(var g=c,S=h;;){var R=g.return;if(R===null)break;var k=R.alternate;if(k===null){if(S=R.return,S!==null){g=S;continue}break}if(R.child===k.child){for(k=R.child;k;){if(k===g)return Nn(R),c;if(k===S)return Nn(R),h;k=k.sibling}throw Error(t(188))}if(g.return!==S.return)g=R,S=k;else{for(var q=!1,ne=R.child;ne;){if(ne===g){q=!0,g=R,S=k;break}if(ne===S){q=!0,S=R,g=k;break}ne=ne.sibling}if(!q){for(ne=k.child;ne;){if(ne===g){q=!0,g=k,S=R;break}if(ne===S){q=!0,S=k,g=R;break}ne=ne.sibling}if(!q)throw Error(t(189))}}if(g.alternate!==S)throw Error(t(190))}if(g.tag!==3)throw Error(t(188));return g.stateNode.current===g?c:h}function tt(c){return c=xn(c),c!==null?ae(c):null}function ae(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var h=ae(c);if(h!==null)return h;c=c.sibling}return null}var je=n.unstable_scheduleCallback,gt=n.unstable_cancelCallback,sn=n.unstable_shouldYield,bn=n.unstable_requestPaint,qt=n.unstable_now,Fn=n.unstable_getCurrentPriorityLevel,sr=n.unstable_ImmediatePriority,Pn=n.unstable_UserBlockingPriority,bt=n.unstable_NormalPriority,un=n.unstable_LowPriority,mn=n.unstable_IdlePriority,pn=null,Cr=null;function yi(c){if(Cr&&typeof Cr.onCommitFiberRoot=="function")try{Cr.onCommitFiberRoot(pn,c,void 0,(c.current.flags&128)===128)}catch{}}var Dr=Math.clz32?Math.clz32:Zo,tu=Math.log,_c=Math.LN2;function Zo(c){return c>>>=0,c===0?32:31-(tu(c)/_c|0)|0}var oo=64,Jo=4194304;function lo(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function el(c,h){var g=c.pendingLanes;if(g===0)return 0;var S=0,R=c.suspendedLanes,k=c.pingedLanes,q=g&268435455;if(q!==0){var ne=q&~R;ne!==0?S=lo(ne):(k&=q,k!==0&&(S=lo(k)))}else q=g&~R,q!==0?S=lo(q):k!==0&&(S=lo(k));if(S===0)return 0;if(h!==0&&h!==S&&!(h&R)&&(R=S&-S,k=h&-h,R>=k||R===16&&(k&4194240)!==0))return h;if(S&4&&(S|=g&16),h=c.entangledLanes,h!==0)for(c=c.entanglements,h&=S;0<h;)g=31-Dr(h),R=1<<g,S|=c[g],h&=~R;return S}function Fd(c,h){switch(c){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bd(c,h){for(var g=c.suspendedLanes,S=c.pingedLanes,R=c.expirationTimes,k=c.pendingLanes;0<k;){var q=31-Dr(k),ne=1<<q,se=R[q];se===-1?(!(ne&g)||ne&S)&&(R[q]=Fd(ne,h)):se<=h&&(c.expiredLanes|=ne),k&=~ne}}function nu(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function ya(){var c=oo;return oo<<=1,!(oo&4194240)&&(oo=64),c}function tl(c){for(var h=[],g=0;31>g;g++)h.push(c);return h}function Va(c,h,g){c.pendingLanes|=h,h!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,h=31-Dr(h),c[h]=g}function nl(c,h){var g=c.pendingLanes&~h;c.pendingLanes=h,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=h,c.mutableReadLanes&=h,c.entangledLanes&=h,h=c.entanglements;var S=c.eventTimes;for(c=c.expirationTimes;0<g;){var R=31-Dr(g),k=1<<R;h[R]=0,S[R]=-1,c[R]=-1,g&=~k}}function ks(c,h){var g=c.entangledLanes|=h;for(c=c.entanglements;g;){var S=31-Dr(g),R=1<<S;R&h|c[S]&h&&(c[S]|=h),g&=~R}}var zn=0;function ru(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var rl,uo,il,hs,iu,au=!1,su=[],fs=null,$a=null,qa=null,co=new Map,Ps=new Map,ba=[],Hd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ec(c,h){switch(c){case"focusin":case"focusout":fs=null;break;case"dragenter":case"dragleave":$a=null;break;case"mouseover":case"mouseout":qa=null;break;case"pointerover":case"pointerout":co.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ps.delete(h.pointerId)}}function al(c,h,g,S,R,k){return c===null||c.nativeEvent!==k?(c={blockedOn:h,domEventName:g,eventSystemFlags:S,nativeEvent:k,targetContainers:[R]},h!==null&&(h=nh(h),h!==null&&uo(h)),c):(c.eventSystemFlags|=S,h=c.targetContainers,R!==null&&h.indexOf(R)===-1&&h.push(R),c)}function Gd(c,h,g,S,R){switch(h){case"focusin":return fs=al(fs,c,h,g,S,R),!0;case"dragenter":return $a=al($a,c,h,g,S,R),!0;case"mouseover":return qa=al(qa,c,h,g,S,R),!0;case"pointerover":var k=R.pointerId;return co.set(k,al(co.get(k)||null,c,h,g,S,R)),!0;case"gotpointercapture":return k=R.pointerId,Ps.set(k,al(Ps.get(k)||null,c,h,g,S,R)),!0}return!1}function zd(c){var h=lu(c.target);if(h!==null){var g=$t(h);if(g!==null){if(h=g.tag,h===13){if(h=an(g),h!==null){c.blockedOn=h,iu(c.priority,function(){il(g)});return}}else if(h===3&&g.stateNode.current.memoizedState.isDehydrated){c.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}c.blockedOn=null}function sl(c){if(c.blockedOn!==null)return!1;for(var h=c.targetContainers;0<h.length;){var g=bc(c.domEventName,c.eventSystemFlags,h[0],c.nativeEvent);if(g===null){g=c.nativeEvent;var S=new g.constructor(g.type,g);Mn=S,g.target.dispatchEvent(S),Mn=null}else return h=nh(g),h!==null&&uo(h),c.blockedOn=g,!1;h.shift()}return!0}function jd(c,h,g){sl(c)&&g.delete(h)}function Vd(){au=!1,fs!==null&&sl(fs)&&(fs=null),$a!==null&&sl($a)&&($a=null),qa!==null&&sl(qa)&&(qa=null),co.forEach(jd),Ps.forEach(jd)}function ol(c,h){c.blockedOn===h&&(c.blockedOn=null,au||(au=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Vd)))}function ho(c){function h(R){return ol(R,c)}if(0<su.length){ol(su[0],c);for(var g=1;g<su.length;g++){var S=su[g];S.blockedOn===c&&(S.blockedOn=null)}}for(fs!==null&&ol(fs,c),$a!==null&&ol($a,c),qa!==null&&ol(qa,c),co.forEach(h),Ps.forEach(h),g=0;g<ba.length;g++)S=ba[g],S.blockedOn===c&&(S.blockedOn=null);for(;0<ba.length&&(g=ba[0],g.blockedOn===null);)zd(g),g.blockedOn===null&&ba.shift()}var fo=N.ReactCurrentBatchConfig,ll=!0;function Xf(c,h,g,S){var R=zn,k=fo.transition;fo.transition=null;try{zn=1,yc(c,h,g,S)}finally{zn=R,fo.transition=k}}function $d(c,h,g,S){var R=zn,k=fo.transition;fo.transition=null;try{zn=4,yc(c,h,g,S)}finally{zn=R,fo.transition=k}}function yc(c,h,g,S){if(ll){var R=bc(c,h,g,S);if(R===null)L0(c,h,S,ul,g),Ec(c,S);else if(Gd(R,c,h,g,S))S.stopPropagation();else if(Ec(c,S),h&4&&-1<Hd.indexOf(c)){for(;R!==null;){var k=nh(R);if(k!==null&&rl(k),k=bc(c,h,g,S),k===null&&L0(c,h,S,ul,g),k===R)break;R=k}R!==null&&S.stopPropagation()}else L0(c,h,S,null,g)}}var ul=null;function bc(c,h,g,S){if(ul=null,c=cn(S),c=lu(c),c!==null)if(h=$t(c),h===null)c=null;else if(g=h.tag,g===13){if(c=an(h),c!==null)return c;c=null}else if(g===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;c=null}else h!==c&&(c=null);return ul=c,null}function Cc(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fn()){case sr:return 1;case Pn:return 4;case bt:case un:return 16;case mn:return 536870912;default:return 16}default:return 16}}var vs=null,An=null,en=null;function Ce(){if(en)return en;var c,h=An,g=h.length,S,R="value"in vs?vs.value:vs.textContent,k=R.length;for(c=0;c<g&&h[c]===R[c];c++);var q=g-c;for(S=1;S<=q&&h[g-S]===R[k-S];S++);return en=R.slice(c,1<S?1-S:void 0)}function ue(c){var h=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&h===13&&(c=13)):c=h,c===10&&(c=13),32<=c||c===13?c:0}function xt(){return!0}function It(){return!1}function wt(c){function h(g,S,R,k,q){this._reactName=g,this._targetInst=R,this.type=S,this.nativeEvent=k,this.target=q,this.currentTarget=null;for(var ne in c)c.hasOwnProperty(ne)&&(g=c[ne],this[ne]=g?g(k):k[ne]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?xt:It,this.isPropagationStopped=It,this}return J(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=xt)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=xt)},persist:function(){},isPersistent:xt}),h}var Kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rn=wt(Kn),ou=J({},Kn,{view:0,detail:0}),EU=wt(ou),_0,E0,qd,Zf=J({},ou,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:b0,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==qd&&(qd&&c.type==="mousemove"?(_0=c.screenX-qd.screenX,E0=c.screenY-qd.screenY):E0=_0=0,qd=c),_0)},movementY:function(c){return"movementY"in c?c.movementY:E0}}),oS=wt(Zf),yU=J({},Zf,{dataTransfer:0}),bU=wt(yU),CU=J({},ou,{relatedTarget:0}),y0=wt(CU),SU=J({},Kn,{animationName:0,elapsedTime:0,pseudoElement:0}),TU=wt(SU),MU=J({},Kn,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),NU=wt(MU),IU=J({},Kn,{data:0}),lS=wt(IU),AU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OU(c){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(c):(c=RU[c])?!!h[c]:!1}function b0(){return OU}var LU=J({},ou,{key:function(c){if(c.key){var h=AU[c.key]||c.key;if(h!=="Unidentified")return h}return c.type==="keypress"?(c=ue(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?wU[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:b0,charCode:function(c){return c.type==="keypress"?ue(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?ue(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),UU=wt(LU),DU=J({},Zf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uS=wt(DU),kU=J({},ou,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:b0}),PU=wt(kU),xU=J({},Kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),FU=wt(xU),BU=J({},Zf,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),HU=wt(BU),GU=[9,13,27,32],C0=o&&"CompositionEvent"in window,Kd=null;o&&"documentMode"in document&&(Kd=document.documentMode);var zU=o&&"TextEvent"in window&&!Kd,cS=o&&(!C0||Kd&&8<Kd&&11>=Kd),dS=" ",hS=!1;function fS(c,h){switch(c){case"keyup":return GU.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vS(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Sc=!1;function jU(c,h){switch(c){case"compositionend":return vS(h);case"keypress":return h.which!==32?null:(hS=!0,dS);case"textInput":return c=h.data,c===dS&&hS?null:c;default:return null}}function VU(c,h){if(Sc)return c==="compositionend"||!C0&&fS(c,h)?(c=Ce(),en=An=vs=null,Sc=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return cS&&h.locale!=="ko"?null:h.data;default:return null}}var $U={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mS(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h==="input"?!!$U[c.type]:h==="textarea"}function pS(c,h,g,S){ge(S),h=rv(h,"onChange"),0<h.length&&(g=new Rn("onChange","change",null,g,S),c.push({event:g,listeners:h}))}var Wd=null,Qd=null;function qU(c){DS(c,0)}function Jf(c){var h=Ac(c);if(pe(h))return c}function KU(c,h){if(c==="change")return h}var gS=!1;if(o){var S0;if(o){var T0="oninput"in document;if(!T0){var _S=document.createElement("div");_S.setAttribute("oninput","return;"),T0=typeof _S.oninput=="function"}S0=T0}else S0=!1;gS=S0&&(!document.documentMode||9<document.documentMode)}function ES(){Wd&&(Wd.detachEvent("onpropertychange",yS),Qd=Wd=null)}function yS(c){if(c.propertyName==="value"&&Jf(Qd)){var h=[];pS(h,Qd,c,cn(c)),Tt(qU,h)}}function WU(c,h,g){c==="focusin"?(ES(),Wd=h,Qd=g,Wd.attachEvent("onpropertychange",yS)):c==="focusout"&&ES()}function QU(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Jf(Qd)}function YU(c,h){if(c==="click")return Jf(h)}function XU(c,h){if(c==="input"||c==="change")return Jf(h)}function ZU(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var ms=typeof Object.is=="function"?Object.is:ZU;function Yd(c,h){if(ms(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var g=Object.keys(c),S=Object.keys(h);if(g.length!==S.length)return!1;for(S=0;S<g.length;S++){var R=g[S];if(!l.call(h,R)||!ms(c[R],h[R]))return!1}return!0}function bS(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function CS(c,h){var g=bS(c);c=0;for(var S;g;){if(g.nodeType===3){if(S=c+g.textContent.length,c<=h&&S>=h)return{node:g,offset:h-c};c=S}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=bS(g)}}function SS(c,h){return c&&h?c===h?!0:c&&c.nodeType===3?!1:h&&h.nodeType===3?SS(c,h.parentNode):"contains"in c?c.contains(h):c.compareDocumentPosition?!!(c.compareDocumentPosition(h)&16):!1:!1}function TS(){for(var c=window,h=ye();h instanceof c.HTMLIFrameElement;){try{var g=typeof h.contentWindow.location.href=="string"}catch{g=!1}if(g)c=h.contentWindow;else break;h=ye(c.document)}return h}function M0(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h&&(h==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||h==="textarea"||c.contentEditable==="true")}function JU(c){var h=TS(),g=c.focusedElem,S=c.selectionRange;if(h!==g&&g&&g.ownerDocument&&SS(g.ownerDocument.documentElement,g)){if(S!==null&&M0(g)){if(h=S.start,c=S.end,c===void 0&&(c=h),"selectionStart"in g)g.selectionStart=h,g.selectionEnd=Math.min(c,g.value.length);else if(c=(h=g.ownerDocument||document)&&h.defaultView||window,c.getSelection){c=c.getSelection();var R=g.textContent.length,k=Math.min(S.start,R);S=S.end===void 0?k:Math.min(S.end,R),!c.extend&&k>S&&(R=S,S=k,k=R),R=CS(g,k);var q=CS(g,S);R&&q&&(c.rangeCount!==1||c.anchorNode!==R.node||c.anchorOffset!==R.offset||c.focusNode!==q.node||c.focusOffset!==q.offset)&&(h=h.createRange(),h.setStart(R.node,R.offset),c.removeAllRanges(),k>S?(c.addRange(h),c.extend(q.node,q.offset)):(h.setEnd(q.node,q.offset),c.addRange(h)))}}for(h=[],c=g;c=c.parentNode;)c.nodeType===1&&h.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<h.length;g++)c=h[g],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var eD=o&&"documentMode"in document&&11>=document.documentMode,Tc=null,N0=null,Xd=null,I0=!1;function MS(c,h,g){var S=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;I0||Tc==null||Tc!==ye(S)||(S=Tc,"selectionStart"in S&&M0(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),Xd&&Yd(Xd,S)||(Xd=S,S=rv(N0,"onSelect"),0<S.length&&(h=new Rn("onSelect","select",null,h,g),c.push({event:h,listeners:S}),h.target=Tc)))}function ev(c,h){var g={};return g[c.toLowerCase()]=h.toLowerCase(),g["Webkit"+c]="webkit"+h,g["Moz"+c]="moz"+h,g}var Mc={animationend:ev("Animation","AnimationEnd"),animationiteration:ev("Animation","AnimationIteration"),animationstart:ev("Animation","AnimationStart"),transitionend:ev("Transition","TransitionEnd")},A0={},NS={};o&&(NS=document.createElement("div").style,"AnimationEvent"in window||(delete Mc.animationend.animation,delete Mc.animationiteration.animation,delete Mc.animationstart.animation),"TransitionEvent"in window||delete Mc.transitionend.transition);function tv(c){if(A0[c])return A0[c];if(!Mc[c])return c;var h=Mc[c],g;for(g in h)if(h.hasOwnProperty(g)&&g in NS)return A0[c]=h[g];return c}var IS=tv("animationend"),AS=tv("animationiteration"),wS=tv("animationstart"),RS=tv("transitionend"),OS=new Map,LS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cl(c,h){OS.set(c,h),a(h,[c])}for(var w0=0;w0<LS.length;w0++){var R0=LS[w0],tD=R0.toLowerCase(),nD=R0[0].toUpperCase()+R0.slice(1);cl(tD,"on"+nD)}cl(IS,"onAnimationEnd"),cl(AS,"onAnimationIteration"),cl(wS,"onAnimationStart"),cl("dblclick","onDoubleClick"),cl("focusin","onFocus"),cl("focusout","onBlur"),cl(RS,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zd));function US(c,h,g){var S=c.type||"unknown-event";c.currentTarget=g,Lt(S,h,void 0,c),c.currentTarget=null}function DS(c,h){h=(h&4)!==0;for(var g=0;g<c.length;g++){var S=c[g],R=S.event;S=S.listeners;e:{var k=void 0;if(h)for(var q=S.length-1;0<=q;q--){var ne=S[q],se=ne.instance,Re=ne.currentTarget;if(ne=ne.listener,se!==k&&R.isPropagationStopped())break e;US(R,ne,Re),k=se}else for(q=0;q<S.length;q++){if(ne=S[q],se=ne.instance,Re=ne.currentTarget,ne=ne.listener,se!==k&&R.isPropagationStopped())break e;US(R,ne,Re),k=se}}}if(Ze)throw c=ot,Ze=!1,ot=null,c}function gr(c,h){var g=h[F0];g===void 0&&(g=h[F0]=new Set);var S=c+"__bubble";g.has(S)||(kS(h,c,2,!1),g.add(S))}function O0(c,h,g){var S=0;h&&(S|=4),kS(g,c,S,h)}var nv="_reactListening"+Math.random().toString(36).slice(2);function Jd(c){if(!c[nv]){c[nv]=!0,r.forEach(function(g){g!=="selectionchange"&&(rD.has(g)||O0(g,!1,c),O0(g,!0,c))});var h=c.nodeType===9?c:c.ownerDocument;h===null||h[nv]||(h[nv]=!0,O0("selectionchange",!1,h))}}function kS(c,h,g,S){switch(Cc(h)){case 1:var R=Xf;break;case 4:R=$d;break;default:R=yc}g=R.bind(null,h,g,c),R=void 0,!Sn||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(R=!0),S?R!==void 0?c.addEventListener(h,g,{capture:!0,passive:R}):c.addEventListener(h,g,!0):R!==void 0?c.addEventListener(h,g,{passive:R}):c.addEventListener(h,g,!1)}function L0(c,h,g,S,R){var k=S;if(!(h&1)&&!(h&2)&&S!==null)e:for(;;){if(S===null)return;var q=S.tag;if(q===3||q===4){var ne=S.stateNode.containerInfo;if(ne===R||ne.nodeType===8&&ne.parentNode===R)break;if(q===4)for(q=S.return;q!==null;){var se=q.tag;if((se===3||se===4)&&(se=q.stateNode.containerInfo,se===R||se.nodeType===8&&se.parentNode===R))return;q=q.return}for(;ne!==null;){if(q=lu(ne),q===null)return;if(se=q.tag,se===5||se===6){S=k=q;continue e}ne=ne.parentNode}}S=S.return}Tt(function(){var Re=k,rt=cn(g),at=[];e:{var nt=OS.get(c);if(nt!==void 0){var kt=Rn,Gt=c;switch(c){case"keypress":if(ue(g)===0)break e;case"keydown":case"keyup":kt=UU;break;case"focusin":Gt="focus",kt=y0;break;case"focusout":Gt="blur",kt=y0;break;case"beforeblur":case"afterblur":kt=y0;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":kt=oS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":kt=bU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":kt=PU;break;case IS:case AS:case wS:kt=TU;break;case RS:kt=FU;break;case"scroll":kt=EU;break;case"wheel":kt=HU;break;case"copy":case"cut":case"paste":kt=NU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":kt=uS}var jt=(h&4)!==0,Br=!jt&&c==="scroll",_e=jt?nt!==null?nt+"Capture":null:nt;jt=[];for(var ce=Re,Te;ce!==null;){Te=ce;var _t=Te.stateNode;if(Te.tag===5&&_t!==null&&(Te=_t,_e!==null&&(_t=vn(ce,_e),_t!=null&&jt.push(eh(ce,_t,Te)))),Br)break;ce=ce.return}0<jt.length&&(nt=new kt(nt,Gt,null,g,rt),at.push({event:nt,listeners:jt}))}}if(!(h&7)){e:{if(nt=c==="mouseover"||c==="pointerover",kt=c==="mouseout"||c==="pointerout",nt&&g!==Mn&&(Gt=g.relatedTarget||g.fromElement)&&(lu(Gt)||Gt[vo]))break e;if((kt||nt)&&(nt=rt.window===rt?rt:(nt=rt.ownerDocument)?nt.defaultView||nt.parentWindow:window,kt?(Gt=g.relatedTarget||g.toElement,kt=Re,Gt=Gt?lu(Gt):null,Gt!==null&&(Br=$t(Gt),Gt!==Br||Gt.tag!==5&&Gt.tag!==6)&&(Gt=null)):(kt=null,Gt=Re),kt!==Gt)){if(jt=oS,_t="onMouseLeave",_e="onMouseEnter",ce="mouse",(c==="pointerout"||c==="pointerover")&&(jt=uS,_t="onPointerLeave",_e="onPointerEnter",ce="pointer"),Br=kt==null?nt:Ac(kt),Te=Gt==null?nt:Ac(Gt),nt=new jt(_t,ce+"leave",kt,g,rt),nt.target=Br,nt.relatedTarget=Te,_t=null,lu(rt)===Re&&(jt=new jt(_e,ce+"enter",Gt,g,rt),jt.target=Te,jt.relatedTarget=Br,_t=jt),Br=_t,kt&&Gt)t:{for(jt=kt,_e=Gt,ce=0,Te=jt;Te;Te=Nc(Te))ce++;for(Te=0,_t=_e;_t;_t=Nc(_t))Te++;for(;0<ce-Te;)jt=Nc(jt),ce--;for(;0<Te-ce;)_e=Nc(_e),Te--;for(;ce--;){if(jt===_e||_e!==null&&jt===_e.alternate)break t;jt=Nc(jt),_e=Nc(_e)}jt=null}else jt=null;kt!==null&&PS(at,nt,kt,jt,!1),Gt!==null&&Br!==null&&PS(at,Br,Gt,jt,!0)}}e:{if(nt=Re?Ac(Re):window,kt=nt.nodeName&&nt.nodeName.toLowerCase(),kt==="select"||kt==="input"&&nt.type==="file")var Kt=KU;else if(mS(nt))if(gS)Kt=XU;else{Kt=QU;var hn=WU}else(kt=nt.nodeName)&&kt.toLowerCase()==="input"&&(nt.type==="checkbox"||nt.type==="radio")&&(Kt=YU);if(Kt&&(Kt=Kt(c,Re))){pS(at,Kt,g,rt);break e}hn&&hn(c,nt,Re),c==="focusout"&&(hn=nt._wrapperState)&&hn.controlled&&nt.type==="number"&&Je(nt,"number",nt.value)}switch(hn=Re?Ac(Re):window,c){case"focusin":(mS(hn)||hn.contentEditable==="true")&&(Tc=hn,N0=Re,Xd=null);break;case"focusout":Xd=N0=Tc=null;break;case"mousedown":I0=!0;break;case"contextmenu":case"mouseup":case"dragend":I0=!1,MS(at,g,rt);break;case"selectionchange":if(eD)break;case"keydown":case"keyup":MS(at,g,rt)}var fn;if(C0)e:{switch(c){case"compositionstart":var En="onCompositionStart";break e;case"compositionend":En="onCompositionEnd";break e;case"compositionupdate":En="onCompositionUpdate";break e}En=void 0}else Sc?fS(c,g)&&(En="onCompositionEnd"):c==="keydown"&&g.keyCode===229&&(En="onCompositionStart");En&&(cS&&g.locale!=="ko"&&(Sc||En!=="onCompositionStart"?En==="onCompositionEnd"&&Sc&&(fn=Ce()):(vs=rt,An="value"in vs?vs.value:vs.textContent,Sc=!0)),hn=rv(Re,En),0<hn.length&&(En=new lS(En,c,null,g,rt),at.push({event:En,listeners:hn}),fn?En.data=fn:(fn=vS(g),fn!==null&&(En.data=fn)))),(fn=zU?jU(c,g):VU(c,g))&&(Re=rv(Re,"onBeforeInput"),0<Re.length&&(rt=new lS("onBeforeInput","beforeinput",null,g,rt),at.push({event:rt,listeners:Re}),rt.data=fn))}DS(at,h)})}function eh(c,h,g){return{instance:c,listener:h,currentTarget:g}}function rv(c,h){for(var g=h+"Capture",S=[];c!==null;){var R=c,k=R.stateNode;R.tag===5&&k!==null&&(R=k,k=vn(c,g),k!=null&&S.unshift(eh(c,k,R)),k=vn(c,h),k!=null&&S.push(eh(c,k,R))),c=c.return}return S}function Nc(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function PS(c,h,g,S,R){for(var k=h._reactName,q=[];g!==null&&g!==S;){var ne=g,se=ne.alternate,Re=ne.stateNode;if(se!==null&&se===S)break;ne.tag===5&&Re!==null&&(ne=Re,R?(se=vn(g,k),se!=null&&q.unshift(eh(g,se,ne))):R||(se=vn(g,k),se!=null&&q.push(eh(g,se,ne)))),g=g.return}q.length!==0&&c.push({event:h,listeners:q})}var iD=/\r\n?/g,aD=/\u0000|\uFFFD/g;function xS(c){return(typeof c=="string"?c:""+c).replace(iD,`
`).replace(aD,"")}function iv(c,h,g){if(h=xS(h),xS(c)!==h&&g)throw Error(t(425))}function av(){}var U0=null,D0=null;function k0(c,h){return c==="textarea"||c==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var P0=typeof setTimeout=="function"?setTimeout:void 0,sD=typeof clearTimeout=="function"?clearTimeout:void 0,FS=typeof Promise=="function"?Promise:void 0,oD=typeof queueMicrotask=="function"?queueMicrotask:typeof FS<"u"?function(c){return FS.resolve(null).then(c).catch(lD)}:P0;function lD(c){setTimeout(function(){throw c})}function x0(c,h){var g=h,S=0;do{var R=g.nextSibling;if(c.removeChild(g),R&&R.nodeType===8)if(g=R.data,g==="/$"){if(S===0){c.removeChild(R),ho(h);return}S--}else g!=="$"&&g!=="$?"&&g!=="$!"||S++;g=R}while(g);ho(h)}function dl(c){for(;c!=null;c=c.nextSibling){var h=c.nodeType;if(h===1||h===3)break;if(h===8){if(h=c.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return c}function BS(c){c=c.previousSibling;for(var h=0;c;){if(c.nodeType===8){var g=c.data;if(g==="$"||g==="$!"||g==="$?"){if(h===0)return c;h--}else g==="/$"&&h++}c=c.previousSibling}return null}var Ic=Math.random().toString(36).slice(2),xs="__reactFiber$"+Ic,th="__reactProps$"+Ic,vo="__reactContainer$"+Ic,F0="__reactEvents$"+Ic,uD="__reactListeners$"+Ic,cD="__reactHandles$"+Ic;function lu(c){var h=c[xs];if(h)return h;for(var g=c.parentNode;g;){if(h=g[vo]||g[xs]){if(g=h.alternate,h.child!==null||g!==null&&g.child!==null)for(c=BS(c);c!==null;){if(g=c[xs])return g;c=BS(c)}return h}c=g,g=c.parentNode}return null}function nh(c){return c=c[xs]||c[vo],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function Ac(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(t(33))}function sv(c){return c[th]||null}var B0=[],wc=-1;function hl(c){return{current:c}}function _r(c){0>wc||(c.current=B0[wc],B0[wc]=null,wc--)}function vr(c,h){wc++,B0[wc]=c.current,c.current=h}var fl={},Pi=hl(fl),oa=hl(!1),uu=fl;function Rc(c,h){var g=c.type.contextTypes;if(!g)return fl;var S=c.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===h)return S.__reactInternalMemoizedMaskedChildContext;var R={},k;for(k in g)R[k]=h[k];return S&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=h,c.__reactInternalMemoizedMaskedChildContext=R),R}function la(c){return c=c.childContextTypes,c!=null}function ov(){_r(oa),_r(Pi)}function HS(c,h,g){if(Pi.current!==fl)throw Error(t(168));vr(Pi,h),vr(oa,g)}function GS(c,h,g){var S=c.stateNode;if(h=h.childContextTypes,typeof S.getChildContext!="function")return g;S=S.getChildContext();for(var R in S)if(!(R in h))throw Error(t(108,Ae(c)||"Unknown",R));return J({},g,S)}function lv(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||fl,uu=Pi.current,vr(Pi,c),vr(oa,oa.current),!0}function zS(c,h,g){var S=c.stateNode;if(!S)throw Error(t(169));g?(c=GS(c,h,uu),S.__reactInternalMemoizedMergedChildContext=c,_r(oa),_r(Pi),vr(Pi,c)):_r(oa),vr(oa,g)}var mo=null,uv=!1,H0=!1;function jS(c){mo===null?mo=[c]:mo.push(c)}function dD(c){uv=!0,jS(c)}function vl(){if(!H0&&mo!==null){H0=!0;var c=0,h=zn;try{var g=mo;for(zn=1;c<g.length;c++){var S=g[c];do S=S(!0);while(S!==null)}mo=null,uv=!1}catch(R){throw mo!==null&&(mo=mo.slice(c+1)),je(sr,vl),R}finally{zn=h,H0=!1}}return null}var Oc=[],Lc=0,cv=null,dv=0,Ka=[],Wa=0,cu=null,po=1,go="";function du(c,h){Oc[Lc++]=dv,Oc[Lc++]=cv,cv=c,dv=h}function VS(c,h,g){Ka[Wa++]=po,Ka[Wa++]=go,Ka[Wa++]=cu,cu=c;var S=po;c=go;var R=32-Dr(S)-1;S&=~(1<<R),g+=1;var k=32-Dr(h)+R;if(30<k){var q=R-R%5;k=(S&(1<<q)-1).toString(32),S>>=q,R-=q,po=1<<32-Dr(h)+R|g<<R|S,go=k+c}else po=1<<k|g<<R|S,go=c}function G0(c){c.return!==null&&(du(c,1),VS(c,1,0))}function z0(c){for(;c===cv;)cv=Oc[--Lc],Oc[Lc]=null,dv=Oc[--Lc],Oc[Lc]=null;for(;c===cu;)cu=Ka[--Wa],Ka[Wa]=null,go=Ka[--Wa],Ka[Wa]=null,po=Ka[--Wa],Ka[Wa]=null}var Ca=null,Sa=null,Sr=!1,ps=null;function $S(c,h){var g=Za(5,null,null,0);g.elementType="DELETED",g.stateNode=h,g.return=c,h=c.deletions,h===null?(c.deletions=[g],c.flags|=16):h.push(g)}function qS(c,h){switch(c.tag){case 5:var g=c.type;return h=h.nodeType!==1||g.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(c.stateNode=h,Ca=c,Sa=dl(h.firstChild),!0):!1;case 6:return h=c.pendingProps===""||h.nodeType!==3?null:h,h!==null?(c.stateNode=h,Ca=c,Sa=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(g=cu!==null?{id:po,overflow:go}:null,c.memoizedState={dehydrated:h,treeContext:g,retryLane:1073741824},g=Za(18,null,null,0),g.stateNode=h,g.return=c,c.child=g,Ca=c,Sa=null,!0):!1;default:return!1}}function j0(c){return(c.mode&1)!==0&&(c.flags&128)===0}function V0(c){if(Sr){var h=Sa;if(h){var g=h;if(!qS(c,h)){if(j0(c))throw Error(t(418));h=dl(g.nextSibling);var S=Ca;h&&qS(c,h)?$S(S,g):(c.flags=c.flags&-4097|2,Sr=!1,Ca=c)}}else{if(j0(c))throw Error(t(418));c.flags=c.flags&-4097|2,Sr=!1,Ca=c}}}function KS(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;Ca=c}function hv(c){if(c!==Ca)return!1;if(!Sr)return KS(c),Sr=!0,!1;var h;if((h=c.tag!==3)&&!(h=c.tag!==5)&&(h=c.type,h=h!=="head"&&h!=="body"&&!k0(c.type,c.memoizedProps)),h&&(h=Sa)){if(j0(c))throw WS(),Error(t(418));for(;h;)$S(c,h),h=dl(h.nextSibling)}if(KS(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(t(317));e:{for(c=c.nextSibling,h=0;c;){if(c.nodeType===8){var g=c.data;if(g==="/$"){if(h===0){Sa=dl(c.nextSibling);break e}h--}else g!=="$"&&g!=="$!"&&g!=="$?"||h++}c=c.nextSibling}Sa=null}}else Sa=Ca?dl(c.stateNode.nextSibling):null;return!0}function WS(){for(var c=Sa;c;)c=dl(c.nextSibling)}function Uc(){Sa=Ca=null,Sr=!1}function $0(c){ps===null?ps=[c]:ps.push(c)}var hD=N.ReactCurrentBatchConfig;function rh(c,h,g){if(c=g.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(t(309));var S=g.stateNode}if(!S)throw Error(t(147,c));var R=S,k=""+c;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===k?h.ref:(h=function(q){var ne=R.refs;q===null?delete ne[k]:ne[k]=q},h._stringRef=k,h)}if(typeof c!="string")throw Error(t(284));if(!g._owner)throw Error(t(290,c))}return c}function fv(c,h){throw c=Object.prototype.toString.call(h),Error(t(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c))}function QS(c){var h=c._init;return h(c._payload)}function YS(c){function h(_e,ce){if(c){var Te=_e.deletions;Te===null?(_e.deletions=[ce],_e.flags|=16):Te.push(ce)}}function g(_e,ce){if(!c)return null;for(;ce!==null;)h(_e,ce),ce=ce.sibling;return null}function S(_e,ce){for(_e=new Map;ce!==null;)ce.key!==null?_e.set(ce.key,ce):_e.set(ce.index,ce),ce=ce.sibling;return _e}function R(_e,ce){return _e=Cl(_e,ce),_e.index=0,_e.sibling=null,_e}function k(_e,ce,Te){return _e.index=Te,c?(Te=_e.alternate,Te!==null?(Te=Te.index,Te<ce?(_e.flags|=2,ce):Te):(_e.flags|=2,ce)):(_e.flags|=1048576,ce)}function q(_e){return c&&_e.alternate===null&&(_e.flags|=2),_e}function ne(_e,ce,Te,_t){return ce===null||ce.tag!==6?(ce=Pg(Te,_e.mode,_t),ce.return=_e,ce):(ce=R(ce,Te),ce.return=_e,ce)}function se(_e,ce,Te,_t){var Kt=Te.type;return Kt===L?rt(_e,ce,Te.props.children,_t,Te.key):ce!==null&&(ce.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===V&&QS(Kt)===ce.type)?(_t=R(ce,Te.props),_t.ref=rh(_e,ce,Te),_t.return=_e,_t):(_t=xv(Te.type,Te.key,Te.props,null,_e.mode,_t),_t.ref=rh(_e,ce,Te),_t.return=_e,_t)}function Re(_e,ce,Te,_t){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==Te.containerInfo||ce.stateNode.implementation!==Te.implementation?(ce=xg(Te,_e.mode,_t),ce.return=_e,ce):(ce=R(ce,Te.children||[]),ce.return=_e,ce)}function rt(_e,ce,Te,_t,Kt){return ce===null||ce.tag!==7?(ce=Eu(Te,_e.mode,_t,Kt),ce.return=_e,ce):(ce=R(ce,Te),ce.return=_e,ce)}function at(_e,ce,Te){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return ce=Pg(""+ce,_e.mode,Te),ce.return=_e,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case w:return Te=xv(ce.type,ce.key,ce.props,null,_e.mode,Te),Te.ref=rh(_e,null,ce),Te.return=_e,Te;case O:return ce=xg(ce,_e.mode,Te),ce.return=_e,ce;case V:var _t=ce._init;return at(_e,_t(ce._payload),Te)}if(Le(ce)||Q(ce))return ce=Eu(ce,_e.mode,Te,null),ce.return=_e,ce;fv(_e,ce)}return null}function nt(_e,ce,Te,_t){var Kt=ce!==null?ce.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number")return Kt!==null?null:ne(_e,ce,""+Te,_t);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case w:return Te.key===Kt?se(_e,ce,Te,_t):null;case O:return Te.key===Kt?Re(_e,ce,Te,_t):null;case V:return Kt=Te._init,nt(_e,ce,Kt(Te._payload),_t)}if(Le(Te)||Q(Te))return Kt!==null?null:rt(_e,ce,Te,_t,null);fv(_e,Te)}return null}function kt(_e,ce,Te,_t,Kt){if(typeof _t=="string"&&_t!==""||typeof _t=="number")return _e=_e.get(Te)||null,ne(ce,_e,""+_t,Kt);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case w:return _e=_e.get(_t.key===null?Te:_t.key)||null,se(ce,_e,_t,Kt);case O:return _e=_e.get(_t.key===null?Te:_t.key)||null,Re(ce,_e,_t,Kt);case V:var hn=_t._init;return kt(_e,ce,Te,hn(_t._payload),Kt)}if(Le(_t)||Q(_t))return _e=_e.get(Te)||null,rt(ce,_e,_t,Kt,null);fv(ce,_t)}return null}function Gt(_e,ce,Te,_t){for(var Kt=null,hn=null,fn=ce,En=ce=0,li=null;fn!==null&&En<Te.length;En++){fn.index>En?(li=fn,fn=null):li=fn.sibling;var Xn=nt(_e,fn,Te[En],_t);if(Xn===null){fn===null&&(fn=li);break}c&&fn&&Xn.alternate===null&&h(_e,fn),ce=k(Xn,ce,En),hn===null?Kt=Xn:hn.sibling=Xn,hn=Xn,fn=li}if(En===Te.length)return g(_e,fn),Sr&&du(_e,En),Kt;if(fn===null){for(;En<Te.length;En++)fn=at(_e,Te[En],_t),fn!==null&&(ce=k(fn,ce,En),hn===null?Kt=fn:hn.sibling=fn,hn=fn);return Sr&&du(_e,En),Kt}for(fn=S(_e,fn);En<Te.length;En++)li=kt(fn,_e,En,Te[En],_t),li!==null&&(c&&li.alternate!==null&&fn.delete(li.key===null?En:li.key),ce=k(li,ce,En),hn===null?Kt=li:hn.sibling=li,hn=li);return c&&fn.forEach(function(Sl){return h(_e,Sl)}),Sr&&du(_e,En),Kt}function jt(_e,ce,Te,_t){var Kt=Q(Te);if(typeof Kt!="function")throw Error(t(150));if(Te=Kt.call(Te),Te==null)throw Error(t(151));for(var hn=Kt=null,fn=ce,En=ce=0,li=null,Xn=Te.next();fn!==null&&!Xn.done;En++,Xn=Te.next()){fn.index>En?(li=fn,fn=null):li=fn.sibling;var Sl=nt(_e,fn,Xn.value,_t);if(Sl===null){fn===null&&(fn=li);break}c&&fn&&Sl.alternate===null&&h(_e,fn),ce=k(Sl,ce,En),hn===null?Kt=Sl:hn.sibling=Sl,hn=Sl,fn=li}if(Xn.done)return g(_e,fn),Sr&&du(_e,En),Kt;if(fn===null){for(;!Xn.done;En++,Xn=Te.next())Xn=at(_e,Xn.value,_t),Xn!==null&&(ce=k(Xn,ce,En),hn===null?Kt=Xn:hn.sibling=Xn,hn=Xn);return Sr&&du(_e,En),Kt}for(fn=S(_e,fn);!Xn.done;En++,Xn=Te.next())Xn=kt(fn,_e,En,Xn.value,_t),Xn!==null&&(c&&Xn.alternate!==null&&fn.delete(Xn.key===null?En:Xn.key),ce=k(Xn,ce,En),hn===null?Kt=Xn:hn.sibling=Xn,hn=Xn);return c&&fn.forEach(function($D){return h(_e,$D)}),Sr&&du(_e,En),Kt}function Br(_e,ce,Te,_t){if(typeof Te=="object"&&Te!==null&&Te.type===L&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case w:e:{for(var Kt=Te.key,hn=ce;hn!==null;){if(hn.key===Kt){if(Kt=Te.type,Kt===L){if(hn.tag===7){g(_e,hn.sibling),ce=R(hn,Te.props.children),ce.return=_e,_e=ce;break e}}else if(hn.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===V&&QS(Kt)===hn.type){g(_e,hn.sibling),ce=R(hn,Te.props),ce.ref=rh(_e,hn,Te),ce.return=_e,_e=ce;break e}g(_e,hn);break}else h(_e,hn);hn=hn.sibling}Te.type===L?(ce=Eu(Te.props.children,_e.mode,_t,Te.key),ce.return=_e,_e=ce):(_t=xv(Te.type,Te.key,Te.props,null,_e.mode,_t),_t.ref=rh(_e,ce,Te),_t.return=_e,_e=_t)}return q(_e);case O:e:{for(hn=Te.key;ce!==null;){if(ce.key===hn)if(ce.tag===4&&ce.stateNode.containerInfo===Te.containerInfo&&ce.stateNode.implementation===Te.implementation){g(_e,ce.sibling),ce=R(ce,Te.children||[]),ce.return=_e,_e=ce;break e}else{g(_e,ce);break}else h(_e,ce);ce=ce.sibling}ce=xg(Te,_e.mode,_t),ce.return=_e,_e=ce}return q(_e);case V:return hn=Te._init,Br(_e,ce,hn(Te._payload),_t)}if(Le(Te))return Gt(_e,ce,Te,_t);if(Q(Te))return jt(_e,ce,Te,_t);fv(_e,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"?(Te=""+Te,ce!==null&&ce.tag===6?(g(_e,ce.sibling),ce=R(ce,Te),ce.return=_e,_e=ce):(g(_e,ce),ce=Pg(Te,_e.mode,_t),ce.return=_e,_e=ce),q(_e)):g(_e,ce)}return Br}var Dc=YS(!0),XS=YS(!1),vv=hl(null),mv=null,kc=null,q0=null;function K0(){q0=kc=mv=null}function W0(c){var h=vv.current;_r(vv),c._currentValue=h}function Q0(c,h,g){for(;c!==null;){var S=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,S!==null&&(S.childLanes|=h)):S!==null&&(S.childLanes&h)!==h&&(S.childLanes|=h),c===g)break;c=c.return}}function Pc(c,h){mv=c,q0=kc=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&h&&(ua=!0),c.firstContext=null)}function Qa(c){var h=c._currentValue;if(q0!==c)if(c={context:c,memoizedValue:h,next:null},kc===null){if(mv===null)throw Error(t(308));kc=c,mv.dependencies={lanes:0,firstContext:c}}else kc=kc.next=c;return h}var hu=null;function Y0(c){hu===null?hu=[c]:hu.push(c)}function ZS(c,h,g,S){var R=h.interleaved;return R===null?(g.next=g,Y0(h)):(g.next=R.next,R.next=g),h.interleaved=g,_o(c,S)}function _o(c,h){c.lanes|=h;var g=c.alternate;for(g!==null&&(g.lanes|=h),g=c,c=c.return;c!==null;)c.childLanes|=h,g=c.alternate,g!==null&&(g.childLanes|=h),g=c,c=c.return;return g.tag===3?g.stateNode:null}var ml=!1;function X0(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function JS(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Eo(c,h){return{eventTime:c,lane:h,tag:0,payload:null,callback:null,next:null}}function pl(c,h,g){var S=c.updateQueue;if(S===null)return null;if(S=S.shared,Wn&2){var R=S.pending;return R===null?h.next=h:(h.next=R.next,R.next=h),S.pending=h,_o(c,g)}return R=S.interleaved,R===null?(h.next=h,Y0(S)):(h.next=R.next,R.next=h),S.interleaved=h,_o(c,g)}function pv(c,h,g){if(h=h.updateQueue,h!==null&&(h=h.shared,(g&4194240)!==0)){var S=h.lanes;S&=c.pendingLanes,g|=S,h.lanes=g,ks(c,g)}}function e1(c,h){var g=c.updateQueue,S=c.alternate;if(S!==null&&(S=S.updateQueue,g===S)){var R=null,k=null;if(g=g.firstBaseUpdate,g!==null){do{var q={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};k===null?R=k=q:k=k.next=q,g=g.next}while(g!==null);k===null?R=k=h:k=k.next=h}else R=k=h;g={baseState:S.baseState,firstBaseUpdate:R,lastBaseUpdate:k,shared:S.shared,effects:S.effects},c.updateQueue=g;return}c=g.lastBaseUpdate,c===null?g.firstBaseUpdate=h:c.next=h,g.lastBaseUpdate=h}function gv(c,h,g,S){var R=c.updateQueue;ml=!1;var k=R.firstBaseUpdate,q=R.lastBaseUpdate,ne=R.shared.pending;if(ne!==null){R.shared.pending=null;var se=ne,Re=se.next;se.next=null,q===null?k=Re:q.next=Re,q=se;var rt=c.alternate;rt!==null&&(rt=rt.updateQueue,ne=rt.lastBaseUpdate,ne!==q&&(ne===null?rt.firstBaseUpdate=Re:ne.next=Re,rt.lastBaseUpdate=se))}if(k!==null){var at=R.baseState;q=0,rt=Re=se=null,ne=k;do{var nt=ne.lane,kt=ne.eventTime;if((S&nt)===nt){rt!==null&&(rt=rt.next={eventTime:kt,lane:0,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null});e:{var Gt=c,jt=ne;switch(nt=h,kt=g,jt.tag){case 1:if(Gt=jt.payload,typeof Gt=="function"){at=Gt.call(kt,at,nt);break e}at=Gt;break e;case 3:Gt.flags=Gt.flags&-65537|128;case 0:if(Gt=jt.payload,nt=typeof Gt=="function"?Gt.call(kt,at,nt):Gt,nt==null)break e;at=J({},at,nt);break e;case 2:ml=!0}}ne.callback!==null&&ne.lane!==0&&(c.flags|=64,nt=R.effects,nt===null?R.effects=[ne]:nt.push(ne))}else kt={eventTime:kt,lane:nt,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null},rt===null?(Re=rt=kt,se=at):rt=rt.next=kt,q|=nt;if(ne=ne.next,ne===null){if(ne=R.shared.pending,ne===null)break;nt=ne,ne=nt.next,nt.next=null,R.lastBaseUpdate=nt,R.shared.pending=null}}while(!0);if(rt===null&&(se=at),R.baseState=se,R.firstBaseUpdate=Re,R.lastBaseUpdate=rt,h=R.shared.interleaved,h!==null){R=h;do q|=R.lane,R=R.next;while(R!==h)}else k===null&&(R.shared.lanes=0);mu|=q,c.lanes=q,c.memoizedState=at}}function t1(c,h,g){if(c=h.effects,h.effects=null,c!==null)for(h=0;h<c.length;h++){var S=c[h],R=S.callback;if(R!==null){if(S.callback=null,S=g,typeof R!="function")throw Error(t(191,R));R.call(S)}}}var ih={},Fs=hl(ih),ah=hl(ih),sh=hl(ih);function fu(c){if(c===ih)throw Error(t(174));return c}function Z0(c,h){switch(vr(sh,h),vr(ah,c),vr(Fs,ih),c=h.nodeType,c){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:St(null,"");break;default:c=c===8?h.parentNode:h,h=c.namespaceURI||null,c=c.tagName,h=St(h,c)}_r(Fs),vr(Fs,h)}function xc(){_r(Fs),_r(ah),_r(sh)}function n1(c){fu(sh.current);var h=fu(Fs.current),g=St(h,c.type);h!==g&&(vr(ah,c),vr(Fs,g))}function J0(c){ah.current===c&&(_r(Fs),_r(ah))}var Or=hl(0);function _v(c){for(var h=c;h!==null;){if(h.tag===13){var g=h.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if(h.flags&128)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var eg=[];function tg(){for(var c=0;c<eg.length;c++)eg[c]._workInProgressVersionPrimary=null;eg.length=0}var Ev=N.ReactCurrentDispatcher,ng=N.ReactCurrentBatchConfig,vu=0,Lr=null,ti=null,si=null,yv=!1,oh=!1,lh=0,fD=0;function xi(){throw Error(t(321))}function rg(c,h){if(h===null)return!1;for(var g=0;g<h.length&&g<c.length;g++)if(!ms(c[g],h[g]))return!1;return!0}function ig(c,h,g,S,R,k){if(vu=k,Lr=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Ev.current=c===null||c.memoizedState===null?gD:_D,c=g(S,R),oh){k=0;do{if(oh=!1,lh=0,25<=k)throw Error(t(301));k+=1,si=ti=null,h.updateQueue=null,Ev.current=ED,c=g(S,R)}while(oh)}if(Ev.current=Sv,h=ti!==null&&ti.next!==null,vu=0,si=ti=Lr=null,yv=!1,h)throw Error(t(300));return c}function ag(){var c=lh!==0;return lh=0,c}function Bs(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return si===null?Lr.memoizedState=si=c:si=si.next=c,si}function Ya(){if(ti===null){var c=Lr.alternate;c=c!==null?c.memoizedState:null}else c=ti.next;var h=si===null?Lr.memoizedState:si.next;if(h!==null)si=h,ti=c;else{if(c===null)throw Error(t(310));ti=c,c={memoizedState:ti.memoizedState,baseState:ti.baseState,baseQueue:ti.baseQueue,queue:ti.queue,next:null},si===null?Lr.memoizedState=si=c:si=si.next=c}return si}function uh(c,h){return typeof h=="function"?h(c):h}function sg(c){var h=Ya(),g=h.queue;if(g===null)throw Error(t(311));g.lastRenderedReducer=c;var S=ti,R=S.baseQueue,k=g.pending;if(k!==null){if(R!==null){var q=R.next;R.next=k.next,k.next=q}S.baseQueue=R=k,g.pending=null}if(R!==null){k=R.next,S=S.baseState;var ne=q=null,se=null,Re=k;do{var rt=Re.lane;if((vu&rt)===rt)se!==null&&(se=se.next={lane:0,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null}),S=Re.hasEagerState?Re.eagerState:c(S,Re.action);else{var at={lane:rt,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null};se===null?(ne=se=at,q=S):se=se.next=at,Lr.lanes|=rt,mu|=rt}Re=Re.next}while(Re!==null&&Re!==k);se===null?q=S:se.next=ne,ms(S,h.memoizedState)||(ua=!0),h.memoizedState=S,h.baseState=q,h.baseQueue=se,g.lastRenderedState=S}if(c=g.interleaved,c!==null){R=c;do k=R.lane,Lr.lanes|=k,mu|=k,R=R.next;while(R!==c)}else R===null&&(g.lanes=0);return[h.memoizedState,g.dispatch]}function og(c){var h=Ya(),g=h.queue;if(g===null)throw Error(t(311));g.lastRenderedReducer=c;var S=g.dispatch,R=g.pending,k=h.memoizedState;if(R!==null){g.pending=null;var q=R=R.next;do k=c(k,q.action),q=q.next;while(q!==R);ms(k,h.memoizedState)||(ua=!0),h.memoizedState=k,h.baseQueue===null&&(h.baseState=k),g.lastRenderedState=k}return[k,S]}function r1(){}function i1(c,h){var g=Lr,S=Ya(),R=h(),k=!ms(S.memoizedState,R);if(k&&(S.memoizedState=R,ua=!0),S=S.queue,lg(o1.bind(null,g,S,c),[c]),S.getSnapshot!==h||k||si!==null&&si.memoizedState.tag&1){if(g.flags|=2048,ch(9,s1.bind(null,g,S,R,h),void 0,null),oi===null)throw Error(t(349));vu&30||a1(g,h,R)}return R}function a1(c,h,g){c.flags|=16384,c={getSnapshot:h,value:g},h=Lr.updateQueue,h===null?(h={lastEffect:null,stores:null},Lr.updateQueue=h,h.stores=[c]):(g=h.stores,g===null?h.stores=[c]:g.push(c))}function s1(c,h,g,S){h.value=g,h.getSnapshot=S,l1(h)&&u1(c)}function o1(c,h,g){return g(function(){l1(h)&&u1(c)})}function l1(c){var h=c.getSnapshot;c=c.value;try{var g=h();return!ms(c,g)}catch{return!0}}function u1(c){var h=_o(c,1);h!==null&&ys(h,c,1,-1)}function c1(c){var h=Bs();return typeof c=="function"&&(c=c()),h.memoizedState=h.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:uh,lastRenderedState:c},h.queue=c,c=c.dispatch=pD.bind(null,Lr,c),[h.memoizedState,c]}function ch(c,h,g,S){return c={tag:c,create:h,destroy:g,deps:S,next:null},h=Lr.updateQueue,h===null?(h={lastEffect:null,stores:null},Lr.updateQueue=h,h.lastEffect=c.next=c):(g=h.lastEffect,g===null?h.lastEffect=c.next=c:(S=g.next,g.next=c,c.next=S,h.lastEffect=c)),c}function d1(){return Ya().memoizedState}function bv(c,h,g,S){var R=Bs();Lr.flags|=c,R.memoizedState=ch(1|h,g,void 0,S===void 0?null:S)}function Cv(c,h,g,S){var R=Ya();S=S===void 0?null:S;var k=void 0;if(ti!==null){var q=ti.memoizedState;if(k=q.destroy,S!==null&&rg(S,q.deps)){R.memoizedState=ch(h,g,k,S);return}}Lr.flags|=c,R.memoizedState=ch(1|h,g,k,S)}function h1(c,h){return bv(8390656,8,c,h)}function lg(c,h){return Cv(2048,8,c,h)}function f1(c,h){return Cv(4,2,c,h)}function v1(c,h){return Cv(4,4,c,h)}function m1(c,h){if(typeof h=="function")return c=c(),h(c),function(){h(null)};if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function p1(c,h,g){return g=g!=null?g.concat([c]):null,Cv(4,4,m1.bind(null,h,c),g)}function ug(){}function g1(c,h){var g=Ya();h=h===void 0?null:h;var S=g.memoizedState;return S!==null&&h!==null&&rg(h,S[1])?S[0]:(g.memoizedState=[c,h],c)}function _1(c,h){var g=Ya();h=h===void 0?null:h;var S=g.memoizedState;return S!==null&&h!==null&&rg(h,S[1])?S[0]:(c=c(),g.memoizedState=[c,h],c)}function E1(c,h,g){return vu&21?(ms(g,h)||(g=ya(),Lr.lanes|=g,mu|=g,c.baseState=!0),h):(c.baseState&&(c.baseState=!1,ua=!0),c.memoizedState=g)}function vD(c,h){var g=zn;zn=g!==0&&4>g?g:4,c(!0);var S=ng.transition;ng.transition={};try{c(!1),h()}finally{zn=g,ng.transition=S}}function y1(){return Ya().memoizedState}function mD(c,h,g){var S=yl(c);if(g={lane:S,action:g,hasEagerState:!1,eagerState:null,next:null},b1(c))C1(h,g);else if(g=ZS(c,h,g,S),g!==null){var R=Wi();ys(g,c,S,R),S1(g,h,S)}}function pD(c,h,g){var S=yl(c),R={lane:S,action:g,hasEagerState:!1,eagerState:null,next:null};if(b1(c))C1(h,R);else{var k=c.alternate;if(c.lanes===0&&(k===null||k.lanes===0)&&(k=h.lastRenderedReducer,k!==null))try{var q=h.lastRenderedState,ne=k(q,g);if(R.hasEagerState=!0,R.eagerState=ne,ms(ne,q)){var se=h.interleaved;se===null?(R.next=R,Y0(h)):(R.next=se.next,se.next=R),h.interleaved=R;return}}catch{}finally{}g=ZS(c,h,R,S),g!==null&&(R=Wi(),ys(g,c,S,R),S1(g,h,S))}}function b1(c){var h=c.alternate;return c===Lr||h!==null&&h===Lr}function C1(c,h){oh=yv=!0;var g=c.pending;g===null?h.next=h:(h.next=g.next,g.next=h),c.pending=h}function S1(c,h,g){if(g&4194240){var S=h.lanes;S&=c.pendingLanes,g|=S,h.lanes=g,ks(c,g)}}var Sv={readContext:Qa,useCallback:xi,useContext:xi,useEffect:xi,useImperativeHandle:xi,useInsertionEffect:xi,useLayoutEffect:xi,useMemo:xi,useReducer:xi,useRef:xi,useState:xi,useDebugValue:xi,useDeferredValue:xi,useTransition:xi,useMutableSource:xi,useSyncExternalStore:xi,useId:xi,unstable_isNewReconciler:!1},gD={readContext:Qa,useCallback:function(c,h){return Bs().memoizedState=[c,h===void 0?null:h],c},useContext:Qa,useEffect:h1,useImperativeHandle:function(c,h,g){return g=g!=null?g.concat([c]):null,bv(4194308,4,m1.bind(null,h,c),g)},useLayoutEffect:function(c,h){return bv(4194308,4,c,h)},useInsertionEffect:function(c,h){return bv(4,2,c,h)},useMemo:function(c,h){var g=Bs();return h=h===void 0?null:h,c=c(),g.memoizedState=[c,h],c},useReducer:function(c,h,g){var S=Bs();return h=g!==void 0?g(h):h,S.memoizedState=S.baseState=h,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:h},S.queue=c,c=c.dispatch=mD.bind(null,Lr,c),[S.memoizedState,c]},useRef:function(c){var h=Bs();return c={current:c},h.memoizedState=c},useState:c1,useDebugValue:ug,useDeferredValue:function(c){return Bs().memoizedState=c},useTransition:function(){var c=c1(!1),h=c[0];return c=vD.bind(null,c[1]),Bs().memoizedState=c,[h,c]},useMutableSource:function(){},useSyncExternalStore:function(c,h,g){var S=Lr,R=Bs();if(Sr){if(g===void 0)throw Error(t(407));g=g()}else{if(g=h(),oi===null)throw Error(t(349));vu&30||a1(S,h,g)}R.memoizedState=g;var k={value:g,getSnapshot:h};return R.queue=k,h1(o1.bind(null,S,k,c),[c]),S.flags|=2048,ch(9,s1.bind(null,S,k,g,h),void 0,null),g},useId:function(){var c=Bs(),h=oi.identifierPrefix;if(Sr){var g=go,S=po;g=(S&~(1<<32-Dr(S)-1)).toString(32)+g,h=":"+h+"R"+g,g=lh++,0<g&&(h+="H"+g.toString(32)),h+=":"}else g=fD++,h=":"+h+"r"+g.toString(32)+":";return c.memoizedState=h},unstable_isNewReconciler:!1},_D={readContext:Qa,useCallback:g1,useContext:Qa,useEffect:lg,useImperativeHandle:p1,useInsertionEffect:f1,useLayoutEffect:v1,useMemo:_1,useReducer:sg,useRef:d1,useState:function(){return sg(uh)},useDebugValue:ug,useDeferredValue:function(c){var h=Ya();return E1(h,ti.memoizedState,c)},useTransition:function(){var c=sg(uh)[0],h=Ya().memoizedState;return[c,h]},useMutableSource:r1,useSyncExternalStore:i1,useId:y1,unstable_isNewReconciler:!1},ED={readContext:Qa,useCallback:g1,useContext:Qa,useEffect:lg,useImperativeHandle:p1,useInsertionEffect:f1,useLayoutEffect:v1,useMemo:_1,useReducer:og,useRef:d1,useState:function(){return og(uh)},useDebugValue:ug,useDeferredValue:function(c){var h=Ya();return ti===null?h.memoizedState=c:E1(h,ti.memoizedState,c)},useTransition:function(){var c=og(uh)[0],h=Ya().memoizedState;return[c,h]},useMutableSource:r1,useSyncExternalStore:i1,useId:y1,unstable_isNewReconciler:!1};function gs(c,h){if(c&&c.defaultProps){h=J({},h),c=c.defaultProps;for(var g in c)h[g]===void 0&&(h[g]=c[g]);return h}return h}function cg(c,h,g,S){h=c.memoizedState,g=g(S,h),g=g==null?h:J({},h,g),c.memoizedState=g,c.lanes===0&&(c.updateQueue.baseState=g)}var Tv={isMounted:function(c){return(c=c._reactInternals)?$t(c)===c:!1},enqueueSetState:function(c,h,g){c=c._reactInternals;var S=Wi(),R=yl(c),k=Eo(S,R);k.payload=h,g!=null&&(k.callback=g),h=pl(c,k,R),h!==null&&(ys(h,c,R,S),pv(h,c,R))},enqueueReplaceState:function(c,h,g){c=c._reactInternals;var S=Wi(),R=yl(c),k=Eo(S,R);k.tag=1,k.payload=h,g!=null&&(k.callback=g),h=pl(c,k,R),h!==null&&(ys(h,c,R,S),pv(h,c,R))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var g=Wi(),S=yl(c),R=Eo(g,S);R.tag=2,h!=null&&(R.callback=h),h=pl(c,R,S),h!==null&&(ys(h,c,S,g),pv(h,c,S))}};function T1(c,h,g,S,R,k,q){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(S,k,q):h.prototype&&h.prototype.isPureReactComponent?!Yd(g,S)||!Yd(R,k):!0}function M1(c,h,g){var S=!1,R=fl,k=h.contextType;return typeof k=="object"&&k!==null?k=Qa(k):(R=la(h)?uu:Pi.current,S=h.contextTypes,k=(S=S!=null)?Rc(c,R):fl),h=new h(g,k),c.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Tv,c.stateNode=h,h._reactInternals=c,S&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=R,c.__reactInternalMemoizedMaskedChildContext=k),h}function N1(c,h,g,S){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(g,S),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(g,S),h.state!==c&&Tv.enqueueReplaceState(h,h.state,null)}function dg(c,h,g,S){var R=c.stateNode;R.props=g,R.state=c.memoizedState,R.refs={},X0(c);var k=h.contextType;typeof k=="object"&&k!==null?R.context=Qa(k):(k=la(h)?uu:Pi.current,R.context=Rc(c,k)),R.state=c.memoizedState,k=h.getDerivedStateFromProps,typeof k=="function"&&(cg(c,h,k,g),R.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(h=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),h!==R.state&&Tv.enqueueReplaceState(R,R.state,null),gv(c,g,R,S),R.state=c.memoizedState),typeof R.componentDidMount=="function"&&(c.flags|=4194308)}function Fc(c,h){try{var g="",S=h;do g+=ie(S),S=S.return;while(S);var R=g}catch(k){R=`
Error generating stack: `+k.message+`
`+k.stack}return{value:c,source:h,stack:R,digest:null}}function hg(c,h,g){return{value:c,source:null,stack:g??null,digest:h??null}}function fg(c,h){try{console.error(h.value)}catch(g){setTimeout(function(){throw g})}}var yD=typeof WeakMap=="function"?WeakMap:Map;function I1(c,h,g){g=Eo(-1,g),g.tag=3,g.payload={element:null};var S=h.value;return g.callback=function(){Ov||(Ov=!0,Ag=S),fg(c,h)},g}function A1(c,h,g){g=Eo(-1,g),g.tag=3;var S=c.type.getDerivedStateFromError;if(typeof S=="function"){var R=h.value;g.payload=function(){return S(R)},g.callback=function(){fg(c,h)}}var k=c.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(g.callback=function(){fg(c,h),typeof S!="function"&&(_l===null?_l=new Set([this]):_l.add(this));var q=h.stack;this.componentDidCatch(h.value,{componentStack:q!==null?q:""})}),g}function w1(c,h,g){var S=c.pingCache;if(S===null){S=c.pingCache=new yD;var R=new Set;S.set(h,R)}else R=S.get(h),R===void 0&&(R=new Set,S.set(h,R));R.has(g)||(R.add(g),c=DD.bind(null,c,h,g),h.then(c,c))}function R1(c){do{var h;if((h=c.tag===13)&&(h=c.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return c;c=c.return}while(c!==null);return null}function O1(c,h,g,S,R){return c.mode&1?(c.flags|=65536,c.lanes=R,c):(c===h?c.flags|=65536:(c.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(h=Eo(-1,1),h.tag=2,pl(g,h,1))),g.lanes|=1),c)}var bD=N.ReactCurrentOwner,ua=!1;function Ki(c,h,g,S){h.child=c===null?XS(h,null,g,S):Dc(h,c.child,g,S)}function L1(c,h,g,S,R){g=g.render;var k=h.ref;return Pc(h,R),S=ig(c,h,g,S,k,R),g=ag(),c!==null&&!ua?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~R,yo(c,h,R)):(Sr&&g&&G0(h),h.flags|=1,Ki(c,h,S,R),h.child)}function U1(c,h,g,S,R){if(c===null){var k=g.type;return typeof k=="function"&&!kg(k)&&k.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(h.tag=15,h.type=k,D1(c,h,k,S,R)):(c=xv(g.type,null,S,h,h.mode,R),c.ref=h.ref,c.return=h,h.child=c)}if(k=c.child,!(c.lanes&R)){var q=k.memoizedProps;if(g=g.compare,g=g!==null?g:Yd,g(q,S)&&c.ref===h.ref)return yo(c,h,R)}return h.flags|=1,c=Cl(k,S),c.ref=h.ref,c.return=h,h.child=c}function D1(c,h,g,S,R){if(c!==null){var k=c.memoizedProps;if(Yd(k,S)&&c.ref===h.ref)if(ua=!1,h.pendingProps=S=k,(c.lanes&R)!==0)c.flags&131072&&(ua=!0);else return h.lanes=c.lanes,yo(c,h,R)}return vg(c,h,g,S,R)}function k1(c,h,g){var S=h.pendingProps,R=S.children,k=c!==null?c.memoizedState:null;if(S.mode==="hidden")if(!(h.mode&1))h.memoizedState={baseLanes:0,cachePool:null,transitions:null},vr(Hc,Ta),Ta|=g;else{if(!(g&1073741824))return c=k!==null?k.baseLanes|g:g,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:c,cachePool:null,transitions:null},h.updateQueue=null,vr(Hc,Ta),Ta|=c,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},S=k!==null?k.baseLanes:g,vr(Hc,Ta),Ta|=S}else k!==null?(S=k.baseLanes|g,h.memoizedState=null):S=g,vr(Hc,Ta),Ta|=S;return Ki(c,h,R,g),h.child}function P1(c,h){var g=h.ref;(c===null&&g!==null||c!==null&&c.ref!==g)&&(h.flags|=512,h.flags|=2097152)}function vg(c,h,g,S,R){var k=la(g)?uu:Pi.current;return k=Rc(h,k),Pc(h,R),g=ig(c,h,g,S,k,R),S=ag(),c!==null&&!ua?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~R,yo(c,h,R)):(Sr&&S&&G0(h),h.flags|=1,Ki(c,h,g,R),h.child)}function x1(c,h,g,S,R){if(la(g)){var k=!0;lv(h)}else k=!1;if(Pc(h,R),h.stateNode===null)Nv(c,h),M1(h,g,S),dg(h,g,S,R),S=!0;else if(c===null){var q=h.stateNode,ne=h.memoizedProps;q.props=ne;var se=q.context,Re=g.contextType;typeof Re=="object"&&Re!==null?Re=Qa(Re):(Re=la(g)?uu:Pi.current,Re=Rc(h,Re));var rt=g.getDerivedStateFromProps,at=typeof rt=="function"||typeof q.getSnapshotBeforeUpdate=="function";at||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(ne!==S||se!==Re)&&N1(h,q,S,Re),ml=!1;var nt=h.memoizedState;q.state=nt,gv(h,S,q,R),se=h.memoizedState,ne!==S||nt!==se||oa.current||ml?(typeof rt=="function"&&(cg(h,g,rt,S),se=h.memoizedState),(ne=ml||T1(h,g,ne,S,nt,se,Re))?(at||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(h.flags|=4194308)):(typeof q.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=S,h.memoizedState=se),q.props=S,q.state=se,q.context=Re,S=ne):(typeof q.componentDidMount=="function"&&(h.flags|=4194308),S=!1)}else{q=h.stateNode,JS(c,h),ne=h.memoizedProps,Re=h.type===h.elementType?ne:gs(h.type,ne),q.props=Re,at=h.pendingProps,nt=q.context,se=g.contextType,typeof se=="object"&&se!==null?se=Qa(se):(se=la(g)?uu:Pi.current,se=Rc(h,se));var kt=g.getDerivedStateFromProps;(rt=typeof kt=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(ne!==at||nt!==se)&&N1(h,q,S,se),ml=!1,nt=h.memoizedState,q.state=nt,gv(h,S,q,R);var Gt=h.memoizedState;ne!==at||nt!==Gt||oa.current||ml?(typeof kt=="function"&&(cg(h,g,kt,S),Gt=h.memoizedState),(Re=ml||T1(h,g,Re,S,nt,Gt,se)||!1)?(rt||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(S,Gt,se),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(S,Gt,se)),typeof q.componentDidUpdate=="function"&&(h.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof q.componentDidUpdate!="function"||ne===c.memoizedProps&&nt===c.memoizedState||(h.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||ne===c.memoizedProps&&nt===c.memoizedState||(h.flags|=1024),h.memoizedProps=S,h.memoizedState=Gt),q.props=S,q.state=Gt,q.context=se,S=Re):(typeof q.componentDidUpdate!="function"||ne===c.memoizedProps&&nt===c.memoizedState||(h.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||ne===c.memoizedProps&&nt===c.memoizedState||(h.flags|=1024),S=!1)}return mg(c,h,g,S,k,R)}function mg(c,h,g,S,R,k){P1(c,h);var q=(h.flags&128)!==0;if(!S&&!q)return R&&zS(h,g,!1),yo(c,h,k);S=h.stateNode,bD.current=h;var ne=q&&typeof g.getDerivedStateFromError!="function"?null:S.render();return h.flags|=1,c!==null&&q?(h.child=Dc(h,c.child,null,k),h.child=Dc(h,null,ne,k)):Ki(c,h,ne,k),h.memoizedState=S.state,R&&zS(h,g,!0),h.child}function F1(c){var h=c.stateNode;h.pendingContext?HS(c,h.pendingContext,h.pendingContext!==h.context):h.context&&HS(c,h.context,!1),Z0(c,h.containerInfo)}function B1(c,h,g,S,R){return Uc(),$0(R),h.flags|=256,Ki(c,h,g,S),h.child}var pg={dehydrated:null,treeContext:null,retryLane:0};function gg(c){return{baseLanes:c,cachePool:null,transitions:null}}function H1(c,h,g){var S=h.pendingProps,R=Or.current,k=!1,q=(h.flags&128)!==0,ne;if((ne=q)||(ne=c!==null&&c.memoizedState===null?!1:(R&2)!==0),ne?(k=!0,h.flags&=-129):(c===null||c.memoizedState!==null)&&(R|=1),vr(Or,R&1),c===null)return V0(h),c=h.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(h.mode&1?c.data==="$!"?h.lanes=8:h.lanes=1073741824:h.lanes=1,null):(q=S.children,c=S.fallback,k?(S=h.mode,k=h.child,q={mode:"hidden",children:q},!(S&1)&&k!==null?(k.childLanes=0,k.pendingProps=q):k=Fv(q,S,0,null),c=Eu(c,S,g,null),k.return=h,c.return=h,k.sibling=c,h.child=k,h.child.memoizedState=gg(g),h.memoizedState=pg,c):_g(h,q));if(R=c.memoizedState,R!==null&&(ne=R.dehydrated,ne!==null))return CD(c,h,q,S,ne,R,g);if(k){k=S.fallback,q=h.mode,R=c.child,ne=R.sibling;var se={mode:"hidden",children:S.children};return!(q&1)&&h.child!==R?(S=h.child,S.childLanes=0,S.pendingProps=se,h.deletions=null):(S=Cl(R,se),S.subtreeFlags=R.subtreeFlags&14680064),ne!==null?k=Cl(ne,k):(k=Eu(k,q,g,null),k.flags|=2),k.return=h,S.return=h,S.sibling=k,h.child=S,S=k,k=h.child,q=c.child.memoizedState,q=q===null?gg(g):{baseLanes:q.baseLanes|g,cachePool:null,transitions:q.transitions},k.memoizedState=q,k.childLanes=c.childLanes&~g,h.memoizedState=pg,S}return k=c.child,c=k.sibling,S=Cl(k,{mode:"visible",children:S.children}),!(h.mode&1)&&(S.lanes=g),S.return=h,S.sibling=null,c!==null&&(g=h.deletions,g===null?(h.deletions=[c],h.flags|=16):g.push(c)),h.child=S,h.memoizedState=null,S}function _g(c,h){return h=Fv({mode:"visible",children:h},c.mode,0,null),h.return=c,c.child=h}function Mv(c,h,g,S){return S!==null&&$0(S),Dc(h,c.child,null,g),c=_g(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function CD(c,h,g,S,R,k,q){if(g)return h.flags&256?(h.flags&=-257,S=hg(Error(t(422))),Mv(c,h,q,S)):h.memoizedState!==null?(h.child=c.child,h.flags|=128,null):(k=S.fallback,R=h.mode,S=Fv({mode:"visible",children:S.children},R,0,null),k=Eu(k,R,q,null),k.flags|=2,S.return=h,k.return=h,S.sibling=k,h.child=S,h.mode&1&&Dc(h,c.child,null,q),h.child.memoizedState=gg(q),h.memoizedState=pg,k);if(!(h.mode&1))return Mv(c,h,q,null);if(R.data==="$!"){if(S=R.nextSibling&&R.nextSibling.dataset,S)var ne=S.dgst;return S=ne,k=Error(t(419)),S=hg(k,S,void 0),Mv(c,h,q,S)}if(ne=(q&c.childLanes)!==0,ua||ne){if(S=oi,S!==null){switch(q&-q){case 4:R=2;break;case 16:R=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:R=32;break;case 536870912:R=268435456;break;default:R=0}R=R&(S.suspendedLanes|q)?0:R,R!==0&&R!==k.retryLane&&(k.retryLane=R,_o(c,R),ys(S,c,R,-1))}return Dg(),S=hg(Error(t(421))),Mv(c,h,q,S)}return R.data==="$?"?(h.flags|=128,h.child=c.child,h=kD.bind(null,c),R._reactRetry=h,null):(c=k.treeContext,Sa=dl(R.nextSibling),Ca=h,Sr=!0,ps=null,c!==null&&(Ka[Wa++]=po,Ka[Wa++]=go,Ka[Wa++]=cu,po=c.id,go=c.overflow,cu=h),h=_g(h,S.children),h.flags|=4096,h)}function G1(c,h,g){c.lanes|=h;var S=c.alternate;S!==null&&(S.lanes|=h),Q0(c.return,h,g)}function Eg(c,h,g,S,R){var k=c.memoizedState;k===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:S,tail:g,tailMode:R}:(k.isBackwards=h,k.rendering=null,k.renderingStartTime=0,k.last=S,k.tail=g,k.tailMode=R)}function z1(c,h,g){var S=h.pendingProps,R=S.revealOrder,k=S.tail;if(Ki(c,h,S.children,g),S=Or.current,S&2)S=S&1|2,h.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&G1(c,g,h);else if(c.tag===19)G1(c,g,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}S&=1}if(vr(Or,S),!(h.mode&1))h.memoizedState=null;else switch(R){case"forwards":for(g=h.child,R=null;g!==null;)c=g.alternate,c!==null&&_v(c)===null&&(R=g),g=g.sibling;g=R,g===null?(R=h.child,h.child=null):(R=g.sibling,g.sibling=null),Eg(h,!1,R,g,k);break;case"backwards":for(g=null,R=h.child,h.child=null;R!==null;){if(c=R.alternate,c!==null&&_v(c)===null){h.child=R;break}c=R.sibling,R.sibling=g,g=R,R=c}Eg(h,!0,g,null,k);break;case"together":Eg(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Nv(c,h){!(h.mode&1)&&c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2)}function yo(c,h,g){if(c!==null&&(h.dependencies=c.dependencies),mu|=h.lanes,!(g&h.childLanes))return null;if(c!==null&&h.child!==c.child)throw Error(t(153));if(h.child!==null){for(c=h.child,g=Cl(c,c.pendingProps),h.child=g,g.return=h;c.sibling!==null;)c=c.sibling,g=g.sibling=Cl(c,c.pendingProps),g.return=h;g.sibling=null}return h.child}function SD(c,h,g){switch(h.tag){case 3:F1(h),Uc();break;case 5:n1(h);break;case 1:la(h.type)&&lv(h);break;case 4:Z0(h,h.stateNode.containerInfo);break;case 10:var S=h.type._context,R=h.memoizedProps.value;vr(vv,S._currentValue),S._currentValue=R;break;case 13:if(S=h.memoizedState,S!==null)return S.dehydrated!==null?(vr(Or,Or.current&1),h.flags|=128,null):g&h.child.childLanes?H1(c,h,g):(vr(Or,Or.current&1),c=yo(c,h,g),c!==null?c.sibling:null);vr(Or,Or.current&1);break;case 19:if(S=(g&h.childLanes)!==0,c.flags&128){if(S)return z1(c,h,g);h.flags|=128}if(R=h.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),vr(Or,Or.current),S)break;return null;case 22:case 23:return h.lanes=0,k1(c,h,g)}return yo(c,h,g)}var j1,yg,V1,$1;j1=function(c,h){for(var g=h.child;g!==null;){if(g.tag===5||g.tag===6)c.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},yg=function(){},V1=function(c,h,g,S){var R=c.memoizedProps;if(R!==S){c=h.stateNode,fu(Fs.current);var k=null;switch(g){case"input":R=Ee(c,R),S=Ee(c,S),k=[];break;case"select":R=J({},R,{value:void 0}),S=J({},S,{value:void 0}),k=[];break;case"textarea":R=At(c,R),S=At(c,S),k=[];break;default:typeof R.onClick!="function"&&typeof S.onClick=="function"&&(c.onclick=av)}rn(g,S);var q;g=null;for(Re in R)if(!S.hasOwnProperty(Re)&&R.hasOwnProperty(Re)&&R[Re]!=null)if(Re==="style"){var ne=R[Re];for(q in ne)ne.hasOwnProperty(q)&&(g||(g={}),g[q]="")}else Re!=="dangerouslySetInnerHTML"&&Re!=="children"&&Re!=="suppressContentEditableWarning"&&Re!=="suppressHydrationWarning"&&Re!=="autoFocus"&&(i.hasOwnProperty(Re)?k||(k=[]):(k=k||[]).push(Re,null));for(Re in S){var se=S[Re];if(ne=R!=null?R[Re]:void 0,S.hasOwnProperty(Re)&&se!==ne&&(se!=null||ne!=null))if(Re==="style")if(ne){for(q in ne)!ne.hasOwnProperty(q)||se&&se.hasOwnProperty(q)||(g||(g={}),g[q]="");for(q in se)se.hasOwnProperty(q)&&ne[q]!==se[q]&&(g||(g={}),g[q]=se[q])}else g||(k||(k=[]),k.push(Re,g)),g=se;else Re==="dangerouslySetInnerHTML"?(se=se?se.__html:void 0,ne=ne?ne.__html:void 0,se!=null&&ne!==se&&(k=k||[]).push(Re,se)):Re==="children"?typeof se!="string"&&typeof se!="number"||(k=k||[]).push(Re,""+se):Re!=="suppressContentEditableWarning"&&Re!=="suppressHydrationWarning"&&(i.hasOwnProperty(Re)?(se!=null&&Re==="onScroll"&&gr("scroll",c),k||ne===se||(k=[])):(k=k||[]).push(Re,se))}g&&(k=k||[]).push("style",g);var Re=k;(h.updateQueue=Re)&&(h.flags|=4)}},$1=function(c,h,g,S){g!==S&&(h.flags|=4)};function dh(c,h){if(!Sr)switch(c.tailMode){case"hidden":h=c.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?c.tail=null:g.sibling=null;break;case"collapsed":g=c.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:S.sibling=null}}function Fi(c){var h=c.alternate!==null&&c.alternate.child===c.child,g=0,S=0;if(h)for(var R=c.child;R!==null;)g|=R.lanes|R.childLanes,S|=R.subtreeFlags&14680064,S|=R.flags&14680064,R.return=c,R=R.sibling;else for(R=c.child;R!==null;)g|=R.lanes|R.childLanes,S|=R.subtreeFlags,S|=R.flags,R.return=c,R=R.sibling;return c.subtreeFlags|=S,c.childLanes=g,h}function TD(c,h,g){var S=h.pendingProps;switch(z0(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fi(h),null;case 1:return la(h.type)&&ov(),Fi(h),null;case 3:return S=h.stateNode,xc(),_r(oa),_r(Pi),tg(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(c===null||c.child===null)&&(hv(h)?h.flags|=4:c===null||c.memoizedState.isDehydrated&&!(h.flags&256)||(h.flags|=1024,ps!==null&&(Og(ps),ps=null))),yg(c,h),Fi(h),null;case 5:J0(h);var R=fu(sh.current);if(g=h.type,c!==null&&h.stateNode!=null)V1(c,h,g,S,R),c.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!S){if(h.stateNode===null)throw Error(t(166));return Fi(h),null}if(c=fu(Fs.current),hv(h)){S=h.stateNode,g=h.type;var k=h.memoizedProps;switch(S[xs]=h,S[th]=k,c=(h.mode&1)!==0,g){case"dialog":gr("cancel",S),gr("close",S);break;case"iframe":case"object":case"embed":gr("load",S);break;case"video":case"audio":for(R=0;R<Zd.length;R++)gr(Zd[R],S);break;case"source":gr("error",S);break;case"img":case"image":case"link":gr("error",S),gr("load",S);break;case"details":gr("toggle",S);break;case"input":Ue(S,k),gr("invalid",S);break;case"select":S._wrapperState={wasMultiple:!!k.multiple},gr("invalid",S);break;case"textarea":Ve(S,k),gr("invalid",S)}rn(g,k),R=null;for(var q in k)if(k.hasOwnProperty(q)){var ne=k[q];q==="children"?typeof ne=="string"?S.textContent!==ne&&(k.suppressHydrationWarning!==!0&&iv(S.textContent,ne,c),R=["children",ne]):typeof ne=="number"&&S.textContent!==""+ne&&(k.suppressHydrationWarning!==!0&&iv(S.textContent,ne,c),R=["children",""+ne]):i.hasOwnProperty(q)&&ne!=null&&q==="onScroll"&&gr("scroll",S)}switch(g){case"input":Be(S),We(S,k,!0);break;case"textarea":Be(S),mt(S);break;case"select":case"option":break;default:typeof k.onClick=="function"&&(S.onclick=av)}S=R,h.updateQueue=S,S!==null&&(h.flags|=4)}else{q=R.nodeType===9?R:R.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=et(g)),c==="http://www.w3.org/1999/xhtml"?g==="script"?(c=q.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof S.is=="string"?c=q.createElement(g,{is:S.is}):(c=q.createElement(g),g==="select"&&(q=c,S.multiple?q.multiple=!0:S.size&&(q.size=S.size))):c=q.createElementNS(c,g),c[xs]=h,c[th]=S,j1(c,h,!1,!1),h.stateNode=c;e:{switch(q=Zt(g,S),g){case"dialog":gr("cancel",c),gr("close",c),R=S;break;case"iframe":case"object":case"embed":gr("load",c),R=S;break;case"video":case"audio":for(R=0;R<Zd.length;R++)gr(Zd[R],c);R=S;break;case"source":gr("error",c),R=S;break;case"img":case"image":case"link":gr("error",c),gr("load",c),R=S;break;case"details":gr("toggle",c),R=S;break;case"input":Ue(c,S),R=Ee(c,S),gr("invalid",c);break;case"option":R=S;break;case"select":c._wrapperState={wasMultiple:!!S.multiple},R=J({},S,{value:void 0}),gr("invalid",c);break;case"textarea":Ve(c,S),R=At(c,S),gr("invalid",c);break;default:R=S}rn(g,R),ne=R;for(k in ne)if(ne.hasOwnProperty(k)){var se=ne[k];k==="style"?Dt(c,se):k==="dangerouslySetInnerHTML"?(se=se?se.__html:void 0,se!=null&&xe(c,se)):k==="children"?typeof se=="string"?(g!=="textarea"||se!=="")&&Ht(c,se):typeof se=="number"&&Ht(c,""+se):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(i.hasOwnProperty(k)?se!=null&&k==="onScroll"&&gr("scroll",c):se!=null&&T(c,k,se,q))}switch(g){case"input":Be(c),We(c,S,!1);break;case"textarea":Be(c),mt(c);break;case"option":S.value!=null&&c.setAttribute("value",""+oe(S.value));break;case"select":c.multiple=!!S.multiple,k=S.value,k!=null?He(c,!!S.multiple,k,!1):S.defaultValue!=null&&He(c,!!S.multiple,S.defaultValue,!0);break;default:typeof R.onClick=="function"&&(c.onclick=av)}switch(g){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break e;case"img":S=!0;break e;default:S=!1}}S&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return Fi(h),null;case 6:if(c&&h.stateNode!=null)$1(c,h,c.memoizedProps,S);else{if(typeof S!="string"&&h.stateNode===null)throw Error(t(166));if(g=fu(sh.current),fu(Fs.current),hv(h)){if(S=h.stateNode,g=h.memoizedProps,S[xs]=h,(k=S.nodeValue!==g)&&(c=Ca,c!==null))switch(c.tag){case 3:iv(S.nodeValue,g,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&iv(S.nodeValue,g,(c.mode&1)!==0)}k&&(h.flags|=4)}else S=(g.nodeType===9?g:g.ownerDocument).createTextNode(S),S[xs]=h,h.stateNode=S}return Fi(h),null;case 13:if(_r(Or),S=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(Sr&&Sa!==null&&h.mode&1&&!(h.flags&128))WS(),Uc(),h.flags|=98560,k=!1;else if(k=hv(h),S!==null&&S.dehydrated!==null){if(c===null){if(!k)throw Error(t(318));if(k=h.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(t(317));k[xs]=h}else Uc(),!(h.flags&128)&&(h.memoizedState=null),h.flags|=4;Fi(h),k=!1}else ps!==null&&(Og(ps),ps=null),k=!0;if(!k)return h.flags&65536?h:null}return h.flags&128?(h.lanes=g,h):(S=S!==null,S!==(c!==null&&c.memoizedState!==null)&&S&&(h.child.flags|=8192,h.mode&1&&(c===null||Or.current&1?ni===0&&(ni=3):Dg())),h.updateQueue!==null&&(h.flags|=4),Fi(h),null);case 4:return xc(),yg(c,h),c===null&&Jd(h.stateNode.containerInfo),Fi(h),null;case 10:return W0(h.type._context),Fi(h),null;case 17:return la(h.type)&&ov(),Fi(h),null;case 19:if(_r(Or),k=h.memoizedState,k===null)return Fi(h),null;if(S=(h.flags&128)!==0,q=k.rendering,q===null)if(S)dh(k,!1);else{if(ni!==0||c!==null&&c.flags&128)for(c=h.child;c!==null;){if(q=_v(c),q!==null){for(h.flags|=128,dh(k,!1),S=q.updateQueue,S!==null&&(h.updateQueue=S,h.flags|=4),h.subtreeFlags=0,S=g,g=h.child;g!==null;)k=g,c=S,k.flags&=14680066,q=k.alternate,q===null?(k.childLanes=0,k.lanes=c,k.child=null,k.subtreeFlags=0,k.memoizedProps=null,k.memoizedState=null,k.updateQueue=null,k.dependencies=null,k.stateNode=null):(k.childLanes=q.childLanes,k.lanes=q.lanes,k.child=q.child,k.subtreeFlags=0,k.deletions=null,k.memoizedProps=q.memoizedProps,k.memoizedState=q.memoizedState,k.updateQueue=q.updateQueue,k.type=q.type,c=q.dependencies,k.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),g=g.sibling;return vr(Or,Or.current&1|2),h.child}c=c.sibling}k.tail!==null&&qt()>Gc&&(h.flags|=128,S=!0,dh(k,!1),h.lanes=4194304)}else{if(!S)if(c=_v(q),c!==null){if(h.flags|=128,S=!0,g=c.updateQueue,g!==null&&(h.updateQueue=g,h.flags|=4),dh(k,!0),k.tail===null&&k.tailMode==="hidden"&&!q.alternate&&!Sr)return Fi(h),null}else 2*qt()-k.renderingStartTime>Gc&&g!==1073741824&&(h.flags|=128,S=!0,dh(k,!1),h.lanes=4194304);k.isBackwards?(q.sibling=h.child,h.child=q):(g=k.last,g!==null?g.sibling=q:h.child=q,k.last=q)}return k.tail!==null?(h=k.tail,k.rendering=h,k.tail=h.sibling,k.renderingStartTime=qt(),h.sibling=null,g=Or.current,vr(Or,S?g&1|2:g&1),h):(Fi(h),null);case 22:case 23:return Ug(),S=h.memoizedState!==null,c!==null&&c.memoizedState!==null!==S&&(h.flags|=8192),S&&h.mode&1?Ta&1073741824&&(Fi(h),h.subtreeFlags&6&&(h.flags|=8192)):Fi(h),null;case 24:return null;case 25:return null}throw Error(t(156,h.tag))}function MD(c,h){switch(z0(h),h.tag){case 1:return la(h.type)&&ov(),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return xc(),_r(oa),_r(Pi),tg(),c=h.flags,c&65536&&!(c&128)?(h.flags=c&-65537|128,h):null;case 5:return J0(h),null;case 13:if(_r(Or),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(t(340));Uc()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return _r(Or),null;case 4:return xc(),null;case 10:return W0(h.type._context),null;case 22:case 23:return Ug(),null;case 24:return null;default:return null}}var Iv=!1,Bi=!1,ND=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function Bc(c,h){var g=c.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(S){kr(c,h,S)}else g.current=null}function bg(c,h,g){try{g()}catch(S){kr(c,h,S)}}var q1=!1;function ID(c,h){if(U0=ll,c=TS(),M0(c)){if("selectionStart"in c)var g={start:c.selectionStart,end:c.selectionEnd};else e:{g=(g=c.ownerDocument)&&g.defaultView||window;var S=g.getSelection&&g.getSelection();if(S&&S.rangeCount!==0){g=S.anchorNode;var R=S.anchorOffset,k=S.focusNode;S=S.focusOffset;try{g.nodeType,k.nodeType}catch{g=null;break e}var q=0,ne=-1,se=-1,Re=0,rt=0,at=c,nt=null;t:for(;;){for(var kt;at!==g||R!==0&&at.nodeType!==3||(ne=q+R),at!==k||S!==0&&at.nodeType!==3||(se=q+S),at.nodeType===3&&(q+=at.nodeValue.length),(kt=at.firstChild)!==null;)nt=at,at=kt;for(;;){if(at===c)break t;if(nt===g&&++Re===R&&(ne=q),nt===k&&++rt===S&&(se=q),(kt=at.nextSibling)!==null)break;at=nt,nt=at.parentNode}at=kt}g=ne===-1||se===-1?null:{start:ne,end:se}}else g=null}g=g||{start:0,end:0}}else g=null;for(D0={focusedElem:c,selectionRange:g},ll=!1,Ft=h;Ft!==null;)if(h=Ft,c=h.child,(h.subtreeFlags&1028)!==0&&c!==null)c.return=h,Ft=c;else for(;Ft!==null;){h=Ft;try{var Gt=h.alternate;if(h.flags&1024)switch(h.tag){case 0:case 11:case 15:break;case 1:if(Gt!==null){var jt=Gt.memoizedProps,Br=Gt.memoizedState,_e=h.stateNode,ce=_e.getSnapshotBeforeUpdate(h.elementType===h.type?jt:gs(h.type,jt),Br);_e.__reactInternalSnapshotBeforeUpdate=ce}break;case 3:var Te=h.stateNode.containerInfo;Te.nodeType===1?Te.textContent="":Te.nodeType===9&&Te.documentElement&&Te.removeChild(Te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(_t){kr(h,h.return,_t)}if(c=h.sibling,c!==null){c.return=h.return,Ft=c;break}Ft=h.return}return Gt=q1,q1=!1,Gt}function hh(c,h,g){var S=h.updateQueue;if(S=S!==null?S.lastEffect:null,S!==null){var R=S=S.next;do{if((R.tag&c)===c){var k=R.destroy;R.destroy=void 0,k!==void 0&&bg(h,g,k)}R=R.next}while(R!==S)}}function Av(c,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var g=h=h.next;do{if((g.tag&c)===c){var S=g.create;g.destroy=S()}g=g.next}while(g!==h)}}function Cg(c){var h=c.ref;if(h!==null){var g=c.stateNode;switch(c.tag){case 5:c=g;break;default:c=g}typeof h=="function"?h(c):h.current=c}}function K1(c){var h=c.alternate;h!==null&&(c.alternate=null,K1(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&(delete h[xs],delete h[th],delete h[F0],delete h[uD],delete h[cD])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function W1(c){return c.tag===5||c.tag===3||c.tag===4}function Q1(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||W1(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Sg(c,h,g){var S=c.tag;if(S===5||S===6)c=c.stateNode,h?g.nodeType===8?g.parentNode.insertBefore(c,h):g.insertBefore(c,h):(g.nodeType===8?(h=g.parentNode,h.insertBefore(c,g)):(h=g,h.appendChild(c)),g=g._reactRootContainer,g!=null||h.onclick!==null||(h.onclick=av));else if(S!==4&&(c=c.child,c!==null))for(Sg(c,h,g),c=c.sibling;c!==null;)Sg(c,h,g),c=c.sibling}function Tg(c,h,g){var S=c.tag;if(S===5||S===6)c=c.stateNode,h?g.insertBefore(c,h):g.appendChild(c);else if(S!==4&&(c=c.child,c!==null))for(Tg(c,h,g),c=c.sibling;c!==null;)Tg(c,h,g),c=c.sibling}var bi=null,_s=!1;function gl(c,h,g){for(g=g.child;g!==null;)Y1(c,h,g),g=g.sibling}function Y1(c,h,g){if(Cr&&typeof Cr.onCommitFiberUnmount=="function")try{Cr.onCommitFiberUnmount(pn,g)}catch{}switch(g.tag){case 5:Bi||Bc(g,h);case 6:var S=bi,R=_s;bi=null,gl(c,h,g),bi=S,_s=R,bi!==null&&(_s?(c=bi,g=g.stateNode,c.nodeType===8?c.parentNode.removeChild(g):c.removeChild(g)):bi.removeChild(g.stateNode));break;case 18:bi!==null&&(_s?(c=bi,g=g.stateNode,c.nodeType===8?x0(c.parentNode,g):c.nodeType===1&&x0(c,g),ho(c)):x0(bi,g.stateNode));break;case 4:S=bi,R=_s,bi=g.stateNode.containerInfo,_s=!0,gl(c,h,g),bi=S,_s=R;break;case 0:case 11:case 14:case 15:if(!Bi&&(S=g.updateQueue,S!==null&&(S=S.lastEffect,S!==null))){R=S=S.next;do{var k=R,q=k.destroy;k=k.tag,q!==void 0&&(k&2||k&4)&&bg(g,h,q),R=R.next}while(R!==S)}gl(c,h,g);break;case 1:if(!Bi&&(Bc(g,h),S=g.stateNode,typeof S.componentWillUnmount=="function"))try{S.props=g.memoizedProps,S.state=g.memoizedState,S.componentWillUnmount()}catch(ne){kr(g,h,ne)}gl(c,h,g);break;case 21:gl(c,h,g);break;case 22:g.mode&1?(Bi=(S=Bi)||g.memoizedState!==null,gl(c,h,g),Bi=S):gl(c,h,g);break;default:gl(c,h,g)}}function X1(c){var h=c.updateQueue;if(h!==null){c.updateQueue=null;var g=c.stateNode;g===null&&(g=c.stateNode=new ND),h.forEach(function(S){var R=PD.bind(null,c,S);g.has(S)||(g.add(S),S.then(R,R))})}}function Es(c,h){var g=h.deletions;if(g!==null)for(var S=0;S<g.length;S++){var R=g[S];try{var k=c,q=h,ne=q;e:for(;ne!==null;){switch(ne.tag){case 5:bi=ne.stateNode,_s=!1;break e;case 3:bi=ne.stateNode.containerInfo,_s=!0;break e;case 4:bi=ne.stateNode.containerInfo,_s=!0;break e}ne=ne.return}if(bi===null)throw Error(t(160));Y1(k,q,R),bi=null,_s=!1;var se=R.alternate;se!==null&&(se.return=null),R.return=null}catch(Re){kr(R,h,Re)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)Z1(h,c),h=h.sibling}function Z1(c,h){var g=c.alternate,S=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(Es(h,c),Hs(c),S&4){try{hh(3,c,c.return),Av(3,c)}catch(jt){kr(c,c.return,jt)}try{hh(5,c,c.return)}catch(jt){kr(c,c.return,jt)}}break;case 1:Es(h,c),Hs(c),S&512&&g!==null&&Bc(g,g.return);break;case 5:if(Es(h,c),Hs(c),S&512&&g!==null&&Bc(g,g.return),c.flags&32){var R=c.stateNode;try{Ht(R,"")}catch(jt){kr(c,c.return,jt)}}if(S&4&&(R=c.stateNode,R!=null)){var k=c.memoizedProps,q=g!==null?g.memoizedProps:k,ne=c.type,se=c.updateQueue;if(c.updateQueue=null,se!==null)try{ne==="input"&&k.type==="radio"&&k.name!=null&&Ye(R,k),Zt(ne,q);var Re=Zt(ne,k);for(q=0;q<se.length;q+=2){var rt=se[q],at=se[q+1];rt==="style"?Dt(R,at):rt==="dangerouslySetInnerHTML"?xe(R,at):rt==="children"?Ht(R,at):T(R,rt,at,Re)}switch(ne){case"input":De(R,k);break;case"textarea":st(R,k);break;case"select":var nt=R._wrapperState.wasMultiple;R._wrapperState.wasMultiple=!!k.multiple;var kt=k.value;kt!=null?He(R,!!k.multiple,kt,!1):nt!==!!k.multiple&&(k.defaultValue!=null?He(R,!!k.multiple,k.defaultValue,!0):He(R,!!k.multiple,k.multiple?[]:"",!1))}R[th]=k}catch(jt){kr(c,c.return,jt)}}break;case 6:if(Es(h,c),Hs(c),S&4){if(c.stateNode===null)throw Error(t(162));R=c.stateNode,k=c.memoizedProps;try{R.nodeValue=k}catch(jt){kr(c,c.return,jt)}}break;case 3:if(Es(h,c),Hs(c),S&4&&g!==null&&g.memoizedState.isDehydrated)try{ho(h.containerInfo)}catch(jt){kr(c,c.return,jt)}break;case 4:Es(h,c),Hs(c);break;case 13:Es(h,c),Hs(c),R=c.child,R.flags&8192&&(k=R.memoizedState!==null,R.stateNode.isHidden=k,!k||R.alternate!==null&&R.alternate.memoizedState!==null||(Ig=qt())),S&4&&X1(c);break;case 22:if(rt=g!==null&&g.memoizedState!==null,c.mode&1?(Bi=(Re=Bi)||rt,Es(h,c),Bi=Re):Es(h,c),Hs(c),S&8192){if(Re=c.memoizedState!==null,(c.stateNode.isHidden=Re)&&!rt&&c.mode&1)for(Ft=c,rt=c.child;rt!==null;){for(at=Ft=rt;Ft!==null;){switch(nt=Ft,kt=nt.child,nt.tag){case 0:case 11:case 14:case 15:hh(4,nt,nt.return);break;case 1:Bc(nt,nt.return);var Gt=nt.stateNode;if(typeof Gt.componentWillUnmount=="function"){S=nt,g=nt.return;try{h=S,Gt.props=h.memoizedProps,Gt.state=h.memoizedState,Gt.componentWillUnmount()}catch(jt){kr(S,g,jt)}}break;case 5:Bc(nt,nt.return);break;case 22:if(nt.memoizedState!==null){tT(at);continue}}kt!==null?(kt.return=nt,Ft=kt):tT(at)}rt=rt.sibling}e:for(rt=null,at=c;;){if(at.tag===5){if(rt===null){rt=at;try{R=at.stateNode,Re?(k=R.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none"):(ne=at.stateNode,se=at.memoizedProps.style,q=se!=null&&se.hasOwnProperty("display")?se.display:null,ne.style.display=Ct("display",q))}catch(jt){kr(c,c.return,jt)}}}else if(at.tag===6){if(rt===null)try{at.stateNode.nodeValue=Re?"":at.memoizedProps}catch(jt){kr(c,c.return,jt)}}else if((at.tag!==22&&at.tag!==23||at.memoizedState===null||at===c)&&at.child!==null){at.child.return=at,at=at.child;continue}if(at===c)break e;for(;at.sibling===null;){if(at.return===null||at.return===c)break e;rt===at&&(rt=null),at=at.return}rt===at&&(rt=null),at.sibling.return=at.return,at=at.sibling}}break;case 19:Es(h,c),Hs(c),S&4&&X1(c);break;case 21:break;default:Es(h,c),Hs(c)}}function Hs(c){var h=c.flags;if(h&2){try{e:{for(var g=c.return;g!==null;){if(W1(g)){var S=g;break e}g=g.return}throw Error(t(160))}switch(S.tag){case 5:var R=S.stateNode;S.flags&32&&(Ht(R,""),S.flags&=-33);var k=Q1(c);Tg(c,k,R);break;case 3:case 4:var q=S.stateNode.containerInfo,ne=Q1(c);Sg(c,ne,q);break;default:throw Error(t(161))}}catch(se){kr(c,c.return,se)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function AD(c,h,g){Ft=c,J1(c)}function J1(c,h,g){for(var S=(c.mode&1)!==0;Ft!==null;){var R=Ft,k=R.child;if(R.tag===22&&S){var q=R.memoizedState!==null||Iv;if(!q){var ne=R.alternate,se=ne!==null&&ne.memoizedState!==null||Bi;ne=Iv;var Re=Bi;if(Iv=q,(Bi=se)&&!Re)for(Ft=R;Ft!==null;)q=Ft,se=q.child,q.tag===22&&q.memoizedState!==null?nT(R):se!==null?(se.return=q,Ft=se):nT(R);for(;k!==null;)Ft=k,J1(k),k=k.sibling;Ft=R,Iv=ne,Bi=Re}eT(c)}else R.subtreeFlags&8772&&k!==null?(k.return=R,Ft=k):eT(c)}}function eT(c){for(;Ft!==null;){var h=Ft;if(h.flags&8772){var g=h.alternate;try{if(h.flags&8772)switch(h.tag){case 0:case 11:case 15:Bi||Av(5,h);break;case 1:var S=h.stateNode;if(h.flags&4&&!Bi)if(g===null)S.componentDidMount();else{var R=h.elementType===h.type?g.memoizedProps:gs(h.type,g.memoizedProps);S.componentDidUpdate(R,g.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var k=h.updateQueue;k!==null&&t1(h,k,S);break;case 3:var q=h.updateQueue;if(q!==null){if(g=null,h.child!==null)switch(h.child.tag){case 5:g=h.child.stateNode;break;case 1:g=h.child.stateNode}t1(h,q,g)}break;case 5:var ne=h.stateNode;if(g===null&&h.flags&4){g=ne;var se=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":se.autoFocus&&g.focus();break;case"img":se.src&&(g.src=se.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var Re=h.alternate;if(Re!==null){var rt=Re.memoizedState;if(rt!==null){var at=rt.dehydrated;at!==null&&ho(at)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Bi||h.flags&512&&Cg(h)}catch(nt){kr(h,h.return,nt)}}if(h===c){Ft=null;break}if(g=h.sibling,g!==null){g.return=h.return,Ft=g;break}Ft=h.return}}function tT(c){for(;Ft!==null;){var h=Ft;if(h===c){Ft=null;break}var g=h.sibling;if(g!==null){g.return=h.return,Ft=g;break}Ft=h.return}}function nT(c){for(;Ft!==null;){var h=Ft;try{switch(h.tag){case 0:case 11:case 15:var g=h.return;try{Av(4,h)}catch(se){kr(h,g,se)}break;case 1:var S=h.stateNode;if(typeof S.componentDidMount=="function"){var R=h.return;try{S.componentDidMount()}catch(se){kr(h,R,se)}}var k=h.return;try{Cg(h)}catch(se){kr(h,k,se)}break;case 5:var q=h.return;try{Cg(h)}catch(se){kr(h,q,se)}}}catch(se){kr(h,h.return,se)}if(h===c){Ft=null;break}var ne=h.sibling;if(ne!==null){ne.return=h.return,Ft=ne;break}Ft=h.return}}var wD=Math.ceil,wv=N.ReactCurrentDispatcher,Mg=N.ReactCurrentOwner,Xa=N.ReactCurrentBatchConfig,Wn=0,oi=null,Qr=null,Ci=0,Ta=0,Hc=hl(0),ni=0,fh=null,mu=0,Rv=0,Ng=0,vh=null,ca=null,Ig=0,Gc=1/0,bo=null,Ov=!1,Ag=null,_l=null,Lv=!1,El=null,Uv=0,mh=0,wg=null,Dv=-1,kv=0;function Wi(){return Wn&6?qt():Dv!==-1?Dv:Dv=qt()}function yl(c){return c.mode&1?Wn&2&&Ci!==0?Ci&-Ci:hD.transition!==null?(kv===0&&(kv=ya()),kv):(c=zn,c!==0||(c=window.event,c=c===void 0?16:Cc(c.type)),c):1}function ys(c,h,g,S){if(50<mh)throw mh=0,wg=null,Error(t(185));Va(c,g,S),(!(Wn&2)||c!==oi)&&(c===oi&&(!(Wn&2)&&(Rv|=g),ni===4&&bl(c,Ci)),da(c,S),g===1&&Wn===0&&!(h.mode&1)&&(Gc=qt()+500,uv&&vl()))}function da(c,h){var g=c.callbackNode;Bd(c,h);var S=el(c,c===oi?Ci:0);if(S===0)g!==null&&gt(g),c.callbackNode=null,c.callbackPriority=0;else if(h=S&-S,c.callbackPriority!==h){if(g!=null&&gt(g),h===1)c.tag===0?dD(iT.bind(null,c)):jS(iT.bind(null,c)),oD(function(){!(Wn&6)&&vl()}),g=null;else{switch(ru(S)){case 1:g=sr;break;case 4:g=Pn;break;case 16:g=bt;break;case 536870912:g=mn;break;default:g=bt}g=hT(g,rT.bind(null,c))}c.callbackPriority=h,c.callbackNode=g}}function rT(c,h){if(Dv=-1,kv=0,Wn&6)throw Error(t(327));var g=c.callbackNode;if(zc()&&c.callbackNode!==g)return null;var S=el(c,c===oi?Ci:0);if(S===0)return null;if(S&30||S&c.expiredLanes||h)h=Pv(c,S);else{h=S;var R=Wn;Wn|=2;var k=sT();(oi!==c||Ci!==h)&&(bo=null,Gc=qt()+500,gu(c,h));do try{LD();break}catch(ne){aT(c,ne)}while(!0);K0(),wv.current=k,Wn=R,Qr!==null?h=0:(oi=null,Ci=0,h=ni)}if(h!==0){if(h===2&&(R=nu(c),R!==0&&(S=R,h=Rg(c,R))),h===1)throw g=fh,gu(c,0),bl(c,S),da(c,qt()),g;if(h===6)bl(c,S);else{if(R=c.current.alternate,!(S&30)&&!RD(R)&&(h=Pv(c,S),h===2&&(k=nu(c),k!==0&&(S=k,h=Rg(c,k))),h===1))throw g=fh,gu(c,0),bl(c,S),da(c,qt()),g;switch(c.finishedWork=R,c.finishedLanes=S,h){case 0:case 1:throw Error(t(345));case 2:_u(c,ca,bo);break;case 3:if(bl(c,S),(S&130023424)===S&&(h=Ig+500-qt(),10<h)){if(el(c,0)!==0)break;if(R=c.suspendedLanes,(R&S)!==S){Wi(),c.pingedLanes|=c.suspendedLanes&R;break}c.timeoutHandle=P0(_u.bind(null,c,ca,bo),h);break}_u(c,ca,bo);break;case 4:if(bl(c,S),(S&4194240)===S)break;for(h=c.eventTimes,R=-1;0<S;){var q=31-Dr(S);k=1<<q,q=h[q],q>R&&(R=q),S&=~k}if(S=R,S=qt()-S,S=(120>S?120:480>S?480:1080>S?1080:1920>S?1920:3e3>S?3e3:4320>S?4320:1960*wD(S/1960))-S,10<S){c.timeoutHandle=P0(_u.bind(null,c,ca,bo),S);break}_u(c,ca,bo);break;case 5:_u(c,ca,bo);break;default:throw Error(t(329))}}}return da(c,qt()),c.callbackNode===g?rT.bind(null,c):null}function Rg(c,h){var g=vh;return c.current.memoizedState.isDehydrated&&(gu(c,h).flags|=256),c=Pv(c,h),c!==2&&(h=ca,ca=g,h!==null&&Og(h)),c}function Og(c){ca===null?ca=c:ca.push.apply(ca,c)}function RD(c){for(var h=c;;){if(h.flags&16384){var g=h.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var S=0;S<g.length;S++){var R=g[S],k=R.getSnapshot;R=R.value;try{if(!ms(k(),R))return!1}catch{return!1}}}if(g=h.child,h.subtreeFlags&16384&&g!==null)g.return=h,h=g;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function bl(c,h){for(h&=~Ng,h&=~Rv,c.suspendedLanes|=h,c.pingedLanes&=~h,c=c.expirationTimes;0<h;){var g=31-Dr(h),S=1<<g;c[g]=-1,h&=~S}}function iT(c){if(Wn&6)throw Error(t(327));zc();var h=el(c,0);if(!(h&1))return da(c,qt()),null;var g=Pv(c,h);if(c.tag!==0&&g===2){var S=nu(c);S!==0&&(h=S,g=Rg(c,S))}if(g===1)throw g=fh,gu(c,0),bl(c,h),da(c,qt()),g;if(g===6)throw Error(t(345));return c.finishedWork=c.current.alternate,c.finishedLanes=h,_u(c,ca,bo),da(c,qt()),null}function Lg(c,h){var g=Wn;Wn|=1;try{return c(h)}finally{Wn=g,Wn===0&&(Gc=qt()+500,uv&&vl())}}function pu(c){El!==null&&El.tag===0&&!(Wn&6)&&zc();var h=Wn;Wn|=1;var g=Xa.transition,S=zn;try{if(Xa.transition=null,zn=1,c)return c()}finally{zn=S,Xa.transition=g,Wn=h,!(Wn&6)&&vl()}}function Ug(){Ta=Hc.current,_r(Hc)}function gu(c,h){c.finishedWork=null,c.finishedLanes=0;var g=c.timeoutHandle;if(g!==-1&&(c.timeoutHandle=-1,sD(g)),Qr!==null)for(g=Qr.return;g!==null;){var S=g;switch(z0(S),S.tag){case 1:S=S.type.childContextTypes,S!=null&&ov();break;case 3:xc(),_r(oa),_r(Pi),tg();break;case 5:J0(S);break;case 4:xc();break;case 13:_r(Or);break;case 19:_r(Or);break;case 10:W0(S.type._context);break;case 22:case 23:Ug()}g=g.return}if(oi=c,Qr=c=Cl(c.current,null),Ci=Ta=h,ni=0,fh=null,Ng=Rv=mu=0,ca=vh=null,hu!==null){for(h=0;h<hu.length;h++)if(g=hu[h],S=g.interleaved,S!==null){g.interleaved=null;var R=S.next,k=g.pending;if(k!==null){var q=k.next;k.next=R,S.next=q}g.pending=S}hu=null}return c}function aT(c,h){do{var g=Qr;try{if(K0(),Ev.current=Sv,yv){for(var S=Lr.memoizedState;S!==null;){var R=S.queue;R!==null&&(R.pending=null),S=S.next}yv=!1}if(vu=0,si=ti=Lr=null,oh=!1,lh=0,Mg.current=null,g===null||g.return===null){ni=1,fh=h,Qr=null;break}e:{var k=c,q=g.return,ne=g,se=h;if(h=Ci,ne.flags|=32768,se!==null&&typeof se=="object"&&typeof se.then=="function"){var Re=se,rt=ne,at=rt.tag;if(!(rt.mode&1)&&(at===0||at===11||at===15)){var nt=rt.alternate;nt?(rt.updateQueue=nt.updateQueue,rt.memoizedState=nt.memoizedState,rt.lanes=nt.lanes):(rt.updateQueue=null,rt.memoizedState=null)}var kt=R1(q);if(kt!==null){kt.flags&=-257,O1(kt,q,ne,k,h),kt.mode&1&&w1(k,Re,h),h=kt,se=Re;var Gt=h.updateQueue;if(Gt===null){var jt=new Set;jt.add(se),h.updateQueue=jt}else Gt.add(se);break e}else{if(!(h&1)){w1(k,Re,h),Dg();break e}se=Error(t(426))}}else if(Sr&&ne.mode&1){var Br=R1(q);if(Br!==null){!(Br.flags&65536)&&(Br.flags|=256),O1(Br,q,ne,k,h),$0(Fc(se,ne));break e}}k=se=Fc(se,ne),ni!==4&&(ni=2),vh===null?vh=[k]:vh.push(k),k=q;do{switch(k.tag){case 3:k.flags|=65536,h&=-h,k.lanes|=h;var _e=I1(k,se,h);e1(k,_e);break e;case 1:ne=se;var ce=k.type,Te=k.stateNode;if(!(k.flags&128)&&(typeof ce.getDerivedStateFromError=="function"||Te!==null&&typeof Te.componentDidCatch=="function"&&(_l===null||!_l.has(Te)))){k.flags|=65536,h&=-h,k.lanes|=h;var _t=A1(k,ne,h);e1(k,_t);break e}}k=k.return}while(k!==null)}lT(g)}catch(Kt){h=Kt,Qr===g&&g!==null&&(Qr=g=g.return);continue}break}while(!0)}function sT(){var c=wv.current;return wv.current=Sv,c===null?Sv:c}function Dg(){(ni===0||ni===3||ni===2)&&(ni=4),oi===null||!(mu&268435455)&&!(Rv&268435455)||bl(oi,Ci)}function Pv(c,h){var g=Wn;Wn|=2;var S=sT();(oi!==c||Ci!==h)&&(bo=null,gu(c,h));do try{OD();break}catch(R){aT(c,R)}while(!0);if(K0(),Wn=g,wv.current=S,Qr!==null)throw Error(t(261));return oi=null,Ci=0,ni}function OD(){for(;Qr!==null;)oT(Qr)}function LD(){for(;Qr!==null&&!sn();)oT(Qr)}function oT(c){var h=dT(c.alternate,c,Ta);c.memoizedProps=c.pendingProps,h===null?lT(c):Qr=h,Mg.current=null}function lT(c){var h=c;do{var g=h.alternate;if(c=h.return,h.flags&32768){if(g=MD(g,h),g!==null){g.flags&=32767,Qr=g;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{ni=6,Qr=null;return}}else if(g=TD(g,h,Ta),g!==null){Qr=g;return}if(h=h.sibling,h!==null){Qr=h;return}Qr=h=c}while(h!==null);ni===0&&(ni=5)}function _u(c,h,g){var S=zn,R=Xa.transition;try{Xa.transition=null,zn=1,UD(c,h,g,S)}finally{Xa.transition=R,zn=S}return null}function UD(c,h,g,S){do zc();while(El!==null);if(Wn&6)throw Error(t(327));g=c.finishedWork;var R=c.finishedLanes;if(g===null)return null;if(c.finishedWork=null,c.finishedLanes=0,g===c.current)throw Error(t(177));c.callbackNode=null,c.callbackPriority=0;var k=g.lanes|g.childLanes;if(nl(c,k),c===oi&&(Qr=oi=null,Ci=0),!(g.subtreeFlags&2064)&&!(g.flags&2064)||Lv||(Lv=!0,hT(bt,function(){return zc(),null})),k=(g.flags&15990)!==0,g.subtreeFlags&15990||k){k=Xa.transition,Xa.transition=null;var q=zn;zn=1;var ne=Wn;Wn|=4,Mg.current=null,ID(c,g),Z1(g,c),JU(D0),ll=!!U0,D0=U0=null,c.current=g,AD(g),bn(),Wn=ne,zn=q,Xa.transition=k}else c.current=g;if(Lv&&(Lv=!1,El=c,Uv=R),k=c.pendingLanes,k===0&&(_l=null),yi(g.stateNode),da(c,qt()),h!==null)for(S=c.onRecoverableError,g=0;g<h.length;g++)R=h[g],S(R.value,{componentStack:R.stack,digest:R.digest});if(Ov)throw Ov=!1,c=Ag,Ag=null,c;return Uv&1&&c.tag!==0&&zc(),k=c.pendingLanes,k&1?c===wg?mh++:(mh=0,wg=c):mh=0,vl(),null}function zc(){if(El!==null){var c=ru(Uv),h=Xa.transition,g=zn;try{if(Xa.transition=null,zn=16>c?16:c,El===null)var S=!1;else{if(c=El,El=null,Uv=0,Wn&6)throw Error(t(331));var R=Wn;for(Wn|=4,Ft=c.current;Ft!==null;){var k=Ft,q=k.child;if(Ft.flags&16){var ne=k.deletions;if(ne!==null){for(var se=0;se<ne.length;se++){var Re=ne[se];for(Ft=Re;Ft!==null;){var rt=Ft;switch(rt.tag){case 0:case 11:case 15:hh(8,rt,k)}var at=rt.child;if(at!==null)at.return=rt,Ft=at;else for(;Ft!==null;){rt=Ft;var nt=rt.sibling,kt=rt.return;if(K1(rt),rt===Re){Ft=null;break}if(nt!==null){nt.return=kt,Ft=nt;break}Ft=kt}}}var Gt=k.alternate;if(Gt!==null){var jt=Gt.child;if(jt!==null){Gt.child=null;do{var Br=jt.sibling;jt.sibling=null,jt=Br}while(jt!==null)}}Ft=k}}if(k.subtreeFlags&2064&&q!==null)q.return=k,Ft=q;else e:for(;Ft!==null;){if(k=Ft,k.flags&2048)switch(k.tag){case 0:case 11:case 15:hh(9,k,k.return)}var _e=k.sibling;if(_e!==null){_e.return=k.return,Ft=_e;break e}Ft=k.return}}var ce=c.current;for(Ft=ce;Ft!==null;){q=Ft;var Te=q.child;if(q.subtreeFlags&2064&&Te!==null)Te.return=q,Ft=Te;else e:for(q=ce;Ft!==null;){if(ne=Ft,ne.flags&2048)try{switch(ne.tag){case 0:case 11:case 15:Av(9,ne)}}catch(Kt){kr(ne,ne.return,Kt)}if(ne===q){Ft=null;break e}var _t=ne.sibling;if(_t!==null){_t.return=ne.return,Ft=_t;break e}Ft=ne.return}}if(Wn=R,vl(),Cr&&typeof Cr.onPostCommitFiberRoot=="function")try{Cr.onPostCommitFiberRoot(pn,c)}catch{}S=!0}return S}finally{zn=g,Xa.transition=h}}return!1}function uT(c,h,g){h=Fc(g,h),h=I1(c,h,1),c=pl(c,h,1),h=Wi(),c!==null&&(Va(c,1,h),da(c,h))}function kr(c,h,g){if(c.tag===3)uT(c,c,g);else for(;h!==null;){if(h.tag===3){uT(h,c,g);break}else if(h.tag===1){var S=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(_l===null||!_l.has(S))){c=Fc(g,c),c=A1(h,c,1),h=pl(h,c,1),c=Wi(),h!==null&&(Va(h,1,c),da(h,c));break}}h=h.return}}function DD(c,h,g){var S=c.pingCache;S!==null&&S.delete(h),h=Wi(),c.pingedLanes|=c.suspendedLanes&g,oi===c&&(Ci&g)===g&&(ni===4||ni===3&&(Ci&130023424)===Ci&&500>qt()-Ig?gu(c,0):Ng|=g),da(c,h)}function cT(c,h){h===0&&(c.mode&1?(h=Jo,Jo<<=1,!(Jo&130023424)&&(Jo=4194304)):h=1);var g=Wi();c=_o(c,h),c!==null&&(Va(c,h,g),da(c,g))}function kD(c){var h=c.memoizedState,g=0;h!==null&&(g=h.retryLane),cT(c,g)}function PD(c,h){var g=0;switch(c.tag){case 13:var S=c.stateNode,R=c.memoizedState;R!==null&&(g=R.retryLane);break;case 19:S=c.stateNode;break;default:throw Error(t(314))}S!==null&&S.delete(h),cT(c,g)}var dT;dT=function(c,h,g){if(c!==null)if(c.memoizedProps!==h.pendingProps||oa.current)ua=!0;else{if(!(c.lanes&g)&&!(h.flags&128))return ua=!1,SD(c,h,g);ua=!!(c.flags&131072)}else ua=!1,Sr&&h.flags&1048576&&VS(h,dv,h.index);switch(h.lanes=0,h.tag){case 2:var S=h.type;Nv(c,h),c=h.pendingProps;var R=Rc(h,Pi.current);Pc(h,g),R=ig(null,h,S,c,R,g);var k=ag();return h.flags|=1,typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,la(S)?(k=!0,lv(h)):k=!1,h.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,X0(h),R.updater=Tv,h.stateNode=R,R._reactInternals=h,dg(h,S,c,g),h=mg(null,h,S,!0,k,g)):(h.tag=0,Sr&&k&&G0(h),Ki(null,h,R,g),h=h.child),h;case 16:S=h.elementType;e:{switch(Nv(c,h),c=h.pendingProps,R=S._init,S=R(S._payload),h.type=S,R=h.tag=FD(S),c=gs(S,c),R){case 0:h=vg(null,h,S,c,g);break e;case 1:h=x1(null,h,S,c,g);break e;case 11:h=L1(null,h,S,c,g);break e;case 14:h=U1(null,h,S,gs(S.type,c),g);break e}throw Error(t(306,S,""))}return h;case 0:return S=h.type,R=h.pendingProps,R=h.elementType===S?R:gs(S,R),vg(c,h,S,R,g);case 1:return S=h.type,R=h.pendingProps,R=h.elementType===S?R:gs(S,R),x1(c,h,S,R,g);case 3:e:{if(F1(h),c===null)throw Error(t(387));S=h.pendingProps,k=h.memoizedState,R=k.element,JS(c,h),gv(h,S,null,g);var q=h.memoizedState;if(S=q.element,k.isDehydrated)if(k={element:S,isDehydrated:!1,cache:q.cache,pendingSuspenseBoundaries:q.pendingSuspenseBoundaries,transitions:q.transitions},h.updateQueue.baseState=k,h.memoizedState=k,h.flags&256){R=Fc(Error(t(423)),h),h=B1(c,h,S,g,R);break e}else if(S!==R){R=Fc(Error(t(424)),h),h=B1(c,h,S,g,R);break e}else for(Sa=dl(h.stateNode.containerInfo.firstChild),Ca=h,Sr=!0,ps=null,g=XS(h,null,S,g),h.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Uc(),S===R){h=yo(c,h,g);break e}Ki(c,h,S,g)}h=h.child}return h;case 5:return n1(h),c===null&&V0(h),S=h.type,R=h.pendingProps,k=c!==null?c.memoizedProps:null,q=R.children,k0(S,R)?q=null:k!==null&&k0(S,k)&&(h.flags|=32),P1(c,h),Ki(c,h,q,g),h.child;case 6:return c===null&&V0(h),null;case 13:return H1(c,h,g);case 4:return Z0(h,h.stateNode.containerInfo),S=h.pendingProps,c===null?h.child=Dc(h,null,S,g):Ki(c,h,S,g),h.child;case 11:return S=h.type,R=h.pendingProps,R=h.elementType===S?R:gs(S,R),L1(c,h,S,R,g);case 7:return Ki(c,h,h.pendingProps,g),h.child;case 8:return Ki(c,h,h.pendingProps.children,g),h.child;case 12:return Ki(c,h,h.pendingProps.children,g),h.child;case 10:e:{if(S=h.type._context,R=h.pendingProps,k=h.memoizedProps,q=R.value,vr(vv,S._currentValue),S._currentValue=q,k!==null)if(ms(k.value,q)){if(k.children===R.children&&!oa.current){h=yo(c,h,g);break e}}else for(k=h.child,k!==null&&(k.return=h);k!==null;){var ne=k.dependencies;if(ne!==null){q=k.child;for(var se=ne.firstContext;se!==null;){if(se.context===S){if(k.tag===1){se=Eo(-1,g&-g),se.tag=2;var Re=k.updateQueue;if(Re!==null){Re=Re.shared;var rt=Re.pending;rt===null?se.next=se:(se.next=rt.next,rt.next=se),Re.pending=se}}k.lanes|=g,se=k.alternate,se!==null&&(se.lanes|=g),Q0(k.return,g,h),ne.lanes|=g;break}se=se.next}}else if(k.tag===10)q=k.type===h.type?null:k.child;else if(k.tag===18){if(q=k.return,q===null)throw Error(t(341));q.lanes|=g,ne=q.alternate,ne!==null&&(ne.lanes|=g),Q0(q,g,h),q=k.sibling}else q=k.child;if(q!==null)q.return=k;else for(q=k;q!==null;){if(q===h){q=null;break}if(k=q.sibling,k!==null){k.return=q.return,q=k;break}q=q.return}k=q}Ki(c,h,R.children,g),h=h.child}return h;case 9:return R=h.type,S=h.pendingProps.children,Pc(h,g),R=Qa(R),S=S(R),h.flags|=1,Ki(c,h,S,g),h.child;case 14:return S=h.type,R=gs(S,h.pendingProps),R=gs(S.type,R),U1(c,h,S,R,g);case 15:return D1(c,h,h.type,h.pendingProps,g);case 17:return S=h.type,R=h.pendingProps,R=h.elementType===S?R:gs(S,R),Nv(c,h),h.tag=1,la(S)?(c=!0,lv(h)):c=!1,Pc(h,g),M1(h,S,R),dg(h,S,R,g),mg(null,h,S,!0,c,g);case 19:return z1(c,h,g);case 22:return k1(c,h,g)}throw Error(t(156,h.tag))};function hT(c,h){return je(c,h)}function xD(c,h,g,S){this.tag=c,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Za(c,h,g,S){return new xD(c,h,g,S)}function kg(c){return c=c.prototype,!(!c||!c.isReactComponent)}function FD(c){if(typeof c=="function")return kg(c)?1:0;if(c!=null){if(c=c.$$typeof,c===H)return 11;if(c===x)return 14}return 2}function Cl(c,h){var g=c.alternate;return g===null?(g=Za(c.tag,h,c.key,c.mode),g.elementType=c.elementType,g.type=c.type,g.stateNode=c.stateNode,g.alternate=c,c.alternate=g):(g.pendingProps=h,g.type=c.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=c.flags&14680064,g.childLanes=c.childLanes,g.lanes=c.lanes,g.child=c.child,g.memoizedProps=c.memoizedProps,g.memoizedState=c.memoizedState,g.updateQueue=c.updateQueue,h=c.dependencies,g.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},g.sibling=c.sibling,g.index=c.index,g.ref=c.ref,g}function xv(c,h,g,S,R,k){var q=2;if(S=c,typeof c=="function")kg(c)&&(q=1);else if(typeof c=="string")q=5;else e:switch(c){case L:return Eu(g.children,R,k,h);case P:q=8,R|=8;break;case U:return c=Za(12,g,h,R|2),c.elementType=U,c.lanes=k,c;case G:return c=Za(13,g,h,R),c.elementType=G,c.lanes=k,c;case j:return c=Za(19,g,h,R),c.elementType=j,c.lanes=k,c;case K:return Fv(g,R,k,h);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case B:q=10;break e;case F:q=9;break e;case H:q=11;break e;case x:q=14;break e;case V:q=16,S=null;break e}throw Error(t(130,c==null?c:typeof c,""))}return h=Za(q,g,h,R),h.elementType=c,h.type=S,h.lanes=k,h}function Eu(c,h,g,S){return c=Za(7,c,S,h),c.lanes=g,c}function Fv(c,h,g,S){return c=Za(22,c,S,h),c.elementType=K,c.lanes=g,c.stateNode={isHidden:!1},c}function Pg(c,h,g){return c=Za(6,c,null,h),c.lanes=g,c}function xg(c,h,g){return h=Za(4,c.children!==null?c.children:[],c.key,h),h.lanes=g,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}function BD(c,h,g,S,R){this.tag=h,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tl(0),this.expirationTimes=tl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tl(0),this.identifierPrefix=S,this.onRecoverableError=R,this.mutableSourceEagerHydrationData=null}function Fg(c,h,g,S,R,k,q,ne,se){return c=new BD(c,h,g,ne,se),h===1?(h=1,k===!0&&(h|=8)):h=0,k=Za(3,null,null,h),c.current=k,k.stateNode=c,k.memoizedState={element:S,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},X0(k),c}function HD(c,h,g){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:S==null?null:""+S,children:c,containerInfo:h,implementation:g}}function fT(c){if(!c)return fl;c=c._reactInternals;e:{if($t(c)!==c||c.tag!==1)throw Error(t(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(la(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(t(171))}if(c.tag===1){var g=c.type;if(la(g))return GS(c,g,h)}return h}function vT(c,h,g,S,R,k,q,ne,se){return c=Fg(g,S,!0,c,R,k,q,ne,se),c.context=fT(null),g=c.current,S=Wi(),R=yl(g),k=Eo(S,R),k.callback=h??null,pl(g,k,R),c.current.lanes=R,Va(c,R,S),da(c,S),c}function Bv(c,h,g,S){var R=h.current,k=Wi(),q=yl(R);return g=fT(g),h.context===null?h.context=g:h.pendingContext=g,h=Eo(k,q),h.payload={element:c},S=S===void 0?null:S,S!==null&&(h.callback=S),c=pl(R,h,q),c!==null&&(ys(c,R,q,k),pv(c,R,q)),q}function Hv(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function mT(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var g=c.retryLane;c.retryLane=g!==0&&g<h?g:h}}function Bg(c,h){mT(c,h),(c=c.alternate)&&mT(c,h)}function GD(){return null}var pT=typeof reportError=="function"?reportError:function(c){console.error(c)};function Hg(c){this._internalRoot=c}Gv.prototype.render=Hg.prototype.render=function(c){var h=this._internalRoot;if(h===null)throw Error(t(409));Bv(c,h,null,null)},Gv.prototype.unmount=Hg.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var h=c.containerInfo;pu(function(){Bv(null,c,null,null)}),h[vo]=null}};function Gv(c){this._internalRoot=c}Gv.prototype.unstable_scheduleHydration=function(c){if(c){var h=hs();c={blockedOn:null,target:c,priority:h};for(var g=0;g<ba.length&&h!==0&&h<ba[g].priority;g++);ba.splice(g,0,c),g===0&&zd(c)}};function Gg(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function zv(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function gT(){}function zD(c,h,g,S,R){if(R){if(typeof S=="function"){var k=S;S=function(){var Re=Hv(q);k.call(Re)}}var q=vT(h,S,c,0,null,!1,!1,"",gT);return c._reactRootContainer=q,c[vo]=q.current,Jd(c.nodeType===8?c.parentNode:c),pu(),q}for(;R=c.lastChild;)c.removeChild(R);if(typeof S=="function"){var ne=S;S=function(){var Re=Hv(se);ne.call(Re)}}var se=Fg(c,0,!1,null,null,!1,!1,"",gT);return c._reactRootContainer=se,c[vo]=se.current,Jd(c.nodeType===8?c.parentNode:c),pu(function(){Bv(h,se,g,S)}),se}function jv(c,h,g,S,R){var k=g._reactRootContainer;if(k){var q=k;if(typeof R=="function"){var ne=R;R=function(){var se=Hv(q);ne.call(se)}}Bv(h,q,c,R)}else q=zD(g,h,c,R,S);return Hv(q)}rl=function(c){switch(c.tag){case 3:var h=c.stateNode;if(h.current.memoizedState.isDehydrated){var g=lo(h.pendingLanes);g!==0&&(ks(h,g|1),da(h,qt()),!(Wn&6)&&(Gc=qt()+500,vl()))}break;case 13:pu(function(){var S=_o(c,1);if(S!==null){var R=Wi();ys(S,c,1,R)}}),Bg(c,1)}},uo=function(c){if(c.tag===13){var h=_o(c,134217728);if(h!==null){var g=Wi();ys(h,c,134217728,g)}Bg(c,134217728)}},il=function(c){if(c.tag===13){var h=yl(c),g=_o(c,h);if(g!==null){var S=Wi();ys(g,c,h,S)}Bg(c,h)}},hs=function(){return zn},iu=function(c,h){var g=zn;try{return zn=c,h()}finally{zn=g}},ht=function(c,h,g){switch(h){case"input":if(De(c,g),h=g.name,g.type==="radio"&&h!=null){for(g=c;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<g.length;h++){var S=g[h];if(S!==c&&S.form===c.form){var R=sv(S);if(!R)throw Error(t(90));pe(S),De(S,R)}}}break;case"textarea":st(c,g);break;case"select":h=g.value,h!=null&&He(c,!!g.multiple,h,!1)}},Et=Lg,Pt=pu;var jD={usingClientEntryPoint:!1,Events:[nh,Ac,sv,ge,Xe,Lg]},ph={findFiberByHostInstance:lu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VD={bundleType:ph.bundleType,version:ph.version,rendererPackageName:ph.rendererPackageName,rendererConfig:ph.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=tt(c),c===null?null:c.stateNode},findFiberByHostInstance:ph.findFiberByHostInstance||GD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vv.isDisabled&&Vv.supportsFiber)try{pn=Vv.inject(VD),Cr=Vv}catch{}}return ha.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jD,ha.createPortal=function(c,h){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gg(h))throw Error(t(200));return HD(c,h,null,g)},ha.createRoot=function(c,h){if(!Gg(c))throw Error(t(299));var g=!1,S="",R=pT;return h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(S=h.identifierPrefix),h.onRecoverableError!==void 0&&(R=h.onRecoverableError)),h=Fg(c,1,!1,null,null,g,!1,S,R),c[vo]=h.current,Jd(c.nodeType===8?c.parentNode:c),new Hg(h)},ha.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(t(188)):(c=Object.keys(c).join(","),Error(t(268,c)));return c=tt(h),c=c===null?null:c.stateNode,c},ha.flushSync=function(c){return pu(c)},ha.hydrate=function(c,h,g){if(!zv(h))throw Error(t(200));return jv(null,c,h,!0,g)},ha.hydrateRoot=function(c,h,g){if(!Gg(c))throw Error(t(405));var S=g!=null&&g.hydratedSources||null,R=!1,k="",q=pT;if(g!=null&&(g.unstable_strictMode===!0&&(R=!0),g.identifierPrefix!==void 0&&(k=g.identifierPrefix),g.onRecoverableError!==void 0&&(q=g.onRecoverableError)),h=vT(h,null,c,1,g??null,R,!1,k,q),c[vo]=h.current,Jd(c),S)for(c=0;c<S.length;c++)g=S[c],R=g._getVersion,R=R(g._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[g,R]:h.mutableSourceEagerHydrationData.push(g,R);return new Gv(h)},ha.render=function(c,h,g){if(!zv(h))throw Error(t(200));return jv(null,c,h,!1,g)},ha.unmountComponentAtNode=function(c){if(!zv(c))throw Error(t(40));return c._reactRootContainer?(pu(function(){jv(null,null,c,!1,function(){c._reactRootContainer=null,c[vo]=null})}),!0):!1},ha.unstable_batchedUpdates=Lg,ha.unstable_renderSubtreeIntoContainer=function(c,h,g,S){if(!zv(g))throw Error(t(200));if(c==null||c._reactInternals===void 0)throw Error(t(38));return jv(c,h,g,!1,S)},ha.version="18.3.1-next-f1338f8080-20240426",ha}var MT;function Vw(){if(MT)return Vg.exports;MT=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Vg.exports=ZD(),Vg.exports}var NT;function JD(){if(NT)return $v;NT=1;var e=Vw();return $v.createRoot=e.createRoot,$v.hydrateRoot=e.hydrateRoot,$v}var ek=JD(),J_=function(e,n){return J_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},J_(e,n)};function $w(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");J_(e,n);function t(){this.constructor=e}e.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}var D=function(){return D=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},D.apply(this,arguments)};function Rp(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]]);return t}function tn(e,n,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(d){try{u(r.next(d))}catch(f){s(f)}}function l(d){try{u(r.throw(d))}catch(f){s(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,l)}u((r=r.apply(e,n||[])).next())})}function nn(e,n){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=o(0),s.throw=o(1),s.return=o(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(u){return function(d){return l([u,d])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){t.label=u[1];break}if(u[0]===6&&t.label<a[1]){t.label=a[1],a=u;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(u);break}a[2]&&t.ops.pop(),t.trys.pop();continue}u=n.call(e,t)}catch(d){u=[6,d],i=0}finally{r=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Ne(e,n,t){if(t||arguments.length===2)for(var r=0,i=n.length,a;r<i;r++)(a||!(r in n))&&(a||(a=Array.prototype.slice.call(n,0,r)),a[r]=n[r]);return e.concat(a||Array.prototype.slice.call(n))}const _h={reactions:"reactions",message_search_v3:"message_search_v3",enable_og_tag:"enable_og_tag",enable_message_threading:"enable_message_threading",allow_broadcast_channel:"allow_broadcast_channel",allow_super_group_channel:"allow_super_group_channel"},tk={reactions:"reactions",moderation_group:"moderation_group",message_search_v3:"message_search_v3",data_export:"data_export",migration:"migration",delivery_receipt:"delivery_receipt",auto_thumbnail:"auto_thumbnail",image_moderation:"image_moderation",super_group_channel:"super_group_channel",announcement:"announcement",moderation_open:"moderation_open",desk:"desk",bot_interface:"bot_interface",auto_trans:"auto_trans"},nk="modulepreload",rk=function(e){return"/"+e},IT={},Kh=function(n,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(t.map(l=>{if(l=rk(l),l in IT)return;IT[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":nk,u||(f.as="script"),f.crossOrigin="",f.href=l,o&&f.setAttribute("nonce",o),document.head.appendChild(f),u)return new Promise((m,p)=>{f.addEventListener("load",m),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return n().catch(a)})};var eE=function(e,n){return eE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},eE(e,n)};function z(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=e}eE(e,n),e.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}var Y=function(){return Y=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Y.apply(this,arguments)};function ik(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]])}return t}function A(e,n,t,r){return new(t||(t=Promise))(function(i,a){function s(u){try{l(r.next(u))}catch(d){a(d)}}function o(u){try{l(r.throw(u))}catch(d){a(d)}}function l(u){var d;u.done?i(u.value):(d=u.value,d instanceof t?d:new t(function(f){f(d)})).then(s,o)}l((r=r.apply(e,[])).next())})}function I(e,n){var t,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=o(0),s.throw=o(1),s.return=o(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(l){return function(u){return function(d){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,d[0]&&(a=0)),a;)try{if(t=1,r&&(i=2&d[0]?r.return:d[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,d[1])).done)return i;switch(r=0,i&&(d=[2&d[0],i.value]),d[0]){case 0:case 1:i=d;break;case 4:return a.label++,{value:d[1],done:!1};case 5:a.label++,r=d[1],d=[0];continue;case 7:d=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||d[0]!==6&&d[0]!==2)){a=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){a.label=d[1];break}if(d[0]===6&&a.label<i[1]){a.label=i[1],i=d;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(d);break}i[2]&&a.ops.pop(),a.trys.pop();continue}d=n.call(e,a)}catch(f){d=[6,f],r=0}finally{t=i=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([l,u])}}}function Ge(e){var n=typeof Symbol=="function"&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function ut(e,n){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var r,i,a=t.call(e),s=[];try{for(;(n===void 0||n-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(o){i={error:o}}finally{try{r&&!r.done&&(t=a.return)&&t.call(a)}finally{if(i)throw i.error}}return s}function Nt(e,n,t){if(arguments.length===2)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))}var lt,qw="4.17.2",Bl=function(){function e(){}return Object.defineProperty(e,"OS_VERSION",{get:function(){return typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.replace(/,/g,"."):"noAgent"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SDK_VERSION",{get:function(){return qw},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SDK_MAJOR_VERSION",{get:function(){return e.SDK_VERSION.split(".")[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL",{get:function(){return 100},enumerable:!1,configurable:!0}),Object.defineProperty(e,"INTERNAL_CALL",{get:function(){return"ic"},enumerable:!1,configurable:!0}),e}();(function(e){e[e.NON_AUTHORIZED=400108]="NON_AUTHORIZED",e[e.INVALID_TOKEN=400111]="INVALID_TOKEN",e[e.NOT_FOUND_IN_DATABASE=400201]="NOT_FOUND_IN_DATABASE",e[e.USER_AUTH_DEACTIVATED=400300]="USER_AUTH_DEACTIVATED",e[e.USER_AUTH_DELETED_OR_NOT_FOUND=400301]="USER_AUTH_DELETED_OR_NOT_FOUND",e[e.SESSION_TOKEN_EXPIRED=400302]="SESSION_TOKEN_EXPIRED",e[e.APPLICATION_NOT_FOUND=400304]="APPLICATION_NOT_FOUND",e[e.SESSION_KEY_EXPIRED=400309]="SESSION_KEY_EXPIRED",e[e.SESSION_REVOKED=400310]="SESSION_REVOKED",e[e.INVALID_SESSION_TYPE=400312]="INVALID_SESSION_TYPE",e[e.INVALID_AUTH_FOR_SERVICE=400313]="INVALID_AUTH_FOR_SERVICE",e[e.STAT_UPLOAD_NOT_ALLOWED=403200]="STAT_UPLOAD_NOT_ALLOWED",e[e.NOT_SUPPORTED_PINNED_MESSAGE_IN_REVIEW_MESSAGE=400940]="NOT_SUPPORTED_PINNED_MESSAGE_IN_REVIEW_MESSAGE",e[e.INTERNAL_SERVER_ERROR=500901]="INTERNAL_SERVER_ERROR",e[e.RATE_LIMIT_EXCEEDED=500910]="RATE_LIMIT_EXCEEDED",e[e.INVALID_REQUIRED_FORM_VALUE=400105]="INVALID_REQUIRED_FORM_VALUE",e[e.UNKNOWN_SERVER_ERROR=900200]="UNKNOWN_SERVER_ERROR",e[e.NOT_SUPPORTED_FEATURE_IN_IN_REVIEW_MESSAGE=901500]="NOT_SUPPORTED_FEATURE_IN_IN_REVIEW_MESSAGE",e[e.ERR_DUPLICATED_DATA=400202]="ERR_DUPLICATED_DATA",e[e.DEBUG_MODE_REQUIRED=7e5]="DEBUG_MODE_REQUIRED",e[e.LOST_INSTANCE=700100]="LOST_INSTANCE",e[e.CONNECTION_RENEW=700102]="CONNECTION_RENEW",e[e.INVALID_CONNECTION_STATE_TRANSITION=700200]="INVALID_CONNECTION_STATE_TRANSITION",e[e.INVALID_COMMAND=700700]="INVALID_COMMAND",e[e.XMLHTTPREQUEST_NOT_SUPPORTED=700800]="XMLHTTPREQUEST_NOT_SUPPORTED",e[e.UNKNOWN_ERROR=77e4]="UNKNOWN_ERROR",e[e.INVALID_INITIALIZATION=800100]="INVALID_INITIALIZATION",e[e.CONNECTION_REQUIRED=800101]="CONNECTION_REQUIRED",e[e.CONNECTION_CANCELED=800102]="CONNECTION_CANCELED",e[e.INVALID_PARAMETER=800110]="INVALID_PARAMETER",e[e.NOT_SUPPORTED_ERROR=800111]="NOT_SUPPORTED_ERROR",e[e.NETWORK_ERROR=800120]="NETWORK_ERROR",e[e.NETWORK_ROUTING_ERROR=800121]="NETWORK_ROUTING_ERROR",e[e.MALFORMED_DATA=800130]="MALFORMED_DATA",e[e.MALFORMED_ERROR_DATA=800140]="MALFORMED_ERROR_DATA",e[e.WRONG_CHANNEL_TYPE=800150]="WRONG_CHANNEL_TYPE",e[e.MARK_AS_READ_RATE_LIMIT_EXCEEDED=800160]="MARK_AS_READ_RATE_LIMIT_EXCEEDED",e[e.QUERY_IN_PROGRESS=800170]="QUERY_IN_PROGRESS",e[e.ACK_TIMEOUT=800180]="ACK_TIMEOUT",e[e.LOGIN_TIMEOUT=800190]="LOGIN_TIMEOUT",e[e.WEBSOCKET_CONNECTION_CLOSED=800200]="WEBSOCKET_CONNECTION_CLOSED",e[e.WEBSOCKET_CONNECTION_FAILED=800210]="WEBSOCKET_CONNECTION_FAILED",e[e.REQUEST_FAILED=800220]="REQUEST_FAILED",e[e.FILE_UPLOAD_CANCEL_FAILED=800230]="FILE_UPLOAD_CANCEL_FAILED",e[e.REQUEST_CANCELED=800240]="REQUEST_CANCELED",e[e.REQUEST_DUPLICATED=800250]="REQUEST_DUPLICATED",e[e.FILE_SIZE_LIMIT_EXCEEDED=800260]="FILE_SIZE_LIMIT_EXCEEDED",e[e.ERR_UPLOAD_STAT_RETRY_COUNT_EXCEEDED=800270]="ERR_UPLOAD_STAT_RETRY_COUNT_EXCEEDED",e[e.SESSION_TOKEN_REQUEST_FAILED=800500]="SESSION_TOKEN_REQUEST_FAILED",e[e.SESSION_TOKEN_REFRESHED=800501]="SESSION_TOKEN_REFRESHED",e[e.SESSION_TOKEN_REFRESH_FAILED=800502]="SESSION_TOKEN_REFRESH_FAILED",e[e.COLLECTION_DISPOSED=800600]="COLLECTION_DISPOSED",e[e.DATABASE_ERROR=800700]="DATABASE_ERROR",e[e.USER_DEACTIVATED=900021]="USER_DEACTIVATED",e[e.CHANNEL_IS_FROZEN=900050]="CHANNEL_IS_FROZEN",e[e.RECEIVER_USER_DEACTIVATED=900081]="RECEIVER_USER_DEACTIVATED"})(lt||(lt={}));var Hi,xu,jr,jm,tE,Wh,Ai=function(e){return!(e instanceof ee&&!e.shouldThrowOutside)},ee=function(e){function n(t){var r=t.code,i=r===void 0?0:r,a=t.message,s=a===void 0?"":a,o=e.call(this,s)||this;return o.shouldThrowOutside=!1,o._detail="",o.name="SendbirdError",o.code=i,Object.setPrototypeOf(o,n.prototype),o}return z(n,e),Object.defineProperty(n.prototype,"detail",{get:function(){return this._detail},enumerable:!1,configurable:!0}),n.prototype.setDetail=function(t){this._detail=t},Object.defineProperty(n.prototype,"isInvalidTokenError",{get:function(){return this.code===lt.INVALID_TOKEN},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionExpiredError",{get:function(){return this.isSessionTokenExpiredError||this.isSessionKeyExpiredError},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionTokenExpiredError",{get:function(){return this.code===lt.SESSION_TOKEN_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionKeyExpiredError",{get:function(){return this.code===lt.SESSION_KEY_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionInvalidatedError",{get:function(){return this.isSessionRevokedError||this.isUserAuthDeactivedError||this.isUserAuthDeletedOrNotFoundError},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionRevokedError",{get:function(){return this.code===lt.SESSION_REVOKED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isUserAuthDeactivedError",{get:function(){return this.code===lt.USER_AUTH_DEACTIVATED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isUserAuthDeletedOrNotFoundError",{get:function(){return this.code===lt.USER_AUTH_DELETED_OR_NOT_FOUND},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isNetworkError",{get:function(){return this.code===lt.NETWORK_ERROR||this.code===lt.NETWORK_ROUTING_ERROR},enumerable:!1,configurable:!0}),Object.defineProperty(n,"debugModeRequired",{get:function(){return new n({code:lt.DEBUG_MODE_REQUIRED,message:"Cannot run this operation in production mode."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"lostInstance",{get:function(){return new n({code:lt.LOST_INSTANCE,message:"Instance ID is missing. It should belong to an instance."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"invalidCommand",{get:function(){return new n({code:lt.INVALID_COMMAND,message:"Cannot send invalid command."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"unknown",{get:function(){return new n({code:lt.UNKNOWN_ERROR,message:"Unknown error occurred."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"connectionRenew",{get:function(){return new n({code:lt.CONNECTION_RENEW,message:"Connection restarts."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"invalidConnectionStateTransition",{get:function(){return new n({code:lt.INVALID_CONNECTION_STATE_TRANSITION,message:"Invalid connection state transition."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"xmlHttpRequestNotSupported",{get:function(){return new n({code:lt.XMLHTTPREQUEST_NOT_SUPPORTED,message:"Cannot upload file. XMLHttpRequest is not defined in this environment."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"connectionRequired",{get:function(){return new n({code:lt.CONNECTION_REQUIRED,message:"Connection is required."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"connectionCanceled",{get:function(){return new n({code:lt.CONNECTION_CANCELED,message:"Connection is canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"invalidParameters",{get:function(){return new n({code:lt.INVALID_PARAMETER,message:"Invalid parameters."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"notSupportedError",{get:function(){return new n({code:lt.NOT_SUPPORTED_ERROR,message:"Given parameters are not supported."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"channelTypeNotSupportedError",{get:function(){return new n({code:lt.NOT_SUPPORTED_ERROR,message:"Called method is not supported in the current channel's channel type."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"networkError",{get:function(){return new n({code:lt.NETWORK_ERROR,message:"There was a network error."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"markAsReadAllRateLimitExceeded",{get:function(){return new n({code:lt.MARK_AS_READ_RATE_LIMIT_EXCEEDED,message:"markAsRead rate limit exceeded."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"queryInProgress",{get:function(){return new n({code:lt.QUERY_IN_PROGRESS,message:"Query in progress."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"noAckTimeout",{get:function(){return new n({code:lt.ACK_TIMEOUT,message:"Command received no ack."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"loginTimeout",{get:function(){return new n({code:lt.LOGIN_TIMEOUT,message:"Connection timeout."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"connectionClosed",{get:function(){return new n({code:lt.WEBSOCKET_CONNECTION_CLOSED,message:"Connection is closed. Please reconnect."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"requestFailed",{get:function(){return new n({code:lt.REQUEST_FAILED,message:"Request failed."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"tooManyRequests",{get:function(){return new n({code:lt.REQUEST_DUPLICATED,message:"Too many requests."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"alreadyConnectedAsAnotherUser",{get:function(){return new n({code:lt.REQUEST_FAILED,message:"Already logged in as a different user. Call disconnect() first."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"fileUploadCanceled",{get:function(){return new n({code:lt.FILE_UPLOAD_CANCEL_FAILED,message:"File upload has been canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"requestCanceled",{get:function(){return new n({code:lt.REQUEST_CANCELED,message:"Request has been canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"sessionTokenRefreshFailed",{get:function(){return new n({code:lt.SESSION_TOKEN_REFRESH_FAILED,message:"Failed to refresh the session key."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"sessionTokenRequestFailed",{get:function(){return new n({code:lt.SESSION_TOKEN_REQUEST_FAILED,message:"Failed to get the session token."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"databaseError",{get:function(){return new n({code:lt.DATABASE_ERROR,message:"Database error."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"fileSizeLimitExceededError",{get:function(){return new n({code:lt.FILE_SIZE_LIMIT_EXCEEDED,message:"File size exceeds the file size limit."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"statLogUploadLimitExceededError",{get:function(){return new n({code:lt.ERR_UPLOAD_STAT_RETRY_COUNT_EXCEEDED,message:"The upload request failed due to the retry count being exceeded."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"malformedDataError",{get:function(){return new n({code:lt.MALFORMED_DATA,message:"Malformed data."})},enumerable:!1,configurable:!0}),n.prototype.throwOutside=function(){throw this.shouldThrowOutside=!0,this},n}(Error),ak=[lt.CONNECTION_REQUIRED,lt.NETWORK_ERROR,lt.ACK_TIMEOUT,lt.WEBSOCKET_CONNECTION_CLOSED,lt.WEBSOCKET_CONNECTION_FAILED,lt.FILE_UPLOAD_CANCEL_FAILED,lt.REQUEST_CANCELED,lt.INTERNAL_SERVER_ERROR,lt.RATE_LIMIT_EXCEEDED,lt.UNKNOWN_SERVER_ERROR,lt.USER_DEACTIVATED,lt.CHANNEL_IS_FROZEN,lt.RECEIVER_USER_DEACTIVATED],sk=[lt.WEBSOCKET_CONNECTION_CLOSED,lt.WEBSOCKET_CONNECTION_FAILED,lt.CONNECTION_REQUIRED,lt.CHANNEL_IS_FROZEN],Kw=function(e,n){if(e!==n){var t=Y({},e),r=Y({},n);return(!t.hasOwnProperty("messageId")||!r.hasOwnProperty("messageId")||t.messageId===r.messageId)&&(!t.hasOwnProperty("reqId")||!r.hasOwnProperty("reqId")||t.reqId===r.reqId)&&(t.hasOwnProperty("messageId")&&delete t.messageId,t.hasOwnProperty("reqId")&&delete t.reqId,r.hasOwnProperty("messageId")&&delete r.messageId,r.hasOwnProperty("reqId")&&delete r.reqId,JSON.stringify(t)===JSON.stringify(r))}return!0},Z=function(e,n,t){return t===void 0&&(t=!1),!(!t||!Df(n))||(typeof e!="string"?typeof e=="object"?Wt(e,n):ok(e,n):typeof n===e)},Wt=function(e,n,t){return t===void 0&&(t=!1),!(!t||!Df(n))||Object.values(e).includes(n)},ok=function(e,n){return n instanceof e},Qt=function(e,n,t){return t===void 0&&(t=!1),!(!t||!Df(n))||Array.isArray(n)&&n.every(function(r){return Z(e,r)})},AT=function(e,n){return n===void 0&&(n=!1),!(!n||!Df(e))||typeof e=="number"&&e.toString().length===13},lk=function(e){return e>0&&ak.indexOf(e)>=0},Vm=function(e){return e>0&&sk.indexOf(e)>=0},Vr=function(e,n){if(n===void 0&&(n=!1),n&&Df(e))return!0;var t=typeof e=="object"&&e!==null&&e.hasOwnProperty("name")&&typeof e.name=="string"&&e.hasOwnProperty("uri")&&typeof e.uri=="string"&&e.hasOwnProperty("type")&&typeof e.type=="string";if(!t){if(typeof Blob<"u")return e instanceof Blob;if(typeof File<"u")return e instanceof File}return t},uk=function(e,n){if(e===n)return!0;if(e==null||n==null||e.length!==n.length)return!1;for(var t=Nt([],ut(e),!1).sort(),r=Nt([],ut(n),!1).sort(),i=0;i<t.length;++i)if(t[i]!==r[i])return!1;return!0},Df=function(e){return e==null},Ww=function(){function e(n){var t=n===void 0?{}:n,r=t.useMemberInfoInMessage,i=r===void 0||r,a=t.typingIndicatorInvalidateTime,s=a===void 0?1e4:a,o=t.typingIndicatorThrottle,l=o===void 0?1e3:o,u=t.websocketResponseTimeout,d=u===void 0?1e4:u,f=t.websocketPayloadDecompression,m=f===void 0||f,p=t.sessionTokenRefreshTimeout,E=p===void 0?60:p;this._useMemberInfoInMessage=!0,this._typingIndicatorInvalidateTime=1e4,this._typingIndicatorThrottle=1e3,this._websocketResponseTimeout=1e4,this._sessionTokenRefreshTimeout=60,this._useMemberInfoInMessage=i,this._typingIndicatorInvalidateTime=s,this._typingIndicatorThrottle=l,this._websocketResponseTimeout=d,this._sessionTokenRefreshTimeout=E,this.websocketPayloadDecompression=m}return Object.defineProperty(e.prototype,"useMemberInfoInMessage",{get:function(){return this._useMemberInfoInMessage},set:function(n){Z("boolean",n)&&(this._useMemberInfoInMessage=n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"typingIndicatorInvalidateTime",{get:function(){return this._typingIndicatorInvalidateTime},set:function(n){Z("number",n)&&(this._typingIndicatorInvalidateTime=n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"typingIndicatorThrottle",{get:function(){return this._typingIndicatorThrottle},set:function(n){Z("number",n)&&n>=1e3&&n<=9e3&&(this._typingIndicatorThrottle=n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"websocketResponseTimeout",{get:function(){return this._websocketResponseTimeout},set:function(n){Z("number",n)&&n>=5e3&&n<=3e4&&(this._websocketResponseTimeout=n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionTokenRefreshTimeout",{get:function(){return this._sessionTokenRefreshTimeout},set:function(n){Z("number",n)&&(n<60?n=60:n>1800&&(n=1800),this._sessionTokenRefreshTimeout=n)},enumerable:!1,configurable:!0}),e}(),Qw={encrypt:function(e){return e},decrypt:function(e){return e}},wT=function(){function e(n){var t=n.store;this._preference=new Map,this._store=t}return e.prototype._savePreferenceKeys=function(){return A(this,void 0,void 0,function(){return I(this,function(n){switch(n.label){case 0:return[4,this._store.set({key:this._keysAddress,value:Nt([],ut(this._preference.keys()),!1)})];case 1:return n.sent(),[2]}})})},e.prototype.init=function(n,t){var r;return t===void 0&&(t=1),A(this,void 0,void 0,function(){var i,a,s,o,l,u,d,f,m,p,E;return I(this,function(_){switch(_.label){case 0:return this._version=t,this._keysAddress=n,i="".concat(n,".metadata.version"),[4,this._store.get(i)];case 1:return a=_.sent(),[4,this._store.get(n)];case 2:return s=(r=_.sent())!==null&&r!==void 0?r:[],!a||a.version<this._version?this._version===9?[3,3]:[3,6]:[3,10];case 3:return o=s.find(function(b){return b.includes("groupchannel/sync.meta")}),o?[4,this._store.remove(o)]:[3,5];case 4:_.sent(),_.label=5;case 5:return[3,8];case 6:return[4,this._resetPreferenceData(s)];case 7:_.sent(),_.label=8;case 8:return[4,this._updatePreferenceVersionInfo(i)];case 9:return _.sent(),[3,17];case 10:_.trys.push([10,15,16,17]),l=Ge(s),u=l.next(),_.label=11;case 11:return u.done?[3,14]:(d=u.value,[4,this._store.get(d)]);case 12:(f=_.sent())&&this._preference.set(d,f),_.label=13;case 13:return u=l.next(),[3,11];case 14:return[3,17];case 15:return m=_.sent(),p={error:m},[3,17];case 16:try{u&&!u.done&&(E=l.return)&&E.call(l)}finally{if(p)throw p.error}return[7];case 17:return[2]}})})},e.prototype._updatePreferenceVersionInfo=function(n){return A(this,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return[4,this._store.set({key:n,value:{version:this._version}})];case 1:return t.sent(),[2]}})})},e.prototype._resetPreferenceData=function(n){return A(this,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return this._preference=new Map,[4,this._store.removeMany(n)];case 1:return t.sent(),[2]}})})},e.prototype.get=function(n){return A(this,void 0,void 0,function(){return I(this,function(t){return[2,this._preference.get(n)]})})},e.prototype.set=function(n,t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){switch(i.label){case 0:return r=!this._preference.has(n),[4,this._store.set({key:n,value:t})];case 1:return i.sent(),this._preference.set(n,t),r?[4,this._savePreferenceKeys()]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}})})},e.prototype.remove=function(n){return A(this,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return[4,this._store.remove(n)];case 1:return t.sent(),this._preference.delete(n),[4,this._savePreferenceKeys()];case 2:return t.sent(),[2]}})})},e.prototype.clear=function(){return A(this,void 0,void 0,function(){return I(this,function(n){switch(n.label){case 0:return[4,this._store.removeMany(Nt([],ut(this._preference.keys()),!1))];case 1:return n.sent(),this._preference.clear(),[4,this._savePreferenceKeys()];case 2:return n.sent(),[2]}})})},e}(),ck=function(){function e(n){var t=n.encryption,r=n.store,i=n.localCacheEnabled,a=n.localCacheConfig;this.store=r,this.preference=new wT({store:r}),this.encryption=t??Qw,this.localCacheEnabled=i,this.localCacheConfig=a}return e.prototype.replaceStore=function(n){this.store=n,this.preference=new wT({store:n})},e}();(function(e){e.SUCCESS="success",e.PENDING="pending",e.ERROR="error"})(Hi||(Hi={})),function(e){e.DEFAULT="default",e.ALL="all",e.MENTION_ONLY="mention_only",e.OFF="off"}(xu||(xu={})),function(e){e.FCM="gcm",e.APNS="apns",e.UNKNOWN="unknown"}(jr||(jr={})),function(e){e.SESSION_TOKEN="session_token",e.ACCESS_TOKEN="access_token"}(jm||(jm={})),function(e){e.ALTERNATIVE="alternative",e.DEFAULT="default"}(tE||(tE={})),function(e){e.CUSTOM="custom",e.MESSAGE_COLLECTION_ACCESSED_AT="messagecollection_accessed_at"}(Wh||(Wh={}));var $m,dk=function(){function e(n){var t=n.channel,r=n.cachedMessageCount;this._cachedMessageCount=0,this._channel=t,this._cachedMessageCount=r}return Object.defineProperty(e.prototype,"channel",{get:function(){return this._channel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cachedMessageCount",{get:function(){return this._cachedMessageCount},enumerable:!1,configurable:!0}),e}(),Yw=function(){function e(n){var t=n===void 0?{}:n,r=t.maxSize,i=r===void 0?256:r,a=t.clearOrder,s=a===void 0?Wh.MESSAGE_COLLECTION_ACCESSED_AT:a,o=t.customClearOrderComparator,l=t.enableAutoResend,u=l===void 0||l;this._clearOrderComparatorUseMessageCollectionAccessedAt=function(d,f){return d.channel.messageCollectionLastAccessedAt===f.channel.messageCollectionLastAccessedAt?d.channel.lastMessage&&!f.channel.lastMessage?1:!d.channel.lastMessage&&f.channel.lastMessage?-1:d.channel.lastMessage||f.channel.lastMessage?d.channel.lastMessage.createdAt-f.channel.lastMessage.createdAt:0:d.channel.messageCollectionLastAccessedAt>f.channel.messageCollectionLastAccessedAt?1:-1},this._maxSize=Math.max(i,64),o?(this._clearOrder=s,this._customClearOrderComparator=o):this._clearOrder=Wh.MESSAGE_COLLECTION_ACCESSED_AT,this._enableAutoResend=u}return Object.defineProperty(e.prototype,"maxSize",{get:function(){return this._maxSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clearOrder",{get:function(){return this._clearOrder},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clearOrderComparator",{get:function(){var n;return this._clearOrder===Wh.MESSAGE_COLLECTION_ACCESSED_AT?this._clearOrderComparatorUseMessageCollectionAccessedAt:(n=this._customClearOrderComparator)!==null&&n!==void 0?n:this._clearOrderComparatorUseMessageCollectionAccessedAt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableAutoResend",{get:function(){return this._enableAutoResend},enumerable:!1,configurable:!0}),e}();(function(e){e.FEED="feed",e.CHAT="chat",e.CHAT_API="chat_api"})($m||($m={}));var ln,Zr,ns,Zn,mi,hd,gi,Ir,Os,gn,RT,nE,rE,hk=function(){function e(){this.isRefreshing=!1}return Object.defineProperty(e.prototype,"hasSession",{get:function(){return!!this.sessionKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasChatServicePermission",{get:function(){var n;return!!(!((n=this.services)===null||n===void 0)&&n.includes($m.CHAT))},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this.authToken=void 0,this.sessionKey=void 0,this.services=[]},e}(),Ho=function(){var e=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),(n==="x"?t:3&t|8).toString(16)})},OT=function(){function e(n){var t=n.container;this._container={},this._container=t,this.key=Ho()}return e.prototype._register=function(n,t,r){var i;return n in this._container||(this._container[n]=new Map),(i=this._container[n])===null||i===void 0||i.set(this.key,{occurence:t,handler:r}),this},e.prototype.on=function(n,t){return this._register(n,-1,t)},e.prototype.once=function(n,t){return this._register(n,1,t)},e.prototype.close=function(){var n=this;Object.keys(this._container).forEach(function(t){var r;(r=n._container[t])===null||r===void 0||r.delete(n.key)})},e}(),ac=function(){function e(){this._container={}}return e.prototype.on=function(n,t){return new OT({container:this._container}).on(n,t)},e.prototype.once=function(n,t){return new OT({container:this._container}).once(n,t)},e.prototype.dispatch=function(n,t){var r,i,a=this._container[n];if(a){var s=[];try{for(var o=Ge(a.keys()),l=o.next();!l.done;l=o.next()){var u=l.value,d=a.get(u);d.handler(t),d.occurence>0&&(d.occurence--,d.occurence===0&&s.push(u))}}catch(f){r={error:f}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}s.forEach(function(f){return a.delete(f)})}},e}(),fk=function(){function e(){this._dispatcher=new ac}return e.prototype.on=function(n){return this._dispatcher.on("event",n)},e.prototype.once=function(n){return this._dispatcher.once("event",n)},e.prototype.dispatch=function(n){this._dispatcher.dispatch("event",n)},e}(),qn=function(){},Qe=function(e){var n={};return e&&Object.keys(e).forEach(function(t){e[t]===void 0||Number.isNaN(e[t])||e[t]===null||(n[t]=e[t])}),n},vt=function(e){if(e!=null){if(typeof e=="object"){if(Array.isArray(e)){for(var n=Nt([],ut(e),!1),t=0;t<n.length;t++)n[t]=vt(n[t]);return n}return Object.keys(e).forEach(function(r){e[r]===null&&delete e[r]}),e}return e}};(function(e){e.BASE="base",e.GROUP="group",e.OPEN="open",e.FEED="feed"})(ln||(ln={})),function(e){e.OPERATOR="operator",e.NONE="none"}(Zr||(Zr={})),function(e){e.MUTED="muted",e.UNMUTED="unmuted"}(ns||(ns={})),function(e){e.BASE="base",e.USER="user",e.FILE="file",e.ADMIN="admin"}(Zn||(Zn={})),function(e){e.ALL="",e.USER="MESG",e.FILE="FILE",e.ADMIN="ADMM"}(mi||(mi={})),function(e){e.USER="MESG",e.FILE="FILE",e.ADMIN="ADMM"}(hd||(hd={})),function(e){e.USERS="users",e.CHANNEL="channel"}(gi||(gi={})),function(e){e.ALL="all",e.NONE="none",e.ONLY_REPLY_TO_CHANNEL="only_reply_to_channel"}(Ir||(Ir={})),function(e){e.DEFAULT="default",e.SUPPRESS="suppress"}(Os||(Os={})),function(e){e.PENDING="pending",e.SCHEDULED="scheduled",e.SUCCEEDED="succeeded",e.FAILED="failed",e.CANCELED="canceled"}(gn||(gn={})),function(e){e.INREVIEW="InReview",e.APPROVED="Approved"}(RT||(RT={})),function(e){e.HIGH="high",e.NORMAL="normal",e.LOW="low"}(nE||(nE={})),function(e){e.CREATED_AT="created_at",e.UPDATED_AT="updated_at"}(rE||(rE={}));var Ie,Kr="v3",Tn="/".concat(Kr,"/users"),vk="/".concat(Kr,"/sdk/users"),mk="/".concat(Kr,"/storage/file"),Ui="/".concat(Kr,"/group_channels"),pk="/".concat(Kr,"/sdk/group_channels"),sc="/".concat(Kr,"/open_channels"),gk="/".concat(Kr,"/sdk/open_channels"),_k="/".concat(Kr,"/search"),iE="/".concat(Kr,"/report"),Ek="/".concat(Kr,"/emojis"),Xw="/".concat(Kr,"/emoji_categories"),Us="/".concat(Kr,"/polls"),Zw="/".concat(Kr,"/scheduled_messages"),yk="/".concat(Kr,"/sdk/ui_kit/configuration"),bk="/".concat(Kr,"/sdk/statistics"),Ck="/".concat(Kr,"/sdk/statistics/notification_statistics"),Jw="/".concat(Kr,"/message_templates"),Sk="/".concat(Kr,"/sdk/push_delivery"),Tk="/".concat(Kr,"/forms"),Mk="/".concat(Kr,"/report_category"),Nk="/".concat(Kr,"/sdk/applications/settings"),yn=function(e){switch(e){case ln.FEED:case ln.GROUP:return Ui;case ln.OPEN:return sc;default:return null}},e2=function(e){switch(e){case ln.GROUP:return"".concat(iE,"/group_channels");case ln.OPEN:return"".concat(iE,"/open_channels");default:return null}},fd=function(e,n,t){var r,i;switch(e){case gi.CHANNEL:return!0;case gi.USERS:if(n)try{for(var a=Ge(n),s=a.next();!s.done;s=a.next())if(s.value===t)return!0}catch(o){r={error:o}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}}return!1},mb=function(e,n,t){var r,i,a,s,o=fd((r=e.mentionType)!==null&&r!==void 0?r:null,(i=e.mentionedUserIds)!==null&&i!==void 0?i:[],t),l=fd((a=n.mentionType)!==null&&a!==void 0?a:null,(s=n.mentionedUserIds)!==null&&s!==void 0?s:[],t);return!o&&l?1:o&&!l?-1:0},t2=function(e,n,t){var r,i=n||new FormData;for(var a in e)if(e.hasOwnProperty(a)){var s=e[a],o=t?"".concat(t,"[").concat(a,"]"):a;Vr(s)?i.append(o,s,(r=s.name)!==null&&r!==void 0?r:"filename"):typeof s!="object"||s===null||Array.isArray(s)||s instanceof Blob?i.append(o,String(s)):i=t2(s,i,o)}return i};(function(e){e.GET="GET",e.POST="POST",e.PUT="PUT",e.DELETE="DELETE"})(Ie||(Ie={}));var tr,we=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.params={},t.requireAuth=!0,t.headers={},t.requestId=Ho(),t}return z(n,e),n.prototype.encodeParams=function(t){var r=this;return t==null||t===""?encodeURIComponent(""):Array.isArray(t)?t.map(function(i){return r.encodeParams(i)}).join(","):encodeURIComponent(typeof t=="object"?JSON.stringify(t):String(t))},Object.defineProperty(n.prototype,"query",{get:function(){var t=this,r=Qe(this.params);return"?".concat(Object.keys(r).map(function(i){return"".concat(encodeURIComponent(i),"=").concat(t.encodeParams(r[i]))}).join("&"))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"payload",{get:function(){var t=Qe(this.params);return Object.keys(t).some(function(r){return Vr(t[r])})?t2(t):JSON.stringify(t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasSessionKey",{get:function(){return this.headers["Session-Key"]!==void 0},enumerable:!1,configurable:!0}),n}(qn),Pe=function(e){function n(t,r){var i=e.call(this)||this;return i._iid=t,i._payload=r,i}return z(n,e),Object.defineProperty(n.prototype,"payload",{get:function(){return Y({},this._payload)},enumerable:!1,configurable:!0}),n.prototype.as=function(t){return new t(this._iid,this.payload)},n}(qn),Ik=function(e){function n(t){var r=e.call(this)||this;return r.requestId=t,r}return z(n,e),n}(qn),vd=function(e){function n(t){var r=t.expires_in,i=t.reason,a=i===void 0?lt.SESSION_KEY_EXPIRED:i,s=t.message,o=s===void 0?"":s,l=e.call(this)||this;switch(l.expiresIn=r??0,a){case lt.SESSION_KEY_EXPIRED:case lt.SESSION_TOKEN_EXPIRED:case lt.SESSION_REVOKED:case lt.USER_AUTH_DEACTIVATED:case lt.USER_AUTH_DELETED_OR_NOT_FOUND:l.error=new ee({code:a,message:o})}return l}return z(n,e),Object.defineProperty(n.prototype,"invalidateSessionToken",{get:function(){var t;return!!(!((t=this.error)===null||t===void 0)&&t.isSessionTokenExpiredError)},enumerable:!1,configurable:!0}),n}(qn),Yn=function(e){function n(t,r,i,a){a===void 0&&(a="");var s,o=this;return(o=e.call(this)||this)._iid=t,o.code=r,o.payload=i,o.requestId=(s=i.req_id)!==null&&s!==void 0?s:a,o}return z(n,e),n.createFromRawMessage=function(t,r){var i=r.substring(0,4),a={};try{a=JSON.parse(r.substring(4))}catch{i="NOOP"}finally{return new n(t,i,a)}},n.prototype.convertToMessage=function(){return"".concat(this.code).concat(JSON.stringify(this.payload),`
`)},n.prototype.as=function(t){return new t(this._iid,this.code,this.payload)},n}(qn),pi=function(e){function n(t){var r,i=t.code,a=t.ackRequired,s=t.payload,o=s===void 0?{}:s,l=this;return(l=e.call(this)||this).code=i,l.payload=o,l.requestId=(r=l.payload.req_id)!==null&&r!==void 0?r:Ho(),l.ackRequired=a,l.payload.req_id=l.requestId,l}return z(n,e),n.prototype.convertToMessage=function(){return"".concat(this.code).concat(JSON.stringify(this.payload),`
`)},n}(qn),pb=function(e){function n(t){var r=t.userId,i=t.authToken,a=t.services,s=t.expiringSession,o=s===void 0||s,l=e.call(this)||this;return l.path="".concat(Tn,"/").concat(r,"/session_key"),l.method=Ie.POST,l.params=Qe({token:i,services:a,expiring_session:!!o}),l.requireAuth=!1,l}return z(n,e),n}(we),Ak=function(e){function n(t){var r=t.authToken,i=t.expiringSession,a=i===void 0||i,s=t.requestId,o=s===void 0?void 0:s;return e.call(this,{code:"LOGI",payload:Qe({token:r,expiring_session:a?1:0,req_id:o}),ackRequired:!0})||this}return z(n,e),n}(pi),wk=function(e){function n(t,r){var i=e.call(this,t,r)||this,a=r.key,s=r.expires_at,o=r.services;return i.key=a,i.expiresAt=s,i.services=o,i}return z(n,e),n}(Pe),Rk=function(e){function n(t,r,i){var a,s=this;return(s=e.call(this,t,"LOGI",i)||this).error=null,s.newKey=null,s.newKey=(a=i.new_key)!==null&&a!==void 0?a:null,s.error=i.error?new ee(i):null,s}return z(n,e),n}(Yn),gb=function(e){function n(t){var r=e.call(this)||this;return r.statLog=t,r}return z(n,e),n}(qn),n2=function(e){function n(t){var r=t.request,i=t.deferred,a=t.error,s=a===void 0?ee.requestFailed:a,o=e.call(this)||this;return o.request=r,o.deferred=i,o.error=s,o}return z(n,e),n}(qn);(function(e){e.FEATURE_LOCALCACHE="feature:local_cache",e.FEATURE_LOCALCACHE_EVENT="feature:local_cache_event",e.NOTIFICATION="noti:stats",e.WEBSOCKET_CONNECT="ws:connect",e.API_RESULT="api:result"})(tr||(tr={}));var aE,$u,Pl,cr=function(){function e(n){var t=n.type,r=n.data,i=n.ts,a=i===void 0?Date.now():i;this.type=t,this.createdAt=a,this.data=r}return e.payloadify=function(n){return Qe({stat_type:n.type,ts:n.createdAt,data:Qe(n.data)})},e}(),sE=function(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product=="ReactNative"},LT=function(){return!(typeof navigator>"u"||!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Windows Phone/i.test(navigator.userAgent))};(function(e){e.CHAT="chat",e.CALLS="calls",e.DESK="desk",e.LIVE="live",e.UIKIT_CHAT="uikit-chat",e.UIKIT_LIVE="uikit-live"})(aE||(aE={})),function(e){e.ANDROID="android",e.IOS="ios",e.JS="js",e.UNREAL="unreal",e.UNITY="unity",e.REACT_NATIVE="react-native",e.FLUTTER="flutter"}($u||($u={})),function(e){e.ANDROID="android",e.IOS="ios",e.WEB="web",e.MOBILE_WEB="mobile_web",e.WINDOWS="windows"}(Pl||(Pl={}));var Ok="^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$",qm=function(){function e(){}return e.sendbirdSdkUserAgentWithExtension=function(n){var t=sE()?$u.REACT_NATIVE:$u.JS,r={main_sdk_info:"chat/".concat(t,"/").concat(Bl.SDK_VERSION),device_os_platform:LT()?"mobile-web":"web",os_version:Bl.OS_VERSION};if(n){var i=n.sendbirdExtensions,a=n.deviceOS,s=n.customData,o=s===void 0?{}:s;a.version&&(r.os_version=a.version),a.platform&&(r.device_os_platform=a.platform),i.length>0&&(r.extension_sdk_info=i.map(function(l){var u=l.product,d=l.platform,f=l.version;return"".concat(u,"/").concat(d,"/").concat(f)}).join(",")),Object.keys(r).forEach(function(l){return delete o[l]}),Object.keys(o).length>0&&(r=Y(Y({},r),o))}return Object.entries(r).map(function(l){var u=ut(l,2),d=u[0],f=u[1];return"".concat(d,"=").concat(f)}).join("&")},e.userAgentWithExtension=function(n){var t=sE()?"reactnative":"JS",r=n.sb_syncmanager?"s".concat(n.sb_syncmanager):"",i=n.sb_uikit?"u".concat(n.sb_uikit):"",a=n["device-os-platform"]?"o".concat(n["device-os-platform"]):LT()?"omobile-web":"oweb";return"".concat(t,"/c").concat(Bl.SDK_VERSION,"/").concat(r,"/").concat(i,"/").concat(a)},e}(),zi=function(){var e=this;this.promise=new Promise(function(n,t){e.resolve=n,e.reject=function(r){t(r)}})},Km=function(e){function n(t){var r=e.call(this)||this;return r.requestId=t.requestId,r}return z(n,e),n}(qn),r2=function(e){function n(t){var r=e.call(this)||this;return r.method=Ie.DELETE,r.path="".concat(yn(t.channelType),"/").concat(t.channelUrl,"/messages/").concat(t.messageId),t.messageToken&&(r.params=Qe({mesg_token:t.messageToken})),r}return z(n,e),n}(we);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}z(n,e)})(Pe);var i2=function(e){function n(t,r,i){var a,s=this;return(s=e.call(this,t,"DELM",i)||this).channelUrl=i.channel_url,s.channelType=i.channel_type,s.messageId=Number(i.msg_id),s.silent=i.silent,s.messageCreatedAt=i.message_created_at?Number(i.message_created_at):-1,s.senderId=(a=i.sender_id)!==null&&a!==void 0?a:void 0,s}return z(n,e),n}(Yn),Lk=function(){function e(n,t){var r=t.session,i=t.sdkState,a=t.dispatcher,s=t.logger,o=t.useFetchCompat,l=o!==void 0&&o,u=this;this._abortControl=new Map,this._shouldImportFetchCompat=!1,this._iid=n,this._session=r,this._sdkState=i,this._dispatcher=a,this._dispatcher.on(function(d){d instanceof Ik&&u.cancel(d.requestId)}),this._logger=s,this._shouldImportFetchCompat=l}return e.prototype._createHeader=function(n,t){var r=this._sdkState,i=r.appId,a=r.appVersion,s=r.sendbirdRuntimeEnvironment,o=Y(Y({},n.headers),{SendBird:"JS,".concat(Bl.OS_VERSION,",").concat(Bl.SDK_VERSION,",").concat(i).concat(a?",".concat(a):""),"SB-User-Agent":qm.userAgentWithExtension(this._sdkState.extensions),"Request-Sent-Timestamp":Date.now().toString(),"SB-SDK-User-Agent":qm.sendbirdSdkUserAgentWithExtension(s)});return t||(o["Content-Type"]="application/json; charset=utf-8"),n.requireAuth&&!n.hasSessionKey&&this._session.hasSession&&(o["Session-Key"]=this._session.sessionKey),o["App-Id"]=i,this._session&&this._session.authToken&&(o["Access-Token"]=this._session.authToken),o},e.prototype._statLogApiResult=function(n,t,r){n.path.includes("/sdk/statistics")||this._dispatcher.dispatch(new gb(new cr({type:tr.API_RESULT,data:{endpoint:n.path,method:n.method,success:!r,latency:Date.now()-t,error_code:r==null?void 0:r.code,error_description:r==null?void 0:r.message}})))},e.prototype._isBodyRequired=function(n){var t=n.method;return t!==Ie.GET&&(t!==Ie.DELETE||n instanceof r2)},e.prototype.send=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,d,f,m,p,E,_,b,C,y,T,N;return I(this,function(w){switch(w.label){case 0:t=n.path,r=n.method,i=n.uploadProgressHandler,a=this._isBodyRequired(n),s=this._sdkState.api,o="".concat(s.host).concat(t).concat(a?"":n.query),l=a?n.payload:null,u=this._createHeader(n,l instanceof FormData?l:void 0),d=new AbortController,f=d.signal,this._abortControl.set(n.requestId,d),m=Date.now(),w.label=1;case 1:return w.trys.push([1,13,,14]),i?[4,Kh(()=>import("./__bundle-d1c1a490-_0rUWpvz.js"),[])]:[3,6];case 2:p=w.sent().xmlHttpRequest,w.label=3;case 3:return w.trys.push([3,5,,6]),[4,p(this._iid,{requestId:n.requestId,method:n.method,url:o,headers:u,data:l??void 0,uploadProgressHandler:i})];case 4:return E=w.sent(),this._logger.debug("receive api response",n.requestId),this._statLogApiResult(n,m),[2,E];case 5:if(!((_=w.sent())instanceof ee&&_.code===lt.XMLHTTPREQUEST_NOT_SUPPORTED))throw _;return this._logger.debug("XMLHttpRequest is not available in this environment. progressHandler is ignored."),[3,6];case 6:return this._shouldImportFetchCompat&&(this._shouldImportFetchCompat=!1,(typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof global<"u"&&global||{fetch:null}).fetch=null),typeof AbortController<"u"?[3,8]:[4,Kh(()=>Promise.resolve().then(()=>_ne),void 0)];case 7:w.sent(),w.label=8;case 8:return typeof fetch=="function"?[3,10]:[4,Kh(()=>import("./__bundle-46d64517-CEQanxNy.js").then(O=>O._),[])];case 9:w.sent(),w.label=10;case 10:return[4,fetch(o,{method:r,body:l,headers:u,signal:f})];case 11:return[4,(b=w.sent()).json()];case 12:if(C=w.sent(),b.ok||b.redirected)return this._logger.debug("receive api response",n.requestId),this._statLogApiResult(n,m),[2,new Pe(this._iid,C)];if(C){if((y=new ee(C)).isSessionExpiredError){if(this._dispatcher.dispatch(new vd({reason:y.code,message:y.message})),!(n instanceof pb))return T=new zi,this._dispatcher.dispatch(new n2({request:n,deferred:T,error:y})),[2,T.promise];throw y}throw y.isSessionInvalidatedError&&this._dispatcher.dispatch(new vd({reason:y.code,message:y.message})),y}throw ee.requestFailed;case 13:throw N=w.sent(),this._statLogApiResult(n,m,N),N instanceof ee?(this._logger.debug("fail api request",N),N):(N==null?void 0:N.name)==="AbortError"?ee.requestCanceled:(this._logger.debug("fail api request",N),ee.networkError);case 14:return[2]}})})},e.prototype.cancel=function(n){this._abortControl.has(n)&&(this._abortControl.get(n).abort(),this._abortControl.delete(n)),this._dispatcher.dispatch(new Km({requestId:n}))},e.prototype.cancelAll=function(){var n,t;try{for(var r=Ge(this._abortControl.values()),i=r.next();!i.done;i=r.next())i.value.abort()}catch(a){n={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(n)throw n.error}}this._abortControl.clear(),this._dispatcher.dispatch(new Km({}))},e}(),Bt=function(){};function Id(e){let n=e.length;for(;--n>=0;)e[n]=0}const _b=256,a2=286,Qh=30,Yh=15,oE=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Nm=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Uk=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),UT=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Mo=new Array(576);Id(Mo);const Xh=new Array(60);Id(Xh);const gf=new Array(512);Id(gf);const Zh=new Array(256);Id(Zh);const Eb=new Array(29);Id(Eb);const Wm=new Array(Qh);function Kg(e,n,t,r,i){this.static_tree=e,this.extra_bits=n,this.extra_base=t,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let DT,kT,PT;function Wg(e,n){this.dyn_tree=e,this.max_code=0,this.stat_desc=n}Id(Wm);const s2=e=>e<256?gf[e]:gf[256+(e>>>7)],_f=(e,n)=>{e.pending_buf[e.pending++]=255&n,e.pending_buf[e.pending++]=n>>>8&255},pa=(e,n,t)=>{e.bi_valid>16-t?(e.bi_buf|=n<<e.bi_valid&65535,_f(e,e.bi_buf),e.bi_buf=n>>16-e.bi_valid,e.bi_valid+=t-16):(e.bi_buf|=n<<e.bi_valid&65535,e.bi_valid+=t)},Ks=(e,n,t)=>{pa(e,t[2*n],t[2*n+1])},o2=(e,n)=>{let t=0;do t|=1&e,e>>>=1,t<<=1;while(--n>0);return t>>>1},l2=(e,n,t)=>{const r=new Array(16);let i,a,s=0;for(i=1;i<=Yh;i++)s=s+t[i-1]<<1,r[i]=s;for(a=0;a<=n;a++){let o=e[2*a+1];o!==0&&(e[2*a]=o2(r[o]++,o))}},u2=e=>{let n;for(n=0;n<a2;n++)e.dyn_ltree[2*n]=0;for(n=0;n<Qh;n++)e.dyn_dtree[2*n]=0;for(n=0;n<19;n++)e.bl_tree[2*n]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},c2=e=>{e.bi_valid>8?_f(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},xT=(e,n,t,r)=>{const i=2*n,a=2*t;return e[i]<e[a]||e[i]===e[a]&&r[n]<=r[t]},Qg=(e,n,t)=>{const r=e.heap[t];let i=t<<1;for(;i<=e.heap_len&&(i<e.heap_len&&xT(n,e.heap[i+1],e.heap[i],e.depth)&&i++,!xT(n,r,e.heap[i],e.depth));)e.heap[t]=e.heap[i],t=i,i<<=1;e.heap[t]=r},FT=(e,n,t)=>{let r,i,a,s,o=0;if(e.sym_next!==0)do r=255&e.pending_buf[e.sym_buf+o++],r+=(255&e.pending_buf[e.sym_buf+o++])<<8,i=e.pending_buf[e.sym_buf+o++],r===0?Ks(e,i,n):(a=Zh[i],Ks(e,a+_b+1,n),s=oE[a],s!==0&&(i-=Eb[a],pa(e,i,s)),r--,a=s2(r),Ks(e,a,t),s=Nm[a],s!==0&&(r-=Wm[a],pa(e,r,s)));while(o<e.sym_next);Ks(e,256,n)},Yg=(e,n)=>{const t=n.dyn_tree,r=n.stat_desc.static_tree,i=n.stat_desc.has_stree,a=n.stat_desc.elems;let s,o,l,u=-1;for(e.heap_len=0,e.heap_max=573,s=0;s<a;s++)t[2*s]!==0?(e.heap[++e.heap_len]=u=s,e.depth[s]=0):t[2*s+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=u<2?++u:0,t[2*l]=1,e.depth[l]=0,e.opt_len--,i&&(e.static_len-=r[2*l+1]);for(n.max_code=u,s=e.heap_len>>1;s>=1;s--)Qg(e,t,s);l=a;do s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Qg(e,t,1),o=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=o,t[2*l]=t[2*s]+t[2*o],e.depth[l]=(e.depth[s]>=e.depth[o]?e.depth[s]:e.depth[o])+1,t[2*s+1]=t[2*o+1]=l,e.heap[1]=l++,Qg(e,t,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((d,f)=>{const m=f.dyn_tree,p=f.max_code,E=f.stat_desc.static_tree,_=f.stat_desc.has_stree,b=f.stat_desc.extra_bits,C=f.stat_desc.extra_base,y=f.stat_desc.max_length;let T,N,w,O,L,P,U=0;for(O=0;O<=Yh;O++)d.bl_count[O]=0;for(m[2*d.heap[d.heap_max]+1]=0,T=d.heap_max+1;T<573;T++)N=d.heap[T],O=m[2*m[2*N+1]+1]+1,O>y&&(O=y,U++),m[2*N+1]=O,N>p||(d.bl_count[O]++,L=0,N>=C&&(L=b[N-C]),P=m[2*N],d.opt_len+=P*(O+L),_&&(d.static_len+=P*(E[2*N+1]+L)));if(U!==0){do{for(O=y-1;d.bl_count[O]===0;)O--;d.bl_count[O]--,d.bl_count[O+1]+=2,d.bl_count[y]--,U-=2}while(U>0);for(O=y;O!==0;O--)for(N=d.bl_count[O];N!==0;)w=d.heap[--T],w>p||(m[2*w+1]!==O&&(d.opt_len+=(O-m[2*w+1])*m[2*w],m[2*w+1]=O),N--)}})(e,n),l2(t,u,e.bl_count)},BT=(e,n,t)=>{let r,i,a=-1,s=n[1],o=0,l=7,u=4;for(s===0&&(l=138,u=3),n[2*(t+1)+1]=65535,r=0;r<=t;r++)i=s,s=n[2*(r+1)+1],++o<l&&i===s||(o<u?e.bl_tree[2*i]+=o:i!==0?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,a=i,s===0?(l=138,u=3):i===s?(l=6,u=3):(l=7,u=4))},HT=(e,n,t)=>{let r,i,a=-1,s=n[1],o=0,l=7,u=4;for(s===0&&(l=138,u=3),r=0;r<=t;r++)if(i=s,s=n[2*(r+1)+1],!(++o<l&&i===s)){if(o<u)do Ks(e,i,e.bl_tree);while(--o!=0);else i!==0?(i!==a&&(Ks(e,i,e.bl_tree),o--),Ks(e,16,e.bl_tree),pa(e,o-3,2)):o<=10?(Ks(e,17,e.bl_tree),pa(e,o-3,3)):(Ks(e,18,e.bl_tree),pa(e,o-11,7));o=0,a=i,s===0?(l=138,u=3):i===s?(l=6,u=3):(l=7,u=4)}};let GT=!1;const d2=(e,n,t,r)=>{pa(e,0+(r?1:0),3),c2(e),_f(e,t),_f(e,~t),t&&e.pending_buf.set(e.window.subarray(n,n+t),e.pending),e.pending+=t};var Dk=(e,n,t,r)=>{let i,a,s=0;e.level>0?(e.strm.data_type===2&&(e.strm.data_type=(o=>{let l,u=4093624447;for(l=0;l<=31;l++,u>>>=1)if(1&u&&o.dyn_ltree[2*l]!==0)return 0;if(o.dyn_ltree[18]!==0||o.dyn_ltree[20]!==0||o.dyn_ltree[26]!==0)return 1;for(l=32;l<_b;l++)if(o.dyn_ltree[2*l]!==0)return 1;return 0})(e)),Yg(e,e.l_desc),Yg(e,e.d_desc),s=(o=>{let l;for(BT(o,o.dyn_ltree,o.l_desc.max_code),BT(o,o.dyn_dtree,o.d_desc.max_code),Yg(o,o.bl_desc),l=18;l>=3&&o.bl_tree[2*UT[l]+1]===0;l--);return o.opt_len+=3*(l+1)+5+5+4,l})(e),i=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=i&&(i=a)):i=a=t+5,t+4<=i&&n!==-1?d2(e,n,t,r):e.strategy===4||a===i?(pa(e,2+(r?1:0),3),FT(e,Mo,Xh)):(pa(e,4+(r?1:0),3),((o,l,u,d)=>{let f;for(pa(o,l-257,5),pa(o,u-1,5),pa(o,d-4,4),f=0;f<d;f++)pa(o,o.bl_tree[2*UT[f]+1],3);HT(o,o.dyn_ltree,l-1),HT(o,o.dyn_dtree,u-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),FT(e,e.dyn_ltree,e.dyn_dtree)),u2(e),r&&c2(e)},kk={_tr_init:e=>{GT||((()=>{let n,t,r,i,a;const s=new Array(16);for(r=0,i=0;i<28;i++)for(Eb[i]=r,n=0;n<1<<oE[i];n++)Zh[r++]=i;for(Zh[r-1]=i,a=0,i=0;i<16;i++)for(Wm[i]=a,n=0;n<1<<Nm[i];n++)gf[a++]=i;for(a>>=7;i<Qh;i++)for(Wm[i]=a<<7,n=0;n<1<<Nm[i]-7;n++)gf[256+a++]=i;for(t=0;t<=Yh;t++)s[t]=0;for(n=0;n<=143;)Mo[2*n+1]=8,n++,s[8]++;for(;n<=255;)Mo[2*n+1]=9,n++,s[9]++;for(;n<=279;)Mo[2*n+1]=7,n++,s[7]++;for(;n<=287;)Mo[2*n+1]=8,n++,s[8]++;for(l2(Mo,287,s),n=0;n<Qh;n++)Xh[2*n+1]=5,Xh[2*n]=o2(n,5);DT=new Kg(Mo,oE,257,a2,Yh),kT=new Kg(Xh,Nm,0,Qh,Yh),PT=new Kg(new Array(0),Uk,0,19,7)})(),GT=!0),e.l_desc=new Wg(e.dyn_ltree,DT),e.d_desc=new Wg(e.dyn_dtree,kT),e.bl_desc=new Wg(e.bl_tree,PT),e.bi_buf=0,e.bi_valid=0,u2(e)},_tr_stored_block:d2,_tr_flush_block:Dk,_tr_tally:(e,n,t)=>(e.pending_buf[e.sym_buf+e.sym_next++]=n,e.pending_buf[e.sym_buf+e.sym_next++]=n>>8,e.pending_buf[e.sym_buf+e.sym_next++]=t,n===0?e.dyn_ltree[2*t]++:(e.matches++,n--,e.dyn_ltree[2*(Zh[t]+_b+1)]++,e.dyn_dtree[2*s2(n)]++),e.sym_next===e.sym_end),_tr_align:e=>{pa(e,2,3),Ks(e,256,Mo),(n=>{n.bi_valid===16?(_f(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=255&n.bi_buf,n.bi_buf>>=8,n.bi_valid-=8)})(e)}},Jh=(e,n,t,r)=>{let i=65535&e,a=e>>>16&65535,s=0;for(;t!==0;){s=t>2e3?2e3:t,t-=s;do i=i+n[r++]|0,a=a+i|0;while(--s);i%=65521,a%=65521}return i|a<<16};const Pk=new Uint32Array((()=>{let e,n=[];for(var t=0;t<256;t++){e=t;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;n[t]=e}return n})());var di=(e,n,t,r)=>{const i=Pk,a=r+t;e^=-1;for(let s=r;s<a;s++)e=e>>>8^i[255&(e^n[s])];return~e},Yu={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},oc={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:xk,_tr_stored_block:lE,_tr_flush_block:Fk,_tr_tally:Hl,_tr_align:Bk}=kk,{Z_NO_FLUSH:Gl,Z_PARTIAL_FLUSH:Hk,Z_FULL_FLUSH:Gk,Z_FINISH:rs,Z_BLOCK:zT,Z_OK:Si,Z_STREAM_END:jT,Z_STREAM_ERROR:zs,Z_DATA_ERROR:zk,Z_BUF_ERROR:Xg,Z_DEFAULT_COMPRESSION:jk,Z_FILTERED:Vk,Z_HUFFMAN_ONLY:qv,Z_RLE:$k,Z_FIXED:qk,Z_DEFAULT_STRATEGY:Kk,Z_UNKNOWN:Wk,Z_DEFLATED:Qm}=oc,Fu=258,Xs=262,ld=42,Au=113,Fh=666,wu=(e,n)=>(e.msg=Yu[n],n),VT=e=>2*e-(e>4?9:0),Ul=e=>{let n=e.length;for(;--n>=0;)e[n]=0},Qk=e=>{let n,t,r,i=e.w_size;n=e.hash_size,r=n;do t=e.head[--r],e.head[r]=t>=i?t-i:0;while(--n);n=i,r=n;do t=e.prev[--r],e.prev[r]=t>=i?t-i:0;while(--n)};let zl=(e,n,t)=>(n<<e.hash_shift^t)&e.hash_mask;const wa=e=>{const n=e.state;let t=n.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(e.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+t),e.next_out),e.next_out+=t,n.pending_out+=t,e.total_out+=t,e.avail_out-=t,n.pending-=t,n.pending===0&&(n.pending_out=0))},ka=(e,n)=>{Fk(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,n),e.block_start=e.strstart,wa(e.strm)},Jn=(e,n)=>{e.pending_buf[e.pending++]=n},Eh=(e,n)=>{e.pending_buf[e.pending++]=n>>>8&255,e.pending_buf[e.pending++]=255&n},uE=(e,n,t,r)=>{let i=e.avail_in;return i>r&&(i=r),i===0?0:(e.avail_in-=i,n.set(e.input.subarray(e.next_in,e.next_in+i),t),e.state.wrap===1?e.adler=Jh(e.adler,n,i,t):e.state.wrap===2&&(e.adler=di(e.adler,n,i,t)),e.next_in+=i,e.total_in+=i,i)},h2=(e,n)=>{let t,r,i=e.max_chain_length,a=e.strstart,s=e.prev_length,o=e.nice_match;const l=e.strstart>e.w_size-Xs?e.strstart-(e.w_size-Xs):0,u=e.window,d=e.w_mask,f=e.prev,m=e.strstart+Fu;let p=u[a+s-1],E=u[a+s];e.prev_length>=e.good_match&&(i>>=2),o>e.lookahead&&(o=e.lookahead);do if(t=n,u[t+s]===E&&u[t+s-1]===p&&u[t]===u[a]&&u[++t]===u[a+1]){a+=2,t++;do;while(u[++a]===u[++t]&&u[++a]===u[++t]&&u[++a]===u[++t]&&u[++a]===u[++t]&&u[++a]===u[++t]&&u[++a]===u[++t]&&u[++a]===u[++t]&&u[++a]===u[++t]&&a<m);if(r=Fu-(m-a),a=m-Fu,r>s){if(e.match_start=n,s=r,r>=o)break;p=u[a+s-1],E=u[a+s]}}while((n=f[n&d])>l&&--i!=0);return s<=e.lookahead?s:e.lookahead},ad=e=>{const n=e.w_size;let t,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=n+(n-Xs)&&(e.window.set(e.window.subarray(n,n+n-r),0),e.match_start-=n,e.strstart-=n,e.block_start-=n,e.insert>e.strstart&&(e.insert=e.strstart),Qk(e),r+=n),e.strm.avail_in===0)break;if(t=uE(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=t,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=zl(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=zl(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<Xs&&e.strm.avail_in!==0)},f2=(e,n)=>{let t,r,i,a=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,s=0,o=e.strm.avail_in;do{if(t=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i||(i=e.strm.avail_out-i,r=e.strstart-e.block_start,t>r+e.strm.avail_in&&(t=r+e.strm.avail_in),t>i&&(t=i),t<a&&(t===0&&n!==rs||n===Gl||t!==r+e.strm.avail_in)))break;s=n===rs&&t===r+e.strm.avail_in?1:0,lE(e,0,0,s),e.pending_buf[e.pending-4]=t,e.pending_buf[e.pending-3]=t>>8,e.pending_buf[e.pending-2]=~t,e.pending_buf[e.pending-1]=~t>>8,wa(e.strm),r&&(r>t&&(r=t),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,t-=r),t&&(uE(e.strm,e.strm.output,e.strm.next_out,t),e.strm.next_out+=t,e.strm.avail_out-=t,e.strm.total_out+=t)}while(s===0);return o-=e.strm.avail_in,o&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?4:n!==Gl&&n!==rs&&e.strm.avail_in===0&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(uE(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,a=i>e.w_size?e.w_size:i,r=e.strstart-e.block_start,(r>=a||(r||n===rs)&&n!==Gl&&e.strm.avail_in===0&&r<=i)&&(t=r>i?i:r,s=n===rs&&e.strm.avail_in===0&&t===r?1:0,lE(e,e.block_start,t,s),e.block_start+=t,wa(e.strm)),s?3:1)},Zg=(e,n)=>{let t,r;for(;;){if(e.lookahead<Xs){if(ad(e),e.lookahead<Xs&&n===Gl)return 1;if(e.lookahead===0)break}if(t=0,e.lookahead>=3&&(e.ins_h=zl(e,e.ins_h,e.window[e.strstart+3-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-Xs&&(e.match_length=h2(e,t)),e.match_length>=3)if(r=Hl(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do e.strstart++,e.ins_h=zl(e,e.ins_h,e.window[e.strstart+3-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!=0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=zl(e,e.ins_h,e.window[e.strstart+1]);else r=Hl(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(ka(e,!1),e.strm.avail_out===0))return 1}return e.insert=e.strstart<2?e.strstart:2,n===rs?(ka(e,!0),e.strm.avail_out===0?3:4):e.sym_next&&(ka(e,!1),e.strm.avail_out===0)?1:2},jc=(e,n)=>{let t,r,i;for(;;){if(e.lookahead<Xs){if(ad(e),e.lookahead<Xs&&n===Gl)return 1;if(e.lookahead===0)break}if(t=0,e.lookahead>=3&&(e.ins_h=zl(e,e.ins_h,e.window[e.strstart+3-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-Xs&&(e.match_length=h2(e,t),e.match_length<=5&&(e.strategy===Vk||e.match_length===3&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=Hl(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=zl(e,e.ins_h,e.window[e.strstart+3-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!=0);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(ka(e,!1),e.strm.avail_out===0))return 1}else if(e.match_available){if(r=Hl(e,0,e.window[e.strstart-1]),r&&ka(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Hl(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,n===rs?(ka(e,!0),e.strm.avail_out===0?3:4):e.sym_next&&(ka(e,!1),e.strm.avail_out===0)?1:2};function Gs(e,n,t,r,i){this.good_length=e,this.max_lazy=n,this.nice_length=t,this.max_chain=r,this.func=i}const Bh=[new Gs(0,0,0,0,f2),new Gs(4,4,8,4,Zg),new Gs(4,5,16,8,Zg),new Gs(4,6,32,32,Zg),new Gs(4,4,16,16,jc),new Gs(8,16,32,32,jc),new Gs(8,16,128,128,jc),new Gs(8,32,128,256,jc),new Gs(32,128,258,1024,jc),new Gs(32,258,258,4096,jc)];function Yk(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Qm,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Ul(this.dyn_ltree),Ul(this.dyn_dtree),Ul(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Ul(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Ul(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Hh=e=>{if(!e)return 1;const n=e.state;return!n||n.strm!==e||n.status!==ld&&n.status!==57&&n.status!==69&&n.status!==73&&n.status!==91&&n.status!==103&&n.status!==Au&&n.status!==Fh?1:0},v2=e=>{if(Hh(e))return wu(e,zs);e.total_in=e.total_out=0,e.data_type=Wk;const n=e.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap===2?57:n.wrap?ld:Au,e.adler=n.wrap===2?0:1,n.last_flush=-2,xk(n),Si},m2=e=>{const n=v2(e);var t;return n===Si&&((t=e.state).window_size=2*t.w_size,Ul(t.head),t.max_lazy_match=Bh[t.level].max_lazy,t.good_match=Bh[t.level].good_length,t.nice_match=Bh[t.level].nice_length,t.max_chain_length=Bh[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n},$T=(e,n,t,r,i,a)=>{if(!e)return zs;let s=1;if(n===jk&&(n=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>9||t!==Qm||r<8||r>15||n<0||n>9||a<0||a>qk||r===8&&s!==1)return wu(e,zs);r===8&&(r=9);const o=new Yk;return e.state=o,o.strm=e,o.status=ld,o.wrap=s,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=n,o.strategy=a,o.method=t,m2(e)};var ef={deflateInit:(e,n)=>$T(e,n,Qm,15,8,Kk),deflateInit2:$T,deflateReset:m2,deflateResetKeep:v2,deflateSetHeader:(e,n)=>Hh(e)||e.state.wrap!==2?zs:(e.state.gzhead=n,Si),deflate:(e,n)=>{if(Hh(e)||n>zT||n<0)return e?wu(e,zs):zs;const t=e.state;if(!e.output||e.avail_in!==0&&!e.input||t.status===Fh&&n!==rs)return wu(e,e.avail_out===0?Xg:zs);const r=t.last_flush;if(t.last_flush=n,t.pending!==0){if(wa(e),e.avail_out===0)return t.last_flush=-1,Si}else if(e.avail_in===0&&VT(n)<=VT(r)&&n!==rs)return wu(e,Xg);if(t.status===Fh&&e.avail_in!==0)return wu(e,Xg);if(t.status===ld&&t.wrap===0&&(t.status=Au),t.status===ld){let i=Qm+(t.w_bits-8<<4)<<8,a=-1;if(a=t.strategy>=qv||t.level<2?0:t.level<6?1:t.level===6?2:3,i|=a<<6,t.strstart!==0&&(i|=32),i+=31-i%31,Eh(t,i),t.strstart!==0&&(Eh(t,e.adler>>>16),Eh(t,65535&e.adler)),e.adler=1,t.status=Au,wa(e),t.pending!==0)return t.last_flush=-1,Si}if(t.status===57){if(e.adler=0,Jn(t,31),Jn(t,139),Jn(t,8),t.gzhead)Jn(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),Jn(t,255&t.gzhead.time),Jn(t,t.gzhead.time>>8&255),Jn(t,t.gzhead.time>>16&255),Jn(t,t.gzhead.time>>24&255),Jn(t,t.level===9?2:t.strategy>=qv||t.level<2?4:0),Jn(t,255&t.gzhead.os),t.gzhead.extra&&t.gzhead.extra.length&&(Jn(t,255&t.gzhead.extra.length),Jn(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(e.adler=di(e.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=69;else if(Jn(t,0),Jn(t,0),Jn(t,0),Jn(t,0),Jn(t,0),Jn(t,t.level===9?2:t.strategy>=qv||t.level<2?4:0),Jn(t,3),t.status=Au,wa(e),t.pending!==0)return t.last_flush=-1,Si}if(t.status===69){if(t.gzhead.extra){let i=t.pending,a=(65535&t.gzhead.extra.length)-t.gzindex;for(;t.pending+a>t.pending_buf_size;){let o=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+o),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>i&&(e.adler=di(e.adler,t.pending_buf,t.pending-i,i)),t.gzindex+=o,wa(e),t.pending!==0)return t.last_flush=-1,Si;i=0,a-=o}let s=new Uint8Array(t.gzhead.extra);t.pending_buf.set(s.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending+=a,t.gzhead.hcrc&&t.pending>i&&(e.adler=di(e.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=73}if(t.status===73){if(t.gzhead.name){let i,a=t.pending;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(e.adler=di(e.adler,t.pending_buf,t.pending-a,a)),wa(e),t.pending!==0)return t.last_flush=-1,Si;a=0}i=t.gzindex<t.gzhead.name.length?255&t.gzhead.name.charCodeAt(t.gzindex++):0,Jn(t,i)}while(i!==0);t.gzhead.hcrc&&t.pending>a&&(e.adler=di(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex=0}t.status=91}if(t.status===91){if(t.gzhead.comment){let i,a=t.pending;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(e.adler=di(e.adler,t.pending_buf,t.pending-a,a)),wa(e),t.pending!==0)return t.last_flush=-1,Si;a=0}i=t.gzindex<t.gzhead.comment.length?255&t.gzhead.comment.charCodeAt(t.gzindex++):0,Jn(t,i)}while(i!==0);t.gzhead.hcrc&&t.pending>a&&(e.adler=di(e.adler,t.pending_buf,t.pending-a,a))}t.status=103}if(t.status===103){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(wa(e),t.pending!==0))return t.last_flush=-1,Si;Jn(t,255&e.adler),Jn(t,e.adler>>8&255),e.adler=0}if(t.status=Au,wa(e),t.pending!==0)return t.last_flush=-1,Si}if(e.avail_in!==0||t.lookahead!==0||n!==Gl&&t.status!==Fh){let i=t.level===0?f2(t,n):t.strategy===qv?((a,s)=>{let o;for(;;){if(a.lookahead===0&&(ad(a),a.lookahead===0)){if(s===Gl)return 1;break}if(a.match_length=0,o=Hl(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,o&&(ka(a,!1),a.strm.avail_out===0))return 1}return a.insert=0,s===rs?(ka(a,!0),a.strm.avail_out===0?3:4):a.sym_next&&(ka(a,!1),a.strm.avail_out===0)?1:2})(t,n):t.strategy===$k?((a,s)=>{let o,l,u,d;const f=a.window;for(;;){if(a.lookahead<=Fu){if(ad(a),a.lookahead<=Fu&&s===Gl)return 1;if(a.lookahead===0)break}if(a.match_length=0,a.lookahead>=3&&a.strstart>0&&(u=a.strstart-1,l=f[u],l===f[++u]&&l===f[++u]&&l===f[++u])){d=a.strstart+Fu;do;while(l===f[++u]&&l===f[++u]&&l===f[++u]&&l===f[++u]&&l===f[++u]&&l===f[++u]&&l===f[++u]&&l===f[++u]&&u<d);a.match_length=Fu-(d-u),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=3?(o=Hl(a,1,a.match_length-3),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(o=Hl(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),o&&(ka(a,!1),a.strm.avail_out===0))return 1}return a.insert=0,s===rs?(ka(a,!0),a.strm.avail_out===0?3:4):a.sym_next&&(ka(a,!1),a.strm.avail_out===0)?1:2})(t,n):Bh[t.level].func(t,n);if(i!==3&&i!==4||(t.status=Fh),i===1||i===3)return e.avail_out===0&&(t.last_flush=-1),Si;if(i===2&&(n===Hk?Bk(t):n!==zT&&(lE(t,0,0,!1),n===Gk&&(Ul(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),wa(e),e.avail_out===0))return t.last_flush=-1,Si}return n!==rs?Si:t.wrap<=0?jT:(t.wrap===2?(Jn(t,255&e.adler),Jn(t,e.adler>>8&255),Jn(t,e.adler>>16&255),Jn(t,e.adler>>24&255),Jn(t,255&e.total_in),Jn(t,e.total_in>>8&255),Jn(t,e.total_in>>16&255),Jn(t,e.total_in>>24&255)):(Eh(t,e.adler>>>16),Eh(t,65535&e.adler)),wa(e),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?Si:jT)},deflateEnd:e=>{if(Hh(e))return zs;const n=e.state.status;return e.state=null,n===Au?wu(e,zk):Si},deflateSetDictionary:(e,n)=>{let t=n.length;if(Hh(e))return zs;const r=e.state,i=r.wrap;if(i===2||i===1&&r.status!==ld||r.lookahead)return zs;if(i===1&&(e.adler=Jh(e.adler,n,t,0)),r.wrap=0,t>=r.w_size){i===0&&(Ul(r.head),r.strstart=0,r.block_start=0,r.insert=0);let l=new Uint8Array(r.w_size);l.set(n.subarray(t-r.w_size,t),0),n=l,t=r.w_size}const a=e.avail_in,s=e.next_in,o=e.input;for(e.avail_in=t,e.next_in=0,e.input=n,ad(r);r.lookahead>=3;){let l=r.strstart,u=r.lookahead-2;do r.ins_h=zl(r,r.ins_h,r.window[l+3-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++;while(--u);r.strstart=l,r.lookahead=2,ad(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=s,e.input=o,e.avail_in=a,r.wrap=i,Si},deflateInfo:"pako deflate (from Nodeca project)"};const Xk=(e,n)=>Object.prototype.hasOwnProperty.call(e,n);var p2=function(e){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const t=n.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const r in t)Xk(t,r)&&(e[r]=t[r])}}return e},g2=e=>{let n=0;for(let r=0,i=e.length;r<i;r++)n+=e[r].length;const t=new Uint8Array(n);for(let r=0,i=0,a=e.length;r<a;r++){let s=e[r];t.set(s,i),i+=s.length}return t};let _2=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{_2=!1}const Ef=new Uint8Array(256);for(let e=0;e<256;e++)Ef[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Ef[254]=Ef[254]=1;var yb=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let n,t,r,i,a,s=e.length,o=0;for(i=0;i<s;i++)t=e.charCodeAt(i),(64512&t)==55296&&i+1<s&&(r=e.charCodeAt(i+1),(64512&r)==56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),o+=t<128?1:t<2048?2:t<65536?3:4;for(n=new Uint8Array(o),a=0,i=0;a<o;i++)t=e.charCodeAt(i),(64512&t)==55296&&i+1<s&&(r=e.charCodeAt(i+1),(64512&r)==56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),t<128?n[a++]=t:t<2048?(n[a++]=192|t>>>6,n[a++]=128|63&t):t<65536?(n[a++]=224|t>>>12,n[a++]=128|t>>>6&63,n[a++]=128|63&t):(n[a++]=240|t>>>18,n[a++]=128|t>>>12&63,n[a++]=128|t>>>6&63,n[a++]=128|63&t);return n},Zk=(e,n)=>{const t=n||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,n));let r,i;const a=new Array(2*t);for(i=0,r=0;r<t;){let s=e[r++];if(s<128){a[i++]=s;continue}let o=Ef[s];if(o>4)a[i++]=65533,r+=o-1;else{for(s&=o===2?31:o===3?15:7;o>1&&r<t;)s=s<<6|63&e[r++],o--;o>1?a[i++]=65533:s<65536?a[i++]=s:(s-=65536,a[i++]=55296|s>>10&1023,a[i++]=56320|1023&s)}}return((s,o)=>{if(o<65534&&s.subarray&&_2)return String.fromCharCode.apply(null,s.length===o?s:s.subarray(0,o));let l="";for(let u=0;u<o;u++)l+=String.fromCharCode(s[u]);return l})(a,i)},Jk=(e,n)=>{(n=n||e.length)>e.length&&(n=e.length);let t=n-1;for(;t>=0&&(192&e[t])==128;)t--;return t<0||t===0?n:t+Ef[e[t]]>n?t:n},E2=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const y2=Object.prototype.toString,{Z_NO_FLUSH:eP,Z_SYNC_FLUSH:tP,Z_FULL_FLUSH:nP,Z_FINISH:rP,Z_OK:Ym,Z_STREAM_END:iP,Z_DEFAULT_COMPRESSION:aP,Z_DEFAULT_STRATEGY:sP,Z_DEFLATED:oP}=oc;function tf(e){this.options=p2({level:aP,method:oP,chunkSize:16384,windowBits:15,memLevel:8,strategy:sP},e||{});let n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new E2,this.strm.avail_out=0;let t=ef.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(t!==Ym)throw new Error(Yu[t]);if(n.header&&ef.deflateSetHeader(this.strm,n.header),n.dictionary){let r;if(r=typeof n.dictionary=="string"?yb(n.dictionary):y2.call(n.dictionary)==="[object ArrayBuffer]"?new Uint8Array(n.dictionary):n.dictionary,t=ef.deflateSetDictionary(this.strm,r),t!==Ym)throw new Error(Yu[t]);this._dict_set=!0}}function Jg(e,n){const t=new tf(n);if(t.push(e,!0),t.err)throw t.msg||Yu[t.err];return t.result}tf.prototype.push=function(e,n){const t=this.strm,r=this.options.chunkSize;let i,a;if(this.ended)return!1;for(a=n===~~n?n:n===!0?rP:eP,typeof e=="string"?t.input=yb(e):y2.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;)if(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),(a===tP||a===nP)&&t.avail_out<=6)this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;else{if(i=ef.deflate(t,a),i===iP)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),i=ef.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Ym;if(t.avail_out!==0){if(a>0&&t.next_out>0)this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;else if(t.avail_in===0)break}else this.onData(t.output)}return!0},tf.prototype.onData=function(e){this.chunks.push(e)},tf.prototype.onEnd=function(e){e===Ym&&(this.result=g2(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var lP={Deflate:tf,deflate:Jg,deflateRaw:function(e,n){return(n=n||{}).raw=!0,Jg(e,n)},gzip:function(e,n){return(n=n||{}).gzip=!0,Jg(e,n)},constants:oc};const Kv=16209;var uP=function(e,n){let t,r,i,a,s,o,l,u,d,f,m,p,E,_,b,C,y,T,N,w,O,L,P,U;const B=e.state;t=e.next_in,P=e.input,r=t+(e.avail_in-5),i=e.next_out,U=e.output,a=i-(n-e.avail_out),s=i+(e.avail_out-257),o=B.dmax,l=B.wsize,u=B.whave,d=B.wnext,f=B.window,m=B.hold,p=B.bits,E=B.lencode,_=B.distcode,b=(1<<B.lenbits)-1,C=(1<<B.distbits)-1;e:do{p<15&&(m+=P[t++]<<p,p+=8,m+=P[t++]<<p,p+=8),y=E[m&b];t:for(;;){if(T=y>>>24,m>>>=T,p-=T,T=y>>>16&255,T===0)U[i++]=65535&y;else{if(!(16&T)){if(64&T){if(32&T){B.mode=16191;break e}e.msg="invalid literal/length code",B.mode=Kv;break e}y=E[(65535&y)+(m&(1<<T)-1)];continue t}for(N=65535&y,T&=15,T&&(p<T&&(m+=P[t++]<<p,p+=8),N+=m&(1<<T)-1,m>>>=T,p-=T),p<15&&(m+=P[t++]<<p,p+=8,m+=P[t++]<<p,p+=8),y=_[m&C];;){if(T=y>>>24,m>>>=T,p-=T,T=y>>>16&255,16&T){if(w=65535&y,T&=15,p<T&&(m+=P[t++]<<p,p+=8,p<T&&(m+=P[t++]<<p,p+=8)),w+=m&(1<<T)-1,w>o){e.msg="invalid distance too far back",B.mode=Kv;break e}if(m>>>=T,p-=T,T=i-a,w>T){if(T=w-T,T>u&&B.sane){e.msg="invalid distance too far back",B.mode=Kv;break e}if(O=0,L=f,d===0){if(O+=l-T,T<N){N-=T;do U[i++]=f[O++];while(--T);O=i-w,L=U}}else if(d<T){if(O+=l+d-T,T-=d,T<N){N-=T;do U[i++]=f[O++];while(--T);if(O=0,d<N){T=d,N-=T;do U[i++]=f[O++];while(--T);O=i-w,L=U}}}else if(O+=d-T,T<N){N-=T;do U[i++]=f[O++];while(--T);O=i-w,L=U}for(;N>2;)U[i++]=L[O++],U[i++]=L[O++],U[i++]=L[O++],N-=3;N&&(U[i++]=L[O++],N>1&&(U[i++]=L[O++]))}else{O=i-w;do U[i++]=U[O++],U[i++]=U[O++],U[i++]=U[O++],N-=3;while(N>2);N&&(U[i++]=U[O++],N>1&&(U[i++]=U[O++]))}break}if(64&T){e.msg="invalid distance code",B.mode=Kv;break e}y=_[(65535&y)+(m&(1<<T)-1)]}}break}}while(t<r&&i<s);N=p>>3,t-=N,p-=N<<3,m&=(1<<p)-1,e.next_in=t,e.next_out=i,e.avail_in=t<r?r-t+5:5-(t-r),e.avail_out=i<s?s-i+257:257-(i-s),B.hold=m,B.bits=p};const Wv=15,cP=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),dP=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),hP=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),fP=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var nf=(e,n,t,r,i,a,s,o)=>{const l=o.bits;let u,d,f,m,p,E,_=0,b=0,C=0,y=0,T=0,N=0,w=0,O=0,L=0,P=0,U=null;const B=new Uint16Array(16),F=new Uint16Array(16);let H,G,j,x=null;for(_=0;_<=Wv;_++)B[_]=0;for(b=0;b<r;b++)B[n[t+b]]++;for(T=l,y=Wv;y>=1&&B[y]===0;y--);if(T>y&&(T=y),y===0)return i[a++]=20971520,i[a++]=20971520,o.bits=1,0;for(C=1;C<y&&B[C]===0;C++);for(T<C&&(T=C),O=1,_=1;_<=Wv;_++)if(O<<=1,O-=B[_],O<0)return-1;if(O>0&&(e===0||y!==1))return-1;for(F[1]=0,_=1;_<Wv;_++)F[_+1]=F[_]+B[_];for(b=0;b<r;b++)n[t+b]!==0&&(s[F[n[t+b]]++]=b);if(e===0?(U=x=s,E=20):e===1?(U=cP,x=dP,E=257):(U=hP,x=fP,E=0),P=0,b=0,_=C,p=a,N=T,w=0,f=-1,L=1<<T,m=L-1,e===1&&L>852||e===2&&L>592)return 1;for(;;){H=_-w,s[b]+1<E?(G=0,j=s[b]):s[b]>=E?(G=x[s[b]-E],j=U[s[b]-E]):(G=96,j=0),u=1<<_-w,d=1<<N,C=d;do d-=u,i[p+(P>>w)+d]=H<<24|G<<16|j;while(d!==0);for(u=1<<_-1;P&u;)u>>=1;if(u!==0?(P&=u-1,P+=u):P=0,b++,--B[_]==0){if(_===y)break;_=n[t+s[b]]}if(_>T&&(P&m)!==f){for(w===0&&(w=T),p+=C,N=_-w,O=1<<N;N+w<y&&(O-=B[N+w],!(O<=0));)N++,O<<=1;if(L+=1<<N,e===1&&L>852||e===2&&L>592)return 1;f=P&m,i[f]=T<<24|N<<16|p-a}}return P!==0&&(i[p+P]=_-w<<24|64<<16),o.bits=T,0};const{Z_FINISH:qT,Z_BLOCK:vP,Z_TREES:Qv,Z_OK:Ru,Z_STREAM_END:mP,Z_NEED_DICT:pP,Z_STREAM_ERROR:Ja,Z_DATA_ERROR:KT,Z_MEM_ERROR:WT,Z_BUF_ERROR:gP,Z_DEFLATED:QT}=oc,Op=16180,Yv=16190,Co=16191,e_=16192,t_=16194,Xv=16199,Zv=16200,n_=16206,Tr=16209,YT=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function _P(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Bu=e=>{if(!e)return 1;const n=e.state;return!n||n.strm!==e||n.mode<Op||n.mode>16211?1:0},b2=e=>{if(Bu(e))return Ja;const n=e.state;return e.total_in=e.total_out=n.total=0,e.msg="",n.wrap&&(e.adler=1&n.wrap),n.mode=Op,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(852),n.distcode=n.distdyn=new Int32Array(592),n.sane=1,n.back=-1,Ru},C2=e=>{if(Bu(e))return Ja;const n=e.state;return n.wsize=0,n.whave=0,n.wnext=0,b2(e)},S2=(e,n)=>{let t;if(Bu(e))return Ja;const r=e.state;return n<0?(t=0,n=-n):(t=5+(n>>4),n<48&&(n&=15)),n&&(n<8||n>15)?Ja:(r.window!==null&&r.wbits!==n&&(r.window=null),r.wrap=t,r.wbits=n,C2(e))},XT=(e,n)=>{if(!e)return Ja;const t=new _P;e.state=t,t.strm=e,t.window=null,t.mode=Op;const r=S2(e,n);return r!==Ru&&(e.state=null),r};let r_,i_,ZT=!0;const EP=e=>{if(ZT){r_=new Int32Array(512),i_=new Int32Array(32);let n=0;for(;n<144;)e.lens[n++]=8;for(;n<256;)e.lens[n++]=9;for(;n<280;)e.lens[n++]=7;for(;n<288;)e.lens[n++]=8;for(nf(1,e.lens,0,288,r_,0,e.work,{bits:9}),n=0;n<32;)e.lens[n++]=5;nf(2,e.lens,0,32,i_,0,e.work,{bits:5}),ZT=!1}e.lencode=r_,e.lenbits=9,e.distcode=i_,e.distbits=5},JT=(e,n,t,r)=>{let i;const a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(n.subarray(t-a.wsize,t),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(n.subarray(t-r,t-r+i),a.wnext),(r-=i)?(a.window.set(n.subarray(t-r,t),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0};var Ao={inflateReset:C2,inflateReset2:S2,inflateResetKeep:b2,inflateInit:e=>XT(e,15),inflateInit2:XT,inflate:(e,n)=>{let t,r,i,a,s,o,l,u,d,f,m,p,E,_,b,C,y,T,N,w,O,L,P=0;const U=new Uint8Array(4);let B,F;const H=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Bu(e)||!e.output||!e.input&&e.avail_in!==0)return Ja;t=e.state,t.mode===Co&&(t.mode=e_),s=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,r=e.input,o=e.avail_in,u=t.hold,d=t.bits,f=o,m=l,L=Ru;e:for(;;)switch(t.mode){case Op:if(t.wrap===0){t.mode=e_;break}for(;d<16;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(2&t.wrap&&u===35615){t.wbits===0&&(t.wbits=15),t.check=0,U[0]=255&u,U[1]=u>>>8&255,t.check=di(t.check,U,2,0),u=0,d=0,t.mode=16181;break}if(t.head&&(t.head.done=!1),!(1&t.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",t.mode=Tr;break}if((15&u)!==QT){e.msg="unknown compression method",t.mode=Tr;break}if(u>>>=4,d-=4,O=8+(15&u),t.wbits===0&&(t.wbits=O),O>15||O>t.wbits){e.msg="invalid window size",t.mode=Tr;break}t.dmax=1<<t.wbits,t.flags=0,e.adler=t.check=1,t.mode=512&u?16189:Co,u=0,d=0;break;case 16181:for(;d<16;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(t.flags=u,(255&t.flags)!==QT){e.msg="unknown compression method",t.mode=Tr;break}if(57344&t.flags){e.msg="unknown header flags set",t.mode=Tr;break}t.head&&(t.head.text=u>>8&1),512&t.flags&&4&t.wrap&&(U[0]=255&u,U[1]=u>>>8&255,t.check=di(t.check,U,2,0)),u=0,d=0,t.mode=16182;case 16182:for(;d<32;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}t.head&&(t.head.time=u),512&t.flags&&4&t.wrap&&(U[0]=255&u,U[1]=u>>>8&255,U[2]=u>>>16&255,U[3]=u>>>24&255,t.check=di(t.check,U,4,0)),u=0,d=0,t.mode=16183;case 16183:for(;d<16;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}t.head&&(t.head.xflags=255&u,t.head.os=u>>8),512&t.flags&&4&t.wrap&&(U[0]=255&u,U[1]=u>>>8&255,t.check=di(t.check,U,2,0)),u=0,d=0,t.mode=16184;case 16184:if(1024&t.flags){for(;d<16;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}t.length=u,t.head&&(t.head.extra_len=u),512&t.flags&&4&t.wrap&&(U[0]=255&u,U[1]=u>>>8&255,t.check=di(t.check,U,2,0)),u=0,d=0}else t.head&&(t.head.extra=null);t.mode=16185;case 16185:if(1024&t.flags&&(p=t.length,p>o&&(p=o),p&&(t.head&&(O=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(a,a+p),O)),512&t.flags&&4&t.wrap&&(t.check=di(t.check,r,p,a)),o-=p,a+=p,t.length-=p),t.length))break e;t.length=0,t.mode=16186;case 16186:if(2048&t.flags){if(o===0)break e;p=0;do O=r[a+p++],t.head&&O&&t.length<65536&&(t.head.name+=String.fromCharCode(O));while(O&&p<o);if(512&t.flags&&4&t.wrap&&(t.check=di(t.check,r,p,a)),o-=p,a+=p,O)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=16187;case 16187:if(4096&t.flags){if(o===0)break e;p=0;do O=r[a+p++],t.head&&O&&t.length<65536&&(t.head.comment+=String.fromCharCode(O));while(O&&p<o);if(512&t.flags&&4&t.wrap&&(t.check=di(t.check,r,p,a)),o-=p,a+=p,O)break e}else t.head&&(t.head.comment=null);t.mode=16188;case 16188:if(512&t.flags){for(;d<16;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(4&t.wrap&&u!==(65535&t.check)){e.msg="header crc mismatch",t.mode=Tr;break}u=0,d=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=Co;break;case 16189:for(;d<32;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}e.adler=t.check=YT(u),u=0,d=0,t.mode=Yv;case Yv:if(t.havedict===0)return e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,t.hold=u,t.bits=d,pP;e.adler=t.check=1,t.mode=Co;case Co:if(n===vP||n===Qv)break e;case e_:if(t.last){u>>>=7&d,d-=7&d,t.mode=n_;break}for(;d<3;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}switch(t.last=1&u,u>>>=1,d-=1,3&u){case 0:t.mode=16193;break;case 1:if(EP(t),t.mode=Xv,n===Qv){u>>>=2,d-=2;break e}break;case 2:t.mode=16196;break;case 3:e.msg="invalid block type",t.mode=Tr}u>>>=2,d-=2;break;case 16193:for(u>>>=7&d,d-=7&d;d<32;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if((65535&u)!=(u>>>16^65535)){e.msg="invalid stored block lengths",t.mode=Tr;break}if(t.length=65535&u,u=0,d=0,t.mode=t_,n===Qv)break e;case t_:t.mode=16195;case 16195:if(p=t.length,p){if(p>o&&(p=o),p>l&&(p=l),p===0)break e;i.set(r.subarray(a,a+p),s),o-=p,a+=p,l-=p,s+=p,t.length-=p;break}t.mode=Co;break;case 16196:for(;d<14;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(t.nlen=257+(31&u),u>>>=5,d-=5,t.ndist=1+(31&u),u>>>=5,d-=5,t.ncode=4+(15&u),u>>>=4,d-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=Tr;break}t.have=0,t.mode=16197;case 16197:for(;t.have<t.ncode;){for(;d<3;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}t.lens[H[t.have++]]=7&u,u>>>=3,d-=3}for(;t.have<19;)t.lens[H[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,B={bits:t.lenbits},L=nf(0,t.lens,0,19,t.lencode,0,t.work,B),t.lenbits=B.bits,L){e.msg="invalid code lengths set",t.mode=Tr;break}t.have=0,t.mode=16198;case 16198:for(;t.have<t.nlen+t.ndist;){for(;P=t.lencode[u&(1<<t.lenbits)-1],b=P>>>24,C=P>>>16&255,y=65535&P,!(b<=d);){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(y<16)u>>>=b,d-=b,t.lens[t.have++]=y;else{if(y===16){for(F=b+2;d<F;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(u>>>=b,d-=b,t.have===0){e.msg="invalid bit length repeat",t.mode=Tr;break}O=t.lens[t.have-1],p=3+(3&u),u>>>=2,d-=2}else if(y===17){for(F=b+3;d<F;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}u>>>=b,d-=b,O=0,p=3+(7&u),u>>>=3,d-=3}else{for(F=b+7;d<F;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}u>>>=b,d-=b,O=0,p=11+(127&u),u>>>=7,d-=7}if(t.have+p>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=Tr;break}for(;p--;)t.lens[t.have++]=O}}if(t.mode===Tr)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=Tr;break}if(t.lenbits=9,B={bits:t.lenbits},L=nf(1,t.lens,0,t.nlen,t.lencode,0,t.work,B),t.lenbits=B.bits,L){e.msg="invalid literal/lengths set",t.mode=Tr;break}if(t.distbits=6,t.distcode=t.distdyn,B={bits:t.distbits},L=nf(2,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,B),t.distbits=B.bits,L){e.msg="invalid distances set",t.mode=Tr;break}if(t.mode=Xv,n===Qv)break e;case Xv:t.mode=Zv;case Zv:if(o>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,t.hold=u,t.bits=d,uP(e,m),s=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,r=e.input,o=e.avail_in,u=t.hold,d=t.bits,t.mode===Co&&(t.back=-1);break}for(t.back=0;P=t.lencode[u&(1<<t.lenbits)-1],b=P>>>24,C=P>>>16&255,y=65535&P,!(b<=d);){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(C&&!(240&C)){for(T=b,N=C,w=y;P=t.lencode[w+((u&(1<<T+N)-1)>>T)],b=P>>>24,C=P>>>16&255,y=65535&P,!(T+b<=d);){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}u>>>=T,d-=T,t.back+=T}if(u>>>=b,d-=b,t.back+=b,t.length=y,C===0){t.mode=16205;break}if(32&C){t.back=-1,t.mode=Co;break}if(64&C){e.msg="invalid literal/length code",t.mode=Tr;break}t.extra=15&C,t.mode=16201;case 16201:if(t.extra){for(F=t.extra;d<F;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}t.length+=u&(1<<t.extra)-1,u>>>=t.extra,d-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=16202;case 16202:for(;P=t.distcode[u&(1<<t.distbits)-1],b=P>>>24,C=P>>>16&255,y=65535&P,!(b<=d);){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(!(240&C)){for(T=b,N=C,w=y;P=t.distcode[w+((u&(1<<T+N)-1)>>T)],b=P>>>24,C=P>>>16&255,y=65535&P,!(T+b<=d);){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}u>>>=T,d-=T,t.back+=T}if(u>>>=b,d-=b,t.back+=b,64&C){e.msg="invalid distance code",t.mode=Tr;break}t.offset=y,t.extra=15&C,t.mode=16203;case 16203:if(t.extra){for(F=t.extra;d<F;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}t.offset+=u&(1<<t.extra)-1,u>>>=t.extra,d-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=Tr;break}t.mode=16204;case 16204:if(l===0)break e;if(p=m-l,t.offset>p){if(p=t.offset-p,p>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=Tr;break}p>t.wnext?(p-=t.wnext,E=t.wsize-p):E=t.wnext-p,p>t.length&&(p=t.length),_=t.window}else _=i,E=s-t.offset,p=t.length;p>l&&(p=l),l-=p,t.length-=p;do i[s++]=_[E++];while(--p);t.length===0&&(t.mode=Zv);break;case 16205:if(l===0)break e;i[s++]=t.length,l--,t.mode=Zv;break;case n_:if(t.wrap){for(;d<32;){if(o===0)break e;o--,u|=r[a++]<<d,d+=8}if(m-=l,e.total_out+=m,t.total+=m,4&t.wrap&&m&&(e.adler=t.check=t.flags?di(t.check,i,m,s-m):Jh(t.check,i,m,s-m)),m=l,4&t.wrap&&(t.flags?u:YT(u))!==t.check){e.msg="incorrect data check",t.mode=Tr;break}u=0,d=0}t.mode=16207;case 16207:if(t.wrap&&t.flags){for(;d<32;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(4&t.wrap&&u!==(4294967295&t.total)){e.msg="incorrect length check",t.mode=Tr;break}u=0,d=0}t.mode=16208;case 16208:L=mP;break e;case Tr:L=KT;break e;case 16210:return WT;default:return Ja}return e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,t.hold=u,t.bits=d,(t.wsize||m!==e.avail_out&&t.mode<Tr&&(t.mode<n_||n!==qT))&&JT(e,e.output,e.next_out,m-e.avail_out),f-=e.avail_in,m-=e.avail_out,e.total_in+=f,e.total_out+=m,t.total+=m,4&t.wrap&&m&&(e.adler=t.check=t.flags?di(t.check,i,m,e.next_out-m):Jh(t.check,i,m,e.next_out-m)),e.data_type=t.bits+(t.last?64:0)+(t.mode===Co?128:0)+(t.mode===Xv||t.mode===t_?256:0),(f===0&&m===0||n===qT)&&L===Ru&&(L=gP),L},inflateEnd:e=>{if(Bu(e))return Ja;let n=e.state;return n.window&&(n.window=null),e.state=null,Ru},inflateGetHeader:(e,n)=>{if(Bu(e))return Ja;const t=e.state;return 2&t.wrap?(t.head=n,n.done=!1,Ru):Ja},inflateSetDictionary:(e,n)=>{const t=n.length;let r,i,a;return Bu(e)?Ja:(r=e.state,r.wrap!==0&&r.mode!==Yv?Ja:r.mode===Yv&&(i=1,i=Jh(i,n,t,0),i!==r.check)?KT:(a=JT(e,n,t,t),a?(r.mode=16210,WT):(r.havedict=1,Ru)))},inflateInfo:"pako inflate (from Nodeca project)"},yP=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const T2=Object.prototype.toString,{Z_NO_FLUSH:bP,Z_FINISH:CP,Z_OK:rf,Z_STREAM_END:a_,Z_NEED_DICT:s_,Z_STREAM_ERROR:SP,Z_DATA_ERROR:eM,Z_MEM_ERROR:TP}=oc;function af(e){this.options=p2({chunkSize:65536,windowBits:15,to:""},e||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),!(n.windowBits>=0&&n.windowBits<16)||e&&e.windowBits||(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(15&n.windowBits||(n.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new E2,this.strm.avail_out=0;let t=Ao.inflateInit2(this.strm,n.windowBits);if(t!==rf)throw new Error(Yu[t]);if(this.header=new yP,Ao.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=yb(n.dictionary):T2.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(t=Ao.inflateSetDictionary(this.strm,n.dictionary),t!==rf)))throw new Error(Yu[t])}function o_(e,n){const t=new af(n);if(t.push(e),t.err)throw t.msg||Yu[t.err];return t.result}af.prototype.push=function(e,n){const t=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,s,o;if(this.ended)return!1;for(s=n===~~n?n:n===!0?CP:bP,T2.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),a=Ao.inflate(t,s),a===s_&&i&&(a=Ao.inflateSetDictionary(t,i),a===rf?a=Ao.inflate(t,s):a===eM&&(a=s_));t.avail_in>0&&a===a_&&t.state.wrap>0&&e[t.next_in]!==0;)Ao.inflateReset(t),a=Ao.inflate(t,s);switch(a){case SP:case eM:case s_:case TP:return this.onEnd(a),this.ended=!0,!1}if(o=t.avail_out,t.next_out&&(t.avail_out===0||a===a_))if(this.options.to==="string"){let l=Jk(t.output,t.next_out),u=t.next_out-l,d=Zk(t.output,l);t.next_out=u,t.avail_out=r-u,u&&t.output.set(t.output.subarray(l,l+u),0),this.onData(d)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(a!==rf||o!==0){if(a===a_)return a=Ao.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(t.avail_in===0)break}}return!0},af.prototype.onData=function(e){this.chunks.push(e)},af.prototype.onEnd=function(e){e===rf&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=g2(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var MP={Inflate:af,inflate:o_,inflateRaw:function(e,n){return(n=n||{}).raw=!0,o_(e,n)},ungzip:o_,constants:oc};const{Deflate:NP,deflate:IP,deflateRaw:AP,gzip:wP}=lP,{Inflate:RP,inflate:OP,inflateRaw:LP,ungzip:UP}=MP;var Is,DP={Deflate:NP,deflate:IP,deflateRaw:AP,gzip:wP,Inflate:RP,inflate:OP,inflateRaw:LP,ungzip:UP,constants:oc},l_=function(e){return A(void 0,void 0,void 0,function(){var n;return I(this,function(t){return n=DP.ungzip(e),[2,String.fromCharCode.apply(null,n)]})})},it=function(e){return A(void 0,void 0,void 0,function(){var n;return I(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e()];case 1:return t.sent(),[3,3];case 2:if(!((n=t.sent())instanceof ee))throw n;return n.throwOutside(),[3,3];case 3:return[2]}})})},dr=function(e){return A(void 0,void 0,void 0,function(){return I(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e()];case 1:case 2:return n.sent(),[3,3];case 3:return[2]}})})};(function(e){e.CONNECTING="CONNECTING",e.OPEN="OPEN",e.CLOSED="CLOSED"})(Is||(Is={}));var wn,kP=function(e){function n(t,r){var i=r.sdkState,a=r.dispatcher,s=r.logger,o=e.call(this)||this;return o.lastActive=0,o._iid=t,o._sdkState=i,o._dispatcher=a,o._logger=s,o}return z(n,e),Object.defineProperty(n.prototype,"isOpen",{get:function(){return this.connectionState===Is.OPEN},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"connectionState",{get:function(){if(this._ws)switch(this._ws.readyState){case 0:return Is.CONNECTING;case 1:return Is.OPEN}return Is.CLOSED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ws",{get:function(){var t;return(t=this._ws)!==null&&t!==void 0?t:null},enumerable:!1,configurable:!0}),n.prototype._handleMessage=function(t){var r=this;t.split(`
`).forEach(function(i){if(i){var a=Yn.createFromRawMessage(r._iid,i);if(r._logger.debug("receive websocket event",a),a.code==="LOGI")r.dispatch("message",a);else if(a.code==="PONG")r.dispatch("pong");else if(a.code==="EXPR"){if(a.payload){var s=new vd(a.payload);s.expiresIn>=0&&r._dispatcher.dispatch(s)}}else a.code==="NOOP"||r.dispatch("message",a)}})},n.prototype.connect=function(t,r){return r===void 0&&(r=""),A(this,void 0,void 0,function(){var i=this;return I(this,function(a){switch(a.label){case 0:return typeof fetch=="function"?[3,2]:[4,Kh(()=>import("./__bundle-46d64517-CEQanxNy.js").then(s=>s._),[])];case 1:a.sent(),a.label=2;case 2:return dr(function(){return A(i,void 0,void 0,function(){return I(this,function(s){return fetch(this._sdkState.api.host),[2]})})}),this._ws=new WebSocket(t,encodeURIComponent(r)),this._ws.onopen=function(){i._logger.debug("websocket open"),i.dispatch("open")},this._ws.onmessage=function(s){return A(i,void 0,void 0,function(){var o,l,u,d,f,m,p,E=this;return I(this,function(_){switch(_.label){case 0:return!((p=this._sdkState.websocket)===null||p===void 0)&&p.compression?s.data instanceof Blob?((o=new FileReader).readAsArrayBuffer(s.data),o.onloadend=function(){return A(E,void 0,void 0,function(){var b,C;return I(this,function(y){switch(y.label){case 0:return y.trys.push([0,2,,3]),[4,l_(o.result)];case 1:return b=y.sent(),this._handleMessage(b),[3,3];case 2:return C=y.sent(),this.error(C),[3,3];case 3:return[2]}})})},[3,12]):[3,1]:[3,13];case 1:if(!(s.data instanceof ArrayBuffer))return[3,6];_.label=2;case 2:return _.trys.push([2,4,,5]),[4,l_(new Uint8Array(s.data))];case 3:return f=_.sent(),this._handleMessage(f),[3,5];case 4:return l=_.sent(),this.error(l),[3,5];case 5:return[3,12];case 6:if(!(typeof Buffer<"u"&&s.data instanceof Buffer))return[3,11];_.label=7;case 7:return _.trys.push([7,9,,10]),u=s.data,d=u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength),[4,l_(d)];case 8:return f=_.sent(),this._handleMessage(f),[3,10];case 9:return m=_.sent(),this.error(m),[3,10];case 10:return[3,12];case 11:typeof s.data=="string"&&this._handleMessage(s.data),_.label=12;case 12:return[3,14];case 13:this._handleMessage(s.data),_.label=14;case 14:return[2]}})})},this._ws.onerror=function(){i._logger.debug("websocket error"),i.dispatch("error",ee.networkError)},this._ws.onclose=function(s){i._logger.debug("websocket close",s.code,s.reason),i.cleanUpWebSocket(),i.dispatch("close")},this.lastActive=Date.now(),[2]}})})},n.prototype.cleanUpWebSocket=function(){this._ws&&(this._ws.onopen=Bt,this._ws.onmessage=Bt,this._ws.onerror=Bt,this._ws.onclose=Bt,this.connectionState===Is.OPEN&&this._ws.close(1e3,"Normal Closure"),this._ws=void 0)},n.prototype.disconnect=function(){var t=this;return new Promise(function(r){if(t._ws){if(t.connectionState===Is.CLOSED)return t.cleanUpWebSocket(),void r();t._ws.onclose=function(){t.cleanUpWebSocket(),t.dispatch("close"),r()},t._ws.close()}else r()})},n.prototype.send=function(t){if(!this._ws)throw ee.connectionClosed;t.code!=="PING"?this.dispatch("ping-refresh"):this._logger.debug("send ping",t),this._ws.send(t.convertToMessage())},n.prototype.error=function(t){this._logger.debug("websocket error",t),this.dispatch("error",t)},n}(ac),M2=function(e){function n(t){var r=t.all,i=t.feed,a=t.custom_types,s=t.ts,o=e.call(this)||this;return o.all=r,o.feed=i,o.customTypes=a,o.ts=s,o}return z(n,e),n}(qn),PP=function(){function e(n,t){var r=t.session,i=t.sdkState,a=t.dispatcher,s=t.logger,o=t.useFetchCompat,l=o!==void 0&&o,u=this;this._ackStateMap=new Map,this._sdkState=i,this._dispatcher=a,this._logger=s,this.apiClient=new Lk(n,{session:r,sdkState:i,dispatcher:a,logger:s,useFetchCompat:l}),this.websocketClient=new kP(n,{sdkState:i,dispatcher:a,logger:s}),this.websocketClient.on("message",function(d){if(d.payload.unread_cnt&&u._dispatcher.dispatch(new M2(d.payload.unread_cnt)),d.requestId){if(u._ackStateMap.has(d.requestId)){var f=u._ackStateMap.get(d.requestId);d.code!=="EROR"?f.resolve(d):f.reject(new ee({code:d.payload.code,message:d.payload.message}))}}else u._dispatcher.dispatch(d)}).on("close",function(){u._ackStateMap.forEach(function(d){d.reject(ee.connectionClosed)}),u._ackStateMap.clear()})}return e.prototype._sendApiRequest=function(n){return A(this,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return[4,this.apiClient.send(n)];case 1:return[2,t.sent()]}})})},e.prototype._sendWebsocketRequest=function(n){return A(this,void 0,void 0,function(){var t,r,i,a=this;return I(this,function(s){if(!this._sdkState.websocket)throw ee.connectionRequired;if(t=new zi,n.ackRequired){i=function(o,l){a._ackStateMap.has(n.requestId)&&(a._ackStateMap.delete(n.requestId),r&&(clearTimeout(r),r=null),o?(a._logger.debug("fail websocket request",n.requestId,o),t.reject(o)):(a._logger.debug("receive websocket ack",n.requestId,n),a._logger.debug("receive websocket ack",l),t.resolve(l)))};try{r=setTimeout(function(){return i(ee.noAckTimeout)},this._sdkState.websocket.responseTimeout),this._ackStateMap.set(n.requestId,{resolve:function(o){return i(void 0,o)},reject:function(o){return i(o)}}),this.websocketClient.send(n)}catch(o){i(o)}}else try{this.websocketClient.send(n),t.resolve()}catch(o){t.reject(o)}return[2,t.promise]})})},e.prototype.send=function(n){return A(this,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return n instanceof we?[4,this._sendApiRequest(n)]:[3,2];case 1:case 3:return[2,t.sent()];case 2:return n instanceof pi?[4,this._sendWebsocketRequest(n)]:[3,4];case 4:throw ee.invalidParameters}})})},e.prototype.cancel=function(n){this.apiClient.cancel(n)},e.prototype.cancelAll=function(){this.apiClient.cancelAll()},e}();(function(e){e[e.NONE=0]="NONE",e[e.INITIALIZED=1]="INITIALIZED",e[e.CONNECTING=2]="CONNECTING",e[e.CONNECTED=3]="CONNECTED",e[e.RECONNECTING=4]="RECONNECTING",e[e.INTERNAL_DISCONNECTED=5]="INTERNAL_DISCONNECTED",e[e.EXTERNAL_DISCONNECTED=6]="EXTERNAL_DISCONNECTED",e[e.LOGOUT=7]="LOGOUT"})(wn||(wn={}));var Hu,Gu,Ea=function(e){function n(t){var r=t.stateType,i=e.call(this)||this;return i.stateType=r,i}return z(n,e),n}(qn),N2=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return z(n,e),n}(qn),cE=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return z(n,e),n}(qn),I2=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return z(n,e),n}(qn),tM=function(){function e(n){var t,r,i,a;this.isEnabled=(t=n.enabled)!==null&&t!==void 0&&t,this.feedChannels=(r=n.feed_channels)!==null&&r!==void 0?r:{},this.templateListToken=(i=n.template_list_token)!==null&&i!==void 0?i:null,this.settingsUpdatedAt=(a=n.settings_updated_at)!==null&&a!==void 0?a:0}return e.payloadify=function(n){return Qe(vt({enabled:n.isEnabled,feed_channels:n.feedChannels,template_list_token:n.templateListToken,settings_updated_at:n.settingsUpdatedAt}))},e}(),bb=function(e){return"sendbird@".concat(e,"/changelog_include_chat_notifications")},nM=function(){function e(n){var t;this.lastUpdatedAt=(t=n.last_updated_at)!==null&&t!==void 0?t:0}return e.payloadify=function(n){return Qe(vt({last_updated_at:n.lastUpdatedAt}))},e}(),rM=function(){function e(n){var t;this.token=(t=n.template_list_token)!==null&&t!==void 0?t:""}return e.payloadify=function(n){return Qe(vt({template_list_token:n.token}))},e}(),Jv=function(){function e(n){n===void 0&&(n={min_stat_count:100,min_interval:10800,max_stat_count_per_request:1e3,lower_threshold:10,request_delay_range:180}),this.minStatCount=n.min_stat_count,this.minInterval=1e3*n.min_interval,this.maxStatCountPerRequest=n.max_stat_count_per_request,this.lowerThreshold=n.lower_threshold,this.requestDelayRange=1e3*n.request_delay_range}return e.payloadify=function(n){return Qe(vt({min_stat_count:n.minStatCount,min_interval:n.minInterval/1e3,max_stat_count_per_request:n.maxStatCountPerRequest,lower_threshold:n.lowerThreshold,request_delay_range:n.requestDelayRange/1e3}))},e}(),u_=function(){function e(n){n===void 0&&(n={default:{min_stat_count:100,min_interval:10800,max_stat_count_per_request:1e3,lower_threshold:10,request_delay_range:180}}),this.default=new Jv(n.default),this.realTime=new Jv(n.realtime)}return e.payloadify=function(n){return Qe(vt({default:Jv.payloadify(n.default),realtime:Jv.payloadify(n.realTime)}))},e}(),iM=1048576,xP=5;(function(e){e[e.NONE=0]="NONE",e[e.INCLUDE_REPLY=1]="INCLUDE_REPLY",e[e.EXCLUDE_REPLY=2]="EXCLUDE_REPLY",e[e.INCLUDE_REPLY_TO_CHANNEL=3]="INCLUDE_REPLY_TO_CHANNEL"})(Hu||(Hu={})),function(e){e[e.NONE=0]="NONE",e[e.INCLUDE_REPLY=1]="INCLUDE_REPLY",e[e.EXCLUDE_REPLY=2]="EXCLUDE_REPLY",e[e.INCLUDE_REPLY_TO_CHANNEL=3]="INCLUDE_REPLY_TO_CHANNEL"}(Gu||(Gu={}));var aM=function(){function e(n){var t,r,i,a,s,o,l,u,d;n===void 0&&(n={}),this.emojiHash=n.emoji_hash||"",this.uploadSizeLimit=n.file_upload_size_limit?n.file_upload_size_limit*iM:Number.MAX_SAFE_INTEGER,this.useReaction=!!n.use_reaction,this.applicationAttributes=(t=n.application_attributes)!==null&&t!==void 0?t:[],this.premiumFeatureList=(r=n.premium_feature_list)!==null&&r!==void 0?r:[],this.deviceTokenCache=this.applicationAttributes.includes("sdk_device_token_cache"),this.enabledChannelMemberShipHistory=this.applicationAttributes.includes("channel_membership_history"),this.multipleFilesMessageFileCountLimit=(i=n.multiple_file_send_max_size)!==null&&i!==void 0?i:5,this.allowSdkStatsUpload=(a=n.allow_sdk_log_ingestion)===null||a===void 0||a,this.unreadCountThreadingPolicy=(s=n.unread_cnt_threading_policy)!==null&&s!==void 0?s:Hu.NONE,this.lastMessageThreadingPolicy=(o=n.last_msg_threading_policy)!==null&&o!==void 0?o:Gu.NONE,this.uikitConfigInfo=new nM((l=n.uikit_config)!==null&&l!==void 0?l:{}),this.notificationInfo=n.notifications?new tM(n.notifications):null,this.messageTemplateInfo=n.message_template?new rM(n.message_template):null,this.statConfigInfo=n.log_publish_config?new u_(n.log_publish_config):new u_,this.disableSuperGroupMack=(u=n.disable_supergroup_mack)!==null&&u!==void 0&&u,this.configSyncNeeded=(d=n.config_sync_needed)!==null&&d!==void 0&&d}return e.payloadify=function(n){return Qe(vt({emoji_hash:n.emojiHash,file_upload_size_limit:n.uploadSizeLimit/iM,application_attributes:n.applicationAttributes,premium_feature_list:n.premiumFeatureList,use_reaction:n.useReaction,allow_sdk_log_ingestion:n.allowSdkStatsUpload,unread_cnt_threading_policy:n.unreadCountThreadingPolicy,last_msg_threading_policy:n.lastMessageThreadingPolicy,uikit_config:n.uikitConfigInfo?nM.payloadify(n.uikitConfigInfo):null,notifications:n.notificationInfo?tM.payloadify(n.notificationInfo):null,message_template:n.messageTemplateInfo?rM.payloadify(n.messageTemplateInfo):null,log_publish_config:n.statConfigInfo?u_.payloadify(n.statConfigInfo):null,disable_supergroup_mack:n.disableSuperGroupMack,config_sync_needed:n.configSyncNeeded}))},e}(),Xm=function(e){return"sendbird@".concat(e,"/app_configs_info")},Rr=function(){function e(n){this._iid="",this._iid=n}return e.payloadify=function(n){return{}},e}(),FP=function(e){function n(t){var r=t.userId,i=t.metadata,a=e.call(this)||this;return a.method=Ie.POST,a.path="".concat(Tn,"/").concat(r,"/metadata"),a.params={metadata:i},a}return z(n,e),n}(we),BP=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.metaData=r,i}return z(n,e),n}(Pe),HP=function(e){function n(t){var r=t.userId,i=t.metadata,a=t.upsert,s=e.call(this)||this;return s.method=Ie.PUT,s.path="".concat(Tn,"/").concat(r,"/metadata"),s.params={metadata:i,upsert:a},s}return z(n,e),n}(we),GP=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.metadata=r,i}return z(n,e),n}(Pe),zP=function(e){function n(t){var r=t.userId,i=t.metadataKey,a=e.call(this)||this;return a.method=Ie.DELETE,a.path="".concat(Tn,"/").concat(r,"/metadata/").concat(i),a}return z(n,e),n}(we);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}z(n,e)})(Pe);var jP=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=Ie.DELETE,i.path="".concat(Tn,"/").concat(r,"/metadata"),i}return z(n,e),n}(we);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}z(n,e)})(Pe);var sd,Ad=function(e,n){var t=JSON.parse(JSON.stringify(e));return t._iid&&delete t._iid,n&&n(t),t},ko=function(e,n){var t=JSON.parse(JSON.stringify(e));return t},Oe=function(e){return{do:function(n){e||n()},throw:function(n){if(!e)throw n}}};(function(e){e.ONLINE="online",e.OFFLINE="offline",e.NON_AVAILABLE="nonavailable"})(sd||(sd={}));var md,Yt=function(e){function n(t,r){var i,a,s,o,l,u,d,f,m,p,E,_,b,C=this;return(C=e.call(this,t)||this).userId=(a=(i=r.guest_id)!==null&&i!==void 0?i:r.user_id)!==null&&a!==void 0?a:"",C.nickname=(o=(s=r.nickname)!==null&&s!==void 0?s:r.name)!==null&&o!==void 0?o:"",C.plainProfileUrl=(u=(l=r.profile_url)!==null&&l!==void 0?l:r.image)!==null&&u!==void 0?u:"",C.requireAuth=(d=r.require_auth_for_profile_image)!==null&&d!==void 0&&d,C.metaData=(f=r.metadata)!==null&&f!==void 0?f:{},C.connectionStatus=sd.NON_AVAILABLE,Wt(sd,r.is_online)?C.connectionStatus=r.is_online:Z("boolean",r.is_online)&&(C.connectionStatus=r.is_online?sd.ONLINE:sd.OFFLINE),C.isActive=(m=r.is_active)===null||m===void 0||m,C.lastSeenAt=(p=r.last_seen_at)!==null&&p!==void 0?p:null,C.preferredLanguages=r.preferred_languages?Nt([],ut(r.preferred_languages),!1):null,C.friendDiscoveryKey=(E=r.friend_discovery_key)!==null&&E!==void 0?E:null,C.friendName=(_=r.friend_name)!==null&&_!==void 0?_:null,C._hashValue=C._generateHashValue(),C._updatedAt=(b=r.updatedat)!==null&&b!==void 0?b:0,C}return z(n,e),n.payloadify=function(t){return Qe(vt(Y(Y({},e.payloadify.call(this,t)),{user_id:t.userId,nickname:t.nickname,profile_url:t.plainProfileUrl,require_auth_for_profile_image:t.requireAuth,metadata:t.metaData,is_online:t.connectionStatus,is_active:t.isActive,last_seen_at:t.lastSeenAt,preferred_languages:t.preferredLanguages,friend_discovery_key:t.friendDiscoveryKey,friend_name:t.friendName})))},n._buildUserFromSerializedData=function(t){var r=ko(t);return new n(r._iid,n.payloadify(r))},n.prototype._generateHashValue=function(){for(var t,r=JSON.stringify({userId:this.userId,nickname:this.nickname,plainProfileUrl:this.plainProfileUrl,friendDiscoveryKey:this.friendDiscoveryKey,friendName:this.friendName,metaData:JSON.stringify(this.metaData),performanceLanguages:(t=this.preferredLanguages)===null||t===void 0?void 0:t.toString(),requireAuth:this.requireAuth}),i=0,a=0;a<r.length;a++)i=(i<<5)-i+r.charCodeAt(a),i|=0;return i},Object.defineProperty(n.prototype,"profileUrl",{get:function(){var t=X.of(this._iid).sessionManager;return this.requireAuth&&t.ekey?"".concat(this.plainProfileUrl,"?auth=").concat(t.ekey):this.plainProfileUrl},enumerable:!1,configurable:!0}),n.prototype.serialize=function(){return Ad(this)},n.prototype._isValidMetaData=function(t){return!Array.isArray(t)&&Object.keys(t).length>0&&Object.keys(t).map(function(r){return t[r]}).every(function(r){return Z("string",r)})},n.prototype._applyMetaData=function(t,r){var i=this;r===void 0&&(r=!1),Object.keys(t).forEach(function(a){r?delete i.metaData[a]:i.metaData[a]=t[a]})},n.prototype.createMetaData=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l;return I(this,function(u){switch(u.label){case 0:return Oe(this._isValidMetaData(t)).throw(ee.invalidParameters),r=X.of(this._iid),i=r.sdkState,a=r.requestQueue,s=new FP({userId:i.userId,metadata:t}),[4,a.send(s)];case 1:return o=u.sent(),l=o.as(BP).metaData,this._applyMetaData(l),[2,this.metaData]}})})},n.prototype.updateMetaData=function(t,r){return r===void 0&&(r=!1),A(this,void 0,void 0,function(){var i,a,s,o,l,u;return I(this,function(d){switch(d.label){case 0:return Oe(this._isValidMetaData(t)).throw(ee.invalidParameters),i=X.of(this._iid),a=i.sdkState,s=i.requestQueue,o=new HP({userId:a.userId,metadata:t,upsert:r}),[4,s.send(o)];case 1:return l=d.sent(),u=l.as(GP).metadata,this._applyMetaData(u),[2,this.metaData]}})})},n.prototype.deleteMetaData=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o;return I(this,function(l){switch(l.label){case 0:return Oe(Z("string",t)).throw(ee.invalidParameters),r=X.of(this._iid),i=r.sdkState,a=r.requestQueue,s=new zP({userId:i.userId,metadataKey:t}),[4,a.send(s)];case 1:return l.sent(),this._applyMetaData(((o={})[t]=!0,o),!0),[2,this.metaData]}})})},n.prototype.deleteAllMetaData=function(){return A(this,void 0,void 0,function(){var t,r,i,a;return I(this,function(s){switch(s.label){case 0:return t=X.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new jP({userId:r.userId}),[4,i.send(a)];case 1:return s.sent(),this.metaData={},[2]}})})},n}(Rr),A2=function(e){function n(t){var r=t.userProfile,i=e.call(this)||this;return i.userProfile=r,i}return z(n,e),n}(qn),dE=function(){function e(n,t){var r,i,a,s,o,l,u,d,f,m,p,E,_,b;this._iid=n,this.appInfo=new aM(t),this.user=new Yt(n,t),this.connectedAt=(r=t.login_ts)!==null&&r!==void 0?r:0,this.firstConnectedAt=0,this.pingInterval=(i=t.ping_interval)!==null&&i!==void 0?i:15e3,this.pongTimeout=(a=t.pong_timeout)!==null&&a!==void 0?a:5e3,this.reconnectInterval=(o=(s=t.reconnect)===null||s===void 0?void 0:s.interval)!==null&&o!==void 0?o:3e3,this.reconnectMaxInterval=(u=(l=t.reconnect)===null||l===void 0?void 0:l.max_interval)!==null&&u!==void 0?u:6e4,this.reconnectRetryCount=(f=(d=t.reconnect)===null||d===void 0?void 0:d.retry_cnt)!==null&&f!==void 0?f:5,this.reconnectIntervalMultiple=(p=(m=t.reconnect)===null||m===void 0?void 0:m.mul)!==null&&p!==void 0?p:2,this.maxUnreadCountOnSuperGroup=(E=t.max_unread_cnt_on_super_group)!==null&&E!==void 0?E:100,this.profileImageEncryption=!!t.profile_image_encryption,this.concurrentCallLimit=(_=t.concurrent_call_limit)!==null&&_!==void 0?_:5,this.backOffDelay=(b=t.back_off_delay)!==null&&b!==void 0?b:100}return e.payloadify=function(n){return Qe(vt(Y(Y(Y({},Yt.payloadify(n.user)),aM.payloadify(n.appInfo)),{login_ts:n.connectedAt,ping_interval:n.pingInterval,pong_timeout:n.pongTimeout,reconnect:{interval:n.reconnectInterval,max_interval:n.reconnectMaxInterval,retry_cnt:n.reconnectRetryCount,mul:n.reconnectIntervalMultiple},max_unread_cnt_on_super_group:n.maxUnreadCountOnSuperGroup,profile_image_encryption:n.profileImageEncryption,concurrent_call_limit:n.concurrentCallLimit,back_off_delay:n.backOffDelay})))},e.prototype.apply=function(){var n=this.reconnectInterval,t=this.reconnectMaxInterval,r=this.reconnectIntervalMultiple,i=X.of(this._iid);i.sdkState.websocket&&(i.sdkState.websocket.pingInterval=1e3*this.pingInterval,i.sdkState.websocket.pongTimeout=1e3*this.pongTimeout,i.sdkState.websocket.reconnectMaxRetry=this.reconnectRetryCount,i.sdkState.websocket.reconnectRetryStrategy={calcTimeout:function(a){return a>0?1e3*Math.min(n*Math.pow(r,a-1),t):10}}),i.appInfo=this.appInfo,i.sessionManager.currentUser=this.user,i.connectedAt=this.connectedAt,this.firstConnectedAt||(i.firstConnectedAt=this.connectedAt),i.maxSuperGroupChannelUnreadCount=this.maxUnreadCountOnSuperGroup,i.concurrentCallLimit=this.concurrentCallLimit,i.backOffDelay=this.backOffDelay,i.dispatcher.dispatch(new A2({userProfile:this}))},e}(),w2=function(e){function n(t){var r=t.request,i=r===void 0||r,a=t.features,s=a===void 0?{}:a,o=t.options,l=o===void 0?{}:o,u=t.statConfigInfo,d=e.call(this)||this;return d.request=i,d.features=Y({localCache:!0,notification:!0},s),d.options=Y({ingestion:!0},l),d.statConfigInfo=u,d}return z(n,e),n}(qn),R2=function(e){function n(t){var r=e.call(this)||this;return r.configSyncNeeded=!1,r.configSyncNeeded=t,r}return z(n,e),n}(qn),Im=function(e){function n(t,r,i){var a,s,o,l,u=this;return(u=e.call(this,t,r,i)||this).error=null,u.services=[],u.userProfile=new dE(t,i),u.deviceTokenLastDeletedAt=(a=i.device_token_last_deleted_at)!==null&&a!==void 0?a:0,u.key=(s=i.key)!==null&&s!==void 0?s:"",u.ekey=(o=i.ekey)!==null&&o!==void 0?o:"",u.error=i.error?new ee(i):null,u.services=(l=i.services)!==null&&l!==void 0?l:[],u}return z(n,e),n.asError=function(t){return new n("","LOGI",Y({user_id:"",error:!0},t))},n.prototype.applyTo=function(t){return A(this,void 0,void 0,function(){var r,i,a;return I(this,function(s){switch(s.label){case 0:return this.error?[3,4]:(r=X.of(t))?(i=r.sessionManager,a=r.dispatcher,[4,i.login(this)]):[3,2];case 1:return s.sent(),this.userProfile.apply(),a.dispatch(new R2(this.userProfile.appInfo.configSyncNeeded)),a.dispatch(new w2({request:this.userProfile.appInfo.applicationAttributes.includes("allow_sdk_request_log_publish"),features:{localCache:this.userProfile.appInfo.applicationAttributes.includes("allow_sdk_feature_local_cache_log_publish"),notification:this.userProfile.appInfo.applicationAttributes.includes("allow_sdk_noti_stats_log_publish")},options:{ingestion:this.userProfile.appInfo.allowSdkStatsUpload},statConfigInfo:this.userProfile.appInfo.statConfigInfo})),[3,3];case 2:throw ee.lostInstance;case 3:return[3,5];case 4:throw this.error;case 5:return[2]}})})},n}(Yn),lc=function(){function e(){this.type=wn.NONE,this.name="none"}return e.prototype.run=function(n){return A(this,void 0,void 0,function(){return I(this,function(t){return[2]})})},e.prototype.onConnect=function(n,t){return A(this,void 0,void 0,function(){return I(this,function(r){return[2]})})},e.prototype.onReconnect=function(n,t){return t.resetReconnectCount,A(this,void 0,void 0,function(){return I(this,function(r){return[2]})})},e.prototype.onDisconnect=function(n,t){return t.error,t.autoReconnect,t.cause,A(this,void 0,void 0,function(){return I(this,function(r){return[2]})})},e.prototype.onDisconnectWebSocket=function(n,t){return A(this,void 0,void 0,function(){return I(this,function(r){return[2]})})},e.prototype.onLogout=function(n,t){return A(this,void 0,void 0,function(){return I(this,function(r){return[2]})})},e}(),jl=function(e){function n(t){t===void 0&&(t={});var r,i=this;return(i=e.call(this)||this).type=wn.LOGOUT,i.name="logout",i._wasPreviouslyConnected=(r=t.wasPreviouslyConnected)===null||r===void 0||r,i}return z(n,e),n.prototype.run=function(t){return A(this,void 0,void 0,function(){var r,i,a=this;return I(this,function(s){switch(s.label){case 0:return r=Date.now(),i=t.sdkState.userId,[4,t.logout()];case 1:return s.sent(),[4,t.changeState(new Cb,r)];case 2:return s.sent(),this._wasPreviouslyConnected&&it(function(){return A(a,void 0,void 0,function(){return I(this,function(o){return t.connectionHandlers.forEach(function(l){l.onDisconnected&&l.onDisconnected(i)}),[2]})})}),[2]}})})},n}(lc),Lp=function(e){function n(){var t=e.call(this)||this;return t.type=wn.EXTERNAL_DISCONNECTED,t.name="externaldisconnected",t}return z(n,e),n.prototype.run=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){switch(r.label){case 0:return[4,t.disconnect()];case 1:return r.sent(),[2]}})})},n.prototype.onConnect=function(t,r){return A(this,void 0,void 0,function(){var i;return I(this,function(a){switch(a.label){case 0:return i=Date.now(),[4,t.disconnect()];case 1:return a.sent(),[4,t.changeState(new Dp({authToken:r}),i)];case 2:return a.sent(),[2]}})})},n.prototype.onReconnect=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){switch(i.label){case 0:return r=Date.now(),[4,t.changeState(new Jm,r)];case 1:return i.sent(),[2]}})})},n.prototype.onLogout=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){switch(i.label){case 0:return r=Date.now(),[4,t.changeState(new jl,r)];case 1:return i.sent(),[2]}})})},n}(lc),Zm=function(e){function n(t){var r=t.autoReconnect,i=e.call(this)||this;return i.type=wn.INTERNAL_DISCONNECTED,i.name="internaldisconnected",i._autoReconnect=!1,i._autoReconnect=r,i}return z(n,e),n.prototype.run=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){switch(i.label){case 0:return r=Date.now(),[4,t.disconnect()];case 1:return i.sent(),this._autoReconnect?[4,t.changeState(new Jm,r)]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}})})},n.prototype.onConnect=function(t,r){return A(this,void 0,void 0,function(){var i;return I(this,function(a){switch(a.label){case 0:return i=Date.now(),[4,t.disconnect()];case 1:return a.sent(),[4,t.changeState(new Dp({authToken:r}),i)];case 2:return a.sent(),[2]}})})},n.prototype.onReconnect=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){switch(i.label){case 0:return r=Date.now(),[4,t.changeState(new Jm,r)];case 1:return i.sent(),[2]}})})},n.prototype.onDisconnectWebSocket=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){switch(i.label){case 0:return r=Date.now(),[4,t.changeState(new Lp,r)];case 1:return i.sent(),[2]}})})},n.prototype.onLogout=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){switch(i.label){case 0:return r=Date.now(),[4,t.changeState(new jl,r)];case 1:return i.sent(),[2]}})})},n}(lc),Zi=function(e){return A(void 0,void 0,void 0,function(){return I(this,function(n){return[2,new Promise(function(t){return setTimeout(t,e)})]})})},O2=function(){function e(){}return e.prototype.calcTimeout=function(){return 0},e}(),Up=function(e,n,t){return t===void 0&&(t=new O2),A(void 0,void 0,void 0,function(){var r,i,a,s,o,l;return I(this,function(u){switch(u.label){case 0:r=0,i=null,a=function(d){return i=d??new Error("Halted")},s=function(){r=0},u.label=1;case 1:if(!(n===-1||r<n))return[3,9];u.label=2;case 2:return u.trys.push([2,4,,8]),[4,e(a,s)];case 3:if(o=u.sent(),i)throw i;return[2,o];case 4:if(l=u.sent(),i)return[3,6];if(++r===n)throw l;return[4,Zi(t.calcTimeout(r))];case 5:return u.sent(),[3,7];case 6:throw i;case 7:return[3,8];case 8:return[3,1];case 9:throw"It should not happen."}})})},Jm=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=wn.RECONNECTING,t.name="reconnecting",t._callbacks=[],t}return z(n,e),n.prototype._halt=function(t){this._haltConnect&&(this._haltConnect(t),this._haltConnect=void 0)},n.prototype._flushCallbacks=function(t){this._haltConnect=void 0,this._resetConnect=void 0,this._callbacks.forEach(function(r){return r(t)})},n.prototype.run=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u=this;return I(this,function(d){switch(d.label){case 0:r=Date.now(),i=new zi,this._callbacks.push(function(f){return f?i.reject(f):i.resolve()}),it(function(){return A(u,void 0,void 0,function(){return I(this,function(f){return t.connectionHandlers.forEach(function(m){m.onReconnectStarted&&m.onReconnectStarted()}),[2]})})}),d.label=1;case 1:return d.trys.push([1,4,,9]),a=t.sdkState.websocket,s=a.reconnectMaxRetry,o=a.reconnectRetryStrategy,[4,Up(function(f,m){return A(u,void 0,void 0,function(){var p;return I(this,function(E){switch(E.label){case 0:this._haltConnect=f,this._resetConnect=m,E.label=1;case 1:return E.trys.push([1,3,,4]),[4,t.connect()];case 2:return E.sent(),[3,4];case 3:if(p=E.sent(),t.clearLoginTimer(),p instanceof ee){if(p.code===lt.CONNECTION_CANCELED)return f(p),[2];if(p.isSessionExpiredError||p.isSessionInvalidatedError)return f(p),[2]}throw p;case 4:return[2]}})})},s,o)];case 2:return d.sent(),[4,t.changeState(new L2,r)];case 3:return d.sent(),this._flushCallbacks(),it(function(){return A(u,void 0,void 0,function(){return I(this,function(f){return t.connectionHandlers.forEach(function(m){m.onReconnectSucceeded&&m.onReconnectSucceeded()}),[2]})})}),[3,9];case 4:return l=d.sent(),Ai(l)?[3,7]:l instanceof ee?l.code===lt.CONNECTION_CANCELED?[3,6]:[4,t.changeState(new Zm({autoReconnect:!1}),r)]:[3,6];case 5:d.sent(),d.label=6;case 6:return this._flushCallbacks(l),it(function(){return A(u,void 0,void 0,function(){return I(this,function(f){return t.connectionHandlers.forEach(function(m){m.onReconnectFailed&&m.onReconnectFailed()}),[2]})})}),[3,8];case 7:throw l;case 8:return[3,9];case 9:return[2,i.promise]}})})},n.prototype.onConnect=function(t,r){return A(this,void 0,void 0,function(){var i;return I(this,function(a){return i=new zi,this._halt(ee.connectionCanceled),t.cancelConnectForRetry(),this._callbacks.push(function(){var s=Date.now();t.changeState(new Dp({authToken:r}),s).then(function(){i.resolve()}).catch(function(o){i.reject(o)})}),[2,i.promise]})})},n.prototype.onReconnect=function(t,r){var i=r.resetReconnectCount,a=i!==void 0&&i;return A(this,void 0,void 0,function(){var s;return I(this,function(o){return s=new zi,this._resetConnect&&a&&this._resetConnect(),this._callbacks.push(function(l){return l?s.reject(l):s.resolve()}),[2,s.promise]})})},n.prototype.onDisconnect=function(t,r){r._error;var i=r.autoReconnect,a=i===void 0||i;return A(this,void 0,void 0,function(){var s;return I(this,function(o){switch(o.label){case 0:return s=Date.now(),this._halt(ee.connectionCanceled),[4,t.changeState(new Zm({autoReconnect:a}),s)];case 1:return o.sent(),[2]}})})},n.prototype.onDisconnectWebSocket=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){switch(i.label){case 0:return r=Date.now(),this._halt(ee.connectionCanceled),[4,t.changeState(new Lp,r)];case 1:return i.sent(),[2]}})})},n.prototype.onLogout=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){switch(i.label){case 0:return r=Date.now(),this._halt(ee.connectionCanceled),[4,t.changeState(new jl,r)];case 1:return i.sent(),[2]}})})},n}(lc),L2=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=wn.CONNECTED,t.name="connected",t}return z(n,e),n.prototype.onReconnect=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){switch(i.label){case 0:return r=Date.now(),[4,t.disconnect()];case 1:return i.sent(),[4,t.changeState(new Jm,r)];case 2:return i.sent(),[2]}})})},n.prototype.onDisconnect=function(t,r){var i=r.autoReconnect;return A(this,void 0,void 0,function(){var a;return I(this,function(s){switch(s.label){case 0:return a=Date.now(),[4,t.changeState(new Zm({autoReconnect:i}),a)];case 1:return s.sent(),[2]}})})},n.prototype.onDisconnectWebSocket=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){switch(i.label){case 0:return r=Date.now(),[4,t.changeState(new Lp,r)];case 1:return i.sent(),[2]}})})},n.prototype.onLogout=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){switch(i.label){case 0:return r=Date.now(),[4,t.changeState(new jl,r)];case 1:return i.sent(),[2]}})})},n}(lc);(function(e){e.ExternalSetBackground="ExternalSetBackground",e.ExternalDisconnectWebSocket="ExternalDisconnectWebSocket"})(md||(md={}));var VP=function(){function e(n,t){var r=t.sdkState,i=t.cacheContext,a=t.connectionHandlers,s=t.sessionManager,o=t.websocketClient,l=t.dispatcher,u=t.logger,d=t.disableWebSocketCloseEventHandling,f=d!==void 0&&d;this._disableWebSocketCloseEventHandling=!1,this._webSocketClosedCause=null,this._logger=u,this._disableWebSocketCloseEventHandling=f,this._context=new KP(n,{sdkState:r,cacheContext:i,connectionHandlers:a,sessionManager:s,websocketClient:o,dispatcher:l,logger:u}),this._sdkState=r,this._sessionManager=s,this._websocketClient=o}return e.prototype._registerEventDispatcher=function(){var n=this;this._disableWebSocketCloseEventHandling||(this._clearEventDispatcher(),this._sessionEventDispatcherContext=this._sessionManager.on("refresh",function(){n.isConnecting||n.isConnected||(n._logger.debug("try reconnect by session key refresh"),dr(function(){return A(n,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return[4,this.reconnect()];case 1:return t.sent(),[2]}})})}))}),this._websocketEventDispatcherContext=this._websocketClient.on("close",function(){n._sdkState.appState!=="foreground"||n._webSocketClosedCause||dr(function(){return A(n,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return this._sessionManager.isSessionKeyRefreshing?[3,2]:(this._logger.debug("try reconnect by websocket connection closed"),[4,this.reconnect()]);case 1:return t.sent(),[3,4];case 2:return[4,this.disconnectWebSocket()];case 3:t.sent(),t.label=4;case 4:return[2]}})})})}))},e.prototype._clearEventDispatcher=function(){this._sessionEventDispatcherContext&&(this._sessionEventDispatcherContext.close(),this._sessionEventDispatcherContext=void 0),this._websocketEventDispatcherContext&&(this._websocketEventDispatcherContext.close(),this._websocketEventDispatcherContext=void 0)},Object.defineProperty(e.prototype,"isConnected",{get:function(){return this._context.currentState.type===wn.CONNECTED},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isConnecting",{get:function(){var n=this._context.currentState;return n.type===wn.CONNECTING||n.type===wn.RECONNECTING},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"websocketClient",{get:function(){return this._websocketClient},enumerable:!1,configurable:!0}),e.prototype.connect=function(n){return A(this,void 0,void 0,function(){var t;return I(this,function(r){switch(r.label){case 0:return t=this._context.currentState,this._webSocketClosedCause=null,[4,t.onConnect(this._context,n)];case 1:return r.sent(),this._registerEventDispatcher(),[2]}})})},e.prototype.reconnect=function(){return A(this,void 0,void 0,function(){var n;return I(this,function(t){switch(t.label){case 0:return n=this._context.currentState,this._webSocketClosedCause=null,[4,n.onReconnect(this._context,{})];case 1:return t.sent(),[2]}})})},e.prototype.resetAndReconnect=function(){return A(this,void 0,void 0,function(){var n;return I(this,function(t){switch(t.label){case 0:return n=this._context.currentState,this._webSocketClosedCause=null,[4,n.onReconnect(this._context,{resetReconnectCount:!0})];case 1:return t.sent(),[2]}})})},e.prototype.background=function(){return A(this,void 0,void 0,function(){var n;return I(this,function(t){switch(t.label){case 0:return n=this._context.currentState,this._webSocketClosedCause=md.ExternalSetBackground,[4,n.onDisconnect(this._context,{autoReconnect:!1,cause:this._webSocketClosedCause})];case 1:return t.sent(),[2]}})})},e.prototype.disconnect=function(n){return A(this,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return[4,this._context.currentState.onDisconnect(this._context,{error:n,autoReconnect:!0,cause:this._webSocketClosedCause})];case 1:return t.sent(),[2]}})})},e.prototype.disconnectWebSocket=function(n){return n===void 0&&(n=!1),A(this,void 0,void 0,function(){var t;return I(this,function(r){switch(r.label){case 0:return t=this._context.currentState,n&&(this._webSocketClosedCause=md.ExternalDisconnectWebSocket),[4,t.onDisconnectWebSocket(this._context,{cause:this._webSocketClosedCause})];case 1:return r.sent(),[2]}})})},e.prototype.logout=function(n){return A(this,void 0,void 0,function(){var t;return I(this,function(r){switch(r.label){case 0:return t=this._context.currentState,this._clearEventDispatcher(),[4,t.onLogout(this._context,n)];case 1:return r.sent(),[2]}})})},e}(),Dp=function(e){function n(t){var r=t.authToken,i=e.call(this)||this;return i.type=wn.CONNECTING,i.name="connecting",i._authToken="",i._callbacks=[],i._authToken=r,i}return z(n,e),n.prototype._halt=function(t){this._haltConnect&&(this._haltConnect(t),this._haltConnect=void 0)},n.prototype._flushCallbacks=function(t){this._haltConnect=void 0,this._callbacks.forEach(function(r){return r(t)})},n.prototype.run=function(t){return A(this,void 0,void 0,function(){var r,i,a,s=this;return I(this,function(o){switch(o.label){case 0:r=Date.now(),i=new zi,this._callbacks.push(function(l){return l?i.reject(l):i.resolve()}),o.label=1;case 1:return o.trys.push([1,4,,10]),[4,Up(function(l){return A(s,void 0,void 0,function(){var u;return I(this,function(d){switch(d.label){case 0:this._haltConnect=l,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,t.connect(this._authToken)];case 2:return d.sent(),[3,4];case 3:if(u=d.sent(),t.clearLoginTimer(),u instanceof ee&&u.code===lt.CONNECTION_CANCELED)return l(u),[2];throw u;case 4:return[2]}})})},t.sdkState.websocket.connectMaxRetry)];case 2:return o.sent(),[4,t.changeState(new L2,r)];case 3:return o.sent(),it(function(){return A(s,void 0,void 0,function(){return I(this,function(l){return this._flushCallbacks(),t.connectionHandlers.forEach(function(u){u.onConnected&&u.onConnected(t.sdkState.userId)}),[2]})})}),[3,10];case 4:return a=o.sent(),Ai(a)?[3,8]:[4,t.disconnect()];case 5:return o.sent(),a instanceof ee?a.code===lt.CONNECTION_CANCELED?[3,7]:[4,t.changeState(new Cb,r)]:[3,7];case 6:o.sent(),o.label=7;case 7:return it(function(){return A(s,void 0,void 0,function(){return I(this,function(l){return this._flushCallbacks(a),[2]})})}),[3,9];case 8:throw a;case 9:return[3,10];case 10:return[2,i.promise]}})})},n.prototype.onConnect=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){return r=new zi,this._callbacks.push(function(a){return a?r.reject(a):r.resolve()}),[2,r.promise]})})},n.prototype.onDisconnect=function(t,r){var i=r.error,a=i===void 0?null:i,s=r.autoReconnect,o=s!==void 0&&s,l=r.cause,u=l===void 0?null:l;return A(this,void 0,void 0,function(){var d;return I(this,function(f){switch(f.label){case 0:return d=Date.now(),this._halt(a??sM(u)),t.hasSession?[4,t.changeState(new Zm({autoReconnect:o}),d)]:[3,2];case 1:return f.sent(),[3,4];case 2:return[4,t.changeState(new jl,d)];case 3:f.sent(),f.label=4;case 4:return[2]}})})},n.prototype.onDisconnectWebSocket=function(t,r){return A(this,void 0,void 0,function(){var i;return I(this,function(a){switch(a.label){case 0:return this._halt(sM((r==null?void 0:r.cause)||null)),i=Date.now(),t.hasSession?[4,t.changeState(new Lp,i)]:[3,2];case 1:return a.sent(),[3,4];case 2:return[4,t.changeState(new jl,i)];case 3:a.sent(),a.label=4;case 4:return[2]}})})},n.prototype.onLogout=function(t,r){return A(this,void 0,void 0,function(){var i;return I(this,function(a){switch(a.label){case 0:return i=Date.now(),this._halt(r??ee.connectionCanceled),[4,t.changeState(new jl,i)];case 1:return a.sent(),[2]}})})},n}(lc);function sM(e){var n=ee.connectionCanceled;if(e){var t=null;switch(e){case md.ExternalSetBackground:t="Connection has been canceled due to the application having externally moved to background while in ConnectingState.";break;case md.ExternalDisconnectWebSocket:t="Connection has been canceled because sb.disconnectWebSocket() was called while in ConnectingState."}t&&n.setDetail(t)}return n}var Ol,Cb=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=wn.INITIALIZED,t.name="initialized",t}return z(n,e),n.prototype.onConnect=function(t,r){return A(this,void 0,void 0,function(){var i;return I(this,function(a){switch(a.label){case 0:return i=Date.now(),[4,t.changeState(new Dp({authToken:r}),i)];case 1:return a.sent(),[2]}})})},n.prototype.onLogout=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){switch(i.label){case 0:return r=Date.now(),[4,t.changeState(new jl({wasPreviouslyConnected:!1}),r)];case 1:return i.sent(),[2]}})})},n}(lc),$P=function(e){function n(){return e.call(this,{code:"PING",payload:{id:Date.now(),active:1},ackRequired:!1})||this}return z(n,e),n}(pi),qP=function(){function e(n){var t=n.pingDelegate,r=n.sdkState,i=n.logger;this.pingDelegate=t,this.sdkState=r,this._logger=i}return Object.defineProperty(e.prototype,"isWaiting",{get:function(){return!!this._pingTimeoutTimer},enumerable:!1,configurable:!0}),e.prototype.ping=function(){var n,t=this;if(!this.sdkState.websocket)throw ee.connectionRequired;var r=new $P;try{var i=(n=this.sdkState.websocket.pongTimeout)!==null&&n!==void 0?n:5e3;this._pingTimeoutTimer=setTimeout(function(){t._logger.debug("pinger.ping() timeout"),t.pingDelegate.error()},i),this.pingDelegate.send(r),this._logger.debug("pinger.ping()")}catch(a){this._logger.debug("pinger.ping() error",a),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=void 0),this.pingDelegate.error()}return r},e.prototype.pong=function(){this._logger.debug("pinger.pong()"),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=void 0)},e.prototype.refreshTimer=function(){var n,t=this;if(!this.sdkState.websocket)throw ee.connectionRequired;this._logger.debug("pinger.refreshTimer()");var r=(n=this.sdkState.websocket.pingInterval)!==null&&n!==void 0?n:15e3;this.stop(),this._pingTimer=setInterval(function(){t.ping()},r)},e.prototype.start=function(){this._logger.debug("pinger.start()"),this.refreshTimer(),this.ping()},e.prototype.stop=function(){this._logger.debug("pinger.stop()"),this._pingTimer&&(clearInterval(this._pingTimer),this._pingTimer=void 0),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=void 0)},e}(),U2=["premium_feature_list","file_upload_size_limit","application_attributes","emoji_hash","multiple_file_send_max_size","notifications","message_template"],KP=function(e){function n(t,r){var i,a=r.sdkState,s=r.cacheContext,o=r.connectionHandlers,l=r.sessionManager,u=r.websocketClient,d=r.dispatcher,f=r.logger,m=r.entryState,p=m===void 0?new Cb:m,E=this;return(E=e.call(this)||this)._stateUpdatedAt=0,E._connectingAt=0,E._connectedAt=0,E._logiReceivedAt=0,E._connectionRequestQueue=[],E._iid=t,E.sdkState=a,E.cacheContext=s,E.connectionHandlers=o,E._sessionManager=l,E._websocketClient=u,E._dispatcher=d,E._logger=f,E._currentState=p,!((i=E.sdkState.websocket)===null||i===void 0)&&i.pingerDisabled||(E._pinger=new qP({pingDelegate:{send:function(_){return E._websocketClient.send(_)},error:function(_){return E._websocketClient.error(_)}},sdkState:E.sdkState,logger:f})),E._websocketClient.on("open",function(){E._connectedAt=Date.now(),E._tryResolveConnectionRequest()}).on("message",function(_){_.code==="LOGI"&&(E.clearLoginTimer(),E._dispatcher.dispatch(_.as(Im)))}).on("ping-refresh",function(){var _;return(_=E._pinger)===null||_===void 0?void 0:_.refreshTimer()}).on("pong",function(){var _;return(_=E._pinger)===null||_===void 0?void 0:_.pong()}).on("error",function(){var _;return(_=E._pinger)===null||_===void 0?void 0:_.stop()}).on("close",function(){E._logiProcessingTimer=setTimeout(function(){E._logiProcessingTimer=void 0,E._unresolvedLogi||E._rejectConnectionRequest(ee.networkError)},500)}),E._dispatcher.on(function(_){_ instanceof Im&&(E._unresolvedLogi=_,E._tryResolveConnectionRequest())}),E}return z(n,e),Object.defineProperty(n.prototype,"currentState",{get:function(){return this._currentState},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasSession",{get:function(){return this._sessionManager.session.hasSession},enumerable:!1,configurable:!0}),n.prototype.changeState=function(t,r){return A(this,void 0,void 0,function(){return I(this,function(i){switch(i.label){case 0:return r>=this._stateUpdatedAt?(this._currentState=t,this._stateUpdatedAt=r,this._dispatcher.dispatch(new Ea({stateType:t.type})),this._logger.debug("connection state changes to ".concat(t.name)),[4,this._currentState.run(this)]):[3,2];case 1:return i.sent(),[2,!0];case 2:return[2,!1]}})})},n.prototype._tryResolveConnectionRequest=function(){var t;return A(this,void 0,void 0,function(){var r;return I(this,function(i){switch(i.label){case 0:return r=this._unresolvedLogi,this._websocketClient.isOpen&&r?(this._unresolvedLogi=void 0,this._logiReceivedAt=Date.now(),r.error?[3,2]:[4,r.applyTo(this._iid)]):[3,3];case 1:return i.sent(),this._statLogConnection(),(t=this._pinger)===null||t===void 0||t.start(),this._connectionRequestQueue.forEach(function(a){return a.resolve()}),this._connectionRequestQueue=[],this.sdkState.appState="foreground",[3,3];case 2:this._sessionManager.session.authToken=void 0,r.error.isSessionExpiredError||r.error.isSessionInvalidatedError?this._dispatcher.dispatch(new vd({reason:r.error.code,message:r.error.message})):this._logger.warn("login failed: ".concat(r.error)),this._rejectConnectionRequest(r.error),i.label=3;case 3:return[2]}})})},n.prototype._rejectConnectionRequest=function(t){var r;if((r=this._pinger)===null||r===void 0||r.stop(),this.clearLoginTimer(),this._connectionRequestQueue.length>0){var i=this._connectionRequestQueue;this._connectionRequestQueue=[],i.forEach(function(a){return a.reject(t)}),this._statLogConnection(t)}},n.prototype._url=function(t){var r,i=t.configTs,a=this.sdkState,s=a.appId,o=a.appVersion,l=a.userId,u=a.extensions,d=a.sendbirdRuntimeEnvironment,f=this.cacheContext.localCacheEnabled,m=this._sessionManager.session,p=(r=this.sdkState.websocket)===null||r===void 0?void 0:r.compression,E=!!(u??{}).sb_uikit,_=qm.userAgentWithExtension(u);return"".concat(this.sdkState.websocket.host,"/?p=JS&pv=").concat(encodeURIComponent(Bl.OS_VERSION),"&sv=").concat(encodeURIComponent(Bl.SDK_VERSION),"&ai=").concat(s).concat(o?"&av=".concat(o):"").concat(m.hasSession?"":"&user_id=".concat(encodeURIComponent(l)),"&pmce=").concat(p?1:0,"&active=1&device_token_types=").concat(encodeURIComponent(["gcm","huawei","apns"].join(",")),"&SB-User-Agent=").concat(_,"&SB-SDK-User-Agent=").concat(encodeURIComponent(qm.sendbirdSdkUserAgentWithExtension(d)),"&Request-Sent-Timestamp=").concat(Date.now().toString(),"&include_extra_data=").concat(encodeURIComponent(String(U2))).concat(this._sessionManager.handler?"&expiring_session=1":"","&use_local_cache=").concat(f?1:0,"&include_poll_details=1").concat(E?"&uikit_config=1":"","&config_ts=").concat(i)},n.prototype._statLogConnection=function(t){var r;this._dispatcher.dispatch(new gb(new cr({type:tr.WEBSOCKET_CONNECT,data:{host_url:(r=this.sdkState.websocket)===null||r===void 0?void 0:r.host,success:!t,latency:this._connectedAt>0?this._connectedAt-this._connectingAt:Date.now()-this._connectingAt,logi_latency:this._logiReceivedAt>0?this._logiReceivedAt-this._connectingAt:void 0,error_code:t==null?void 0:t.code,error_description:t==null?void 0:t.message}})))},n.prototype.connect=function(t){var r;return t===void 0&&(t=""),A(this,void 0,void 0,function(){var i,a,s,o,l,u=this;return I(this,function(d){switch(d.label){case 0:return this._logiProcessingTimer&&(clearTimeout(this._logiProcessingTimer),this._logiProcessingTimer=void 0,this._rejectConnectionRequest(ee.connectionCanceled)),i=new zi,this._connectionRequestQueue.push(i),this._connectionRequestQueue.length!==1?[3,2]:(this._connectingAt=Date.now(),this._connectedAt=0,this._logiReceivedAt=0,this._loginTimer=setTimeout(function(){u._loginTimer=void 0,u._rejectConnectionRequest(ee.loginTimeout)},(r=this.sdkState.websocket)===null||r===void 0?void 0:r.responseTimeout),a=this._sessionManager.session,t&&(a.authToken=t,a.sessionKey=void 0),s=0,[4,this.cacheContext.preference.get(Xm(this.sdkState.appId))]);case 1:(o=d.sent())&&(s=o.configTs),l=this._url({configTs:s}),a.sessionKey||a.authToken?this._websocketClient.connect(l,JSON.stringify(a.hasSession?{auth:a.sessionKey}:{token:a.authToken})):this._websocketClient.connect(l,JSON.stringify({})),d.label=2;case 2:return[2,i.promise]}})})},n.prototype.cancelConnectForRetry=function(){this._dispatcher.dispatch(Im.asError(ee.connectionRenew))},n.prototype.disconnect=function(){return A(this,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return[4,this._websocketClient.disconnect()];case 1:return t.sent(),[2]}})})},n.prototype.logout=function(){return A(this,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return this.sdkState.userId=void 0,this._unresolvedLogi=void 0,[4,this.disconnect()];case 1:return t.sent(),[4,this._sessionManager.clear()];case 2:return t.sent(),[2]}})})},n.prototype.clearLoginTimer=function(){this._loginTimer&&(clearTimeout(this._loginTimer),this._loginTimer=void 0)},n}(ac),D2=function(e){function n(t){var r=t.appId,i=t.userId,a=t.includeUIKitConfig,s=a!==void 0&&a,o=t.localCacheEnabled,l=o===void 0||o,u=t.expiringSession,d=u===void 0||u,f=t.configTs,m=f===void 0?0:f,p=e.call(this)||this;return p.path="".concat(vk,"/").concat(i,"/authentication"),p.method=Ie.POST,p.params=Qe({expiring_session:!!d,include_logi:!0,include_extra_data:String(U2),uikit_config:s,use_local_cache:l,app_id:r,config_ts:m}),p.requireAuth=!1,p}return z(n,e),n}(we),WP=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.logi=new Im(t,"LOGI",r),i}return z(n,e),n}(Pe);(function(e){e[e.ALL=0]="ALL",e[e.WEBSOCKET=1]="WEBSOCKET",e[e.API=2]="API"})(Ol||(Ol={}));var nr,oM,QP=[pb,D2],YP=function(){function e(n,t){var r=t.session,i=t.sdkState,a=t.dispatcher,s=t.logger,o=t.useFetchCompat,l=o!==void 0&&o,u=this;this._currentConnectionStateType=wn.INITIALIZED,this._lazyCallQueue=[],this.commandRouter=new PP(n,{session:r,sdkState:i,dispatcher:a,logger:s,useFetchCompat:l}),this._session=r,this._logger=s,this._dispatcher=a,this._dispatcher.on(function(d){var f,m,p;if(d instanceof Ea){var E=d.stateType;switch(u._currentConnectionStateType=E,E){case wn.CONNECTED:u._resolveLazyCallQueue();break;case wn.INITIALIZED:case wn.INTERNAL_DISCONNECTED:case wn.EXTERNAL_DISCONNECTED:case wn.LOGOUT:u._session.isRefreshing||u._rejectLazyCallQueue(!((p=u._session)===null||p===void 0)&&p.hasSession?ee.connectionClosed:ee.connectionRequired)}}else if(d instanceof N2)u._session.hasChatServicePermission||u._resolveLazyCallQueue(Ol.API);else if(d instanceof cE||d instanceof I2)u._rejectLazyCallQueue(ee.connectionClosed);else if(d instanceof n2){var _=d.request,b=d.deferred,C=d.error;try{for(var y=Ge(QP),T=y.next();!T.done;T=y.next())if(_ instanceof T.value)return void b.reject(C)}catch(N){f={error:N}}finally{try{T&&!T.done&&(m=y.return)&&m.call(y)}finally{if(f)throw f.error}}u._lazyCallQueue.push({command:_,deferred:b})}})}return Object.defineProperty(e.prototype,"isReady",{get:function(){return this._currentConnectionStateType===wn.CONNECTED},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLazyCallActivated",{get:function(){return this._currentConnectionStateType===wn.CONNECTING||this._currentConnectionStateType===wn.RECONNECTING||this._session.isRefreshing},enumerable:!1,configurable:!0}),e.prototype._classifyLazyCallQueueByScope=function(n){var t,r=[],i=[];switch(n){case Ol.ALL:t=null;break;case Ol.WEBSOCKET:t=pi;break;case Ol.API:t=we}var a=!1;return this._lazyCallQueue.forEach(function(s){!t||s.command instanceof t||(a=!0),a?i.push(s):r.push(s)}),[r,i]},e.prototype._resolveLazyCallQueue=function(n){var t=this;n===void 0&&(n=Ol.ALL);var r=ut(this._classifyLazyCallQueueByScope(n),2),i=r[0],a=r[1];this._lazyCallQueue=a,i.forEach(function(s){return A(t,void 0,void 0,function(){var o,l,u,d,f;return I(this,function(m){switch(m.label){case 0:o=s.command,l=s.deferred,(u=s.timeout)&&clearTimeout(u),m.label=1;case 1:return m.trys.push([1,3,,4]),[4,this.send(o)];case 2:return d=m.sent(),l.resolve(d),[3,4];case 3:return f=m.sent(),l.reject(f),[3,4];case 4:return[2]}})})})},e.prototype._rejectLazyCallQueue=function(n,t){var r=this;t===void 0&&(t=Ol.ALL);var i=ut(this._classifyLazyCallQueueByScope(t),2),a=i[0],s=i[1];this._lazyCallQueue=s,a.forEach(function(o){return A(r,void 0,void 0,function(){var l,u;return I(this,function(d){return l=o.deferred,u=o.timeout,clearTimeout(u),l.reject(n),[2]})})})},e.prototype.send=function(n){return A(this,void 0,void 0,function(){var t,r,i=this;return I(this,function(a){switch(a.label){case 0:return n instanceof pi?this.isReady?(this._logger.debug("send websocket request",n),[4,this.commandRouter.send(n)]):[3,2]:[3,4];case 1:case 5:case 7:return[2,a.sent()];case 2:if(this.isLazyCallActivated)return this._logger.debug("wait websocket request",n),t=new zi,this._lazyCallQueue.push({command:n,deferred:t,timeout:setTimeout(function(){return i.timeout(n.requestId)},1e4)}),[2,t.promise];throw this._logger.debug("fail websocket request"),ee.connectionRequired;case 3:case 9:return[3,11];case 4:return n instanceof we?this._session.hasSession?(this._logger.debug("send api request",n),[4,this.commandRouter.send(n)]):[3,6]:[3,10];case 6:return n.hasSessionKey?(this._logger.debug("send api request with tmp session key",n),[4,this.commandRouter.send(n)]):[3,8];case 8:if(this.isLazyCallActivated)return this._logger.debug("wait api request",n),t=new zi,this._lazyCallQueue.push({command:n,deferred:t,timeout:setTimeout(function(){return i.timeout(n.requestId)},1e4)}),[2,t.promise];throw r=ee.connectionRequired,this._logger.debug("fail api request",r),r;case 10:throw ee.invalidCommand;case 11:return[2]}})})},e.prototype.forceSend=function(n){return A(this,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return this._logger.debug("send forced request",n),n instanceof pi||n instanceof we?[4,this.commandRouter.send(n)]:[3,2];case 1:return[2,t.sent()];case 2:throw ee.invalidCommand}})})},e.prototype.timeout=function(n){this._logger.debug("timeout request",n);var t=this._lazyCallQueue.findIndex(function(r){return r.command.requestId===n});t>-1&&(this._lazyCallQueue[t].deferred.reject(ee.connectionRequired),this._lazyCallQueue.splice(t,1))},e.prototype.cancel=function(n){this._logger.debug("cancel api request",n),this.commandRouter.cancel(n)},e.prototype.cancelAll=function(){this._logger.debug("cancel all api requests"),this.commandRouter.cancelAll()},e}(),c_="sendbird@devicetokens",d_=function(){function e(n){var t=n.type,r=n.token,i=n.device_os,a=n.device_manufacturer,s=n.system_push_enabled;this.type=t,this.token=r,this.deviceOS=i,this.deviceManufacturer=a,this.systemPushEnabled=s}return e.payloadify=function(n){return Qe(vt({type:n.type,token:n.token,device_os:n.deviceOS,device_manufacturer:n.deviceManufacturer,system_push_enabled:n.systemPushEnabled}))},e}(),h_=new WeakMap,XP=function(e){function n(t){var r=t._iid,i=t.session,a=t.cacheContext,s=t.sdkState,o=t.dispatcher,l=t.requestQueue,u=t.logger,d=t.pushNotificationAckManager,f=e.call(this)||this;return f._currentConnectionStateType=wn.INITIALIZED,f._isRefreshingAuthToken=!1,f.currentUser=null,f.session=i,f._iid=r,f._cacheContext=a,f._sdkState=s,f._dispatcher=o,f._requestQueue=l,f._logger=u,f._pushNotificationAckManager=d,f._deviceTokens=[],f._dispatcher.on(function(m){var p,E,_;if(m instanceof Ea){var b=m.stateType;f._currentConnectionStateType=b}else if(m instanceof vd&&f.handler&&!f.isSessionKeyRefreshing){if(f._currentConnectionStateType===wn.CONNECTING)return;!((p=m.error)===null||p===void 0)&&p.isSessionInvalidatedError?f.close():(!((E=m.error)===null||E===void 0)&&E.isSessionTokenExpiredError&&f.refreshAuthToken().catch(function(C){if(Ai(C)&&f._sdkState.appState==="foreground")throw C}),!((_=m.error)===null||_===void 0)&&_.isSessionKeyExpiredError&&(f._logger.debug("session expired"),f.handler.onSessionExpired&&f.handler.onSessionExpired(),f.refreshSessionKey().catch(function(C){if(Ai(C)&&f._sdkState.appState==="foreground")throw C})))}}),f}return z(n,e),Object.defineProperty(n.prototype,"ekey",{get:function(){return h_.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"deviceTokens",{get:function(){return this._deviceTokens},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"deviceTokenLastDeletedAt",{get:function(){return this._deviceTokenLastDeletedAt},enumerable:!1,configurable:!0}),n.prototype.indexOfDeviceToken=function(t,r){return this._deviceTokens.findIndex(function(i){return i.type===t&&i.token===r})},n.prototype.hasDeviceToken=function(t,r){return this.indexOfDeviceToken(t,r)>=0},n.prototype.createRefreshWebsocketCommand=function(t,r){return new Ak({authToken:t,expiringSession:!0,requestId:r})},n.prototype._refreshSessionKeyByWebSocket=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o;return I(this,function(l){switch(l.label){case 0:return r=this.createRefreshWebsocketCommand(t),[4,this._requestQueue.forceSend(r)];case 1:if(i=l.sent(),a=i.as(Rk),s=a.newKey,o=a.error)throw o;return this.session.sessionKey=s??this.session.sessionKey,[2]}})})},n.prototype._refreshSessionKeyByApi=function(t){return A(this,void 0,void 0,function(){var r,i=this;return I(this,function(a){switch(a.label){case 0:return r=new pb({userId:this._sdkState.userId,authToken:t,services:this.session.services&&this.session.services.length>0?this.session.services:void 0,expiringSession:!0}),[4,Up(function(s){return A(i,void 0,void 0,function(){var o,l,u,d,f;return I(this,function(m){switch(m.label){case 0:return m.trys.push([0,2,,3]),[4,this._requestQueue.forceSend(r)];case 1:return o=m.sent(),l=o.as(wk),u=l.key,d=l.services,this.session.sessionKey=u,this.session.services=d,[3,3];case 2:if(f=m.sent(),!this._isSessionRelatedError(f))throw f;return s(f),[3,3];case 3:return[2]}})})},3)];case 1:return a.sent(),[2]}})})},n.prototype._refreshSessionKey=function(t,r){return r===void 0&&(r=!0),A(this,void 0,void 0,function(){var i,a;return I(this,function(s){switch(s.label){case 0:if(this._currentConnectionStateType!==wn.CONNECTED)return[3,8];s.label=1;case 1:return s.trys.push([1,3,,8]),[4,this._refreshSessionKeyByWebSocket(t)];case 2:return s.sent(),this.complete(),[2];case 3:i=s.sent(),s.label=4;case 4:return s.trys.push([4,6,,7]),[4,this._handleSessionRefreshError(i,r)];case 5:return s.sent(),[2];case 6:return s.sent(),[3,7];case 7:return[3,8];case 8:return s.trys.push([8,10,,12]),[4,this._refreshSessionKeyByApi(t)];case 9:return s.sent(),this.complete(),[3,12];case 10:return a=s.sent(),[4,this._handleSessionRefreshError(a,r)];case 11:return s.sent(),[3,12];case 12:return[2]}})})},n.prototype._receiveNewAuthToken=function(){var t,r=this,i=new zi;if(this._isRefreshingAuthToken=!0,this.session.sessionKey=void 0,this.session.authToken=void 0,(t=this.handler)===null||t===void 0?void 0:t.onSessionTokenRequired){var a=null,s=function(){a&&(clearTimeout(a),a=null)},o=function(u){s(),r._isRefreshingAuthToken&&(r._isRefreshingAuthToken=!1,i.resolve(u))},l=function(u){s(),r._isRefreshingAuthToken&&(r._isRefreshingAuthToken=!1,i.reject(u))};a=setTimeout(function(){return l()},1e3*this._sdkState.sessionTokenRefreshTimeout),it(function(){return A(r,void 0,void 0,function(){var u;return I(this,function(d){return!((u=this.handler)===null||u===void 0)&&u.onSessionTokenRequired&&this.handler.onSessionTokenRequired(o,l),[2]})})})}else i.resolve(null);return i.promise},n.prototype._handleSessionRefreshError=function(t,r){return r===void 0&&(r=!1),A(this,void 0,void 0,function(){var i;return I(this,function(a){switch(a.label){case 0:return t instanceof ee&&(t.isSessionTokenExpiredError||t.code===lt.APPLICATION_NOT_FOUND)?(this.session.authToken=void 0,r?[4,this._receiveNewAuthToken()]:[3,6]):[3,6];case 1:return(i=a.sent())?(this.session.authToken=i,[4,this._refreshSessionKey(this.session.authToken,!1)]):[3,3];case 2:return a.sent(),[3,5];case 3:return[4,this.clear()];case 4:a.sent(),a.label=5;case 5:return[2];case 6:throw t}})})},n.prototype._isSessionRelatedError=function(t){return t instanceof ee&&(t.isSessionExpiredError||t.isSessionInvalidatedError)},Object.defineProperty(n.prototype,"isSessionKeyRefreshing",{get:function(){return this.session.isRefreshing},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isRefreshingAuthToken",{get:function(){return this._isRefreshingAuthToken},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionExpiring",{get:function(){return!!this.handler},enumerable:!1,configurable:!0}),n.prototype.authenticate=function(t,r){var i;return A(this,void 0,void 0,function(){var a,s,o,l,u;return I(this,function(d){switch(d.label){case 0:return this.session.authToken=r,a=0,[4,this._cacheContext.preference.get(Xm(this._sdkState.appId))];case 1:return(s=d.sent())&&(a=s.configTs),o=new D2({appId:this._sdkState.appId,userId:t,includeUIKitConfig:!!((i=this._sdkState.extensions)!==null&&i!==void 0?i:{}).sb_uikit,localCacheEnabled:this._cacheContext.localCacheEnabled,expiringSession:this.isSessionExpiring,configTs:a}),[4,this._requestQueue.commandRouter.send(o)];case 2:return l=d.sent(),(u=l.as(WP).logi).error?[3,5]:this.session.hasChatServicePermission?[3,4]:[4,u.applyTo(this._iid)];case 3:d.sent(),d.label=4;case 4:return[3,6];case 5:throw u.error;case 6:return[2]}})})},n.prototype.login=function(t){var r;return A(this,void 0,void 0,function(){var i,a,s,o,l,u,d,f;return I(this,function(m){switch(m.label){case 0:return i=t.key,a=t.ekey,s=t.services,o=t.userProfile,l=t.deviceTokenLastDeletedAt,u=l===void 0?0:l,this.session.sessionKey=i,this.session.services=s,h_.set(this,a),this._deviceTokenCacheEnabled=(r=o==null?void 0:o.appInfo)===null||r===void 0?void 0:r.deviceTokenCache,d=this._cacheContext.preference,this._deviceTokenCacheEnabled?[4,d.get(c_)]:[3,5];case 1:return!(f=m.sent())||f.lastDeletedAt<u?(this._deviceTokens=[],this._deviceTokenLastDeletedAt=u,[4,this.saveDeviceToken()]):[3,3];case 2:return m.sent(),[3,4];case 3:this._deviceTokens=f.tokens.map(function(p){return new d_(d_.payloadify(p))}),this._deviceTokenLastDeletedAt=f.lastDeletedAt,m.label=4;case 4:return[3,7];case 5:return[4,d.remove(c_)];case 6:m.sent(),m.label=7;case 7:return[2]}})})},n.prototype.complete=function(){var t=this;this.dispatch("refresh"),this._dispatcher.dispatch(new N2),it(function(){return A(t,void 0,void 0,function(){var r;return I(this,function(i){return this._logger.debug("session refreshed"),!((r=this.handler)===null||r===void 0)&&r.onSessionRefreshed&&this.handler.onSessionRefreshed(),[2]})})})},n.prototype.error=function(t){var r=this;it(function(){return A(r,void 0,void 0,function(){var i;return I(this,function(a){return!((i=this.handler)===null||i===void 0)&&i.onSessionError&&this.handler.onSessionError(t),[2]})})})},n.prototype.close=function(){var t=this;this.dispatch("close"),this._dispatcher.dispatch(new I2),it(function(){return A(t,void 0,void 0,function(){var r;return I(this,function(i){return this._logger.debug("session closed"),!((r=this.handler)===null||r===void 0)&&r.onSessionClosed&&this.handler.onSessionClosed(),[2]})})})},n.prototype.refreshAuthToken=function(){return A(this,void 0,void 0,function(){var t,r;return I(this,function(i){switch(i.label){case 0:if(t=null,!this.isSessionExpiring||this.session.isRefreshing)return[3,9];this.session.isRefreshing=!0,i.label=1;case 1:return i.trys.push([1,7,8,9]),[4,this._receiveNewAuthToken()];case 2:return(t=i.sent())?(this._logger.debug("session refreshing.."),this.session.authToken=t,[4,this._refreshSessionKey(this.session.authToken)]):[3,4];case 3:return i.sent(),[3,6];case 4:return[4,this.clear()];case 5:i.sent(),i.label=6;case 6:return[3,9];case 7:throw i.sent(),r=t?ee.sessionTokenRefreshFailed:ee.sessionTokenRequestFailed,this._dispatcher.dispatch(new cE),this.error(r),this._logger.debug("refresh auth token error = ",r),r;case 8:return this.session.isRefreshing=!1,[7];case 9:return[2]}})})},n.prototype.refreshSessionKey=function(){return A(this,void 0,void 0,function(){var t;return I(this,function(r){switch(r.label){case 0:if(!this.isSessionExpiring||this.session.isRefreshing)return[3,5];this.session.isRefreshing=!0,r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,this._refreshSessionKey(this.session.authToken)];case 2:return r.sent(),[3,5];case 3:throw r.sent(),t=ee.sessionTokenRefreshFailed,this._dispatcher.dispatch(new cE),this.error(t),t;case 4:return this.session.isRefreshing=!1,[7];case 5:return[2]}})})},n.prototype.setDeviceToken=function(t,r,i){if(this._deviceTokenCacheEnabled&&this.indexOfDeviceToken(t,r)<0){var a=new d_({type:t,token:r,device_os:i==null?void 0:i.deviceOS,device_manufacturer:i==null?void 0:i.deviceManufacturer,system_push_enabled:i==null?void 0:i.systemPushEnabled});return this._deviceTokens.push(a),!0}return!1},n.prototype.unsetDeviceToken=function(t,r){if(this._deviceTokenCacheEnabled){var i=this.indexOfDeviceToken(t,r);i>=0&&this._deviceTokens.splice(i,1)}},n.prototype.unsetDeviceTokens=function(t){this._deviceTokenCacheEnabled&&(this._deviceTokens=t?this._deviceTokens.filter(function(r){return r.type!==t}):[])},n.prototype.setDeviceTokenDeletedAt=function(t){t>0&&(this._deviceTokenLastDeletedAt=t)},n.prototype.saveDeviceToken=function(){return A(this,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return this._deviceTokenCacheEnabled?[4,this._cacheContext.preference.set(c_,{tokens:this._deviceTokens,lastDeletedAt:this._deviceTokenLastDeletedAt})]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},n.prototype.clear=function(){return A(this,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return this.currentUser=null,this.session.clear(),this.close(),h_.delete(this),this._deviceTokens=[],this._deviceTokenLastDeletedAt=0,[4,this.saveDeviceToken()];case 1:return t.sent(),this._pushNotificationAckManager.clear(),[2]}})})},n}(ac),k2=function(e,n){var t,r;if(e!==null&&n!==null){var i=Object.keys(e),a=Object.keys(n),s=Nt([],ut(new Set(Nt(Nt([],ut(i),!1),ut(a),!1))),!1),o={};try{for(var l=Ge(s),u=l.next();!u.done;u=l.next()){var d=u.value,f=typeof e[d],m=typeof n[d];f==="undefined"?o[d]=n[d]:m==="undefined"?o[d]=e[d]:f!==m?o[d]=n[d]:f==="object"&&e[d]&&n[d]?o[d]=k2(e[d],n[d]):o[d]=n[d]}}catch(p){t={error:p}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return o}return n};(function(e){e[e.PENDING=0]="PENDING",e[e.COLLECT_ONLY=1]="COLLECT_ONLY",e[e.ENABLED=2]="ENABLED",e[e.DISABLED=3]="DISABLED"})(nr||(nr={})),function(e){e.DAILY="daily",e.DEFAULT="default",e.REALTIME="realtime"}(oM||(oM={}));var ep,kp=100,Sb=function(){function e(n){var t=n.deviceId,r=n.cacheContext,i=n.requestQueue;this.queue=[],this.flushWaitQueue=[],this.enabledState=nr.PENDING,this.isFlushing=!1,this._sentLogStats=[],this.deviceId=t,this.cacheContext=r,this.requestQueue=i,this.logInfo={deviceId:t,statLogs:[],generation:1,lastFlushedAt:0},this.limit=kp}return Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this.enabledState===nr.ENABLED},enumerable:!1,configurable:!0}),e.prototype.init=function(n){return A(this,void 0,void 0,function(){var t;return I(this,function(r){switch(r.label){case 0:return this.key=n,[4,this.cacheContext.preference.get(this.key)];case 1:return(t=r.sent())&&(this.logInfo=t),[2]}})})},e.prototype._mergeQueue=function(){this.flushWaitQueue.length>0&&(this.queue=this.queue.concat(this.flushWaitQueue),this.flushWaitQueue=[])},e.prototype._isDuplicateStat=function(n){var t=this._sentLogStats.find(function(r){var i;return r.channelUrl===n.data.channel_url&&r.messageId===((i=n.data.notificationId)!==null&&i!==void 0?i:n.data.message_id)&&r.action===n.data.action});return t||this._sentLogStats.push({channelUrl:n.data.channel_url,messageId:n.data.message_id,action:n.data.action}),!!t},e.prototype._save=function(){return A(this,void 0,void 0,function(){var n;return I(this,function(t){switch(t.label){case 0:return n=Nt(Nt([],ut(this.queue),!1),ut(this.flushWaitQueue),!1),[4,this.cacheContext.preference.set(this.key,{deviceId:this.logInfo.deviceId,statLogs:n.map(function(r){return cr.payloadify(r)}),generation:this.logInfo.generation++,lastFlushedAt:this.logInfo.lastFlushedAt})];case 1:return t.sent(),[2]}})})},e.prototype.clear=function(){return A(this,void 0,void 0,function(){return I(this,function(n){return this.queue=[],this.flushWaitQueue=[],this.logInfo.generation=1,this._save(),[2]})})},e}(),yf=function(e){function n(t){var r,i,a,s,o=t.type,l=t.data,u=t.ts,d=u===void 0?Date.now():u,f=e.call(this,{type:o,data:l,ts:d})||this;return f.date=new Date(d),f.key="".concat((r=f.date,i=r.getFullYear(),a=String(r.getMonth()+1).padStart(2,"0"),s=String(r.getDate()).padStart(2,"0"),"".concat(i).concat(a).concat(s)),"_").concat(o),f}return z(n,e),n}(cr),P2=function(e){function n(t){var r=t.deviceId,i=t.statLogs,a=e.call(this)||this;return a.method=Ie.POST,a.path="".concat(bk),a.params={device_id:r,log_entries:i.map(function(s){return cr.payloadify(s)})},a}return z(n,e),n}(we),ZP=function(e){function n(t){var r=t.deviceId,i=t.cacheContext,a=t.requestQueue;return e.call(this,{deviceId:r,cacheContext:i,requestQueue:a})||this}return z(n,e),Object.defineProperty(n.prototype,"_isSendable",{get:function(){return this.queue.length!==0&&Date.now()-this.logInfo.lastFlushedAt>=this.statConfig.minInterval},enumerable:!1,configurable:!0}),n.prototype.init=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){switch(r.label){case 0:return[4,e.prototype.init.call(this,t+".daily")];case 1:return r.sent(),this.queue=this.logInfo.statLogs.map(function(i){return new cr({type:i.stat_type,ts:i.ts,data:i.data})}),[2]}})})},n.prototype.setConfig=function(t,r){return A(this,void 0,void 0,function(){var i,a,s,o;return I(this,function(l){switch(l.label){case 0:return this.statConfig=t,this.statConfig.minInterval=864e5,this._mergeQueue(),r.localCacheStat?(this.enabledState=r.enabledStat?nr.ENABLED:nr.COLLECT_ONLY,[3,3]):[3,1];case 1:return this.enabledState=nr.DISABLED,[4,this.clear()];case 2:l.sent(),l.label=3;case 3:return this.isEnabled&&this._isSendable?[4,this._getUploadStats()]:[3,9];case 4:i=l.sent(),a=Math.max(Math.floor(Math.random()*this.statConfig.requestDelayRange),100),s=0,l.label=5;case 5:return s<i.length?(o=i.slice(s,1+this.statConfig.maxStatCountPerRequest),[4,Zi(a)]):[3,9];case 6:return l.sent(),[4,this._flush(o)];case 7:l.sent(),l.label=8;case 8:return s+=this.statConfig.maxStatCountPerRequest,[3,5];case 9:return[2]}})})},n.prototype.put=function(t){return A(this,void 0,void 0,function(){var r,i,a,s;return I(this,function(o){switch(o.label){case 0:return this.enabledState===nr.DISABLED?[2,!0]:(r=this.enabledState===nr.PENDING||this.isFlushing?this.flushWaitQueue:this.queue,i=ut(r.filter(function(l){return l instanceof yf&&l.key===t.key}),1),(a=i[0])?a.data=k2(a.data,t.data):r.push(t),this.enabledState===nr.PENDING?[3,2]:[4,this._save()]);case 1:o.sent(),o.label=2;case 2:return this.isEnabled?(this._mergeQueue(),this._isSendable?[4,this._getUploadStats()]:[3,5]):[3,5];case 3:return s=o.sent(),[4,this._flush(s)];case 4:return[2,o.sent()];case 5:return[2,!0]}})})},n.prototype._getUploadStats=function(){return A(this,void 0,void 0,function(){var t;return I(this,function(r){return t=this.queue.filter(function(i){if(i instanceof yf){var a=new Date,s=ut([i.date.getFullYear(),a.getFullYear()],2),o=s[0],l=s[1];if(o<l)return!0;if(o===l){var u=ut([i.date.getMonth(),a.getMonth()],2),d=u[0],f=u[1];if(d<f)return!0;if(d===f){var m=ut([i.date.getDate(),a.getDate()],2);return m[0]<m[1]}}}return!1}),[2,t]})})},n.prototype._flush=function(t){return A(this,void 0,void 0,function(){var r,i,a,s;return I(this,function(o){switch(o.label){case 0:if(r=!0,!(t.length>0))return[3,10];if(this.isFlushing)return[3,9];this.isFlushing=!0,o.label=1;case 1:return o.trys.push([1,4,8,9]),i=Nt([],ut(t),!1).slice(0,Math.min(this.limit,this.statConfig.maxStatCountPerRequest)),a=new P2({deviceId:this.deviceId,statLogs:i}),[4,this.requestQueue.send(a)];case 2:return o.sent(),this.queue=Nt([],ut(t),!1).slice(i.length).concat(this.flushWaitQueue),this.flushWaitQueue=[],this.limit=kp,this.logInfo.lastFlushedAt=Date.now(),[4,this._save()];case 3:return o.sent(),[3,9];case 4:return(s=o.sent())instanceof ee?s.code!==lt.NON_AUTHORIZED?[3,6]:[4,this.clear()]:[3,7];case 5:return o.sent(),this.enabledState=nr.DISABLED,[3,7];case 6:s.code===lt.STAT_UPLOAD_NOT_ALLOWED&&(this.enabledState=nr.COLLECT_ONLY),o.label=7;case 7:return this.limit=this.limit+20,r=!1,[3,9];case 8:return this.isFlushing=!1,[7];case 9:return[3,11];case 10:this.isFlushing=!1,o.label=11;case 11:return[2,r]}})})},n}(Sb),JP=function(e){function n(t){var r=t.deviceId,i=t.cacheContext,a=t.requestQueue;return e.call(this,{deviceId:r,cacheContext:i,requestQueue:a})||this}return z(n,e),n.prototype._isSendable=function(t){if(t===void 0&&(t=!1),this.queue.length<this.statConfig.lowerThreshold)return!1;if(t){if(Date.now()-this.logInfo.lastFlushedAt<this.statConfig.minInterval)return!1}else if(this.queue.length<this.statConfig.minStatCount)return!1;return!0},n.prototype._filterQueueByType=function(t,r){return A(this,void 0,void 0,function(){return I(this,function(i){return[2,r?t.filter(function(a){return a.type!==tr.FEATURE_LOCALCACHE_EVENT}):t.filter(function(a){return a.type===tr.FEATURE_LOCALCACHE_EVENT})]})})},n.prototype.init=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){switch(r.label){case 0:return[4,e.prototype.init.call(this,t+".default")];case 1:return r.sent(),this.queue=this.logInfo.statLogs.map(function(i){return i.data=Y({message_init_policy:"",starting_point:0},i.data),new cr({type:i.stat_type,ts:i.ts,data:i.data})}),[2]}})})},n.prototype.setConfig=function(t,r){return A(this,void 0,void 0,function(){var i,a,s,o;return I(this,function(l){switch(l.label){case 0:return this.statConfig=t,this._mergeQueue(),r.requestStat||r.localCacheStat?(this.enabledState=r.enabledStat?nr.ENABLED:nr.COLLECT_ONLY,i=void 0,r.requestStat||(i=!1),r.localCacheStat||(i=!0),i===void 0?[3,3]:(a=this,[4,this._filterQueueByType(this.queue,i)])):[3,4];case 1:return a.queue=l.sent(),s=this,[4,this._filterQueueByType(this.flushWaitQueue,i)];case 2:s.flushWaitQueue=l.sent(),this._save(),l.label=3;case 3:return[3,6];case 4:return this.enabledState=nr.DISABLED,[4,this.clear()];case 5:l.sent(),l.label=6;case 6:return this.isEnabled&&this._isSendable(!0)?(o=Math.max(Math.floor(Math.random()*this.statConfig.requestDelayRange),100),[4,Zi(o)]):[3,9];case 7:return l.sent(),[4,this._flush(this.queue)];case 8:l.sent(),l.label=9;case 9:return[2]}})})},n.prototype.put=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){switch(i.label){case 0:return this.enabledState===nr.DISABLED?[2,!0]:((r=this.enabledState===nr.PENDING||this.isFlushing?this.flushWaitQueue:this.queue).push(t),this.enabledState===nr.PENDING?[3,2]:[4,this._save()]);case 1:i.sent(),i.label=2;case 2:return this.isEnabled?(this._mergeQueue(),this._isSendable()?[4,this._flush(r)]:[3,4]):[3,4];case 3:return[2,i.sent()];case 4:return[2,!0]}})})},n.prototype._flush=function(t){return A(this,void 0,void 0,function(){var r,i,a,s;return I(this,function(o){switch(o.label){case 0:if(r=!0,!(t.length>0))return[3,10];if(this.isFlushing)return[3,9];this.isFlushing=!0,o.label=1;case 1:return o.trys.push([1,4,8,9]),i=Nt([],ut(t),!1).slice(0,Math.min(this.limit,this.statConfig.maxStatCountPerRequest)),a=new P2({deviceId:this.deviceId,statLogs:i}),[4,this.requestQueue.send(a)];case 2:return o.sent(),this.queue=Nt([],ut(t),!1).slice(i.length).concat(this.flushWaitQueue),this.flushWaitQueue=[],this.limit=kp,this.logInfo.lastFlushedAt=Date.now(),[4,this._save()];case 3:return o.sent(),[3,9];case 4:return(s=o.sent())instanceof ee?s.code!==lt.NON_AUTHORIZED?[3,6]:[4,this.clear()]:[3,7];case 5:return o.sent(),this.enabledState=nr.DISABLED,[3,7];case 6:s.code===lt.STAT_UPLOAD_NOT_ALLOWED&&(this.enabledState=nr.COLLECT_ONLY),o.label=7;case 7:return this.limit=this.limit+20,r=!1,[3,9];case 8:return this.isFlushing=!1,[7];case 9:return[3,11];case 10:this.isFlushing=!1,o.label=11;case 11:return[2,r]}})})},n}(Sb),ex=function(e){function n(t){var r=t.deviceId,i=t.statLogs,a=e.call(this)||this;return a.method=Ie.POST,a.path="".concat(Ck),a.params={device_id:r,log_entries:i.map(function(s){return cr.payloadify(s)})},a}return z(n,e),n}(we),tx=function(e){function n(t){var r=t.deviceId,i=t.cacheContext,a=t.requestQueue;return e.call(this,{deviceId:r,cacheContext:i,requestQueue:a})||this}return z(n,e),Object.defineProperty(n.prototype,"_isSendable",{get:function(){return this.queue.length>=this.statConfig.minStatCount&&this.queue.length>this.statConfig.lowerThreshold||this.logInfo.lastFlushedAt>0&&Date.now()-this.logInfo.lastFlushedAt>=this.statConfig.minInterval},enumerable:!1,configurable:!0}),n.prototype.init=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){switch(r.label){case 0:return[4,e.prototype.init.call(this,t+".realtime")];case 1:return r.sent(),this.queue=this.logInfo.statLogs.map(function(i){var a;return i.data=Qe(Y(Y({},i.data),{message_id:(a=i.data.notificationId)!==null&&a!==void 0?a:i.data.message_id,notificationId:void 0})),new cr({type:i.stat_type,ts:i.ts,data:i.data})}),this._sentLogStats=this.queue.map(function(i){var a;return{channelUrl:i.data.channelUrl,messageId:(a=i.data.notificationId)!==null&&a!==void 0?a:i.data.message_id,action:i.data.action}}),[2]}})})},n.prototype.setConfig=function(t,r){return A(this,void 0,void 0,function(){var i;return I(this,function(a){switch(a.label){case 0:return this.statConfig=t,this._mergeQueue(),r.notificationStat?(this.enabledState=r.enabledStat?nr.ENABLED:nr.COLLECT_ONLY,[3,3]):[3,1];case 1:return this.enabledState=nr.DISABLED,[4,this.clear()];case 2:a.sent(),a.label=3;case 3:return this.isEnabled&&this._isSendable?(i=Math.max(Math.floor(Math.random()*this.statConfig.requestDelayRange),100),[4,Zi(i)]):[3,6];case 4:return a.sent(),[4,this._flush(this.queue)];case 5:a.sent(),a.label=6;case 6:return[2]}})})},n.prototype.put=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){switch(i.label){case 0:return this.enabledState===nr.DISABLED?[2,!0]:(r=this.enabledState===nr.PENDING||this.isFlushing?this.flushWaitQueue:this.queue,this._isDuplicateStat(t)?[2,!0]:(r.push(t),this.enabledState===nr.PENDING?[3,2]:[4,this._save()]));case 1:i.sent(),i.label=2;case 2:return this.isEnabled?(this._mergeQueue(),this.isEnabled&&this._isSendable?[4,this._flush(r)]:[3,4]):[3,4];case 3:return[2,i.sent()];case 4:return[2,!0]}})})},n.prototype._flush=function(t){return A(this,void 0,void 0,function(){var r,i,a,s;return I(this,function(o){switch(o.label){case 0:if(r=!0,!(t.length>0))return[3,10];if(this.isFlushing)return[3,9];this.isFlushing=!0,o.label=1;case 1:return o.trys.push([1,4,8,9]),i=Nt([],ut(t),!1).slice(0,Math.min(this.limit,this.statConfig.maxStatCountPerRequest)),a=new ex({deviceId:this.deviceId,statLogs:i}),[4,this.requestQueue.send(a)];case 2:return o.sent(),this.queue=Nt([],ut(t),!1).slice(i.length).concat(this.flushWaitQueue),this.flushWaitQueue=[],this.limit=kp,this.logInfo.lastFlushedAt=Date.now(),[4,this._save()];case 3:return o.sent(),[3,9];case 4:return(s=o.sent())instanceof ee?s.code!==lt.NON_AUTHORIZED?[3,6]:[4,this.clear()]:[3,7];case 5:return o.sent(),this.enabledState=nr.DISABLED,[3,7];case 6:s.code===lt.STAT_UPLOAD_NOT_ALLOWED&&(this.enabledState=nr.COLLECT_ONLY),o.label=7;case 7:return this.limit=this.limit+20,r=!1,[3,9];case 8:return this.isFlushing=!1,[7];case 9:return[3,11];case 10:this.isFlushing=!1,o.label=11;case 11:return[2,r]}})})},n}(Sb),nx=function(){function e(n){var t=n.cacheContext,r=n.requestQueue,i=n.dispatcher,a=n.logger;this._collectRequestStat=!0,this._collectFeatureLocalCacheStat=!0,this._collectionNotificationStat=!0,this._retryCount=0,this.deviceId=Ho(),this.cacheContext=t,this.requestQueue=r,this.dispatcher=i,this.logger=a,this._dailyStatCollector=new ZP({deviceId:this.deviceId,cacheContext:this.cacheContext,requestQueue:this.requestQueue}),this._defaultStatCollector=new JP({deviceId:this.deviceId,cacheContext:this.cacheContext,requestQueue:this.requestQueue}),this._notificationStatCollector=new tx({deviceId:this.deviceId,cacheContext:this.cacheContext,requestQueue:this.requestQueue})}return e.prototype._migration=function(){return A(this,void 0,void 0,function(){var n,t,r,i;return I(this,function(a){switch(a.label){case 0:return[4,this.cacheContext.preference.get(this.key)];case 1:return(n=a.sent())?(t=[],n.statLogs.forEach(function(s){s.stat_type===tr.FEATURE_LOCALCACHE&&t.push(new cr({type:s.stat_type,ts:s.ts,data:s.data}))}),[4,this.cacheContext.preference.set(this.key+".daily",{deviceId:n.deviceId,statLogs:t.map(function(s){return cr.payloadify(s)}),generation:n.generation,lastFlushedAt:n.lastFlushedAt})]):[3,6];case 2:return a.sent(),r=[],n.statLogs.forEach(function(s){s.stat_type!==tr.FEATURE_LOCALCACHE&&s.stat_type!==tr.NOTIFICATION&&(s.stat_type===tr.FEATURE_LOCALCACHE_EVENT&&(s.data=Y({message_init_policy:"",starting_point:0},s.data)),r.push(new cr({type:s.stat_type,ts:s.ts,data:s.data})))}),[4,this.cacheContext.preference.set(this.key+".default",{deviceId:n.deviceId,statLogs:r.map(function(s){return cr.payloadify(s)}),generation:n.generation,lastFlushedAt:n.lastFlushedAt})];case 3:return a.sent(),i=[],n.statLogs.forEach(function(s){var o;s.stat_type===tr.NOTIFICATION&&(s.data=Qe(Y(Y({},s.data),{message_id:(o=s.data.notificationId)!==null&&o!==void 0?o:s.data.message_id,notificationId:void 0})),i.push(new cr({type:s.stat_type,ts:s.ts,data:s.data})))}),[4,this.cacheContext.preference.set(this.key+".realtime",{deviceId:n.deviceId,statLogs:i.map(function(s){return cr.payloadify(s)}),generation:n.generation,lastFlushedAt:n.lastFlushedAt})];case 4:return a.sent(),[4,this.cacheContext.preference.remove(this.key)];case 5:a.sent(),a.label=6;case 6:return[2]}})})},e.prototype.init=function(n){return A(this,void 0,void 0,function(){var t=this;return I(this,function(r){switch(r.label){case 0:return this.key=n,[4,this._migration()];case 1:return r.sent(),[4,this._dailyStatCollector.init(this.key)];case 2:return r.sent(),[4,this._defaultStatCollector.init(this.key)];case 3:return r.sent(),[4,this._notificationStatCollector.init(this.key)];case 4:return r.sent(),this.commandEventContext||(this.commandEventContext=this.dispatcher.on(function(i){return A(t,void 0,void 0,function(){var a,s,o,l,u,d;return I(this,function(f){return i instanceof gb?(a=i.statLog,this.put(a)):i instanceof w2&&(s=i.request,o=i.features,l=i.options,u=i.statConfigInfo,this._retryCount=0,this._collectRequestStat=s,this._collectFeatureLocalCacheStat=o==null?void 0:o.localCache,this._collectionNotificationStat=o==null?void 0:o.notification,this._statConfig=u,this._dailyStatCollector.setConfig(this._statConfig.default,{localCacheStat:this._collectFeatureLocalCacheStat,enabledStat:l.ingestion}),this._defaultStatCollector.setConfig(this._statConfig.default,{requestStat:this._collectRequestStat,localCacheStat:this._collectFeatureLocalCacheStat,enabledStat:l.ingestion}),this._notificationStatCollector.setConfig((d=this._statConfig.realTime)!==null&&d!==void 0?d:this._statConfig.default,{notificationStat:this._collectionNotificationStat,enabledStat:l.ingestion})),[2]})})})),[2]}})})},e.prototype.put=function(n){return A(this,void 0,void 0,function(){var t;return I(this,function(r){switch(r.label){case 0:return t=!0,n instanceof yf?this._collectFeatureLocalCacheStat?[4,this._dailyStatCollector.put(n)]:[3,2]:[3,3];case 1:t=r.sent(),r.label=2;case 2:return[3,13];case 3:switch(n.type){case tr.API_RESULT:case tr.WEBSOCKET_CONNECT:return[3,4];case tr.FEATURE_LOCALCACHE:case tr.FEATURE_LOCALCACHE_EVENT:return[3,7];case tr.NOTIFICATION:return[3,10]}return[3,13];case 4:return this._collectRequestStat?[4,this._defaultStatCollector.put(n)]:[3,6];case 5:t=r.sent(),r.label=6;case 6:return[3,13];case 7:return this._collectFeatureLocalCacheStat?[4,this._defaultStatCollector.put(n)]:[3,9];case 8:t=r.sent(),r.label=9;case 9:return[3,13];case 10:return this._collectionNotificationStat?[4,this._notificationStatCollector.put(n)]:[3,12];case 11:t=r.sent(),r.label=12;case 12:return[3,13];case 13:return t?this._retryCount=0:(this._retryCount++,this._retryCount>20&&(this._dailyStatCollector.enabledState=nr.COLLECT_ONLY,this._defaultStatCollector.enabledState=nr.COLLECT_ONLY,this._notificationStatCollector.enabledState=nr.COLLECT_ONLY,this.logger.debug(ee.statLogUploadLimitExceededError))),[2]}})})},e.prototype.close=function(){this.commandEventContext&&(this.commandEventContext.close(),this.commandEventContext=void 0)},e}(),rx=function(){function e(n){var t=n.limit,r=t===void 0?5:t;this.workersByKey={},this.limit=r}return e.prototype.run=function(n,t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){switch(i.label){case 0:return this.workersByKey[n]||(this.workersByKey[n]=[]),this.workersByKey[n].length<this.limit?(this.workersByKey[n].push(t),[4,t()]):[3,2];case 1:return r=i.sent(),this.workersByKey[n].pop(),[2,r];case 2:throw ee.tooManyRequests}})})},e.prototype.clear=function(n){this.workersByKey[n]=[]},e}();(function(e){e.DELIVERY_RECEIPT="delivery_receipt",e.PUSH_ACKNOWLEDGEMENT="push_acknowledgement"})(ep||(ep={}));var fe,ix=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t._pushAckedCache={},t}return z(n,e),n.prototype.isAcked=function(t,r){var i,a="".concat(t,"_").concat(r);return(i=this._pushAckedCache[a])!==null&&i!==void 0&&i},n.prototype.markAsAcked=function(t,r){var i="".concat(t,"_").concat(r);this._pushAckedCache[i]=!0},n.prototype.clear=function(){X.of(this._iid).logger.debug("clear push acked cache"),this._pushAckedCache={}},n.prototype.parseData=function(t){var r,i,a,s,o=X.of(this._iid).logger,l=t.sendbird;if(typeof l=="string")try{l=JSON.parse(l)}catch{throw o.info("push notification payload does not contain sendbird payload in JSON format."),ee.malformedDataError}if(!l||typeof l!="object")throw o.info("push notification payload does not contain sendbird payload in JSON format."),ee.malformedDataError;var u=(r=l.push_tracking_id)!==null&&r!==void 0?r:"",d=l.notification_message_id,f=l.notification_channel_key,m=l.notification_template_key,p=l.notification_event_deadline,E=(i=l.session_key)!==null&&i!==void 0?i:{},_=(a=E==null?void 0:E.key)!==null&&a!==void 0?a:"",b=(s=E==null?void 0:E.topics)!==null&&s!==void 0?s:[];if(typeof u!="string"||u.length===0)throw o.info("push tracking id is not available"),ee.malformedDataError;if(typeof d!="string"||d.length===0)throw o.info("message id is not available"),ee.malformedDataError;return{pushTrackingId:u,sessionKey:_,sessionTopics:b,messageId:d,channelKey:f,templateKey:m,notificationEventDeadline:p}},n}(Rr),ud=function(e){this.name=e.name,this._custom=e.custom,this._usedByModerationEngine=e.used_by_moderation_engine},ax=function(e){function n(){var t=e.call(this)||this;return t.method=Ie.GET,t.path=Mk,t}return z(n,e),n}(we),sx=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.reportCategories=r.categories,i}return z(n,e),n}(Pe),ox=function(e){function n(t){var r=e.call(this,t)||this;return r._categories=[],r}return z(n,e),n.prototype.categories=function(){return A(this,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return this._categories.length!==0?[3,2]:[4,this._fetchCategories()];case 1:t.sent(),t.label=2;case 2:return[2,this._categories]}})})},n.prototype._fetchCategories=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s;return I(this,function(o){switch(o.label){case 0:return t=X.of(this._iid).requestQueue,r=new ax,[4,t.send(r)];case 1:return i=o.sent(),(a=i.as(sx).reportCategories)&&(s=this._categories).push.apply(s,Nt([],ut(a.map(function(l){return new ud(l)})),!1)),[2]}})})},n}(Rr),yu={},X=function(){function e(n,t){var r,i,a,s,o,l,u,d,f;if(this.connectedAt=0,this.firstConnectedAt=0,this.connectionHandlers=new Map,this.userEventHandlers=new Map,!yu[n]){yu[n]=this;var m=(r=t.options)!==null&&r!==void 0?r:new Ww,p=this.sdkState={appId:t.appId,appVersion:(i=t.appVersion)!==null&&i!==void 0?i:"",appState:"foreground",userId:void 0,extensions:{},api:{host:(a=t.apiHost)!==null&&a!==void 0?a:"https://api-".concat(t.appId,".sendbird.com")},websocket:{host:(s=t.websocketHost)!==null&&s!==void 0?s:"wss://ws-".concat(t.appId,".sendbird.com"),pingerDisabled:!!t.noPingpong,pingInterval:void 0,pongTimeout:void 0,connectMaxRetry:2,compression:!0,reconnectMaxRetry:-1,reconnectRetryStrategy:new O2,responseTimeout:m.websocketResponseTimeout},sessionTokenRefreshTimeout:m.sessionTokenRefreshTimeout};this.appInfo=void 0,this.subscribedUnreadMessageCount={all:0,feed:0,customTypes:{},ts:0};var E=this.logger=t.logger;this.connectedAt=0,this.firstConnectedAt=0,this.connectionHandlers=new Map,this.userEventHandlers=new Map;var _=this.cacheContext=new ck({encryption:t.encryption,store:t.store,localCacheEnabled:(o=t.localCacheEnabled)!==null&&o!==void 0&&o,localCacheConfig:(l=t.localCacheConfig)!==null&&l!==void 0?l:new Yw});this.debugMode=(u=t.debugMode)!==null&&u!==void 0&&u,this.maxSuperGroupChannelUnreadCount=Bl.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL,this.useMemberInfoInMessage=m.useMemberInfoInMessage,this.typingIndicatorInvalidateTime=m.typingIndicatorInvalidateTime,this.typingIndicatorThrottle=m.typingIndicatorThrottle,this.concurrentCallLimit=void 0,this.backOffDelay=void 0;var b=this.dispatcher=new fk,C=new hk;this.requestQueue=new YP(n,{session:C,sdkState:p,dispatcher:b,logger:E,useFetchCompat:t.useFetchCompat}),this.pushNotificationAckManager=new ix(n),this.sessionManager=new XP({_iid:n,session:C,cacheContext:_,sdkState:p,dispatcher:b,requestQueue:this.requestQueue,logger:E,pushNotificationAckManager:this.pushNotificationAckManager}),this.connectionManager=new VP(n,{sdkState:p,cacheContext:this.cacheContext,connectionHandlers:this.connectionHandlers,dispatcher:b,sessionManager:this.sessionManager,websocketClient:this.requestQueue.commandRouter.websocketClient,disableWebSocketCloseEventHandling:(d=t.disableWebSocketCloseEventHandling)!==null&&d!==void 0&&d,logger:E}),this.statManager=new nx({cacheContext:this.cacheContext,requestQueue:this.requestQueue,dispatcher:this.dispatcher,logger:E}),this.appStateToggleEnabled=(f=t.appStateToggleEnabled)===null||f===void 0||f,this.messageBackgroundSyncThrottleController=new rx({limit:5}),this.reportCategoryManager=new ox(n)}return yu[n]}return e.of=function(n){if(yu[n])return yu[n];throw ee.lostInstance},e.clear=function(n){yu[n]&&delete yu[n]},e.prototype.hasExtension=function(n){return this.sdkState.extensions&&this.sdkState.extensions[n]},e}(),Pp=function(){function e(){}return e.prototype.init=function(n,t){var r=t.sdkState,i=t.dispatcher,a=t.sessionManager,s=t.requestQueue,o=t.logger;t.onlineDetector;var l=t.cacheContext;this._iid=n,this._cacheContext=l,this._sdkState=r,this._dispatcher=i,this._sessionManager=a,this._requestQueue=s,this._logger=o},e}();(function(e){e.UNKNOWN="UNKNOWN",e.EVENT_CHANNEL_CREATED="EVENT_CHANNEL_CREATED",e.EVENT_CHANNEL_UPDATED="EVENT_CHANNEL_UPDATED",e.EVENT_CHANNEL_DELETED="EVENT_CHANNEL_DELETED",e.EVENT_CHANNEL_READ="EVENT_CHANNEL_READ",e.EVENT_CHANNEL_DELIVERED="EVENT_CHANNEL_DELIVERED",e.EVENT_CHANNEL_INVITED="EVENT_CHANNEL_INVITED",e.EVENT_CHANNEL_JOINED="EVENT_CHANNEL_JOINED",e.EVENT_CHANNEL_LEFT="EVENT_CHANNEL_LEFT",e.EVENT_CHANNEL_ACCEPTED_INVITE="EVENT_CHANNEL_ACCEPTED_INVITE",e.EVENT_CHANNEL_DECLINED_INVITE="EVENT_CHANNEL_DECLINED_INVITE",e.EVENT_CHANNEL_OPERATOR_UPDATED="EVENT_CHANNEL_OPERATOR_UPDATED",e.EVENT_CHANNEL_BANNED="EVENT_CHANNEL_BANNED",e.EVENT_CHANNEL_UNBANNED="EVENT_CHANNEL_UNBANNED",e.EVENT_CHANNEL_MUTED="EVENT_CHANNEL_MUTED",e.EVENT_CHANNEL_UNMUTED="EVENT_CHANNEL_UNMUTED",e.EVENT_CHANNEL_FROZEN="EVENT_CHANNEL_FROZEN",e.EVENT_CHANNEL_UNFROZEN="EVENT_CHANNEL_UNFROZEN",e.EVENT_CHANNEL_HIDDEN="EVENT_CHANNEL_HIDDEN",e.EVENT_CHANNEL_UNHIDDEN="EVENT_CHANNEL_UNHIDDEN",e.EVENT_CHANNEL_RESET_HISTORY="EVENT_CHANNEL_RESET_HISTORY",e.EVENT_CHANNEL_TYPING_STATUS_UPDATE="EVENT_CHANNEL_TYPING_STATUS_UPDATE",e.EVENT_CHANNEL_MEMBER_COUNT_UPDATED="EVENT_CHANNEL_MEMBER_COUNT_UPDATED",e.EVENT_CHANNEL_METADATA_CREATED="EVENT_CHANNEL_METADATA_CREATED",e.EVENT_CHANNEL_METADATA_UPDATED="EVENT_CHANNEL_METADATA_UPDATED",e.EVENT_CHANNEL_METADATA_DELETED="EVENT_CHANNEL_METADATA_DELETED",e.EVENT_CHANNEL_METACOUNTER_CREATED="EVENT_CHANNEL_METACOUNTER_CREATED",e.EVENT_CHANNEL_METACOUNTER_UPDATED="EVENT_CHANNEL_METACOUNTER_UPDATED",e.EVENT_CHANNEL_METACOUNTER_DELETED="EVENT_CHANNEL_METACOUNTER_DELETED",e.EVENT_MESSAGE_SENT="EVENT_MESSAGE_SENT",e.EVENT_MESSAGE_RECEIVED="EVENT_MESSAGE_RECEIVED",e.EVENT_MESSAGE_UPDATED="EVENT_MESSAGE_UPDATED",e.EVENT_PINNED_MESSAGE_UPDATED="EVENT_PINNED_MESSAGE_UPDATED",e.REQUEST_CHANNEL="REQUEST_CHANNEL",e.REQUEST_CHANNEL_CHANGELOGS="REQUEST_CHANNEL_CHANGELOGS",e.REFRESH_CHANNEL="REFRESH_CHANNEL",e.CHANNEL_LASTACCESSEDAT_UPDATED="CHANNEL_LASTACCESSEDAT_UPDATED",e.SYNC_CHANNEL_BACKGROUND="SYNC_CHANNEL_BACKGROUND",e.SYNC_CHANNEL_CHANGELOGS="SYNC_CHANNEL_CHANGELOGS",e.EVENT_MESSAGE_SENT_SUCCESS="EVENT_MESSAGE_SENT_SUCCESS",e.EVENT_MESSAGE_SENT_FAILED="EVENT_MESSAGE_SENT_FAILED",e.EVENT_MESSAGE_SENT_PENDING="EVENT_MESSAGE_SENT_PENDING",e.EVENT_MESSAGE_DELETED="EVENT_MESSAGE_DELETED",e.EVENT_MESSAGE_FEEDBACK_ADDED="EVENT_MESSAGE_FEEDBACK_ADDED",e.EVENT_MESSAGE_FEEDBACK_UPDATED="EVENT_MESSAGE_FEEDBACK_UPDATED",e.EVENT_MESSAGE_FEEDBACK_DELETED="EVENT_MESSAGE_FEEDBACK_DELETED",e.EVENT_MESSAGE_READ="EVENT_MESSAGE_READ",e.EVENT_MESSAGE_DELIVERED="EVENT_MESSAGE_DELIVERED",e.EVENT_MESSAGE_REACTION_UPDATED="EVENT_MESSAGE_REACTION_UPDATED",e.EVENT_MESSAGE_THREADINFO_UPDATED="EVENT_MESSAGE_THREADINFO_UPDATED",e.EVENT_MESSAGE_OFFSET_UPDATED="EVENT_MESSAGE_OFFSET_UPDATED",e.REQUEST_MESSAGE="REQUEST_MESSAGE",e.EVENT_THREAD_INFO_UPDATED="EVENT_THREADINFO_UPDATED",e.EVENT_POLL_UPDATED="EVENT_POLL_UPDATED",e.EVENT_POLL_VOTED="EVENT_POLL_VOTED",e.SYNC_POLL_CHANGELOGS="SYNC_POLL_CHANGELOGS",e.REQUEST_RESEND_MESSAGE="REQUEST_RESEND_MESSAGE",e.REQUEST_THREADED_MESSAGE="REQUEST_THREADED_MESSAGE",e.REQUEST_MESSAGE_CHANGELOGS="REQUEST_MESSAGE_CHANGELOGS",e.SYNC_MESSAGE_FILL="SYNC_MESSAGE_FILL",e.SYNC_MESSAGE_BACKGROUND="SYNC_MESSAGE_BACKGROUND",e.SYNC_MESSAGE_CHANGELOGS="SYNC_MESSAGE_CHANGELOGS",e.LOCAL_MESSAGE_PENDING_CREATED="LOCAL_MESSAGE_PENDING_CREATED",e.LOCAL_MESSAGE_FAILED="LOCAL_MESSAGE_FAILED",e.LOCAL_MESSAGE_CANCELED="LOCAL_MESSAGE_CANCELED",e.LOCAL_MESSAGE_RESEND_STARTED="LOCAL_MESSAGE_RESEND_STARTED"})(fe||(fe={}));var pd;Y({},fe);var No=function(e){return e.startsWith("EVENT_")||e.startsWith("LOCAL_MESSAGE_")||e===fe.SYNC_MESSAGE_FILL||e===fe.SYNC_MESSAGE_CHANGELOGS||e===fe.SYNC_POLL_CHANGELOGS},er=function(e){function n(t){var r=t.messages,i=t.source,a=t.isWebSocketEventComing,s=a!==void 0&&a,o=e.call(this)||this;return o.messages=r,o.source=i,o.isWebSocketEventComing=s,o}return z(n,e),n}(qn),Tb=function(e){function n(t){var r=t.messageIds,i=t.source,a=t.isWebSocketEventComing,s=a!==void 0&&a,o=e.call(this)||this;return o.messageIds=r,o.source=i,o.isWebSocketEventComing=s,o}return z(n,e),n}(qn),x2=function(e){function n(t){var r=t.messageDeletionTimestamp,i=t.channelUrl,a=t.source,s=e.call(this)||this;return s.messageDeletionTimestamp=r,s.channelUrl=i,s.source=a,s}return z(n,e),n}(qn),F2=function(e){function n(t){var r=t.event,i=t.source,a=t.isWebSocketEventComing,s=a!==void 0&&a,o=e.call(this)||this;return o.event=r,o.source=i,o.isWebSocketEventComing=s,o}return z(n,e),n}(qn),B2=function(e){function n(t){var r=t.event,i=t.source,a=t.isWebSocketEventComing,s=a!==void 0&&a,o=e.call(this)||this;return o.event=r,o.source=i,o.isWebSocketEventComing=s,o}return z(n,e),n}(qn),H2=function(e){function n(t){var r=t.reqId,i=t.source,a=e.call(this)||this;return a.reqId=r,a.source=i,a}return z(n,e),n}(qn),G2=function(e){function n(t){var r=t.polls,i=t.source,a=e.call(this)||this;return a.polls=r,a.source=i,a}return z(n,e),n}(qn),Mb=function(e){function n(t){var r=t.event,i=t.source,a=e.call(this)||this;return a.event=r,a.source=i,a}return z(n,e),n}(qn),xp=function(e){function n(t){var r=t.event,i=t.source,a=e.call(this)||this;return a.event=r,a.source=i,a}return z(n,e),n}(qn);(function(e){e.OPEN="open",e.CLOSED="closed"})(pd||(pd={}));var z2="removed",hE=function(e){switch(e){case"open":return pd.OPEN;case"closed":return pd.CLOSED;default:return null}},j2=function(e){return!e||!!e.text&&Z("string",e.text)},Am=function(e){function n(t,r){var i,a,s,o,l,u,d,f=this;return(f=e.call(this,t)||this).pollId=0,f.id=0,f.text=null,f.voteCount=0,f.createdBy=null,f.createdAt=0,f.updatedAt=0,f._lastVotedAt=0,f.pollId=(i=r.poll_id)!==null&&i!==void 0?i:0,f.id=(a=r.id)!==null&&a!==void 0?a:0,f.text=(s=r.text)!==null&&s!==void 0?s:null,f.voteCount=(o=r.vote_count)!==null&&o!==void 0?o:0,f.createdBy=(l=r.created_by)!==null&&l!==void 0?l:null,f.createdAt=(u=r.created_at)!==null&&u!==void 0?u:0,f.updatedAt=(d=r.updated_at)!==null&&d!==void 0?d:0,f}return z(n,e),n.payloadify=function(t){return Qe(vt(Y(Y({},e.payloadify.call(this,t)),{vote_count:t.voteCount,poll_id:t.pollId,text:t.text,created_at:t.createdAt,id:t.id,created_by:t.createdBy,updated_at:t.updatedAt})))},n}(Rr),os=function(e){function n(t,r){var i,a,s,o,l,u,d,f,m,p,E,_,b,C=this;return(C=e.call(this,t)||this).id=0,C.title=null,C.createdAt=0,C.updatedAt=0,C.closeAt=-1,C.status=pd.CLOSED,C.messageId=0,C.data=null,C.voterCount=-1,C.options=[],C.createdBy=null,C.allowUserSuggestion=!1,C.allowMultipleVotes=!1,C.votedPollOptionIds=[],C.id=(i=r.id)!==null&&i!==void 0?i:0,C.title=(a=r.title)!==null&&a!==void 0?a:null,C.createdAt=(s=r.created_at)!==null&&s!==void 0?s:0,C.updatedAt=(o=r.updated_at)!==null&&o!==void 0?o:0,C.closeAt=(l=r.close_at)!==null&&l!==void 0?l:-1,C.status=(u=hE(r.status))!==null&&u!==void 0?u:pd.CLOSED,C.messageId=(d=r.message_id)!==null&&d!==void 0?d:0,C.data=(f=r.data)!==null&&f!==void 0?f:null,C.voterCount=(m=r.voter_count)!==null&&m!==void 0?m:-1,C.options=r.options?r.options.map(function(y){return new Am(C._iid,y)}):[],C.createdBy=(p=r.created_by)!==null&&p!==void 0?p:null,C.allowUserSuggestion=(E=r.allow_user_suggestion)!==null&&E!==void 0&&E,C.allowMultipleVotes=(_=r.allow_multiple_votes)!==null&&_!==void 0&&_,C.votedPollOptionIds=(b=r.voted_option_ids)!==null&&b!==void 0?b:[],C}return z(n,e),n.prototype._applyPollUpdatePayload=function(t){var r,i,a,s,o,l,u,d,f=this;this.title=(r=t.title)!==null&&r!==void 0?r:this.title,this.updatedAt=(i=t.updated_at)!==null&&i!==void 0?i:this.updatedAt,this.closeAt=(a=t.close_at)!==null&&a!==void 0?a:this.closeAt,this.status=(s=hE(t.status))!==null&&s!==void 0?s:this.status,this.data=(o=t.data)!==null&&o!==void 0?o:this.data,this.voterCount=(l=t.voter_count)!==null&&l!==void 0?l:this.voterCount,t.options&&(this.options=t.options.map(function(m){return new Am(f._iid,m)}),this.votedPollOptionIds=t.options.filter(function(m){return m.vote_count>0}).map(function(m){return m.id})),this.allowUserSuggestion=(u=t.allow_user_suggestion)!==null&&u!==void 0?u:this.allowUserSuggestion,this.allowMultipleVotes=(d=t.allow_multiple_votes)!==null&&d!==void 0?d:this.allowMultipleVotes},n.payloadify=function(t){return Qe(vt(Y(Y({},e.payloadify.call(this,t)),{id:t.id,title:t.title,created_at:t.createdAt,updated_at:t.updatedAt,close_at:t.closeAt,status:t.status,message_id:t.messageId,data:t.data,voter_count:t.voterCount,options:t.options.map(function(r){return Am.payloadify(r)}),created_by:t.createdBy,allow_user_suggestion:t.allowUserSuggestion,allow_multiple_votes:t.allowMultipleVotes,voted_option_ids:t.votedPollOptionIds})))},n.prototype.applyPollUpdateEvent=function(t){var r=t._payload.poll;return!(!r||this.id!==r.id||r.updated_at<this.updatedAt)&&(this._applyPollUpdatePayload(r),!0)},n.prototype.applyPollVoteEvent=function(t){if(this.id!==t.pollId)return!1;var r=this.options,i=r.map(function(o){return o.id}),a=t._payload,s=Math.floor(a.ts/1e3);return a.updated_vote_counts.forEach(function(o){var l=i.indexOf(o.option_id);if(l>-1){var u=r[l];s>=u._lastVotedAt&&(u.voteCount=o.vote_count,u._lastVotedAt=s)}}),a.req_id&&a.voted_option_ids&&(this.votedPollOptionIds=a.voted_option_ids),typeof a.voter_count=="number"&&(this.voterCount=a.voter_count),!0},n.prototype.serialize=function(){return Ad(this)},n}(Rr),qo=function(){function e(n,t){var r;this.limit=20,this._isLoading=!1,this._hasNext=!0,this._token="",this._iid=n,this.limit=(r=t.limit)!==null&&r!==void 0?r:20}return Object.defineProperty(e.prototype,"hasNext",{get:function(){return this._hasNext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get:function(){return this._isLoading},enumerable:!1,configurable:!0}),e.prototype._validate=function(){return Z("number",this.limit)&&this.limit>0},e}(),ro=function(e){function n(t,r,i,a){var s=e.call(this,t,a)||this;return s.channelUrl=r,s.channelType=i,s}return z(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&Z("string",this.channelUrl)&&Wt(ln,this.channelType)},n}(qo),lx=function(e){this.pollId=0,this.messageId=0,this.pollId=e.poll_id,this.messageId=e.message_id,this._payload=e},ux=function(e){function n(t){var r=t.title,i=t.optionTexts,a=t.data,s=t.allowUserSuggestion,o=t.allowMultipleVotes,l=t.closeAt,u=e.call(this)||this;return u.method=Ie.POST,u.path=Us,u.params={title:r,options:i,data:a,allow_user_suggestion:s,allow_multiple_votes:o,close_at:l},u}return z(n,e),n}(we),cx=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.poll=new os(t,r),i}return z(n,e),n}(Pe),dx=function(e){function n(t){var r=t.channelUrl,i=t.channelType,a=t.pollId,s=e.call(this)||this;return s.method=Ie.GET,s.path="".concat(Us,"/").concat(encodeURIComponent(a)),s.params={channel_url:r,channel_type:i},s}return z(n,e),n}(we),hx=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.poll=new os(t,r),i}return z(n,e),n}(Pe),fx=function(e){function n(t){var r=t.channelUrl,i=t.channelType,a=t.pollId,s=t.pollOptionId,o=e.call(this)||this;return o.method=Ie.GET,o.path="".concat(Us,"/").concat(encodeURIComponent(a),"/options/").concat(encodeURIComponent(s)),o.params={channel_url:r,channel_type:i},o}return z(n,e),n}(we),vx=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.pollOption=new Am(t,r),i}return z(n,e),n}(Pe),mx=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.timestamp,s=t.token,o=e.call(this)||this;return o.method=Ie.GET,o.path="".concat(yn(r),"/").concat(encodeURIComponent(i),"/polls/changelogs"),o.params=Qe({change_ts:a,token:s}),o}return z(n,e),n}(we),px=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.updatedPolls=r.updated.map(function(a){return function(s,o){return new os(s,o)}(t,a)}),i.deletedPollIds=r.deleted.map(function(a){return a}),i.hasMore=r.has_more,i.nextToken=r.next,i}return z(n,e),n}(Pe),gx={title:"",optionTexts:[],data:void 0,allowUserSuggestion:void 0,allowMultipleVotes:void 0,closeAt:-1},V2=function(e){return Z("string",e.title)&&(n=e.optionTexts,Qt("string",n)&&n.every(function(t){return t.trim()!==""}))&&j2(e.data)&&Z("boolean",e.allowUserSuggestion,!0)&&Z("boolean",e.allowMultipleVotes,!0)&&Z("number",e.closeAt,!0);var n},_x={channelUrl:"",channelType:ln.BASE,pollId:0,pollOptionId:0},$2=function(e){return Z("string",e.channelUrl)&&e.channelUrl!==""&&Wt(ln,e.channelType)&&Z("number",e.pollId)&&e.pollId>0&&Z("number",e.pollOptionId)&&e.pollOptionId>0},Ex={channelUrl:"",channelType:ln.BASE,pollId:0},q2=function(e){return Z("string",e.channelUrl)&&e.channelUrl!==""&&Wt(ln,e.channelType)&&Z("number",e.pollId)},lM={},tp=function(){function e(n,t){var r=t.sdkState,i=t.dispatcher,a=t.sessionManager,s=t.requestQueue,o=t.logger;this._iid=n,this._sdkState=r,this._sessionManager=a,this._requestQueue=s,this._dispatcher=i,this._logger=o,lM[n]=this}return e.of=function(n){return lM[n]},e.prototype.buildPollFromSerializedData=function(n){var t=ko(n);return new os(this._iid,os.payloadify(t))},e.prototype.get=function(n){return A(this,void 0,void 0,function(){var t,r;return I(this,function(i){switch(i.label){case 0:return Oe(q2(n)).throw(ee.invalidParameters),t=new dx(Y({},n)),[4,this._requestQueue.send(t)];case 1:return r=i.sent(),[2,r.as(hx).poll]}})})},e.prototype.create=function(n){return A(this,void 0,void 0,function(){var t,r;return I(this,function(i){switch(i.label){case 0:return Oe(V2(n)).throw(ee.invalidParameters),t=new ux(Y({},n)),[4,this._requestQueue.send(t)];case 1:return r=i.sent(),[2,r.as(cx).poll]}})})},e.prototype.getOption=function(n){return A(this,void 0,void 0,function(){var t,r;return I(this,function(i){switch(i.label){case 0:return Oe($2(n)).throw(ee.invalidParameters),t=new fx(Y({},n)),[4,this._requestQueue.send(t)];case 1:return r=i.sent(),[2,r.as(vx).pollOption]}})})},e.prototype.getPollChangeLogs=function(n,t,r,i){return i===void 0&&(i=fe.SYNC_POLL_CHANGELOGS),A(this,void 0,void 0,function(){var a,s,o,l,u,d,f;return I(this,function(m){switch(m.label){case 0:return a=new mx(vt({channelType:t,channelUrl:n,timestamp:typeof r=="number"?r:null,token:typeof r=="string"?r:null})),[4,this._requestQueue.send(a)];case 1:return s=m.sent(),o=s.as(px),l=o.updatedPolls,u=o.deletedPollIds,d=o.hasMore,f=o.nextToken,l.length>0&&this._dispatcher.dispatch(new G2({polls:l,source:i})),[2,{updatedPolls:l,deletedPollIds:u,hasMore:d,token:f}]}})})},e}(),yx=function(e){function n(t){var r=t.channelUrl,i=t.channelType,a=t.token,s=t.limit,o=e.call(this)||this;return o.method=Ie.GET,o.path=Us,o.params={channel_url:r,channel_type:i,token:a,limit:s},o}return z(n,e),n}(we),bx=function(e){function n(t,r){var i,a=this;return(a=e.call(this,t,r)||this).polls=((i=r.polls)!==null&&i!==void 0?i:[]).map(function(s){return new os(t,s)}),a.token=r.next,a}return z(n,e),n}(Pe),K2=function(e){function n(t,r){return e.call(this,t,r.channelUrl,r.channelType,r)||this}return z(n,e),n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return I(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=X.of(this._iid).requestQueue,r=new yx(Y(Y({},this),{token:this._token})),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),a=i.as(bx),s=a.polls,o=a.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw ee.queryInProgress;case 4:return[3,6];case 5:throw ee.invalidParameters;case 6:return[2]}})})},n}(ro),Cx=function(e){function n(t){var r=t.channelUrl,i=t.channelType,a=t.pollId,s=t.pollOptionId,o=t.token,l=t.limit,u=e.call(this)||this;return u.method=Ie.GET,u.path="".concat(Us,"/").concat(encodeURIComponent(a),"/options/").concat(encodeURIComponent(s),"/voters"),u.params={channel_url:r,channel_type:i,token:o,limit:l},u}return z(n,e),n}(we),Sx=function(e){function n(t,r){var i,a=this;return(a=e.call(this,t,r)||this).voters=((i=r.voters)!==null&&i!==void 0?i:[]).map(function(s){return new Yt(t,s)}),a.token=r.next,a}return z(n,e),n}(Pe),W2=function(e){function n(t,r){var i=e.call(this,t,r.channelUrl,r.channelType,r)||this;return i.pollId=r.pollId,i.pollOptionId=r.pollOptionId,i}return z(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&Z("number",this.pollId)&&Z("number",this.pollOptionId)},n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return I(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=X.of(this._iid).requestQueue,r=new Cx(Y(Y({},this),{pollId:this.pollId,pollOptionId:this.pollOptionId,token:this._token})),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),a=i.as(Sx),s=a.voters,o=a.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw ee.queryInProgress;case 4:return[3,6];case 5:throw ee.invalidParameters;case 6:return[2]}})})},n}(ro),Xu,Ko=function(){function e(n,t,r){var i,a;this.width=0,this.height=0,this.realWidth=0,this.realHeight=0,this._requireAuth=!1,this._iid=n,this.plainUrl=t.url,this.width=t.width,this.height=t.height,this.realWidth=(i=t.real_width)!==null&&i!==void 0?i:t.width,this.realHeight=(a=t.real_height)!==null&&a!==void 0?a:t.height,this._requireAuth=r}return e.payloadify=function(n){return Qe(vt(n instanceof e?{url:n.plainUrl,width:n.width,height:n.height,real_width:n.realWidth,real_height:n.realHeight}:{url:"",width:n.maxWidth,height:n.maxHeight,real_width:0,real_height:0}))},Object.defineProperty(e.prototype,"url",{get:function(){var n=X.of(this._iid).sessionManager;return this._requireAuth&&n.ekey?"".concat(this.plainUrl,"?auth=").concat(n.ekey):this.plainUrl},enumerable:!1,configurable:!0}),e}(),np=function(e){function n(t){var r=e.call(this)||this;if(r.method=Ie.POST,r.path="".concat(mk),r.params=Qe({file:t.file,channel_url:t.channelUrl}),t.thumbnailSizes)for(var i=0;i<t.thumbnailSizes.length;i++){var a=t.thumbnailSizes[i],s=a.maxWidth,o=a.maxHeight;r.params["thumbnail".concat(i+1)]="".concat(s,",").concat(o)}return r.requestId=t.requestId,r}return z(n,e),n}(we),rp=function(e){function n(t,r){var i,a,s,o,l=this;return(l=e.call(this,t,r)||this).url=r.url,l.fileSize=(i=r.file_size)!==null&&i!==void 0?i:0,l.thumbnails=(s=(a=r.thumbnails)===null||a===void 0?void 0:a.map(function(u){return new Ko(t,u,!1)}))!==null&&s!==void 0?s:[],l.requireAuth=(o=r.require_auth)!==null&&o!==void 0&&o,l}return z(n,e),n}(Pe),ip=function(e){function n(t,r){var i,a,s,o,l,u=this;return(u=e.call(this,t)||this).replyCount=0,u.memberCount=0,u.lastRepliedAt=0,u.updatedAt=0,u.replyCount=(i=r.reply_count)!==null&&i!==void 0?i:0,u.memberCount=(a=r.member_count)!==null&&a!==void 0?a:0,u.mostRepliedUsers=r.most_replies&&Qt("object",r.most_replies)?r.most_replies.map(function(d){return new Yt(u._iid,d)}):[],u.unreadReplyCount=(s=r.unread_message_count)!==null&&s!==void 0?s:0,u.isPushNotificationEnabled=typeof r.push_enabled=="number"?r.push_enabled>0:void 0,u.lastRepliedAt=(o=r.last_replied_at)!==null&&o!==void 0?o:0,u.updatedAt=(l=r.updated_at)!==null&&l!==void 0?l:0,u}return z(n,e),n.payloadify=function(t){return Qe(vt(Y(Y({},e.payloadify.call(this,t)),{reply_count:t.replyCount,unread_message_count:t.unreadReplyCount,member_count:t.memberCount,most_replies:Array.isArray(t.mostRepliedUsers)?t.mostRepliedUsers.map(function(r){return Yt.payloadify(r)}):[],push_enabled:typeof t.isPushNotificationEnabled=="boolean"?t.isPushNotificationEnabled?1:0:void 0,last_replied_at:t.lastRepliedAt,updated_at:t.updatedAt})))},Object.defineProperty(n.prototype,"_isUpdateRequired",{get:function(){return this.unreadReplyCount===void 0||this.isPushNotificationEnabled===void 0},enumerable:!1,configurable:!0}),n.prototype._updateFrom=function(t){var r,i;this.unreadReplyCount=(r=t.unreadReplyCount)!==null&&r!==void 0?r:this.unreadReplyCount,this.isPushNotificationEnabled=(i=t.isPushNotificationEnabled)!==null&&i!==void 0?i:this.isPushNotificationEnabled},n}(Rr);(function(e){e.ADD="add",e.DELETE="delete"})(Xu||(Xu={}));var Ll,Nb=function(e){var n;this.messageId=0,this.operation=null,this.updatedAt=0;var t=Z("string",e.msg_id)?parseInt(e.msg_id):e.msg_id,r=e.user_id,i=e.operation?e.operation.toLowerCase():null,a=e.reaction,s=e.updated_at,o=e.count,l=e.sampled_user_ids,u=(n=e.sampled_user_info)!==null&&n!==void 0?n:{};t&&Z("string",r)&&Z("string",i)&&Wt(Xu,i)&&Z("string",a)&&a&&Z("number",s)&&(this.messageId=t,this.userId=r,this.key=a,this.operation=i,this.updatedAt=s,this._count=o,this._sampledUserIds=l,this._sampledUserInfoList=u)},f_=function(e){function n(t,r,i){var a,s=this;return(s=e.call(this,t)||this).userId=r,s.nickname=i.nickname,s.plainProfileUrl=i.profile_url,s.requireAuth=(a=i.require_auth_for_profile_image)!==null&&a!==void 0&&a,s}return z(n,e),Object.defineProperty(n.prototype,"profileUrl",{get:function(){var t=X.of(this._iid).sessionManager;return this.requireAuth&&t.ekey?"".concat(this.plainProfileUrl,"?auth=").concat(t.ekey):this.plainProfileUrl},enumerable:!1,configurable:!0}),n.payloadify=function(t){return{nickname:t.nickname,profile_url:t.plainProfileUrl,require_auth_for_profile_image:t.requireAuth}},n}(Rr),yh=function(e){function n(t,r){var i,a,s,o,l,u,d,f,m,p=this;(p=e.call(this,t)||this)._sampledUserInfoList=[],p._count=0,p._hasCurrentUserReacted=!1;var E=r.key,_=Nt([],ut((o=(s=r.sampled_user_ids)!==null&&s!==void 0?s:r.user_ids)!==null&&o!==void 0?o:[]),!1),b=(u=(l=r.last_ts)!==null&&l!==void 0?l:r.updated_at)!==null&&u!==void 0?u:0,C=(d=r.is_self_included)!==null&&d!==void 0?d:_.includes(X.of(t).sdkState.userId),y=(f=r.sampled_user_info)!==null&&f!==void 0?f:{};Z("string",E)&&E&&Qt("string",_)&&_.length>0&&Z("number",b)&&(p.key=E,p._sampledUserIds=_,p._updatedAt=b,p._count=(m=r.count)!==null&&m!==void 0?m:_.length,p._hasCurrentUserReacted=C,Object.keys(y).forEach(function(O){p._sampledUserInfoList.push(new f_(t,O,y[O]))}));var T={};try{for(var N=Ge(p.sampledUserIds),w=N.next();!w.done;w=N.next())T[w.value]=p.updatedAt}catch(O){i={error:O}}finally{try{w&&!w.done&&(a=N.return)&&a.call(N)}finally{if(i)throw i.error}}return p._version=T,p}return z(n,e),Object.defineProperty(n.prototype,"isEmpty",{get:function(){return this._count===0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"userIds",{get:function(){return this._sampledUserIds},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sampledUserIds",{get:function(){return this._sampledUserIds},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sampledUserInfoList",{get:function(){return this._sampledUserInfoList},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"updatedAt",{get:function(){return this._updatedAt},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasCurrentUserReacted",{get:function(){return this._hasCurrentUserReacted},enumerable:!1,configurable:!0}),n.payloadify=function(t){var r={};return t._sampledUserInfoList.forEach(function(i){r[i.userId]=f_.payloadify(i)}),Qe(vt({key:t.key,sampled_user_ids:t._sampledUserIds,sampled_user_info:r,count:t._count,is_self_included:t._hasCurrentUserReacted,last_ts:t._updatedAt}))},n.prototype.applyEvent=function(t){var r=this;if(t.key===this.key&&this.updatedAt<=t.updatedAt)if(t._sampledUserIds)this._sampledUserIds=t._sampledUserIds,this._sampledUserInfoList=[],Object.keys(t._sampledUserInfoList).forEach(function(a){r._sampledUserInfoList.push(new f_(r._iid,a,t._sampledUserInfoList[a]))}),this._count=t._count,t._hasCurrentUserReacted!==void 0&&(this._hasCurrentUserReacted=t._hasCurrentUserReacted),this._updatedAt=t.updatedAt;else{if(!this._version[t.userId]||this._version[t.userId]<=t.updatedAt){var i=this._sampledUserIds.indexOf(t.userId);switch(t.operation){case Xu.ADD:i<0&&this._sampledUserIds.push(t.userId);break;case Xu.DELETE:i>=0&&this._sampledUserIds.splice(i,1)}this._count=this._sampledUserIds.length,this._version[t.userId]=t.updatedAt}this._updatedAt=Math.max(this.updatedAt,t.updatedAt)}},n}(Rr),uM=function(){function e(n){this.secureUrl=null,this.type=null,this.width=0,this.height=0,this.alt=null,this.url=n.url,n.secure_url&&(this.secureUrl=n.secure_url),n.type&&(this.type=n.type),n.width&&(this.width=n.width),n.height&&(this.height=n.height),n.alt&&(this.alt=n.alt)}return e.payloadify=function(n){var t,r;return Qe(vt({url:n.url,secure_url:n.secureUrl,type:n.type,width:(t=n.width)!==null&&t!==void 0?t:0,height:(r=n.height)!==null&&r!==void 0?r:0,alt:n.alt}))},e}(),cM=function(){function e(n){this.title=null,this.url=null,this.description=null,this.defaultImage=null,n["og:title"]&&(this.title=n["og:title"]),n["og:url"]&&(this.url=n["og:url"]),n["og:description"]&&(this.description=n["og:description"]),n["og:image"]&&(this.defaultImage=new uM(n["og:image"]))}return e.payloadify=function(n){return Qe(vt({"og:title":n.title,"og:url":n.url,"og:description":n.description,"og:image":n.defaultImage?uM.payloadify(n.defaultImage):null}))},e}(),ls=function(){function e(n){var t,r;this.volume=0,this.name=(t=n.name)!==null&&t!==void 0?t:"default",this.volume=(r=n.volume)!==null&&r!==void 0?r:1}return e.prototype.serialize=function(){return{name:this.name,volume:this.volume}},e.payloadify=function(n){return Qe(vt({name:n.name,volume:n.volume}))},e}();(function(e){e.GOOD="good",e.BAD="bad"})(Ll||(Ll={}));var Lo=function(){function e(n){this.id=n.id,this.rating=n.rating,this.comment=n.comment}return e._getStatus=function(n){return n?"id"in n?"SUBMITTED":"NO_FEEDBACK":"NOT_APPLICABLE"},e._isSubmitted=function(n){return e._getStatus(n)==="SUBMITTED"},e._getPayloadByStatus=function(n){return n==="NO_FEEDBACK"?{}:null},e.payloadify=function(n){return Qe(vt({id:n.id,rating:n.rating,comment:n.comment}))},e}(),gd=function(e){function n(t,r){var i,a=this;return(a=e.call(this,t,r)||this).isBlockedByMe=!1,a.role=Wt(Zr,r.role)?r.role:Zr.NONE,a.isBlockedByMe=(i=r.is_blocked_by_me)!==null&&i!==void 0&&i,a}return z(n,e),n.payloadify=function(t){return Qe(vt(Y(Y({},e.payloadify.call(this,t)),{role:t.role,is_blocked_by_me:t.isBlockedByMe})))},n}(Yt),$r=function(){function e(n){this.key=n.key,this.value=Qt("string",n.value)?Nt([],ut(n.value),!1):[]}return e.payloadify=function(n){var t;return Qe(vt({key:n.key,value:(t=n.value)!==null&&t!==void 0?t:[]}))},e}(),Q2=function(e){switch(e){case Zn.BASE:return"";case Zn.USER:return"MESG";case Zn.FILE:return"FILE";case Zn.ADMIN:return"ADMM"}},Y2=function(e){function n(t,r){var i,a,s,o,l,u,d,f,m,p=this;(p=e.call(this,t)||this).channelType=ln.BASE,p.messageType=Zn.BASE,p.mentionType=null,p.mentionedUsers=null,p.mentionedUserIds=null,p.metaArrays=[],p.extendedMessage={},p.createdAt=0,p.updatedAt=0,p.channelUrl=r.channel_url,p.channelType=Wt(ln,r.channel_type)?r.channel_type:ln.GROUP,r.channel&&(r.channel.channel_url&&(p.channelUrl=r.channel.channel_url),r.channel.channel_type&&(p.channelType=r.channel.channel_type)),p.data=(i=r.data)!==null&&i!==void 0?i:"",p.customType=(a=r.custom_type)!==null&&a!==void 0?a:"",p.mentionType=Wt(gi,r.mention_type)?r.mention_type:null,p.mentionedUsers=r.mentioned_users?r.mentioned_users.map(function(y){return new Yt(p._iid,y)}):null,p.mentionedUserIds=(s=r.mentioned_user_ids)!==null&&s!==void 0?s:null,p.mentionedUsers&&!p.mentionedUserIds&&(p.mentionedUserIds=p.mentionedUsers.map(function(y){return y.userId}));var E=(o=r.metaarray)!==null&&o!==void 0?o:{},_=(l=r.metaarray_key_order)!==null&&l!==void 0?l:Object.keys(E).sort(function(y,T){return y.localeCompare(T)});p.metaArrays=[];for(var b=0;b<_.length;b++){var C=_[b];p.metaArrays.push(new $r({key:C,value:E[C]||[]}))}return r.sorted_metaarray&&(p.metaArrays=r.sorted_metaarray.map(function(y){return new $r(y)})),p.extendedMessage=(u=r.extended_message)!==null&&u!==void 0?u:{},p.extendedMessagePayload=r.extended_message_payload,p.createdAt=(f=(d=r.created_at)!==null&&d!==void 0?d:r.ts)!==null&&f!==void 0?f:0,p.updatedAt=(m=r.updated_at)!==null&&m!==void 0?m:0,p}return z(n,e),n.payloadify=function(t){var r,i;return Qe(vt(Y(Y({},e.payloadify.call(this,t)),{channel_url:t.channelUrl,channel_type:t.channelType,type:Q2(t.messageType),data:t.data,custom_type:t.customType,mention_type:t.mentionType,mentioned_user_ids:t.mentionedUserIds,mentioned_users:(r=t.mentionedUsers)===null||r===void 0?void 0:r.map(function(a){return Yt.payloadify(a)}),sorted_metaarray:(i=t.metaArrays)===null||i===void 0?void 0:i.map(function(a){return $r.payloadify(a)}),extended_message:t.extendedMessage,extended_message_payload:t.extendedMessagePayload,created_at:t.createdAt,updated_at:t.updatedAt})))},n.prototype.isIdentical=function(t){return!0},n.prototype.isEqual=function(t){return Kw(this,t)},n.prototype.isUserMessage=function(){return this.messageType===Zn.USER},n.prototype.isFileMessage=function(){return this.messageType===Zn.FILE&&!Object.prototype.hasOwnProperty.call(this,"fileInfoList")},n.prototype.isMultipleFilesMessage=function(){return this.messageType===Zn.FILE&&Object.prototype.hasOwnProperty.call(this,"fileInfoList")},n.prototype.isAdminMessage=function(){return this.messageType===Zn.ADMIN},n.prototype.serialize=function(){return Ad(this)},n.prototype.getMetaArraysByKeys=function(t){return this.metaArrays.filter(function(r){return t.includes(r.key)})},n}(Rr),X2=function(e){function n(t,r){var i,a,s=this;return(s=e.call(this,t)||this).channelUrl=(i=r.channel_url)!==null&&i!==void 0?i:"",s.channelType=(a=r.channel_type)!==null&&a!==void 0?a:ln.GROUP,s.reader=new Yt(s._iid,r.user),s.readAt=r.ts,s}return z(n,e),n}(Rr),Tx=function(e){function n(t){var r=t.channelUrl;return e.call(this,{code:"READ",ackRequired:!0,payload:{channel_url:r}})||this}return z(n,e),n}(pi);(function(e){function n(t){var r=e.call(this)||this,i=t.channelUrl,a=t.channelType,s=t.userId,o=t.notificationIds;return r.method=Ie.PUT,r.path="".concat(yn(a),"/").concat(encodeURIComponent(i),"/messages/mark_as_read"),r.params=Qe(vt({user_id:s,message_ids:o})),r}return z(n,e),n})(we);var Z2=function(e){function n(t,r,i){var a=e.call(this,t,"READ",i)||this;return a.readStatus=new X2(t,i),a}return z(n,e),n}(Yn);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.readAt=r.ts,i.unreadMessageCount=r.unread_message_count,i}return z(n,e),n})(Pe);var Mx=function(e){function n(t){var r=t.channelUrl,i=t.messageId;return e.call(this,{code:"READ",ackRequired:!0,payload:{channel_url:r,parent_message_id:i}})||this}return z(n,e),n}(pi),Nx=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=t.pushEnabled,o=e.call(this)||this;return o.method=Ie.PUT,o.path="".concat(yn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/thread_push"),o.params={push_enabled:s},o}return z(n,e),n}(we);(function(e){function n(t,r){return e.call(this,t,r)||this}z(n,e)})(Pe);var Ix=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=t.rating,o=t.comment,l=e.call(this)||this;return l.method=Ie.POST,l.path="".concat(yn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/feedbacks"),l.params={rating:s,comment:o},l}return z(n,e),n}(we),Ax=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.feedback=new Lo(r),i}return z(n,e),n}(Pe),wx=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=t.feedbackId,o=t.rating,l=t.comment,u=e.call(this)||this;return u.method=Ie.PUT,u.path="".concat(yn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/feedbacks/").concat(s),u.params={rating:o,comment:l},u}return z(n,e),n}(we),Rx=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.feedback=new Lo(r),i}return z(n,e),n}(Pe),Ox=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=t.feedbackId,o=e.call(this)||this;return o.method=Ie.DELETE,o.path="".concat(yn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/feedbacks/").concat(s),o}return z(n,e),n}(we);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.feedback=new Lo(r),i}z(n,e)})(Pe);var Ou,dM,fE=function(e){function n(t,r){var i,a,s,o,l,u=this;return(u=e.call(this,t)||this).plainUrl="",u.fileName=null,u.mimeType=null,u.fileSize=0,u.thumbnails=[],u._requireAuth=!1,u.plainUrl=(i=r.url)!==null&&i!==void 0?i:"",u.fileName=(a=r.file_name)!==null&&a!==void 0?a:null,u.mimeType=(s=r.file_type)!==null&&s!==void 0?s:null,u.fileSize=(o=r.file_size)!==null&&o!==void 0?o:0,u._requireAuth=(l=r.require_auth)!==null&&l!==void 0&&l,u.thumbnails=r.thumbnails?r.thumbnails.map(function(d){var f;return new Ko(u._iid,typeof d=="string"?{url:d,width:0,height:0}:Y(Y({},d),{url:((f=d.url)!==null&&f!==void 0?f:"").split("auth=")[0]}),u._requireAuth)}):[],u}return z(n,e),n.payloadify=function(t){var r;return Qe(vt({url:t.plainUrl,file_name:t.fileName,file_type:t.mimeType,file_size:t.fileSize,thumbnails:(r=t.thumbnails)===null||r===void 0?void 0:r.map(function(i){var a;return{url:((a=i.plainUrl)!==null&&a!==void 0?a:"").split("auth=")[0],width:i.width,height:i.height,real_width:i.realWidth,real_height:i.realHeight}}),require_auth:t._requireAuth}))},Object.defineProperty(n.prototype,"url",{get:function(){var t=X.of(this._iid).sessionManager;return this._requireAuth&&t.ekey?"".concat(this.plainUrl,"?auth=").concat(t.ekey):this.plainUrl},enumerable:!1,configurable:!0}),n}(Rr),J2=function(e){var n=e.channelUrl,t=e.channelType,r=e.parentMessage;this.channelUrl=n,this.channelType=t,this.parentMessage=r};(function(e){e.NUMBER="number",e.ENUM="enum",e.TEXT="text",e.REGEX="regex",e.DECIMAL_PLACE="decimal_place"})(Ou||(Ou={})),function(e){e.TEXT="text",e.TEXTAREA="textarea",e.NUMBER="number",e.PHONE="phone",e.EMAIL="email",e.CHIP="chip"}(dM||(dM={}));var xl,Pa,hM=function(){function e(n,t){var r=t.id,i=t.name,a=t.items,s=t.version,o=t.is_submitted;this.messageId=n,this.id=r,this.name=i,this.items=a.map(function(l){return new fM(l)}).sort(function(l,u){return l.sortOrder-u.sortOrder}),this.version=s??1,this._isSubmitted=o}return Object.defineProperty(e.prototype,"isSubmitted",{get:function(){var n;return(n=this._isSubmitted)!==null&&n!==void 0?n:this.items.some(function(t){return Array.isArray(t.submittedValues)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSubmittable",{get:function(){return this.items.every(function(n){return n.required?!!(Array.isArray(n.draftValues)&&n.draftValues.length>0)&&n.isValid(n.draftValues):!(Array.isArray(n.draftValues)&&n.draftValues.length>0)||n.isValid(n.draftValues)})},enumerable:!1,configurable:!0}),e.payloadify=function(n){return Qe(vt({id:n.id,name:n.name,items:n.items.map(function(t){return fM.payloadify(t)}),version:n.version,is_submitted:n._isSubmitted}))},e.isMessageFormPayload=function(n){return!!(n!=null&&n.message_form)},e}(),fM=function(){function e(n){var t=n.id,r=n.name,i=n.required,a=n.sort_order,s=n.placeholder,o=n.style,l=n.item_type,u=n.validators,d=n.value,f=n.values;this.id=t,this.name=r,this.required=i,this.sortOrder=a,this.placeholder=s,Object.keys(o).length===0?this.style={layout:l}:this.style=Qe({layout:o.layout,options:o.options,defaultOptions:o.default_options,resultCount:o.result_count}),f?this.submittedValues=f:d&&(this.submittedValues=[d]),this._validators=u}return e.prototype.isValid=function(n){var t=this;return n.every(function(r){var i=function(a,s){return s.every(function(o){switch(o.key){case Ou.NUMBER:var l=Number(a);return!(isNaN(l)||o.min&&typeof o.min!="number"||o.max&&typeof o.max!="number"||typeof o.min=="number"&&l<o.min||typeof o.max=="number"&&l>o.max);case Ou.ENUM:return typeof a=="string"&&(!(o.enums&&Array.isArray(o.enums)&&o.enums.length>0&&!o.enums.includes(a))||o.allow_other);case Ou.TEXT:return!(typeof a!="string"||typeof o.min_length=="number"&&a.length<o.min_length||typeof o.max_length=="number"&&a.length>o.max_length);case Ou.REGEX:return!(typeof a!="string"||o.regex&&(typeof o.regex!="string"||!new RegExp(o.regex).test(a)));case Ou.DECIMAL_PLACE:return a.length!==0&&(l=Number(a),!(isNaN(l)||(!o.max_decimal_place||typeof o.max_decimal_place=="number")&&o.max_decimal_place&&!function(u,d){var f=u.toString(),m=f.indexOf(".");return m===-1||f.slice(m+1).length<=d}(l,o.max_decimal_place)));default:return!0}})}(r,t._validators);return i})},e.payloadify=function(n){return Qe(vt({id:n.id,name:n.name,required:n.required,sort_order:n.sortOrder,placeholder:n.placeholder,style:Qe({layout:n.style.layout,options:n.style.options,default_options:n.style.defaultOptions,result_count:n.style.resultCount}),item_type:n.style.layout,validators:n._validators,values:n.submittedValues}))},e}(),Lx=function(e){function n(t){var r=e.call(this)||this;return r.method=Ie.POST,r.path="".concat(Tk,"/").concat(t.formId,"/submit"),r.params=Qe({message_id:t.messageId,items:t.items}),r}return z(n,e),n}(we);(function(e){e.PENDING="pending",e.SENT="sent",e.FAILED="failed",e.CANCELED="canceled"})(xl||(xl={})),function(e){e.PENDING="pending",e.IN_QUEUE="in_queue",e.SENT="sent",e.FAILED="failed",e.CANCELED="canceled",e.REMOVED="removed"}(Pa||(Pa={}));var zu,Mi=function(e){function n(t,r){var i,a,s,o,l,u,d,f,m,p=this;return(p=e.call(this,t,r)||this).parentMessage=null,p.silent=!1,p.isOperatorMessage=!1,p.threadInfo=null,p.reactions=[],p.appleCriticalAlertOptions=null,p.scheduledInfo=null,p.suggestedReplies=null,p.myFeedback=null,p.myFeedbackStatus="NOT_APPLICABLE",p.messageForm=null,p._isContinuousMessages=!1,p._scheduledStatus=null,p._poll=null,p.messageId=(a=(i=r.msg_id)!==null&&i!==void 0?i:r.message_id)!==null&&a!==void 0?a:0,p.parentMessageId=(s=typeof r.parent_message_id=="string"?parseInt(r.parent_message_id):r.parent_message_id)!==null&&s!==void 0?s:0,p.threadInfo=r.thread_info?new ip(p._iid,r.thread_info):null,r.reactions_summary?p.reactions=r.reactions_summary.map(function(E){return new yh(t,E)}):r.reactions?p.reactions=r.reactions.map(function(E){return new yh(t,E)}):p.reactions=[],p.ogMetaData=r.og_tag?new cM(r.og_tag):null,p.silent=(o=r.silent)!==null&&o!==void 0&&o,p.isOperatorMessage=(l=r.is_op_msg)!==null&&l!==void 0&&l,p.appleCriticalAlertOptions=r.apple_critical_alert_options?new ls(r.apple_critical_alert_options):null,typeof r.scheduled_message_id=="number"&&typeof r.scheduled_at=="number"&&r.scheduled_status&&(p.scheduledInfo={scheduledMessageId:r.scheduled_message_id,scheduledAt:r.scheduled_at},p._scheduledStatus=r.scheduled_status),p._isContinuousMessages=(u=r.is_continuous_messages)!==null&&u!==void 0&&u,p.myFeedback=Lo._isSubmitted(r.feedback)?new Lo(r.feedback):null,p.myFeedbackStatus=Lo._getStatus(r.feedback),p.suggestedReplies=(f=(d=r.extended_message_payload)===null||d===void 0?void 0:d.suggested_replies)!==null&&f!==void 0?f:null,p.messageForm=hM.isMessageFormPayload(r.extended_message_payload)?new hM(p.messageId,r.extended_message_payload.message_form):null,p.message=(m=r.message)!==null&&m!==void 0?m:"",p._poll=r.poll?new os(p._iid,r.poll):null,p}return z(n,e),n.payloadify=function(t){var r,i;return Qe(vt(Y(Y({},e.payloadify.call(this,t)),{message_id:t.messageId,parent_message_id:t.parentMessageId,thread_info:t.threadInfo?ip.payloadify(t.threadInfo):null,reactions_summary:t.reactions.map(function(a){return yh.payloadify(a)}),og_tag:t.ogMetaData?cM.payloadify(t.ogMetaData):null,silent:t.silent,is_op_msg:t.isOperatorMessage,apple_critical_alert_options:t.appleCriticalAlertOptions?ls.payloadify(t.appleCriticalAlertOptions):null,scheduled_message_id:(r=t.scheduledInfo)===null||r===void 0?void 0:r.scheduledMessageId,scheduled_at:(i=t.scheduledInfo)===null||i===void 0?void 0:i.scheduledAt,scheduled_status:t._scheduledStatus,feedback:t.myFeedback?Lo.payloadify(t.myFeedback):Lo._getPayloadByStatus(t.myFeedbackStatus),message:t.message,poll:t._poll?os.payloadify(t._poll):null})))},n._getParentMessageInfoPayload=function(t){return Qe(vt({type:Q2(t.messageType),ts:t.createdAt,user:t.sender?gd.payloadify(t.sender):null,message:t.message,file:{url:t.plainUrl,name:t.name,type:t.type,require_auth:t.requireAuth},files:Array.isArray(t.fileInfoList)?t.fileInfoList.map(function(r){return fE.payloadify(r)}):null}))},n.prototype.isIdentical=function(t){return this.messageId===t.messageId},n.prototype.applyThreadInfoUpdateEvent=function(t){return this.messageId===t.targetMessageId&&(t.threadInfo._isUpdateRequired&&this.threadInfo&&t.threadInfo._updateFrom(this.threadInfo),this.threadInfo=t.threadInfo,!0)},n.prototype._findReactionIndex=function(t){for(var r=0;r<this.reactions.length;r++)if(this.reactions[r].key===t)return r;return-1},n.prototype.applyReactionEvent=function(t){var r=X.of(this._iid).sdkState;if(this.messageId===t.messageId)switch(t.operation){case Xu.ADD:t.userId===r.userId&&(t._hasCurrentUserReacted=!0),(i=this._findReactionIndex(t.key))!==-1?this.reactions[i].applyEvent(t):t._sampledUserIds?this.reactions.push(new yh(this._iid,{key:t.key,sampled_user_ids:t._sampledUserIds,sampled_user_info:t._sampledUserInfoList,count:t._count,is_self_included:t._hasCurrentUserReacted,last_ts:t.updatedAt})):this.reactions.push(new yh(this._iid,{key:t.key,user_ids:[t.userId],updated_at:t.updatedAt}));break;case Xu.DELETE:var i;(i=this._findReactionIndex(t.key))!==-1&&(t._sampledUserIds?t._count===0?this.reactions.splice(i,1):(t.userId===r.userId&&(t._hasCurrentUserReacted=!1),this.reactions[i].applyEvent(t)):(this.reactions[i].applyEvent(t),this.reactions[i].isEmpty&&this.reactions.splice(i,1)))}},n.prototype.applyParentMessage=function(t){if(!this.parentMessage)return this.parentMessage=t,!0;if(this.parentMessageId===t.messageId){var r=this.parentMessage.updatedAt;if(t.updatedAt>=r)return this.parentMessage=t,!0}return!1},n.prototype.applyPoll=function(t){return!(this._poll&&this._poll.id===t.id&&this._poll.updatedAt>t.updatedAt)&&(this._poll=t,!0)},Object.defineProperty(n.prototype,"poll",{get:function(){return this._poll},enumerable:!1,configurable:!0}),n.prototype._triggerThreadInfoUpdatedEvent=function(){return A(this,void 0,void 0,function(){var t;return I(this,function(r){return(t=X.of(this._iid).dispatcher).dispatch(new J2({channelType:ln.GROUP,channelUrl:this.channelUrl,parentMessage:this})),t.dispatch(new er({messages:[this],source:fe.EVENT_MESSAGE_THREADINFO_UPDATED})),[2]})})},n.prototype.markThreadAsRead=function(){return A(this,void 0,void 0,function(){var t,r;return I(this,function(i){switch(i.label){case 0:return t=X.of(this._iid).requestQueue,r=new Mx({channelUrl:this.channelUrl,messageId:this.messageId}),[4,t.send(r)];case 1:return i.sent(),this.threadInfo&&this.threadInfo.unreadReplyCount!==0?(this.threadInfo.unreadReplyCount=0,[4,this._triggerThreadInfoUpdatedEvent()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}})})},n.prototype.setPushNotificationEnabled=function(t){return A(this,void 0,void 0,function(){var r,i;return I(this,function(a){switch(a.label){case 0:return r=X.of(this._iid).requestQueue,i=new Nx({channelUrl:this.channelUrl,channelType:this.channelType,messageId:this.messageId,pushEnabled:t}),[4,r.send(i)];case 1:return a.sent(),this.threadInfo&&this.threadInfo.isPushNotificationEnabled!==t&&(this.threadInfo.isPushNotificationEnabled=t),[2]}})})},n.prototype.submitMessageForm=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o;return I(this,function(l){switch(l.label){case 0:if(r=X.of(this._iid).requestQueue,i=null,a=null,s=this.messageForm,!t&&s){if(!s.isSubmittable)throw new ee({code:lt.INVALID_PARAMETER,message:"The form is not submittable. Please check all form items are valid before submitting."});if(s.isSubmitted)throw new ee({code:lt.INVALID_PARAMETER,message:"The form has already been submitted."});i=s.id,a=s.items.reduce(function(u,d){return u.push({form_item_id:d.id,values:Array.isArray(d.draftValues)?d.draftValues:[]}),u},[])}else t&&(i=t.formId,a=Object.entries(t.answers).reduce(function(u,d){var f=ut(d,2),m=f[0],p=f[1],E=Number(m);if(Number.isNaN(E))throw new ee({code:lt.INVALID_PARAMETER,message:"Keys in answers must be numeric string."});return u.push({form_item_id:E,value:p}),u},[]));if(!i||!a)throw new ee({code:lt.INVALID_PARAMETER,message:"Missing one or more required inputs: formId, answers."});return o=new Lx({messageId:this.messageId,formId:i,items:a}),[4,r.send(o)];case 1:return l.sent(),[2]}})})},n.prototype.submitFeedback=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l;return I(this,function(u){switch(u.label){case 0:return r=X.of(this._iid),i=r.requestQueue,a=r.dispatcher,s=new Ix({channelUrl:this.channelUrl,channelType:this.channelType,messageId:this.messageId,rating:t.rating,comment:t.comment}),[4,i.send(s)];case 1:return o=u.sent(),l=o.as(Ax),this.myFeedback=l.feedback,this.myFeedbackStatus="SUBMITTED",a.dispatch(new er({messages:[this],source:fe.EVENT_MESSAGE_FEEDBACK_ADDED})),[2]}})})},n.prototype.updateFeedback=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l;return I(this,function(u){switch(u.label){case 0:return r=X.of(this._iid),i=r.requestQueue,a=r.dispatcher,s=new wx({channelUrl:this.channelUrl,channelType:this.channelType,messageId:this.messageId,feedbackId:t.id,rating:t.rating,comment:t.comment}),[4,i.send(s)];case 1:return o=u.sent(),l=o.as(Rx),this.myFeedback=l.feedback,this.myFeedbackStatus="SUBMITTED",a.dispatch(new er({messages:[this],source:fe.EVENT_MESSAGE_FEEDBACK_UPDATED})),[2]}})})},n.prototype.deleteFeedback=function(t){return A(this,void 0,void 0,function(){var r,i,a,s;return I(this,function(o){switch(o.label){case 0:return r=X.of(this._iid),i=r.requestQueue,a=r.dispatcher,s=new Ox({channelUrl:this.channelUrl,channelType:this.channelType,messageId:this.messageId,feedbackId:t}),[4,i.send(s)];case 1:return o.sent(),this.myFeedback=null,this.myFeedbackStatus="NO_FEEDBACK",a.dispatch(new er({messages:[this],source:fe.EVENT_MESSAGE_FEEDBACK_DELETED})),[2]}})})},n}(Y2),fr=function(e){function n(t,r){var i,a,s,o,l=this;if((l=e.call(this,t,r)||this).reqId="",l.replyToChannel=!1,l.errorCode=0,l.sender=r.user?new gd(l._iid,r.user):r.sender_id,l.reqId=(a=(i=r.req_id)!==null&&i!==void 0?i:r.request_id)!==null&&a!==void 0?a:"",l.replyToChannel=(s=r.is_reply_to_channel)!==null&&s!==void 0&&s,r.request_state&&Wt(gn,r.request_state)&&(l.sendingStatus=r.request_state),!l.sendingStatus)if(l.messageId>0)l.sendingStatus=gn.SUCCEEDED;else if(l.scheduledInfo)switch(r.scheduled_status&&(l._scheduledStatus=r.scheduled_status),r.scheduled_status){case Pa.SENT:case Pa.IN_QUEUE:l.sendingStatus=gn.SUCCEEDED;break;case Pa.PENDING:l.sendingStatus=gn.SCHEDULED;break;case Pa.FAILED:case Pa.REMOVED:l.sendingStatus=gn.FAILED;break;case Pa.CANCELED:l.sendingStatus=gn.CANCELED}else l.sendingStatus=gn.PENDING;return l.errorCode=(o=r.error_code)!==null&&o!==void 0?o:0,l._messageToken=r.mesg_token,l}return z(n,e),n.payloadify=function(t){return Qe(vt(Y(Y({},e.payloadify.call(this,t)),{user:gd.payloadify(t.sender),req_id:t.reqId,is_reply_to_channel:t.replyToChannel,request_state:t.sendingStatus,error_code:t.errorCode,mesg_token:t._messageToken})))},Object.defineProperty(n.prototype,"isResendable",{get:function(){return(this.sendingStatus===gn.FAILED||this.sendingStatus===gn.CANCELED)&&lk(this.errorCode)},enumerable:!1,configurable:!0}),n.prototype.isIdentical=function(t){return this.messageId>0&&t.messageId>0?this.messageId===t.messageId:this.reqId===t.reqId},n}(Mi),kf={prevResultSize:0,nextResultSize:0,isInclusive:!1,reverse:!1,messageTypeFilter:mi.ALL,customTypesFilter:void 0,senderUserIdsFilter:void 0,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1},Fp=function(e){return Z("number",e.prevResultSize)&&Z("number",e.nextResultSize)&&Z("boolean",e.isInclusive)&&Z("boolean",e.reverse)&&Z("string",e.messageTypeFilter)&&Wt(mi,e.messageTypeFilter)&&Qt("string",e.customTypesFilter,!0)&&Qt("string",e.senderUserIdsFilter,!0)&&Z("boolean",e.includeMetaArray)&&Z("boolean",e.includeReactions)&&Z("boolean",e.includeParentMessageInfo)},Zu=function(e){function n(t,r){var i,a,s,o=this;if((o=e.call(this,t,r)||this).translations={},o.messageType=Zn.ADMIN,o.translations=(i=r.translations)!==null&&i!==void 0?i:{},r.parent_message_info){var l=r.parent_message_info;o.parentMessage=_i(t,Qe(vt(Y(Y({},l),{message_id:o.parentMessageId,channel_url:o.channelUrl,channel_type:o.channelType,file:l.file,url:(a=l.file)===null||a===void 0?void 0:a.url,require_auth:(s=l.file)===null||s===void 0?void 0:s.require_auth}))))}return o}return z(n,e),n.payloadify=function(t){return Qe(vt(Y(Y({},e.payloadify.call(this,t)),{translations:t.translations,parent_message_info:t.parentMessage?e._getParentMessageInfoPayload.call(this,t.parentMessage):null})))},n.prototype.getThreadedMessagesByTimestamp=function(t,r){return A(this,void 0,void 0,function(){var i;return I(this,function(a){switch(a.label){case 0:return i=Y(Y({},kf),r),Oe(this.messageId>0&&Z("number",t)&&Fp(i)).throw(ee.invalidParameters),[4,xr.of(this._iid).getThreadedMessagesByTimestamp(this,t,i)];case 1:return[2,a.sent()]}})})},n}(Mi),vM=function(){function e(n){var t,r;this.detail={},this.type=(t=n.type)!==null&&t!==void 0?t:"",this.vendor=(r=n.vendor)!==null&&r!==void 0?r:"",n.detail&&Z("object",n.detail)&&!Array.isArray(n.detail)&&(this.detail=n.detail)}return e.payloadify=function(n){return Qe(vt({type:n.type,vendor:n.vendor,detail:n.detail}))},e}(),mM=function(){function e(n){this.status=n.status,n.original_message_info&&(this.originalMessageInfo={createdAt:n.original_message_info.ts,messageId:n.original_message_info.id})}return e.payloadify=function(n){return Qe({status:n.status,original_message_info:n.originalMessageInfo?{id:n.originalMessageInfo.messageId,ts:n.originalMessageInfo.createdAt}:void 0})},e}(),fi=function(e){function n(t,r){var i,a,s,o,l,u,d,f=this;if((f=e.call(this,t,r)||this).messageParams=null,f.mentionedMessageTemplate=void 0,f.translations={},f.translationTargetLanguages=[],f.messageSurvivalSeconds=-1,f.plugins=[],f.messageType=Zn.USER,f.translations=(s=r.translations)!==null&&s!==void 0?s:{},f.translationTargetLanguages=(o=r.target_langs)!==null&&o!==void 0?o:[],Object.keys(f.translations).length===0&&f.translationTargetLanguages.length>0)try{for(var m=Ge(f.translationTargetLanguages),p=m.next();!p.done;p=m.next()){var E=p.value;f.translations[E]=""}}catch(b){i={error:b}}finally{try{p&&!p.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}if(f.mentionedMessageTemplate=r.mentioned_message_template,f.messageSurvivalSeconds=(l=r.message_survival_seconds)!==null&&l!==void 0?l:-1,f.plugins=r.plugins?r.plugins.map(function(b){return new vM(b)}):[],r.parent_message_info){var _=r.parent_message_info;f.parentMessage=_i(t,Qe(vt(Y(Y({},_),{created_at:_.ts,message_id:f.parentMessageId,channel_url:f.channelUrl,channel_type:f.channelType,file:_.file,url:(u=_.file)===null||u===void 0?void 0:u.url,require_auth:(d=_.file)===null||d===void 0?void 0:d.require_auth}))))}return r.review_info&&(f.messageReviewInfo=new mM(r.review_info)),f}return z(n,e),n.payloadify=function(t){return Qe(vt(Y(Y({},e.payloadify.call(this,t)),{translations:t.translations,message_survival_seconds:t.messageSurvivalSeconds,mentioned_message_template:t.mentionedMessageTemplate,plugins:t.plugins.map(function(r){return vM.payloadify(r)}),parent_message_info:t.parentMessage?e._getParentMessageInfoPayload.call(this,t.parentMessage):null,review_info:t.messageReviewInfo?mM.payloadify(t.messageReviewInfo):void 0})))},n.prototype.getThreadedMessagesByTimestamp=function(t,r){return A(this,void 0,void 0,function(){var i;return I(this,function(a){switch(a.label){case 0:return i=Y(Y({},kf),r),Oe(this.messageId>0&&Z("number",t)&&Fp(i)).throw(ee.invalidParameters),[4,xr.of(this._iid).getThreadedMessagesByTimestamp(this,t,i)];case 1:return[2,a.sent()]}})})},n}(fr),Ba=function(e){function n(t,r){var i,a,s,o,l,u,d,f,m=this;if((m=e.call(this,t,r)||this).messageParams=null,m.fileInfoList=[],m.messageSurvivalSeconds=-1,m.messageType=Zn.FILE,m.data=(s=(a=(i=r.file)===null||i===void 0?void 0:i.data)!==null&&a!==void 0?a:r.custom)!==null&&s!==void 0?s:"",m.fileInfoList=(l=(o=r.files)===null||o===void 0?void 0:o.map(function(E){return new fE(t,E)}))!==null&&l!==void 0?l:[],m.messageSurvivalSeconds=(u=r.message_survival_seconds)!==null&&u!==void 0?u:-1,r.parent_message_info){var p=r.parent_message_info;m.parentMessage=_i(t,Qe(vt(Y(Y({},p),{created_at:p.ts,message_id:m.parentMessageId,channel_url:m.channelUrl,channel_type:m.channelType,file:p.file,url:(d=p.file)===null||d===void 0?void 0:d.url,require_auth:(f=p.file)===null||f===void 0?void 0:f.require_auth}))))}return m}return z(n,e),n.prototype.getThreadedMessagesByTimestamp=function(t,r){return A(this,void 0,void 0,function(){var i;return I(this,function(a){switch(a.label){case 0:return i=Y(Y({},kf),r),Oe(this.messageId>0&&Z("number",t)&&Fp(i)).throw(ee.invalidParameters),[4,xr.of(this._iid).getThreadedMessagesByTimestamp(this,t,i)];case 1:return[2,a.sent()]}})})},n.payloadify=function(t){var r,i,a,s,o,l;return Qe(vt(Y(Y({},e.payloadify.call(this,t)),{file:{name:(i=(r=t.fileInfoList[0])===null||r===void 0?void 0:r.fileName)!==null&&i!==void 0?i:"",size:(s=(a=t.fileInfoList[0])===null||a===void 0?void 0:a.fileSize)!==null&&s!==void 0?s:0,type:(l=(o=t.fileInfoList[0])===null||o===void 0?void 0:o.mimeType)!==null&&l!==void 0?l:"",data:t.data},files:Array.isArray(t.fileInfoList)?t.fileInfoList.map(function(u){return fE.payloadify(u)}):null,message_survival_seconds:t.messageSurvivalSeconds,parent_message_info:t.parentMessage?e._getParentMessageInfoPayload.call(this,t.parentMessage):null})))},n._isMultipleFilesMessagePayload=function(t){var r=t.files;return Array.isArray(r)&&r.length>=2},n._isMultipleFilesMessageSerializedData=function(t){var r=t.fileInfoList;return Array.isArray(r)},n}(fr);(function(e){e.SENT="SENT",e.READ="READ"})(zu||(zu={}));var Ju=function(e){function n(t,r){var i,a,s=this;if((s=e.call(this,t,r)||this).notificationData=null,s.notificationId=r.notification_message_id,s.messageType=Zn.ADMIN,s.messageStatus=(i=r.message_status)!==null&&i!==void 0?i:zu.SENT,s.priority=(a=r.priority)!==null&&a!==void 0?a:nE.NORMAL,s.notificationEventDeadline=r.notification_event_deadline,s.extendedMessage.sub_type===0)try{var o=JSON.parse(s.extendedMessage.sub_data),l=o.label,u=o.tags,d=u===void 0?[]:u,f=o.template_key,m=o.template_variables;s.notificationData={label:l,tags:d,templateKey:f,templateVariables:m}}catch{}return s}return z(n,e),n.payloadify=function(t){return Qe(vt(Y(Y({},e.payloadify.call(this,t)),{notification_message_id:t.notificationId,message_status:t.messageStatus,priority:t.priority,notification_event_deadline:t.notificationEventDeadline})))},n.prototype.isIdentical=function(t){return this.notificationId===t.notificationId},n}(Y2),vE=function(e){if(e.notificationId)return Ju.payloadify(e);switch(e.messageType){case Zn.USER:return fi.payloadify(e);case Zn.FILE:return e.fileInfoList?Ba.payloadify(e):Mr.payloadify(e);case Zn.ADMIN:return Zu.payloadify(e);default:throw ee.unknown}},_i=function(e,n){if(n.notification_message_id)return new Ju(e,n);switch(n.type){case"MESG":return new fi(e,n);case"FILE":return Ba._isMultipleFilesMessagePayload(n)?new Ba(e,n):new Mr(e,n);case"ADMM":case"BRDM":return new Zu(e,n);default:return null}},Mr=function(e){function n(t,r){var i,a,s,o,l,u,d,f,m,p,E,_,b,C,y=this;(y=e.call(this,t,r)||this).messageParams=null,y.plainUrl="",y.requireAuth=!1,y.thumbnails=[],y.messageSurvivalSeconds=-1,y.messageType=Zn.FILE;var T=r.file;if(y.plainUrl=((a=(i=T==null?void 0:T.url)!==null&&i!==void 0?i:r.url)!==null&&a!==void 0?a:"").split("?auth=")[0],y.name=(o=(s=T==null?void 0:T.name)!==null&&s!==void 0?s:r.name)!==null&&o!==void 0?o:"File",y.size=(u=(l=T==null?void 0:T.size)!==null&&l!==void 0?l:r.size)!==null&&u!==void 0?u:0,y.data=(f=(d=T==null?void 0:T.data)!==null&&d!==void 0?d:r.custom)!==null&&f!==void 0?f:"",y.type=T?(m=T.type)!==null&&m!==void 0?m:"":(p=r.type)!==null&&p!==void 0?p:"",y.requireAuth=(E=r.require_auth)!==null&&E!==void 0&&E,y.thumbnails=r.thumbnails?r.thumbnails.map(function(w){var O;return new Ko(y._iid,typeof w=="string"?{url:w,width:0,height:0}:Y(Y({},w),{url:((O=w.url)!==null&&O!==void 0?O:"").split("auth=")[0]}),y.requireAuth)}):[],y.messageSurvivalSeconds=(_=r.message_survival_seconds)!==null&&_!==void 0?_:-1,r.parent_message_info){var N=r.parent_message_info;y.parentMessage=_i(t,Qe(vt(Y(Y({},N),{created_at:N.ts,message_id:y.parentMessageId,channel_url:y.channelUrl,channel_type:y.channelType,file:N.file,url:(b=N.file)===null||b===void 0?void 0:b.url,require_auth:(C=N.file)===null||C===void 0?void 0:C.require_auth}))))}return y}return z(n,e),n.payloadify=function(t){var r;return Qe(vt(Y(Y({},e.payloadify.call(this,t)),{url:t.plainUrl,require_auth:t.requireAuth,file:{name:t.name,size:t.size,type:t.type,data:t.data},thumbnails:(r=t.thumbnails)===null||r===void 0?void 0:r.map(function(i){return{url:i.plainUrl,width:i.width,height:i.height,real_width:i.realWidth,real_height:i.realHeight}}),message_survival_seconds:t.messageSurvivalSeconds,parent_message_info:t.parentMessage?e._getParentMessageInfoPayload.call(this,t.parentMessage):null})))},Object.defineProperty(n.prototype,"url",{get:function(){var t=X.of(this._iid).sessionManager;return this.requireAuth&&t.ekey?"".concat(this.plainUrl,"?auth=").concat(t.ekey):this.plainUrl},enumerable:!1,configurable:!0}),n.prototype.getThreadedMessagesByTimestamp=function(t,r){return A(this,void 0,void 0,function(){var i;return I(this,function(a){switch(a.label){case 0:return i=Y(Y({},kf),r),Oe(this.messageId>0&&Z("number",t)&&Fp(i)).throw(ee.invalidParameters),[4,xr.of(this._iid).getThreadedMessagesByTimestamp(this,t,i)];case 1:return[2,a.sent()]}})})},n}(fr),bf=function(e){function n(t,r){var i=r.file,a=r.fileUrl,s=r.fileName,o=r.fileSize,l=r.mimeType,u=r.thumbnailSizes,d=r._uploadedMetaData,f=r._thumbnails,m=e.call(this,t)||this;return m._plainUrl=a,m.file=i,m.fileName=s,m.fileSize=o,m.mimeType=l,m.thumbnailSizes=u,m._uploadedMetaData=d,m._thumbnails=f,m}return z(n,e),n.getPlainUrl=function(t){return t instanceof n?t._plainUrl:t.fileUrl},Object.defineProperty(n.prototype,"fileUrl",{get:function(){var t,r=X.of(this._iid).sessionManager;return this._plainUrl&&(!((t=this._uploadedMetaData)===null||t===void 0)&&t.requireAuth)&&r.ekey?"".concat(this._plainUrl,"?auth=").concat(r.ekey):this._plainUrl},set:function(t){this._plainUrl=t},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return{file:this.file,fileUrl:this._plainUrl,fileName:this.fileName,fileSize:this.fileSize,mimeType:this.mimeType,thumbnailSizes:this.thumbnailSizes,_thumbnails:this._thumbnails,_uploadedMetaData:this._uploadedMetaData}},n}(Rr),Ux=function(e){function n(t){var r,i,a,s,o=[];return t.mentionType===gi.USERS&&(t.mentionedUserIds?o=t.mentionedUserIds:t.mentionedUsers&&(o=t.mentionedUsers.map(function(l){return l.userId}))),e.call(this,{code:"FILE",ackRequired:!0,payload:Qe(vt({channel_url:t.channelUrl,files:t.files?eR(t.files):null,url:t.url,name:(r=t.fileName)!==null&&r!==void 0?r:"",type:(i=t.mimeType)!==null&&i!==void 0?i:"",size:(a=t.fileSize)!==null&&a!==void 0?a:0,custom:t.data,custom_type:t.customType,thumbnails:(s=t._thumbnails)===null||s===void 0?void 0:s.map(function(l){return Ko.payloadify(l)}),require_auth:t.requireAuth,metaarray:t.metaArrays,mention_type:t.mentionType,mentioned_user_ids:o,push_option:t.pushNotificationDeliveryOption&&t.pushNotificationDeliveryOption!==Os.DEFAULT?t.pushNotificationDeliveryOption:void 0,apple_critical_alert_options:t.appleCriticalAlertOptions?ls.payloadify(t.appleCriticalAlertOptions):null,silent:t.silent,reply_to_channel:t.isReplyToChannel,parent_message_id:t.parentMessageId?t.parentMessageId:null,req_id:t.reqId,poll_id:t.pollId,pin_message:t.isPinnedMessage,message:t.message}))})||this}return z(n,e),n}(pi),Dx=function(e){function n(t){var r,i,a=this;a=e.call(this)||this;var s=[];return t.mentionType===gi.USERS&&(t.mentionedUserIds?s=t.mentionedUserIds:t.mentionedUsers&&(s=t.mentionedUsers.map(function(o){return o.userId}))),a.method=Ie.POST,a.path="".concat(yn(t.channelType),"/").concat(encodeURIComponent(t.channelUrl),"/messages"),a.params=Qe(vt({message_type:Zn.FILE,user_id:t.userId,files:t.files?eR(t.files):null,url:t.fileUrl,mention_type:t.mentionType,mentioned_user_ids:s,file_name:t.fileName,file_size:t.fileSize,file_type:t.mimeType,data:t.data,custom_type:t.customType,thumbnails:(r=t._thumbnails)===null||r===void 0?void 0:r.map(function(o){return Ko.payloadify(o)}),require_auth:t.requireAuth,sorted_metaarray:(i=t.metaArrays)===null||i===void 0?void 0:i.map(function(o){return $r.payloadify(o)}),push_option:t.pushNotificationDeliveryOption,parent_message_id:t.parentMessageId?t.parentMessageId:null,apple_critical_alert_options:t.appleCriticalAlertOptions?ls.payloadify(t.appleCriticalAlertOptions):null,reply_to_channel:t.isReplyToChannel,req_id:t.reqId,poll_id:t.pollId,pin_message:t.isPinnedMessage})),a}return z(n,e),n}(we),Ib=function(e){function n(t,r,i){var a,s,o,l,u=this;(u=e.call(this,t,"FILE",i)||this).message=i.files&&i.files.length>=2?new Ba(t,i):new Mr(t,i);var d=X.of(t).sdkState;return u.isMentioned=fd(u.message.mentionType,(o=(a=u.message.mentionedUserIds)!==null&&a!==void 0?a:(s=u.message.mentionedUsers)===null||s===void 0?void 0:s.map(function(f){return f.userId}))!==null&&o!==void 0?o:[],d.userId),u.forceUpdateLastMessage=(l=i.force_update_last_message)!==null&&l!==void 0&&l,u}return z(n,e),n}(Yn),kx=function(e){function n(t,r){var i,a,s,o,l=this;(l=e.call(this,t,r)||this).message=r.files&&r.files.length>=2?new Ba(t,r):new Mr(t,r);var u=X.of(t).sdkState;return l.isMentioned=fd(l.message.mentionType,(s=(i=l.message.mentionedUserIds)!==null&&i!==void 0?i:(a=l.message.mentionedUsers)===null||a===void 0?void 0:a.map(function(d){return d.userId}))!==null&&s!==void 0?s:[],u.userId),l.forceUpdateLastMessage=(o=r.force_update_last_message)!==null&&o!==void 0&&o,l}return z(n,e),n}(Pe);function eR(e){return e.map(function(n){var t,r;return Qe(vt({url:bf.getPlainUrl(n),file_name:n.fileName,file_type:n.mimeType,file_size:n.fileSize,thumbnails:(t=n._thumbnails)===null||t===void 0?void 0:t.map(function(i){return Ko.payloadify(i)}),require_auth:(r=n._uploadedMetaData)===null||r===void 0?void 0:r.requireAuth}))})}var Hr;(function(e){e[e.PENDING=0]="PENDING",e[e.UPLOADING=1]="UPLOADING",e[e.UPLOADED=2]="UPLOADED",e[e.SENDING=3]="SENDING",e[e.FAILED=4]="FAILED"})(Hr||(Hr={}));var Px=function(){function e(n,t){var r=t.sdkState,i=t.dispatcher,a=t.requestQueue,s=t.onlineDetector,o=t.cacheContext,l=this;this._queueMap=new Map,this._iid=n,this._sdkState=r,this._requestQueue=a,this._cacheContext=o,this._dispatcher=i,this._dispatcher.on(function(u){u instanceof Ea&&(l._connectionState=u.stateType)}),this._onlineDetector=s}return Object.defineProperty(e.prototype,"_shouldSendThroughWebSocket",{get:function(){return this._connectionState===wn.CONNECTED||this._connectionState===wn.CONNECTING||this._connectionState===wn.RECONNECTING},enumerable:!1,configurable:!0}),e.prototype._sendFileMessage=function(n,t){return A(this,void 0,void 0,function(){var r,i,a;return I(this,function(s){switch(s.label){case 0:return r=this._createSendFileMessageRequestParams(n,t),this._shouldSendThroughWebSocket?(i=new Ux(r),[4,this._requestQueue.send(i)]):[3,2];case 1:return a=s.sent(),[2,a.as(Ib).message];case 2:return i=new Dx(Y(Y({},r),{userId:this._sdkState.userId})),[4,this._requestQueue.send(i)];case 3:return a=s.sent(),[2,a.as(kx).message]}})})},e.prototype._createSendFileMessageRequestParams=function(n,t){var r=Y(Y({},t.params),{channelUrl:n.url,channelType:n.channelType,reqId:t.requestId,url:""});if(t.multipleFileUploadInfo){var i=t.params;r.files=i.fileInfoList}else i=t.params,r.url=i.fileUrl,r.requireAuth=i.requireAuth;return r},e.prototype._resolveMessageQueue=function(n){var t;return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u,d,f,m,p,E,_;return I(this,function(b){switch(b.label){case 0:if(!(r=this._queueMap.get(n.url)))return[3,21];if(r.isResolving)return[3,20];r.isResolving=!0,i=[],a=!0,b.label=1;case 1:b.trys.push([1,15,16,17]),s=Ge(r.messageQueue),o=s.next(),b.label=2;case 2:if(o.done)return[3,14];switch(l=o.value,l.state){case Hr.PENDING:case Hr.UPLOADING:return[3,3];case Hr.UPLOADED:return[3,4];case Hr.FAILED:return[3,12]}return[3,13];case 3:return a=!1,i.push(l),[3,13];case 4:if(!a)return[3,10];b.label=5;case 5:return b.trys.push([5,8,,9]),l.state=Hr.SENDING,[4,this._sendFileMessage(n,l)];case 6:return u=b.sent(),l.deferred.resolve(u),[4,Zi(100)];case 7:return b.sent(),[3,9];case 8:return d=b.sent(),l.deferred.reject(d),[3,9];case 9:return[3,11];case 10:i.push(l),b.label=11;case 11:return[3,13];case 12:return f=(t=l.error)!==null&&t!==void 0?t:ee.unknown,l.deferred.reject(f.code===lt.REQUEST_CANCELED?ee.fileUploadCanceled:f),[3,13];case 13:return o=s.next(),[3,2];case 14:return[3,17];case 15:return m=b.sent(),E={error:m},[3,17];case 16:try{o&&!o.done&&(_=s.return)&&_.call(s)}finally{if(E)throw E.error}return[7];case 17:return p=r.isResolveRequestPending,r.messageQueue=i,r.isResolving=!1,r.isResolveRequestPending=!1,p?[4,this._resolveMessageQueue(n)]:[3,19];case 18:b.sent(),b.label=19;case 19:return[3,21];case 20:r.isResolveRequestPending=!0,b.label=21;case 21:return[2]}})})},e.prototype._uploadNextPendingItem=function(n){var t;return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u,d,f,m;return I(this,function(p){switch(p.label){case 0:return(r=this._queueMap.get(n.url))&&(i=r.messageQueue.find(function(E){return E.state===Hr.PENDING}))?i.multipleFileUploadInfo?(a=i.multipleFileUploadInfo,s=a.uploadIndex,o=a.uploadCount,l=a.requestHandler,m=i.params,u=m.fileInfoList[s],!Vr(u.file)||!((t=u._uploadedMetaData)===null||t===void 0)&&t.isUploaded?[3,2]:[4,this._tryUploadNextItemAndUpdateItemState(n,r,i)]):[3,4]:[3,9];case 1:return p.sent(),[3,3];case 2:i.state=s<o-1?Hr.PENDING:Hr.UPLOADED,p.label=3;case 3:return d=m.fileInfoList[s],f=i.multipleFileUploadInfo.uploadIndex++,i.multipleFileUploadInfo.isCopy||l==null||l._triggerOnFileUploaded(i.requestId,f,d,i.error),[3,7];case 4:return m=i.params,Vr(m.file)?[4,this._tryUploadNextItemAndUpdateItemState(n,r,i)]:[3,6];case 5:return p.sent(),[3,7];case 6:m.thumbnailSizes=[],i.state=Hr.UPLOADED,p.label=7;case 7:return this._uploadNextPendingItem(n),[4,this._resolveMessageQueue(n)];case 8:p.sent(),p.label=9;case 9:return[2]}})})},e.prototype._tryUploadNextItemAndUpdateItemState=function(n,t,r){return A(this,void 0,void 0,function(){var i,a,s,o,l,u;return I(this,function(d){switch(d.label){case 0:return[4,this._onlineDetector.isOnline()];case 1:if(i=d.sent(),!X.of(this._iid).sessionManager.currentUser||!i)return r.error=ee.connectionRequired,r.state=Hr.FAILED,[2];if(!(t.uploadQueue.length<6))return[3,9];r.state=Hr.UPLOADING,t.uploadQueue.push(r),d.label=2;case 2:return d.trys.push([2,7,,8]),r.multipleFileUploadInfo?(a=r.multipleFileUploadInfo,s=a.uploadIndex,o=a.uploadCount,l=r.params,[4,this._uploadNextFileForMultipleFilesItemAndUpdateParams(n,r,l)]):[3,4];case 3:return d.sent(),r.state=s<o-1?Hr.PENDING:Hr.UPLOADED,[3,6];case 4:return l=r.params,[4,this._uploadNextFileForSingleFileItemAndUpdateParams(n,r,l)];case 5:d.sent(),r.state=Hr.UPLOADED,d.label=6;case 6:return[3,8];case 7:switch((u=d.sent()).code){case lt.REQUEST_FAILED:r.error=new ee({code:lt.NETWORK_ERROR,message:"Failed to upload a file."});break;case lt.REQUEST_CANCELED:r.error=ee.fileUploadCanceled;break;default:r.error=u}return r.state=Hr.FAILED,[3,8];case 8:this._dequeueUploadItem(t,r),d.label=9;case 9:return[2]}})})},e.prototype._dequeueUploadItem=function(n,t){var r=n.uploadQueue.findIndex(function(i){return i.requestId===t.requestId});r>=0&&n.uploadQueue.splice(r,1)},e.prototype._uploadNextFileForSingleFileItemAndUpdateParams=function(n,t,r){var i,a,s;return A(this,void 0,void 0,function(){var o,l,u,d,f,m,p,E,_,b;return I(this,function(C){switch(C.label){case 0:return o=new np({file:r.file,channelUrl:n.url,thumbnailSizes:r.thumbnailSizes,requestId:t.requestId}),[4,this._requestQueue.send(o)];case 1:return l=C.sent(),u=l.as(rp),d=u.url,f=u.fileSize,m=f===void 0?r.fileSize:f,p=u.thumbnails,E=p===void 0?[]:p,_=u.requireAuth,b=_!==void 0&&_,r.fileName=(i=r.fileName)!==null&&i!==void 0?i:r.file.name,r.mimeType=(a=r.mimeType)!==null&&a!==void 0?a:r.file.type,r.fileSize=(s=r.fileSize)!==null&&s!==void 0?s:r.file.size,r.fileUrl=d,r.fileSize=m,r.requireAuth=b,r._thumbnails=E,[2]}})})},e.prototype._uploadNextFileForMultipleFilesItemAndUpdateParams=function(n,t,r){var i,a,s;return A(this,void 0,void 0,function(){var o,l,u,d,f,m,p,E,_,b,C;return I(this,function(y){switch(y.label){case 0:return o=t.multipleFileUploadInfo.uploadIndex,l=r.fileInfoList[o],u=new np({file:l.file,channelUrl:n.url,thumbnailSizes:l.thumbnailSizes,requestId:t.requestId}),[4,this._requestQueue.send(u)];case 1:return d=y.sent(),f=d.as(rp),m=f.url,p=f.fileSize,E=p===void 0?l.fileSize:p,_=f.thumbnails,b=f.requireAuth,C=b!==void 0&&b,l.fileName=(i=l.fileName)!==null&&i!==void 0?i:l.file.name,l.mimeType=(a=l.mimeType)!==null&&a!==void 0?a:l.file.type,l.fileSize=(s=l.fileSize)!==null&&s!==void 0?s:l.file.size,l.file=void 0,l.fileUrl=m,l.fileSize=E,l._thumbnails=_,l._uploadedMetaData=Y(Y({},l._uploadedMetaData),{requireAuth:C,isUploaded:!0}),l instanceof bf||(r.fileInfoList[o]=new bf(this._iid,l)),[2]}})})},e.prototype.request=function(n,t,r,i){return i===void 0&&(i={}),A(this,void 0,void 0,function(){var a,s,o,l,u;return I(this,function(d){return this._queueMap.has(n.url)||(a={messageQueue:[],uploadQueue:[],isResolving:!1,isResolveRequestPending:!1},this._queueMap.set(n.url,a)),s=this._queueMap.get(n.url),o=new zi,l={requestId:t,params:r,state:Hr.PENDING,deferred:o},function(f){return"fileInfoList"in f}(r)&&(u=Y({uploadIndex:0,uploadCount:r.fileInfoList.length},i),l.multipleFileUploadInfo=u),s.messageQueue.push(l),this._uploadNextPendingItem(n),[2,o.promise]})})},e.prototype.cancel=function(n,t){var r,i,a=this._queueMap.get(n.url);if(a){var s=t?[a.messageQueue.find(function(E){return E.requestId===t})]:Nt([],ut(a.messageQueue),!1);try{for(var o=Ge(s),l=o.next();!l.done;l=o.next()){var u=l.value;if(u)switch(u.state){case Hr.PENDING:if(u.state=Hr.FAILED,u.error=ee.requestCanceled,u.multipleFileUploadInfo&&!u.multipleFileUploadInfo.isCopy){var d=u.multipleFileUploadInfo,f=d.uploadIndex,m=d.requestHandler,p=u.params.fileInfoList[f];m==null||m._triggerOnFileUploaded(u.requestId,f,p,ee.fileUploadCanceled)}this._resolveMessageQueue(n);break;case Hr.UPLOADING:this._requestQueue.cancel(u.requestId),this._dispatcher.dispatch(new Km({requestId:u.requestId}))}}}catch(E){r={error:E}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}}else t&&(this._requestQueue.cancel(t),this._dispatcher.dispatch(new Km({requestId:t})))},e}(),pM,es,sf={prevResultSize:0,nextResultSize:0,isInclusive:!1,reverse:!1,messageTypeFilter:mi.ALL,customTypesFilter:void 0,senderUserIdsFilter:void 0,replyType:Ir.NONE,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1,includeThreadInfo:!1,showSubchannelMessagesOnly:!1},gM=function(e){return Z("number",e.prevResultSize)&&Z("number",e.nextResultSize)&&Z("boolean",e.isInclusive)&&Z("boolean",e.reverse)&&Z("string",e.messageTypeFilter)&&Wt(mi,e.messageTypeFilter)&&Qt("string",e.customTypesFilter,!0)&&Qt("string",e.senderUserIdsFilter,!0)&&Wt(Ir,e.replyType)&&Z("boolean",e.includeMetaArray)&&Z("boolean",e.includeReactions)&&Z("boolean",e.includeParentMessageInfo)&&Z("boolean",e.includeThreadInfo)&&Z("boolean",e.showSubchannelMessagesOnly)},mE={replyType:Ir.NONE,includeReactions:!1,includeThreadInfo:!1,includeMetaArray:!1,includeParentMessageInfo:!1},_M=function(e){return Wt(Ir,e.replyType)&&Z("boolean",e.includeReactions)&&Z("boolean",e.includeMetaArray)&&Z("boolean",e.includeParentMessageInfo)&&Z("boolean",e.includeThreadInfo)};(function(e){e.MESSAGE="message"})(pM||(pM={})),function(e){e.INTERNAL_BACKSYNC="internal_backsync",e.INTERNAL_FILL_GAP="internal_fill_gap",e.EXTERNAL_LEGACY="external_legacy",e.EXTERNAL_COLLECTION="external_collection"}(es||(es={}));var pE,xx=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=t.includeMetaArray,o=t.includeReactions,l=t.includeThreadInfo,u=t.includeParentMessageInfo,d=e.call(this)||this;return d.method=Ie.GET,d.path="".concat(yn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(encodeURIComponent(a)),d.params={is_sdk:!0,with_sorted_meta_array:s,include_reactions_summary:o!=null&&o,include_thread_info:l,include_parent_message_info:u,include_poll_details:!0},d}return z(n,e),n}(we),Fx=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.message=r?_i(t,Y({},r)):null,i}return z(n,e),n}(Pe),em=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.timestamp,s=t.token,o=t.prevResultSize,l=t.nextResultSize,u=t.isInclusive,d=t.reverse,f=t.messageTypeFilter,m=t.customTypesFilter,p=t.senderUserIdsFilter,E=t.replyType,_=t.includeMetaArray,b=t.includeReactions,C=t.parentMessageId,y=t.includeThreadInfo,T=t.includeParentMessageInfo,N=t.showSubchannelMessagesOnly,w=t.checkingHasNext,O=t.checkingContinuousMessages,L=t.sdkSource,P=e.call(this)||this;return P.method=Ie.GET,P.path="".concat(yn(r),"/").concat(encodeURIComponent(i),"/messages"),P.params=Qe(vt({is_sdk:!0,prev_limit:o,next_limit:l,include:u,reverse:d,message_ts:a,message_id:s,message_type:f??null,custom_types:m,sender_ids:p,include_reply_type:E,with_sorted_meta_array:_,include_reactions_summary:b,parent_message_id:C,include_thread_info:y,include_parent_message_info:T,show_subchannel_message_only:N,include_poll_details:!0,checking_has_next:w,checking_continuous_messages:O,sdk_source:L})),P}return z(n,e),n}(we),tm=function(e){function n(t,r){var i=e.call(this,t,r)||this;return r.is_continuous_messages!==void 0&&(i.isContinuousMessages=r.is_continuous_messages),r.has_next!==void 0&&(i.hasNext=r.has_next),i.messages=r.messages.map(function(a){return _i(t,a)}),i}return z(n,e),n}(Pe),Bx=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.timestamp,s=t.token,o=t.replyType,l=t.includeMetaArray,u=t.includeReactions,d=t.includeThreadInfo,f=t.includeParentMessageInfo,m=e.call(this)||this;return m.method=Ie.GET,m.path="".concat(yn(r),"/").concat(encodeURIComponent(i),"/messages/changelogs"),m.params={change_ts:a,token:s,with_sorted_meta_array:l,include_reactions_summary:u,include_thread_info:d,include_reply_type:o,include_parent_message_info:f,include_poll_details:!0},m}return z(n,e),n}(we),Hx=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.updatedMessages=r.updated.map(function(a){return _i(t,a)}),i.deletedMessagesInfo=r.deleted.map(function(a){return{messageId:a.message_id,deletedAt:a.deleted_at}}),i.hasMore=r.has_more,i.nextToken=r.next,i.forceUseNextToken=r.force_use_next_token||!1,i}return z(n,e),n}(Pe),Gx=function(e){function n(t){var r=t.channelUrl,i=t.scheduledMessageId,a=e.call(this)||this;return a.method=Ie.GET,a.path="".concat(Ui,"/").concat(encodeURIComponent(r),"/scheduled_messages/").concat(encodeURIComponent(i)),a.params={},a}return z(n,e),n}(we),zx=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.message=r?_i(t,Y({},r)):null,i}return z(n,e),n}(Pe);(function(e){e.MUTED="muted",e.BANNED="banned"})(pE||(pE={}));var EM=function(){function e(n){var t,r,i,a;this.restrictionType=null,Wt(pE,n.restriction_type)&&(this.restrictionType=n.restriction_type),this.description=(t=n.description)!==null&&t!==void 0?t:null,this.endAt=(i=(r=n.end_at)!==null&&r!==void 0?r:n.muted_end_at)!==null&&i!==void 0?i:-1,this.remainingDuration=(a=n.remaining_duration)!==null&&a!==void 0?a:-1}return e.payloadify=function(n){return Qe(vt({restriction_type:n.restrictionType,description:n.description,end_at:n.endAt,remaining_duration:n.remainingDuration}))},e}(),uc=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.restrictionInfo=new EM(r),i}return z(n,e),n.payloadify=function(t){return Qe(vt(Y(Y({},e.payloadify.call(this,t)),EM.payloadify(t.restrictionInfo))))},n}(Yt),jx=function(e){function n(t,r){var i,a=this;return(a=e.call(this,t,r)||this).isMuted=!1,a.isMuted=(i=r.is_muted)!==null&&i!==void 0&&i,a}return z(n,e),n}(Yt),fa=function(){function e(){this._onPending=Bt,this._onFailed=Bt,this._onSucceeded=Bt}return e.prototype._trigger=function(n){switch(n==null?void 0:n.sendingStatus){case gn.PENDING:n.errorCode===0&&this._onPending(n);break;case gn.SCHEDULED:case gn.SUCCEEDED:this._onSucceeded(n)}},e.prototype._triggerFailed=function(n,t){switch(t==null?void 0:t.sendingStatus){case gn.FAILED:case gn.CANCELED:this._onFailed(n,t.scheduledInfo?null:t)}},e.prototype.onPending=function(n){return this._onPending=n,this},e.prototype.onFailed=function(n){return this._onFailed=n,this},e.prototype.onSucceeded=function(n){return this._onSucceeded=n,this},e}(),Bp={data:void 0,customType:void 0,mentionType:gi.USERS,mentionedUserIds:void 0,mentionedUsers:void 0,metaArrays:void 0,parentMessageId:void 0,isReplyToChannel:!1,pushNotificationDeliveryOption:void 0,appleCriticalAlertOptions:void 0,isPinnedMessage:!1,pollId:void 0},Hp=function(e){return Z("string",e.data,!0)&&Z("string",e.customType,!0)&&Wt(gi,e.mentionType)&&Qt("string",e.mentionedUserIds,!0)&&Qt(Yt,e.mentionedUsers,!0)&&Qt($r,e.metaArrays,!0)&&Z("number",e.parentMessageId,!0)&&Z("boolean",e.isReplyToChannel)&&Wt(Os,e.pushNotificationDeliveryOption,!0)&&Z(ls,e.appleCriticalAlertOptions,!0)&&Z("boolean",e.isPinnedMessage,!0)&&Z("number",e.pollId,!0)},yM=function(e){return{isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption,pollId:e.pollId}},tR=Y(Y({},Bp),{message:"",mentionedMessageTemplate:void 0,translationTargetLanguages:void 0,extendedMessagePayload:void 0});function nR(e){var n,t,r;return(n=e.messageParams)!==null&&n!==void 0?n:vt(Y(Y({},e),{mentionType:e.mentionType,mentionedUserIds:(t=e.mentionedUserIds)!==null&&t!==void 0?t:(r=e.mentionedUsers)===null||r===void 0?void 0:r.map(function(i){return i.userId}),mentionedMessageTemplate:e.mentionedMessageTemplate,translationTargetLanguages:Object.keys(e.translations),pushNotificationDeliveryOption:Os.DEFAULT,parentMessageId:null,isReplyToChannel:!1,isPinnedMessage:!1}))}var qu,gE=function(e){var n;return Qe(vt({data:e.data,customType:e.customType,mentionType:e.mentionType,mentionedUsers:e.mentionedUsers,mentionedUserIds:e.mentionedUserIds,mentionedMessageTemplate:e.mentionedMessageTemplate,metaArrays:e.metaArrays,pollId:(n=e.poll)===null||n===void 0?void 0:n.id,parentMessageId:e.parentMessageId,appleCriticalAlertOptions:e.appleCriticalAlertOptions,message:e.message,translationTargetLanguages:Object.keys(e.translations),extendedMessagePayload:e.extendedMessagePayload}))},rR=function(e){return Hp(e)&&Z("string",e.message)&&Z("string",e.mentionedMessageTemplate,!0)&&Qt("string",e.translationTargetLanguages,!0)&&Z("object",e.extendedMessagePayload,!0)};(function(e){e.FILE="file",e.BLOB="blob",e.BLOB_LIKE_OBJECT="blobLikeObject",e.URL="url"})(qu||(qu={}));var wm=function(e){return typeof window<"u"&&"Blob"in window&&typeof Blob<"u"&&e instanceof Blob},v_=function(e){return e===qu.BLOB||e===qu.FILE},bM=function(e){return{file:e.file,fileKey:e.fileKey,fileType:e.fileType,isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption}},CM=Y(Y({},Bp),{file:void 0,fileKey:void 0,fileUrl:void 0,fileName:void 0,fileType:void 0,fileSize:void 0,mimeType:void 0,thumbnailSizes:void 0,requireAuth:!1,message:void 0});function iR(e){var n,t,r,i;return(n=e.messageParams)!==null&&n!==void 0?n:vt(Y(Y({},e),{fileUrl:e.plainUrl,fileName:e.name,fileSize:e.size,mimeType:e.type,mentionType:e.mentionType,mentionedUserIds:(t=e.mentionedUserIds)!==null&&t!==void 0?t:(r=e.mentionedUsers)===null||r===void 0?void 0:r.map(function(a){return a.userId}),pushNotificationDeliveryOption:Os.DEFAULT,parentMessageId:null,isReplyToChannel:!1,thumbnailSizes:(i=e.thumbnails)===null||i===void 0?void 0:i.map(function(a){return{maxWidth:a.width,maxHeight:a.height}}),requireAuth:e.requireAuth,isPinnedMessage:!1,_thumbnails:e.thumbnails,message:e.message}))}var of,_E=function(e,n){var t,r;return e.messageParams?(!e.url&&Vr(n)&&(e.messageParams.file=n),e.messageParams):Qe(vt({data:e.data,customType:e.customType,mentionType:e.mentionType,mentionedUsers:e.mentionedUsers,mentionedUserIds:e.mentionedUserIds,metaArrays:e.metaArrays,parentMessageId:e.parentMessageId,appleCriticalAlertOptions:e.appleCriticalAlertOptions,file:n,fileUrl:e.url,fileName:e.name,fileSize:e.size,mimeType:e.type,thumbnailSizes:(t=e.thumbnails)===null||t===void 0?void 0:t.map(function(i){return{maxWidth:i.width,maxHeight:i.height}}),message:e.message,pollId:(r=e.poll)===null||r===void 0?void 0:r.id}))},SM=function(e){return Hp(e)&&(Vr(e.file)||Z("string",e.fileUrl))&&Z("string",e.fileName,!0)&&Z("string",e.mimeType,!0)&&Z("number",e.fileSize,!0)&&Z("string",e.message,!0)&&(e.thumbnailSizes===null||e.thumbnailSizes===void 0||Array.isArray(e.thumbnailSizes)&&e.thumbnailSizes.every(function(n){return Z("object",n)&&n.maxWidth>0&&n.maxHeight>0}))},Ab={data:void 0,customType:void 0,mentionType:gi.USERS,mentionedUserIds:void 0,mentionedUsers:void 0,metaArrays:void 0,pushNotificationDeliveryOption:void 0,appleCriticalAlertOptions:void 0},wb=function(e){return Z("string",e.data,!0)&&Z("string",e.customType,!0)&&Wt(gi,e.mentionType)&&Qt("string",e.mentionedUserIds,!0)&&Qt(Yt,e.mentionedUsers,!0)&&Qt($r,e.metaArrays,!0)&&Wt(Os,e.pushNotificationDeliveryOption,!0)&&Z(ls,e.appleCriticalAlertOptions,!0)},aR=Y(Y({},Ab),{message:void 0,mentionedMessageTemplate:void 0,translationTargetLanguages:void 0,pollId:void 0}),sR=function(e){return wb(e)&&Z("string",e.mentionedMessageTemplate,!0)&&Z("string",e.message,!0)&&Qt("string",e.translationTargetLanguages,!0)&&Z("number",e.pollId,!0)},Vx=Y({},Ab),$x=function(e){function n(t){var r=t.channelUrl,i=t.channelType,a=t.token,s=t.limit,o=e.call(this)||this;return o.method=Ie.GET,o.path="".concat(yn(i),"/").concat(encodeURIComponent(r),"/operators"),o.params={token:a,limit:s},o}return z(n,e),n}(we),qx=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.operators=r.operators.map(function(a){return new Yt(t,a)}),i.token=r.next,i}return z(n,e),n}(Pe),Kx=function(e){function n(t,r,i,a){return e.call(this,t,r,i,a)||this}return z(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)},n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l;return I(this,function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:(t=[],this._hasNext?(this._isLoading=!0,r=X.of(this._iid).requestQueue,i=new $x(Y(Y({},this),{channelUrl:this.channelUrl,token:this._token})),[4,r.send(i)]):[3,2]):[3,5];case 1:return a=u.sent(),s=a.as(qx),o=s.operators,l=s.token,this._token=l,this._hasNext=!!l,this._isLoading=!1,[2,o];case 2:return[2,t];case 3:throw ee.queryInProgress;case 4:return[3,6];case 5:throw ee.invalidParameters;case 6:return[2]}})})},n}(ro),Wx=function(e){function n(t,r,i,a){var s,o,l,u,d,f,m,p,E,_,b=this;return(b=e.call(this,t,r,i,a)||this).reverse=!1,b.messageTypeFilter=mi.ALL,b.customTypesFilter=null,b.senderUserIdsFilter=null,b.replyType=Ir.NONE,b.includeMetaArray=!1,b.includeReactions=!1,b.includeParentMessageInfo=!1,b.includeThreadInfo=!1,b.showSubchannelMessagesOnly=!1,b._edge=Number.MAX_SAFE_INTEGER,b.reverse=(s=a.reverse)!==null&&s!==void 0&&s,b.messageTypeFilter=(o=a.messageTypeFilter)!==null&&o!==void 0?o:mi.ALL,b.customTypesFilter=(l=a.customTypesFilter)!==null&&l!==void 0?l:null,b.senderUserIdsFilter=(u=a.senderUserIdsFilter)!==null&&u!==void 0?u:null,b.replyType=(d=a.replyType)!==null&&d!==void 0?d:Ir.NONE,b.includeMetaArray=(f=a.includeMetaArray)!==null&&f!==void 0&&f,b.includeReactions=(m=a.includeReactions)!==null&&m!==void 0&&m,b.includeParentMessageInfo=(p=a.includeParentMessageInfo)!==null&&p!==void 0&&p,b.includeThreadInfo=(E=a.includeThreadInfo)!==null&&E!==void 0&&E,b.showSubchannelMessagesOnly=(_=a.showSubchannelMessagesOnly)!==null&&_!==void 0&&_,b}return z(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&Z("boolean",this.reverse)&&Wt(mi,this.messageTypeFilter)&&Wt(Ir,this.replyType)&&Qt("string",this.customTypesFilter,!0)&&Qt("string",this.senderUserIdsFilter,!0)&&Z("boolean",this.includeMetaArray)&&Z("boolean",this.includeReactions)&&Z("boolean",this.includeParentMessageInfo)&&Z("boolean",this.includeThreadInfo)&&Z("boolean",this.showSubchannelMessagesOnly)},n.prototype.load=function(){return A(this,void 0,void 0,function(){var t;return I(this,function(r){switch(r.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,[4,xr.of(this._iid).getMessagesByTimestamp(this.channelUrl,this.channelType,this._edge,vt({prevResultSize:this.limit,nextResultSize:0,isInclusive:!1,reverse:this.reverse,messageTypeFilter:this.messageTypeFilter,customTypesFilter:this.customTypesFilter,replyType:this.replyType,senderUserIdsFilter:this.senderUserIdsFilter,includeReactions:this.includeReactions,includeMetaArray:this.includeMetaArray,includeParentMessageInfo:this.includeParentMessageInfo,includeThreadInfo:this.includeThreadInfo,showSubchannelMessagesOnly:this.showSubchannelMessagesOnly}))]):[3,2]:[3,5];case 1:return t=r.sent(),this._edge=Math.min.apply(Math,Nt([Number.MAX_SAFE_INTEGER],ut(t.map(function(i){return i.createdAt})),!1)),this._hasNext=t.length>=this.limit,this._isLoading=!1,[2,t];case 2:return[2,[]];case 3:throw ee.queryInProgress;case 4:return[3,6];case 5:throw ee.invalidParameters;case 6:return[2]}})})},n}(ro),Qx=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.limit,o=t.token;return(r=e.call(this)||this).method=Ie.GET,r.path="".concat(yn(a),"/").concat(encodeURIComponent(i),"/mute"),r.params={limit:s,token:o},r}return z(n,e),n}(we),Yx=function(e){function n(t,r){var i=e.call(this,t,r)||this;i.mutedUsers=[];var a=r.next,s=r.muted_list;return i.token=a,s&&s.length>0&&(i.mutedUsers=s.map(function(o){return new uc(t,o)})),i}return z(n,e),n}(Pe),Xx=function(e){function n(t,r,i,a){return e.call(this,t,r,i,a)||this}return z(n,e),n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return I(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=X.of(this._iid).requestQueue,r=new Qx(Y(Y({},this),{token:this._token})),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),a=i.as(Yx),s=a.mutedUsers,o=a.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw ee.queryInProgress;case 4:return[3,6];case 5:throw ee.invalidParameters;case 6:return[2]}})})},n}(ro),Zx=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.limit,o=t.token;return(r=e.call(this)||this).method=Ie.GET,r.path="".concat(yn(a),"/").concat(encodeURIComponent(i),"/ban"),r.params=Qe({limit:s,token:o}),r}return z(n,e),n}(we),Jx=function(e){function n(t,r){var i=e.call(this,t,r)||this;i.bannedUsers=[];var a=r.next,s=r.banned_list;return i.token=a,s&&s.length>0&&(i.bannedUsers=s.map(function(o){return new uc(t,o.user)})),i}return z(n,e),n}(Pe),e4=function(e){function n(t,r,i,a){return e.call(this,t,r,i,a)||this}return z(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)},n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return I(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=X.of(this._iid).requestQueue,r=new Zx(Y(Y({},this),{token:this._token})),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),a=i.as(Jx),s=a.bannedUsers,o=a.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw ee.queryInProgress;case 4:return[3,6];case 5:throw ee.invalidParameters;case 6:return[2]}})})},n}(ro);(function(e){e.SPAM="spam",e.HARASSING="harassing",e.SUSPICIOUS="suspicious",e.INAPPROPRIATE="inappropriate"})(of||(of={}));var t4=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.operatorUserIds;return(r=e.call(this)||this).method=Ie.POST,r.path="".concat(yn(a),"/").concat(encodeURIComponent(i),"/operators"),r.params={operator_ids:s},r}return z(n,e),n}(we);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}z(n,e)})(Pe);var n4=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.operatorUserIds;return(r=e.call(this)||this).method=Ie.DELETE,r.path="".concat(yn(a),"/").concat(encodeURIComponent(i),"/operators"),r.params={operator_ids:s},r}return z(n,e),n}(we);(function(e){function n(t,r){return e.call(this,t,r)||this}z(n,e)})(Pe);var r4=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.userId;return(r=e.call(this)||this).method=Ie.GET,r.path="".concat(yn(a),"/").concat(encodeURIComponent(i),"/mute/").concat(s),r}return z(n,e),n}(we),i4=function(e){function n(t,r){var i=e.call(this,t,r)||this;i.isMuted=!1,i.startAt=0,i.endAt=0;var a=r.is_muted,s=r.start_at,o=r.end_at,l=r.remaining_duration,u=r.description;return i.isMuted=a,i.startAt=s,i.endAt=o,i.remainingDuration=l,i.description=u,i}return z(n,e),n}(Pe),TM=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.keys;return(r=e.call(this)||this).method=Ie.GET,r.path="".concat(yn(a),"/").concat(encodeURIComponent(i),"/metadata"),r.params={keys:s,include_ts:!0},r}return z(n,e),n}(we),MM=function(e){function n(t,r){var i=e.call(this,t,r)||this,a=r.metadata,s=r.ts;return i.metadata=a,i.ts=s,i}return z(n,e),n}(Pe),a4=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.metadata;return(r=e.call(this)||this).method=Ie.POST,r.path="".concat(yn(a),"/").concat(encodeURIComponent(i),"/metadata"),r.params={metadata:s,include_ts:!0},r}return z(n,e),n}(we),s4=function(e){function n(t,r){var i,a,s=this;return(s=e.call(this,t,r)||this).metaData=(i=r.metadata)!==null&&i!==void 0?i:{},s.ts=(a=r.ts)!==null&&a!==void 0?a:null,s}return z(n,e),n}(Pe),o4=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.metadata,o=t.upsert;return(r=e.call(this)||this).method=Ie.PUT,r.path="".concat(yn(a),"/").concat(encodeURIComponent(i),"/metadata"),r.params={metadata:s,include_ts:!0,upsert:o!=null&&o},r}return z(n,e),n}(we),l4=function(e){function n(t,r){var i=e.call(this,t,r)||this,a=r.metadata,s=r.ts;return i.metadata=a,i.ts=s,i}return z(n,e),n}(Pe),oR=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return i.data&&(a.created=i.data.created,a.updated=i.data.updated,a.deleted=i.data.deleted),a}return z(n,e),n}(Yn),u4=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.key;return(r=e.call(this)||this).method=Ie.DELETE,r.path="".concat(yn(a),"/").concat(encodeURIComponent(i),"/metadata/").concat(s),r.params={include_ts:!0},r}return z(n,e),n}(we),c4=function(e){function n(t,r){var i=e.call(this,t,r)||this,a=r.ts;return i.ts=a,i}return z(n,e),n}(Pe),d4=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType;return(r=e.call(this)||this).method=Ie.DELETE,r.path="".concat(yn(a),"/").concat(encodeURIComponent(i),"/metadata"),r.params={include_ts:!0},r}return z(n,e),n}(we),h4=function(e){function n(t,r){var i=e.call(this,t,r)||this,a=r.ts;return i.ts=a,i}return z(n,e),n}(Pe),NM=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.keys;return(r=e.call(this)||this).method=Ie.GET,r.path="".concat(yn(a),"/").concat(encodeURIComponent(i),"/metacounter"),r.params={keys:s},r}return z(n,e),n}(we),IM=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.metaCounter=r,i}return z(n,e),n}(Pe),f4=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.metaCounter;return(r=e.call(this)||this).method=Ie.POST,r.path="".concat(yn(a),"/").concat(encodeURIComponent(i),"/metacounter"),r.params={metacounter:s},r}return z(n,e),n}(we),v4=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.metaCounter=r,i}return z(n,e),n}(Pe),m_=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.metaCounter,o=t.upsert,l=o!==void 0&&o,u=t.mode,d=u===void 0?"set":u;return(r=e.call(this)||this).method=Ie.PUT,r.path="".concat(yn(a),"/").concat(encodeURIComponent(i),"/metacounter"),r.params={metacounter:s,upsert:l,mode:d},r}return z(n,e),n}(we),p_=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.metaCounter=r,i}return z(n,e),n}(Pe),lR=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return i.data&&(a.created=i.data.created,a.updated=i.data.updated,a.deleted=i.data.deleted),a}return z(n,e),n}(Yn),m4=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.key;return(r=e.call(this)||this).method=Ie.DELETE,r.path="".concat(yn(a),"/").concat(encodeURIComponent(i),"/metacounter/").concat(s),r.params={},r}return z(n,e),n}(we);(function(e){function n(t,r){return e.call(this,t,r)||this}z(n,e)})(Pe);var p4=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType;return(r=e.call(this)||this).method=Ie.DELETE,r.path="".concat(yn(a),"/").concat(encodeURIComponent(i),"/metacounter"),r.params={},r}return z(n,e),n}(we);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}z(n,e)})(Pe);var g4=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.userId,o=t.seconds,l=t.description;return(r=e.call(this)||this).method=Ie.POST,r.path="".concat(yn(a),"/").concat(encodeURIComponent(i),"/mute"),r.params={user_id:s,seconds:o,description:l},r}return z(n,e),n}(we);(function(e){function n(t,r){return e.call(this,t,r)||this}z(n,e)})(Pe);var uR=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return a.user=new uc(t,i.data),a}return z(n,e),n}(Yn),_4=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.userId;return(r=e.call(this)||this).method=Ie.DELETE,r.path="".concat(yn(a),"/").concat(encodeURIComponent(i),"/mute/").concat(encodeURIComponent(s)),r}return z(n,e),n}(we);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}z(n,e)})(Pe);var cR=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return a.user=new uc(t,i.data),a}return z(n,e),n}(Yn),E4=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.userId,o=t.seconds,l=t.description;return(r=e.call(this)||this).method=Ie.POST,r.path="".concat(yn(a),"/").concat(encodeURIComponent(i),"/ban"),r.params=Qe({user_id:s,seconds:o,description:l}),r}return z(n,e),n}(we);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}z(n,e)})(Pe);var dR=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return a.user=new uc(t,i.data),i.data.member_count&&(a.memberCount=i.data.member_count),i.data.joined_member_count&&(a.joinedMemberCount=i.data.joined_member_count),a}return z(n,e),n}(Yn),y4=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.userId;return(r=e.call(this)||this).method=Ie.DELETE,r.path="".concat(yn(a),"/").concat(encodeURIComponent(i),"/ban/").concat(encodeURIComponent(s)),r}return z(n,e),n}(we);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}z(n,e)})(Pe);var hR=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return a.user=new uc(t,i.data),a}return z(n,e),n}(Yn),AM=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.freezing;return(r=e.call(this)||this).method=Ie.PUT,r.path="".concat(yn(a),"/").concat(encodeURIComponent(i),"/freeze"),r.params={freeze:s},r}return z(n,e),n}(we);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}z(n,e)})(Pe);var fR=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return a.freeze=i.data.freeze,a}return z(n,e),n}(Yn),Rb=function(e){return e instanceof ud?e._custom?"custom":e.name:e},Ob=function(e){if(e instanceof ud&&e._custom)return e.name},b4=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.category,o=t.userId,l=t.description;return(r=e.call(this)||this).method=Ie.POST,r.path="".concat(e2(a),"/").concat(encodeURIComponent(i)),r.params=Qe({report_category:Rb(s),reporting_user_id:o,report_description:l,custom_report_category_name:Ob(s)}),r}return z(n,e),n}(we),C4=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.category,o=t.userId,l=t.offendingUserId,u=t.description;return(r=e.call(this)||this).method=Ie.POST,r.path="".concat(iE,"/users/").concat(l),r.params=Qe({channel_url:i,channel_type:a===ln.OPEN?"open_channels":"group_channels",report_category:Rb(s),reporting_user_id:o,report_description:u,custom_report_category_name:Ob(s)}),r}return z(n,e),n}(we),S4=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.category,o=t.userId,l=t.offendingUserId,u=t.messageId,d=t.description;return(r=e.call(this)||this).method=Ie.POST,r.path="".concat(e2(a),"/").concat(encodeURIComponent(i),"/messages/").concat(u),r.params=Qe({report_category:Rb(s),reporting_user_id:o,report_description:d,offending_user_id:l,custom_report_category_name:Ob(s)}),r}return z(n,e),n}(we),T4=function(e){function n(t){var r=[];return t.mentionType===gi.USERS&&(t.mentionedUserIds?r=t.mentionedUserIds:t.mentionedUsers&&(r=t.mentionedUsers.map(function(i){return i.userId}))),e.call(this,{code:"MESG",ackRequired:!0,payload:Qe(vt({channel_url:t.channelUrl,message:t.message,data:t.data,custom_type:t.customType,metaarray:t.metaArrays,mention_type:t.mentionType,mentioned_user_ids:r,mentioned_message_template:t.mentionedMessageTemplate,target_langs:t.translationTargetLanguages,push_option:t.pushNotificationDeliveryOption&&t.pushNotificationDeliveryOption!==Os.DEFAULT?t.pushNotificationDeliveryOption:void 0,apple_critical_alert_options:t.appleCriticalAlertOptions,silent:t.silent,reply_to_channel:t.isReplyToChannel,parent_message_id:t.parentMessageId?t.parentMessageId:null,req_id:t.reqId,poll_id:t.pollId,pin_message:t.isPinnedMessage,extended_message_payload:t.extendedMessagePayload}))})||this}return z(n,e),n}(pi),Lb=function(e){function n(t,r,i){var a,s,o,l,u=this;(u=e.call(this,t,"MESG",i)||this).message=new fi(t,i);var d=X.of(t).sdkState;return u.isMentioned=fd(u.message.mentionType,(o=(a=u.message.mentionedUserIds)!==null&&a!==void 0?a:(s=u.message.mentionedUsers)===null||s===void 0?void 0:s.map(function(f){return f.userId}))!==null&&o!==void 0?o:[],d.userId),u.forceUpdateLastMessage=(l=i.force_update_last_message)!==null&&l!==void 0&&l,u}return z(n,e),n}(Yn),wM=function(e){function n(t){var r=null;return t.mentionType===gi.USERS&&(t.mentionedUserIds?r=t.mentionedUserIds:t.mentionedUsers&&(r=t.mentionedUsers.map(function(i){return i.userId}))),e.call(this,{code:"MEDI",ackRequired:!0,payload:Qe(vt({channel_url:t.channelUrl,msg_id:t.messageId,message:t.message,data:t.data,custom_type:t.customType,metaarray:t.metaArrayParams,mention_type:t.mentionType,mentioned_user_ids:r,mentioned_message_template:t.mentionedMessageTemplate,apple_critical_alert_options:t.appleCriticalAlertOptions?ls.payloadify(t.appleCriticalAlertOptions):null,poll_id:t.pollId}))})||this}return z(n,e),n}(pi),ap=function(e){function n(t,r,i){var a,s,o,l,u,d=this;(d=e.call(this,t,"MEDI",i)||this).message=new fi(t,i);var f=X.of(t).sdkState;return d.mentionCountChange=mb({mentionType:(a=i.old_values)===null||a===void 0?void 0:a.mention_type,mentionedUserIds:(o=(s=i.old_values)===null||s===void 0?void 0:s.mentioned_user_ids)!==null&&o!==void 0?o:[]},vt({mentionType:d.message.mentionType,mentionedUserIds:(l=d.message.mentionedUserIds)!==null&&l!==void 0?l:(u=d.message.mentionedUsers)===null||u===void 0?void 0:u.map(function(m){return m.userId})}),f.userId),d}return z(n,e),n}(Yn),RM=function(e){function n(t){var r=null;return t.mentionType===gi.USERS&&(t.mentionedUserIds?r=t.mentionedUserIds:t.mentionedUsers&&(r=t.mentionedUsers.map(function(i){return i.userId}))),e.call(this,{code:"FEDI",ackRequired:!0,payload:Qe(vt({channel_url:t.channelUrl,msg_id:t.messageId,data:t.data,custom_type:t.customType,metaarray:t.metaArrayParams,mention_type:t.mentionType,mentioned_user_ids:r,apple_critical_alert_options:t.appleCriticalAlertOptions}))})||this}return z(n,e),n}(pi),sp=function(e){function n(t,r,i){var a,s,o,l,u,d=this;(d=e.call(this,t,"FEDI",i)||this).message=new Mr(t,i);var f=X.of(t).sdkState;return d.mentionCountChange=mb({mentionType:(a=i.old_values)===null||a===void 0?void 0:a.mention_type,mentionedUserIds:(o=(s=i.old_values)===null||s===void 0?void 0:s.mentioned_user_ids)!==null&&o!==void 0?o:[]},vt({mentionType:d.message.mentionType,mentionedUserIds:(l=d.message.mentionedUserIds)!==null&&l!==void 0?l:(u=d.message.mentionedUsers)===null||u===void 0?void 0:u.map(function(m){return m.userId})}),f.userId),d}return z(n,e),n}(Yn),M4=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=t.reactionKey,o=e.call(this)||this;return o.method=Ie.POST,o.path="".concat(yn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/reactions"),o.params={reaction:s},o}return z(n,e),n}(we),N4=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.reactionEvent=new Nb(r),i}return z(n,e),n}(Pe),I4=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=t.reactionKey,o=e.call(this)||this;return o.method=Ie.DELETE,o.path="".concat(yn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/reactions"),o.params={reaction:s},o}return z(n,e),n}(we),A4=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.reactionEvent=new Nb(Y({},r)),i}return z(n,e),n}(Pe),w4=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=t.translationTargetLanguages,o=e.call(this)||this;return o.method=Ie.POST,o.path="".concat(yn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(encodeURIComponent(a),"/translation"),o.params={target_langs:s},o}return z(n,e),n}(we),R4=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.message=new fi(t,r),i}return z(n,e),n}(Pe),O4=function(e){function n(t){var r,i=this;i=e.call(this)||this;var a=[];t.mentionType===gi.USERS&&(t.mentionedUserIds?a=t.mentionedUserIds:t.mentionedUsers&&(a=t.mentionedUsers.map(function(l){return l.userId})));var s=t.channelType,o=t.channelUrl;return i.method=Ie.POST,i.path="".concat(yn(s),"/").concat(encodeURIComponent(o),"/scheduled_messages"),i.params=Qe(vt({req_id:t.reqId,scheduled_at:t.scheduledAt,message_type:hd.USER,message:t.message,custom_type:t.customType,data:t.data,mention_type:t.mentionType,mentioned_user_ids:a,sorted_metaarray:(r=t.metaArrays)===null||r===void 0?void 0:r.map(function(l){return $r.payloadify(l)}),apple_critical_alert_options:t.appleCriticalAlertOptions?ls.payloadify(t.appleCriticalAlertOptions):null,target_langs:t.translationTargetLanguages,push_option:t.pushNotificationDeliveryOption})),i}return z(n,e),n}(we),vR=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.message=new fi(t,r),i}return z(n,e),n}(Pe),L4=function(e){function n(t){var r,i,a=this;a=e.call(this)||this;var s=[];t.mentionType===gi.USERS&&(t.mentionedUserIds?s=t.mentionedUserIds:t.mentionedUsers&&(s=t.mentionedUsers.map(function(u){return u.userId})));var o=t.channelType,l=t.channelUrl;return a.method=Ie.POST,a.path="".concat(yn(o),"/").concat(encodeURIComponent(l),"/scheduled_messages"),a.params=vt({req_id:t.reqId,scheduled_at:t.scheduledAt,message_type:hd.FILE,url:t.fileUrl,file_name:t.fileName,file_size:t.fileSize,file_type:t.mimeType,thumbnails:(r=t._thumbnails)===null||r===void 0?void 0:r.map(function(u){return Ko.payloadify(u)}),custom_type:t.customType,data:t.data,require_auth:t.requireAuth,mention_type:t.mentionType,mentioned_user_ids:s,sorted_metaarray:(i=t.metaArrays)===null||i===void 0?void 0:i.map(function(u){return $r.payloadify(u)}),apple_critical_alert_options:t.appleCriticalAlertOptions?ls.payloadify(t.appleCriticalAlertOptions):null,push_option:t.pushNotificationDeliveryOption}),a}return z(n,e),n}(we),U4=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.message=new Mr(t,r),i}return z(n,e),n}(Pe),D4=function(e){function n(t){var r=t.pollId,i=t.title,a=t.data,s=t.allowUserSuggestion,o=t.allowMultipleVotes,l=t.closeAt,u=e.call(this)||this;return u.method=Ie.PUT,u.path="".concat(Us,"/").concat(encodeURIComponent(r)),u.params={title:i,data:a,allow_user_suggestion:s,allow_multiple_votes:o,close_at:l},u}return z(n,e),n}(we),k4=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.poll=new os(t,r),i}return z(n,e),n}(Pe),P4=function(e){function n(t){var r=t.pollId,i=e.call(this)||this;return i.method=Ie.DELETE,i.path="".concat(Us,"/").concat(encodeURIComponent(r)),i}return z(n,e),n}(we);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}z(n,e)})(Pe);var x4=function(e){function n(t){var r=t.pollId,i=e.call(this)||this;return i.method=Ie.PUT,i.path="".concat(Us,"/").concat(encodeURIComponent(r),"/close"),i}return z(n,e),n}(we),F4=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.poll=new os(t,r),i}return z(n,e),n}(Pe),B4=function(e){function n(t){var r=t.channelUrl,i=t.channelType,a=t.pollId,s=t.optionText,o=e.call(this)||this;return o.method=Ie.POST,o.path="".concat(Us,"/").concat(encodeURIComponent(a),"/options"),o.params={channel_url:r,channel_type:i,text:s},o}return z(n,e),n}(we),H4=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.poll=new os(t,r),i}return z(n,e),n}(Pe),G4=function(e){function n(t){var r=t.pollId,i=t.pollOptionId,a=t.optionText,s=e.call(this)||this;return s.method=Ie.PUT,s.path="".concat(Us,"/").concat(encodeURIComponent(r),"/options/").concat(encodeURIComponent(i)),s.params={text:a},s}return z(n,e),n}(we),z4=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.poll=new os(t,r),i}return z(n,e),n}(Pe),j4=function(e){function n(t){var r=t.pollId,i=t.pollOptionId,a=e.call(this)||this;return a.method=Ie.DELETE,a.path="".concat(Us,"/").concat(encodeURIComponent(r),"/options/").concat(encodeURIComponent(i)),a}return z(n,e),n}(we);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}z(n,e)})(Pe);var V4=function(e){function n(t){var r=t.reqId,i=t.channelType,a=t.channelUrl,s=t.pollId,o=t.pollOptionIds;return e.call(this,{code:"VOTE",ackRequired:!0,payload:Qe({req_id:r,channel_type:i===ln.OPEN?"open_channels":"group_channels",channel_url:a,poll_id:s,option_ids:o})})||this}return z(n,e),n}(pi),Ub=function(e){function n(t,r,i){var a=e.call(this,t,"VOTE",i)||this;return a.event=new lx(i),a.channelUrl=i.channel_url,a.channelType=i.channel_type,a}return z(n,e),n}(Yn),mR=100,pR="GroupChannel",$4="url",gR=100,Db="Message",q4="messageId",_R="NotificationMessage",K4="notificationId",W4="Poll",Q4="pollId",Y4="FeedChannel",X4="url",ER="UserInfo",Z4="userId";function J4(e){var n,t,r;return(n=e.messageParams)!==null&&n!==void 0?n:vt(Y(Y({},e),{isReplyToChannel:!1,mentionedUserIds:(t=e.mentionedUserIds)!==null&&t!==void 0?t:(r=e.mentionedUsers)===null||r===void 0?void 0:r.map(function(i){return i.userId}),pushNotificationDeliveryOption:Os.DEFAULT,isPinnedMessage:!1,fileInfoList:e.fileInfoList.map(function(i){var a;return{fileUrl:i.plainUrl,fileName:i.fileName,fileSize:i.fileSize,mimeType:i.mimeType,thumbnailSizes:(a=i.thumbnails)===null||a===void 0?void 0:a.map(function(s){return{maxWidth:s.width,maxHeight:s.height}}),_thumbnails:i.thumbnails,_uploadedMetaData:{requireAuth:i._requireAuth,isUploaded:!0}}})}))}var e6=Y(Y({},Bp),{fileInfoList:[],message:""}),t6=function(e){return(Vr(e.file)||Z("string",e.fileUrl))&&Z("string",e.fileName,!0)&&Z("string",e.mimeType,!0)&&Z("number",e.fileSize,!0)&&(e.thumbnailSizes===void 0||Array.isArray(e.thumbnailSizes)&&e.thumbnailSizes.every(function(n){return n.maxWidth>0&&n.maxHeight>0}))},Rm=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t._onFileUploaded=Bt,t}return z(n,e),n.prototype._triggerOnFileUploaded=function(t,r,i,a){this._onFileUploaded(t,r,i,a)},n.prototype.onFileUploaded=function(t){return this._onFileUploaded=t,this},n.prototype.onPending=function(t){return e.prototype.onPending.call(this,t),this},n.prototype.onFailed=function(t){return e.prototype.onFailed.call(this,t),this},n.prototype.onSucceeded=function(t){return e.prototype.onSucceeded.call(this,t),this},n}(fa),n6=function(e){function n(t,r){var i=e.call(this,t)||this;return i.message=null,i.message=_i(t,r.message),i}return z(n,e),n}(Rr),r6=function(e){function n(t){var r=this,i=t.channelType,a=t.channelUrl,s=t.limit,o=t.token,l=t.includeReactions,u=t.includeMetaArray,d=t.includeParentMessageInfo,f=t.includeThreadInfo,m=t.includePollDetails;return(r=e.call(this)||this).method=Ie.GET,r.path="".concat(yn(i),"/").concat(encodeURIComponent(a),"/pinned_messages"),r.params=Qe({limit:s,token:o,include_reactions_summary:l,with_sorted_meta_array:u,include_thread_info:f,include_parent_message_info:d,include_poll_details:m}),r}return z(n,e),n}(we),i6=function(e){function n(t,r){var i=e.call(this,t,r)||this,a=r.pinned_messages,s=r.has_more,o=r.next;return i.pinnedMessages=a.map(function(l){return new n6(t,l)}),i.hasMore=s,i.token=o,i}return z(n,e),n}(Pe),a6=function(e){function n(t,r,i,a){var s=e.call(this,t,r,i,a)||this;return s.includeMetaArray=a.includeMetaArray,s.includeReactions=a.includeReactions,s.includeParentMessageInfo=a.includeParentMessageInfo,s.includeThreadInfo=a.includeThreadInfo,s.includePollDetails=a.includePollDetails,s}return z(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&Z("boolean",this.includeMetaArray,!0)&&Z("boolean",this.includeReactions,!0)&&Z("boolean",this.includeParentMessageInfo,!0)&&Z("boolean",this.includeThreadInfo,!0)&&Z("boolean",this.includePollDetails,!0)},n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l;return I(this,function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=X.of(this._iid).requestQueue,r=new r6(Y(Y({},this),{token:this._token})),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=u.sent(),a=i.as(i6),s=a.pinnedMessages,o=a.hasMore,l=a.token,this._token=l,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw ee.queryInProgress;case 4:return[3,6];case 5:throw ee.invalidParameters;case 6:return[2]}})})},n}(ro),s6=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=e.call(this)||this;return s.method=Ie.POST,s.path="".concat(yn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/pin"),s}return z(n,e),n}(we);(function(e){function n(t,r){return e.call(this,t,r)||this}z(n,e)})(Pe);var o6=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=e.call(this)||this;return s.method=Ie.DELETE,s.path="".concat(yn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/pin"),s}return z(n,e),n}(we);(function(e){function n(t,r){return e.call(this,t,r)||this}z(n,e)})(Pe);var ci,l6=2;(function(e){e.SEND="send",e.RESEND="resend",e.COPY="copy"})(ci||(ci={}));var ir,op=function(e){function n(t,r){var i,a,s,o,l,u,d,f=this;return(f=e.call(this,t)||this)._name="",f._createdAt=0,f.pinnedMessageIds=[],f.channelType=ln.BASE,f.coverUrl="",f.customType="",f.data="",f.isFrozen=!1,f.isEphemeral=!1,f.creator=null,f._messageCollectionLastAccessedAt=0,f._url=r.channel_url,f._name=(i=r.name)!==null&&i!==void 0?i:"",f._createdAt=1e3*r.created_at,f.coverUrl=(a=r.cover_url)!==null&&a!==void 0?a:"",f.customType=(s=r.custom_type)!==null&&s!==void 0?s:"",f.data=(o=r.data)!==null&&o!==void 0?o:"",f.isFrozen=(l=r.freeze)!==null&&l!==void 0&&l,f.isEphemeral=(u=r.is_ephemeral)!==null&&u!==void 0&&u,f.creator=r.created_by?new Yt(f._iid,r.created_by):null,r.metadata&&Object.keys(r.metadata).length>0&&r.ts?(f._cachedMetaData=new Map,Object.keys(r.metadata).forEach(function(m){f._cachedMetaData.set(m,{value:r.metadata[m],isRemoved:!1,updatedAt:r.ts})})):typeof r.metadata=="string"&&(f._cachedMetaData=new Map(Object.entries(JSON.parse(r.metadata)))),f.pinnedMessageIds=(d=r.pinned_message_ids)!==null&&d!==void 0?d:[],f}return z(n,e),Object.defineProperty(n.prototype,"url",{get:function(){return this._url},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"createdAt",{get:function(){return this._createdAt},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return Y(Y({},this),{url:this._url,name:this._name,createdAt:this._createdAt})},n.payloadify=function(t){return Qe(vt(Y(Y({},e.payloadify.call(this,t)),{channel_url:t.url,name:t.name,cover_url:t.coverUrl,custom_type:t.customType,data:t.data,freeze:t.isFrozen,is_ephemeral:t.isEphemeral,created_by:t.creator?Yt.payloadify(t.creator):null,created_at:t.createdAt/1e3,metadata:t.cachedMetaData,pinned_message_ids:t.pinnedMessageIds})))},n.prototype.isGroupChannel=function(){return this.channelType===ln.GROUP},n.prototype.isOpenChannel=function(){return this.channelType===ln.OPEN},n.prototype.isFeedChannel=function(){return this.channelType===ln.FEED},Object.defineProperty(n.prototype,"cachedMetaData",{get:function(){var t={};return this._cachedMetaData&&this._cachedMetaData.forEach(function(r,i){r.isRemoved||(t[i]=r.value)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"messageCollectionLastAccessedAt",{get:function(){return this._messageCollectionLastAccessedAt},enumerable:!1,configurable:!0}),n.prototype._serializeCachedMetaData=function(){return this._cachedMetaData?{cachedMetaData:JSON.stringify(Object.fromEntries(this._cachedMetaData))}:{}},n.prototype._updateMessageCollectionLastAccessedAt=function(){this._messageCollectionLastAccessedAt=Date.now()},n.prototype._update=function(t){Object.assign(this,t)},n.prototype._upsertCachedMetaData=function(t,r){var i=this;Object.keys(t).forEach(function(a){i._cachedMetaData||(i._cachedMetaData=new Map);var s=i._cachedMetaData.get(a);(!s||s.updatedAt<=r)&&i._cachedMetaData.set(a,{value:t[a],isRemoved:!1,updatedAt:r})})},n.prototype._updateCachedMetaData=function(t,r){var i=this,a=!1;return this._cachedMetaData?this._cachedMetaData.forEach(function(s,o){var l;s.updatedAt<=r&&(i._cachedMetaData.set(o,{value:(l=t[o])!==null&&l!==void 0?l:s.value,isRemoved:!t[o],updatedAt:r}),a=!0)}):(this._cachedMetaData=new Map,Object.keys(t).forEach(function(s){i._cachedMetaData.set(s,{value:t[s],isRemoved:!1,updatedAt:r})}),a=!0),{isUpdated:a}},n.prototype._removeFromCachedMetaData=function(t,r){var i=this;this._cachedMetaData&&t.forEach(function(a){var s=i._cachedMetaData.get(a);s&&s.updatedAt<r&&(s.isRemoved=!0,s.updatedAt=r)})},n.prototype._clearCachedMetaData=function(){this._cachedMetaData&&this._cachedMetaData.clear()},n.prototype._runIfHandleableWithGroupChannel=function(t){this.isGroupChannel()?t(this):this.isFeedChannel()&&t(this.groupChannel)},n.prototype._generateRequestId=function(){return"rq-".concat(Ho())},n.prototype.isIdentical=function(t){return t&&this.url===t.url},n.prototype.isEqual=function(t){return Kw(this,t)},n.prototype.createOperatorListQuery=function(t){return t===void 0&&(t={}),new Kx(this._iid,this.url,this.channelType,t)},n.prototype.createMutedUserListQuery=function(t){return t===void 0&&(t={}),new Xx(this._iid,this.url,this.channelType,t)},n.prototype.createBannedUserListQuery=function(t){return t===void 0&&(t={}),new e4(this._iid,this.url,this.channelType,t)},n.prototype.createPreviousMessageListQuery=function(t){return t===void 0&&(t={}),new Wx(this._iid,this.url,this.channelType,t)},n.prototype.createPinnedMessageListQuery=function(t){return t===void 0&&(t={}),new a6(this._iid,this.url,this.channelType,t)},n.prototype.addOperators=function(t){return A(this,void 0,void 0,function(){var r,i;return I(this,function(a){switch(a.label){case 0:return Oe(Qt("string",t)).throw(ee.invalidParameters),r=X.of(this._iid).requestQueue,i=new t4({channelUrl:this.url,channelType:this.channelType,operatorUserIds:t}),[4,r.send(i)];case 1:return a.sent(),[2]}})})},n.prototype.removeOperators=function(t){return A(this,void 0,void 0,function(){var r,i;return I(this,function(a){switch(a.label){case 0:return Oe(Qt("string",t)).throw(ee.invalidParameters),r=X.of(this._iid).requestQueue,i=new n4({channelUrl:this.url,channelType:this.channelType,operatorUserIds:t}),[4,r.send(i)];case 1:return a.sent(),[2]}})})},n.prototype.getMyMutedInfo=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,d,f,m;return I(this,function(p){switch(p.label){case 0:return t=X.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new r4({channelUrl:this.url,channelType:this.channelType,userId:r.userId}),[4,i.send(a)];case 1:return s=p.sent(),o=s.as(i4),l=o.isMuted,u=o.startAt,d=o.endAt,f=o.remainingDuration,m=o.description,[2,{isMuted:l,startAt:u,endAt:d,remainingDuration:f,description:m}]}})})},n.prototype.getMetaData=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l;return I(this,function(u){switch(u.label){case 0:return Oe(Qt("string",t)).throw(ee.invalidParameters),r=X.of(this._iid).requestQueue,i=new TM({channelUrl:this.url,channelType:this.channelType,keys:t}),[4,r.send(i)];case 1:return a=u.sent(),s=a.as(MM),o=s.metadata,l=s.ts,this._upsertCachedMetaData(o,l),[2,o]}})})},n.prototype.getAllMetaData=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return I(this,function(l){switch(l.label){case 0:return t=X.of(this._iid).requestQueue,r=new TM({channelUrl:this.url,channelType:this.channelType,keys:[]}),[4,t.send(r)];case 1:return i=l.sent(),a=i.as(MM),s=a.metadata,o=a.ts,this._updateCachedMetaData(s,o),[2,s]}})})},n.prototype.createMetaData=function(t){return A(this,void 0,void 0,function(){var r,i,a,s;return I(this,function(o){switch(o.label){case 0:return r=X.of(this._iid).requestQueue,i=new a4({channelUrl:this.url,channelType:this.channelType,metadata:t}),[4,r.send(i)];case 1:return a=o.sent(),s=a.as(s4).metaData,this._upsertCachedMetaData(s,0),[2,s]}})})},n.prototype.updateMetaData=function(t,r){return r===void 0&&(r=!1),A(this,void 0,void 0,function(){var i,a,s,o,l,u;return I(this,function(d){switch(d.label){case 0:return i=X.of(this._iid).requestQueue,a=new o4({channelUrl:this.url,channelType:this.channelType,metadata:t,upsert:r}),[4,i.send(a)];case 1:return s=d.sent(),o=s.as(l4),l=o.metadata,u=o.ts,this._upsertCachedMetaData(l,u),[2,l]}})})},n.prototype.deleteMetaData=function(t){return A(this,void 0,void 0,function(){var r,i,a,s;return I(this,function(o){switch(o.label){case 0:return Oe(Z("string",t)).throw(ee.invalidParameters),r=X.of(this._iid).requestQueue,i=new u4({channelUrl:this.url,channelType:this.channelType,key:t}),[4,r.send(i)];case 1:return a=o.sent(),s=a.as(c4).ts,this._removeFromCachedMetaData([t],s),[2]}})})},n.prototype.deleteAllMetaData=function(){return A(this,void 0,void 0,function(){var t,r,i,a;return I(this,function(s){switch(s.label){case 0:return t=X.of(this._iid).requestQueue,r=new d4({channelUrl:this.url,channelType:this.channelType}),[4,t.send(r)];case 1:return i=s.sent(),a=i.as(h4).ts,this._removeFromCachedMetaData(Nt([],ut(this._cachedMetaData.keys()),!1),a),[2]}})})},n.prototype.getMetaCounters=function(t){return A(this,void 0,void 0,function(){var r,i,a;return I(this,function(s){switch(s.label){case 0:return Oe(Qt("string",t)).throw(ee.invalidParameters),r=X.of(this._iid).requestQueue,i=new NM({channelUrl:this.url,channelType:this.channelType,keys:t}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(IM).metaCounter]}})})},n.prototype.getAllMetaCounters=function(){return A(this,void 0,void 0,function(){var t,r,i;return I(this,function(a){switch(a.label){case 0:return t=X.of(this._iid).requestQueue,r=new NM({channelUrl:this.url,channelType:this.channelType,keys:[]}),[4,t.send(r)];case 1:return i=a.sent(),[2,i.as(IM).metaCounter]}})})},n.prototype.createMetaCounters=function(t){return A(this,void 0,void 0,function(){var r,i,a;return I(this,function(s){switch(s.label){case 0:return r=X.of(this._iid).requestQueue,i=new f4({channelUrl:this.url,channelType:this.channelType,metaCounter:t}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(v4).metaCounter]}})})},n.prototype.updateMetaCounters=function(t,r){return r===void 0&&(r=!1),A(this,void 0,void 0,function(){var i,a,s;return I(this,function(o){switch(o.label){case 0:return i=X.of(this._iid).requestQueue,a=new m_({channelUrl:this.url,channelType:this.channelType,metaCounter:t,upsert:r}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(p_).metaCounter]}})})},n.prototype.increaseMetaCounters=function(t){return A(this,void 0,void 0,function(){var r,i,a;return I(this,function(s){switch(s.label){case 0:return r=X.of(this._iid).requestQueue,i=new m_({channelUrl:this.url,channelType:this.channelType,metaCounter:t,upsert:!1,mode:"increase"}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(p_).metaCounter]}})})},n.prototype.decreaseMetaCounters=function(t){return A(this,void 0,void 0,function(){var r,i,a;return I(this,function(s){switch(s.label){case 0:return r=X.of(this._iid).requestQueue,i=new m_({channelUrl:this.url,channelType:this.channelType,metaCounter:t,upsert:!1,mode:"decrease"}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(p_).metaCounter]}})})},n.prototype.deleteMetaCounter=function(t){return A(this,void 0,void 0,function(){var r,i;return I(this,function(a){switch(a.label){case 0:return Oe(Z("string",t)).throw(ee.invalidParameters),r=X.of(this._iid).requestQueue,i=new m4({channelUrl:this.url,channelType:this.channelType,key:t}),[4,r.send(i)];case 1:return a.sent(),[2]}})})},n.prototype.deleteAllMetaCounters=function(){return A(this,void 0,void 0,function(){var t,r;return I(this,function(i){switch(i.label){case 0:return t=X.of(this._iid).requestQueue,r=new p4({channelUrl:this.url,channelType:this.channelType}),[4,t.send(r)];case 1:return i.sent(),[2]}})})},n.prototype.muteUser=function(t,r,i){return A(this,void 0,void 0,function(){return I(this,function(a){return[2,this.muteUserWithUserId(t.userId,r,i)]})})},n.prototype.muteUserWithUserId=function(t,r,i){return A(this,void 0,void 0,function(){var a,s;return I(this,function(o){switch(o.label){case 0:return Oe(Z("string",t)&&Z("number",r,!0)&&Z("string",i,!0)).throw(ee.invalidParameters),a=X.of(this._iid).requestQueue,s=new g4({channelUrl:this.url,channelType:this.channelType,userId:t,seconds:r,description:i}),[4,a.send(s)];case 1:return o.sent(),[2]}})})},n.prototype.unmuteUser=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){return[2,this.unmuteUserWithUserId(t.userId)]})})},n.prototype.unmuteUserWithUserId=function(t){return A(this,void 0,void 0,function(){var r,i;return I(this,function(a){switch(a.label){case 0:return Oe(Z("string",t)).throw(ee.invalidParameters),r=X.of(this._iid).requestQueue,i=new _4({channelUrl:this.url,channelType:this.channelType,userId:t}),[4,r.send(i)];case 1:return a.sent(),[2]}})})},n.prototype.banUser=function(t,r,i){return A(this,void 0,void 0,function(){return I(this,function(a){return[2,this.banUserWithUserId(t.userId,r,i)]})})},n.prototype.banUserWithUserId=function(t,r,i){return A(this,void 0,void 0,function(){var a,s;return I(this,function(o){switch(o.label){case 0:return Oe(Z("string",t)&&Z("number",r,!0)&&Z("string",i,!0)).throw(ee.invalidParameters),a=X.of(this._iid).requestQueue,s=new E4({channelUrl:this.url,channelType:this.channelType,userId:t,seconds:r,description:i}),[4,a.send(s)];case 1:return o.sent(),[2]}})})},n.prototype.unbanUser=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){return[2,this.unbanUserWithUserId(t.userId)]})})},n.prototype.unbanUserWithUserId=function(t){return A(this,void 0,void 0,function(){var r,i;return I(this,function(a){switch(a.label){case 0:return Oe(Z("string",t)).throw(ee.invalidParameters),r=X.of(this._iid).requestQueue,i=new y4({channelUrl:this.url,channelType:this.channelType,userId:t}),[4,r.send(i)];case 1:return a.sent(),[2]}})})},n.prototype.freeze=function(){return A(this,void 0,void 0,function(){var t,r;return I(this,function(i){switch(i.label){case 0:return t=X.of(this._iid).requestQueue,r=new AM({channelUrl:this.url,channelType:this.channelType,freezing:!0}),[4,t.send(r)];case 1:return i.sent(),this.isFrozen=!0,[2]}})})},n.prototype.unfreeze=function(){return A(this,void 0,void 0,function(){var t,r;return I(this,function(i){switch(i.label){case 0:return t=X.of(this._iid).requestQueue,r=new AM({channelUrl:this.url,channelType:this.channelType,freezing:!1}),[4,t.send(r)];case 1:return i.sent(),this.isFrozen=!1,[2]}})})},n.prototype.getMessagesByMessageId=function(t,r){return A(this,void 0,void 0,function(){var i;return I(this,function(a){switch(a.label){case 0:return i=Y(Y({},sf),r),Oe(Z("number",t)&&gM(i)).throw(ee.invalidParameters),[4,xr.of(this._iid).getMessagesByMessageId(this.url,this.channelType,t,i)];case 1:return[2,a.sent()]}})})},n.prototype.getMessagesByTimestamp=function(t,r){return A(this,void 0,void 0,function(){var i;return I(this,function(a){switch(a.label){case 0:return i=Y(Y({},sf),r),Oe(Z("number",t)&&gM(i)).throw(ee.invalidParameters),[4,xr.of(this._iid).getMessagesByTimestamp(this.url,this.channelType,t,i)];case 1:return[2,a.sent()]}})})},n.prototype.getMessageChangeLogsSinceTimestamp=function(t,r){return r===void 0&&(r={}),A(this,void 0,void 0,function(){var i;return I(this,function(a){switch(a.label){case 0:return i=Y(Y({},mE),r),Oe(Z("number",t)&&_M(i)).throw(ee.invalidParameters),[4,xr.of(this._iid).getMessageChangelogs(this.url,this.channelType,t,i)];case 1:return[2,a.sent()]}})})},n.prototype.getMessageChangeLogsSinceToken=function(t,r){return r===void 0&&(r={}),A(this,void 0,void 0,function(){var i;return I(this,function(a){switch(a.label){case 0:return i=Y(Y({},mE),r),Oe(Z("string",t)&&_M(i)).throw(ee.invalidParameters),[4,xr.of(this._iid).getMessageChangelogs(this.url,this.channelType,t,i)];case 1:return[2,a.sent()]}})})},n.prototype._createPendingSendableMessagePayload=function(t,r,i){var a,s=X.of(this._iid).sessionManager;return Qe(vt({channel_url:this.url,channel_type:this.channelType,msg_id:0,parent_message_id:t.parentMessageId,data:t.data,custom_type:t.customType,mention_type:t.mentionType,sorted_metaarray:t.metaArrays?t.metaArrays.map(function(o){return $r.payloadify(o)}):null,apple_critical_alert_options:t.appleCriticalAlertOptions?ls.payloadify(t.appleCriticalAlertOptions):null,created_at:i,user:s.currentUser?gd.payloadify(s.currentUser):null,req_id:r,request_state:gn.PENDING,mentioned_user_ids:t.mentionedUserIds,mentioned_users:(a=t.mentionedUsers)===null||a===void 0?void 0:a.map(function(o){return Yt.payloadify(o)})}))},n.prototype._createPendingUserMessage=function(t,r,i){var a,s,o={};if(t.translationTargetLanguages)try{for(var l=Ge(t.translationTargetLanguages),u=l.next();!u.done;u=l.next())o[u.value]=""}catch(m){a={error:m}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}var d=Qe(Y(Y({},this._createPendingSendableMessagePayload(t,r,i)),{type:Zn.USER,message:t.message,translations:o,extended_message_payload:t.extendedMessagePayload})),f=new fi(this._iid,d);return f.messageParams=t,f},n.prototype._createPendingScheduledUserMessage=function(t,r,i){var a=this._createPendingUserMessage(t,r,i);return a.scheduledInfo={scheduledMessageId:0,scheduledAt:t.scheduledAt,scheduledMessageParams:t},a},n.prototype._createPendingFileMessage=function(t,r,i){var a,s,o,l,u,d,f,m=Qe(Y(Y({},this._createPendingSendableMessagePayload(t,r,i)),{type:Zn.FILE,url:t.fileUrl,file:{name:(a=t.fileName)!==null&&a!==void 0?a:(s=t.file)===null||s===void 0?void 0:s.name,size:(o=t.fileSize)!==null&&o!==void 0?o:(l=t.file)===null||l===void 0?void 0:l.size,type:(u=t.mimeType)!==null&&u!==void 0?u:(d=t.file)===null||d===void 0?void 0:d.type,data:t.data},thumbnails:(f=t._thumbnails)===null||f===void 0?void 0:f.map(function(E){return Ko.payloadify(E)}),message:t.message})),p=new Mr(this._iid,m);return p.messageParams=t,p},n.prototype._createPendingMultipleFilesMessage=function(t,r,i){var a=Qe(Y(Y({},this._createPendingSendableMessagePayload(t,r,i)),{type:Zn.FILE,file:t.fileInfoList.length>0?{name:t.fileInfoList[0].fileName,size:t.fileInfoList[0].fileSize,type:t.fileInfoList[0].mimeType,data:t.data}:void 0,message:t.message})),s=new Ba(this._iid,a);return s.messageParams=t,s},n.prototype._validateFailedFileMessageHasFile=function(t,r){var i;return!!t.url||Vr(r)||Vr((i=t.messageParams)===null||i===void 0?void 0:i.file)},n.prototype._createPendingScheduledFileMessage=function(t,r,i){var a=this._createPendingFileMessage(t,r,i);return a.scheduledInfo={scheduledMessageId:0,scheduledAt:t.scheduledAt,scheduledMessageParams:t},a},n.prototype._markMessageAsFailed=function(t,r,i){i===void 0&&(i=!1),t.errorCode=r.code,r.code===lt.REQUEST_CANCELED||r.code===lt.FILE_UPLOAD_CANCEL_FAILED?t.sendingStatus=gn.CANCELED:i||(t.sendingStatus=gn.FAILED)},n.prototype.sendUserMessage=function(t){var r=Y(Y({},tR),t);return Oe(rR(r)).throw(ee.invalidParameters),this._sendUserMessage(r)},n.prototype._sendUserMessage=function(t,r,i){var a=this;r===void 0&&(r=ci.SEND);var s=X.of(this._iid),o=s.dispatcher,l=s.requestQueue,u=i??this._generateRequestId(),d=Date.now(),f=new fa;return Zi(2).then(function(){var m=a._createPendingUserMessage(t,u,d);o.dispatch(new er({messages:[m],source:r===ci.RESEND?fe.LOCAL_MESSAGE_RESEND_STARTED:fe.EVENT_MESSAGE_SENT_PENDING})),it(function(){return A(a,void 0,void 0,function(){return I(this,function(E){return[2,f._trigger(m)]})})});var p=new T4(Y(Y({},t),{channelUrl:a.url,channelType:a.channelType,reqId:u}));l.send(p).then(function(E){var _=E.as(Lb).message;o.dispatch(new er({messages:[_],source:fe.EVENT_MESSAGE_SENT_SUCCESS})),it(function(){return A(a,void 0,void 0,function(){return I(this,function(b){return[2,f._trigger(_)]})})})}).catch(function(E){if(Ai(E))throw E;Zi(2).then(function(){var _=a._createPendingUserMessage(t,u,d),b=X.of(a._iid).cacheContext,C=b.localCacheEnabled&&b.localCacheConfig.enableAutoResend&&Vm(E.code);a._markMessageAsFailed(_,E,C),o.dispatch(new er({messages:[_],source:_.sendingStatus===gn.PENDING?fe.REQUEST_RESEND_MESSAGE:fe.EVENT_MESSAGE_SENT_FAILED})),it(function(){return A(a,void 0,void 0,function(){return I(this,function(y){return[2,f._triggerFailed(E,_)]})})})})})}),f},n.prototype._autoResendUserMessage=function(t){return Oe(t instanceof fi&&!!t.messageParams).throw(ee.invalidParameters),this._sendUserMessage(t.messageParams,ci.SEND,t.reqId)},n.prototype.resendUserMessage=function(t){var r;return A(this,void 0,void 0,function(){var i,a;return I(this,function(s){return Oe(t instanceof fi&&!t.scheduledInfo).throw(ee.invalidParameters),i=new zi,a=(r=t.messageParams)!==null&&r!==void 0?r:gE(t),this._sendUserMessage(a,ci.RESEND,t.reqId).onFailed(function(o){return i.reject(o)}).onSucceeded(function(o){return i.resolve(o)}),[2,i.promise]})})},n.prototype.updateUserMessage=function(t,r){return A(this,void 0,void 0,function(){var i,a,s,o;return I(this,function(l){switch(l.label){case 0:return i=Y(Y({},aR),r),Oe(Z("number",t)&&sR(i)).throw(ee.invalidParameters),a=X.of(this._iid).requestQueue,s=new wM(Y({channelType:this.channelType,channelUrl:this.url,messageId:t,metaArrayParams:i.metaArrays?{array:i.metaArrays,mode:"add",upsert:!0}:void 0},i)),[4,a.send(s)];case 1:return o=l.sent(),[2,o.as(ap).message]}})})},n.prototype.copyUserMessage=function(t,r){var i,a,s;return A(this,void 0,void 0,function(){var o,l;return I(this,function(u){return Oe(t instanceof n&&r instanceof fi&&r.sendingStatus===gn.SUCCEEDED&&this.url===r.channelUrl&&!r.scheduledInfo).throw(ee.invalidParameters),Oe(!r.poll).throw(ee.notSupportedError),o=new zi,l=(i=r.messageParams)!==null&&i!==void 0?i:vt(Y(Y({},r),{mentionType:r.mentionType,mentionedUserIds:(a=r.mentionedUserIds)!==null&&a!==void 0?a:(s=r.mentionedUsers)===null||s===void 0?void 0:s.map(function(d){return d.userId}),translationTargetLanguages:Object.keys(r.translations),pushNotificationDeliveryOption:Os.DEFAULT,parentMessageId:null,isReplyToChannel:!1,isPinnedMessage:!1})),t._sendUserMessage(l).onSucceeded(function(d){o.resolve(d)}).onFailed(function(d){return o.reject(d)}),[2,o.promise]})})},n.prototype.translateUserMessage=function(t,r){return A(this,void 0,void 0,function(){var i,a,s;return I(this,function(o){switch(o.label){case 0:return Oe(t instanceof fi&&t.messageId>0&&Qt("string",r)).throw(ee.invalidParameters),i=X.of(this._iid).requestQueue,a=new w4({channelType:this.channelType,channelUrl:this.url,messageId:t.messageId,translationTargetLanguages:r}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(R4).message]}})})},n.prototype._createScheduledUserMessage=function(t,r){var i=this,a=X.of(this._iid).requestQueue,s=Date.now(),o=this._generateRequestId();Zi(2).then(function(){var u=i._createPendingScheduledUserMessage(t,o,s);it(function(){return A(i,void 0,void 0,function(){return I(this,function(d){return[2,r._trigger(u)]})})})});var l=new O4(Y({reqId:o,channelType:this.channelType,channelUrl:this.url},t));a.send(l).then(function(u){var d=u.as(vR).message;it(function(){return A(i,void 0,void 0,function(){return I(this,function(f){return[2,r._trigger(d)]})})})}).catch(function(u){if(Ai(u))throw u;Zi(2).then(function(){var d=i._createPendingScheduledUserMessage(t,o,s);i._markMessageAsFailed(d,u),it(function(){return A(i,void 0,void 0,function(){return I(this,function(f){return[2,r._triggerFailed(u,d)]})})})})})},n.prototype.sendFileMessage=function(t){var r=Y(Y({},CM),t);return Oe(SM(r)).throw(ee.invalidParameters),this._sendFileMessage(r)},n.prototype.sendMultipleFilesMessage=function(t){var r,i=Y(Y({},e6),t),a=X.of(this._iid);Oe(function(o,l){return l===void 0&&(l=xP),Hp(o)&&Z("string",o.message,!0)&&Array.isArray(o.fileInfoList)&&o.fileInfoList.length>=2&&o.fileInfoList.length<=l&&o.fileInfoList.every(function(u){return t6(u)})}(i,(r=a.appInfo)===null||r===void 0?void 0:r.multipleFilesMessageFileCountLimit)).throw(ee.invalidParameters);var s=!!t.fileInfoList.find(function(o){var l=a.appInfo.uploadSizeLimit;return o.file instanceof Blob&&o.file.size>l||o.fileSize>l});return Oe(!s).throw(ee.fileSizeLimitExceededError),this._sendMultipleFilesMessage(i)},n.prototype._sendFileMessage=function(t,r,i){var a=this;r===void 0&&(r=ci.SEND);var s=X.of(this._iid).dispatcher,o=xr.of(this._iid).fileMessageQueue,l=i??this._generateRequestId(),u=Date.now(),d=new fa;return Zi(2).then(function(){var f=a._createPendingFileMessage(t,l,u);s.dispatch(new er({messages:[f],source:r===ci.RESEND?fe.LOCAL_MESSAGE_RESEND_STARTED:fe.EVENT_MESSAGE_SENT_PENDING})),it(function(){return A(a,void 0,void 0,function(){return I(this,function(m){return[2,d._trigger(f)]})})}),o.request(a,l,t).then(function(m){s.dispatch(new er({messages:[m],source:fe.EVENT_MESSAGE_SENT_SUCCESS})),it(function(){return A(a,void 0,void 0,function(){return I(this,function(p){return[2,d._trigger(m)]})})})}).catch(function(m){if(Ai(m))throw m;Zi(2).then(function(){var p=a._createPendingFileMessage(t,l,u),E=X.of(a._iid).cacheContext,_=E.localCacheEnabled&&E.localCacheConfig.enableAutoResend&&Vm(m.code);a._markMessageAsFailed(p,m,_),s.dispatch(new er({messages:[p],source:p.sendingStatus===gn.PENDING?fe.REQUEST_RESEND_MESSAGE:m.code===lt.FILE_UPLOAD_CANCEL_FAILED?fe.LOCAL_MESSAGE_CANCELED:fe.EVENT_MESSAGE_SENT_FAILED})),it(function(){return A(a,void 0,void 0,function(){return I(this,function(b){return[2,d._triggerFailed(m,p)]})})})})})}),d},n.prototype._autoResendFileMessage=function(t){Oe(t instanceof Mr&&!!t.messageParams).throw(ee.invalidParameters);var r=X.of(this._iid).logger;return r.debug("autoResendFileMessage pending",t),this._sendFileMessage(t.messageParams,ci.SEND,t.reqId).onFailed(function(i){r.debug("autoResendFileMessage failed",i)}).onSucceeded(function(i){r.debug("autoResendFileMessage success",i)})},n.prototype._sendMultipleFilesMessage=function(t,r,i){var a=this,s=X.of(this._iid).dispatcher,o=xr.of(this._iid).fileMessageQueue,l=i??this._generateRequestId(),u=Date.now(),d=new Rm;return Zi(2).then(function(){var f=a._createPendingMultipleFilesMessage(t,l,u);s.dispatch(new er({messages:[f],source:r===ci.RESEND?fe.LOCAL_MESSAGE_RESEND_STARTED:fe.EVENT_MESSAGE_SENT_PENDING})),it(function(){return A(a,void 0,void 0,function(){return I(this,function(m){return[2,d._trigger(f)]})})}),o.request(a,l,t,{requestHandler:d,isCopy:r===ci.COPY}).then(function(m){s.dispatch(new er({messages:[m],source:fe.EVENT_MESSAGE_SENT_SUCCESS})),it(function(){return A(a,void 0,void 0,function(){return I(this,function(p){return[2,d._trigger(m)]})})})}).catch(function(m){if(Ai(m))throw m;Zi(2).then(function(){var p=a._createPendingMultipleFilesMessage(t,l,u);a._markMessageAsFailed(p,m),s.dispatch(new er({messages:[p],source:fe.EVENT_MESSAGE_SENT_FAILED})),it(function(){return A(a,void 0,void 0,function(){return I(this,function(E){return[2,d._triggerFailed(m,p)]})})})})})}),d},n.prototype._createScheduledFileMessage=function(t,r,i,a){var s=this,o=X.of(this._iid).requestQueue,l=new L4(Y(Y({reqId:i,channelType:this.channelType,channelUrl:this.url},t),{fileUrl:t.fileUrl,requireAuth:t.requireAuth}));o.send(l).then(function(u){var d=u.as(U4).message;it(function(){return A(s,void 0,void 0,function(){return I(this,function(f){return[2,r._trigger(d)]})})})}).catch(function(u){if(Ai(u))throw u;Zi(2).then(function(){var d=s._createPendingScheduledFileMessage(t,i,a);s._markMessageAsFailed(d,u),it(function(){return A(s,void 0,void 0,function(){return I(this,function(f){return[2,r._triggerFailed(u,d)]})})})})})},n.prototype.sendFileMessages=function(t){var r,i;Oe(t.every(function(u){return SM(Y(Y({},CM),u))})).throw(ee.invalidParameters);var a=new fa;try{for(var s=Ge(t),o=s.next();!o.done;o=s.next()){var l=o.value;this.sendFileMessage(l).onPending(function(u){return a._trigger(u)}).onFailed(function(u,d){return a._triggerFailed(u,d)}).onSucceeded(function(u){return a._trigger(u)})}}catch(u){r={error:u}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return a},n.prototype.resendFileMessage=function(t,r){return A(this,void 0,void 0,function(){var i,a,s;return I(this,function(o){return i=this._validateFailedFileMessageHasFile(t,r),Oe(t instanceof Mr&&i&&!t.scheduledInfo).throw(ee.invalidParameters),a=new zi,s=_E(t,r),this._sendFileMessage(s,ci.RESEND,t.reqId).onFailed(function(l){return a.reject(l)}).onSucceeded(function(l){return a.resolve(l)}),[2,a.promise]})})},n.prototype.resendMessage=function(t,r){var i,a;if(Oe(t instanceof fr&&!t.scheduledInfo&&t.isResendable).throw(ee.invalidParameters),t.isUserMessage()){var s=(i=t.messageParams)!==null&&i!==void 0?i:gE(t);return this._sendUserMessage(s,ci.RESEND,t.reqId)}if(t.isFileMessage()){var o=this._validateFailedFileMessageHasFile(t,r);return Oe(o).throw(ee.invalidParameters),s=(a=t.messageParams)!==null&&a!==void 0?a:_E(t,r),this._sendFileMessage(s,ci.RESEND,t.reqId)}if(t.isMultipleFilesMessage())throw ee.channelTypeNotSupportedError},n.prototype.updateFileMessage=function(t,r){return A(this,void 0,void 0,function(){var i,a,s,o;return I(this,function(l){switch(l.label){case 0:return i=Y(Y({},Vx),r),Oe(Z("number",t)&&function(u){return wb(u)}(i)).throw(ee.invalidParameters),a=X.of(this._iid).requestQueue,s=new RM(Y({channelType:this.channelType,channelUrl:this.url,messageId:t,metaArrayParams:i.metaArrays?{array:i.metaArrays,mode:"add",upsert:!0}:void 0},i)),[4,a.send(s)];case 1:return o=l.sent(),[2,o.as(sp).message]}})})},n.prototype.uploadFile=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u;return I(this,function(d){switch(d.label){case 0:return r=X.of(this._iid).requestQueue,i=Ho(),(a=new np({file:t.file,channelUrl:this.url,thumbnailSizes:t.thumbnailSizes,requestId:i})).uploadProgressHandler=t.progressHandler,t.uploadStartedHandler&&t.uploadStartedHandler(i),[4,r.send(a)];case 1:return s=d.sent(),o=s.as(rp),l=o.url,u=o.thumbnails,[2,{requestId:i,url:l,thumbnails:u}]}})})},n.prototype.cancelUploadingFileMessage=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){return Oe(Z("string",t)).throw(ee.invalidParameters),xr.of(this._iid).fileMessageQueue.cancel(this,t),[2,!0]})})},n.prototype.copyFileMessage=function(t,r){var i,a,s;return A(this,void 0,void 0,function(){var o,l;return I(this,function(u){return Oe(t instanceof n&&r instanceof Mr&&r.sendingStatus===gn.SUCCEEDED&&this.url===r.channelUrl&&!r.scheduledInfo).throw(ee.invalidParameters),o=new zi,l=vt(Y(Y({},r),{fileUrl:r.url,fileName:r.name,fileSize:r.size,mimeType:r.type,mentionType:r.mentionType,mentionedUserIds:(i=r.mentionedUserIds)!==null&&i!==void 0?i:(a=r.mentionedUsers)===null||a===void 0?void 0:a.map(function(d){return d.userId}),pushNotificationDeliveryOption:Os.DEFAULT,parentMessageId:null,isReplyToChannel:!1,thumbnailSizes:(s=r.thumbnails)===null||s===void 0?void 0:s.map(function(d){return{maxWidth:d.width,maxHeight:d.height}}),requireAuth:r.requireAuth,isPinnedMessage:!1})),t._sendFileMessage(l).onSucceeded(function(d){return o.resolve(d)}).onFailed(function(d){return o.reject(d)}),[2,o.promise]})})},n.prototype.copyMessage=function(t,r){Oe(t instanceof n&&r instanceof fr&&r.sendingStatus===gn.SUCCEEDED&&this.url===r.channelUrl&&!r.scheduledInfo).throw(ee.invalidParameters);var i=r,a=t;if(i.isUserMessage()){Oe(!i.poll).throw(ee.notSupportedError);var s=nR(i);return a._sendUserMessage(s)}if(i.isFileMessage())return s=iR(i),a._sendFileMessage(s);if(r.isMultipleFilesMessage())throw ee.channelTypeNotSupportedError},n.prototype.deleteMessage=function(t){return A(this,void 0,void 0,function(){var r,i;return I(this,function(a){switch(a.label){case 0:return Oe(t instanceof Mi).throw(ee.invalidParameters),t.messageId>0?(r=X.of(this._iid).requestQueue,i=new r2({channelType:this.channelType,channelUrl:this.url,messageId:t.messageId,messageToken:t instanceof fr?t._messageToken:void 0}),[4,r.send(i)]):[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},n.prototype.addReaction=function(t,r){return A(this,void 0,void 0,function(){var i,a,s;return I(this,function(o){switch(o.label){case 0:return Oe(t instanceof Mi&&t.messageId>0&&Z("string",r)).throw(ee.invalidParameters),i=X.of(this._iid).requestQueue,a=new M4({channelType:this.channelType,channelUrl:this.url,messageId:t.messageId,reactionKey:r}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(N4).reactionEvent]}})})},n.prototype.deleteReaction=function(t,r){return A(this,void 0,void 0,function(){var i,a,s;return I(this,function(o){switch(o.label){case 0:return Oe(t instanceof Mi&&t.messageId>0&&Z("string",r)).throw(ee.invalidParameters),i=X.of(this._iid).requestQueue,a=new I4({channelType:this.channelType,channelUrl:this.url,messageId:t.messageId,reactionKey:r}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(A4).reactionEvent]}})})},n.prototype._updateUserMessageMetaArray=function(t,r,i,a){return A(this,void 0,void 0,function(){var s,o,l,u,d,f;return I(this,function(m){switch(m.label){case 0:return s=X.of(this._iid),o=s.dispatcher,l=s.requestQueue,u=new wM({channelType:this.channelType,channelUrl:this.url,messageId:t,metaArrayParams:{array:r,mode:i,upsert:a}}),[4,l.send(u)];case 1:return d=m.sent(),f=d.as(ap).message,o.dispatch(new er({messages:[f],source:fe.EVENT_MESSAGE_UPDATED})),[2,f]}})})},n.prototype._updateFileMessageMetaArray=function(t,r,i,a){return A(this,void 0,void 0,function(){var s,o,l,u,d,f;return I(this,function(m){switch(m.label){case 0:return s=X.of(this._iid),o=s.dispatcher,l=s.requestQueue,u=new RM({channelType:this.channelType,channelUrl:this.url,messageId:t,metaArrayParams:{array:r,mode:i,upsert:a}}),[4,l.send(u)];case 1:return d=m.sent(),f=d.as(sp).message,o.dispatch(new er({messages:[f],source:fe.EVENT_MESSAGE_UPDATED})),[2,f]}})})},n.prototype.createMessageMetaArrayKeys=function(t,r){return A(this,void 0,void 0,function(){var i;return I(this,function(a){return Oe(t instanceof Mi&&t.messageId>0&&Qt("string",r)).throw(ee.invalidParameters),i=r.map(function(s){return new $r({key:s})}),t instanceof Mr?[2,this._updateFileMessageMetaArray(t.messageId,i,"add",!0)]:[2,this._updateUserMessageMetaArray(t.messageId,i,"add",!0)]})})},n.prototype.deleteMessageMetaArrayKeys=function(t,r){return A(this,void 0,void 0,function(){var i;return I(this,function(a){return Oe(t instanceof Mi&&t.messageId>0&&Qt("string",r)).throw(ee.invalidParameters),i=r.map(function(s){return new $r({key:s})}),t instanceof Mr?[2,this._updateFileMessageMetaArray(t.messageId,i,"remove",!0)]:[2,this._updateUserMessageMetaArray(t.messageId,i,"remove",!0)]})})},n.prototype.addMessageMetaArrayValues=function(t,r){return A(this,void 0,void 0,function(){return I(this,function(i){return Oe(t instanceof Mi&&t.messageId>0&&r.every(function(a){return a instanceof $r})).throw(ee.invalidParameters),t instanceof Mr?[2,this._updateFileMessageMetaArray(t.messageId,r,"add",!0)]:[2,this._updateUserMessageMetaArray(t.messageId,r,"add",!0)]})})},n.prototype.removeMessageMetaArrayValues=function(t,r){return A(this,void 0,void 0,function(){return I(this,function(i){return Oe(t instanceof Mi&&t.messageId>0&&r.every(function(a){return a instanceof $r})).throw(ee.invalidParameters),t instanceof Mr?[2,this._updateFileMessageMetaArray(t.messageId,r,"remove",!0)]:[2,this._updateUserMessageMetaArray(t.messageId,r,"remove",!0)]})})},n.prototype.report=function(t,r){return A(this,void 0,void 0,function(){var i,a,s,o;return I(this,function(l){switch(l.label){case 0:return Oe((Wt(of,t)||t instanceof ud)&&Z("string",r)).throw(ee.invalidParameters),i=X.of(this._iid),a=i.sdkState,s=i.requestQueue,o=new b4({channelUrl:this.url,channelType:this.channelType,userId:a.userId,category:t,description:r}),[4,s.send(o)];case 1:return l.sent(),[2]}})})},n.prototype.reportUser=function(t,r,i){return A(this,void 0,void 0,function(){var a,s,o,l;return I(this,function(u){switch(u.label){case 0:return Oe(t instanceof Yt&&(Wt(of,r)||r instanceof ud)&&Z("string",i)).throw(ee.invalidParameters),a=X.of(this._iid),s=a.sdkState,o=a.requestQueue,l=new C4({channelUrl:this.url,channelType:this.channelType,userId:s.userId,offendingUserId:t.userId,category:r,description:i}),[4,o.send(l)];case 1:return u.sent(),[2]}})})},n.prototype.reportMessage=function(t,r,i){return A(this,void 0,void 0,function(){var a,s,o,l;return I(this,function(u){switch(u.label){case 0:return Oe(t instanceof fr&&(Wt(of,r)||r instanceof ud)&&Z("string",i)).throw(ee.invalidParameters),a=X.of(this._iid),s=a.sdkState,o=a.requestQueue,l=new S4({channelUrl:this.url,channelType:this.channelType,userId:s.userId,offendingUserId:t.sender.userId,messageId:t.messageId,category:r,description:i,messageToken:t._messageToken}),[4,o.send(l)];case 1:return u.sent(),[2]}})})},n.prototype.updatePoll=function(t,r){return A(this,void 0,void 0,function(){var i,a,s;return I(this,function(o){switch(o.label){case 0:return Oe(Z("number",t)&&function(l){return Z("string",l.title,!0)&&j2(l.data)&&Z("boolean",l.allowUserSuggestion,!0)&&Z("boolean",l.allowMultipleVotes,!0)&&Z("number",l.closeAt,!0)}(r)).throw(ee.invalidParameters),i=X.of(this._iid).requestQueue,a=new D4(Y({pollId:t},r)),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(k4).poll]}})})},n.prototype.deletePoll=function(t){return A(this,void 0,void 0,function(){var r,i,a;return I(this,function(s){switch(s.label){case 0:return r=Z("number",t),Oe(r).throw(ee.invalidParameters),i=X.of(this._iid).requestQueue,a=new P4({pollId:t}),[4,i.send(a)];case 1:return s.sent(),[2]}})})},n.prototype.closePoll=function(t){return A(this,void 0,void 0,function(){var r,i,a,s;return I(this,function(o){switch(o.label){case 0:return r=Z("number",t),Oe(r).throw(ee.invalidParameters),i=X.of(this._iid).requestQueue,a=new x4({pollId:t}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(F4).poll]}})})},n.prototype.addPollOption=function(t,r){return A(this,void 0,void 0,function(){var i,a,s,o;return I(this,function(l){switch(l.label){case 0:return i=Z("number",t)&&Z("string",r)&&r.trim()!=="",Oe(i).throw(ee.invalidParameters),a=X.of(this._iid).requestQueue,s=new B4({channelUrl:this.url,channelType:this.channelType,pollId:t,optionText:r}),[4,a.send(s)];case 1:return o=l.sent(),[2,o.as(H4).poll]}})})},n.prototype.updatePollOption=function(t,r,i){return A(this,void 0,void 0,function(){var a,s,o,l;return I(this,function(u){switch(u.label){case 0:return a=Z("number",t)&&Z("number",r)&&Z("string",i)&&i.trim()!=="",Oe(a).throw(ee.invalidParameters),s=X.of(this._iid).requestQueue,o=new G4({pollId:t,pollOptionId:r,optionText:i}),[4,s.send(o)];case 1:return l=u.sent(),[2,l.as(z4).poll]}})})},n.prototype.deletePollOption=function(t,r){return A(this,void 0,void 0,function(){var i,a,s;return I(this,function(o){switch(o.label){case 0:return i=Z("number",t)&&Z("number",r),Oe(i).throw(ee.invalidParameters),a=X.of(this._iid).requestQueue,s=new j4({pollId:t,pollOptionId:r}),[4,a.send(s)];case 1:return o.sent(),[2]}})})},n.prototype.votePoll=function(t,r){return A(this,void 0,void 0,function(){var i,a,s,o,l,u,d;return I(this,function(f){switch(f.label){case 0:return i=Z("number",t)&&Qt("number",r),Oe(i).throw(ee.invalidParameters),a=X.of(this._iid),s=a.requestQueue,o=a.dispatcher,l=new V4({reqId:this._generateRequestId(),channelUrl:this.url,channelType:this.channelType,pollId:t,pollOptionIds:r}),[4,s.send(l)];case 1:return u=f.sent(),d=u.as(Ub).event,o.dispatch(new xp({event:d,source:fe.EVENT_POLL_VOTED})),[2,d]}})})},n.prototype.getPollChangeLogsSinceTimestamp=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){switch(r.label){case 0:return Oe(Z("number",t)).throw(ee.invalidParameters),[4,tp.of(this._iid).getPollChangeLogs(this.url,this.channelType,t)];case 1:return[2,r.sent()]}})})},n.prototype.getPollChangeLogsSinceToken=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){switch(r.label){case 0:return Oe(Z("string",t,!0)),[4,tp.of(this._iid).getPollChangeLogs(this.url,this.channelType,t)];case 1:return[2,r.sent()]}})})},n.prototype.createPollListQuery=function(t){return t===void 0&&(t=10),new K2(this._iid,{channelUrl:this.url,channelType:this.channelType,limit:t})},n.prototype.createPollVoterListQuery=function(t,r,i){return i===void 0&&(i=20),new W2(this._iid,{channelUrl:this.url,channelType:this.channelType,pollId:t,pollOptionId:r,limit:i})},n.prototype.pinMessage=function(t){return A(this,void 0,void 0,function(){var r,i;return I(this,function(a){switch(a.label){case 0:return Oe(Z("number",t)&&t>0).throw(ee.invalidParameters),r=X.of(this._iid).requestQueue,i=new s6({channelType:this.channelType,channelUrl:this.url,messageId:t}),[4,r.send(i)];case 1:return a.sent(),[2]}})})},n.prototype.unpinMessage=function(t){return A(this,void 0,void 0,function(){var r,i;return I(this,function(a){switch(a.label){case 0:return Oe(Z("number",t)&&t>0).throw(ee.invalidParameters),r=X.of(this._iid).requestQueue,i=new o6({channelType:this.channelType,channelUrl:this.url,messageId:t}),[4,r.send(i)];case 1:return a.sent(),[2]}})})},n}(Rr),yR=function(e){function n(t){t===void 0&&(t={});var r=e.call(this)||this;return Object.keys(t).forEach(function(i){r.hasOwnProperty(i)&&(r[i]=t[i])}),r}return z(n,e),n}(function(){this.onConnected=Bt,this.onReconnectStarted=Bt,this.onReconnectSucceeded=Bt,this.onReconnectFailed=Bt,this.onDisconnected=Bt}),OM=function(e){function n(t){t===void 0&&(t={});var r=e.call(this)||this;return Object.keys(t).forEach(function(i){r.hasOwnProperty(i)&&(r[i]=t[i])}),r}return z(n,e),n}(function(){this.onSessionExpired=Bt,this.onSessionTokenRequired=function(e){return e(null)},this.onSessionError=Bt,this.onSessionRefreshed=Bt,this.onSessionClosed=Bt}),u6=function(e){function n(t){t===void 0&&(t={});var r=e.call(this)||this;return Object.keys(t).forEach(function(i){r.hasOwnProperty(i)&&(r[i]=t[i])}),r}return z(n,e),n}(function(){this.onFriendsDiscovered=Bt,this.onTotalUnreadMessageCountChanged=Bt,this.onTotalUnreadMessageCountUpdated=Bt}),c6=function(e){function n(t){var r=t.limit,i=t.token,a=t.userIdsFilter,s=t.metaDataKeyFilter,o=t.metaDataValuesFilter,l=t.nicknameStartsWithFilter,u=e.call(this)||this;return u.method=Ie.GET,u.path=Tn,u.params=Qe({limit:r,token:i,user_ids:a,metadatakey:s,metadatavalues_in:o,nickname_startswith:l}),u}return z(n,e),n}(we),d6=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.users=r.users.map(function(a){return new Yt(t,a)}),i.next=r.next,i}return z(n,e),n}(Pe),h6=function(e){function n(t,r){var i,a,s,o=this;return(o=e.call(this,t,r)||this).userIdsFilter=null,o.metaDataKeyFilter=null,o.metaDataValuesFilter=null,o.nicknameStartsWithFilter=null,o.userIdsFilter=(i=r.userIdsFilter)!==null&&i!==void 0?i:null,o.metaDataKeyFilter=(a=r.metaDataKeyFilter)!==null&&a!==void 0?a:null,o.metaDataValuesFilter=(s=r.metaDataValuesFilter)!==null&&s!==void 0?s:null,o.nicknameStartsWithFilter=r.nicknameStartsWithFilter||null,o}return z(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&Qt("string",this.userIdsFilter,!0)&&Z("string",this.metaDataKeyFilter,!0)&&Qt("string",this.metaDataValuesFilter,!0)&&Z("string",this.nicknameStartsWithFilter,!0)},n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return I(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=X.of(this._iid).requestQueue,r=new c6(vt(Y(Y({},this),{token:this._token}))),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),a=i.as(d6),s=a.users,o=a.next,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw ee.queryInProgress;case 4:return[3,6];case 5:throw ee.invalidParameters;case 6:return[2]}})})},n}(qo),f6=function(e){function n(t){var r=t.userId,i=t.limit,a=t.token,s=t.userIdsFilter,o=e.call(this)||this;return o.method=Ie.GET,o.path="".concat(Tn,"/").concat(r,"/block"),o.params=Qe({limit:i,token:a,user_ids:s}),o}return z(n,e),n}(we),v6=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.users=r.users.map(function(a){return new Yt(t,a)}),i.next=r.next,i}return z(n,e),n}(Pe),m6=function(e){function n(t,r){var i,a=this;return(a=e.call(this,t,r)||this).userIdsFilter=null,a.userIdsFilter=(i=r.userIdsFilter)!==null&&i!==void 0?i:null,a}return z(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&Qt("string",this.userIdsFilter,!0)},n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u;return I(this,function(d){switch(d.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=X.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new f6(vt(Y(Y({},this),{userId:r.userId,token:this._token}))),[4,i.send(a)]):[3,2]:[3,5];case 1:return s=d.sent(),o=s.as(v6),l=o.users,u=o.next,this._token=u,this._hasNext=!!u,this._isLoading=!1,[2,l];case 2:return[2,[]];case 3:throw ee.queryInProgress;case 4:return[3,6];case 5:throw ee.invalidParameters;case 6:return[2]}})})},n}(qo),p6=function(e){function n(t){var r=t.userId,i=t.limit,a=t.token,s=e.call(this)||this;return s.method=Ie.GET,s.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/friends"),s.params={limit:i,token:a},s}return z(n,e),n}(we),g6=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.hasMore=r.has_more,i.users=r.users.map(function(a){return new Yt(t,a)}),i.next=r.next,i}return z(n,e),n}(Pe),_6=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return z(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)},n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,d;return I(this,function(f){switch(f.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=X.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new p6(Y(Y({},this),{userId:r.userId,token:this._token})),[4,i.send(a)]):[3,2]:[3,5];case 1:return s=f.sent(),o=s.as(g6),l=o.users,u=o.hasMore,d=o.next,this._token=d,this._hasNext=u,this._isLoading=!1,[2,l];case 2:return[2,[]];case 3:throw ee.queryInProgress;case 4:return[3,6];case 5:throw ee.invalidParameters;case 6:return[2]}})})},n}(qo),nm={},Pf=function(){function e(n){var t=n.dbname,r=n.itemSizeLimit,i=r===void 0?1048576:r,a=n.cacheLimit,s=a===void 0?256:a,o=n.blockHashBase,l=o===void 0?2:o,u=n.blockHashMultiplier,d=u===void 0?10:u,f=n.blockHashConstant,m=f===void 0?11:f,p=n.transactionApplyDelay,E=p===void 0?200:p,_=n.disableLogger,b=_!==void 0&&_;return nm[t]||(this.itemSizeLimit=i,this.cacheLimit=s,this.blockHashBase=l,this.blockHashMultiplier=d,this.blockHashConstant=m,this.transactionApplyDelay=E,this.disableLogger=b,nm[t]=this),nm[t]}return e.get=function(n){return nm[n]},e}();(function(e){e[e.UNKNOWN_ERROR=6e7]="UNKNOWN_ERROR",e[e.STORE_NOT_DEFINED=61001e3]="STORE_NOT_DEFINED",e[e.STORE_NOT_AVAILABLE=61001001]="STORE_NOT_AVAILABLE",e[e.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING=61001002]="STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING",e[e.STORE_IS_FULL=61001003]="STORE_IS_FULL",e[e.STORE_NOT_INITIALIZED=61001004]="STORE_NOT_INITIALIZED",e[e.STORE_INVALID_KEY_TYPE=61002e3]="STORE_INVALID_KEY_TYPE",e[e.STORE_BROKEN_INTEGRITY=61002001]="STORE_BROKEN_INTEGRITY",e[e.STORE_BROKEN_BLOB=61002002]="STORE_BROKEN_BLOB",e[e.STORE_ENCRYPTION_INVALID=61002003]="STORE_ENCRYPTION_INVALID",e[e.STORE_ITEM_SIZE_LIMIT_EXCEEDED=61017e3]="STORE_ITEM_SIZE_LIMIT_EXCEEDED",e[e.STORE_READ_FAILED=61017001]="STORE_READ_FAILED",e[e.STORE_WRITE_FAILED=61017002]="STORE_WRITE_FAILED",e[e.DATABASE_SCHEMA_NOT_ON_UPGRADE=62002e3]="DATABASE_SCHEMA_NOT_ON_UPGRADE",e[e.COLLECTION_NOT_READY=63001e3]="COLLECTION_NOT_READY",e[e.COLLECTION_KEY_NOT_MATCH=63002e3]="COLLECTION_KEY_NOT_MATCH",e[e.COLLECTION_QUERY_NOT_VALID=63002001]="COLLECTION_QUERY_NOT_VALID",e[e.COLLECTION_KEY_NOT_FOUND=63004e3]="COLLECTION_KEY_NOT_FOUND",e[e.COLLECTION_KEY_NOT_GIVEN=63004001]="COLLECTION_KEY_NOT_GIVEN",e[e.COLLECTION_INSERT_DUPLICATE=63009e3]="COLLECTION_INSERT_DUPLICATE",e[e.COLLECTION_WRITE_FAILED=63017e3]="COLLECTION_WRITE_FAILED",e[e.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED=63017001]="COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED",e[e.INDEX_TABLE_IS_REQUIRED=65001e3]="INDEX_TABLE_IS_REQUIRED",e[e.INDEX_TYPE_NOT_MATCH=65002e3]="INDEX_TYPE_NOT_MATCH",e[e.COMPARE_TYPE_NOT_MATCH=69002001]="COMPARE_TYPE_NOT_MATCH",e[e.CIRCULAR_REFERENCE_FOUND=69002002]="CIRCULAR_REFERENCE_FOUND"})(ir||(ir={}));var ju,Un=function(e){function n(t){var r=t.code,i=r===void 0?ir.UNKNOWN_ERROR:r,a=t.message,s=a===void 0?"Unknown error occurred.":a,o=e.call(this,s)||this;return o.code=i,Object.setPrototypeOf(o,n.prototype),o}return z(n,e),Object.defineProperty(n,"storeNotDefined",{get:function(){return new n({code:ir.STORE_NOT_DEFINED,message:"Store is not defined. Specify the store on NestDB()"})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeNotAvailable",{get:function(){return new n({code:ir.STORE_NOT_AVAILABLE,message:"Store is not available. Check your environment settings."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeNotAvailableInPrivateBrowsing",{get:function(){return new n({code:ir.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING,message:"Store is not available because it is in private browsing."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeIsFull",{get:function(){return new n({code:ir.STORE_IS_FULL,message:"Store is full."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeNotInitialized",{get:function(){return new n({code:ir.STORE_NOT_INITIALIZED,message:"Store is not initialized."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeKeyTypeIsInvalid",{get:function(){return new n({code:ir.STORE_INVALID_KEY_TYPE,message:"Store key should be string type."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeBrokenIntegrity",{get:function(){return new n({code:ir.STORE_BROKEN_INTEGRITY,message:"Data should be in a store but it does not. Integrity is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeBrokenBlob",{get:function(){return new n({code:ir.STORE_BROKEN_BLOB,message:"Data should be in a store but it does not. Blob data is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeEncryptionInvalid",{get:function(){return new n({code:ir.STORE_ENCRYPTION_INVALID,message:"Encryption algorithm has changed. All the store should reset."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeItemSizeExceeded",{get:function(){return new n({code:ir.STORE_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that the store allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeReadFailed",{get:function(){return new n({code:ir.STORE_READ_FAILED,message:"Failed to read from store."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeWriteFailed",{get:function(){return new n({code:ir.STORE_WRITE_FAILED,message:"Failed to write to store."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"databaseSchemaNotOnUpgrade",{get:function(){return new n({code:ir.DATABASE_SCHEMA_NOT_ON_UPGRADE,message:"Committing schema is not allowed when upgrade is not running."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionNotReady",{get:function(){return new n({code:ir.COLLECTION_NOT_READY,message:"Collection is not ready due to an error during initialization."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionKeyNotMatch",{get:function(){return new n({code:ir.COLLECTION_KEY_NOT_MATCH,message:"keyName of collection could not change."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionQueryNotValid",{get:function(){return new n({code:ir.COLLECTION_QUERY_NOT_VALID,message:"Query parameter is not a valid format."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionInsertDuplicate",{get:function(){return new n({code:ir.COLLECTION_INSERT_DUPLICATE,message:"The key already exists."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionKeyNotFound",{get:function(){return new n({code:ir.COLLECTION_KEY_NOT_FOUND,message:"The key is not found."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionKeyNotGiven",{get:function(){return new n({code:ir.COLLECTION_KEY_NOT_GIVEN,message:"The item should contain [keyName] property."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionWriteFailed",{get:function(){return new n({code:ir.COLLECTION_WRITE_FAILED,message:"Failed to write an item."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionItemSizeExceeded",{get:function(){return new n({code:ir.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that a collection allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"indexTableIsRequired",{get:function(){return new n({code:ir.INDEX_TABLE_IS_REQUIRED,message:"Index table is required."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"indexTypesNotMatch",{get:function(){return new n({code:ir.INDEX_TYPE_NOT_MATCH,message:"Indexed column should have primitive type."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"compareTypesNotMatch",{get:function(){return new n({code:ir.COMPARE_TYPE_NOT_MATCH,message:"Values to compare have different types."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"circularReferenceFound",{get:function(){return new n({code:ir.CIRCULAR_REFERENCE_FOUND,message:"Cannot handle circular referenced object."})},enumerable:!1,configurable:!0}),n}(Error);(function(e){e.INIT="init",e.READY="ready",e.CLOSED="closed"})(ju||(ju={}));var LM,Ji=function(e,n){if(n===void 0&&(n=new WeakMap),typeof e=="object"&&e!==null){if(n.has(e))throw Un.circularReferenceFound;var t;return n.set(e,!0),Array.isArray(e)?t=e.map(function(r){return Ji(r,n)}):e instanceof RegExp||e instanceof Date?t=e:(t={},Object.keys(e).forEach(function(r){t[r]=Ji(e[r],n)})),n.delete(e),t}return e},Do=function(e,n){if(n==null)return 1;if(e==null)return-1;if(typeof e!=typeof n)throw Un.compareTypesNotMatch;var t=0;switch(typeof e){case"boolean":case"number":t=e-n;break;case"string":t=e.localeCompare(n)}return t},UM=function(e,n){for(var t=0,r=0;r<e.length;r++)t=e.charCodeAt(r)+(t<<6)+(t<<16)-t;return(t>>>0)%n},rm=function(e){return new Promise(function(n){setTimeout(function(){return n()},e)})},Ku=function(e,n){if(!n)return!1;if(typeof e!="function"){for(var t in e)if(["/and","&&"].includes(t)){if(e[t].some(function(l){return!Ku(l,n)}))return!1}else if(["/or","||"].includes(t)){if(e[t].every(function(l){return!Ku(l,n)}))return!1}else if(t==="/where"){if(!(0,e[t])(n))return!1}else{var r=t;if(typeof e[r]=="object"){var i=e[r];for(var a in i)switch(a){case"/eq":case"=":if((s=n[r])!==(o=i[a]))return!1;break;case"/neq":case"!=":if((s=n[r])===(o=i[a]))return!1;break;case"/gt":case">":var s=n[r],o=i[a];if(!(Do(s,o)>0))return!1;break;case"/gte":case">=":if(s=n[r],o=i[a],!(Do(s,o)>=0))return!1;break;case"/lt":case"<":if(s=n[r],o=i[a],!(Do(s,o)<0))return!1;break;case"/lte":case"<=":if(s=n[r],o=i[a],!(Do(s,o)<=0))return!1;break;case"/in":if(s=n[r],!(o=i[a]).includes(s))return!1;break;case"/nin":if(s=n[r],(o=i[a]).includes(s))return!1;break;case"/contain":if(s=n[r],o=i[a],!s.includes(o))return!1;break;case"/regex":if(s=n[r],!(o=i[a]).test(s))return!1;break;case"/where":if(s=n[r],!(0,i[a])(s))return!1}}else if(typeof e[r]=="function"){if(!e[r](n[r]))return!1}else if(e[r]!==n[r])return!1}return!0}return e(n)},Gh=function(){},DM=function(){return Promise.resolve()},E6=function(e){return e},kM=function(e,n){n()};(function(e){e[e.FORWARD=0]="FORWARD",e[e.BACKWARD=1]="BACKWARD"})(LM||(LM={}));var Wu,Ni,Vs,y6=function(){function e(n){var t=n.initialPrevValue,r=t===void 0?null:t,i=n.initialNextValue,a=i===void 0?null:i,s=n.iterator,o=n.map,l=o===void 0?E6:o,u=n.backward,d=u===void 0?DM:u,f=n.forward,m=f===void 0?DM:f,p=n.complete,E=p===void 0?Gh:p;this._prevValue=r,this._nextValue=a,this._error=null,this._map=l,this._backward=d,this._forward=m,this._iterator=s,this._complete=E}return Object.defineProperty(e.prototype,"prevValue",{get:function(){return this._map(this._prevValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextValue",{get:function(){return this._map(this._nextValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPrevious",{get:function(){return!!this._prevValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNext",{get:function(){return!!this._nextValue},enumerable:!1,configurable:!0}),e.prototype.prev=function(){return A(this,void 0,void 0,function(){var n,t,r;return I(this,function(i){switch(i.label){case 0:if(!this.hasPrevious)return[3,6];i.label=1;case 1:return i.trys.push([1,3,,4]),n=this._prevValue,t=this,[4,this._backward()];case 2:return t._prevValue=i.sent()||null,this._nextValue=n,[3,4];case 3:return r=i.sent(),this._error=r,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,i.sent()];case 6:this._complete(),i.label=7;case 7:return[2]}})})},e.prototype.next=function(){return A(this,void 0,void 0,function(){var n,t,r;return I(this,function(i){switch(i.label){case 0:if(!this.hasNext)return[3,6];i.label=1;case 1:return i.trys.push([1,3,,4]),n=this._nextValue,t=this,[4,this._forward()];case 2:return t._nextValue=i.sent()||null,this._prevValue=n,[3,4];case 3:return r=i.sent(),this._error=r,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,i.sent()];case 6:this._complete(),i.label=7;case 7:return[2]}})})},e.prototype.stop=function(){this._prevValue=null,this._nextValue=null,this._complete()},e}(),EE=function(){function e(n){var t=n.condition,r=t===void 0?{}:t,i=n.backward,a=i!==void 0&&i,s=n.blockManager,o=n.indexer;this.condition=r,this.backward=a,this._blockManager=s,this._indexer=o}return e.prototype.findOptimizedStartPosition=function(){var n=this,t=["=","/eq",">",">=","/gt","/gte"],r=["=","/eq","<","<=","/lt","/lte"];if(this.backward){var i=this._indexer.origin.length-1;if(typeof this.condition!="function")for(p=0;p<this._indexer.fields.length;p++){var a=this._indexer.fields[p],s=1;if(a[0]==="-"&&(a=a.slice(1),s=-1),this.condition[a]){if(typeof this.condition[a]=="object"){var o=s>0?r:t;for(var l in this.condition[a])if(o.includes(l)){for(var u=i;u>=0;u--)if(s*Do(this._indexer.origin[u].columnValues[p],this.condition[a][l])<=0){i=u;break}}}else for(u=i;u>=0;u--)if(s*Do(this._indexer.origin[u].columnValues[p],this.condition[a])<=0){i=u;break}}}return Math.min(i+1,this._indexer.origin.length-1)}var d=0;if(typeof this.condition!="function")for(var f=function(E){var _=m._indexer.fields[E],b=1;if(_[0]==="-"&&(_=_.slice(1),b=-1),m.condition[_]){if(typeof m.condition[_]=="object")Object.keys(m.condition[_]).forEach(function(y){if((b>0?t:r).includes(y)){for(var T=d;T<n._indexer.origin.length;T++)if(b*Do(n._indexer.origin[T].columnValues[E],n.condition[_][y])>=0){d=T;break}}});else for(var C=d;C<m._indexer.origin.length;C++)if(b*Do(m._indexer.origin[C].columnValues[E],m.condition[_])>=0){d=C;break}}},m=this,p=0;p<this._indexer.fields.length;p++)f(p);return Math.max(d-1,0)},e.prototype.each=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u=this;return I(this,function(d){switch(d.label){case 0:if(t=this.findOptimizedStartPosition(),r=0,this.backward&&this._indexer.origin[t]&&(r=this._indexer.origin[t].keys.length-1),i=function(){if(u._indexer.origin[t]){if(!u._indexer.origin[t].keys[++r]){if(!u._indexer.origin[++t])return!1;r=0}return!0}return!1},a=function(){if(u._indexer.origin[t]){if(!u._indexer.origin[t].keys[--r]){if(!u._indexer.origin[--t])return!1;r=u._indexer.origin[t].keys.length-1}return!0}return!1},s=null,!this._indexer.origin[t])return[3,4];o=this.backward?a:i,d.label=1;case 1:return[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[r])];case 2:if((l=d.sent())&&Ku(this.condition,l))return s=l,[3,4];d.label=3;case 3:if(o())return[3,1];d.label=4;case 4:return[4,new Promise(function(f){var m=new y6({initialNextValue:Ji(s),iterator:n,forward:function(){return A(u,void 0,void 0,function(){var p,E;return I(this,function(_){switch(_.label){case 0:p=this.backward?a:i,_.label=1;case 1:return p()?[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[r])]:[3,3];case 2:return(E=_.sent())&&Ku(this.condition,E)?[2,Ji(E)]:[3,1];case 3:return[2,null]}})})},backward:function(){return A(u,void 0,void 0,function(){var p,E;return I(this,function(_){switch(_.label){case 0:p=this.backward?i:a,_.label=1;case 1:return p()?[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[r])]:[3,3];case 2:return(E=_.sent())&&Ku(this.condition,E)?[2,Ji(E)]:[3,1];case 3:return[2,null]}})})},complete:f});n(m)})];case 5:return[2,d.sent()]}})})},e}(),b6=function(){function e(n){var t=n.condition,r=t===void 0?{}:t,i=n.backward,a=i!==void 0&&i,s=n.mutex,o=n.blockManager,l=n.indexer;this._mutex=s,this._iterator=new EE({condition:r,backward:a,blockManager:o,indexer:l})}return e.prototype.fetch=function(n){return n===void 0&&(n={}),A(this,void 0,void 0,function(){var t,r,i,a,s=this;return I(this,function(o){switch(o.label){case 0:if(t=Math.max(n.offset||0,0),(r=typeof n.limit=="number"?n.limit:Number.MAX_SAFE_INTEGER)===0)return[2,[]];if(r<0)throw Un.collectionQueryNotValid;o.label=1;case 1:return o.trys.push([1,4,,5]),i=[],[4,this._mutex.lock()];case 2:return o.sent(),[4,this._iterator.each(function(l){return A(s,void 0,void 0,function(){return I(this,function(u){return l.error?l.stop():l.hasNext?t===0?(i.push(l.nextValue),0<r&&r<=i.length?l.stop():l.next()):(t--,l.next()):l.stop(),[2]})})})];case 3:return o.sent(),this._mutex.unlock(),[2,i];case 4:throw a=o.sent(),this._mutex.unlock(),a;case 5:return[2]}})})},e.prototype.count=function(){return A(this,void 0,void 0,function(){var n,t,r=this;return I(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),n=0,[4,this._mutex.lock()];case 1:return i.sent(),[4,this._iterator.each(function(a){return A(r,void 0,void 0,function(){return I(this,function(s){return a.error?a.stop():a.hasNext?(n++,a.next()):a.stop(),[2]})})})];case 2:return i.sent(),this._mutex.unlock(),[2,n];case 3:throw t=i.sent(),this._mutex.unlock(),t;case 4:return[2]}})})},e}(),kb=function(e){return"".concat("nest","@").concat(e)},ec=function(e,n){return"".concat(kb(e),"/").concat(n)},g_=function(e,n){return"".concat(ec(e,n),".metadata")},yE=function(e,n){return"".concat(ec(e,n),"/block.")},PM=function(e,n){return"".concat(ec(e,n),"/blob.")},C6=function(){function e(n){var t=n.dbname,r=n.collectionName,i=n.store;this.dbname=t,this.collectionName=r,this.store=i}return e.prototype.get=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,d;return I(this,function(f){switch(f.label){case 0:return[4,this.store.get(n)];case 1:return(t=f.sent())?(r=t.data,i=t.type,typeof fetch>"u"?[3,4]:[4,fetch(r)]):[3,5];case 2:return[4,f.sent().blob()];case 3:return[2,f.sent()];case 4:for(a=[],s=atob(r.split(",")[1]),o=0;o<s.length;o+=512){for(l=s.slice(o,o+512),u=new Array(l.length),d=0;d<l.length;d++)u[d]=l.charCodeAt(d);a.push(new Uint8Array(u))}return[2,new Blob(a,{type:i})];case 5:return[2,null]}})})},e.prototype.save=function(n,t){return t===void 0&&(t="".concat(Date.now())),A(this,void 0,void 0,function(){var r,i,a,s,o=this;return I(this,function(l){switch(l.label){case 0:return[4,new Promise(function(u){var d=function(m,p,E,_){return _===void 0&&(_=0),"".concat(PM(m,p)).concat(E,".").concat(_)}(o.dbname,o.collectionName,t),f=new FileReader;f.onload=function(){u({blobId:d,data:f.result,type:n.type})},f.readAsDataURL(n)})];case 1:return r=l.sent(),i=r.blobId,a=r.data,s=r.type,[4,this.store.set({key:i,value:{data:a,type:s}})];case 2:return l.sent(),[2,i]}})})},e.prototype.remove=function(n){return A(this,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return[4,this.store.remove(n)];case 1:return t.sent(),[2]}})})},e.prototype.clear=function(){return A(this,void 0,void 0,function(){var n,t,r=this;return I(this,function(i){switch(i.label){case 0:return n=PM(this.dbname,this.collectionName),[4,this.store.getAllKeys()];case 1:return t=i.sent(),[4,Promise.all(t.filter(function(a){return a.startsWith(n)}).map(function(a){return A(r,void 0,void 0,function(){return I(this,function(s){switch(s.label){case 0:return[4,this.store.remove(a)];case 1:return[2,s.sent()]}})})}))];case 2:return i.sent(),[2]}})})},e}();(function(e){e[e.COMMIT=0]="COMMIT",e[e.WRITE=1]="WRITE",e[e.ERROR=2]="ERROR"})(Wu||(Wu={})),function(e){e.PENDING="pending",e.PERSISTENT="persistent",e.VOLATILE="volatile"}(Ni||(Ni={})),function(e){e[e.NO_CACHE=0]="NO_CACHE",e[e.DEFAULT=1]="DEFAULT",e[e.PERSISTENT=2]="PERSISTENT"}(Vs||(Vs={}));var lf,Ti,xM=[Ni.PENDING,Ni.VOLATILE],im={},ta=function(){function e(n){var t=n.dbname,r=n.limit,i=r===void 0?256:r;return im[t]||(this.dbname=t,this._items=[],this._limit=i,im[t]=this),im[t]}return e.get=function(n){return im[n]},Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.find=function(n,t,r){return r===void 0&&(r=Vs.DEFAULT),A(this,void 0,void 0,function(){var i,a;return I(this,function(s){switch(s.label){case 0:return(i=this.get(t))?[3,2]:[4,n.get(t)];case 1:return(a=s.sent())&&(i={key:t,value:a,state:r===Vs.PERSISTENT?Ni.PERSISTENT:Ni.VOLATILE},this.put(i)),[3,3];case 2:r===Vs.PERSISTENT&&(i.state=Ni.PERSISTENT),s.label=3;case 3:return[2,i]}})})},e.prototype.get=function(n,t){t===void 0&&(t=Vs.DEFAULT);var r=this._items.map(function(a){return a.key}).indexOf(n);if(r>-1){var i=this._items[r];return t===Vs.PERSISTENT&&(i.state=Ni.PERSISTENT),t!==Vs.NO_CACHE&&this.put(i),i}return null},e.prototype.put=function(n){var t,r;if(this._limit>0){var i=this._items.map(function(f){return f.key}).indexOf(n.key);if(i>-1)xM.includes(this._items[i].state)&&xM.includes(n.state)?(this._items.splice(i,1),this._items.push(n)):(this._items[i].state=n.state,this._items[i].value=n.value);else{this._items.push(n);var a=this._items.filter(function(f){return f.state===Ni.VOLATILE}),s=a.length-this._limit;if(s>0){var o=[];try{for(var l=Ge(this._items),u=l.next();!u.done;u=l.next()){var d=u.value;d.state===Ni.VOLATILE&&s>0?s--:o.push(d)}}catch(f){t={error:f}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}this._items=o}}}},e.prototype.remove=function(n){var t=this._items.map(function(r){return r.key}).indexOf(n);t>-1&&this._items.splice(t,1)},e.prototype.clearByCondition=function(n){this._items=this._items.filter(function(t){return!n(t)})},e.prototype.clearForDatabase=function(n){this.clearByCondition(function(t){return t.key.startsWith(kb(n))})},e.prototype.clear=function(n){n===void 0&&(n=!1),this._items=n?[]:this._items.filter(function(t){return t.state!==Ni.VOLATILE})},e}(),S6=function(){function e(n){var t=n.dbname,r=n.collectionName,i=n.store;this._requests=[],this._onCommit=new Map,this._onWrite=new Map,this._onError=new Map,this.dbname=t,this.collectionName=r,this.metadataKey=function(a,s){return"".concat(ec(a,s),"/trans.metadata")}(t,r),this.recordsetKey=function(a,s){return"".concat(ec(a,s),"/trans.recordset")}(t,r),this._store=i}return Object.defineProperty(e.prototype,"generation",{get:function(){return this._metadata?this._metadata.generation:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requestCount",{get:function(){return this._requests.length},enumerable:!1,configurable:!0}),e.prototype._getReducedRecordset=function(n){return n===void 0&&(n=[]),A(this,void 0,void 0,function(){var t;return I(this,function(r){switch(r.label){case 0:return[4,this._store.get(this.recordsetKey)];case 1:return(t=r.sent()||[]).push.apply(t,Nt([],ut(n),!1)),[2,this._reduceRecordSet(t)]}})})},e.prototype._reduceRecordSet=function(n){for(var t=[],r={},i=n.length-1;i>=0;i--){for(var a=n[i],s=[],o=a.requests.length-1;o>=0;o--){var l=a.requests[o],u=l.data;r[u.key]||(s.unshift(l),r[u.key]=!0)}s.length>0&&(a.requests=s,t.unshift(a))}return t},e.prototype._applyRecord=function(n,t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u,d,f;return I(this,function(m){switch(m.label){case 0:r=ta.get(this.dbname),i=t.generation,a=t.requests,s=null,m.label=1;case 1:return m.trys.push([1,3,,4]),[4,this._store.setMany(a.map(function(p){return Y(Y({},p.data),{generation:i})}))];case 2:for(o=m.sent(),l=0;l<a.length;l++)o[l]instanceof Error&&(s||(s=o[l]),u=a[l].data,r.put(Y(Y({},u),{state:Ni.PERSISTENT})));return[3,4];case 3:return d=m.sent(),s=d,[3,4];case 4:return s?[3,6]:(f=n.filter(function(p){return p.generation!==i}),[4,this._store.set({key:this.recordsetKey,value:f})]);case 5:return m.sent(),this._onWrite.forEach(function(p){p(a.map(function(E){return E.data}))}),[3,7];case 6:this._onError.forEach(function(p){s&&p(s)}),m.label=7;case 7:return[2]}})})},e.prototype.init=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a,s,o,l;return I(this,function(u){switch(u.label){case 0:return n=this,[4,this._store.get(this.metadataKey)];case 1:return n._metadata=u.sent()||{generation:1},[4,this._getReducedRecordset()];case 2:t=u.sent(),u.label=3;case 3:u.trys.push([3,8,9,10]),r=Ge(t),i=r.next(),u.label=4;case 4:return i.done?[3,7]:(a=i.value,[4,this._applyRecord(t,a)]);case 5:u.sent(),u.label=6;case 6:return i=r.next(),[3,4];case 7:return[3,10];case 8:return s=u.sent(),o={error:s},[3,10];case 9:try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(o)throw o.error}return[7];case 10:return[2]}})})},e.prototype.on=function(n,t,r){switch(n){case Wu.COMMIT:this._onCommit.set(t,r);break;case Wu.WRITE:this._onWrite.set(t,r);break;case Wu.ERROR:this._onError.set(t,r)}},e.prototype.requestWrite=function(n,t){this._requests.push({data:n,options:t}),ta.get(this.dbname).put(Y({state:Ni.PENDING},n))},e.prototype.requestMultipleWrite=function(n,t){var r,i,a=ta.get(this.dbname);try{for(var s=Ge(n),o=s.next();!o.done;o=s.next()){var l=o.value;this._requests.push({data:l,options:t}),a.put(Y({state:Ni.PENDING},l))}}catch(u){r={error:u}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},e.prototype.clear=function(){return A(this,void 0,void 0,function(){return I(this,function(n){return ta.get(this.dbname).clearByCondition(function(t){return t.state===Ni.PENDING}),this._requests=[],[2]})})},e.prototype.commit=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a,s,o,l,u,d,f,m,p=this;return I(this,function(E){switch(E.label){case 0:if(!((n=this._requests).length>0))return[3,4];for(t=[],r={},l=n.length-1;l>=0;l--)i=n[l],d=i.data,r[d.key]||(r[d.key]=!0,t.unshift(i));return a={generation:this.generation,requests:t},[4,this._getReducedRecordset([a])];case 1:return s=E.sent(),[4,this._store.set({key:this.recordsetKey,value:s})];case 2:return E.sent(),this._metadata.generation++,[4,this._store.set({key:this.metadataKey,value:this._metadata})];case 3:for(E.sent(),o=ta.get(this.dbname),l=0;l<t.length;l++)u=t[l],d=u.data,f=u.options,o.put(Y(Y({},d),{state:f&&f.persistent?Ni.PERSISTENT:Ni.VOLATILE}));this._requests=[],this._onCommit.forEach(function(_){_(n.map(function(b){return b.data}))}),m=Pf.get(this.dbname),setTimeout(function(){try{p._applyRecord(s,a)}catch(_){p._onError.forEach(function(b){return b(_)})}},m.transactionApplyDelay),E.label=4;case 4:return[2]}})})},e}(),Om=function(){function e(n){var t=n.blockId,r=n.keyName,i=n.items,a=i===void 0?[]:i,s=n.limit;this.blockId=t,this.keyName=r,this.limit=s,this._items=Nt([],ut(a),!1)}return e.createFromCacheItem=function(n){return n?new e(n.value):null},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this._items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.serialize=function(){return{blockId:this.blockId,keyName:this.keyName,limit:this.limit,items:this._items}},e.prototype.getItemByKey=function(n){var t=this,r=this._items.find(function(i){var a=i[t.keyName];return n===a});return r??null},e.prototype.has=function(n){var t=this;return this._items.map(function(r){return r[t.keyName]}).includes(n)},e.prototype.add=function(n){var t=this,r=this._items.map(function(i){return i[t.keyName]}).indexOf(n[this.keyName]);return r<0?this._items.length<this.limit&&(this._items.push(n),!0):(this._items[r]=n,!0)},e.prototype.remove=function(n){for(var t=0;t<this._items.length;t++)if(this._items[t][this.keyName]===n)return this._items.splice(t,1),!0;return!1},e.prototype.clear=function(){this._items=[]},e}(),T6=function(){function e(n){var t=n.dbname,r=n.collectionName,i=n.metadata,a=n.hashFunction,s=a===void 0?UM:a,o=n.transaction,l=n.store;this.dbname=t,this.collectionName=r,this.hashFunction=s,this.metadata=i,this._transaction=o,this._store=l}return Object.defineProperty(e.prototype,"keyName",{get:function(){return this.metadata.keyName},enumerable:!1,configurable:!0}),e.prototype.createBlockId=function(n,t){return t===void 0&&(t=this.metadata.blockLevel),r=this.dbname,i=this.collectionName,a=t,s="".concat(function(o,l,u){var d=u.base*Math.pow(u.multiplier,l)+u.constant;return(u.hashFunction||UM)(o,d)}(n,t,{hashFunction:this.hashFunction,base:this.metadata.blockHashBase,multiplier:this.metadata.blockHashMultiplier,constant:this.metadata.blockHashConstant})),"".concat(yE(r,i)).concat(a,".").concat(s);var r,i,a,s},e.prototype._findBlock=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s;return I(this,function(o){switch(o.label){case 0:t=ta.get(this.dbname),r=this.metadata.blockLevel,o.label=1;case 1:return r>0?(i=this.createBlockId(n,r),[4,t.find(this._store,i)]):[3,4];case 2:if((a=o.sent())&&(s=Om.createFromCacheItem(a),s==null?void 0:s.getItemByKey(n)))return[2,s];o.label=3;case 3:return r--,[3,1];case 4:return[2,null]}})})},e.prototype.getFromBlock=function(n){return A(this,void 0,void 0,function(){var t;return I(this,function(r){switch(r.label){case 0:return[4,this._findBlock(n)];case 1:return[2,(t=r.sent())?t.getItemByKey(n):null]}})})},e.prototype.putToBlock=function(n,t){return A(this,void 0,void 0,function(){var r,i,a,s,o;return I(this,function(l){switch(l.label){case 0:return r=Pf.get(this.dbname),i=this.createBlockId(n),a=Math.floor(this._store.itemSizeLimit/r.itemSizeLimit),[4,ta.get(this.dbname).find(this._store,i)];case 1:return s=l.sent(),(o=s?Om.createFromCacheItem(s):new Om({blockId:i,keyName:this.keyName,items:[],limit:a}))!=null&&o.add(t)?(this._transaction.requestWrite({key:o.blockId,value:o.serialize()}),[2,!0]):[2,!1]}})})},e.prototype.removeFromBlock=function(n){return A(this,void 0,void 0,function(){var t;return I(this,function(r){switch(r.label){case 0:return[4,this._findBlock(n)];case 1:return(t=r.sent())&&t.remove(n)?(this._transaction.requestWrite({key:t.blockId,value:t.serialize()}),[2,!0]):[2,!1]}})})},e.prototype.clearAllBlocks=function(){return A(this,void 0,void 0,function(){var n,t,r;return I(this,function(i){switch(i.label){case 0:return n=yE(this.dbname,this.collectionName),[4,this._store.getAllKeys()];case 1:return t=i.sent(),r=t.filter(function(a){return a.startsWith(n)}),[4,this._store.removeMany(r)];case 2:return i.sent(),[4,this._transaction.clear()];case 3:return i.sent(),ta.get(this.dbname).clearByCondition(function(a){return a.key.startsWith(n)}),[2]}})})},e}(),Tl=function(){function e(n){var t=n.dbname,r=n.collectionName,i=n.keyName,a=n.fields,s=n.transaction,o=n.store,l=this;this._origin=[],this._table=[];var u=function(d,f,m){return"".concat(ec(d,f),"/index.").concat(m)}(t,r,a.join(">"));this.dbname=t,this.collectionName=r,this.keyName=i,this.fields=a,this.indexerKey=u,this._store=o,this._transaction=s,this._transaction.on(Wu.COMMIT,this.indexerKey,function(){return l.commit()}),this._transaction.on(Wu.ERROR,this.indexerKey,function(){return l.abort()})}return e.createKey=function(n){return n.join(">")},e.parseKey=function(n){return n.split(">")},e.prototype._addItem=function(n){var t=n[this.keyName],r=this.getColumnValues(n),i=ut(this.indexOf(r),2),a=i[0];return i[1]?!this._table[a].keys.includes(t)&&(this._table[a].keys.push(t),!0):(this._table.splice(a,0,{columnValues:r,keys:[t]}),!0)},e.prototype._removeItem=function(n){var t=n[this.keyName],r=this.getColumnValues(n),i=ut(this.indexOf(r),2),a=i[0];if(i[1]){var s=this._table[a].keys.indexOf(t);if(s>-1)return this._table[a].keys.splice(s,1),this._table[a].keys.length===0&&this._table.splice(a,1),!0}return!1},Object.defineProperty(e.prototype,"origin",{get:function(){return this._origin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"table",{get:function(){return this._table},enumerable:!1,configurable:!0}),e.prototype.getColumnValues=function(n){var t,r,i,a,s=[];try{for(var o=Ge(this.fields),l=o.next();!l.done;l=o.next()){var u=l.value;if(u[0]==="-"&&(u=u.slice(1)),i=n[u],a=void 0,a=typeof i,i!==null&&a!=="undefined"&&a!=="boolean"&&a!=="number"&&a!=="string")throw Un.indexTypesNotMatch;s.push(n[u])}}catch(d){t={error:d}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return s},e.prototype.diff=function(n,t){for(var r in this.fields){var i=this.fields[r][0]==="-"?-1:1,a=Do(n[r],t[r]);if(a!==0)return i*a}return 0},e.prototype.indexOf=function(n){if(this._table.length>0){for(var t=0,r=this._table.length-1;t<=r;){var i=Math.floor((t+r)/2),a=this.diff(n,this._table[i].columnValues);if(a>0)t=i+1;else{if(!(a<0))return[i,!0];r=i-1}}return[t,!1]}return[0,!1]},e.prototype.ensure=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a,s,o,l,u,d,f,m,p,E,_,b,C;return I(this,function(y){switch(y.label){case 0:return[4,(n=ta.get(this.dbname)).find(this._store,this.indexerKey,Vs.PERSISTENT)];case 1:return(t=y.sent())?[3,11]:(r=yE(this.dbname,this.collectionName),[4,this._store.getAllKeys()]);case 2:i=y.sent(),y.label=3;case 3:y.trys.push([3,8,9,10]),a=Ge(i),s=a.next(),y.label=4;case 4:return s.done?[3,7]:(o=s.value).startsWith(r)?[4,n.find(this._store,o,Vs.NO_CACHE)]:[3,6];case 5:if(l=y.sent(),u=Om.createFromCacheItem(l))try{for(b=void 0,d=Ge(u.items),f=d.next();!f.done;f=d.next())m=f.value,this._addItem(m)}catch(T){b={error:T}}finally{try{f&&!f.done&&(C=d.return)&&C.call(d)}finally{if(b)throw b.error}}y.label=6;case 6:return s=a.next(),[3,4];case 7:return[3,10];case 8:return p=y.sent(),E={error:p},[3,10];case 9:try{s&&!s.done&&(_=a.return)&&_.call(a)}finally{if(E)throw E.error}return[7];case 10:return this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[3,12];case 11:this._origin=t.value,this._table=Ji(this._origin),y.label=12;case 12:return[2]}})})},e.prototype.drop=function(){return A(this,void 0,void 0,function(){return I(this,function(n){switch(n.label){case 0:return ta.get(this.dbname).remove(this.indexerKey),[4,this._store.remove(this.indexerKey)];case 1:return n.sent(),[2]}})})},e.prototype.addItem=function(n){return A(this,void 0,void 0,function(){return I(this,function(t){return this._addItem(n)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]})})},e.prototype.removeItem=function(n){return A(this,void 0,void 0,function(){return I(this,function(t){return this._removeItem(n)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]})})},e.prototype.clear=function(){return A(this,void 0,void 0,function(){return I(this,function(n){return this._table=[],this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]})})},e.prototype.commit=function(){this._origin=this._table,this._table=Ji(this._origin)},e.prototype.abort=function(){this._table=Ji(this._origin)},e}(),lp=function(){return typeof document<"u"&&typeof navigator<"u"&&navigator.product!=="ReactNative"},FM=function(){var e=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),(n==="x"?t:3&t|8).toString(16)})};(function(e){e[e.PROCESSING=0]="PROCESSING",e[e.DONE=1]="DONE"})(lf||(lf={})),function(e){e.NEWNODE="newnode",e.REMOVENODE="removenode",e.CLAIM_HOST="claimhost",e.SYNC_HOST="synchost",e.REQUEST_LOCK="requestlock",e.ACQUIRE_LOCK="acquirelock",e.RELEASE_LOCK="releaselock"}(Ti||(Ti={}));var Ts,__={},Pb=function(){function e(n,t){t===void 0&&(t={});var r=this;return this._state=lf.PROCESSING,this._queue=[],this._activationQueue=[],__[n]&&!t.forceCreate||(this.nodeId=FM(),this.key=n,lp()&&(t.startAsInvisible?this.registerNode():document.visibilityState==="visible"?this.claimHost():this.registerNode(),document.addEventListener("visibilitychange",function(){document.visibilityState==="visible"&&r.claimHost()}),window.addEventListener("message",function(i){var a,s,o=i.data;if(o!=null&&o.isNestDbMessage){var l=o.nodeId,u=o.requestId,d=o.key,f=o.op,m=o.data;if(l!==r.nodeId&&d===r.key)switch(f){case Ti.NEWNODE:r._sendSync();break;case Ti.CLAIM_HOST:r._sendSync(),r._hostId=l;break;case Ti.SYNC_HOST:if(!r.isInSync){r._activationTimeout&&clearTimeout(r._activationTimeout);var p=m,E=p.currentItemRequestId,_=p.queue,b=function(N){var w=r._queue.findIndex(function(O){return O.requestId===N.requestId});w<0&&r._requestLock({isNestDbMessage:!0,nodeId:N.nodeId,requestId:N.requestId,key:r.key,op:Ti.REQUEST_LOCK,ts:N.ts})};try{for(var C=Ge(_),y=C.next();!y.done;y=C.next())b(y.value)}catch(N){a={error:N}}finally{try{y&&!y.done&&(s=C.return)&&s.call(C)}finally{if(a)throw a.error}}r._currentItem=r._queue.find(function(N){return N.requestId===E}),r._completeSync()}break;case Ti.REMOVENODE:r._queue=r._queue.filter(function(N){return N.nodeId!==o.nodeId}),r._currentItem&&r._currentItem.nodeId===o.nodeId&&(r._currentItem=void 0,r._acquire(r._queue[0]));break;case Ti.REQUEST_LOCK:r._requestLock(o);break;case Ti.ACQUIRE_LOCK:var T=r._queue.find(function(N){return N.requestId===u});r._acquire(T);break;case Ti.RELEASE_LOCK:r._release(u)}}}),window.addEventListener("beforeunload",function(){r._send(Ti.REMOVENODE)})),__[n]=this),__[n]}return Object.defineProperty(e.prototype,"locked",{get:function(){return!!this._currentItem},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isHost",{get:function(){return this._hostId===this.nodeId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInSync",{get:function(){return this._state==lf.DONE},enumerable:!1,configurable:!0}),e.prototype._send=function(n,t){var r;t===void 0&&(t={});var i={isNestDbMessage:!0,nodeId:this.nodeId,requestId:(r=t==null?void 0:t.requestId)!==null&&r!==void 0?r:FM(),key:this.key,op:n,data:t.data,ts:Date.now()};return lp()&&window.postMessage(i,"*"),i},e.prototype._acquire=function(n){n?(this._currentItem=n,this._currentItem.onAcquired&&this._currentItem.onAcquired(n.requestId)):this._currentItem=void 0},e.prototype._release=function(n){if(this._currentItem&&this._currentItem.requestId===n){var t=this._currentItem;this._currentItem=void 0,t.nodeId===this.nodeId&&this._send(Ti.RELEASE_LOCK,{requestId:t.requestId});var r=this._queue.findIndex(function(i){return i.requestId===n});r>-1&&this._queue.splice(r,1),t.onReleased&&t.onReleased(n)}},e.prototype._requestLock=function(n){var t=this;return new Promise(function(r){for(var i={nodeId:n.nodeId,requestId:n.requestId,ts:n.ts,onAcquired:function(o){t.isHost&&t._send(Ti.ACQUIRE_LOCK,{requestId:o}),r()},onReleased:function(){t._acquire(t._queue[0])}},a=!1,s=0;s<t._queue.length;s++)if(t._queue[s].ts>i.ts){t._queue.splice(s,0,i),a=!0;break}a||t._queue.push(i),t._currentItem||t._acquire(t._queue[0])})},e.prototype._sendSync=function(){var n;this.isHost&&this._send(Ti.SYNC_HOST,{data:{currentItemRequestId:(n=this._currentItem)===null||n===void 0?void 0:n.requestId,queue:this._queue.map(function(t){return{nodeId:t.nodeId,requestId:t.requestId,ts:t.ts}})}})},e.prototype._waitUntilSyncCompleted=function(){return A(this,void 0,void 0,function(){var n=this;return I(this,function(t){return this.isHost&&!this.isInSync?[2,new Promise(function(r){n._activationQueue.push(r)})]:[2]})})},e.prototype._waitSync=function(){var n=this;this.isInSync||(this._activationTimeout=setTimeout(function(){n._completeSync()},8))},e.prototype._completeSync=function(){this.isInSync||(this._state=lf.DONE,this._activationQueue.forEach(function(n){return n()}),this._activationQueue=[])},e.prototype.registerNode=function(){this._send(Ti.NEWNODE),this._waitSync()},e.prototype.claimHost=function(){this._hostId=this.nodeId,this._send(Ti.CLAIM_HOST),this._waitSync()},e.prototype.lock=function(){return A(this,void 0,void 0,function(){var n;return I(this,function(t){switch(t.label){case 0:return[4,this._waitUntilSyncCompleted()];case 1:return t.sent(),n=this._send(Ti.REQUEST_LOCK),[4,this._requestLock(n)];case 2:return t.sent(),[2]}})})},e.prototype.unlock=function(){var n;!((n=this._currentItem)===null||n===void 0)&&n.requestId&&this._release(this._currentItem.requestId)},e}(),E_=function(){function e(n){var t=n.dbname,r=n.collectionName,i=n.keyName,a=n.keyHash,s=n.indexes,o=n.store,l=this;this._state=ju.INIT,this._indexers=[],this.dbname=t,this.name=r,this.keyName=i,this.indexes=Nt([[i]],ut(s.filter(function(u){return Tl.createKey(u)!==l.keyName})),!1),this._keyHash=a,this._store=o,this._mutex=new Pb(function(u,d){return"".concat(ec(u,d),".lock")}(t,r)),this._blobContainer=new C6({dbname:t,collectionName:r,store:o}),this._transaction=new S6({dbname:t,collectionName:r,store:o})}return e.metadataOf=function(n,t,r){return A(this,void 0,void 0,function(){var i;return I(this,function(a){switch(a.label){case 0:return i=g_(n,t),[4,r.get(i)];case 1:return[2,a.sent()]}})})},Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isReady",{get:function(){return this._state===ju.READY},enumerable:!1,configurable:!0}),e.prototype.init=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a,s,o,l,u,d,f,m,p,E,_=this;return I(this,function(b){switch(b.label){case 0:return[4,this._mutex.lock()];case 1:b.sent(),b.label=2;case 2:return b.trys.push([2,9,,10]),n=Pf.get(this.dbname),[4,e.metadataOf(this.dbname,this.name,this._store)];case 3:return t=b.sent(),this._metadata=t||{keyName:this.keyName,blockLevel:1,blockHashBase:n.blockHashBase,blockHashMultiplier:n.blockHashMultiplier,blockHashConstant:n.blockHashConstant,indexes:this.indexes},[4,this._transaction.init()];case 4:b.sent(),this._blockManager=new T6({dbname:this.dbname,collectionName:this.name,hashFunction:this._keyHash,metadata:this._metadata,transaction:this._transaction,store:this._store}),r=Nt([],ut(this.indexes),!1),i=[],a=r.map(function(C){return Tl.createKey(C)}),s=t?t.indexes.map(function(C){return Tl.createKey(C)}):[];try{for(o=Ge(s),l=o.next();!l.done;l=o.next())u=l.value,a.includes(u)||i.push(Tl.parseKey(u))}catch(C){p={error:C}}finally{try{l&&!l.done&&(E=o.return)&&E.call(o)}finally{if(p)throw p.error}}return(d=[]).push.apply(d,Nt([],ut(r.map(function(C){var y=new Tl({dbname:_.dbname,collectionName:_.name,keyName:_.keyName,fields:C,transaction:_._transaction,store:_._store});return _._indexers.push(y),y.ensure()})),!1)),d.push.apply(d,Nt([],ut(i.map(function(C){return new Tl({dbname:_.dbname,collectionName:_.name,keyName:_.keyName,fields:C,transaction:_._transaction,store:_._store}).drop()})),!1)),[4,Promise.all(d)];case 5:return b.sent(),[4,this._transaction.commit()];case 6:return b.sent(),a.sort().join(",")===s.sort().join(",")?[3,8]:(f=g_(this.dbname,this.name),this._metadata.indexes=r,[4,this._store.set({key:f,value:this._metadata})]);case 7:b.sent(),b.label=8;case 8:return this._state=ju.READY,this._mutex.unlock(),[3,10];case 9:throw m=b.sent(),this._mutex.unlock(),m;case 10:return[2]}})})},e.prototype.close=function(){this._state=ju.CLOSED},e.prototype._hasPropertyOfKeyName=function(n){var t=n[this.keyName];return typeof t=="string"&&!!t},e.prototype._getIndexerBy=function(n){var t,r;n===void 0&&(n=null),n||(n=[this.keyName]);var i=Tl.createKey(n);try{for(var a=Ge(this._indexers),s=a.next();!s.done;s=a.next()){var o=s.value;if(i===Tl.createKey(o.fields))return o}}catch(l){t={error:l}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}throw Un.indexTableIsRequired},e.prototype._upgradeBlockLevel=function(){return A(this,void 0,void 0,function(){var n;return I(this,function(t){switch(t.label){case 0:return n=g_(this.dbname,this.name),this._metadata.blockLevel++,[4,this._store.set({key:n,value:this._metadata})];case 1:return t.sent(),[2]}})})},e.prototype._requestInsert=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return I(this,function(l){switch(l.label){case 0:return t=n[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return l.sent()?[3,13]:[4,this._blockManager.putToBlock(t,n)];case 2:return l.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return l.sent(),[4,this._blockManager.putToBlock(t,n)];case 4:l.sent(),l.label=5;case 5:l.trys.push([5,10,11,12]),r=Ge(this._indexers),i=r.next(),l.label=6;case 6:return i.done?[3,9]:[4,i.value.addItem(n)];case 7:l.sent(),l.label=8;case 8:return i=r.next(),[3,6];case 9:return[3,12];case 10:return a=l.sent(),s={error:a},[3,12];case 11:try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(s)throw s.error}return[7];case 12:return[3,14];case 13:throw Un.collectionInsertDuplicate;case 14:return[2]}})})},e.prototype._requestUpsert=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,d,f,m,p,E;return I(this,function(_){switch(_.label){case 0:return t=n[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return(r=_.sent())?[3,13]:[4,this._blockManager.putToBlock(t,n)];case 2:return _.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return _.sent(),[4,this._blockManager.putToBlock(t,n)];case 4:_.sent(),_.label=5;case 5:_.trys.push([5,10,11,12]),i=Ge(this._indexers),a=i.next(),_.label=6;case 6:return a.done?[3,9]:[4,(u=a.value).addItem(n)];case 7:_.sent(),_.label=8;case 8:return a=i.next(),[3,6];case 9:return[3,12];case 10:return s=_.sent(),f={error:s},[3,12];case 11:try{a&&!a.done&&(m=i.return)&&m.call(i)}finally{if(f)throw f.error}return[7];case 12:return[3,23];case 13:return[4,this._blockManager.putToBlock(t,n)];case 14:_.sent(),_.label=15;case 15:_.trys.push([15,21,22,23]),o=Ge(this._indexers),l=o.next(),_.label=16;case 16:return l.done?[3,20]:(u=l.value).diff(u.getColumnValues(r),u.getColumnValues(n))===0?[3,19]:[4,u.removeItem(r)];case 17:return _.sent(),[4,u.addItem(n)];case 18:_.sent(),_.label=19;case 19:return l=o.next(),[3,16];case 20:return[3,23];case 21:return d=_.sent(),p={error:d},[3,23];case 22:try{l&&!l.done&&(E=o.return)&&E.call(o)}finally{if(p)throw p.error}return[7];case 23:return[2]}})})},e.prototype._requestUpdate=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u;return I(this,function(d){switch(d.label){case 0:return t=n[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return(r=d.sent())?[4,this._blockManager.putToBlock(t,n)]:[3,11];case 2:d.sent(),d.label=3;case 3:d.trys.push([3,9,10,11]),i=Ge(this._indexers),a=i.next(),d.label=4;case 4:return a.done?[3,8]:(s=a.value).diff(s.getColumnValues(r),s.getColumnValues(n))===0?[3,7]:[4,s.removeItem(r)];case 5:return d.sent(),[4,s.addItem(n)];case 6:d.sent(),d.label=7;case 7:return a=i.next(),[3,4];case 8:return[3,11];case 9:return o=d.sent(),l={error:o},[3,11];case 10:try{a&&!a.done&&(u=i.return)&&u.call(i)}finally{if(l)throw l.error}return[7];case 11:return[2]}})})},e.prototype._requestRemove=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return I(this,function(l){switch(l.label){case 0:return[4,this._blockManager.getFromBlock(n)];case 1:return(t=l.sent())?[4,this._blockManager.removeFromBlock(n)]:[3,10];case 2:l.sent(),l.label=3;case 3:l.trys.push([3,8,9,10]),r=Ge(this._indexers),i=r.next(),l.label=4;case 4:return i.done?[3,7]:[4,i.value.removeItem(t)];case 5:l.sent(),l.label=6;case 6:return i=r.next(),[3,4];case 7:return[3,10];case 8:return a=l.sent(),s={error:a},[3,10];case 9:try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(s)throw s.error}return[7];case 10:return[2]}})})},e.prototype._requestClear=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a;return I(this,function(s){switch(s.label){case 0:return[4,this._blockManager.clearAllBlocks()];case 1:s.sent(),s.label=2;case 2:s.trys.push([2,7,8,9]),n=Ge(this._indexers),t=n.next(),s.label=3;case 3:return t.done?[3,6]:[4,t.value.clear()];case 4:s.sent(),s.label=5;case 5:return t=n.next(),[3,3];case 6:return[3,9];case 7:return r=s.sent(),i={error:r},[3,9];case 8:try{t&&!t.done&&(a=n.return)&&a.call(n)}finally{if(i)throw i.error}return[7];case 9:return[2]}})})},e.prototype.getByKey=function(n){return A(this,void 0,void 0,function(){var t,r;return I(this,function(i){switch(i.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,6];case 1:i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this._blockManager.getFromBlock(n)];case 3:return t=i.sent(),this._mutex.unlock(),[2,Ji(t)];case 4:throw r=i.sent(),this._mutex.unlock(),r;case 5:return[3,7];case 6:throw Un.collectionNotReady;case 7:return[2]}})})},e.prototype.query=function(n){if(n===void 0&&(n={}),this.isReady)return new b6({condition:n.where,mutex:this._mutex,blockManager:this._blockManager,indexer:this._getIndexerBy(n.index),backward:!!n.backward});throw Un.collectionNotReady},e.prototype.insertOne=function(n){return A(this,void 0,void 0,function(){var t;return I(this,function(r){switch(r.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:r.sent(),r.label=2;case 2:if(r.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(n))throw Un.collectionKeyNotGiven;return[4,this._requestInsert(Ji(n))];case 3:return r.sent(),[4,this._transaction.commit()];case 4:return r.sent(),this._mutex.unlock(),[2,n];case 5:return t=r.sent(),[4,this._transaction.clear()];case 6:throw r.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Un.collectionNotReady;case 9:return[2]}})})},e.prototype.insertMany=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u=this;return I(this,function(d){switch(d.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:d.sent(),d.label=2;case 2:if(d.trys.push([2,12,,14]),n.some(function(f){return!u._hasPropertyOfKeyName(f)}))throw Un.collectionKeyNotGiven;d.label=3;case 3:d.trys.push([3,8,9,10]),t=Ge(n),r=t.next(),d.label=4;case 4:return r.done?[3,7]:(i=r.value,[4,this._requestInsert(Ji(i))]);case 5:d.sent(),d.label=6;case 6:return r=t.next(),[3,4];case 7:return[3,10];case 8:return a=d.sent(),o={error:a},[3,10];case 9:try{r&&!r.done&&(l=t.return)&&l.call(t)}finally{if(o)throw o.error}return[7];case 10:return[4,this._transaction.commit()];case 11:return d.sent(),this._mutex.unlock(),[2,n];case 12:return s=d.sent(),[4,this._transaction.clear()];case 13:throw d.sent(),this._mutex.unlock(),s;case 14:return[3,16];case 15:throw Un.collectionNotReady;case 16:return[2]}})})},e.prototype.upsertOne=function(n){return A(this,void 0,void 0,function(){var t;return I(this,function(r){switch(r.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:r.sent(),r.label=2;case 2:if(r.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(n))throw Un.collectionKeyNotGiven;return[4,this._requestUpsert(Ji(n))];case 3:return r.sent(),[4,this._transaction.commit()];case 4:return r.sent(),this._mutex.unlock(),[2,n];case 5:return t=r.sent(),[4,this._transaction.clear()];case 6:throw r.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Un.collectionNotReady;case 9:return[2]}})})},e.prototype.upsertMany=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u=this;return I(this,function(d){switch(d.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:d.sent(),d.label=2;case 2:if(d.trys.push([2,12,,14]),n.some(function(f){return!u._hasPropertyOfKeyName(f)}))throw Un.collectionKeyNotGiven;d.label=3;case 3:d.trys.push([3,8,9,10]),t=Ge(n),r=t.next(),d.label=4;case 4:return r.done?[3,7]:(i=r.value,[4,this._requestUpsert(Ji(i))]);case 5:d.sent(),d.label=6;case 6:return r=t.next(),[3,4];case 7:return[3,10];case 8:return a=d.sent(),o={error:a},[3,10];case 9:try{r&&!r.done&&(l=t.return)&&l.call(t)}finally{if(o)throw o.error}return[7];case 10:return[4,this._transaction.commit()];case 11:return d.sent(),this._mutex.unlock(),[2,n];case 12:return s=d.sent(),[4,this._transaction.clear()];case 13:throw d.sent(),this._mutex.unlock(),s;case 14:return[3,16];case 15:throw Un.collectionNotReady;case 16:return[2]}})})},e.prototype.update=function(n){return A(this,void 0,void 0,function(){var t;return I(this,function(r){switch(r.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:r.sent(),r.label=2;case 2:if(r.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(n))throw Un.collectionKeyNotGiven;return[4,this._requestUpdate(Ji(n))];case 3:return r.sent(),[4,this._transaction.commit()];case 4:return r.sent(),this._mutex.unlock(),[2,n];case 5:return t=r.sent(),[4,this._transaction.clear()];case 6:throw r.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Un.collectionNotReady;case 9:return[2]}})})},e.prototype.updateIf=function(n,t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u,d,f,m,p,E,_,b,C=this;return I(this,function(y){switch(y.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,16];case 1:y.sent(),y.label=2;case 2:return y.trys.push([2,13,,15]),r=n.where,i=r===void 0?{}:r,a=n.index,s=a===void 0?null:a,o=n.backward,l=o!==void 0&&o,u=[],[4,new EE({condition:i,blockManager:this._blockManager,backward:l,indexer:this._getIndexerBy(s)}).each(function(T){return A(C,void 0,void 0,function(){var N;return I(this,function(w){if(T.error)throw T.stop(),T.error;return T.hasNext?(N=T.nextValue,Ku(i,N)&&t.set&&(typeof t.set!="function"?Object.keys(t.set).forEach(function(O){var L;N[O]=(L=t.set)===null||L===void 0?void 0:L[O]}):t.set(N),u.push(N)),T.next()):T.stop(),[2]})})})];case 3:y.sent(),y.label=4;case 4:y.trys.push([4,9,10,11]),d=Ge(u),f=d.next(),y.label=5;case 5:return f.done?[3,8]:(m=f.value,[4,this._requestUpdate(Ji(m))]);case 6:y.sent(),y.label=7;case 7:return f=d.next(),[3,5];case 8:return[3,11];case 9:return p=y.sent(),_={error:p},[3,11];case 10:try{f&&!f.done&&(b=d.return)&&b.call(d)}finally{if(_)throw _.error}return[7];case 11:return[4,this._transaction.commit()];case 12:return y.sent(),this._mutex.unlock(),[2,u];case 13:return E=y.sent(),[4,this._transaction.clear()];case 14:throw y.sent(),this._mutex.unlock(),E;case 15:return[3,17];case 16:throw this._transaction.clear(),Un.collectionNotReady;case 17:return[2]}})})},e.prototype.remove=function(n){return A(this,void 0,void 0,function(){var t;return I(this,function(r){switch(r.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,5,,7]),[4,this._requestRemove(n)];case 3:return r.sent(),[4,this._transaction.commit()];case 4:return r.sent(),this._mutex.unlock(),[3,7];case 5:return t=r.sent(),[4,this._transaction.clear()];case 6:throw r.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Un.collectionNotReady;case 9:return[2]}})})},e.prototype.removeIf=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,d,f,m,p,E,_,b=this;return I(this,function(C){switch(C.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:C.sent(),C.label=2;case 2:return C.trys.push([2,13,,14]),t=n.where,r=t===void 0?{}:t,i=n.index,a=i===void 0?null:i,s=n.backward,o=s!==void 0&&s,l=[],[4,new EE({condition:r,blockManager:this._blockManager,backward:o,indexer:this._getIndexerBy(a)}).each(function(y){return A(b,void 0,void 0,function(){var T,N;return I(this,function(w){if(y.error)throw y.stop(),y.error;return y.hasNext?(T=y.nextValue,Ku(r,T)&&(N=T[this.keyName],l.push(N)),y.next()):y.stop(),[2]})})})];case 3:C.sent(),C.label=4;case 4:C.trys.push([4,9,10,11]),u=Ge(l),d=u.next(),C.label=5;case 5:return d.done?[3,8]:(f=d.value,[4,this._requestRemove(f)]);case 6:C.sent(),C.label=7;case 7:return d=u.next(),[3,5];case 8:return[3,11];case 9:return m=C.sent(),E={error:m},[3,11];case 10:try{d&&!d.done&&(_=u.return)&&_.call(u)}finally{if(E)throw E.error}return[7];case 11:return[4,this._transaction.commit()];case 12:return C.sent(),this._mutex.unlock(),[2,l];case 13:throw p=C.sent(),this._mutex.unlock(),p;case 14:return[3,16];case 15:throw this._transaction.clear(),Un.collectionNotReady;case 16:return[2]}})})},e.prototype.clear=function(){return A(this,void 0,void 0,function(){var n;return I(this,function(t){switch(t.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this._requestClear()];case 3:return t.sent(),[4,this._transaction.commit()];case 4:return t.sent(),this._mutex.unlock(),[3,7];case 5:return n=t.sent(),[4,this._transaction.clear()];case 6:throw t.sent(),this._mutex.unlock(),n;case 7:return[3,9];case 8:throw Un.collectionNotReady;case 9:return[2]}})})},e.prototype.getBlob=function(n){return A(this,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return[4,this._blobContainer.get(n)];case 1:return[2,t.sent()]}})})},e.prototype.saveBlob=function(n,t){return A(this,void 0,void 0,function(){return I(this,function(r){switch(r.label){case 0:return[4,this._blobContainer.save(n,t)];case 1:return[2,r.sent()]}})})},e.prototype.removeBlob=function(n){return A(this,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return[4,this._blobContainer.remove(n)];case 1:return t.sent(),[2]}})})},e.prototype.removeAllBlobs=function(){return A(this,void 0,void 0,function(){return I(this,function(n){switch(n.label){case 0:return[4,this._blobContainer.clear()];case 1:return n.sent(),[2]}})})},e}(),y_="[NESTDB]",am=!0,Su=function(){function e(){}return e.off=function(){am=!1},e.log=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];am&&console.log.apply(console,Nt(["".concat(y_,"[LOG]")],ut(n),!1))},e.warning=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];am&&console.warn.apply(console,Nt(["".concat(y_,"[WARNING]")],ut(n),!1))},e.error=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];am&&console.error.apply(console,Nt(["".concat(y_,"[ERROR]")],ut(n),!1))},e}(),M6=[{},{a:700400,n:"error"}],Gp=function(){function e(n){var t,r,i;this.encryption=(t=n.encryption)!==null&&t!==void 0?t:Qw,this.itemSizeLimit=(r=n.itemSizeLimit)!==null&&r!==void 0?r:4194304,this.metadataBuffer=(i=n.metadataBuffer)!==null&&i!==void 0?i:256}return Object.defineProperty(e.prototype,"_encryptionCheckKey",{get:function(){return"".concat(this.dbname,".encrypt")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_reservedKeys",{get:function(){return[this._encryptionCheckKey]},enumerable:!1,configurable:!0}),e.prototype._getRawKey=function(n,t){return t===void 0&&(t=""),"".concat(n).concat(t)},e.prototype._generateShardPostfixArray=function(n){return n===void 0&&(n=1),Nt([],ut(Array(n).keys()),!1)},e.prototype._shardify=function(n){var t=this,r=n.key,i=n.value,a=JSON.stringify(this.encryption.encrypt(i)),s=Math.ceil(a.length/this.adjustedItemSizeLimit);return this._generateShardPostfixArray(s).map(function(o){var l={key:t._getRawKey(r,".".concat(o)),data:a.substring(o*t.adjustedItemSizeLimit,(o+1)*t.adjustedItemSizeLimit)};return o===0&&(l.metadata={shards:s}),l})},e.prototype._resetIfEncryptionChanged=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a,s,o,l,u,d=this;return I(this,function(f){switch(f.label){case 0:return[4,this.get(this._encryptionCheckKey)];case 1:if(n=f.sent(),t={encrypted:M6.map(function(m){var p;return(p=d.encryption)===null||p===void 0?void 0:p.encrypt(m)})},!n)return[3,8];if(!n.encrypted||!Array.isArray(n.encrypted))return[3,6];for(a in r=n.encrypted,i=[],r)i.push(a);s=0,f.label=2;case 2:return s<i.length?(a=i[s])in r?(o=a,l=JSON.stringify(n.encrypted[o]),u=JSON.stringify(t.encrypted[o]),l===u?[3,4]:(Su.warning("Encryption algorithm has changed. Stored data would be cleared."),[4,this.clear()])):[3,4]:[3,5];case 3:return f.sent(),[3,5];case 4:return s++,[3,2];case 5:return[3,8];case 6:return[4,this.clear()];case 7:f.sent(),f.label=8;case 8:return[4,this.set({key:this._encryptionCheckKey,value:t})];case 9:return f.sent(),[2]}})})},Object.defineProperty(e.prototype,"adjustedItemSizeLimit",{get:function(){return Math.max(this.itemSizeLimit-this.metadataBuffer,4)},enumerable:!1,configurable:!0}),e.prototype.usage=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a,s,o,l,u;return I(this,function(d){switch(d.label){case 0:return n=0,[4,this._getAllRawKeys()];case 1:t=d.sent(),d.label=2;case 2:d.trys.push([2,7,8,9]),r=Ge(t),i=r.next(),d.label=3;case 3:return i.done?[3,6]:(a=i.value,[4,this._getRaw(a)]);case 4:(s=d.sent())&&(n+=JSON.stringify(s).length),d.label=5;case 5:return i=r.next(),[3,3];case 6:return[3,9];case 7:return o=d.sent(),l={error:o},[3,9];case 8:try{i&&!i.done&&(u=r.return)&&u.call(r)}finally{if(l)throw l.error}return[7];case 9:return[2,n]}})})},e.prototype.getAllKeys=function(){return A(this,void 0,void 0,function(){var n=this;return I(this,function(t){switch(t.label){case 0:return[4,this._getAllRawKeys()];case 1:return[2,t.sent().filter(function(r){return r.endsWith(".0")}).map(function(r){return r.replace(/\.0$/,"")}).filter(function(r){return!n._reservedKeys.includes(r)})]}})})},e.prototype.get=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l=this;return I(this,function(u){switch(u.label){case 0:return t=this._getRawKey(n,".0"),[4,this._getRaw(t)];case 1:if(!(r=u.sent()))return[3,7];u.label=2;case 2:return u.trys.push([2,6,,7]),i=r.data,(a=r.metadata)!=null&&a.shards&&a.shards>1?[4,Promise.all(this._generateShardPostfixArray(a==null?void 0:a.shards).map(function(d){return A(l,void 0,void 0,function(){var f,m;return I(this,function(p){switch(p.label){case 0:return d>0?(f=this._getRawKey(n,".".concat(d)),[4,this._getRaw(f)]):[3,2];case 1:if(!(m=p.sent()))throw Un.storeBrokenIntegrity;return[2,m.data];case 2:return[2,i]}})})}))]:[3,4];case 3:return o=u.sent(),[3,5];case 4:o=[i],u.label=5;case 5:return s=o,[2,this.encryption.decrypt(JSON.parse(s.join("")))];case 6:return u.sent(),[2,null];case 7:return[2,null]}})})},e.prototype.set=function(n){return A(this,void 0,void 0,function(){var t;return I(this,function(r){switch(r.label){case 0:return t=this._shardify(n),[4,this._setRaw(t)];case 1:return r.sent(),[2,Y({},n.value)]}})})},e.prototype.setMany=function(n){return A(this,void 0,void 0,function(){var t,r=this;return I(this,function(i){switch(i.label){case 0:return t=[],[4,this._setRaw(t.concat.apply(t,Nt([],ut(n.map(function(a){return r._shardify(a)})),!1)))];case 1:return i.sent(),[2,n.map(function(a){return a.value})]}})})},e.prototype.remove=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o=this;return I(this,function(l){switch(l.label){case 0:return t=this._getRawKey(n,".0"),[4,this._getRaw(t)];case 1:return(r=l.sent())?(i=r.metadata,a=this._generateShardPostfixArray(i==null?void 0:i.shards).map(function(u){return o._getRawKey(n,".".concat(u))}),[4,this._removeRaw(a)]):[3,3];case 2:return l.sent(),(s=ta.get(this.dbname))==null||s.remove(n),[2,!0];case 3:return[2,!1]}})})},e.prototype.removeMany=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,d,f,m=this;return I(this,function(p){switch(p.label){case 0:t=ta.get(this.dbname),r=[],i=function(E){var _,b,C;return I(this,function(y){switch(y.label){case 0:return _=a._getRawKey(E,".0"),[4,a._getRaw(_)];case 1:return(b=y.sent())&&(C=b.metadata,r.push.apply(r,Nt([],ut(a._generateShardPostfixArray(C==null?void 0:C.shards).map(function(T){return m._getRawKey(E,".".concat(T))})),!1))),t==null||t.remove(E),[2]}})},a=this,p.label=1;case 1:p.trys.push([1,6,7,8]),s=Ge(n),o=s.next(),p.label=2;case 2:return o.done?[3,5]:(l=o.value,[5,i(l)]);case 3:p.sent(),p.label=4;case 4:return o=s.next(),[3,2];case 5:return[3,8];case 6:return u=p.sent(),d={error:u},[3,8];case 7:try{o&&!o.done&&(f=s.return)&&f.call(s)}finally{if(d)throw d.error}return[7];case 8:return r.length>0?[4,this._removeRaw(r)]:[3,10];case 9:p.sent(),p.label=10;case 10:return[2,n]}})})},e.prototype.clear=function(){return A(this,void 0,void 0,function(){var n;return I(this,function(t){return(n=ta.get(this.dbname))==null||n.clearForDatabase(this.dbname),[2]})})},e}(),Qi={},Lu=function(e){function n(t){t===void 0&&(t={});var r,i=this;i=e.call(this,Y(Y({},t),{itemSizeLimit:(r=t.itemSizeLimit)!==null&&r!==void 0?r:4194304}))||this;var a=t.delay,s=a===void 0?1:a;return i.delay=s,i.observer={},i}return z(n,e),Object.defineProperty(n.prototype,"rawData",{get:function(){return Qi[this.dbname]},set:function(t){Qi[this.dbname]=t},enumerable:!1,configurable:!0}),n.prototype._getAllRawKeys=function(){return A(this,void 0,void 0,function(){return I(this,function(t){if(Qi[this.dbname])return[2,Object.keys(Qi[this.dbname])];throw Un.storeNotAvailable})})},n.prototype._getRaw=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){switch(r.label){case 0:return Qi[this.dbname]?[4,rm(this.delay)]:[3,2];case 1:return r.sent(),[2,Qi[this.dbname][t]?Y({key:t},Qi[this.dbname][t]):null];case 2:throw Un.storeNotAvailable}})})},n.prototype._setRaw=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u,d;return I(this,function(f){switch(f.label){case 0:return Qi[this.dbname]?[4,rm(this.delay)]:[3,2];case 1:f.sent();try{for(r=Ge(t),i=r.next();!i.done;i=r.next())a=i.value,s=a.key,o=a.data,l=a.metadata,Qi[this.dbname][s]=Object.freeze({data:o,metadata:l})}catch(m){u={error:m}}finally{try{i&&!i.done&&(d=r.return)&&d.call(r)}finally{if(u)throw u.error}}return[3,3];case 2:throw Un.storeNotAvailable;case 3:return[2]}})})},n.prototype._removeRaw=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o;return I(this,function(l){switch(l.label){case 0:return Qi[this.dbname]?[4,rm(this.delay)]:[3,2];case 1:l.sent();try{for(r=Ge(t),i=r.next();!i.done;i=r.next())a=i.value,Qi[this.dbname][a]&&delete Qi[this.dbname][a]}catch(u){s={error:u}}finally{try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(s)throw s.error}}return[3,3];case 2:throw Un.storeNotAvailable;case 3:return[2]}})})},n.prototype.observe=function(t,r,i){var a=this;this.observer[t]||(this.observer[t]={}),r.forEach(function(s){return a.observer[t][s]=i})},n.prototype.checkAvailability=function(){return A(this,void 0,void 0,function(){return I(this,function(t){return[2]})})},n.prototype.init=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){switch(r.label){case 0:return this.dbname=t,Qi[this.dbname]||(Qi[this.dbname]={}),[4,this._resetIfEncryptionChanged()];case 1:return r.sent(),[2]}})})},n.prototype.set=function(t){return A(this,void 0,void 0,function(){var r,i;return I(this,function(a){if((r=this.observer[t.key])&&typeof r.set=="function"&&(i=r.set()))throw i;return[2,e.prototype.set.call(this,t)]})})},n.prototype.setMany=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u;return I(this,function(d){try{for(r=Ge(t),i=r.next();!i.done;i=r.next())if(a=i.value,(s=this.observer[a.key])&&typeof s.set=="function"&&(o=s.set()))throw o}catch(f){l={error:f}}finally{try{i&&!i.done&&(u=r.return)&&u.call(r)}finally{if(l)throw l.error}}return[2,e.prototype.setMany.call(this,t)]})})},n.prototype.clear=function(){return A(this,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return[4,e.prototype.clear.call(this)];case 1:return t.sent(),[4,rm(this.delay)];case 2:return t.sent(),Qi[this.dbname]={},[2]}})})},n}(Gp),BM="NestDBStore";(function(e){e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.OPENING=1]="OPENING",e[e.OPEN=2]="OPEN",e[e.CLOSED=3]="CLOSED"})(Ts||(Ts={}));var $s,N6=function(e){function n(t){t===void 0&&(t={});var r,i=this;return(i=e.call(this,Y(Y({},t),{itemSizeLimit:(r=t.itemSizeLimit)!==null&&r!==void 0?r:104857600}))||this)._storeName=BM,i._state=Ts.UNINITIALIZED,i._openJobQueue=[],i._window=typeof window<"u"?window:void 0,i._indexedDb=i._window?i._window.indexedDB||i._window.mozIndexedDB||i._window.webkitIndexedDB||i._window.msIndexedDB:void 0,i}return z(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),n.prototype.isTransactionInactiveError=function(t){return t instanceof Error&&t.message.includes("The transaction is inactive")},n.prototype._putToObjectStore=function(t,r){return A(this,void 0,void 0,function(){return I(this,function(i){return[2,new Promise(function(a,s){var o=t.put(r);o.addEventListener("success",function(l){a(l.target.result)}),o.addEventListener("error",function(){s("Failed to write.")})})]})})},n.prototype._deleteFromObjectStore=function(t,r){return A(this,void 0,void 0,function(){return I(this,function(i){return[2,new Promise(function(a,s){var o=t.delete(r);o.addEventListener("success",function(){return a(r)}),o.addEventListener("error",function(l){return s(l.target.error)})})]})})},n.prototype._openDatabase=function(t){var r=this;return new Promise(function(i,a){if(r._indexedDb){r._state=Ts.OPENING;var s=r._indexedDb.open(t);s.addEventListener("upgradeneeded",function(o){o.target.result.createObjectStore(BM,{keyPath:"key"})}),s.addEventListener("success",function(o){r._state=Ts.OPEN,r._database=o.target.result,r._openJobQueue.forEach(function(l){return l()}),r._openJobQueue=[],r._database.onclose=function(){r._database=void 0,r._state=Ts.OPENING,setTimeout(function(){r._openDatabase(t)},5)},i(r._database)}),s.addEventListener("error",function(o){r._state=Ts.UNINITIALIZED,a(o.target.error)})}else a(Un.storeNotAvailable)})},n.prototype._getObjectStore=function(t){return A(this,void 0,void 0,function(){var r=this;return I(this,function(i){switch(i.label){case 0:return this._database?[2,this._database.transaction(this._storeName,t).objectStore(this._storeName)]:[3,1];case 1:switch(this._state){case Ts.UNINITIALIZED:case Ts.OPEN:return[3,2];case Ts.OPENING:case Ts.CLOSED:return[3,3]}return[3,4];case 2:throw Un.storeNotInitialized;case 3:return[2,new Promise(function(a){r._openJobQueue.push(function(){return a(r._getObjectStore(t))})})];case 4:return[4,this._getObjectStore(t)];case 5:return[2,i.sent()]}})})},n.prototype._getAllRawKeys=function(){return A(this,void 0,void 0,function(){var t;return I(this,function(r){switch(r.label){case 0:return[4,this._getObjectStore("readonly")];case 1:return t=r.sent(),[4,new Promise(function(i,a){var s=t.getAllKeys();s.addEventListener("success",function(o){i(o.target.result)}),s.addEventListener("error",function(o){return a(o.target.error)})})];case 2:return[2,r.sent()]}})})},n.prototype._getRaw=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){switch(i.label){case 0:return[4,this._getObjectStore("readonly")];case 1:return r=i.sent(),[4,new Promise(function(a,s){var o=r.get(t);o.addEventListener("success",function(l){var u;a((u=l==null?void 0:l.target)===null||u===void 0?void 0:u.result)}),o.addEventListener("error",function(l){return s(l.target.error)})})];case 2:return[2,i.sent()]}})})},n.prototype._setRaw=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u,d,f=this;return I(this,function(m){switch(m.label){case 0:return[4,this._getObjectStore("readwrite")];case 1:r=m.sent(),m.label=2;case 2:return m.trys.push([2,4,,15]),[4,Promise.all(t.map(function(p){return f._putToObjectStore(r,p)}))];case 3:return m.sent(),[3,15];case 4:if(i=m.sent(),!this.isTransactionInactiveError(i))return[3,13];m.label=5;case 5:m.trys.push([5,10,11,12]),a=Ge(t),s=a.next(),m.label=6;case 6:return s.done?[3,9]:(o=s.value,[4,this._putToObjectStore(r,o)]);case 7:m.sent(),m.label=8;case 8:return s=a.next(),[3,6];case 9:return[3,12];case 10:return l=m.sent(),u={error:l},[3,12];case 11:try{s&&!s.done&&(d=a.return)&&d.call(a)}finally{if(u)throw u.error}return[7];case 12:return[3,14];case 13:throw i;case 14:return[3,15];case 15:return[2]}})})},n.prototype._removeRaw=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u,d,f=this;return I(this,function(m){switch(m.label){case 0:return[4,this._getObjectStore("readwrite")];case 1:r=m.sent(),m.label=2;case 2:return m.trys.push([2,4,,15]),[4,Promise.all(t.map(function(p){return f._deleteFromObjectStore(r,p)}))];case 3:return m.sent(),[3,15];case 4:if(i=m.sent(),!this.isTransactionInactiveError(i))return[3,13];m.label=5;case 5:m.trys.push([5,10,11,12]),a=Ge(t),s=a.next(),m.label=6;case 6:return s.done?[3,9]:(o=s.value,[4,this._deleteFromObjectStore(r,o)]);case 7:m.sent(),m.label=8;case 8:return s=a.next(),[3,6];case 9:return[3,12];case 10:return l=m.sent(),u={error:l},[3,12];case 11:try{s&&!s.done&&(d=a.return)&&d.call(a)}finally{if(u)throw u.error}return[7];case 12:return[3,14];case 13:throw i;case 14:return[3,15];case 15:return[2]}})})},n.prototype._triggerDatabaseClose=function(){this._database&&this._database.onclose&&this._database.onclose(new Event("dummy"))},n.prototype.checkAvailability=function(){return A(this,void 0,void 0,function(){var t,r=this;return I(this,function(i){switch(i.label){case 0:if(!((t=typeof window<"u"?window:null)!=null&&t.indexedDB||t!=null&&t.mozIndexedDB||t!=null&&t.webkitIndexedDB||t!=null&&t.msIndexedDB))return[3,6];if(this._indexedDb=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB,!this._window||!lp())return[3,4];if(!(lp()&&navigator.userAgent&&navigator.userAgent.includes("Edge/")))return[3,1];if(!this._window.indexedDB&&(t.PointerEvent||t.MSPointerEvent))throw Un.storeNotAvailableInPrivateBrowsing;return[3,3];case 1:return[4,new Promise(function(a,s){if(r._indexedDb)try{var o=r._indexedDb.open("_testMozilla");o.onerror=function(){return s(Un.storeNotAvailableInPrivateBrowsing)},o.onsuccess=function(l){if(l.target.result.close(),r._indexedDb){var u=r._indexedDb.deleteDatabase("_testMozilla");u.onerror=function(){return a()},u.onsuccess=function(){return a()}}else s(Un.storeNotAvailable)}}catch{s(Un.storeNotAvailableInPrivateBrowsing)}else s(Un.storeNotAvailable)})];case 2:i.sent(),i.label=3;case 3:return[3,5];case 4:throw Un.storeNotAvailable;case 5:return[3,7];case 6:throw Un.storeNotAvailable;case 7:return[2]}})})},n.prototype.init=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){switch(r.label){case 0:return this.dbname=t,[4,this.checkAvailability()];case 1:return r.sent(),[4,this._openDatabase(t)];case 2:return r.sent(),[4,this._resetIfEncryptionChanged()];case 3:return r.sent(),[2]}})})},n.prototype.clear=function(){return A(this,void 0,void 0,function(){var t;return I(this,function(r){switch(r.label){case 0:return[4,e.prototype.clear.call(this)];case 1:return r.sent(),[4,this._getObjectStore("readwrite")];case 2:return t=r.sent(),[4,new Promise(function(i,a){var s=t.clear();s.addEventListener("success",function(){return i()}),s.addEventListener("error",function(o){return a(o.target.error)})})];case 3:return[2,r.sent()]}})})},n}(Gp),I6=function(e){function n(t){var r=this,i=t.AsyncStorage,a=t.itemSizeLimit,s=a===void 0?2097152:a,o=ik(t,["AsyncStorage","itemSizeLimit"]);return(r=e.call(this,Y(Y({},o),{itemSizeLimit:s}))||this)._asyncStorage=i,r}return z(n,e),n.prototype._isBelonging=function(t){return t.startsWith("".concat(this.dbname,"/"))},n.prototype._getActualKey=function(t){return"".concat(this.dbname,"/").concat(t)},n.prototype._getAllRawKeys=function(){return A(this,void 0,void 0,function(){var t,r=this;return I(this,function(i){switch(i.label){case 0:return[4,this._asyncStorage.getAllKeys()];case 1:return t=i.sent(),[2,t.filter(function(a){return r._isBelonging(a)}).map(function(a){return a.substring("".concat(r.dbname,"/").length)})]}})})},n.prototype._getRaw=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){switch(i.label){case 0:return[4,this._asyncStorage.getItem(this._getActualKey(t))];case 1:return[2,(r=i.sent())?JSON.parse(r):null]}})})},n.prototype._setRaw=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u;return I(this,function(d){switch(d.label){case 0:r=[];try{for(i=Ge(t),a=i.next();!a.done;a=i.next())s=a.value,o=s.key,s.data.length<=this.adjustedItemSizeLimit&&r.push([this._getActualKey(o),JSON.stringify(s)])}catch(f){l={error:f}}finally{try{a&&!a.done&&(u=i.return)&&u.call(i)}finally{if(l)throw l.error}}return[4,this._asyncStorage.multiSet(r)];case 1:return d.sent(),[2]}})})},n.prototype._removeRaw=function(t){return A(this,void 0,void 0,function(){var r=this;return I(this,function(i){switch(i.label){case 0:return[4,this._asyncStorage.multiRemove(t.map(function(a){return r._getActualKey(a)}))];case 1:return i.sent(),[2]}})})},n.prototype.checkAvailability=function(){return A(this,void 0,void 0,function(){return I(this,function(t){if(!this._asyncStorage)throw Un.storeNotAvailable;return[2]})})},n.prototype.init=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){switch(r.label){case 0:return this.dbname=t,[4,this._resetIfEncryptionChanged()];case 1:return r.sent(),[2]}})})},n.prototype.clear=function(){return A(this,void 0,void 0,function(){var t;return I(this,function(r){switch(r.label){case 0:return[4,e.prototype.clear.call(this)];case 1:return r.sent(),[4,this.getAllKeys()];case 2:return t=r.sent(),[4,this.removeMany(t)];case 3:return r.sent(),[2]}})})},n}(Gp),A6=function(e){function n(t){var r,i=this;return(i=e.call(this,Y(Y({},t),{itemSizeLimit:(r=t.itemSizeLimit)!==null&&r!==void 0?r:6291456}))||this)._mmkv=t.MMKV,i}return z(n,e),n.prototype._isBelonging=function(t){return t.startsWith("".concat(this.dbname,"/"))},n.prototype._getActualKey=function(t){return"".concat(this.dbname,"/").concat(t)},n.prototype._getAllRawKeys=function(){return A(this,void 0,void 0,function(){var t,r=this;return I(this,function(i){switch(i.label){case 0:return[4,this._mmkv.getAllKeys()];case 1:return t=i.sent(),[2,t.filter(function(a){return r._isBelonging(a)}).map(function(a){return a.substring("".concat(r.dbname,"/").length)})]}})})},n.prototype._getRaw=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){switch(i.label){case 0:return[4,this._mmkv.getString(this._getActualKey(t))];case 1:return[2,(r=i.sent())?JSON.parse(r):null]}})})},n.prototype._setRaw=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l;return I(this,function(u){try{for(r=Ge(t),i=r.next();!i.done;i=r.next())a=i.value,s=a.key,a.data.length<=this.adjustedItemSizeLimit&&this._mmkv.set(this._getActualKey(s),JSON.stringify(a))}catch(d){o={error:d}}finally{try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(o)throw o.error}}return[2]})})},n.prototype._removeRaw=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o;return I(this,function(l){try{for(r=Ge(t),i=r.next();!i.done;i=r.next())a=i.value,this._mmkv.delete(this._getActualKey(a))}catch(u){s={error:u}}finally{try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(s)throw s.error}}return[2]})})},n.prototype.checkAvailability=function(){return A(this,void 0,void 0,function(){return I(this,function(t){if(!this._mmkv)throw Un.storeNotAvailable;return[2]})})},n.prototype.init=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){switch(r.label){case 0:return this.dbname=t,[4,this._resetIfEncryptionChanged()];case 1:return r.sent(),[2]}})})},n.prototype.clear=function(){return A(this,void 0,void 0,function(){var t;return I(this,function(r){switch(r.label){case 0:return[4,e.prototype.clear.call(this)];case 1:return r.sent(),[4,this.getAllKeys()];case 2:return t=r.sent(),[4,this.removeMany(t)];case 3:return r.sent(),[2]}})})},n}(Gp);(function(e){e.INIT="INIT",e.OPENING="OPENING",e.OPENED="OPENED",e.CLOSED="CLOSED"})($s||($s={}));var wo,w6=function(){function e(n){var t=n.name,r=n.version,i=n.store,a=n.config;this.name=t,this._version=r,this._state=$s.INIT,this._config=a||new Pf({dbname:t}),this._store=i,this._event={success:Gh,error:Gh,storeReplaced:Gh,upgrade:kM},this._collections=new Map,this._globalMutex=new Pb("".concat(this.name,".lock")),this._config.disableLogger&&Su.off(),new ta({dbname:t,limit:this._config.cacheLimit})}return Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"store",{get:function(){return this._store},enumerable:!1,configurable:!0}),e.prototype._initializeCollection=function(n,t){var r;return A(this,void 0,void 0,function(){var i,a,s;return I(this,function(o){switch(o.label){case 0:return a=this._collections.get(n),t?(i=new E_({dbname:this.name,collectionName:n,keyName:t.keyName,indexes:(r=t.index)!==null&&r!==void 0?r:[[t.keyName]],store:this._store}),[3,3]):[3,1];case 1:return a&&a.state===ju.READY?[3,3]:[4,E_.metadataOf(this.name,n,this._store)];case 2:(s=o.sent())&&(i=new E_({dbname:this.name,collectionName:n,keyName:s.keyName,indexes:s.indexes,store:this._store})),o.label=3;case 3:return i?(this._collections.set(n,i),[4,i.init()]):[3,5];case 4:o.sent(),o.label=5;case 5:return[2]}})})},e.prototype.estimateUsage=function(){return A(this,void 0,void 0,function(){return I(this,function(n){switch(n.label){case 0:return[4,(t=this._store,A(void 0,void 0,void 0,function(){return I(this,function(r){switch(r.label){case 0:return[4,t.usage()];case 1:return[2,r.sent()]}})}))];case 1:return[2,n.sent()]}var t})})},e.prototype.commitSchema=function(n){return A(this,void 0,void 0,function(){var t=this;return I(this,function(r){switch(r.label){case 0:return this._state!==$s.OPENING?[3,2]:[4,Promise.all(n.map(function(i){return A(t,void 0,void 0,function(){return I(this,function(a){switch(a.label){case 0:return[4,this._initializeCollection(i.collectionName,i)];case 1:return a.sent(),[2]}})})}))];case 1:return r.sent(),[3,3];case 2:throw Un.databaseSchemaNotOnUpgrade;case 3:return[2]}})})},e.prototype.open=function(){var n;return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,d,f,m=this;return I(this,function(p){switch(p.label){case 0:return[4,this._globalMutex.lock()];case 1:if(p.sent(),this._state===$s.OPENED)return[3,20];this._state=$s.OPENING,p.label=2;case 2:return p.trys.push([2,13,,20]),[4,this._store.init(this.name)];case 3:return p.sent(),E=this.name,t="".concat(kb(E),".metadata"),r={version:0,collectionNames:[]},[4,this._store.get(t)];case 4:i=(n=p.sent())!==null&&n!==void 0?n:r,p.label=5;case 5:p.trys.push([5,10,11,12]),a=Ge(i.collectionNames),s=a.next(),p.label=6;case 6:return s.done?[3,9]:(o=s.value,[4,this._initializeCollection(o)]);case 7:p.sent(),p.label=8;case 8:return s=a.next(),[3,6];case 9:return[3,12];case 10:return l=p.sent(),d={error:l},[3,12];case 11:try{s&&!s.done&&(f=a.return)&&f.call(a)}finally{if(d)throw d.error}return[7];case 12:return[2,new Promise(function(_,b){var C=function(T){i.version<m._version?m._event.upgrade(i.version,function(N){return A(m,void 0,void 0,function(){var w;return I(this,function(O){switch(O.label){case 0:if(N)return[3,5];i.version++,i.collectionNames=Array.from(this._collections.keys()),O.label=1;case 1:return O.trys.push([1,3,,4]),[4,this._store.set({key:t,value:i})];case 2:return O.sent(),T({continued:!0}),[3,4];case 3:return w=O.sent(),T({continued:!1,err:w}),[3,4];case 4:return[3,6];case 5:T({continued:!1,err:N}),O.label=6;case 6:return[2]}})})}):T({continued:!1})},y=function(T){var N=T.continued,w=N!==void 0&&N,O=T.err,L=O===void 0?null:O;w?setTimeout(function(){return C(y)},10):L?(Su.error(L.message),m._globalMutex.unlock(),m._event.error(L),b(L)):Promise.all(i.collectionNames.map(function(P){return m._initializeCollection(P)})).then(function(){m._state=$s.OPENED,m._globalMutex.unlock(),m._event.success(),_()}).catch(function(P){Su.error(P.message),m._globalMutex.unlock(),m._event.error(P),b(P)})};C(y)})];case 13:switch(u=p.sent(),u.code){case ir.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING:return[3,14];case ir.STORE_NOT_AVAILABLE:return[3,16]}return[3,18];case 14:return Su.warning("Access to the local storage is not allowed. Switched to MemoryStore automatically."),this._store=new Lu({}),this._globalMutex.unlock(),this._event.error(u),this._event.storeReplaced(this._store),[4,this.open()];case 15:return p.sent(),[3,19];case 16:return Su.warning("IndexedDB is not available in this environment. Switched to MemoryStore automatically. Consider using other store to save data persistently (e.g. AsyncStorage)."),this._store=new Lu({}),this._globalMutex.unlock(),this._event.error(u),this._event.storeReplaced(this._store),[4,this.open()];case 17:return p.sent(),[3,19];case 18:throw Su.error(u.message),this._globalMutex.unlock(),this._event.error(u),u;case 19:return[3,20];case 20:return[2]}var E})})},e.prototype.close=function(){this._collections.forEach(function(n){return n.close()}),this._state=$s.CLOSED},e.prototype.clear=function(){return A(this,void 0,void 0,function(){return I(this,function(n){switch(n.label){case 0:return[4,Promise.all(Array.from(this._collections.values()).map(function(t){return t.clear()}))];case 1:return n.sent(),[2]}})})},e.prototype.reset=function(){return A(this,void 0,void 0,function(){var n;return I(this,function(t){switch(t.label){case 0:return(n=ta.get(this.name))&&n.clearForDatabase(this.name),[4,this._store.clear()];case 1:return t.sent(),[2]}})})},e.prototype.on=function(n,t){this._event[n]=t},e.prototype.off=function(n){typeof this._event[n]=="function"&&(n==="upgrade"?this._event[n]=kM:this._event[n]=Gh)},e.prototype.collection=function(n){var t=this._collections.get(n);if(t)return t;throw Un.collectionNotReady},e}();(function(e){e[e.VERBOSE=0]="VERBOSE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.NONE=5]="NONE"})(wo||(wo={}));var ii,bR=function(){function e(){this.level=wo.WARN}return e.prototype.verbose=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this.level<=wo.VERBOSE&&console.log.apply(console,Nt(["[verbose]"],ut(n),!1))},e.prototype.debug=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this.level<=wo.DEBUG&&console.log.apply(console,Nt(["[debug]"],ut(n),!1))},e.prototype.info=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this.level<=wo.INFO&&console.log.apply(console,Nt(["[info]"],ut(n),!1))},e.prototype.warn=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this.level<=wo.WARN&&console.warn.apply(console,Nt(["[warn]"],ut(n),!1))},e.prototype.error=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this.level<=wo.ERROR&&console.error.apply(console,Nt(["[error]"],ut(n),!1))},e}(),to=function(){function e(n){var t,r,i,a;this.messageTypeFilter=(t=n==null?void 0:n.messageTypeFilter)!==null&&t!==void 0?t:mi.ALL,this.customTypesFilter=(r=n==null?void 0:n.customTypesFilter)!==null&&r!==void 0?r:null,this.senderUserIdsFilter=(i=n==null?void 0:n.senderUserIdsFilter)!==null&&i!==void 0?i:null,this.replyType=(a=n==null?void 0:n.replyType)!==null&&a!==void 0?a:Ir.NONE}return e.prototype.clone=function(){var n=new e,t=JSON.parse(JSON.stringify(this));return Object.keys(t).forEach(function(r){n[r]=t[r]}),n},e.prototype.match=function(n){switch(this.messageTypeFilter){case mi.USER:if(n.messageType!==Zn.USER)return!1;break;case mi.FILE:if(n.messageType!==Zn.FILE)return!1;break;case mi.ADMIN:if(n.messageType!==Zn.ADMIN)return!1}if(this.customTypesFilter&&this.customTypesFilter.length>0&&!this.customTypesFilter.includes("*")&&!this.customTypesFilter.includes(n.customType)||this.senderUserIdsFilter&&this.senderUserIdsFilter.length>0&&(!(n instanceof fr)||!this.senderUserIdsFilter.includes(n.sender.userId)))return!1;if(n instanceof Mi)switch(this.replyType){case Ir.NONE:if(n.parentMessageId>0)return!1;break;case Ir.ONLY_REPLY_TO_CHANNEL:if(n instanceof fr&&n.parentMessageId>0&&!n.replyToChannel)return!1}return!0},e}();(function(e){e.CHANNEL_LATEST="channel_latest",e.NEWEST_CHILD_MESSAGE="newest_child_message"})(ii||(ii={}));var uf,Qs=function(e){switch(e){case ii.CHANNEL_LATEST:return["channelUrl","-createdAt","-messageId"];case ii.NEWEST_CHILD_MESSAGE:return["channelUrl","-parentMessageId","-createdAt","-messageId"]}},R6=function(){return["channelUrl","-createdAt","-notificationId"]},O6=Y(Y({},tR),{scheduledAt:void 0}),L6=function(e){return rR(e)&&Z("number",e.scheduledAt,!0)},U6=Y(Y({},Bp),{scheduledAt:0,file:void 0,fileUrl:void 0,fileName:void 0,mimeType:void 0,fileSize:void 0,thumbnailSizes:void 0,requireAuth:!1}),D6=function(e){return Hp(e)&&Z("number",e.scheduledAt)&&(Vr(e.file)||Z("string",e.fileUrl))&&Z("string",e.fileName,!0)&&Z("string",e.mimeType,!0)&&Z("number",e.fileSize,!0)&&(e.thumbnailSizes===null||e.thumbnailSizes===void 0||e.thumbnailSizes.every(function(n){return Z("object",n)&&n.maxWidth>0&&n.maxHeight>0}))},CR="UnsentMessage",k6="reqId",sm={},tc=function(e){function n(t){var r=e.call(this,t)||this;return r._mutex=new Pb("unsendmessagecache.lock"),sm[t]=r,r}return z(n,e),Object.defineProperty(n.prototype,"_cacheContext",{get:function(){return X.of(this._iid).cacheContext},enumerable:!1,configurable:!0}),n.of=function(t,r){return r===void 0&&(r=!1),sm[t]&&!r||(sm[t]=new n(t)),sm[t]},Object.defineProperty(n.prototype,"collection",{get:function(){var t=this._cacheContext.nestdb,r=t==null?void 0:t.collection(CR);if(!r)throw ee.databaseError;return r},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),n.prototype._serialize=function(t){if(t.messageId>0)throw ee.invalidParameters;var r,i=Y({},t.serialize());return t instanceof fi?(t.messageParams&&(i.messageParams=yM(t.messageParams)),t.scheduledInfo&&t.scheduledInfo.scheduledMessageParams&&(i.scheduledInfo.scheduledMessageParams=(r=t.scheduledInfo.scheduledMessageParams,Y(Y({},yM(r)),{scheduledAt:r.scheduledAt})))):t instanceof Mr?(t.messageParams&&(i.messageParams=bM(t.messageParams)),t.scheduledInfo&&t.scheduledInfo.scheduledMessageParams&&(i.scheduledInfo.scheduledMessageParams=function(a){return Y(Y({},bM(a)),{scheduledAt:a.scheduledAt})}(t.scheduledInfo.scheduledMessageParams))):t instanceof Ba&&t.messageParams&&(i.messageParams=function(a){return Qe({fileInfoList:a.fileInfoList.map(function(s){return{file:s.file,fileUrl:bf.getPlainUrl(s),fileName:s.fileName,fileSize:s.fileSize,mimeType:s.mimeType,thumbnailSizes:s.thumbnailSizes,_thumbnails:s._thumbnails,_uploadedMetaData:s._uploadedMetaData}}),isReplyToChannel:a.isReplyToChannel,pushNotificationDeliveryOption:a.pushNotificationDeliveryOption})}(t.messageParams)),i},n.prototype._deserialize=function(t){return t=Y(Y({},t),{messageId:parseInt(t.messageId)}),xr.of(this._iid).buildMessageFromSerializedData(t)},n.prototype._deserializeWithMessageCreateParams=function(t){var r,i,a;return A(this,void 0,void 0,function(){var s,o,l,u,d,f,m=this;return I(this,function(p){switch(p.label){case 0:return s=xr.of(this._iid),o=this._deserialize(t),t.messageParams?o instanceof fi?(u=t.messageParams,o.messageParams=s.buildUserMessageCreateParamsFromSerializedData(u,o),[3,6]):[3,1]:[3,6];case 1:return o instanceof Mr?(u=t.messageParams).fileKey&&typeof u.fileKey=="string"&&v_((r=u.fileType)!==null&&r!==void 0?r:"")?(l=u,[4,this.collection.getBlob(u.fileKey)]):[3,3]:[3,4];case 2:l.file=(i=p.sent())!==null&&i!==void 0?i:void 0,p.label=3;case 3:return o.messageParams=s.buildFileMessageCreateParamsFromSerializedData(u,o),[3,6];case 4:return o instanceof Ba&&(u=t.messageParams)&&u.fileInfoList?(o.messageParams=s.buildMultipleFilesMessageCreateParamsFromSerializedData(u,o),[4,Promise.all(o.messageParams.fileInfoList.map(function(E){return A(m,void 0,void 0,function(){var _,b,C,y,T;return I(this,function(N){switch(N.label){case 0:return typeof((b=E._uploadedMetaData)===null||b===void 0?void 0:b.fileKey)=="string"&&v_((y=(C=E._uploadedMetaData)===null||C===void 0?void 0:C.fileType)!==null&&y!==void 0?y:"")?(_=E,[4,this.collection.getBlob(E._uploadedMetaData.fileKey)]):[3,2];case 1:_.file=(T=N.sent())!==null&&T!==void 0?T:void 0,N.label=2;case 2:return[2]}})})}))]):[3,6];case 5:p.sent(),p.label=6;case 6:return o.scheduledInfo&&t.scheduledInfo&&t.scheduledInfo.scheduledMessageParams?o instanceof fi?(d=t.scheduledInfo.scheduledMessageParams,o.scheduledInfo.scheduledMessageParams=s.buildScheduledUserMessageCreateParamsFromSerializedData(d,o),[3,10]):[3,7]:[3,10];case 7:return o instanceof Mr?(d=t.scheduledInfo.scheduledMessageParams).fileKey&&typeof d.fileKey=="string"&&typeof d.fileType=="string"&&v_(d.fileType)?(f=d,[4,this.collection.getBlob(d.fileKey)]):[3,9]:[3,10];case 8:f.file=(a=p.sent())!==null&&a!==void 0?a:void 0,p.label=9;case 9:o.scheduledInfo.scheduledMessageParams=s.buildScheduledFileMessageCreateParamsFromSerializedData(d,o),p.label=10;case 10:return[2,o]}})})},n.prototype._getFileInfoBlobKey=function(t,r){return"".concat(t,".").concat(r)},n.prototype.get=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.getByKey("".concat(t))]:[3,2];case 1:if(r=i.sent())return[2,this._deserializeWithMessageCreateParams(r)];i.label=2;case 2:return[2,void 0]}})})},n.prototype.fetch=function(t){var r=t.channelUrl,i=t.filter,a=i===void 0?new to:i,s=t.order,o=s===void 0?ii.CHANNEL_LATEST:s,l=t.sendingStatus,u=t.backward,d=u!==void 0&&u,f=t.parentMessageId;return A(this,void 0,void 0,function(){var m,p,E,_,b=this;return I(this,function(C){switch(C.label){case 0:return this.localCacheEnabled?(m=Qs(o),p={"/where":function(y){return!!(o!==ii.NEWEST_CHILD_MESSAGE||f&&y.parentMessageId!==0&&y.parentMessageId===f)&&a.match(b._deserialize(y))}},r&&(p.channelUrl=r),l&&(p.sendingStatus=l),E={where:p,index:m,backward:d},[4,this.collection.query(E)]):[3,3];case 1:return[4,C.sent().fetch({})];case 2:return _=C.sent(),[2,Promise.all(_.map(function(y){return A(b,void 0,void 0,function(){return I(this,function(T){switch(T.label){case 0:return[4,this._deserializeWithMessageCreateParams(y)];case 1:return[2,T.sent()]}})})}))];case 3:return[2,[]]}})})},n.prototype.getAllChildMessages=function(t,r){return r===void 0&&(r=new to),A(this,void 0,void 0,function(){return I(this,function(i){switch(i.label){case 0:return[4,this.fetch({filter:r,order:ii.NEWEST_CHILD_MESSAGE,channelUrl:t.channelUrl,backward:!1,parentMessageId:t.messageId})];case 1:return[2,i.sent()]}})})},n.prototype.upsert=function(t){return A(this,void 0,void 0,function(){var r=this;return I(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,Promise.all(t.map(function(a){return A(r,void 0,void 0,function(){var s;return I(this,function(o){switch(o.label){case 0:return a instanceof Mr||a instanceof Ba?[4,this._mutex.lock()]:[3,4];case 1:return o.sent(),[4,this.saveBlob(a)];case 2:return o.sent(),[4,this._mutex.unlock()];case 3:o.sent(),o.label=4;case 4:return s=this._serialize(a),[4,this.collection.upsertOne(s)];case 5:return o.sent(),[2]}})})}))]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},n.prototype.upsertChildMessages=function(t){return A(this,void 0,void 0,function(){var r=this;return I(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,Promise.all(t.map(function(a){return A(r,void 0,void 0,function(){var s;return I(this,function(o){switch(o.label){case 0:return s=[],a.threadInfo&&a.threadInfo.replyCount>0?[4,this.getAllChildMessages(a)]:[3,2];case 1:s=o.sent(),o.label=2;case 2:return s.length>0?(s.forEach(function(l){return l.applyParentMessage(a)}),[4,this.upsert(s)]):[3,4];case 3:o.sent(),o.label=4;case 4:return[2]}})})}))]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},n.prototype.remove=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l;return I(this,function(u){switch(u.label){case 0:if(!this.localCacheEnabled)return[3,8];u.label=1;case 1:u.trys.push([1,6,7,8]),r=Ge(t),i=r.next(),u.label=2;case 2:return i.done?[3,5]:(a=i.value,[4,this.collection.remove(a)]);case 3:u.sent(),u.label=4;case 4:return i=r.next(),[3,2];case 5:return[3,8];case 6:return s=u.sent(),o={error:s},[3,8];case 7:try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(o)throw o.error}return[7];case 8:return[2]}})})},n.prototype.removeMessagesOfChannel=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){switch(r.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:t}})]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},n.prototype.clear=function(){return A(this,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},n.prototype.saveBlob=function(t){return A(this,void 0,void 0,function(){var r,i,a,s=this;return I(this,function(o){switch(o.label){case 0:return t instanceof Mr?t.messageParams&&(a=t.messageParams).file&&wm(a.file)?[4,this.collection.saveBlob(a.file,t.reqId)]:[3,2]:[3,5];case 1:i=o.sent(),a.fileKey=i,a.fileType=qu.BLOB,o.label=2;case 2:return t.scheduledInfo&&t.scheduledInfo.scheduledMessageParams&&(r=t.scheduledInfo.scheduledMessageParams).file&&wm(r.file)?[4,this.collection.saveBlob(r.file,t.reqId)]:[3,4];case 3:i=o.sent(),r.fileKey=i,r.fileType=qu.BLOB,o.label=4;case 4:return[3,7];case 5:return t instanceof Ba&&(a=t.messageParams)&&a.fileInfoList&&Array.isArray(a.fileInfoList)?[4,Promise.all(a.fileInfoList.map(function(l,u){return A(s,void 0,void 0,function(){var d;return I(this,function(f){switch(f.label){case 0:return l.file&&wm(l.file)?[4,this.collection.saveBlob(l.file,this._getFileInfoBlobKey(t.reqId,u))]:[3,2];case 1:d=f.sent(),l._uploadedMetaData||(l._uploadedMetaData={}),l._uploadedMetaData.fileKey=d,l._uploadedMetaData.fileType=qu.BLOB,f.label=2;case 2:return[2]}})})}))]:[3,7];case 6:o.sent(),o.label=7;case 7:return[2]}})})},n}(Rr),om={},Vu=function(e){function n(t){var r=e.call(this,t)||this;return om[t]=r,r}return z(n,e),Object.defineProperty(n.prototype,"_sdkState",{get:function(){return X.of(this._iid).sdkState},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_cacheContext",{get:function(){return X.of(this._iid).cacheContext},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_unsentMessageCache",{get:function(){return tc.of(this._iid)},enumerable:!1,configurable:!0}),n.of=function(t,r){return r===void 0&&(r=!1),om[t]&&!r||(om[t]=new n(t)),om[t]},Object.defineProperty(n.prototype,"collection",{get:function(){var t=this._cacheContext.nestdb;return Oe(!!t).throw(ee.databaseError),t.collection(Db)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),n.prototype._serialize=function(t){return Y(Y({},t.serialize()),{messageId:"".concat(t.messageId)})},n.prototype._deserialize=function(t){return t=Y(Y({},t),{messageId:parseInt(t.messageId)}),xr.of(this._iid).buildMessageFromSerializedData(t)},n.prototype.get=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.getByKey("".concat(t))]:[3,2];case 1:if(r=i.sent())return[2,this._deserialize(r)];i.label=2;case 2:return[2,void 0]}})})},n.prototype.fetch=function(t){var r=t.channelUrl,i=t.token,a=t.limit,s=a===void 0?100:a,o=t.filter,l=o===void 0?new to:o,u=t.order,d=u===void 0?ii.CHANNEL_LATEST:u,f=t.backward,m=f!==void 0&&f,p=t.parentMessageId,E=t.isPollOnly,_=E!==void 0&&E,b=t.exactMatch,C=b!==void 0&&b,y=t.inclusive,T=y===void 0||y;return A(this,void 0,void 0,function(){var N,w,O,L=this;return I(this,function(P){switch(P.label){case 0:return this.localCacheEnabled?(N=Qs(d),w={where:{channelUrl:r,"/where":function(U){if(i!=null&&i!=="")switch(d){case ii.CHANNEL_LATEST:if(C&&U.createdAt!==i)return!1;if(m){if(T&&U.createdAt<i||!T&&U.createdAt<=i)return!1}else if(T&&U.createdAt>i||!T&&U.createdAt>=i)return!1;break;case ii.NEWEST_CHILD_MESSAGE:if(!p||U.parentMessageId===0||U.parentMessageId!==p)return!1}return!(_&&!U._poll)&&l.match(L._deserialize(U))}},index:N,backward:m},[4,this.collection.query(w)]):[3,3];case 1:return[4,P.sent().fetch({limit:s??void 0})];case 2:return O=P.sent(),[2,Promise.all(O.map(function(U){return A(L,void 0,void 0,function(){return I(this,function(B){return[2,this._deserialize(U)]})})}))];case 3:return[2,[]]}})})},n.prototype.getAllChildMessages=function(t,r){return r===void 0&&(r=new to),A(this,void 0,void 0,function(){return I(this,function(i){switch(i.label){case 0:return[4,this.fetch({channelUrl:t.channelUrl,token:Date.now(),limit:null,backward:!1,filter:r,order:ii.NEWEST_CHILD_MESSAGE,parentMessageId:t.messageId})];case 1:return[2,i.sent()]}})})},n.prototype.upsert=function(t){var r;return A(this,void 0,void 0,function(){var i,a,s,o,l,u,d,f,m=this;return I(this,function(p){switch(p.label){case 0:return this.localCacheEnabled?[4,this.saveBlobs(t)]:[3,13];case 1:p.sent(),p.label=2;case 2:p.trys.push([2,7,8,9]),i=Ge(t),a=i.next(),p.label=3;case 3:return a.done?[3,6]:(s=a.value,!((r=s.threadInfo)===null||r===void 0)&&r._isUpdateRequired?[4,this.get(s.messageId)]:[3,5]);case 4:(o=p.sent())!=null&&o.threadInfo&&s.threadInfo._updateFrom(o.threadInfo),p.label=5;case 5:return a=i.next(),[3,3];case 6:return[3,9];case 7:return l=p.sent(),d={error:l},[3,9];case 8:try{a&&!a.done&&(f=i.return)&&f.call(i)}finally{if(d)throw d.error}return[7];case 9:return u=t.map(function(E){return m._serialize(E)}),[4,this.collection.upsertMany(u)];case 10:return p.sent(),[4,this.upsertChildMessages(t)];case 11:return p.sent(),[4,this._unsentMessageCache.upsertChildMessages(t)];case 12:p.sent(),p.label=13;case 13:return[2]}})})},n.prototype.upsertChildMessages=function(t){return A(this,void 0,void 0,function(){var r=this;return I(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,Promise.all(t.map(function(a){return A(r,void 0,void 0,function(){var s,o;return I(this,function(l){switch(l.label){case 0:return s=[],!((o=a.threadInfo)===null||o===void 0)&&o.replyCount&&a.threadInfo.replyCount>0?[4,this.getAllChildMessages(a)]:[3,2];case 1:s=l.sent(),l.label=2;case 2:return s.length>0?(s.forEach(function(u){return u.applyParentMessage(a)}),[4,this.upsert(s)]):[3,4];case 3:l.sent(),l.label=4;case 4:return[2]}})})}))]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},n.prototype.remove=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l;return I(this,function(u){switch(u.label){case 0:if(!this.localCacheEnabled)return[3,8];u.label=1;case 1:u.trys.push([1,6,7,8]),r=Ge(t),i=r.next(),u.label=2;case 2:return i.done?[3,5]:(a=i.value,[4,this.collection.remove("".concat(a))]);case 3:u.sent(),u.label=4;case 4:return i=r.next(),[3,2];case 5:return[3,8];case 6:return s=u.sent(),o={error:s},[3,8];case 7:try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(o)throw o.error}return[7];case 8:return[2]}})})},n.prototype.removeMessagesOfChannel=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:t},index:Qs(ii.CHANNEL_LATEST)})]:[3,6];case 1:return i.sent(),[4,(r=this._cacheContext.preference).remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/sync"))];case 2:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/sync.meta"))];case 3:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/changelogs"))];case 4:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/changelogs.meta"))];case 5:i.sent(),i.label=6;case 6:return[2]}})})},n.prototype.removeUnderOffset=function(t,r,i){return i===void 0&&(i=!1),A(this,void 0,void 0,function(){return I(this,function(a){switch(a.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:t,createdAt:i?{"<=":r}:{"<":r}},index:Qs(ii.CHANNEL_LATEST)})]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},n.prototype.clear=function(){return A(this,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},n.prototype.countBetween=function(t,r,i){return A(this,void 0,void 0,function(){var a,s=this;return I(this,function(o){switch(o.label){case 0:return this.localCacheEnabled?(a=Qs(ii.CHANNEL_LATEST),[4,this.collection.query({where:{channelUrl:t,"/where":function(l){var u=s._deserialize(l);return i.includes(u.createdAt)&&r.match(u)}},index:a}).count()]):[3,2];case 1:return[2,o.sent()];case 2:return[2,0]}})})},n.prototype.saveBlobs=function(t){return A(this,void 0,void 0,function(){var r=this;return I(this,function(i){switch(i.label){case 0:return[4,Promise.all(t.map(function(a){return A(r,void 0,void 0,function(){var s,o;return I(this,function(l){switch(l.label){case 0:return a instanceof Mr&&a.messageParams&&(s=a.messageParams).file&&wm(s.file)?[4,this.collection.saveBlob(s.file,a.reqId)]:[3,2];case 1:o=l.sent(),s.fileKey=o,l.label=2;case 2:return[2]}})})}))];case 1:return i.sent(),[2]}})})},n.prototype._getGroupChannelPreferenceSize=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l;return I(this,function(u){switch(u.label){case 0:return r=0,[4,(i=this._cacheContext.preference).get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/sync"))];case 1:return a=u.sent(),[4,i.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/sync.meta"))];case 2:return s=u.sent(),[4,i.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/changelogs"))];case 3:return o=u.sent(),[4,i.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/changelogs.meta"))];case 4:return l=u.sent(),a&&(r+=JSON.stringify(a).length),s&&(r+=JSON.stringify(s).length),o&&(r+=JSON.stringify(o).length),l&&(r+=JSON.stringify(l).length),[2,r]}})})},n}(Rr),lm={},P6=function(e){function n(t){var r=e.call(this,t)||this;return lm[t]=r,r}return z(n,e),Object.defineProperty(n.prototype,"_sdkState",{get:function(){return X.of(this._iid).sdkState},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_cacheContext",{get:function(){return X.of(this._iid).cacheContext},enumerable:!1,configurable:!0}),n.of=function(t,r){return r===void 0&&(r=!1),lm[t]&&!r||(lm[t]=new n(t)),lm[t]},Object.defineProperty(n.prototype,"collection",{get:function(){var t=this._cacheContext.nestdb;return Oe(!!t).throw(ee.databaseError),t.collection(_R)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),n.prototype._serialize=function(t){return Y({},t.serialize())},n.prototype._deserialize=function(t){return xr.of(this._iid).buildMessageFromSerializedData(t)},n.prototype.get=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.getByKey(t)]:[3,2];case 1:if(r=i.sent())return[2,this._deserialize(r)];i.label=2;case 2:return[2,void 0]}})})},n.prototype.fetch=function(t){var r=t.channelUrl,i=t.token,a=t.limit,s=a===void 0?100:a,o=t.filter,l=o===void 0?new to:o,u=t.backward,d=u!==void 0&&u,f=t.exactMatch,m=f!==void 0&&f,p=t.inclusive,E=p===void 0||p;return A(this,void 0,void 0,function(){var _,b=this;return I(this,function(C){switch(C.label){case 0:return this.localCacheEnabled?(_={where:{channelUrl:r,"/where":function(y){if(i){if(m&&y.createdAt!==i)return!1;if(d){if(E&&y.createdAt<i||!E&&y.createdAt<=i)return!1}else if(E&&y.createdAt>i||!E&&y.createdAt>=i)return!1}return l.match(b._deserialize(y))}},index:["channelUrl","-createdAt","-notificationId"],backward:d},[4,this.collection.query(_)]):[3,3];case 1:return[4,C.sent().fetch({limit:s??void 0})];case 2:return[2,C.sent().map(function(y){return b._deserialize(y)})];case 3:return[2,[]]}})})},n.prototype.upsert=function(t){return A(this,void 0,void 0,function(){var r,i=this;return I(this,function(a){switch(a.label){case 0:return this.localCacheEnabled?(r=t.map(function(s){return i._serialize(s)}),[4,this.collection.upsertMany(r)]):[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},n.prototype.remove=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l;return I(this,function(u){switch(u.label){case 0:if(!this.localCacheEnabled)return[3,8];u.label=1;case 1:u.trys.push([1,6,7,8]),r=Ge(t),i=r.next(),u.label=2;case 2:return i.done?[3,5]:(a=i.value,[4,this.collection.remove(a)]);case 3:u.sent(),u.label=4;case 4:return i=r.next(),[3,2];case 5:return[3,8];case 6:return s=u.sent(),o={error:s},[3,8];case 7:try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(o)throw o.error}return[7];case 8:return[2]}})})},n.prototype.markAsReadByTimestamp=function(t,r){return A(this,void 0,void 0,function(){return I(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.updateIf({where:{channelUrl:t,messageStatus:zu.SENT,createdAt:{"<":r}}},{set:{messageStatus:zu.READ}})]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},n.prototype.markAsReadByMessageIds=function(t,r){return A(this,void 0,void 0,function(){return I(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.updateIf({where:{channelUrl:t,notificationId:{"/in":r},messageStatus:zu.SENT}},{set:{messageStatus:zu.READ}})]:[3,2];case 1:return[2,i.sent().length];case 2:return[2,0]}})})},n.prototype.removeMessagesOfChannel=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:t},index:["channelUrl","-createdAt","-notificationId"]})]:[3,6];case 1:return i.sent(),[4,(r=this._cacheContext.preference).remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/sync"))];case 2:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/sync.meta"))];case 3:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/changelogs"))];case 4:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/changelogs.meta"))];case 5:i.sent(),i.label=6;case 6:return[2]}})})},n.prototype.removeUnderOffset=function(t,r){return A(this,void 0,void 0,function(){return I(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:t,createdAt:{"<":r}},index:Qs(ii.CHANNEL_LATEST)})]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},n.prototype.clear=function(){return A(this,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},n.prototype.countBetween=function(t,r,i){return A(this,void 0,void 0,function(){var a,s=this;return I(this,function(o){switch(o.label){case 0:return this.localCacheEnabled?(a=["channelUrl","-createdAt","-notificationId"],[4,this.collection.query({where:{channelUrl:t,"/where":function(l){var u=s._deserialize(l);return i.includes(u.createdAt)&&r.match(u)}},index:a}).count()]):[3,2];case 1:return[2,o.sent()];case 2:return[2,0]}})})},n}(Rr),bh={},SR=function(e){function n(t){var r=e.call(this,t)||this;return r._observers=new Map,r._dispatcherContext=r._dispatcher.on(function(i){return A(r,void 0,void 0,function(){var a,s,o,l,u,d,f,m,p,E,_,b,C,y,T,N,w,O,L,P,U,B=this;return I(this,function(F){switch(F.label){case 0:return i instanceof er?(a=i.messages,U=i.source,d=i.isWebSocketEventComing,s=a.filter(function(H){return H instanceof Mi&&H.channelType!==ln.OPEN&&H.messageId>0}),o=a.filter(function(H){return H instanceof Mi&&H.channelType!==ln.OPEN&&H.messageId===0}),l=a.filter(function(H){return H instanceof Ju}),s.length>0?[4,dr(function(){return A(B,void 0,void 0,function(){return I(this,function(H){switch(H.label){case 0:return[4,this._messageCache.upsert(s)];case 1:return H.sent(),[4,this._unsentMessageCache.remove(s.map(function(G){return G instanceof fr?G.reqId:null}).filter(function(G){return G!==null}))];case 2:return H.sent(),[2]}})})})]:[3,2]):[3,7];case 1:F.sent(),d||this._broadcastUpdateEvent(s,U),F.label=2;case 2:return o.length>0?[4,dr(function(){return A(B,void 0,void 0,function(){return I(this,function(H){switch(H.label){case 0:return[4,this._unsentMessageCache.upsert(o)];case 1:return H.sent(),[2]}})})})]:[3,4];case 3:F.sent(),d||this._broadcastUpdateEvent(o,U),F.label=4;case 4:return l.length>0?[4,dr(function(){return A(B,void 0,void 0,function(){return I(this,function(H){switch(H.label){case 0:return[4,this._notificationCache.upsert(l)];case 1:return H.sent(),[2]}})})})]:[3,6];case 5:F.sent(),d||this._broadcastUpdateEvent(l,U),F.label=6;case 6:return[3,24];case 7:return i instanceof Tb?(u=i.messageIds,U=i.source,d=i.isWebSocketEventComing,f=u.filter(function(H){return typeof H=="number"}),m=u.filter(function(H){return typeof H=="string"}),[4,dr(function(){return A(B,void 0,void 0,function(){return I(this,function(H){switch(H.label){case 0:return f.length>0?[4,this._messageCache.remove(f)]:[3,2];case 1:H.sent(),H.label=2;case 2:return m.length>0?[4,this._notificationCache.remove(m)]:[3,4];case 3:H.sent(),H.label=4;case 4:return[2]}})})})]):[3,9];case 8:return F.sent(),d||this._broadcastRemoveEvent(u,U),[3,24];case 9:return i instanceof H2?(p=i.reqId,U=i.source,[4,dr(function(){return A(B,void 0,void 0,function(){return I(this,function(H){switch(H.label){case 0:return[4,this._unsentMessageCache.remove([p])];case 1:return H.sent(),[2]}})})})]):[3,11];case 10:return F.sent(),this._broadcastRemoveUnsentEvent(p,U),[3,24];case 11:return i instanceof G2?(E=i.polls,U=i.source,this._cacheContext.localCacheEnabled?(_=E.map(function(H){return H.messageId}),[4,Promise.all(_.map(function(H){return B._messageCache.get(H)}))]):[3,14]):[3,15];case 12:return(b=F.sent().filter(function(H){return H})).length>0&&E.forEach(function(H){var G=b.find(function(j){return j.messageId===H.messageId});G&&G.applyPoll(H)}),[4,dr(function(){return A(B,void 0,void 0,function(){return I(this,function(H){switch(H.label){case 0:return[4,this._messageCache.upsert(b)];case 1:return[2,H.sent()]}})})})];case 13:F.sent(),F.label=14;case 14:return this._broadcastPollChangeLogEvent(E,U),[3,24];case 15:return i instanceof Mb?(C=i.event,U=i.source,[4,this._messageCache.get(C.messageId)]):[3,19];case 16:return(y=F.sent())&&y.isUserMessage()&&y.poll&&y.poll.applyPollUpdateEvent(C)?[4,dr(function(){return A(B,void 0,void 0,function(){return I(this,function(H){switch(H.label){case 0:return[4,this._messageCache.upsert([y])];case 1:return[2,H.sent()]}})})})]:[3,18];case 17:F.sent(),F.label=18;case 18:return this._broadcastPollUpdateEvent(C,U),[3,24];case 19:return i instanceof xp?(T=i.event,U=i.source,[4,this._messageCache.get(T.messageId)]):[3,23];case 20:return(N=F.sent())&&N.isUserMessage()&&N.poll&&N.poll.applyPollVoteEvent(T)?[4,dr(function(){return A(B,void 0,void 0,function(){return I(this,function(H){switch(H.label){case 0:return[4,this._messageCache.upsert([N])];case 1:return[2,H.sent()]}})})})]:[3,22];case 21:F.sent(),F.label=22;case 22:return this._broadcastPollVoteEvent(T,U),[3,24];case 23:i instanceof F2?(w=i.event,U=i.source,w.messageId>0&&this._broadcastReactionUpdateEvent(w,U)):i instanceof B2?(O=i.event,U=i.source,this._broadcastThreadUpdateEvent(O,U)):i instanceof x2&&(L=i.messageDeletionTimestamp,P=i.channelUrl,U=i.source,this._broadcastMessageRetentionEvent(L,P,U)),F.label=24;case 24:return[2]}})})}),r}return z(n,e),Object.defineProperty(n.prototype,"_cacheContext",{get:function(){return X.of(this._iid).cacheContext},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_dispatcher",{get:function(){return X.of(this._iid).dispatcher},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_messageCache",{get:function(){return Vu.of(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_unsentMessageCache",{get:function(){return tc.of(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_notificationCache",{get:function(){return P6.of(this._iid)},enumerable:!1,configurable:!0}),n.of=function(t,r){var i;return r===void 0&&(r=!1),bh[t]&&!r||(bh[t]&&((i=bh[t]._dispatcherContext)===null||i===void 0||i.close()),bh[t]=new n(t)),bh[t]},n.prototype._broadcastUpdateEvent=function(t,r){var i,a;try{for(var s=Ge(this._observers.values()),o=s.next();!o.done;o=s.next()){var l=o.value;l.onUpdate&&l.onUpdate(t,r)}}catch(u){i={error:u}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastPollChangeLogEvent=function(t,r){var i,a;try{for(var s=Ge(this._observers.values()),o=s.next();!o.done;o=s.next()){var l=o.value;l.onPollChangeLogUpdate&&l.onPollChangeLogUpdate(t,r)}}catch(u){i={error:u}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastPollUpdateEvent=function(t,r){var i,a;try{for(var s=Ge(this._observers.values()),o=s.next();!o.done;o=s.next()){var l=o.value;l.onPollUpdate&&l.onPollUpdate(t,r)}}catch(u){i={error:u}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastPollVoteEvent=function(t,r){var i,a;try{for(var s=Ge(this._observers.values()),o=s.next();!o.done;o=s.next()){var l=o.value;l.onPollVote&&l.onPollVote(t,r)}}catch(u){i={error:u}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastRemoveEvent=function(t,r){var i,a;try{for(var s=Ge(this._observers.values()),o=s.next();!o.done;o=s.next()){var l=o.value;l.onRemove&&l.onRemove(t,r)}}catch(u){i={error:u}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastRemoveUnsentEvent=function(t,r){var i,a;try{for(var s=Ge(this._observers.values()),o=s.next();!o.done;o=s.next()){var l=o.value;l.onRemoveUnsent&&l.onRemoveUnsent(t,r)}}catch(u){i={error:u}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastReactionUpdateEvent=function(t,r){var i,a;try{for(var s=Ge(this._observers.values()),o=s.next();!o.done;o=s.next()){var l=o.value;l.onReactionUpdate&&l.onReactionUpdate(t,r)}}catch(u){i={error:u}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastThreadUpdateEvent=function(t,r){var i,a;try{for(var s=Ge(this._observers.values()),o=s.next();!o.done;o=s.next()){var l=o.value;l.onThreadInfoUpdate&&l.onThreadInfoUpdate(t,r)}}catch(u){i={error:u}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastMessageRetentionEvent=function(t,r,i){var a,s;try{for(var o=Ge(this._observers.values()),l=o.next();!l.done;l=o.next()){var u=l.value;u.onDeletedByRetentionPolicy&&u.onDeletedByRetentionPolicy(t,r,i)}}catch(d){a={error:d}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(a)throw a.error}}},n.prototype.subscribe=function(t,r){this._observers.set(t,r)},n.prototype.unsubscribe=function(t){this._observers.delete(t)},n.prototype.unsubscribeAll=function(){this._observers.clear()},n}(Rr),HM={},bE=function(e){function n(t,r){var i=r.sdkState,a=r.cacheContext,s=e.call(this,t)||this;return s._users=new Map,s._sdkState=i,s._cacheContext=a,HM[t]=s,s}return z(n,e),n.of=function(t){return HM[t]},Object.defineProperty(n.prototype,"collection",{get:function(){var t=this._cacheContext.nestdb;return Oe(!!t).throw(ee.databaseError),t.collection(ER)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"users",{get:function(){return Nt([],ut(this._users.values()),!1)},enumerable:!1,configurable:!0}),n.prototype._serialize=function(t,r){return Y(Y({},t.serialize()),{updatedAt:r})},n.prototype._deserialize=function(t){return Yt._buildUserFromSerializedData(t)},n.prototype.isCachedInMemory=function(t){return this._users.has(t)},n.prototype.getUserInfoFromCache=function(t){if(this._users.has(t))return this._users.get(t)},n.prototype.get=function(t){return A(this,void 0,void 0,function(){var r,i;return I(this,function(a){switch(a.label){case 0:return this._users.has(t)?[3,3]:this.localCacheEnabled?[4,this.collection.getByKey(t)]:[3,2];case 1:if(r=a.sent())return i=this._deserialize(r),this._users.set(i.userId,i),[2,i];a.label=2;case 2:return[2,void 0];case 3:return[2,this._users.get(t)]}})})},n.prototype.fetch=function(t){var r=t.limit,i=r===void 0?100:r,a=t.backward,s=a!==void 0&&a;return A(this,void 0,void 0,function(){var o,l,u,d=this;return I(this,function(f){switch(f.label){case 0:if(!this.localCacheEnabled)return[2,[]];f.label=1;case 1:return f.trys.push([1,4,,5]),o={index:["-userId","-updatedAt"],backward:s},[4,this.collection.query(o)];case 2:return[4,f.sent().fetch({limit:i})];case 3:return l=f.sent(),(u=l.map(function(m){return d._deserialize(m)})).forEach(function(m){d._users.has(m.userId)||d._users.set(m.userId,m)}),[2,u];case 4:return f.sent(),[2,[]];case 5:return[2]}})})},n.prototype.upsert=function(t,r){return A(this,void 0,void 0,function(){var i,a;return I(this,function(s){switch(s.label){case 0:if(!this.localCacheEnabled)return[3,2];if(i=this._serialize(t,r),a=this._users.get(t.userId)){if(a._hashValue===t._hashValue)return[2];if(a._updatedAt>r)return[2]}return this._users.set(t.userId,Yt._buildUserFromSerializedData(i)),[4,this.collection.upsertOne(i)];case 1:s.sent(),s.label=2;case 2:return[2]}})})},n.prototype.remove=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){switch(r.label){case 0:return this._users.has(t)&&this._users.delete(t),this.localCacheEnabled?[4,this.collection.remove(t)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},n.prototype.clearMemoryCache=function(){this._users.clear()},n.prototype.clear=function(){return A(this,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return this.clearMemoryCache(),this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},n}(Rr),x6=function(e){function n(t){var r=this,i=t.reverse,a=i!==void 0&&i,s=t.limit,o=s===void 0?20:s,l=t.keys,u=t.token;return(r=e.call(this)||this).method=Ie.GET,r.path="".concat(Jw),r.params=Qe({token:u,limit:o,reverse:a,order:rE.UPDATED_AT,show_ui_template:!0,show_color_variables:!0,keys:l}),r}return z(n,e),n}(we),F6=function(e){function n(t,r){var i=e.call(this,t,r)||this,a=r.next,s=r.has_more,o=s!==void 0&&s,l=r.templates;return i.nextToken=a,i.hasMore=o,i.templates=l.map(function(u){return{template:JSON.stringify(u)}}),i}return z(n,e),n}(Pe),B6=function(e){function n(t){var r=this,i=t.key;return(r=e.call(this)||this).method=Ie.GET,r.path="".concat(Jw,"/").concat(i),r}return z(n,e),n}(we),H6=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.template=JSON.stringify(r),i}return z(n,e),n}(Pe),GM={},xr=function(){function e(n,t){var r=t.sdkState,i=t.dispatcher,a=t.requestQueue,s=t.onlineDetector,o=t.cacheContext;this._iid=n,this._sdkState=r,this._requestQueue=a,this._dispatcher=i,this._cacheContext=o,Vu.of(n),tc.of(n),SR.of(n),this.fileMessageQueue=new Px(n,{sdkState:r,dispatcher:i,requestQueue:a,onlineDetector:s,cacheContext:o}),GM[n]=this}return e.of=function(n){return GM[n]},e.prototype._setSenderInfo=function(n){if(this._cacheContext.localCacheEnabled&&(n.messageType===Zn.USER||n.messageType===Zn.FILE)){var t=n.sender;if(t){var r=bE.of(this._iid).getUserInfoFromCache(t.user_id);r&&(n.sender=Yt.payloadify(r))}}},e.prototype.buildMessageFromSerializedData=function(n){var t=ko(n);if(t.notificationId)return new Ju(this._iid,Ju.payloadify(t));switch(this._setSenderInfo(t),t.messageType){case Zn.USER:return new fi(this._iid,fi.payloadify(t));case Zn.FILE:return Ba._isMultipleFilesMessageSerializedData(t)?new Ba(this._iid,Ba.payloadify(t)):new Mr(this._iid,Mr.payloadify(t));case Zn.ADMIN:return new Zu(this._iid,Zu.payloadify(t))}throw ee.invalidParameters},e.prototype.buildUserMessageCreateParamsFromSerializedData=function(n,t){return Qe(vt({data:t.data,customType:t.customType,mentionType:t.mentionType,mentionedUserIds:t.mentionedUserIds,mentionedUsers:t.mentionedUsers,mentionedMessageTemplate:t.mentionedMessageTemplate,metaArrays:t.metaArrays,parentMessageId:t.parentMessageId,isReplyToChannel:n.isReplyToChannel,pushNotificationDeliveryOption:n.pushNotificationDeliveryOption,appleCriticalAlertOptions:t.appleCriticalAlertOptions,reqId:t.reqId,message:t.message,translationTargetLanguages:Object.keys(t.translations),pollId:n.pollId}))},e.prototype.buildFileMessageCreateParamsFromSerializedData=function(n,t){var r;return Qe(vt({data:t.data,customType:t.customType,mentionType:t.mentionType,mentionedUserIds:t.mentionedUserIds,mentionedUsers:t.mentionedUsers,metaArrays:t.metaArrays,parentMessageId:t.parentMessageId,isReplyToChannel:n.isReplyToChannel,pushNotificationDeliveryOption:n.pushNotificationDeliveryOption,appleCriticalAlertOptions:t.appleCriticalAlertOptions,reqId:t.reqId,file:n.file,fileKey:n.fileKey,fileUrl:t.plainUrl,fileName:t.name,fileSize:t.size,mimeType:t.type,thumbnailSizes:(r=t.thumbnails)===null||r===void 0?void 0:r.map(function(i){return{maxWidth:i.width,maxHeight:i.height}}),fileType:n.fileType,requireAuth:t.requireAuth}))},e.prototype.buildMultipleFilesMessageCreateParamsFromSerializedData=function(n,t){var r=this;return Qe({data:t.data,customType:t.customType,mentionType:t.mentionType,mentionedUserIds:t.mentionedUserIds,mentionedUsers:t.mentionedUsers,metaArrays:t.metaArrays,parentMessageId:t.parentMessageId,isReplyToChannel:n.isReplyToChannel,pushNotificationDeliveryOption:n.pushNotificationDeliveryOption,appleCriticalAlertOptions:t.appleCriticalAlertOptions,reqId:t.reqId,fileInfoList:n.fileInfoList.map(function(i){return new bf(r._iid,i)})})},e.prototype.buildScheduledUserMessageCreateParamsFromSerializedData=function(n,t){return Y(Y({},this.buildUserMessageCreateParamsFromSerializedData(n,t)),{scheduledAt:n.scheduledAt})},e.prototype.buildScheduledFileMessageCreateParamsFromSerializedData=function(n,t){return Y(Y({},this.buildFileMessageCreateParamsFromSerializedData(n,t)),{scheduledAt:n.scheduledAt})},e.prototype.buildSenderFromSerializedData=function(n){var t=ko(n);return new gd(this._iid,gd.payloadify(t))},e.prototype.getMessage=function(n){return A(this,void 0,void 0,function(){var t,r;return I(this,function(i){switch(i.label){case 0:return t=new xx(n),[4,this._requestQueue.send(t)];case 1:return r=i.sent(),[2,r.as(Fx).message]}})})},e.prototype.getScheduledMessage=function(n){return A(this,void 0,void 0,function(){var t,r;return I(this,function(i){switch(i.label){case 0:return t=new Gx(n),[4,this._requestQueue.send(t)];case 1:return r=i.sent(),[2,r.as(zx).message]}})})},e.prototype.getMessagesByMessageId=function(n,t,r,i,a){return a===void 0&&(a=fe.REQUEST_MESSAGE),A(this,void 0,void 0,function(){var s,o,l;return I(this,function(u){switch(u.label){case 0:return s=new em(Y(Y(Y({channelType:t,channelUrl:n,token:String(r)},sf),i),{sdkSource:es.EXTERNAL_LEGACY})),[4,this._requestQueue.send(s)];case 1:return o=u.sent(),l=o.as(tm).messages,this._dispatcher.dispatch(new er({messages:l,source:a})),[2,l]}})})},e.prototype.getMessagesByTimestamp=function(n,t,r,i,a){return a===void 0&&(a=fe.REQUEST_MESSAGE),A(this,void 0,void 0,function(){var s,o,l;return I(this,function(u){switch(u.label){case 0:return s=new em(Y(Y(Y({channelType:t,channelUrl:n,timestamp:r},sf),i),{sdkSource:es.EXTERNAL_LEGACY})),[4,this._requestQueue.send(s)];case 1:return o=u.sent(),l=o.as(tm).messages,this._dispatcher.dispatch(new er({messages:l,source:a})),[2,l]}})})},e.prototype._getMessagesByTimestampForCollection=function(n,t,r,i,a,s,o,l){return a===void 0&&(a=fe.REQUEST_MESSAGE),A(this,void 0,void 0,function(){var u,d,f,m,p,E;return I(this,function(_){switch(_.label){case 0:return u=new em(Y(Y(Y({channelType:t,channelUrl:n,timestamp:r},sf),i),{checkingHasNext:s,checkingContinuousMessages:o,sdkSource:l})),[4,this._requestQueue.send(u)];case 1:return d=_.sent(),f=d.as(tm),m=f.messages,p=f.isContinuousMessages,E=f.hasNext,this._dispatcher.dispatch(new er({messages:m,source:a})),[2,{messages:m,isContinuousMessages:p,hasNext:E}]}})})},e.prototype.getThreadedMessagesByTimestamp=function(n,t,r,i){return i===void 0&&(i=fe.REQUEST_THREADED_MESSAGE),A(this,void 0,void 0,function(){var a,s,o,l;return I(this,function(u){switch(u.label){case 0:return a=new em(Y(Y(Y({channelUrl:n.channelUrl,channelType:n.channelType,timestamp:t},kf),r),{replyType:Ir.ALL,parentMessageId:n.messageId,includeThreadInfo:!0})),[4,this._requestQueue.send(a)];case 1:return s=u.sent(),o=s.as(tm).messages,(l=o.slice(1)).forEach(function(d){d.parentMessage=n}),this._dispatcher.dispatch(new er({messages:l,source:i})),[2,{parentMessage:o[0],threadedMessages:l}]}})})},e.prototype.getMessageTemplatesByToken=function(n,t){return t===void 0&&(t={}),A(this,void 0,void 0,function(){var r,i,a,s,o,l;return I(this,function(u){switch(u.label){case 0:return r=new x6(Y({token:n},t)),[4,this._requestQueue.send(r)];case 1:return i=u.sent(),a=i.as(F6),s=a.hasMore,o=a.nextToken,l=a.templates,[2,{hasMore:s,token:o,templates:l}]}})})},e.prototype.getMessageTemplate=function(n){return A(this,void 0,void 0,function(){var t,r;return I(this,function(i){switch(i.label){case 0:return t=new B6({key:n}),[4,this._requestQueue.send(t)];case 1:return r=i.sent(),[2,{template:r.as(H6).template}]}})})},e.prototype.getMessageChangelogs=function(n,t,r,i,a){return a===void 0&&(a=fe.REQUEST_MESSAGE_CHANGELOGS),A(this,void 0,void 0,function(){var s,o,l,u,d,f,m,p,E;return I(this,function(_){switch(_.label){case 0:return s=new Bx(Qe(vt(Y(Y({channelType:t,channelUrl:n,timestamp:typeof r=="number"?r:null,token:typeof r=="string"?r:null},mE),i)))),[4,this._requestQueue.send(s)];case 1:return o=_.sent(),l=o.as(Hx),u=l.updatedMessages,d=l.deletedMessagesInfo,f=l.hasMore,m=l.nextToken,p=l.forceUseNextToken,E=d.map(function(b){return b.messageId}),u.length>0&&this._dispatcher.dispatch(new er({messages:u,source:a})),E.length>0&&this._dispatcher.dispatch(new Tb({messageIds:E,source:a})),[2,{updatedMessages:u,deletedMessageIds:E,hasMore:f,token:m,forceUseNextToken:p}]}})})},e}(),TR=function(e){function n(t,r){var i=e.call(this,t)||this;i.targetMessageId=0;var a=r.thread_info,s=r.parent_message_id,o=r.channel_url,l=r.channel_type;return a&&Z("object",a)&&Z("number",s)&&Z("string",o)&&Z("string",l)&&(i.threadInfo=new ip(t,a),i.targetMessageId=s,i.channelUrl=o,i.channelType=l),i}return z(n,e),n}(Rr),G6={channelUrl:"",channelType:ln.BASE,messageId:0,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1,includeThreadInfo:!1},z6=function(e){function n(t){var r=t.channelCustomType,i=t.keyword,a=t.limit,s=t.reverse,o=t.exactMatch,l=t.channelUrl,u=t.order,d=t.messageTimestampFrom,f=t.messageTimestampTo,m=t.advancedQuery,p=t.targetFields,E=t.nextToken,_=e.call(this)||this;return _.method=Ie.GET,_.path="".concat(_k,"/messages"),_.params=Qe({custom_type:r,query:i,limit:a,reverse:s,exact_match:o,channel_url:l,message_ts_from:d,message_ts_to:f,sort_field:u,advanced_query:m,target_fields:p,after:E}),_}return z(n,e),n}(we),j6=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.messages=r.results.map(function(a){return _i(t,a)}),i.hasNext=r.has_next,i.nextToken=r.end_cursor,i.totalCount=r.total_count,i}return z(n,e),n}(Pe);(function(e){e.SCORE="score",e.TIMESTAMP="ts"})(uf||(uf={}));var V6=function(e){function n(t,r){var i,a,s,o,l,u,d,f,m,p=this;return(p=e.call(this,t,r)||this).keyword="",p.reverse=!1,p.exactMatch=!1,p.channelUrl=null,p.channelCustomType=null,p.messageTimestampFrom=null,p.messageTimestampTo=null,p.order=uf.SCORE,p.advancedQuery=!1,p.targetFields=null,p._nextToken="",p.totalCount=-1,p.keyword=r.keyword,p.reverse=(i=r.reverse)!==null&&i!==void 0&&i,p.exactMatch=(a=r.exactMatch)!==null&&a!==void 0&&a,p.channelUrl=(s=r.channelUrl)!==null&&s!==void 0?s:null,p.channelCustomType=(o=r.channelCustomType)!==null&&o!==void 0?o:null,p.messageTimestampFrom=(l=r.messageTimestampFrom)!==null&&l!==void 0?l:null,p.messageTimestampTo=(u=r.messageTimestampTo)!==null&&u!==void 0?u:null,p.order=(d=r.order)!==null&&d!==void 0?d:uf.SCORE,p.advancedQuery=(f=r.advancedQuery)!==null&&f!==void 0&&f,p.targetFields=(m=r.targetFields)!==null&&m!==void 0?m:null,p}return z(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&Z("string",this.keyword)&&this.keyword.length>0&&Z("boolean",this.reverse)&&Z("boolean",this.exactMatch)&&Z("string",this.channelUrl,!0)&&Z("string",this.channelCustomType,!0)&&Z("number",this.messageTimestampFrom,!0)&&Z("number",this.messageTimestampTo,!0)&&Wt(uf,this.order)&&Z("boolean",this.advancedQuery)&&Qt("string",this.targetFields,!0)},n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u;return I(this,function(d){switch(d.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=X.of(this._iid).requestQueue,r=new z6(vt(Y(Y({},this),{nextToken:this._nextToken?this._nextToken:null}))),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=d.sent(),a=i.as(j6),s=a.messages,o=a.hasNext,l=a.nextToken,u=a.totalCount,this._nextToken=l,this._hasNext=o,this._isLoading=!1,this.totalCount=u,[2,s];case 2:return[2,[]];case 3:throw ee.queryInProgress;case 4:return[3,6];case 5:throw ee.invalidParameters;case 6:return[2]}})})},n}(qo),$6=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.limit,s=t.token,o=e.call(this)||this;return o.method=Ie.GET,o.path="".concat(yn(r),"/").concat(encodeURIComponent(i),"/messages/parent_thread_message"),o.params=Qe(vt({limit:a,token:s})),o}return z(n,e),n}(we),q6=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.token=r.next,i.messages=r.messages.map(function(a){return _i(t,a)}),i}return z(n,e),n}(Pe),K6=function(e){function n(t,r,i,a){var s=e.call(this,t,r,i,a)||this;return s._edge="",s}return z(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)},n.prototype.load=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return I(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=X.of(this._iid).requestQueue,r=new $6({channelType:this.channelType,channelUrl:this.channelUrl,token:this._edge,limit:this.limit}),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),a=i.as(q6),s=a.messages,o=a.token,this._edge=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw ee.queryInProgress;case 4:return[3,6];case 5:throw ee.invalidParameters;case 6:return[2]}})})},n}(ro),W6={channelUrl:"",scheduledMessageId:0},Q6={reverse:!1,limit:20},Y6=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.name="message",t}return z(n,e),n.prototype.init=function(t,r){var i=r.sdkState,a=r.dispatcher,s=r.sessionManager,o=r.requestQueue,l=r.logger,u=r.onlineDetector,d=r.cacheContext;e.prototype.init.call(this,t,{sdkState:i,dispatcher:a,sessionManager:s,requestQueue:o,logger:l,onlineDetector:u,cacheContext:d}),this._manager=new xr(t,{sdkState:i,dispatcher:a,requestQueue:o,onlineDetector:u,cacheContext:d})},n.prototype.buildMessageFromSerializedData=function(t){return this._manager.buildMessageFromSerializedData(t)},n.prototype.buildSenderFromSerializedData=function(t){return this._manager.buildSenderFromSerializedData(t)},n.prototype.getMessage=function(t){return A(this,void 0,void 0,function(){var r,i;return I(this,function(a){switch(a.label){case 0:return r=Y(Y({},G6),t),Oe(function(s){return Z("string",s.channelUrl)&&Wt(ln,s.channelType)&&Z("number",s.messageId)&&Z("boolean",s.includeReactions,!0)&&Z("boolean",s.includeMetaArray,!0)&&Z("boolean",s.includeParentMessageInfo,!0)&&Z("boolean",s.includeThreadInfo,!0)}(r)).throw(ee.invalidParameters),[4,this._manager.getMessage(r)];case 1:if((i=a.sent())instanceof Mi||i instanceof Ju||i===null)return[2,i];throw"Unknown message type is given."}})})},n.prototype.getScheduledMessage=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){return r=Y(Y({},W6),t),Oe(function(a){return Z("string",a.channelUrl)&&a.channelUrl!==""&&Z("number",a.scheduledMessageId)&&a.scheduledMessageId>0}(r)).throw(ee.invalidParameters),[2,this._manager.getScheduledMessage(r)]})})},n.prototype.getMessageTemplatesByToken=function(t,r){return r===void 0&&(r={}),A(this,void 0,void 0,function(){var i;return I(this,function(a){return i=Y(Y({},Q6),r),Oe(Z("string",t,!0)&&function(s){return Z("boolean",s.reverse,!0)&&Z("number",s.limit,!0)&&Qt("string",s.keys,!0)}(i)).throw(ee.invalidParameters),[2,this._manager.getMessageTemplatesByToken(t,i)]})})},n.prototype.getMessageTemplate=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){return Oe(Z("string",t)).throw(ee.invalidParameters),[2,this._manager.getMessageTemplate(t)]})})},n}(Pp),rr,cf,CE;(function(e){e.LATEST_LAST_MESSAGE="latest_last_message",e.CHRONOLOGICAL="chronological",e.CHANNEL_NAME_ALPHABETICAL="channel_name_alphabetical",e.METADATA_VALUE_ALPHABETICAL="metadata_value_alphabetical"})(rr||(rr={})),function(e){e.CHRONOLOGICAL="chronological",e.CHANNEL_NAME_ALPHABETICAL="channel_name_alphabetical",e.METADATA_VALUE_ALPHABETICAL="metadata_value_alphabetical"}(cf||(cf={})),function(e){e.CREATED_AT="created_at",e.SCHEDULED_AT="scheduled_at"}(CE||(CE={}));var Cf,Lm=function(e){switch(e){case rr.LATEST_LAST_MESSAGE:return["-lastMessageUpdatedAt","-createdAt","syncIndex"];case rr.CHRONOLOGICAL:return["-createdAt","syncIndex"];case rr.CHANNEL_NAME_ALPHABETICAL:return["name"];default:return["-lastMessageUpdatedAt","-createdAt","syncIndex"]}},MR=function(e){function n(t){var r=t.message,i=e.call(this)||this;return i.message=r,i}return z(n,e),n}(qn),zM={},zh=function(){function e(n,t){var r=t.localCacheEnabled,i=t.enableAutoResend,a=t.dispatcher,s=t.sdkState,o=t.logger,l=this;this._iid=n,zM[n]=this,this._localCacheEnabled=r,this._enableAutoResend=i,this._isProcessingAutoResend=!1,this._autoResendQueue=[],this._dispatcher=a,this._logger=o,this._sdkState=s,this._localCacheEnabled&&a.on(function(u){if(u instanceof Ea)switch(u.stateType){case wn.CONNECTED:l._isProcessingAutoResend||l.processAutoResendRegisteredPendingMessages().then(function(){return l._processNextAutoResend()});break;case wn.INTERNAL_DISCONNECTED:case wn.EXTERNAL_DISCONNECTED:l._isProcessingAutoResend=!1}})}return e.of=function(n){return zM[n]},e.prototype.processNonAutoResendRegisteredPendingMessages=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a,s;return I(this,function(o){switch(o.label){case 0:return this._enableAutoResend?[4,this._fetchAllCachedPendingMessages()]:[2];case 1:n=o.sent();try{for(t=Ge(n),r=t.next();!r.done;r=t.next())(i=r.value).errorCode===0&&(this._logger.debug("cached pending message is not auto-resend registered. changing its sending status to failed: ",i.reqId),i.sendingStatus=gn.FAILED,i.errorCode=lt.ACK_TIMEOUT,this._dispatcher.dispatch(new er({messages:[i],source:fe.LOCAL_MESSAGE_FAILED})))}catch(l){a={error:l}}finally{try{r&&!r.done&&(s=t.return)&&s.call(t)}finally{if(a)throw a.error}}return[2]}})})},e.prototype.processAutoResendRegisteredPendingMessages=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a,s,o,l;return I(this,function(u){switch(u.label){case 0:return[4,this._fetchAllCachedPendingMessages()];case 1:n=u.sent();try{for(t=Ge(n),r=t.next();!r.done;r=t.next())i=r.value,this._enableAutoResend&&i.errorCode&&Vm(i.errorCode)&&(a=new Date().getTime(),s=i.createdAt+2592e5,this._enableAutoResend&&a<=s?this._autoResendQueue.map(function(d){return d.reqId}).indexOf(i.reqId)<0&&this._autoResendQueue.push(i):(this._logger.debug("auto-resend registered pending messaged expired. expiration date: ",new Date(s).toLocaleString()),i.sendingStatus=gn.FAILED,this._dispatcher.dispatch(new er({messages:[i],source:fe.LOCAL_MESSAGE_FAILED}))))}catch(d){o={error:d}}finally{try{r&&!r.done&&(l=t.return)&&l.call(t)}finally{if(o)throw o.error}}return[2]}})})},e.prototype.completeCurrentAndProcessNextAutoResend=function(n){if(this._localCacheEnabled&&this._enableAutoResend&&(n.sendingStatus===gn.SUCCEEDED||n.sendingStatus===gn.FAILED&&!Vm(n.errorCode))){var t=this.indexOf(n);t>=0&&this._autoResendQueue.splice(t,1),t===0&&this._processNextAutoResend()}},e.prototype._fetchAllCachedPendingMessages=function(){return A(this,void 0,void 0,function(){var n,t;return I(this,function(r){switch(r.label){case 0:return n=tc.of(this._iid),(t=new to).replyType=Ir.ALL,[4,n.fetch({sendingStatus:gn.PENDING,backward:!0,filter:t})];case 1:return[2,r.sent()]}})})},e.prototype.indexOf=function(n){return this._autoResendQueue.length>0?this._autoResendQueue.map(function(t){return t.reqId}).indexOf(n.reqId):-1},e.prototype._isNotInQueue=function(n){return this._autoResendQueue.map(function(t){return t.reqId}).indexOf(n.reqId)===-1},e.prototype._processNextAutoResend=function(){return A(this,void 0,void 0,function(){var n;return I(this,function(t){if(this._localCacheEnabled&&this._enableAutoResend&&this._sdkState.appState==="foreground")try{this._autoResendQueue.length>0?(this._isProcessingAutoResend||(this._logger.debug("auto-resend queue started."),this._isProcessingAutoResend=!0),n=this._autoResendQueue[0],this._dispatcher.dispatch(new MR({message:n})),this._logger.debug("processing auto-resend for message request id: ",n.reqId)):(this._logger.debug("auto-resend queue finished."),this._isProcessingAutoResend=!1)}catch(r){this._logger.warn("process auto-resend error: ",r),this._isProcessingAutoResend=!1}return[2]})})},e}();(function(e){e[e.USER_BLOCK=20001]="USER_BLOCK",e[e.USER_UNBLOCK=2e4]="USER_UNBLOCK",e[e.FRIEND_DISCOVERED=20900]="FRIEND_DISCOVERED"})(Cf||(Cf={}));var Io,up=function(){function e(n){this.category=n.cat,this.data=n.data}return e.getDataAsUserBlockEvent=function(n,t){var r=t.data,i=r.blocker,a=r.blockee;return{blocker:new Yt(n,i),blockee:new Yt(n,a)}},e.getDataAsFriendDiscoveredEvent=function(n,t){var r=t.data.friend_discoveries;return{friendDiscoveries:Array.isArray(r)?r.map(function(i){return new Yt(n,i)}):[]}},e}(),NR=function(e){function n(t,r){var i=r.userId,a=e.call(this)||this;return a._iid=t,a.userId=i,a}return z(n,e),n}(qn),IR=function(e){function n(){return e.call(this)||this}return z(n,e),n}(qn),AR=function(e){function n(t){var r=t.configTs,i=e.call(this)||this;return i.configTs=r,i}return z(n,e),n}(qn),wR=function(e){function n(t,r,i){var a=e.call(this,t,"USEV",i)||this;return a.event=new up(i),a}return z(n,e),n}(Yn),RR=function(e){function n(t){var r=t.appConfigsInfo,i=t.configTs,a=e.call(this)||this;return a.appConfigsInfo={},a.configTs=0,a.appConfigsInfo=r,a.configTs=i,a}return z(n,e),n}(qn);(function(e){e[e.IDLE=0]="IDLE",e[e.RUNNING=1]="RUNNING",e[e.END=2]="END"})(Io||(Io={}));var Go=function(e){function n(t,r,i,a){var s=e.call(this)||this;return s._state=Io.IDLE,s._retryCount=0,s._retryLimit=3,s.priority=0,s._worker=r,s}return z(n,e),Object.defineProperty(n.prototype,"isIdle",{get:function(){return this._state===Io.IDLE},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isRunning",{get:function(){return this._state===Io.RUNNING},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isDone",{get:function(){return this._state===Io.END},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"retryCount",{get:function(){return this._retryCount},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"retryLimit",{get:function(){return this._retryLimit},enumerable:!1,configurable:!0}),n.prototype._run=function(t){return A(this,void 0,void 0,function(){var r,i;return I(this,function(a){switch(a.label){case 0:if(!this.isRunning)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this._worker(t)];case 2:return r=a.sent(),this._retryCount=0,this.dispatch("progress",r),r.hasNext?this._run(r.nextToken):this.end(),[3,4];case 3:return i=a.sent(),this.dispatch("error",i),this._retryCount<this._retryLimit?(this._retryCount++,this._run(t)):this.stop(),[3,4];case 4:return[2]}})})},n.prototype.start=function(t){this.isIdle&&(this._state=Io.RUNNING,this._run(t))},n.prototype.stop=function(){this._state=Io.IDLE,this.dispatch("stop")},n.prototype.end=function(){this._state=Io.END,this.dispatch("end")},n}(ac),X6=function(e,n){this.pollId=0,this.messageId=0,this.pollId=n.poll.id,this.messageId=n.poll.message_id,this._iid=e,this._payload=n},Ln;(function(e){e[e.NONE=0]="NONE",e[e.CHANNEL_ENTER=10102]="CHANNEL_ENTER",e[e.CHANNEL_EXIT=10103]="CHANNEL_EXIT",e[e.USER_CHANNEL_MUTE=10201]="USER_CHANNEL_MUTE",e[e.USER_CHANNEL_UNMUTE=10200]="USER_CHANNEL_UNMUTE",e[e.USER_CHANNEL_BAN=10601]="USER_CHANNEL_BAN",e[e.USER_CHANNEL_UNBAN=10600]="USER_CHANNEL_UNBAN",e[e.CHANNEL_FREEZE=10701]="CHANNEL_FREEZE",e[e.CHANNEL_UNFREEZE=10700]="CHANNEL_UNFREEZE",e[e.TYPING_START=10900]="TYPING_START",e[e.TYPING_END=10901]="TYPING_END",e[e.CHANNEL_JOIN=1e4]="CHANNEL_JOIN",e[e.CHANNEL_LEAVE=10001]="CHANNEL_LEAVE",e[e.CHANNEL_OPERATOR_UPDATE=10002]="CHANNEL_OPERATOR_UPDATE",e[e.CHANNEL_INVITE=10020]="CHANNEL_INVITE",e[e.CHANNEL_ACCEPT_INVITE=10021]="CHANNEL_ACCEPT_INVITE",e[e.CHANNEL_DECLINE_INVITE=10022]="CHANNEL_DECLINE_INVITE",e[e.CHANNEL_PROP_CHANGED=11e3]="CHANNEL_PROP_CHANGED",e[e.CHANNEL_DELETED=12e3]="CHANNEL_DELETED",e[e.CHANNEL_META_DATA_CHANGED=11100]="CHANNEL_META_DATA_CHANGED",e[e.CHANNEL_META_COUNTERS_CHANGED=11200]="CHANNEL_META_COUNTERS_CHANGED",e[e.CHANNEL_HIDE=13e3]="CHANNEL_HIDE",e[e.CHANNEL_UNHIDE=13001]="CHANNEL_UNHIDE",e[e.PINNED_MESSAGE_CHANGED=11300]="PINNED_MESSAGE_CHANGED"})(Ln||(Ln={}));var Z6=function(){function e(n){var t;this.channelUrl=n.channel_url,this.channelType=n.channel_type,this.category=n.cat,this.data=(t=n.data)!==null&&t!==void 0?t:{},this.ts=n.ts}return Object.defineProperty(e.prototype,"isGroupChannelEvent",{get:function(){return this.channelType===ln.GROUP},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpenChannelEvent",{get:function(){return this.channelType===ln.OPEN},enumerable:!1,configurable:!0}),e}(),Wo=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return a.event=new Z6(i),a}return z(n,e),n}(Yn),OR=function(e){function n(t,r,i){var a=e.call(this,t,r,i)||this,s=i.data.operators,o=s===void 0?[]:s;return a.operators=o.map(function(l){return new Yt(a._iid,l)}),a}return z(n,e),n}(Wo),LR=function(e){function n(t,r,i){var a,s=this;return(s=e.call(this,t,"SYEV",i)||this).pinnedMessageIds=[],s.latestPinnedMessage=null,s.ts=0,i.data&&(s.pinnedMessageIds=(a=i.data.pinned_message_ids)!==null&&a!==void 0?a:[],s.latestPinnedMessage=i.data.latest_pinned_message?_i(t,Y({},i.data.latest_pinned_message)):null),s.ts=i.ts,s}return z(n,e),n}(Yn),UR=function(e){function n(t,r){var i=e.call(this,t)||this;return i._logger=r.logger,i._sdkState=r.sdkState,i._sessionManager=r.sessionManager,i._requestQueue=r.requestQueue,i._dispatcher=r.dispatcher,i._cacheContext=r.cacheContext,i._channelType=r.channelType,i}return z(n,e),Object.defineProperty(n.prototype,"_messageBroadcast",{get:function(){return SR.of(this._iid)},enumerable:!1,configurable:!0}),n.prototype.subscribeMessageEvent=function(t,r){this._messageBroadcast.subscribe(t,r)},n.prototype.unsubscribeMessageEvent=function(t){this._messageBroadcast.unsubscribe(t)},n.prototype.getMessageFromCache=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){return[2,null]})})},n.prototype.getExactlyMatchingMessagesForTokenFromCache=function(t,r,i){return A(this,void 0,void 0,function(){return I(this,function(a){return[2,[]]})})},n.prototype.getMessagesFromCache=function(t,r,i,a,s,o){return A(this,void 0,void 0,function(){return I(this,function(l){return[2,[]]})})},n.prototype.getPollMessagesFromCache=function(t,r,i,a){return A(this,void 0,void 0,function(){return I(this,function(s){return[2,[]]})})},n.prototype.getCachedMessageCountBetween=function(t,r,i,a){return A(this,void 0,void 0,function(){return I(this,function(s){return[2,0]})})},n.prototype.getUnsentMessagesFromCache=function(t,r){return A(this,void 0,void 0,function(){return I(this,function(i){return[2,[]]})})},n.prototype.removeFailedMessageFromCache=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){return[2]})})},n}(Rr),DR=function(e){function n(t,r,i){var a,s,o,l,u=this;(u=e.call(this,t,"ADMM",i)||this).message=new Zu(t,i);var d=X.of(t).sdkState;return u.isMentioned=fd(u.message.mentionType,(o=(a=u.message.mentionedUserIds)!==null&&a!==void 0?a:(s=u.message.mentionedUsers)===null||s===void 0?void 0:s.map(function(f){return f.userId}))!==null&&o!==void 0?o:[],d.userId),u.forceUpdateLastMessage=(l=i.force_update_last_message)!==null&&l!==void 0&&l,u}return z(n,e),n}(Yn),kR=function(e){function n(t,r,i){var a,s,o,l,u,d=this;(d=e.call(this,t,"AEDI",i)||this).message=new Zu(t,i);var f=X.of(t).sdkState;return d.mentionCountChange=mb({mentionType:(a=i.old_values)===null||a===void 0?void 0:a.mention_type,mentionedUserIds:(o=(s=i.old_values)===null||s===void 0?void 0:s.mentioned_user_ids)!==null&&o!==void 0?o:[]},vt({mentionType:d.message.mentionType,mentionedUserIds:(l=d.message.mentionedUserIds)!==null&&l!==void 0?l:(u=d.message.mentionedUsers)===null||u===void 0?void 0:u.map(function(m){return m.userId})}),f.userId),d}return z(n,e),n}(Yn),PR=function(e){function n(t,r,i){var a=e.call(this,t,"MRCT",i)||this;return a.channelUrl=i.channel_url,a.channelType=i.channel_type,a.event=new Nb(i),a}return z(n,e),n}(Yn),xR=function(e){function n(t,r,i){var a=e.call(this,t,"MTHD",i)||this;return a.event=new TR(t,i),a}return z(n,e),n}(Yn),FR=function(e){function n(t,r,i){var a=e.call(this,t,"MCNT",i)||this;return a.groupChannelMemberCounts=i.group_channels.map(function(s){return{channelUrl:s.channel_url,memberCount:s.member_count,joinedMemberCount:s.joined_member_count,updatedAt:s.ts}}),a.openChannelMemberCounts=i.open_channels.map(function(s){return{channelUrl:s.channel_url,participantCount:s.participant_count,updatedAt:s.ts}}),a}return z(n,e),n}(Yn),BR=function(e){function n(t,r,i){var a=e.call(this,t,"PEDI",i)||this;return a.event=new X6(t,i),a.status=hE(i.poll.status)||i.poll.status,a.channelUrl=i.channel_url,a.channelType=i.channel_type,a}return z(n,e),n}(Yn),hr;(function(e){e.NONE="none",e.JOINED="joined",e.INVITED="invited",e.LEFT="left"})(hr||(hr={}));var Zs,ea,na,Vl,is,Sf,Po,Tf,xa=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.state=null,i.role=null,i.isMuted=!1,i.isBlockedByMe=!1,i.isBlockingMe=!1,i.state=Wt(hr,r.state)?r.state:null,i.role=Wt(Zr,r.role)?r.role:null,typeof r.is_muted=="boolean"&&(i.isMuted=r.is_muted),typeof r.is_blocked_by_me=="boolean"&&(i.isBlockedByMe=r.is_blocked_by_me),typeof r.is_blocking_me=="boolean"&&(i.isBlockingMe=r.is_blocking_me),i}return z(n,e),n.payloadify=function(t){return Qe(vt(Y(Y({},e.payloadify.call(this,t)),{state:t.state,role:t.role,is_muted:t.isMuted,is_blocked_by_me:t.isBlockedByMe,is_blocking_me:t.isBlockingMe})))},n}(uc),J6=function(e){function n(t,r){var i,a,s=this;return(s=e.call(this,t)||this).channelUrl=(i=r.channel_url)!==null&&i!==void 0?i:"",s.channelType=(a=r.channel_type)!==null&&a!==void 0?a:ln.GROUP,s.member=new Yt(s._iid,r.user),s.deliveryAt=r.ts,s}return z(n,e),n}(Rr);(function(e){e.ALL="all",e.PUBLIC="public",e.PRIVATE="private"})(Zs||(Zs={})),function(e){e.ALL="all",e.JOINED="joined_only",e.INVITED="invited_only",e.INVITED_BY_FRIEND="invited_by_friend",e.INVITED_BY_NON_FRIEND="invited_by_non_friend"}(ea||(ea={})),function(e){e.ALL="all",e.SUPER="super",e.NON_SUPER="nonsuper",e.BROADCAST_ONLY="broadcast_only",e.EXCLUSIVE_ONLY="exclusive_only"}(na||(na={})),function(e){e.ALL="all",e.UNREAD_MESSAGE="unread_message"}(Vl||(Vl={})),function(e){e.ALL="all",e.UNHIDDEN="unhidden_only",e.HIDDEN="hidden_only",e.HIDDEN_ALLOW_AUTO_UNHIDE="hidden_allow_auto_unhide",e.HIDDEN_PREVENT_AUTO_UNHIDE="hidden_prevent_auto_unhide"}(is||(is={})),function(e){e.ALL="all",e.OPERATOR="operator",e.NONOPERATOR="nonoperator"}(Sf||(Sf={})),function(e){e.AND="AND",e.OR="OR"}(Po||(Po={})),function(e){e.MEMBER_NICKNAME="member_nickname",e.CHANNEL_NAME="channel_name"}(Tf||(Tf={}));var ar,zp=function(){function e(n){var t,r,i,a,s,o,l,u,d,f,m,p,E,_,b;this._searchFilter=null,this._userIdsFilter=null,this.includeEmpty=(t=n==null?void 0:n.includeEmpty)!==null&&t!==void 0&&t,this.nicknameContainsFilter=(r=n==null?void 0:n.nicknameContainsFilter)!==null&&r!==void 0?r:null,this.nicknameStartsWithFilter=(i=n==null?void 0:n.nicknameStartsWithFilter)!==null&&i!==void 0?i:null,this.nicknameExactMatchFilter=(a=n==null?void 0:n.nicknameExactMatchFilter)!==null&&a!==void 0?a:null,this.channelNameContainsFilter=(s=n==null?void 0:n.channelNameContainsFilter)!==null&&s!==void 0?s:"",this.myMemberStateFilter=(o=n==null?void 0:n.myMemberStateFilter)!==null&&o!==void 0?o:ea.ALL,this.customTypesFilter=(l=n==null?void 0:n.customTypesFilter)!==null&&l!==void 0?l:null,this.channelUrlsFilter=(u=n==null?void 0:n.channelUrlsFilter)!==null&&u!==void 0?u:null,this.superChannelFilter=(d=n==null?void 0:n.superChannelFilter)!==null&&d!==void 0?d:na.ALL,this.publicChannelFilter=(f=n==null?void 0:n.publicChannelFilter)!==null&&f!==void 0?f:Zs.ALL,this.customTypeStartsWithFilter=(m=n==null?void 0:n.customTypeStartsWithFilter)!==null&&m!==void 0?m:null,this.unreadChannelFilter=(p=n==null?void 0:n.unreadChannelFilter)!==null&&p!==void 0?p:Vl.ALL,this.hiddenChannelFilter=(E=n==null?void 0:n.hiddenChannelFilter)!==null&&E!==void 0?E:is.UNHIDDEN,this.includeFrozen=(_=n==null?void 0:n.includeFrozen)===null||_===void 0||_,n!=null&&n.createdAfter&&(this.createdAfter=n.createdAfter),n!=null&&n.createdBefore&&(this.createdBefore=n.createdBefore),this.includeMetaData=(b=n==null?void 0:n.includeMetaData)===null||b===void 0||b}return e.prototype._isFriend=function(n){return!(!n||!n.friendDiscoveryKey&&!n.friendName)},Object.defineProperty(e.prototype,"searchFilter",{get:function(){return this._searchFilter},enumerable:!1,configurable:!0}),e.prototype.setSearchFilter=function(n,t){Array.isArray(n)&&n.length!==0&&typeof t=="string"&&t&&(this._searchFilter={query:t,fields:n})},Object.defineProperty(e.prototype,"userIdsFilter",{get:function(){return this._userIdsFilter},enumerable:!1,configurable:!0}),e.prototype.setUserIdsFilter=function(n,t,r){r===void 0&&(r=Po.AND),this._userIdsFilter={userIds:n,includeMode:t,queryType:r}},e.prototype.clone=function(){var n,t=new e;this.searchFilter&&t.setSearchFilter(this.searchFilter.fields,(n=this.searchFilter.query)!==null&&n!==void 0?n:void 0),this.userIdsFilter&&t.setUserIdsFilter(this.userIdsFilter.userIds,this.userIdsFilter.includeMode,this.userIdsFilter.queryType);var r=JSON.parse(JSON.stringify(this));return Object.keys(r).forEach(function(i){t[i]=r[i]}),t},e.prototype.match=function(n,t){if(this._searchFilter){var r=this._searchFilter,i=r.query,a=r.fields;if(i&&a&&a.length>0&&!a.some(function(E){switch(E){case Tf.CHANNEL_NAME:return n.name.toLowerCase().includes(i.toLowerCase());case Tf.MEMBER_NICKNAME:return n.members.some(function(_){return _.nickname.toLowerCase().includes(i.toLowerCase())});default:return!0}}))return!1}if(this._userIdsFilter){var s=this._userIdsFilter,o=s.userIds,l=s.includeMode,u=s.queryType,d=n.members.map(function(E){return E.userId});if(l){if(o.length>0)switch(u){case Po.AND:if(o.some(function(E){return!d.includes(E)}))return!1;break;case Po.OR:if(o.every(function(E){return!d.includes(E)}))return!1}}else if(o.includes(t)||o.push(t),n.members.length>o.length||!uk(o,d))return!1}if(!this.includeEmpty&&!n.lastMessage||!this.includeFrozen&&n.isFrozen||this.customTypesFilter&&this.customTypesFilter.length>0&&!this.customTypesFilter.includes("*")&&!this.customTypesFilter.includes(n.customType)||this.customTypeStartsWithFilter&&!new RegExp("^".concat(this.customTypeStartsWithFilter)).test(n.customType)||this.channelNameContainsFilter&&!n.name.toLowerCase().includes(this.channelNameContainsFilter.toLowerCase()))return!1;if(this.nicknameContainsFilter){var f=this.nicknameContainsFilter.toLowerCase();if(!n.members.some(function(E){return E.userId!==t&&E.nickname.toLowerCase().includes(f)}))return!1}if(this.nicknameStartsWithFilter){var m=this.nicknameStartsWithFilter.toLowerCase();if(!n.members.some(function(E){return E.userId!==t&&E.nickname.toLowerCase().startsWith(m)}))return!1}if(this.nicknameExactMatchFilter){var p=this.nicknameExactMatchFilter.toLowerCase();if(!n.members.some(function(E){return E.userId!==t&&E.nickname.toLowerCase()!=p}))return!1}if(this.channelUrlsFilter&&this.channelUrlsFilter.length>0&&!this.channelUrlsFilter.includes(n.url))return!1;if(this.myMemberStateFilter)switch(this.myMemberStateFilter){case ea.ALL:if(n.myMemberState==="none")return!1;break;case ea.JOINED:if(n.myMemberState!=="joined")return!1;break;case ea.INVITED:if(n.myMemberState!=="invited")return!1;break;case ea.INVITED_BY_FRIEND:if(n.myMemberState!=="invited"||!this._isFriend(n.inviter))return!1;break;case ea.INVITED_BY_NON_FRIEND:if(n.myMemberState!=="invited"||this._isFriend(n.inviter))return!1}if(this.hiddenChannelFilter)switch(this.hiddenChannelFilter){case is.UNHIDDEN:if(n.isHidden||n.hiddenState!=="unhidden")return!1;break;case is.HIDDEN:if(!n.isHidden)return!1;break;case is.HIDDEN_ALLOW_AUTO_UNHIDE:if(!n.isHidden||n.hiddenState!=="hidden_allow_auto_unhide")return!1;break;case is.HIDDEN_PREVENT_AUTO_UNHIDE:if(!n.isHidden||n.hiddenState!=="hidden_prevent_auto_unhide")return!1}if(this.unreadChannelFilter&&this.unreadChannelFilter===Vl.UNREAD_MESSAGE&&n.unreadMessageCount===0)return!1;if(this.publicChannelFilter)switch(this.publicChannelFilter){case Zs.PUBLIC:if(!n.isPublic)return!1;break;case Zs.PRIVATE:if(n.isPublic)return!1}if(this.superChannelFilter)switch(this.superChannelFilter){case na.SUPER:if(!n.isSuper)return!1;break;case na.NON_SUPER:if(n.isSuper)return!1}return!(this.createdAfter&&n.createdAt<this.createdAfter)&&!(this.createdBefore&&n.createdAt>this.createdBefore)},e}(),eF=function(e){function n(t,r){var i=r.sdkState,a=r.cacheContext,s=e.call(this,t)||this;return s._channels=new Map,s._sdkState=i,s._cacheContext=a,s}return z(n,e),Object.defineProperty(n.prototype,"collection",{get:function(){var t=this._cacheContext.nestdb;return Oe(!!t).throw(ee.databaseError),t.collection(pR)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),n.prototype._serialize=function(t,r){return r===void 0&&(r=0),Y(Y({},t.serialize()),{lastMessageUpdatedAt:t.lastMessage?t.lastMessage.createdAt:0,syncIndex:r})},n.prototype._deserialize=function(t){return zr.of(this._iid).buildGroupChannelFromSerializedData(t)},Object.defineProperty(n.prototype,"channels",{get:function(){return Nt([],ut(this._channels.values()),!1)},enumerable:!1,configurable:!0}),n.prototype.isCachedInMemory=function(t){return this._channels.has(t)},n.prototype.filterOffsetChanged=function(t){var r=this;return t.filter(function(i){if(r._channels.has(i.url))return r._channels.get(i.url).messageOffsetTimestamp<i.messageOffsetTimestamp})},n.prototype.get=function(t){return A(this,void 0,void 0,function(){var r,i;return I(this,function(a){switch(a.label){case 0:return this._channels.has(t)?[3,3]:this.localCacheEnabled?[4,this.collection.getByKey(t)]:[3,2];case 1:if(r=a.sent())return i=this._deserialize(r),this._channels.set(t,i),[2,i];a.label=2;case 2:return[2,void 0];case 3:return[2,this._channels.get(t)]}})})},n.prototype.fetch=function(t){var r=t.token,i=t.limit,a=i===void 0?mR:i,s=t.backward,o=s!==void 0&&s,l=t.filter,u=l===void 0?new zp:l,d=t.order,f=d===void 0?rr.LATEST_LAST_MESSAGE:d,m=t.borderlineChannelUrl;return A(this,void 0,void 0,function(){var p,E,_,b,C,y=this;return I(this,function(T){switch(T.label){case 0:return this.localCacheEnabled?(p=!!m,E=Lm(f),_={where:function(N){if(r)switch(f){case rr.CHANNEL_NAME_ALPHABETICAL:if(!o&&N.name.localeCompare(r)<0||o&&N.name.localeCompare(r)>0)return!1;break;case rr.CHRONOLOGICAL:if(!o&&N.createdAt>r||o&&N.createdAt<r)return!1;break;case rr.LATEST_LAST_MESSAGE:if(!o&&N.lastMessageUpdatedAt>r||o&&N.lastMessageUpdatedAt<r)return!1}return p&&m&&m===N.url?(p=!1,!1):!p&&u.match(y._deserialize(N),y._sdkState.userId)},index:E,backward:o},[4,this.collection.query(_)]):[3,3];case 1:return[4,T.sent().fetch({limit:a})];case 2:return b=T.sent(),(C=b.map(function(N){return y._deserialize(N)})).forEach(function(N){!u.includeMetaData&&N.cachedMetaData&&N._clearCachedMetaData(),y._channels.has(N.url)||y._channels.set(N.url,N)}),[2,C];case 3:return[2,[]]}})})},n.prototype.upsert=function(t,r){return A(this,void 0,void 0,function(){var i,a,s,o=this;return I(this,function(l){switch(l.label){case 0:if(i=[],t.forEach(function(u){if(o._channels.has(u.url)){var d=o._channels.get(u.url);d._pinnedMessagesUpdatedAt<u._pinnedMessagesUpdatedAt&&(d._pinnedMessagesUpdatedAt=u._pinnedMessagesUpdatedAt),d._messageCollectionLastAccessedAt>u._messageCollectionLastAccessedAt&&(u._messageCollectionLastAccessedAt=d._messageCollectionLastAccessedAt),u.cachedMetaData instanceof Map&&u.cachedMetaData.size>0&&r&&(d._updateCachedMetaData(u.cachedMetaData,r).isUpdated||Object.assign(u,{_cachedMetaData:d.cachedMetaData})),d._update(u),i.push(d)}else o._channels.set(u.url,u),i.push(u)}),!this.localCacheEnabled)return[3,2];for(a=[],s=0;s<i.length;s++)a.push(this._serialize(i[s],s));return[4,this.collection.upsertMany(a)];case 1:l.sent(),l.label=2;case 2:return[2,i]}})})},n.prototype.remove=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l;return I(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,7]),r=Ge(t),i=r.next(),u.label=1;case 1:return i.done?[3,4]:(a=i.value,this._channels.delete(a),this.localCacheEnabled?[4,this.collection.remove(a)]:[3,3]);case 2:u.sent(),u.label=3;case 3:return i=r.next(),[3,1];case 4:return[3,7];case 5:return s=u.sent(),o={error:s},[3,7];case 6:try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(o)throw o.error}return[7];case 7:return[2]}})})},n.prototype.clear=function(){return A(this,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return this.clearMemoryCache(),this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},n.prototype.clearMemoryCache=function(){this._channels.clear()},n.prototype._setBlockStateOfAllChannels=function(t,r,i){return A(this,void 0,void 0,function(){var a,s,o,l,u,d,f,m,p,E,_,b,C,y,T,N,w,O,L;return I(this,function(P){switch(P.label){case 0:if(a=[],t===this._sdkState.userId)try{for(s=Ge(this._channels.values()),o=s.next();!o.done;o=s.next()){m=o.value;try{for(y=void 0,l=Ge(m.members),u=l.next();!u.done;u=l.next())if((_=u.value).userId===r){_.isBlockedByMe=i,a.push(m);break}}catch(U){y={error:U}}finally{try{u&&!u.done&&(T=l.return)&&T.call(l)}finally{if(y)throw y.error}}}}catch(U){b={error:U}}finally{try{o&&!o.done&&(C=s.return)&&C.call(s)}finally{if(b)throw b.error}}else if(r===this._sdkState.userId)try{for(d=Ge(this._channels.values()),f=d.next();!f.done;f=d.next()){m=f.value;try{for(O=void 0,p=Ge(m.members),E=p.next();!E.done;E=p.next())if((_=E.value).userId===t){_.isBlockingMe=i,a.push(m);break}}catch(U){O={error:U}}finally{try{E&&!E.done&&(L=p.return)&&L.call(p)}finally{if(O)throw O.error}}}}catch(U){N={error:U}}finally{try{f&&!f.done&&(w=d.return)&&w.call(d)}finally{if(N)throw N.error}}return a.length>0?[4,this.upsert(a)]:[3,2];case 1:P.sent(),P.label=2;case 2:return[2]}})})},n.prototype.block=function(t,r){return A(this,void 0,void 0,function(){return I(this,function(i){switch(i.label){case 0:return[4,this._setBlockStateOfAllChannels(t,r,!0)];case 1:return i.sent(),[2]}})})},n.prototype.unblock=function(t,r){return A(this,void 0,void 0,function(){return I(this,function(i){switch(i.label){case 0:return[4,this._setBlockStateOfAllChannels(t,r,!1)];case 1:return i.sent(),[2]}})})},n.prototype.markAsRead=function(t,r){return r===void 0&&(r=Nt([],ut(this._channels.keys()),!1)),A(this,void 0,void 0,function(){var i,a,s,o,l,u,d,f;return I(this,function(m){switch(m.label){case 0:i=[],m.label=1;case 1:m.trys.push([1,6,7,8]),a=Ge(r),s=a.next(),m.label=2;case 2:return s.done?[3,5]:(o=s.value,[4,this.get(o)]);case 3:(l=m.sent())!=null&&l._updateUnreadMemberState(this._sdkState.userId,t)&&(l._updateUnreadCount(0,0),i.push(l)),m.label=4;case 4:return s=a.next(),[3,2];case 5:return[3,8];case 6:return u=m.sent(),d={error:u},[3,8];case 7:try{s&&!s.done&&(f=a.return)&&f.call(a)}finally{if(d)throw d.error}return[7];case 8:return i.length>0?[4,this.upsert(i)]:[3,10];case 9:m.sent(),m.label=10;case 10:return[2]}})})},n}(Rr),Um={invitedUserIds:void 0,channelUrl:void 0,coverUrl:void 0,coverImage:void 0,isDistinct:void 0,isSuper:void 0,isBroadcast:void 0,isExclusive:void 0,isPublic:void 0,isDiscoverable:void 0,isStrict:void 0,isEphemeral:void 0,accessCode:void 0,name:void 0,data:void 0,customType:void 0,operatorUserIds:void 0,messageSurvivalSeconds:void 0},SE=function(e){return Qt("string",e.invitedUserIds,!0)&&Z("string",e.channelUrl,!0)&&Z("string",e.coverUrl,!0)&&(Vr(e.coverImage)||Z("string",e.coverImage,!0))&&Z("boolean",e.isDistinct,!0)&&Z("boolean",e.isSuper,!0)&&Z("boolean",e.isBroadcast,!0)&&Z("boolean",e.isExclusive,!0)&&Z("boolean",e.isPublic,!0)&&Z("boolean",e.isStrict,!0)&&Z("boolean",e.isDiscoverable,!0)&&Z("boolean",e.isEphemeral,!0)&&Z("string",e.accessCode,!0)&&Z("string",e.name,!0)&&Z("string",e.data,!0)&&Z("string",e.customType,!0)&&Qt("string",e.operatorUserIds,!0)&&Z("number",e.messageSurvivalSeconds,!0)},cp={customTypes:void 0,includeEmpty:!1,includeFrozen:!0,includeMetaData:!0,includeChatNotification:!1},TE=function(e){return Qt("string",e.customTypes,!0)&&Z("boolean",e.includeEmpty,!0)&&Z("boolean",e.includeFrozen,!0)&&Z("boolean",e.includeMetaData,!0)&&Z("boolean",e.includeChatNotification,!0)},HR={myMemberStateFilter:ea.ALL},GR=function(e){return Wt(ea,e.myMemberStateFilter)};(function(e){e.GROUP_CHANNEL_UNREAD_MENTION_COUNT="group_channel_unread_mention_count",e.NONSUPER_UNREAD_MENTION_COUNT="non_super_group_channel_unread_mention_count",e.SUPER_UNREAD_MENTION_COUNT="super_group_channel_unread_mention_count",e.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT="group_channel_unread_message_count",e.NONSUPER_UNREAD_MESSAGE_COUNT="non_super_group_channel_unread_message_count",e.SUPER_UNREAD_MESSAGE_COUNT="super_group_channel_unread_message_count",e.GROUP_CHANNEL_INVITATION_COUNT="group_channel_invitation_count",e.NONSUPER_INVITATION_COUNT="non_super_group_channel_invitation_count",e.SUPER_INVITATION_COUNT="super_group_channel_invitation_count"})(ar||(ar={}));var tF={keys:[ar.GROUP_CHANNEL_UNREAD_MENTION_COUNT,ar.NONSUPER_UNREAD_MENTION_COUNT,ar.SUPER_UNREAD_MENTION_COUNT,ar.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT,ar.NONSUPER_UNREAD_MESSAGE_COUNT,ar.SUPER_UNREAD_MESSAGE_COUNT,ar.GROUP_CHANNEL_INVITATION_COUNT,ar.NONSUPER_INVITATION_COUNT,ar.SUPER_INVITATION_COUNT],customTypeFilters:void 0,customTypesFilter:void 0},nF={channelCustomTypesFilter:void 0,superChannelFilter:na.ALL},rF=function(e){return Qt("string",e.channelCustomTypesFilter,!0)&&Wt(na,e.superChannelFilter)},iF={channelUrl:void 0,scheduledStatus:void 0,messageTypeFilter:mi.ALL},um=Y({},fe),Dm=function(e){return e.startsWith("EVENT_")||e===fe.SYNC_CHANNEL_CHANGELOGS||e===fe.REFRESH_CHANNEL},on=function(e){function n(t){var r=t.channels,i=t.context,a=t.isWebSocketEventComing,s=a!==void 0&&a,o=t.ts,l=e.call(this)||this;return l.channels=r,l.context=i,l.isWebSocketEventComing=s,l.ts=o,l}return z(n,e),n}(qn),To=function(e){function n(t){var r=t.channelUrls,i=t.context,a=t.isWebSocketEventComing,s=a!==void 0&&a,o=e.call(this)||this;return o.channelUrls=r,o.context=i,o.isWebSocketEventComing=s,o}return z(n,e),n}(qn),aF=function(e){function n(t){var r=t.channel,i=e.call(this)||this;return i.channel=r,i}return z(n,e),n}(qn),sF=function(){function e(n){var t=n.groupChannelCache,r=n.userInfoCache,i=n.messageCache,a=n.unsentMessageCache,s=n.dispatcher,o=this;this._observers=new Map,s.on(function(l){return A(o,void 0,void 0,function(){var u,d,f,m,p,E,_,b,C,y,T,N,w,O,L,P,U,B,F=this;return I(this,function(H){switch(H.label){case 0:if(!(l instanceof on))return[3,19];if(u=l.channels,w=l.context,O=l.isWebSocketEventComing,d=u.filter(function(G){return G instanceof za}),w.source!==fe.EVENT_CHANNEL_RESET_HISTORY&&w.source!==fe.EVENT_CHANNEL_HIDDEN)return[3,9];H.label=1;case 1:H.trys.push([1,6,7,8]),f=Ge(d),m=f.next(),H.label=2;case 2:return m.done?[3,5]:(C=m.value,[4,i.removeUnderOffset(C.url,C.messageOffsetTimestamp)]);case 3:H.sent(),H.label=4;case 4:return m=f.next(),[3,2];case 5:return[3,8];case 6:return p=H.sent(),L={error:p},[3,8];case 7:try{m&&!m.done&&(P=f.return)&&P.call(f)}finally{if(L)throw L.error}return[7];case 8:return[3,17];case 9:E=t.filterOffsetChanged(d),H.label=10;case 10:H.trys.push([10,15,16,17]),_=Ge(E),b=_.next(),H.label=11;case 11:return b.done?[3,14]:(C=b.value,[4,i.removeUnderOffset(C.url,C.messageOffsetTimestamp)]);case 12:H.sent(),H.label=13;case 13:return b=_.next(),[3,11];case 14:return[3,17];case 15:return y=H.sent(),U={error:y},[3,17];case 16:try{b&&!b.done&&(B=_.return)&&B.call(_)}finally{if(U)throw U.error}return[7];case 17:return[4,t.upsert(d,l.ts)];case 18:return T=H.sent(),O||this._broadcastUpdateEvent(T,w),[3,25];case 19:return l instanceof To?(N=l.channelUrls,w=l.context,O=l.isWebSocketEventComing,[4,t.remove(N)]):[3,22];case 20:return H.sent(),[4,dr(function(){return A(F,void 0,void 0,function(){var G,j,x,V,K,W;return I(this,function(Q){switch(Q.label){case 0:Q.trys.push([0,6,7,8]),G=Ge(N),j=G.next(),Q.label=1;case 1:return j.done?[3,5]:(x=j.value,[4,i.removeMessagesOfChannel(x)]);case 2:return Q.sent(),[4,a.removeMessagesOfChannel(x)];case 3:Q.sent(),Q.label=4;case 4:return j=G.next(),[3,1];case 5:return[3,8];case 6:return V=Q.sent(),K={error:V},[3,8];case 7:try{j&&!j.done&&(W=G.return)&&W.call(G)}finally{if(K)throw K.error}return[7];case 8:return[2]}})})})];case 21:return H.sent(),O||this._broadcastRemoveEvent(N,w),[3,25];case 22:return l instanceof NR?[4,t.fetch({token:Number.MAX_SAFE_INTEGER,limit:Number.MAX_SAFE_INTEGER})]:[3,25];case 23:return H.sent(),[4,r.fetch({limit:Number.MAX_SAFE_INTEGER})];case 24:H.sent(),H.label=25;case 25:return[2]}})})})}return e.prototype._broadcastUpdateEvent=function(n,t){var r,i;try{for(var a=Ge(this._observers.values()),s=a.next();!s.done;s=a.next()){var o=s.value;o.onUpdate&&o.onUpdate(n,t)}}catch(l){r={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}},e.prototype._broadcastRemoveEvent=function(n,t){var r,i;try{for(var a=Ge(this._observers.values()),s=a.next();!s.done;s=a.next()){var o=s.value;o.onRemove&&o.onRemove(n,t)}}catch(l){r={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}},e.prototype.subscribe=function(n,t){this._observers.set(n,t)},e.prototype.unsubscribe=function(n){this._observers.delete(n)},e.prototype.unsubscribeAll=function(){this._observers.clear()},e}(),oF=function(e){function n(t){var r=t.userId,i=t.ts,a=t.token,s=t.filter,o=t.includeChatNotification,l=o!==void 0&&o,u=e.call(this)||this,d=Y(Y({},cp),s),f=d.customTypes,m=d.includeEmpty,p=d.includeFrozen;return u.method=Ie.GET,u.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/my_group_channels/changelogs"),u.params=Qe(vt({show_delivery_receipt:!0,show_member:!0,show_read_receipt:!0,change_ts:i||null,token:a,custom_types:f,show_empty:m,show_frozen:p,include_chat_notification:l})),u}return z(n,e),n}(we),lF=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.updatedChannels=r.updated.map(function(a){return new za(t,Object.assign(a,{ts:r.ts}))}),i.deletedChannelUrls=r.deleted,i.hasMore=r.has_more,i.token=r.next,i.ts=r.ts,i}return z(n,e),n}(Pe),ME=function(e){function n(t){var r=t.channelUrl,i=t.isInternalCall,a=t.showLatestMessage,s=e.call(this)||this;return s.method=Ie.GET,s.path="".concat(i?pk:Ui,"/").concat(encodeURIComponent(r)),s.params={show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_latest_message:a!=null&&a},s}return z(n,e),n}(we),NE=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.channel=new za(t,r),i}return z(n,e),n}(Pe),Vc={includeEmpty:!1,includeFrozen:!0,includeMetaData:!0,includeChatNotification:!1,channelUrlsFilter:void 0,customTypesFilter:void 0,customTypeStartsWithFilter:void 0,nicknameContainsFilter:void 0,nicknameStartsWithFilter:void 0,nicknameExactMatchFilter:void 0,channelNameContainsFilter:void 0,myMemberStateFilter:ea.ALL,unreadChannelFilter:Vl.ALL,superChannelFilter:na.ALL,publicChannelFilter:Zs.ALL,hiddenChannelFilter:is.ALL,userIdsFilter:{userIds:[],includeMode:!0,queryType:Po.AND},searchFilter:{query:void 0,fields:[]},metadataKey:void 0,metadataValues:void 0,metadataOrderKeyFilter:void 0,metadataValueStartsWith:void 0,order:rr.LATEST_LAST_MESSAGE,createdAfter:void 0,createdBefore:void 0},uF=function(e){function n(t){var r=this,i=t.userId,a=t.token,s=t.limit,o=t.order,l=t.includeEmpty,u=t.myMemberStateFilter,d=t.superChannelFilter,f=t.publicChannelFilter,m=t.unreadChannelFilter,p=t.nicknameContainsFilter,E=t.nicknameStartsWithFilter,_=t.nicknameExactMatchFilter,b=t.channelNameContainsFilter,C=t.channelUrlsFilter,y=t.customTypesFilter,T=t.customTypeStartsWithFilter,N=t.hiddenChannelFilter,w=t.metadataOrderKeyFilter,O=t.metadataKey,L=t.metadataValues,P=t.metadataValueStartsWith,U=t.includeFrozen,B=t.includeMetaData,F=t.searchFilter,H=t.userIdsFilter,G=t.includeChatNotification,j=G!==void 0&&G,x=t.includeLeftChannel,V=x!==void 0&&x,K=t.createdAfter,W=t.createdBefore;return(r=e.call(this)||this).method=Ie.GET,r.path="".concat(Tn,"/").concat(encodeURIComponent(i),"/my_group_channels"),r.params=Qe({token:a,limit:s,order:o??Vc.order,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:l??Vc.includeEmpty,member_state_filter:u??Vc.myMemberStateFilter,super_mode:d??Vc.superChannelFilter,public_mode:f??Vc.publicChannelFilter,unread_filter:m??Vc.unreadChannelFilter,members_nickname_contains:p,members_nickname_startswith:E,members_nickname:_,name_contains:b,channel_urls:C,custom_types:y,custom_type_startswith:T,hidden_mode:N,metadata_order_key:w,metadata_key:O,metadata_values:L,metadata_value_startswith:P,show_frozen:U,show_metadata:B,include_chat_notification:j,include_left_channel:V,created_after:K,created_before:W}),F&&F.query&&F.fields&&(r.params.search_query=F.query,r.params.search_fields=F.fields),H&&H.userIds&&H.userIds.length>0&&(H.includeMode?(r.params.members_include_in=H.userIds,r.params.query_type=H.queryType.toUpperCase()):r.params.members_exactly_in=H.userIds),r}return z(n,e),n}(we),cF=function(e){function n(t,r){var i=e.call(this,t,r)||this;i.channels=[];var a=r.next,s=r.channels,o=r.ts;return i.token=a,s&&s.length>0&&(i.channels=s.map(function(l){return l.ts=o,new za(t,l)})),i.ts=o??0,i}return z(n,e),n}(Pe),dF=function(e){function n(t){var r=t.userId,i=t.filter,a=e.call(this)||this,s=i.myMemberStateFilter;return a.method=Ie.GET,a.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/group_channel_count"),a.params={state:s??ea.ALL},a}return z(n,e),n}(we),hF=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.groupChannelCount=r.group_channel_count,i}return z(n,e),n}(Pe),fF=function(e){function n(t){var r=t.userId,i=t.filter,a=e.call(this)||this,s=i.keys,o=i.customTypeFilters,l=i.customTypesFilter;return a.method=Ie.GET,a.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/unread_item_count"),a.params=Qe({item_keys:s,custom_types:l??o}),a}return z(n,e),n}(we),vF=function(e){function n(t,r){var i=e.call(this,t,r)||this;return typeof r[ar.GROUP_CHANNEL_UNREAD_MENTION_COUNT]=="number"&&(i.groupChannelUnreadMentionCount=r[ar.GROUP_CHANNEL_UNREAD_MENTION_COUNT]),typeof r[ar.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT]=="number"&&(i.groupChannelUnreadMessageCount=r[ar.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT]),typeof r[ar.GROUP_CHANNEL_INVITATION_COUNT]=="number"&&(i.groupChannelInvitationCount=r[ar.GROUP_CHANNEL_INVITATION_COUNT]),typeof r[ar.SUPER_UNREAD_MENTION_COUNT]=="number"&&(i.superGroupChannelUnreadMentionCount=r[ar.SUPER_UNREAD_MENTION_COUNT]),typeof r[ar.SUPER_UNREAD_MESSAGE_COUNT]=="number"&&(i.superGroupChannelUnreadMessageCount=r[ar.SUPER_UNREAD_MESSAGE_COUNT]),typeof r[ar.SUPER_INVITATION_COUNT]=="number"&&(i.superGroupChannelInvitationCount=r[ar.SUPER_INVITATION_COUNT]),typeof r[ar.NONSUPER_UNREAD_MENTION_COUNT]=="number"&&(i.nonSuperGroupChannelUnreadMentionCount=r[ar.NONSUPER_UNREAD_MENTION_COUNT]),typeof r[ar.NONSUPER_UNREAD_MESSAGE_COUNT]=="number"&&(i.nonSuperGroupChannelUnreadMessageCount=r[ar.NONSUPER_UNREAD_MESSAGE_COUNT]),typeof r[ar.NONSUPER_INVITATION_COUNT]=="number"&&(i.nonSuperGroupChannelInvitationCount=r[ar.NONSUPER_INVITATION_COUNT]),i}return z(n,e),n}(Pe),mF=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=Ie.GET,i.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/unread_channel_count"),i}return z(n,e),n}(we),pF=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.unreadCount=r.unread_count,i}return z(n,e),n}(Pe),gF=function(e){function n(t){var r=t.userId,i=t.filter,a=t.includeFeedChannel,s=a!==void 0&&a,o=e.call(this)||this,l=i.channelCustomTypesFilter,u=i.superChannelFilter;return o.method=Ie.GET,o.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/unread_message_count"),o.params={super_mode:u??na.ALL,custom_types:l,include_feed_channel:s},o}return z(n,e),n}(we),_F=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.unreadCount=r.unread_count,i.unreadFeedCount=r.unread_feed_count,i}return z(n,e),n}(Pe),EF=function(e){function n(t){var r=t.channelUrl,i=t.scheduledStatus,a=t.messageTypeFilter,s=e.call(this)||this;return s.method=Ie.GET,s.path="".concat(Zw,"/count"),s.params={channel_url:r,status:bF(i)},a&&(s.params.message_type=a),s}return z(n,e),n}(we),yF=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.count=r.count,i}return z(n,e),n}(Pe),bF=function(e){if(!e)return[];var n=[];return e.forEach(function(t){switch(t){case xl.PENDING:n.push(Pa.PENDING);break;case xl.SENT:n.push(Pa.IN_QUEUE),n.push(Pa.SENT);break;case xl.CANCELED:n.push(Pa.CANCELED);break;case xl.FAILED:n.push(Pa.FAILED)}}),n},CF=function(e){function n(t){var r=this,i=t.userId,a=t.channelUrl,s=t.coverUrl,o=t.coverImage,l=t.isDistinct,u=t.isSuper,d=t.isBroadcast,f=t.isPublic,m=t.isExclusive,p=t.isDiscoverable,E=t.isStrict,_=t.isEphemeral,b=t.accessCode,C=t.name,y=t.data,T=t.customType,N=t.messageSurvivalSeconds,w=t.invitedUserIds,O=t.operatorUserIds;return(r=e.call(this)||this).method=Ie.POST,r.path=Ui,r.params=Qe({user_ids:Nt([i],ut(w??[]),!1).filter(function(L,P,U){return P===U.indexOf(L)}),channel_url:a,cover_url:s,cover_file:o,is_distinct:l,is_super:u,is_broadcast:d,is_exclusive:m,is_public:f,is_discoverable:p,strict:E,is_ephemeral:_,access_code:b,name:C,data:y,custom_type:T,operator_ids:O,message_survival_seconds:N}),r}return z(n,e),n}(we),SF=function(e){function n(t,r){var i,a=this;return(a=e.call(this,t,r)||this).channel=new za(t,r),a.isCreated=(i=r.is_created)===null||i===void 0||i,a}return z(n,e),n}(Pe),jM=function(e){function n(t){var r=t.userId,i=t.channelUrls,a=e.call(this)||this;return a.method=Ie.PUT,a.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/mark_as_read_all"),a.params={channel_urls:i},a}return z(n,e),n}(we);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}z(n,e)})(Pe);var TF=function(e){function n(t){var r=this,i=t.channelUrl,a=t.userId,s=t.accessCode;return(r=e.call(this)||this).method=Ie.PUT,r.path="".concat(Ui,"/").concat(encodeURIComponent(i),"/join"),r.params={user_id:a,access_code:s},r}return z(n,e),n}(we),MF=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.channel=new za(t,r),i}return z(n,e),n}(Pe),NF=function(e){function n(t,r,i){var a=e.call(this,t,r,i)||this,s=i.data,o=s.member_count,l=o===void 0?0:o,u=s.joined_member_count,d=u===void 0?0:u,f=s.users,m=f===void 0?null:f;return a.memberCount=l,a.joinedMemberCount=d,a.members=Array.isArray(m)?m.map(function(p){return new xa(t,p)}):[new xa(t,i.data)],a}return z(n,e),n}(Wo),IF=function(e){function n(t){var r=this,i=t.channelUrl,a=t.userId,s=t.shouldRemoveOperatorStatus;return(r=e.call(this)||this).method=Ie.PUT,r.path="".concat(Ui,"/").concat(encodeURIComponent(i),"/leave"),r.params={user_id:a,should_remove_operator_status:s},r}return z(n,e),n}(we);(function(e){function n(t,r){return e.call(this,t,r)||this}z(n,e)})(Pe);var AF=function(e){function n(t,r,i){var a=e.call(this,t,r,i)||this,s=i.data,o=s.member_count,l=o===void 0?0:o,u=s.joined_member_count,d=u===void 0?0:u;return a.memberCount=l,a.joinedMemberCount=d,a.member=new xa(a._iid,i.data),a}return z(n,e),n}(Wo),wF=function(e){function n(t){var r=this,i=t.channelUrl,a=t.userIds;return(r=e.call(this)||this).method=Ie.POST,r.path="".concat(Ui,"/").concat(encodeURIComponent(i),"/invite"),r.params={user_ids:a},r}return z(n,e),n}(we),RF=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.channel=new za(t,r),i}return z(n,e),n}(Pe),OF=function(e){function n(t,r,i){var a=e.call(this,t,r,i)||this;a.inviter=null;var s=i.data,o=s.member_count,l=o===void 0?0:o,u=s.joined_member_count,d=u===void 0?0:u,f=s.inviter,m=s.invitees,p=m===void 0?[]:m;return a.memberCount=l,a.joinedMemberCount=d,f&&Object.keys(f).length>0&&(a.inviter=new Yt(t,f)),a.invitees=p.map(function(E){return new xa(t,E)}),a}return z(n,e),n}(Wo),LF=function(e){function n(t){var r=this,i=t.channelUrl,a=t.userId;return(r=e.call(this)||this).method=Ie.PUT,r.path="".concat(Ui,"/").concat(encodeURIComponent(i),"/decline"),r.params={user_id:a},r}return z(n,e),n}(we);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.channel=new za(t,r),i.channel.myMemberState=hr.NONE,i}z(n,e)})(Pe);var UF=function(e){function n(t,r,i){var a=e.call(this,t,r,i)||this,s=i.data,o=s.member_count,l=s.joined_member_count,u=s.inviter,d=s.invitee;return a.memberCount=o??0,a.joinedMemberCount=l??0,a.inviter=new Yt(t,u),a.invitee=new xa(t,d),a}return z(n,e),n}(Wo),IE={hidePreviousMessages:!1,allowAutoUnhide:!0},DF=function(e){function n(t){var r=this,i=t.channelUrl,a=t.userId,s=t.hidePreviousMessages,o=t.allowAutoUnhide;return(r=e.call(this)||this).method=Ie.PUT,r.path="".concat(Ui,"/").concat(encodeURIComponent(i),"/hide"),r.params={user_id:a,hide_previous_messages:s??IE.hidePreviousMessages,allow_auto_unhide:o??IE.allowAutoUnhide},r}return z(n,e),n}(we),kF=function(e){function n(t,r){var i=e.call(this,t,r)||this,a=r.ts_message_offset;return i.messageOffsetTimestamp=a,i}return z(n,e),n}(Pe),PF=function(e){function n(t,r,i){var a,s,o,l=this;return(l=e.call(this,t,"SYEV",i)||this).allowAutoUnhide=null,l.hidePreviousMessages=null,l.messageOffsetTimestamp=null,i.data&&(l.allowAutoUnhide=(a=i.data.allow_auto_unhide)!==null&&a!==void 0?a:null,l.hidePreviousMessages=(s=i.data.hide_previous_messages)!==null&&s!==void 0?s:null),l.messageOffsetTimestamp=(o=i.ts_message_offset)!==null&&o!==void 0?o:null,l}return z(n,e),n}(Yn),xF=function(e){function n(t){var r=t.channelUrl,i=t.time;return e.call(this,{code:"TPST",ackRequired:!1,payload:{channel_url:r,time:i}})||this}return z(n,e),n}(pi),FF=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return a.user=new Yt(t,i.data),a}return z(n,e),n}(Yn),BF=function(e){function n(t){var r=t.channelUrl,i=t.time;return e.call(this,{code:"TPEN",ackRequired:!1,payload:{channel_url:r,time:i}})||this}return z(n,e),n}(pi),HF=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return a.user=new Yt(t,i.data),a}return z(n,e),n}(Yn),GF=function(e){function n(t){var r=t.channelUrl,i=t.messageId;return e.call(this,{code:"MACK",ackRequired:!1,payload:{channel_url:r,msg_id:i}})||this}return z(n,e),n}(pi),zR=function(e){function n(t,r){var i,a,s,o,l,u,d,f,m,p,E,_,b,C,y,T,N,w,O,L,P,U,B,F=this;return(F=e.call(this,t,r)||this).includeEmpty=!1,F.includeFrozen=!0,F.includeMetaData=!0,F.includeChatNotification=!1,F.channelUrlsFilter=null,F.customTypesFilter=null,F.customTypeStartsWithFilter=null,F.nicknameContainsFilter=null,F.nicknameStartsWithFilter=null,F.nicknameExactMatchFilter=null,F.channelNameContainsFilter="",F.myMemberStateFilter=ea.ALL,F.unreadChannelFilter=Vl.ALL,F.superChannelFilter=na.ALL,F.publicChannelFilter=Zs.ALL,F.hiddenChannelFilter=is.UNHIDDEN,F.searchFilter={fields:[],query:null},F.userIdsFilter={userIds:[],includeMode:!0,queryType:Po.AND},F.metadataKey=null,F.metadataValues=null,F.metadataOrderKeyFilter=null,F.metadataValueStartsWith=null,F.order=rr.LATEST_LAST_MESSAGE,F.includeEmpty=(i=r.includeEmpty)!==null&&i!==void 0&&i,F.includeFrozen=(a=r.includeFrozen)===null||a===void 0||a,F.includeMetaData=(s=r.includeMetaData)===null||s===void 0||s,F.includeChatNotification=(o=r.includeChatNotification)!==null&&o!==void 0&&o,F.channelUrlsFilter=(l=r.channelUrlsFilter)!==null&&l!==void 0?l:null,F.customTypesFilter=(u=r.customTypesFilter)!==null&&u!==void 0?u:null,F.customTypeStartsWithFilter=(d=r.customTypeStartsWithFilter)!==null&&d!==void 0?d:"",F.nicknameContainsFilter=(f=r.nicknameContainsFilter)!==null&&f!==void 0?f:null,F.nicknameStartsWithFilter=(m=r.nicknameStartsWithFilter)!==null&&m!==void 0?m:null,F.nicknameExactMatchFilter=(p=r.nicknameExactMatchFilter)!==null&&p!==void 0?p:null,F.channelNameContainsFilter=(E=r.channelNameContainsFilter)!==null&&E!==void 0?E:"",F.myMemberStateFilter=(_=r.myMemberStateFilter)!==null&&_!==void 0?_:ea.ALL,F.unreadChannelFilter=(b=r.unreadChannelFilter)!==null&&b!==void 0?b:Vl.ALL,F.superChannelFilter=(C=r.superChannelFilter)!==null&&C!==void 0?C:na.ALL,F.publicChannelFilter=(y=r.publicChannelFilter)!==null&&y!==void 0?y:Zs.ALL,F.hiddenChannelFilter=(T=r.hiddenChannelFilter)!==null&&T!==void 0?T:is.UNHIDDEN,F.searchFilter=(N=r.searchFilter)!==null&&N!==void 0?N:{fields:[],query:null},F.userIdsFilter=(w=r.userIdsFilter)!==null&&w!==void 0?w:{userIds:[],includeMode:!0,queryType:Po.AND},F.metadataKey=(O=r.metadataKey)!==null&&O!==void 0?O:null,F.metadataValues=(L=r.metadataValues)!==null&&L!==void 0?L:null,F.metadataOrderKeyFilter=(P=r.metadataOrderKeyFilter)!==null&&P!==void 0?P:null,F.metadataValueStartsWith=(U=r.metadataValueStartsWith)!==null&&U!==void 0?U:null,F.order=(B=r.order)!==null&&B!==void 0?B:rr.LATEST_LAST_MESSAGE,r.createdAfter&&(F.createdAfter=r.createdAfter),r.createdBefore&&(F.createdBefore=r.createdBefore),F}return z(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&Z("boolean",this.includeEmpty)&&Z("boolean",this.includeFrozen)&&Z("boolean",this.includeMetaData)&&Z("string",this.channelNameContainsFilter)&&Qt("string",this.channelUrlsFilter,!0)&&Qt("string",this.customTypesFilter,!0)&&Z("string",this.customTypeStartsWithFilter)&&Z("string",this.nicknameContainsFilter,!0)&&Z("string",this.nicknameStartsWithFilter,!0)&&Z("string",this.nicknameExactMatchFilter,!0)&&Wt(ea,this.myMemberStateFilter)&&Wt(na,this.superChannelFilter)&&Wt(Zs,this.publicChannelFilter)&&Wt(Vl,this.unreadChannelFilter)&&Wt(is,this.hiddenChannelFilter)&&Qt(Tf,this.searchFilter.fields)&&Z("string",this.searchFilter.query,!0)&&Qt("string",this.userIdsFilter.userIds)&&Z("boolean",this.userIdsFilter.includeMode)&&Wt(Po,this.userIdsFilter.queryType)&&Wt(rr,this.order)&&Z("string",this.metadataOrderKeyFilter,!0)&&Z("string",this.metadataKey,!0)&&Qt("string",this.metadataValues,!0)&&Z("string",this.metadataValueStartsWith,!0)&&AT(this.createdAfter,!0)&&AT(this.createdBefore,!0)},n.prototype.serialize=function(){return Ad(this)},n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i;return I(this,function(a){switch(a.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,[4,zr.of(this._iid).getMyGroupChannels(this._token,vt(Y({},this)),this.limit,fe.REQUEST_CHANNEL,!0)]):[3,2]:[3,5];case 1:return t=a.sent(),r=t.channels,i=t.token,this._token=i,this._hasNext=!!i,this._isLoading=!1,[2,r];case 2:return[2,[]];case 3:throw ee.queryInProgress;case 4:return[3,6];case 5:throw ee.invalidParameters;case 6:return[2]}})})},n}(qo),zF=function(e){function n(t){var r=t.channelUrl,i=t.userId,a=e.call(this)||this;return a.method=Ie.PUT,a.path="".concat(Ui,"/").concat(encodeURIComponent(r),"/messages/mark_as_delivered"),a.params=Qe({user_id:i}),a}return z(n,e),n}(we);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}z(n,e)})(Pe);var dp,jF=function(e){function n(t,r,i){var a=e.call(this,t,"DLVR",i)||this;return a.channelUrl=i.channel_url,a.deliveredStateUpdate=i.updated,a}return z(n,e),n}(Yn),Ws=function(){function e(n){var t=n.top,r=t===void 0?Number.MAX_SAFE_INTEGER:t,i=n.bottom,a=i===void 0?0:i;this.top=r,this.bottom=a}return e.prototype.includes=function(){for(var n=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.every(function(i){return n.top<=i&&i<=n.bottom})},e.prototype.overlap=function(n){return this.includes(n.top)||this.includes(n.bottom)},e.prototype.intersect=function(){for(var n=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.some(function(i){return n.top<=i&&i<=n.bottom})},e.prototype.extends=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this.top=Math.min.apply(Math,Nt([this.top],ut(n),!1)),this.bottom=Math.max.apply(Math,Nt([this.bottom],ut(n),!1))},e}(),bu={},zr=function(e){function n(t,r){var i,a=this;return(a=e.call(this,t,Y(Y({},r),{channelType:ln.GROUP}))||this)._leftChannels=new Map,a._markAsReadAllLastSentAt=0,a._forceDisableMack=(i=r.forceDisableMack)!==null&&i!==void 0&&i,a._groupChannelHandlers=new Map,a._groupChannelCache=new eF(a._iid,{sdkState:r.sdkState,cacheContext:r.cacheContext}),a._userInfoCache=new bE(a._iid,{sdkState:r.sdkState,cacheContext:r.cacheContext}),a._groupChannelBroadcast=new sF({dispatcher:r.dispatcher,groupChannelCache:a._groupChannelCache,userInfoCache:a._userInfoCache,messageCache:Vu.of(a._iid),unsentMessageCache:tc.of(a._iid)}),setInterval(function(){var s,o,l=function(f){f.invalidateTypingStatus()&&(a._dispatcher.dispatch(new on({channels:[f],context:{source:fe.EVENT_CHANNEL_TYPING_STATUS_UPDATE}})),a._groupChannelHandlers.forEach(function(m){m.onTypingStatusUpdated&&m.onTypingStatusUpdated(f)}))};try{for(var u=Ge(a._groupChannelCache.channels),d=u.next();!d.done;d=u.next())l(d.value)}catch(f){s={error:f}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(s)throw s.error}}},1e3),a._dispatcher.on(function(s){if(s instanceof Yn)a._handleEvent(s).catch(function(d){if(Ai(d)&&a._sdkState.appState==="foreground")throw d});else if(s instanceof MR)A(a,void 0,void 0,function(){var d,f;return I(this,function(m){switch(m.label){case 0:return d=s.message,[4,this.getChannelFromCache(d.channelUrl)];case 1:return(f=m.sent())&&!f.isFrozen?[3,3]:[4,this.getChannelWithoutCache(d.channelUrl,!0)];case 2:f=m.sent(),m.label=3;case 3:return f.isFrozen||(d instanceof fi?f._autoResendUserMessage(d):d instanceof Mr&&f._autoResendFileMessage(d)),[2]}})});else if(s instanceof IR)a.reduceDBSize();else if(s instanceof RR){var o=s.appConfigsInfo,l=s.configTs,u=o.message_purge_offset;u&&a._messageDataRetention(u),a._dispatcher.dispatch(new AR({configTs:l}))}else s instanceof J2&&A(a,void 0,void 0,function(){var d,f,m,p,E,_=this;return I(this,function(b){switch(b.label){case 0:return d=s.channelUrl,f=s.channelType,m=s.parentMessage,p=new TR(this._iid,{channel_type:ln.GROUP,channel_url:d,parent_message_id:m.messageId,thread_info:ip.payloadify(m.threadInfo)}),f!==ln.GROUP?[3,2]:[4,this.getChannel(d,!0)];case 1:E=b.sent(),it(function(){return A(_,void 0,void 0,function(){var C,y,T,N,w;return I(this,function(O){try{for(C=Ge(this._groupChannelHandlers.values()),y=C.next();!y.done;y=C.next())(T=y.value).onThreadInfoUpdated&&T.onThreadInfoUpdated(E,p)}catch(L){N={error:L}}finally{try{y&&!y.done&&(w=C.return)&&w.call(C)}finally{if(N)throw N.error}}return[2]})})}),b.label=2;case 2:return[2]}})})}),bu[t]||(bu[t]=a),a}return z(n,e),Object.defineProperty(n.prototype,"_messageCache",{get:function(){return Vu.of(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_unsentMessageCache",{get:function(){return tc.of(this._iid)},enumerable:!1,configurable:!0}),n.of=function(t){return bu[t]||(bu[t]=new n(t,X.of(t))),bu[t]},n.clear=function(t){bu[t]&&delete bu[t]},Object.defineProperty(n.prototype,"handlers",{get:function(){return Nt([],ut(this._groupChannelHandlers.values()),!1)},enumerable:!1,configurable:!0}),n.prototype.buildGroupChannelFromSerializedData=function(t){var r=ko(t);return new za(this._iid,za.payloadify(r))},n.prototype.buildGroupChannelListQueryFromSerializedData=function(t){var r=ko(t);return new zR(this._iid,r)},n.prototype.buildMemberFromSerializedData=function(t){var r=ko(t);return new xa(this._iid,xa.payloadify(r))},n.prototype.getChannelFromCache=function(t){var r;return A(this,void 0,void 0,function(){return I(this,function(i){switch(i.label){case 0:return[4,this._groupChannelCache.get(t)];case 1:return[2,(r=i.sent())!==null&&r!==void 0?r:null]}})})},n.prototype.getChannelsFromCache=function(t,r,i,a,s){return A(this,void 0,void 0,function(){return I(this,function(o){switch(o.label){case 0:return[4,this._groupChannelCache.fetch({token:t,filter:r,order:i,limit:a,borderlineChannelUrl:s})];case 1:return[2,o.sent()]}})})},n.prototype.upsertChannelsToCache=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){switch(r.label){case 0:return[4,this._groupChannelCache.upsert(t)];case 1:return[2,r.sent()]}})})},n.prototype.removeChannelsFromCache=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){switch(r.label){case 0:return[4,this._groupChannelCache.remove(t)];case 1:return r.sent(),[2]}})})},n.prototype.clearChannelsFromCache=function(){return A(this,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return[4,this._groupChannelCache.clear()];case 1:return t.sent(),[2]}})})},n.prototype.reduceDBSize=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,d,f,m,p,E,_,b;return I(this,function(C){switch(C.label){case 0:return t=Vu.of(this._iid),r=X.of(this._iid).cacheContext,i=r.localCacheConfig,a=r.nestdb,r.localCacheEnabled&&a&&a.state==$s.OPENED?(s=1024*i.maxSize*1024,[4,a.estimateUsage()]):[2];case 1:if((o=C.sent())<s)return[2];l=[],u=this._groupChannelCache.channels,d={},E=0,C.label=2;case 2:return E<u.length?[4,this.getMessagesFromCache(u[E].url,0,"prev",new to)]:[3,5];case 3:f=C.sent(),d[u[E].url]=JSON.stringify(f).length,m=new dk({channel:u[E],cachedMessageCount:f.length}),l.push(m),C.label=4;case 4:return E++,[3,2];case 5:p=l.sort(i.clearOrderComparator),E=0,C.label=6;case 6:return E<p.length?[4,t.removeMessagesOfChannel(p[E].channel.url)]:[3,10];case 7:return C.sent(),[4,t._getGroupChannelPreferenceSize(p[E].channel.url)];case 8:if(_=C.sent(),b=d[p[E].channel.url]+_,(o-=b)<s)return[3,10];C.label=9;case 9:return E++,[3,6];case 10:return[4,bE.of(this._iid).clear()];case 11:return C.sent(),[2]}})})},n.prototype._messageDataRetention=function(t){var r;return A(this,void 0,void 0,function(){var i,a,s,o,l,u,d,f,m,p,E=this;return I(this,function(_){switch(_.label){case 0:i=[],a=Vu.of(this._iid),s=function(b){var C,y;return I(this,function(T){switch(T.label){case 0:return C=b.customType,y=(r=t[C])!==null&&r!==void 0?r:t.global,[4,a.removeUnderOffset(b.url,y,!0)];case 1:return T.sent(),b.lastMessage&&b.lastMessage.createdAt<=y&&(b.lastMessage=null,i.push(b),it(function(){return A(E,void 0,void 0,function(){var N,w,O,L,P;return I(this,function(U){try{for(N=Ge(this._groupChannelHandlers.values()),w=N.next();!w.done;w=N.next())(O=w.value).onChannelChanged&&O.onChannelChanged(b)}catch(B){L={error:B}}finally{try{w&&!w.done&&(P=N.return)&&P.call(N)}finally{if(L)throw L.error}}return[2]})})})),o._dispatcher.dispatch(new x2({channelUrl:b.url,messageDeletionTimestamp:y,source:fe.EVENT_MESSAGE_OFFSET_UPDATED})),[2]}})},o=this,_.label=1;case 1:_.trys.push([1,6,7,8]),l=Ge(this._groupChannelCache.channels),u=l.next(),_.label=2;case 2:return u.done?[3,5]:(d=u.value,[5,s(d)]);case 3:_.sent(),_.label=4;case 4:return u=l.next(),[3,2];case 5:return[3,8];case 6:return f=_.sent(),m={error:f},[3,8];case 7:try{u&&!u.done&&(p=l.return)&&p.call(l)}finally{if(m)throw m.error}return[7];case 8:return i.length>0&&this._dispatcher.dispatch(new on({channels:i,context:{source:fe.EVENT_CHANNEL_UPDATED}})),[2]}})})},n.prototype._isSuperGroupMackDisabled=function(t){var r=X.of(this._iid).appInfo;return!(!t.isSuper||t.isBroadcast||!(r!=null&&r.disableSuperGroupMack))},n.prototype._getCachedUserInfo=function(t){return this._userInfoCache.getUserInfoFromCache(t)},n.prototype._upsertCachedUserInfo=function(t,r){X.of(this._iid).useMemberInfoInMessage&&this._userInfoCache.upsert(t,r)},n.prototype._handleEvent=function(t){var r,i;return A(this,void 0,void 0,function(){var a,s,o,l,u,d,f,m,p,E,_,b,C,y,T,N,w,O,L,P,U,B,F,H,G,j,x,V,K,W,Q,J,$,te,re,ve,ie,le,Ae,oe,he,me,Be,pe,ye,Ee,Ue,Ye,De,We,Je,Le,He,At,Ve,st,mt,et,St,Rt,xe,Ht,Xt,Ke,Ct,Dt,Vt,rn,Zt,Mn,cn,ht,ct,dt,ke,ge,Xe,Et,Pt,Jt,Tt,vn,Sn,pt,Mt,dn,In,Ze,ot,Fe,Ot,Lt,$t,an,Nn,xn,tt,ae,je,gt,sn,bn,qt,Fn,sr,Pn,bt,un,mn,pn,Cr,yi,Dr,tu,_c,Zo,oo,Jo,lo,el,Fd,Bd,nu,ya,tl,Va,nl,ks,zn,ru,rl,uo,il,hs,iu,au,su,fs,$a,qa,co,Ps,ba,Hd,Ec,al,Gd,zd,sl,jd,Vd,ol,ho,fo,ll,Xf,$d,yc,ul,bc,Cc,vs,An=this;return I(this,function(en){switch(en.label){case 0:switch(en.trys.push([0,88,,89]),t.code){case"MESG":case"FILE":case"ADMM":case"BRDM":return[3,1];case"MEDI":case"FEDI":case"AEDI":return[3,4];case"DELM":return[3,7];case"READ":return[3,10];case"DLVR":return[3,13];case"MRCT":return[3,15];case"MTHD":return[3,27];case"MCNT":return[3,31];case"PEDI":return[3,40];case"VOTE":return[3,43];case"SYEV":return[3,46];case"USEV":return[3,86]}return[3,87];case 1:return m=null,t.code==="MESG"?m=t.as(Lb):t.code==="FILE"?m=t.as(Ib):t.code!=="ADMM"&&t.code!="BRDM"||(m=t.as(DR)),m?(a=m.message,s=m.isMentioned,o=m.forceUpdateLastMessage,a.channelType!==ln.GROUP?[3,3]:(Q=this._groupChannelCache.isCachedInMemory(a.channelUrl),G=a instanceof fr&&a.sender.userId===this._sdkState.userId,[4,this.getChannel(a.channelUrl,!0)])):[3,3];case 2:if(l=en.sent(),_=X.of(this._iid).useMemberInfoInMessage,this._forceDisableMack||this._isSuperGroupMackDisabled(l)||a instanceof Zu||G||dr(function(){return A(An,void 0,void 0,function(){var Ce;return I(this,function(ue){switch(ue.label){case 0:return Ce=new GF(a),[4,this._requestQueue.send(Ce)];case 1:return ue.sent(),[2]}})})}),a instanceof fr){u=a.sender,l.isSuper&&this._upsertCachedUserInfo(u,a.createdAt);try{for(d=Ge(l.members),f=d.next();!f.done;f=d.next())if((Pn=f.value).userId===a.sender.userId){_&&(Pn.nickname=a.sender.nickname,Pn.plainProfileUrl=a.sender.plainProfileUrl,Pn.metaData=a.sender.metaData,Pn.isBlockedByMe=a.sender.isBlockedByMe);break}}catch(Ce){Ec={error:Ce}}finally{try{f&&!f.done&&(al=d.return)&&al.call(d)}finally{if(Ec)throw Ec.error}}_&&s&&((r=a.mentionedUsers)===null||r===void 0||r.forEach(function(Ce){var ue,xt;try{for(var It=Ge(l.members),wt=It.next();!wt.done;wt=It.next()){var Kn=wt.value;if(Ce.userId===Kn.userId){Kn.nickname=Ce.nickname,Kn.plainProfileUrl=Ce.plainProfileUrl,Kn.metaData=Ce.metaData;break}}}catch(Rn){ue={error:Rn}}finally{try{wt&&!wt.done&&(xt=It.return)&&xt.call(It)}finally{if(ue)throw ue.error}}})),G&&(w=this._sessionManager.currentUser)&&(w.nickname=a.sender.nickname,w.plainProfileUrl=a.sender.plainProfileUrl,w.metaData=a.sender.metaData)}a.silent&&!G||(l.isEphemeral||Q)&&(l._updateLastMessage(a),G||l._shouldUpdateUnreadCountWith(a)&&l._updateUnreadCount(l.unreadMessageCount+1,l.unreadMentionCount+(s?1:0))),o&&l._updateLastMessage(a),this._dispatcher.dispatch(new on({channels:[l],context:{source:fe.EVENT_MESSAGE_RECEIVED}})),a.silent&&!G||it(function(){return A(An,void 0,void 0,function(){var Ce,ue,xt,It,wt;return I(this,function(Kn){try{for(Ce=Ge(this._groupChannelHandlers.values()),ue=Ce.next();!ue.done;ue=Ce.next())(xt=ue.value).onChannelChanged&&xt.onChannelChanged(l)}catch(Rn){It={error:Rn}}finally{try{ue&&!ue.done&&(wt=Ce.return)&&wt.call(Ce)}finally{if(It)throw It.error}}return[2]})})}),this._dispatcher.dispatch(new er({messages:[a],source:fe.EVENT_MESSAGE_RECEIVED})),it(function(){return A(An,void 0,void 0,function(){var Ce,ue,xt,It,wt;return I(this,function(Kn){try{for(Ce=Ge(this._groupChannelHandlers.values()),ue=Ce.next();!ue.done;ue=Ce.next())(xt=ue.value).onMessageReceived&&xt.onMessageReceived(l,a),s&&xt.onMentionReceived&&xt.onMentionReceived(l,a)}catch(Rn){It={error:Rn}}finally{try{ue&&!ue.done&&(wt=Ce.return)&&wt.call(Ce)}finally{if(It)throw It.error}}return[2]})})}),en.label=3;case 3:return[3,87];case 4:return m=null,t.code==="MEDI"?m=t.as(ap):t.code==="FEDI"?m=t.as(sp):t.code==="AEDI"&&(m=t.as(kR)),m?(p=m.message,E=m.mentionCountChange,_=X.of(this._iid).useMemberInfoInMessage,p.threadInfo&&(p.threadInfo.unreadReplyCount=void 0),p.channelType!==ln.GROUP?[3,6]:(Q=this._groupChannelCache.isCachedInMemory(p.channelUrl),[4,this.getChannel(p.channelUrl,!0)])):[3,6];case 5:if(b=en.sent(),G=!1,p instanceof fr){G=p.sender.userId===this._sdkState.userId,b.isSuper&&this._upsertCachedUserInfo(p.sender,p.updatedAt);try{for(C=Ge(b.members),y=C.next();!y.done;y=C.next())if((Pn=y.value).userId===p.sender.userId){_&&(Pn.nickname=p.sender.nickname,Pn.plainProfileUrl=p.sender.plainProfileUrl,Pn.metaData=p.sender.metaData,Pn.isBlockedByMe=p.sender.isBlockedByMe);break}}catch(Ce){Gd={error:Ce}}finally{try{y&&!y.done&&(zd=C.return)&&zd.call(C)}finally{if(Gd)throw Gd.error}}}T=!1,G?(N=p.sender,(w=this._sessionManager.currentUser)&&(w.nickname=N.nickname,w.plainProfileUrl=N.plainProfileUrl,w.metaData=N.metaData)):b.isReadMessage(p)||E!==0&&!p.silent&&Q&&(b._updateUnreadCount(b.unreadMessageCount,b.unreadMentionCount+E),T=!0),b._updateLastMessage(p)?T=!0:!((i=b.lastMessage)===null||i===void 0)&&i.isIdentical(p)&&(Q?b._updateLastMessage(p)&&(T=!0):T=!0),O=!1,b.lastPinnedMessage&&b.lastPinnedMessage.messageId===p.messageId&&(b.lastPinnedMessage=p,T=!0,O=!0),T&&(this._dispatcher.dispatch(new on({channels:[b],context:{source:O?fe.EVENT_PINNED_MESSAGE_UPDATED:fe.EVENT_MESSAGE_UPDATED}})),p.silent&&!G||it(function(){return A(An,void 0,void 0,function(){var Ce,ue,xt,It,wt;return I(this,function(Kn){try{for(Ce=Ge(this._groupChannelHandlers.values()),ue=Ce.next();!ue.done;ue=Ce.next())(xt=ue.value).onChannelChanged&&xt.onChannelChanged(b)}catch(Rn){It={error:Rn}}finally{try{ue&&!ue.done&&(wt=Ce.return)&&wt.call(Ce)}finally{if(It)throw It.error}}return[2]})})}),O&&it(function(){return A(An,void 0,void 0,function(){var Ce,ue,xt,It,wt;return I(this,function(Kn){try{for(Ce=Ge(this._groupChannelHandlers.values()),ue=Ce.next();!ue.done;ue=Ce.next())(xt=ue.value).onPinnedMessageUpdated&&xt.onPinnedMessageUpdated(b)}catch(Rn){It={error:Rn}}finally{try{ue&&!ue.done&&(wt=Ce.return)&&wt.call(Ce)}finally{if(It)throw It.error}}return[2]})})})),this._dispatcher.dispatch(new er({messages:[p],source:fe.EVENT_MESSAGE_UPDATED})),it(function(){return A(An,void 0,void 0,function(){var Ce,ue,xt,It,wt;return I(this,function(Kn){try{for(Ce=Ge(this._groupChannelHandlers.values()),ue=Ce.next();!ue.done;ue=Ce.next())(xt=ue.value).onMessageUpdated&&xt.onMessageUpdated(b,p),E>0&&xt.onMentionReceived&&xt.onMentionReceived(b,p)}catch(Rn){It={error:Rn}}finally{try{ue&&!ue.done&&(wt=Ce.return)&&wt.call(Ce)}finally{if(It)throw It.error}}return[2]})})}),en.label=6;case 6:return[3,87];case 7:return L=t.as(i2),xe=L.channelUrl,Ht=L.channelType,P=L.messageId,U=L.silent,B=L.messageCreatedAt,F=L.senderId,Ht!==ln.GROUP?[3,9]:[4,this.getChannel(xe,!0)];case 8:H=en.sent(),G=F===this._sdkState.userId,U||G||B>0&&H.myLastRead<B&&H.unreadMessageCount>0&&H._updateUnreadCount(H.unreadMessageCount-1,0),this._dispatcher.dispatch(new Tb({messageIds:[P],source:fe.EVENT_MESSAGE_DELETED})),it(function(){return A(An,void 0,void 0,function(){var Ce,ue,xt,It,wt;return I(this,function(Kn){try{for(Ce=Ge(this._groupChannelHandlers.values()),ue=Ce.next();!ue.done;ue=Ce.next())(xt=ue.value).onMessageDeleted&&xt.onMessageDeleted(H,P)}catch(Rn){It={error:Rn}}finally{try{ue&&!ue.done&&(wt=Ce.return)&&wt.call(Ce)}finally{if(It)throw It.error}}return[2]})})}),en.label=9;case 9:return[3,87];case 10:return(j=t.as(Z2).readStatus).channelType!==ln.GROUP?[3,12]:(Q=this._groupChannelCache.isCachedInMemory(j.channelUrl),[4,this.getChannel(j.channelUrl,!0)]);case 11:x=en.sent(),Q&&x._updateUnreadMemberState(j.reader.userId,j.readAt),j.reader.userId===this._sdkState.userId?Q?(x.unreadMessageCount>0||x.unreadMentionCount>0)&&(x._updateUnreadCount(0,0),this._dispatcher.dispatch(new on({channels:[x],context:{source:fe.EVENT_CHANNEL_READ}})),it(function(){return A(An,void 0,void 0,function(){var Ce,ue,xt,It,wt;return I(this,function(Kn){try{for(Ce=Ge(this._groupChannelHandlers.values()),ue=Ce.next();!ue.done;ue=Ce.next())(xt=ue.value).onChannelChanged&&xt.onChannelChanged(x)}catch(Rn){It={error:Rn}}finally{try{ue&&!ue.done&&(wt=Ce.return)&&wt.call(Ce)}finally{if(It)throw It.error}}return[2]})})})):x.unreadMessageCount!==0&&x.unreadMentionCount!==0||(this._dispatcher.dispatch(new on({channels:[x],context:{source:fe.EVENT_CHANNEL_READ}})),it(function(){return A(An,void 0,void 0,function(){var Ce,ue,xt,It,wt;return I(this,function(Kn){try{for(Ce=Ge(this._groupChannelHandlers.values()),ue=Ce.next();!ue.done;ue=Ce.next())(xt=ue.value).onChannelChanged&&xt.onChannelChanged(x)}catch(Rn){It={error:Rn}}finally{try{ue&&!ue.done&&(wt=Ce.return)&&wt.call(Ce)}finally{if(It)throw It.error}}return[2]})})})):(this._dispatcher.dispatch(new on({channels:[x],context:{source:fe.EVENT_CHANNEL_READ}})),it(function(){return A(An,void 0,void 0,function(){var Ce,ue,xt,It,wt;return I(this,function(Kn){try{for(Ce=Ge(this._groupChannelHandlers.values()),ue=Ce.next();!ue.done;ue=Ce.next())(xt=ue.value).onUnreadMemberStatusUpdated&&xt.onUnreadMemberStatusUpdated(x)}catch(Rn){It={error:Rn}}finally{try{ue&&!ue.done&&(wt=Ce.return)&&wt.call(Ce)}finally{if(It)throw It.error}}return[2]})})})),en.label=12;case 12:return[3,87];case 13:return V=t.as(jF),xe=V.channelUrl,K=V.deliveredStateUpdate,W=K===void 0?{}:K,Q=this._groupChannelCache.isCachedInMemory(xe),[4,this.getChannel(xe,!0)];case 14:return J=en.sent(),Q&&Object.keys(W).forEach(function(Ce){J._updateUndeliveredMemberState(Ce,W[Ce])}),Object.keys(W).some(function(Ce){return Ce!==An._sdkState.userId})&&(this._dispatcher.dispatch(new on({channels:[J],context:{source:fe.EVENT_CHANNEL_DELIVERED}})),it(function(){return A(An,void 0,void 0,function(){var Ce,ue,xt,It,wt;return I(this,function(Kn){try{for(Ce=Ge(this._groupChannelHandlers.values()),ue=Ce.next();!ue.done;ue=Ce.next())(xt=ue.value).onUndeliveredMemberStatusUpdated&&xt.onUndeliveredMemberStatusUpdated(J)}catch(Rn){It={error:Rn}}finally{try{ue&&!ue.done&&(wt=Ce.return)&&wt.call(Ce)}finally{if(It)throw It.error}}return[2]})})})),[3,87];case 15:return $=t.as(PR),xe=$.channelUrl,Ht=$.channelType,te=$.event,Ht!==ln.GROUP?[3,26]:[4,this.getChannel(xe,!0)];case 16:return re=en.sent(),[4,this.getMessageFromCache(te.messageId)];case 17:if(pe=en.sent(),!re.isSuper)return[3,25];en.label=18;case 18:en.trys.push([18,23,24,25]),ve=Ge(Object.keys(te._sampledUserInfoList)),ie=ve.next(),en.label=19;case 19:return ie.done?[3,22]:(le=ie.value,[4,this._userInfoCache.get(le)]);case 20:(Ae=en.sent())?(Ae.plainProfileUrl=te._sampledUserInfoList[le].profile_url,Ae.nickname=te._sampledUserInfoList[le].nickname,this._upsertCachedUserInfo(Ae,te.updatedAt)):(oe=new Yt(this._iid,{user_id:le,nickname:te._sampledUserInfoList[le].nickname,profile_url:te._sampledUserInfoList[le].profile_url,require_auth_for_profile_image:te._sampledUserInfoList[le].require_auth_for_profile_image}),this._upsertCachedUserInfo(oe,te.updatedAt)),en.label=21;case 21:return ie=ve.next(),[3,19];case 22:return[3,25];case 23:return he=en.sent(),sl={error:he},[3,25];case 24:try{ie&&!ie.done&&(jd=ve.return)&&jd.call(ve)}finally{if(sl)throw sl.error}return[7];case 25:pe?pe instanceof Mi&&(pe.applyReactionEvent(te),this._dispatcher.dispatch(new er({messages:[pe],source:fe.EVENT_MESSAGE_REACTION_UPDATED}))):this._dispatcher.dispatch(new F2({event:te,source:fe.EVENT_MESSAGE_REACTION_UPDATED})),it(function(){return A(An,void 0,void 0,function(){var Ce,ue,xt,It,wt;return I(this,function(Kn){try{for(Ce=Ge(this._groupChannelHandlers.values()),ue=Ce.next();!ue.done;ue=Ce.next())(xt=ue.value).onReactionUpdated&&xt.onReactionUpdated(re,te)}catch(Rn){It={error:Rn}}finally{try{ue&&!ue.done&&(wt=Ce.return)&&wt.call(Ce)}finally{if(It)throw It.error}}return[2]})})}),en.label=26;case 26:return[3,87];case 27:return(me=t.as(xR).event).channelType!==ln.GROUP?[3,30]:[4,this.getChannel(me.channelUrl,!0)];case 28:return Be=en.sent(),[4,this.getMessageFromCache(me.targetMessageId)];case 29:if((pe=en.sent())?pe instanceof Mi&&(pe.applyThreadInfoUpdateEvent(me),this._dispatcher.dispatch(new er({messages:[pe],source:fe.EVENT_MESSAGE_THREADINFO_UPDATED}))):this._dispatcher.dispatch(new B2({event:me,source:fe.EVENT_MESSAGE_THREADINFO_UPDATED})),Be.isSuper)try{for(ye=Ge(me.threadInfo.mostRepliedUsers),Ee=ye.next();!Ee.done;Ee=ye.next())gt=Ee.value,this._upsertCachedUserInfo(gt,me.threadInfo.updatedAt)}catch(Ce){Vd={error:Ce}}finally{try{Ee&&!Ee.done&&(ol=ye.return)&&ol.call(ye)}finally{if(Vd)throw Vd.error}}it(function(){return A(An,void 0,void 0,function(){var Ce,ue,xt,It,wt;return I(this,function(Kn){try{for(Ce=Ge(this._groupChannelHandlers.values()),ue=Ce.next();!ue.done;ue=Ce.next())(xt=ue.value).onThreadInfoUpdated&&xt.onThreadInfoUpdated(Be,me)}catch(Rn){It={error:Rn}}finally{try{ue&&!ue.done&&(wt=Ce.return)&&wt.call(Ce)}finally{if(It)throw It.error}}return[2]})})}),en.label=30;case 30:return[3,87];case 31:Ue=t.as(FR).groupChannelMemberCounts,Ye=[],en.label=32;case 32:en.trys.push([32,37,38,39]),De=Ge(Ue),We=De.next(),en.label=33;case 33:return We.done?[3,36]:(Je=We.value,xe=Je.channelUrl,an=Je.memberCount,Nn=Je.joinedMemberCount,Le=Je.updatedAt,[4,this.getChannelFromCache(xe)]);case 34:(He=en.sent())&&He._setLatestMemberCount(an,Nn,Le)&&Ye.push(He),en.label=35;case 35:return We=De.next(),[3,33];case 36:return[3,39];case 37:return At=en.sent(),ho={error:At},[3,39];case 38:try{We&&!We.done&&(fo=De.return)&&fo.call(De)}finally{if(ho)throw ho.error}return[7];case 39:return Ye.length>0&&(this._dispatcher.dispatch(new on({channels:Ye,context:{source:fe.EVENT_CHANNEL_MEMBER_COUNT_UPDATED}})),it(function(){return A(An,void 0,void 0,function(){var Ce,ue,xt,It,wt;return I(this,function(Kn){try{for(Ce=Ge(this._groupChannelHandlers.values()),ue=Ce.next();!ue.done;ue=Ce.next())(xt=ue.value).onChannelMemberCountChanged&&xt.onChannelMemberCountChanged(Ye)}catch(Rn){It={error:Rn}}finally{try{ue&&!ue.done&&(wt=Ce.return)&&wt.call(Ce)}finally{if(It)throw It.error}}return[2]})})})),[3,87];case 40:return Ve=t.as(BR),st=Ve.event,mt=Ve.status,xe=Ve.channelUrl,Ht=Ve.channelType,xe&&Ht===ln.GROUP?[4,this.getChannel(xe,!0)]:[3,42];case 41:et=en.sent(),this._dispatcher.dispatch(new Mb({event:st,source:fe.EVENT_POLL_UPDATED})),it(mt===z2?function(){return A(An,void 0,void 0,function(){var Ce,ue,xt,It,wt;return I(this,function(Kn){try{for(Ce=Ge(this._groupChannelHandlers.values()),ue=Ce.next();!ue.done;ue=Ce.next())(xt=ue.value).onPollDeleted&&xt.onPollDeleted(et,st.pollId)}catch(Rn){It={error:Rn}}finally{try{ue&&!ue.done&&(wt=Ce.return)&&wt.call(Ce)}finally{if(It)throw It.error}}return[2]})})}:function(){return A(An,void 0,void 0,function(){var Ce,ue,xt,It,wt;return I(this,function(Kn){try{for(Ce=Ge(this._groupChannelHandlers.values()),ue=Ce.next();!ue.done;ue=Ce.next())(xt=ue.value).onPollUpdated&&xt.onPollUpdated(et,st)}catch(Rn){It={error:Rn}}finally{try{ue&&!ue.done&&(wt=Ce.return)&&wt.call(Ce)}finally{if(It)throw It.error}}return[2]})})}),en.label=42;case 42:return[3,87];case 43:return St=t.as(Ub),Rt=St.event,xe=St.channelUrl,Ht=St.channelType,xe&&Ht===ln.GROUP?[4,this.getChannel(xe,!0)]:[3,45];case 44:Xt=en.sent(),this._dispatcher.dispatch(new xp({event:Rt,source:fe.EVENT_POLL_VOTED})),it(function(){return A(An,void 0,void 0,function(){var Ce,ue,xt,It,wt;return I(this,function(Kn){try{for(Ce=Ge(this._groupChannelHandlers.values()),ue=Ce.next();!ue.done;ue=Ce.next())(xt=ue.value).onPollVoted&&xt.onPollVoted(Xt,Rt)}catch(Rn){It={error:Rn}}finally{try{ue&&!ue.done&&(wt=Ce.return)&&wt.call(Ce)}finally{if(It)throw It.error}}return[2]})})}),en.label=45;case 45:return[3,87];case 46:if(!(Ke=t.as(Wo).event).isGroupChannelEvent)return[3,85];switch(Ke.category){case Ln.CHANNEL_JOIN:return[3,47];case Ln.CHANNEL_LEAVE:return[3,49];case Ln.CHANNEL_OPERATOR_UPDATE:return[3,53];case Ln.CHANNEL_INVITE:return[3,55];case Ln.CHANNEL_DECLINE_INVITE:return[3,57];case Ln.TYPING_START:case Ln.TYPING_END:return[3,59];case Ln.USER_CHANNEL_MUTE:case Ln.USER_CHANNEL_UNMUTE:return[3,61];case Ln.USER_CHANNEL_BAN:return[3,63];case Ln.USER_CHANNEL_UNBAN:return[3,67];case Ln.CHANNEL_FREEZE:case Ln.CHANNEL_UNFREEZE:return[3,69];case Ln.CHANNEL_HIDE:return[3,71];case Ln.CHANNEL_UNHIDE:return[3,73];case Ln.CHANNEL_DELETED:return[3,75];case Ln.CHANNEL_PROP_CHANGED:return[3,77];case Ln.CHANNEL_META_DATA_CHANGED:return[3,79];case Ln.CHANNEL_META_COUNTERS_CHANGED:return[3,81];case Ln.PINNED_MESSAGE_CHANGED:return[3,83]}return[3,85];case 47:return[4,this.getChannel(Ke.channelUrl,!0)];case 48:if(Ct=en.sent(),Dt=t.as(NF),Vt=Dt.memberCount,rn=Dt.joinedMemberCount,Zt=Dt.members,Mn=!1,Zt.forEach(function(Ce){Ct.isExclusive||Ct.isSuper||Ct.isBroadcast?Mn=Mn||Ct._setLatestMemberCount(Vt,rn,Ke.ts):(Ce.state=hr.JOINED,Ct.addMember(Ce,Ke.ts),An._updateJoinedMemberCount(Ct)),Ce.userId===An._sdkState.userId&&(Ct.myMemberState=hr.JOINED)}),Ct.isSuper)try{for(cn=Ge(Zt),ht=cn.next();!ht.done;ht=cn.next())Pn=ht.value,this._upsertCachedUserInfo(Pn,Ke.ts)}catch(Ce){ll={error:Ce}}finally{try{ht&&!ht.done&&(Xf=cn.return)&&Xf.call(cn)}finally{if(ll)throw ll.error}}return this._dispatcher.dispatch(new on({channels:[Ct],context:{source:fe.EVENT_CHANNEL_JOINED,users:Zt}})),it(function(){return A(An,void 0,void 0,function(){return I(this,function(Ce){return this._groupChannelHandlers.forEach(function(ue){var xt,It;try{for(var wt=Ge(Zt),Kn=wt.next();!Kn.done;Kn=wt.next()){var Rn=Kn.value;ue.onUserJoined&&ue.onUserJoined(Ct,Rn)}}catch(ou){xt={error:ou}}finally{try{Kn&&!Kn.done&&(It=wt.return)&&It.call(wt)}finally{if(xt)throw xt.error}}Ct.isBroadcast&&Mn&&ue.onChannelMemberCountChanged&&ue.onChannelMemberCountChanged([Ct])}),[2]})})}),[3,85];case 49:return(bt=this._leftChannels.get(Ke.channelUrl))?(dt=bt.channel,[3,52]):[3,50];case 50:return[4,this.getChannel(Ke.channelUrl,!0)];case 51:dt=en.sent(),en.label=52;case 52:return ct=dt,ke=t.as(AF),an=ke.memberCount,Nn=ke.joinedMemberCount,ge=ke.member,Xe=!1,Et=X.of(this._iid).appInfo,ct.isExclusive||ct.isSuper||ct.isBroadcast?Xe=ct._setLatestMemberCount(an,Nn,Ke.ts):(Et!=null&&Et.enabledChannelMemberShipHistory?((Pt=ct.members.find(function(Ce){return Ce.userId===ge.userId}))&&(Pt.state=hr.LEFT),ct.memberCount=an):ct.removeMember(ge),this._updateJoinedMemberCount(ct)),ge.userId===this._sdkState.userId?(ct.myMemberState=hr.NONE,ct.invitedAt=0,ct.joinedAt=0,ct._updateUnreadCount(0,0),ct.isPublic?this._dispatcher.dispatch(new on({channels:[ct],context:{source:fe.EVENT_CHANNEL_LEFT,user:ge}})):(this._markAsLeave(ct),this._dispatcher.dispatch(new To({channelUrls:[ct.url],context:{source:fe.EVENT_CHANNEL_LEFT,user:ge}})))):this._dispatcher.dispatch(new on({channels:[ct],context:{source:fe.EVENT_CHANNEL_LEFT,user:ge}})),ct.isSuper&&this._upsertCachedUserInfo(ge,Ke.ts),it(function(){return A(An,void 0,void 0,function(){return I(this,function(Ce){return this._groupChannelHandlers.forEach(function(ue){ue.onUserLeft&&ue.onUserLeft(ct,ge),ct.isBroadcast&&Xe&&ue.onChannelMemberCountChanged&&ue.onChannelMemberCountChanged([ct])}),[2]})})}),[3,85];case 53:return[4,this.getChannel(Ke.channelUrl,!0)];case 54:Jt=en.sent(),Tt=t.as(OR).operators,vn=Tt.map(function(Ce){return Ce.userId});try{for(Sn=Ge(Jt.members),pt=Sn.next();!pt.done;pt=Sn.next())(Pn=pt.value).role=vn.includes(Pn.userId)?Zr.OPERATOR:Zr.NONE}catch(Ce){$d={error:Ce}}finally{try{pt&&!pt.done&&(yc=Sn.return)&&yc.call(Sn)}finally{if($d)throw $d.error}}return Jt.myRole=vn.includes(this._sdkState.userId)?Zr.OPERATOR:Zr.NONE,this._dispatcher.dispatch(new on({channels:[Jt],context:{source:fe.EVENT_CHANNEL_OPERATOR_UPDATED,operators:Tt}})),it(function(){return A(An,void 0,void 0,function(){return I(this,function(Ce){return this._groupChannelHandlers.forEach(function(ue){ue.onOperatorUpdated&&ue.onOperatorUpdated(Jt,Tt)}),[2]})})}),[3,85];case 55:return[4,this.getChannel(Ke.channelUrl,!0)];case 56:Mt=en.sent(),dn=t.as(OF),an=dn.memberCount,Nn=dn.joinedMemberCount,In=dn.inviter,(Ze=dn.invitees).forEach(function(Ce){return Ce.state=hr.INVITED});try{for(ot=Ge(Ze),Fe=ot.next();!Fe.done;Fe=ot.next())Ot=Fe.value,Mt.isExclusive||Mt.isSuper||Mt.isBroadcast?(Mt.isSuper&&this._userInfoCache.upsert(Ot,Ke.ts),Mt._setLatestMemberCount(an,Nn,Ke.ts)):Mt.addMember(Ot,Ke.ts),this._sdkState.userId===Ot.userId&&(Mt.hiddenState=Da.UNHIDDEN,Mt.myMemberState!==hr.JOINED&&(Mt.myMemberState=hr.INVITED),Mt.invitedAt=Ke.ts)}catch(Ce){ul={error:Ce}}finally{try{Fe&&!Fe.done&&(bc=ot.return)&&bc.call(ot)}finally{if(ul)throw ul.error}}return this._dispatcher.dispatch(new on({channels:[Mt],context:{source:fe.EVENT_CHANNEL_INVITED,inviter:In,invitees:Ze}})),it(function(){return A(An,void 0,void 0,function(){return I(this,function(Ce){return this._groupChannelHandlers.forEach(function(ue){ue.onUserReceivedInvitation&&ue.onUserReceivedInvitation(Mt,In,Ze)}),[2]})})}),[3,85];case 57:return[4,this.getChannel(Ke.channelUrl,!0)];case 58:return Lt=en.sent(),$t=t.as(UF),an=$t.memberCount,Nn=$t.joinedMemberCount,xn=$t.inviter,tt=$t.invitee,Lt.isExclusive||Lt.isSuper||Lt.isBroadcast?(Lt.isSuper&&this._userInfoCache.upsert(tt,Ke.ts),Lt._setLatestMemberCount(an,Nn,Ke.ts)):Lt.removeMember(tt),this._sdkState.userId===tt.userId?(Lt.invitedAt=0,Lt.myMemberState=hr.NONE,Lt.isPublic?this._dispatcher.dispatch(new on({channels:[Lt],context:{source:fe.EVENT_CHANNEL_DECLINED_INVITE,inviter:xn,invitee:tt}})):this._dispatcher.dispatch(new To({channelUrls:[Lt.url],context:{source:fe.EVENT_CHANNEL_DECLINED_INVITE,inviter:xn,invitee:tt}}))):this._dispatcher.dispatch(new on({channels:[Lt],context:{source:fe.EVENT_CHANNEL_DECLINED_INVITE,inviter:xn,invitee:tt}})),it(function(){return A(An,void 0,void 0,function(){return I(this,function(Ce){return this._groupChannelHandlers.forEach(function(ue){ue.onUserDeclinedInvitation&&ue.onUserDeclinedInvitation(Lt,xn,tt)}),[2]})})}),[3,85];case 59:return[4,this.getChannel(Ke.channelUrl,!0)];case 60:return ae=en.sent(),je=Ke.category===Ln.TYPING_START,gt=t.as(je?FF:HF).user,ae._updateTypingStatus(gt,je?Ke.ts:0),this._dispatcher.dispatch(new on({channels:[ae],context:{source:fe.EVENT_CHANNEL_TYPING_STATUS_UPDATE}})),it(function(){return A(An,void 0,void 0,function(){return I(this,function(Ce){return this._groupChannelHandlers.forEach(function(ue){ue.onTypingStatusUpdated&&ue.onTypingStatusUpdated(ae)}),[2]})})}),[3,85];case 61:return[4,this.getChannel(Ke.channelUrl,!0)];case 62:sn=en.sent(),bn=Ke.category===Ln.USER_CHANNEL_MUTE,(qt=t.as(bn?uR:cR).user).userId===this._sdkState.userId&&(sn.myMutedState=bn?ns.MUTED:ns.UNMUTED,sn._myMutedRemainingTime=qt.restrictionInfo.remainingDuration);try{for(Fn=Ge(sn.members),sr=Fn.next();!sr.done;sr=Fn.next())if((Pn=sr.value).userId===qt.userId){Pn.isMuted=bn;break}}catch(Ce){Cc={error:Ce}}finally{try{sr&&!sr.done&&(vs=Fn.return)&&vs.call(Fn)}finally{if(Cc)throw Cc.error}}return sn.isSuper&&this._userInfoCache.upsert(qt,Ke.ts),this._dispatcher.dispatch(new on({channels:[sn],context:{source:bn?fe.EVENT_CHANNEL_MUTED:fe.EVENT_CHANNEL_UNMUTED,user:qt}})),it(function(){return A(An,void 0,void 0,function(){return I(this,function(Ce){return this._groupChannelHandlers.forEach(function(ue){bn?ue.onUserMuted&&ue.onUserMuted(sn,qt):ue.onUserUnmuted&&ue.onUserUnmuted(sn,qt)}),[2]})})}),[3,85];case 63:return(bt=this._leftChannels.get(Ke.channelUrl))?(mn=bt.channel,[3,66]):[3,64];case 64:return[4,this.getChannel(Ke.channelUrl,!0)];case 65:mn=en.sent(),en.label=66;case 66:return un=mn,this._markAsLeave(un),pn=t.as(dR).user,Dr=pn.userId===this._sdkState.userId,un.isSuper&&this._userInfoCache.upsert(pn,Ke.ts),Dr&&this._dispatcher.dispatch(new To({channelUrls:[un.url],context:{source:fe.EVENT_CHANNEL_BANNED,user:pn}})),it(function(){return A(An,void 0,void 0,function(){return I(this,function(Ce){return this._groupChannelHandlers.forEach(function(ue){ue.onUserBanned&&ue.onUserBanned(un,pn)}),[2]})})}),[3,85];case 67:return[4,this.getChannel(Ke.channelUrl,!0)];case 68:return Cr=en.sent(),yi=t.as(hR).user,Dr=yi.userId===this._sdkState.userId,Cr.isSuper&&this._userInfoCache.upsert(yi,Ke.ts),Dr&&this._dispatcher.dispatch(new To({channelUrls:[Cr.url],context:{source:fe.EVENT_CHANNEL_UNBANNED,user:yi}})),it(function(){return A(An,void 0,void 0,function(){return I(this,function(Ce){return this._groupChannelHandlers.forEach(function(ue){ue.onUserUnbanned&&ue.onUserUnbanned(Cr,yi)}),[2]})})}),[3,85];case 69:return[4,this.getChannel(Ke.channelUrl,!0)];case 70:return tu=en.sent(),_c=t.as(fR).freeze,tu.isFrozen=_c,this._dispatcher.dispatch(new on({channels:[tu],context:{source:_c?fe.EVENT_CHANNEL_FROZEN:fe.EVENT_CHANNEL_UNFROZEN}})),it(function(){return A(An,void 0,void 0,function(){return I(this,function(Ce){return this._groupChannelHandlers.forEach(function(ue){_c?ue.onChannelFrozen&&ue.onChannelFrozen(tu):ue.onChannelUnfrozen&&ue.onChannelUnfrozen(tu)}),[2]})})}),[3,85];case 71:return[4,this.getChannel(Ke.channelUrl,!0)];case 72:return Zo=en.sent(),oo=t.as(PF),Jo=oo.allowAutoUnhide,lo=oo.hidePreviousMessages,el=oo.messageOffsetTimestamp,Jo!==null&&(Zo.hiddenState=Jo?Da.HIDDEN_ALLOW_AUTO_UNHIDE:Da.HIDDEN_PREVENT_AUTO_UNHIDE),lo!==null&&lo&&Zo._updateUnreadCount(0,0),el!==null&&(Zo.messageOffsetTimestamp=el),this._dispatcher.dispatch(new on({channels:[Zo],context:{source:fe.EVENT_CHANNEL_HIDDEN}})),it(function(){return A(An,void 0,void 0,function(){return I(this,function(Ce){return this._groupChannelHandlers.forEach(function(ue){ue.onChannelHidden&&ue.onChannelHidden(Zo)}),[2]})})}),[3,85];case 73:return[4,this.getChannel(Ke.channelUrl,!0)];case 74:return(Fd=en.sent()).hiddenState=Da.UNHIDDEN,this._dispatcher.dispatch(new on({channels:[Fd],context:{source:fe.EVENT_CHANNEL_UNHIDDEN}})),it(function(){return A(An,void 0,void 0,function(){return I(this,function(Ce){return this._groupChannelHandlers.forEach(function(ue){ue.onChannelChanged&&ue.onChannelChanged(Fd)}),[2]})})}),[3,85];case 75:return[4,this.getChannel(Ke.channelUrl,!0)];case 76:return Bd=en.sent(),this._dispatcher.dispatch(new To({channelUrls:[Ke.channelUrl],context:{source:fe.EVENT_CHANNEL_DELETED}})),it(function(){return A(An,void 0,void 0,function(){return I(this,function(Ce){return this._groupChannelHandlers.forEach(function(ue){ue.onChannelDeleted&&ue.onChannelDeleted(Bd.url,Bd.channelType)}),[2]})})}),[3,85];case 77:return[4,this.getChannelWithoutCache(Ke.channelUrl,!0)];case 78:return nu=en.sent(),this._dispatcher.dispatch(new on({channels:[nu],context:{source:fe.EVENT_CHANNEL_UPDATED}})),it(function(){return A(An,void 0,void 0,function(){return I(this,function(Ce){return this._groupChannelHandlers.forEach(function(ue){ue.onChannelChanged&&ue.onChannelChanged(nu)}),[2]})})}),[3,85];case 79:return[4,this.getChannel(Ke.channelUrl,!0)];case 80:return ya=en.sent(),tl=t.as(oR),Va=tl.created,nl=tl.updated,ks=tl.deleted,Va&&(ya._upsertCachedMetaData(Va,Ke.ts),this._dispatcher.dispatch(new on({channels:[ya],context:{source:fe.EVENT_CHANNEL_METADATA_CREATED,metaData:Va},ts:Ke.ts}))),nl&&(ya._upsertCachedMetaData(nl,Ke.ts),this._dispatcher.dispatch(new on({channels:[ya],context:{source:fe.EVENT_CHANNEL_METADATA_UPDATED,metaData:nl},ts:Ke.ts}))),ks&&(ya._removeFromCachedMetaData(ks,Ke.ts),this._dispatcher.dispatch(new on({channels:[ya],context:{source:fe.EVENT_CHANNEL_METADATA_DELETED,metaDataKeys:ks},ts:Ke.ts}))),it(function(){return A(An,void 0,void 0,function(){return I(this,function(Ce){return this._groupChannelHandlers.forEach(function(ue){Va&&ue.onMetaDataCreated&&ue.onMetaDataCreated(ya,Va),nl&&ue.onMetaDataUpdated&&ue.onMetaDataUpdated(ya,nl),ks&&ue.onMetaDataDeleted&&ue.onMetaDataDeleted(ya,ks)}),[2]})})}),[3,85];case 81:return[4,this.getChannel(Ke.channelUrl,!0)];case 82:return zn=en.sent(),ru=t.as(lR),rl=ru.created,uo=ru.updated,il=ru.deleted,rl&&this._dispatcher.dispatch(new on({channels:[zn],context:{source:fe.EVENT_CHANNEL_METACOUNTER_CREATED,metaCounters:rl}})),uo&&this._dispatcher.dispatch(new on({channels:[zn],context:{source:fe.EVENT_CHANNEL_METACOUNTER_UPDATED,metaCounters:uo}})),il&&this._dispatcher.dispatch(new on({channels:[zn],context:{source:fe.EVENT_CHANNEL_METACOUNTER_DELETED,metaCounterKeys:il}})),it(function(){return A(An,void 0,void 0,function(){return I(this,function(Ce){return this._groupChannelHandlers.forEach(function(ue){rl&&ue.onMetaCounterCreated&&ue.onMetaCounterCreated(zn,rl),uo&&ue.onMetaCounterUpdated&&ue.onMetaCounterUpdated(zn,uo),il&&ue.onMetaCounterDeleted&&ue.onMetaCounterDeleted(zn,il)}),[2]})})}),[3,85];case 83:return[4,this.getChannel(Ke.channelUrl,!0)];case 84:return hs=en.sent(),iu=t.as(LR),au=iu.pinnedMessageIds,su=iu.latestPinnedMessage,(fs=iu.ts)>hs._pinnedMessagesUpdatedAt&&(hs.pinnedMessageIds=au??[],hs.lastPinnedMessage=su,hs._pinnedMessagesUpdatedAt=fs,this._dispatcher.dispatch(new on({channels:[hs],context:{source:fe.EVENT_PINNED_MESSAGE_UPDATED}})),it(function(){return A(An,void 0,void 0,function(){var Ce,ue,xt,It,wt;return I(this,function(Kn){try{for(Ce=Ge(this._groupChannelHandlers.values()),ue=Ce.next();!ue.done;ue=Ce.next())(xt=ue.value).onChannelChanged&&xt.onChannelChanged(hs)}catch(Rn){It={error:Rn}}finally{try{ue&&!ue.done&&(wt=Ce.return)&&wt.call(Ce)}finally{if(It)throw It.error}}return[2]})})}),it(function(){return A(An,void 0,void 0,function(){return I(this,function(Ce){return this._groupChannelHandlers.forEach(function(ue){ue.onPinnedMessageUpdated&&ue.onPinnedMessageUpdated(hs)}),[2]})})})),[3,85];case 85:return[3,87];case 86:switch(($a=t.as(wR).event).category){case Cf.USER_BLOCK:qa=up.getDataAsUserBlockEvent(this._iid,$a),Ps=qa.blocker,ba=qa.blockee,this._groupChannelCache.block(Ps.userId,ba.userId);break;case Cf.USER_UNBLOCK:co=up.getDataAsUserBlockEvent(this._iid,$a),Ps=co.blocker,ba=co.blockee,this._groupChannelCache.unblock(Ps.userId,ba.userId)}return[3,87];case 87:return[3,89];case 88:if(Hd=en.sent(),Ai(Hd))throw Hd;return[3,89];case 89:return[2]}})})},n.prototype._markAsLeave=function(t){var r,i=this,a=(r=this._leftChannels.get(t.url))!==null&&r!==void 0?r:{channel:t,ref:0};a.ref++,this._leftChannels.set(t.url,a),setTimeout(function(){a.ref--,a.ref===0&&i._leftChannels.delete(t.url)},1e4)},n.prototype.addHandler=function(t,r){this._groupChannelHandlers.set(t,r)},n.prototype.removeHandler=function(t){this._groupChannelHandlers.delete(t)},n.prototype.clearHandler=function(){this._groupChannelHandlers.clear()},n.prototype.subscribeChannelEvent=function(t,r){this._groupChannelBroadcast.subscribe(t,r)},n.prototype.unsubscribeChannelEvent=function(t){this._groupChannelBroadcast.unsubscribe(t)},n.prototype._updateJoinedMemberCount=function(t){t.joinedMemberCount=t.members.filter(function(r){return r.state===hr.JOINED}).length},n.prototype.getChannel=function(t,r){return r===void 0&&(r=!1),A(this,void 0,void 0,function(){var i;return I(this,function(a){switch(a.label){case 0:Oe(Z("string",t)).throw(ee.invalidParameters),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.getChannelFromCache(t)];case 2:return(i=a.sent())?[2,i]:[3,4];case 3:return a.sent(),[3,4];case 4:return[4,this.getChannelWithoutCache(t,r)];case 5:return[2,a.sent()]}})})},n.prototype.getChannelWithoutCache=function(t,r){return r===void 0&&(r=!1),A(this,void 0,void 0,function(){var i,a,s,o,l;return I(this,function(u){switch(u.label){case 0:return Oe(Z("string",t)).throw(ee.invalidParameters),i=new ME({channelUrl:t,isInternalCall:r}),[4,this._requestQueue.send(i)];case 1:switch(a=u.sent(),s=a.as(NE).channel,o=s.unreadMessageCount,l=s.unreadMentionCount,s.myCountPreference){case La.UNREAD_MESSAGE_COUNT_ONLY:l=0;break;case La.UNREAD_MENTION_COUNT_ONLY:o=0;break;case La.OFF:o=0,l=0}return s._updateUnreadCount(o,l),[4,this.upsertChannelsToCache([s])];case 2:return[2,u.sent()[0]]}})})},n.prototype.refreshChannel=function(t,r,i,a){return r===void 0&&(r=!0),i===void 0&&(i=fe.REFRESH_CHANNEL),a===void 0&&(a=!1),A(this,void 0,void 0,function(){var s,o,l,u,d;return I(this,function(f){switch(f.label){case 0:return f.trys.push([0,5,,6]),s=new ME({channelUrl:t,isInternalCall:r,showLatestMessage:a}),[4,this._requestQueue.send(s)];case 1:return o=f.sent(),(l=o.as(NE).channel).myMemberState!==hr.NONE?[3,2]:(this._dispatcher.dispatch(new To({channelUrls:[l.url],context:{source:i}})),[3,4]);case 2:return[4,this.upsertChannelsToCache([l])];case 3:u=f.sent(),this._dispatcher.dispatch(new on({channels:u,context:{source:i}})),f.label=4;case 4:return[3,6];case 5:return(d=f.sent()).code!==lt.NON_AUTHORIZED&&d.code!==lt.NOT_FOUND_IN_DATABASE||this._dispatcher.dispatch(new To({channelUrls:[t],context:{source:i}})),[3,6];case 6:return[2]}})})},n.prototype.getMyGroupChannels=function(t,r,i,a,s){return a===void 0&&(a=fe.REQUEST_CHANNEL),s===void 0&&(s=!1),A(this,void 0,void 0,function(){var o,l,u,d,f,m,p,E,_;return I(this,function(b){switch(b.label){case 0:return r.createdAfter&&(r.createdAfter=Math.floor(r.createdAfter/1e3)),r.createdBefore&&(r.createdBefore=Math.floor(r.createdBefore/1e3)),o=!1,s&&(l=X.of(this._iid),u=l.appInfo,(d=l.cacheContext)&&!d.localCacheEnabled&&(u!=null&&u.enabledChannelMemberShipHistory)&&(u!=null&&u.applicationAttributes.includes("left_user_view_support"))&&(o=!0)),f=new uF(Y(Y({},r),{userId:this._sdkState.userId,token:t,limit:i,includeLeftChannel:s&&o})),[4,this._requestQueue.send(f)];case 1:return m=b.sent(),p=m.as(cF),E=p.channels,_=p.token,this._dispatcher.dispatch(new on({channels:E,context:{source:a}})),[2,{channels:E,token:_}]}})})},n.prototype.getMyGroupChannelChangeLogs=function(t,r,i){return i===void 0&&(i=fe.REQUEST_CHANNEL_CHANGELOGS),A(this,void 0,void 0,function(){var a,s,o,l,u,d,f,m;return I(this,function(p){switch(p.label){case 0:return a=Y(Y({},cp),r),Oe((Z("string",t)||Z("number",t))&&TE(a)).throw(ee.invalidParameters),s=new oF(vt({userId:this._sdkState.userId,ts:typeof t=="number"?t:null,token:typeof t=="string"?t:null,filter:a})),[4,this._requestQueue.send(s)];case 1:return o=p.sent(),l=o.as(lF),u=l.updatedChannels,d=l.deletedChannelUrls,f=l.hasMore,m=l.ts,u.length>0&&this._dispatcher.dispatch(new on({channels:u,context:{source:i},ts:m})),d.length>0&&this._dispatcher.dispatch(new To({channelUrls:d,context:{source:i}})),[2,{updatedChannels:u,deletedChannelUrls:d,hasMore:f,token:l.token}]}})})},n.prototype.getGroupChannelCount=function(t){return A(this,void 0,void 0,function(){var r,i,a;return I(this,function(s){switch(s.label){case 0:return r=Y(Y({},HR),t),Oe(GR(r)).throw(ee.invalidParameters),i=new dF({userId:this._sdkState.userId,filter:r}),[4,this._requestQueue.send(i)];case 1:return a=s.sent(),[2,a.as(hF).groupChannelCount]}})})},n.prototype.getUnreadItemCount=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u,d,f,m,p,E,_,b,C,y;return I(this,function(T){switch(T.label){case 0:return r=Y(Y({},tF),t),Oe(function(N){return Qt(ar,N.keys)&&Qt("string",N.customTypeFilters,!0)&&Qt("string",N.customTypesFilter,!0)}(r)).throw(ee.invalidParameters),i=X.of(this._iid),a=i.sdkState,s=i.requestQueue,o=new fF({userId:a.userId,filter:r}),[4,s.send(o)];case 1:return l=T.sent(),u=l.as(vF),d=u.groupChannelUnreadMentionCount,f=u.groupChannelUnreadMessageCount,m=u.groupChannelInvitationCount,p=u.superGroupChannelUnreadMentionCount,E=u.superGroupChannelUnreadMessageCount,_=u.superGroupChannelInvitationCount,b=u.nonSuperGroupChannelUnreadMentionCount,C=u.nonSuperGroupChannelUnreadMessageCount,y=u.nonSuperGroupChannelInvitationCount,[2,Qe({groupChannelUnreadMentionCount:d,groupChannelUnreadMessageCount:f,groupChannelInvitationCount:m,superGroupChannelUnreadMentionCount:p,superGroupChannelUnreadMessageCount:E,superGroupChannelInvitationCount:_,nonSuperGroupChannelUnreadMentionCount:b,nonSuperGroupChannelUnreadMessageCount:C,nonSuperGroupChannelInvitationCount:y})]}})})},n.prototype.getTotalUnreadChannelCount=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s;return I(this,function(o){switch(o.label){case 0:return t=X.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new mF({userId:r.userId}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(pF).unreadCount]}})})},n.prototype.getTotalUnreadMessageCount=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l;return I(this,function(u){switch(u.label){case 0:return r=Y(Y({},nF),t),Oe(rF(r)).throw(ee.invalidParameters),i=X.of(this._iid),a=i.sdkState,s=i.requestQueue,o=new gF({userId:a.userId,filter:r}),[4,s.send(o)];case 1:return l=u.sent(),[2,l.as(_F).unreadCount]}})})},n.prototype.getTotalScheduledMessageCount=function(t){return t===void 0&&(t={}),A(this,void 0,void 0,function(){var r,i,a,s;return I(this,function(o){switch(o.label){case 0:return r=Y(Y({},iF),t),Oe(function(l){return Z("string",l.channelUrl,!0)&&Qt(xl,l.scheduledStatus,!0)&&Wt(mi,l.messageTypeFilter)}(r)).throw(ee.invalidParameters),i=X.of(this._iid).requestQueue,a=new EF(r),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(yF).count]}})})},n.prototype.getSubscribedTotalUnreadMessageCount=function(){var t=X.of(this._iid).subscribedUnreadMessageCount;return t.all>=0?t.all:0},n.prototype.getSubscribedCustomTypeTotalUnreadMessageCount=function(){var t=0,r=X.of(this._iid).subscribedUnreadMessageCount;return Object.keys(r.customTypes).forEach(function(i){t+=r.customTypes[i]}),t},n.prototype.getSubscribedCustomTypeUnreadMessageCount=function(t){var r;return(r=X.of(this._iid).subscribedUnreadMessageCount.customTypes[t])!==null&&r!==void 0?r:0},n.prototype.createChannel=function(t){return A(this,void 0,void 0,function(){var r,i,a,s;return I(this,function(o){switch(o.label){case 0:return r=Y(Y({},Um),t),Oe(SE(r)).throw(ee.invalidParameters),r.isPublic||(r.accessCode=void 0),i=new CF(Y({userId:this._sdkState.userId},r)),[4,this._requestQueue.send(i)];case 1:return a=o.sent(),s=a.as(SF).channel,[4,this.upsertChannelsToCache([s])];case 2:return o.sent(),[2,s]}})})},n.prototype.markAsReadAll=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u;return I(this,function(d){switch(d.label){case 0:return t=Date.now(),Oe(t-this._markAsReadAllLastSentAt>=1e3).throw(ee.markAsReadAllRateLimitExceeded),this._markAsReadAllLastSentAt=t,r=new jM({userId:this._sdkState.userId}),[4,this._requestQueue.send(r)];case 1:d.sent(),i=this._groupChannelCache.channels;try{for(a=Ge(i),s=a.next();!s.done;s=a.next())(o=s.value)._updateUnreadMemberState(this._sdkState.userId,t),o._updateUnreadCount(0,0)}catch(f){l={error:f}}finally{try{s&&!s.done&&(u=a.return)&&u.call(a)}finally{if(l)throw l.error}}return i.length>0?[4,this.upsertChannelsToCache(i)]:[3,3];case 2:d.sent(),d.label=3;case 3:return[2]}})})},n.prototype.markAsReadWithChannelUrls=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u,d,f;return I(this,function(m){switch(m.label){case 0:return r=Date.now(),Oe(Qt("string",t)&&r-this._markAsReadAllLastSentAt>=1e3).throw(ee.markAsReadAllRateLimitExceeded),this._markAsReadAllLastSentAt=r,i=new jM({userId:this._sdkState.userId,channelUrls:t}),[4,this._requestQueue.send(i)];case 1:m.sent(),a=this._groupChannelCache.channels,s=[];try{for(o=Ge(a),l=o.next();!l.done;l=o.next())u=l.value,t.includes(u.url)&&(u._updateUnreadMemberState(this._sdkState.userId,r),u._updateUnreadCount(0,0),s.push(u))}catch(p){d={error:p}}finally{try{l&&!l.done&&(f=o.return)&&f.call(o)}finally{if(d)throw d.error}}return s.length>0?[4,this.upsertChannelsToCache(s)]:[3,3];case 2:m.sent(),m.label=3;case 3:return[2]}})})},n.prototype.markAsDelivered=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){switch(r.label){case 0:return[4,this.getChannel(t)];case 1:return[4,r.sent().markAsDelivered()];case 2:return r.sent(),[2]}})})},n.prototype.getMessageFromCache=function(t){var r;return A(this,void 0,void 0,function(){return I(this,function(i){switch(i.label){case 0:return[4,this._messageCache.get(t)];case 1:return[2,(r=i.sent())!==null&&r!==void 0?r:null]}})})},n.prototype.getExactlyMatchingMessagesForTokenFromCache=function(t,r,i){return A(this,void 0,void 0,function(){return I(this,function(a){switch(a.label){case 0:return[4,this._messageCache.fetch({channelUrl:t,token:r,filter:i,exactMatch:!0})];case 1:return[2,a.sent()]}})})},n.prototype.getMessagesFromCache=function(t,r,i,a,s,o){return s===void 0&&(s=gR),o===void 0&&(o=!0),A(this,void 0,void 0,function(){return I(this,function(l){switch(l.label){case 0:return[4,this._messageCache.fetch({channelUrl:t,token:r,limit:s,filter:a,backward:i==="next",inclusive:o})];case 1:return[2,l.sent()]}})})},n.prototype.getPollMessagesFromCache=function(t,r,i,a){return A(this,void 0,void 0,function(){return I(this,function(s){switch(s.label){case 0:return[4,this._messageCache.fetch({channelUrl:t,token:r,limit:a,filter:i,backward:!1,isPollOnly:!0})];case 1:return[2,s.sent()]}})})},n.prototype.getCachedMessageCountBetween=function(t,r,i,a){return A(this,void 0,void 0,function(){return I(this,function(s){switch(s.label){case 0:return[4,this._messageCache.countBetween(t,r,new Ws({top:i,bottom:a}))];case 1:return[2,s.sent()]}})})},n.prototype.getUnsentMessagesFromCache=function(t,r){return A(this,void 0,void 0,function(){return I(this,function(i){switch(i.label){case 0:return[4,this._unsentMessageCache.fetch({channelUrl:t,filter:r})];case 1:return[2,i.sent()]}})})},n.prototype.removeFailedMessageFromCache=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){switch(r.label){case 0:return[4,this._unsentMessageCache.remove([t])];case 1:return r.sent(),[2]}})})},n}(UR),Ia=function(e,n){return n instanceof fr?e.findIndex(function(t){return t instanceof fr&&n.isIdentical(t)}):e.findIndex(function(t){return t.isIdentical(n)})},Ch=function(e,n){return e.findIndex(function(t){return t instanceof Mi?t.messageId===n:t instanceof Ju?t.notificationId===n:void 0})},b_=function(e,n){if(e.length>0){for(var t=0,r=e.length-1,i=Math.floor((t+r)/2);t<r;){var a=e[i].createdAt-n.createdAt;if(a>0)r=i,i=Math.floor((t+r)/2);else{if(!(a<0))return i;t=i+1,i=Math.floor((t+r)/2)}}return e[i].createdAt>n.createdAt?i:i+1}return e.length},bs={},VF=function(){function e(n){var t=n._iid,r=n.channel,i=n.limit,a=i===void 0?100:i,s=this;this.ref=0,this._iid=t,this._channel=r,this._limit=a,this._prevSyncLoopCount=0;var o,l,u=X.of(this._iid),d=u.sdkState,f=u.cacheContext,m=u.dispatcher,p=u.logger,E=u.statManager,_=u.messageBackgroundSyncThrottleController;this._metadataKey=(o=d.userId,l=r.url,"sendbird:".concat(o,"@groupchannel/").concat(l,"/message/sync.meta"));var b=function(C,y){return"sendbird:".concat(C,"@groupchannel/").concat(y,"/message/sync")}(d.userId,r.url);this._prevSync=new Go(b,function(C){return A(s,void 0,void 0,function(){var y=this;return I(this,function(T){switch(T.label){case 0:return[4,_.run("message-background-sync-".concat(r.url,"-prev"),function(){return A(y,void 0,void 0,function(){var N,w,O,L,P,U,B,F,H,G,j,x;return I(this,function(V){switch(V.label){case 0:return N={hasNext:!0,nextToken:0},this._prevSyncLoopCount++,[4,this.loadMetadata()];case 1:if(V.sent(),p.debug("message background prev sync from",(U=this._metadata)===null||U===void 0?void 0:U.range.top),(B=this._metadata)===null||B===void 0?void 0:B.previousComplete)return[3,10];V.label=2;case 2:return V.trys.push([2,5,8,9]),[4,xr.of(this._iid)._getMessagesByTimestampForCollection(this._channel.url,this._channel.channelType,!((H=(F=this._metadata)===null||F===void 0?void 0:F.range)===null||H===void 0)&&H.top?this._metadata.range.top:C,{prevResultSize:this._limit,nextResultSize:0,replyType:Ir.ALL,includeReactions:!0,includeMetaArray:!0,includeParentMessageInfo:!0,includeThreadInfo:!0,isInclusive:!0},fe.SYNC_MESSAGE_BACKGROUND,!1,!1,es.INTERNAL_BACKSYNC)];case 3:return(w=V.sent().messages).length>0&&(O=w.map(function(K){return K.createdAt}),!((G=this._metadata)===null||G===void 0)&&(P=G.range).intersect.apply(P,Nt([],ut(O),!1))?this.extendRange(w):this._metadata={range:new Ws({top:Math.min.apply(Math,Nt([],ut(O),!1)),bottom:Math.max.apply(Math,Nt([],ut(O),!1))}),previousComplete:!1}),N.hasNext=w.length>=this._limit&&this._prevSyncLoopCount<1,this._metadata&&(N.nextToken=this._metadata.range.top,this._metadata.previousComplete=w.length<this._limit),p.debug("message background prev sync progress",N),[4,this.saveMetadata()];case 4:return V.sent(),[3,9];case 5:return L=V.sent(),p.debug("message background prev sync error",L),L instanceof ee&&L.isInvalidTokenError?[4,this.clearMetadata()]:[3,7];case 6:V.sent(),V.label=7;case 7:throw L;case 8:return E.put(new cr({type:tr.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:r.url,measured_on:"back_sync",event:"cache_fetch",max_db_size:(x=(j=f.localCacheConfig)===null||j===void 0?void 0:j.maxSize)!==null&&x!==void 0?x:0,use_local_cache:f.localCacheEnabled,starting_point:0,message_init_policy:""}})),[7];case 9:return[3,11];case 10:N.hasNext=!1,V.label=11;case 11:return[2,N]}})})})];case 1:return[2,T.sent()]}})})}),this._nextSync=new Go(b,function(C){return A(s,void 0,void 0,function(){var y=this;return I(this,function(T){switch(T.label){case 0:return[4,_.run("message-background-sync-".concat(r.url,"-next"),function(){return A(y,void 0,void 0,function(){var N,w,O,L,P,U,B,F,H,G,j;return I(this,function(x){switch(x.label){case 0:return N={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:x.sent(),p.debug("message background next sync from",(U=this._metadata)===null||U===void 0?void 0:U.range.bottom),x.label=2;case 2:return x.trys.push([2,5,6,7]),[4,xr.of(this._iid)._getMessagesByTimestampForCollection(this._channel.url,this._channel.channelType,!((F=(B=this._metadata)===null||B===void 0?void 0:B.range)===null||F===void 0)&&F.bottom?this._metadata.range.bottom:C,{prevResultSize:0,nextResultSize:this._limit,replyType:Ir.ALL,includeReactions:!0,includeMetaArray:!0,includeParentMessageInfo:!0,includeThreadInfo:!0,isInclusive:!0},fe.SYNC_MESSAGE_BACKGROUND,!1,!1,es.INTERNAL_BACKSYNC)];case 3:return(w=x.sent().messages).length>0&&(O=w.map(function(V){return V.createdAt}),!((H=this._metadata)===null||H===void 0)&&(P=H.range).intersect.apply(P,Nt([],ut(O),!1))?this.extendRange(w):this._metadata={range:new Ws({top:Math.min.apply(Math,Nt([],ut(O),!1)),bottom:Math.max.apply(Math,Nt([],ut(O),!1))}),previousComplete:!1}),N.hasNext=w.length>=this._limit,this._metadata&&(N.nextToken=this._metadata.range.bottom),p.debug("message background next sync progress",N),[4,this.saveMetadata()];case 4:return x.sent(),[3,7];case 5:throw L=x.sent(),p.debug("message background next sync error",L),L;case 6:return E.put(new cr({type:tr.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:r.url,measured_on:"back_sync",event:"cache_fetch",max_db_size:(j=(G=f.localCacheConfig)===null||G===void 0?void 0:G.maxSize)!==null&&j!==void 0?j:0,use_local_cache:f.localCacheEnabled,starting_point:0,message_init_policy:""}})),[7];case 7:return[2,N]}})})})];case 1:return[2,T.sent()]}})})}),this._connectionEventContext=m.on(function(C){C instanceof Ea&&(C.stateType===wn.CONNECTED?s.resume():s.pause())})}return e.of=function(n,t){return bs[n]||(bs[n]={}),bs[n][t.url]||(bs[n][t.url]=new e({_iid:n,channel:t})),bs[n][t.url].ref++,bs[n][t.url]},e.clear=function(n,t){bs[n]&&bs[n][t]&&(bs[n][t].close(),delete bs[n])},Object.defineProperty(e.prototype,"range",{get:function(){var n,t;return(t=(n=this._metadata)===null||n===void 0?void 0:n.range)!==null&&t!==void 0?t:new Ws({})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousComplete",{get:function(){var n;return!!(!((n=this._metadata)===null||n===void 0)&&n.previousComplete)},enumerable:!1,configurable:!0}),e.prototype.isWrappingMessages=function(n){var t;return(t=this.range)===null||t===void 0?void 0:t.includes.apply(t,Nt([],ut(n.map(function(r){return r.createdAt})),!1))},e.prototype.extendRange=function(n){var t;this._metadata&&(t=this._metadata.range).extends.apply(t,Nt([],ut(n.map(function(r){return r.createdAt})),!1))},e.prototype.loadMetadata=function(){return A(this,void 0,void 0,function(){var n;return I(this,function(t){switch(t.label){case 0:return this._metadata?[3,2]:[4,X.of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:n=t.sent(),this._metadata=n?{range:new Ws(n.range),previousComplete:n.previousComplete}:{range:new Ws({}),previousComplete:!1},t.label=2;case 2:return[2,this._metadata]}})})},e.prototype.saveMetadata=function(){return A(this,void 0,void 0,function(){return I(this,function(n){switch(n.label){case 0:return this._metadata?[4,X.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return n.sent(),[2,!0];case 2:return[2,!1]}})})},e.prototype.clearMetadata=function(){return A(this,void 0,void 0,function(){return I(this,function(n){switch(n.label){case 0:return[4,X.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return n.sent(),this._metadata=void 0,[2]}})})},e.prototype.resume=function(n){var t,r,i,a;n===void 0&&(n=Date.now());var s=X.of(this._iid),o=s.logger,l=s.sessionManager;s.cacheContext.localCacheEnabled&&l.session.hasSession&&(o.debug("message background sync resume()"),this._prevSyncLoopCount=0,this._metadata&&this._metadata.previousComplete||this._prevSync.start((r=(t=this._metadata)===null||t===void 0?void 0:t.range.top)!==null&&r!==void 0?r:n),this._nextSync.start((a=(i=this._metadata)===null||i===void 0?void 0:i.range.bottom)!==null&&a!==void 0?a:n))},e.prototype.pause=function(){X.of(this._iid).logger.debug("message background sync stop()"),this._prevSync.stop(),this._nextSync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete bs[this._iid][this._channel.url])},e}(),Cs={},$F=function(){function e(n){var t=n._iid,r=n.channel,i=n.includeParams,a=this;this.ref=0,this._iid=t,this._channel=r,this._includeParams=i;var s,o,l=X.of(this._iid),u=l.logger,d=l.sdkState,f=l.dispatcher;this._metadataKey=(s=d.userId,o=r.url,"sendbird:".concat(s,"@groupchannel/").concat(o,"/message/changelogs.meta"));var m=function(p,E){return"sendbird:".concat(p,"@groupchannel/").concat(E,"/message/changelogs")}(d.userId,this._channel.url);this._sync=new Go(m,function(){return A(a,void 0,void 0,function(){var p,E,_,b,C,y,T,N,w;return I(this,function(O){switch(O.label){case 0:return p={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:O.sent(),u.debug("message changelog sync from",(w=this._metadata)===null||w===void 0?void 0:w.token),O.label=2;case 2:return O.trys.push([2,5,,8]),[4,xr.of(this._iid).getMessageChangelogs(this._channel.url,this._channel.channelType,this._metadata.token,Y({replyType:Ir.ALL},this._includeParams),fe.SYNC_MESSAGE_CHANGELOGS)];case 3:return E=O.sent(),_=E.updatedMessages,b=E.deletedMessageIds,C=E.hasMore,y=E.token,T=E.forceUseNextToken,p.hasNext=C,p.nextToken=y,_.length>0||b.length>0?this._metadata&&(this._metadata.token=y):T&&this._metadata&&(this._metadata.token=y),u.debug("message changelog sync progress",p),[4,this.saveMetadata()];case 4:return O.sent(),[3,8];case 5:return N=O.sent(),u.debug("message changelog sync error",N),N instanceof ee&&N.isInvalidTokenError?[4,this.clearMetadata()]:[3,7];case 6:O.sent(),O.label=7;case 7:throw N;case 8:return[2,p]}})})}),this._connectionEventContext=f.on(function(p){p instanceof Ea&&(p.stateType===wn.CONNECTED?a.resume():a.pause())})}return e.of=function(n,t,r){return Cs[n]||(Cs[n]={}),Cs[n][t.url]||(Cs[n][t.url]=new e({_iid:n,channel:t,includeParams:r})),Cs[n][t.url].ref++,Cs[n][t.url]},e.clear=function(n,t){Cs[n]&&Cs[n][t]&&(Cs[n][t].close(),delete Cs[n])},e.prototype.loadMetadata=function(){return A(this,void 0,void 0,function(){var n,t,r,i;return I(this,function(a){switch(a.label){case 0:return this._metadata?[3,2]:(n=X.of(this._iid),t=n.cacheContext,r=n.firstConnectedAt,[4,t.preference.get(this._metadataKey)]);case 1:i=a.sent(),this._metadata={token:i?i.token:r},a.label=2;case 2:return[2,this._metadata]}})})},e.prototype.saveMetadata=function(){return A(this,void 0,void 0,function(){return I(this,function(n){switch(n.label){case 0:return this._metadata?[4,X.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return n.sent(),[2,!0];case 2:return[2,!1]}})})},e.prototype.clearMetadata=function(){return A(this,void 0,void 0,function(){return I(this,function(n){switch(n.label){case 0:return[4,X.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return n.sent(),this._metadata=void 0,[2]}})})},e.prototype.resume=function(){var n=X.of(this._iid),t=n.logger;n.sessionManager.session.hasSession&&(t.debug("message changelog sync resume()"),this._sync.start(0))},e.prototype.pause=function(){X.of(this._iid).logger.debug("message changelog sync pause()"),this._sync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete Cs[this._iid][this._channel.url])},e}(),Cu={},qF=function(){function e(n){var t=n._iid,r=n.channel,i=n.hasPollMessage,a=this;this.ref=0,this._iid=t,this._channel=r;var s,o,l=X.of(this._iid),u=l.logger,d=l.sdkState,f=l.dispatcher;this._metadataKey=(s=d.userId,o=r.url,"sendbird:".concat(s,"@groupchannel/").concat(o,"/poll/changelogs.meta"));var m=function(p,E){return"sendbird:".concat(p,"@groupchannel/").concat(E,"/poll/changelogs")}(d.userId,this._channel.url);this._sync=new Go(m,function(){return A(a,void 0,void 0,function(){var p,E,_,b,C,y,T,N;return I(this,function(w){switch(w.label){case 0:return p={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:return w.sent(),u.debug("poll changelog sync from",(N=this._metadata)===null||N===void 0?void 0:N.token),(E=!this._metadata||!this._metadata.token)?[4,i()]:[3,3];case 2:E=!w.sent(),w.label=3;case 3:if(E)return[2,{hasNext:!1,nextToken:0}];this._metadata||(_=X.of(this._iid).firstConnectedAt,this._metadata={token:_}),w.label=4;case 4:return w.trys.push([4,7,,10]),[4,tp.of(this._iid).getPollChangeLogs(this._channel.url,this._channel.channelType,this._metadata.token)];case 5:return b=w.sent(),C=b.hasMore,y=b.token,p.hasNext=C,p.nextToken=y,this._metadata.token=y,u.debug("poll changelog sync progress",p),[4,this.saveMetadata()];case 6:return w.sent(),[3,10];case 7:return T=w.sent(),u.debug("poll changelog sync error",T),T instanceof ee&&T.isInvalidTokenError?[4,this.clearMetadata()]:[3,9];case 8:w.sent(),w.label=9;case 9:throw T;case 10:return[2,p]}})})}),this._connectionEventContext=f.on(function(p){p instanceof Ea&&(p.stateType===wn.CONNECTED?a.resume():a.pause())})}return e.of=function(n,t,r){return Cu[n]||(Cu[n]={}),Cu[n][t.url]||(Cu[n][t.url]=new e({_iid:n,channel:t,hasPollMessage:r})),Cu[n][t.url].ref++,Cu[n][t.url]},e.prototype.loadMetadata=function(){return A(this,void 0,void 0,function(){var n;return I(this,function(t){switch(t.label){case 0:return this._metadata?[3,2]:[4,X.of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:n=t.sent(),this._metadata=n?{token:n.token}:void 0,t.label=2;case 2:return[2]}})})},e.prototype.saveMetadata=function(){return A(this,void 0,void 0,function(){return I(this,function(n){switch(n.label){case 0:return this._metadata?[4,X.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},e.prototype.clearMetadata=function(){return A(this,void 0,void 0,function(){return I(this,function(n){switch(n.label){case 0:return[4,X.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return n.sent(),this._metadata=void 0,[2]}})})},e.prototype.resume=function(){X.of(this._iid).logger.debug("poll changelog sync resume()"),this._sync.start(0)},e.prototype.pause=function(){X.of(this._iid).logger.debug("poll changelog sync pause()"),this._sync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete Cu[this._iid][this._channel.url])},e}(),KF=function(e){function n(t){var r,i,a,s,o,l,u,d,f,m,p=this;return(p=e.call(this)||this).method=Ie.GET,p.path="".concat(yn(t.channelType),"/").concat(t.channelUrl,"/messages_gap"),p.params=Qe({prev_start_ts:t.prevStart,prev_end_ts:t.prevEnd,prev_cache_count:t.prevCount,next_start_ts:t.nextStart,next_end_ts:t.nextEnd,next_cache_count:t.nextCount,huge_gap_threshold:(r=t.threshold)!==null&&r!==void 0?r:null,reverse:!0,custom_types:(i=t.customTypes)!==null&&i!==void 0?i:["*"],message_type:(a=t.messageType)!==null&&a!==void 0?a:null,include_reply_type:(s=t.replyType)!==null&&s!==void 0?s:Ir.NONE,include_reactions_summary:(o=t.includeReactions)===null||o===void 0||o,include_meta_array:(l=t.includeMetaArray)===null||l===void 0||l,include_thread_info:(u=t.includeThreadInfo)===null||u===void 0||u,include_parent_message_info:(d=t.includeParentMessageInfo)===null||d===void 0||d,with_sorted_meta_array:(f=t.includeMetaArray)===null||f===void 0||f,show_subchannel_messages_only:(m=t.showSubchannelMessagesOnly)!==null&&m!==void 0&&m,include_poll_details:!0,checking_continuous_messages:t.checkingContinuousMessages}),p}return z(n,e),n}(we),WF=function(e){function n(t,r){var i,a,s,o,l,u,d=this;return(d=e.call(this,t,r)||this).isHugeGap=r.is_huge_gap,d.prevMessages=((i=r.prev_messages)!==null&&i!==void 0?i:[]).map(function(f){return _i(t,f)}),d.prevHasMore=(a=r.prev_hasmore)!==null&&a!==void 0&&a,d.isContinuousPrevMessages=(s=r.is_continuous_prev_messages)!==null&&s!==void 0&&s,d.nextMessages=((o=r.next_messages)!==null&&o!==void 0?o:[]).map(function(f){return _i(t,f)}),d.nextHasmore=(l=r.next_hasmore)!==null&&l!==void 0&&l,d.isContinuousNextMessages=(u=r.is_continuous_next_messages)!==null&&u!==void 0&&u,d}return z(n,e),n}(Pe),VM={includeMetaArray:!0,includeReactions:!0,includeThreadInfo:!0,includeParentMessageInfo:!0};(function(e){e.CACHE_AND_REPLACE_BY_API="cache_and_replace_by_api"})(dp||(dp={}));var df,hf,ff,QF=function(){function e(){this._onCacheResult=Bt,this._onApiResult=Bt}return e.prototype._invokeResponse=function(n,t,r){var i=this;it(function(){return A(i,void 0,void 0,function(){return I(this,function(a){switch(n){case"local":this._onCacheResult(t,r);break;case"remote":this._onApiResult(t,r)}return[2]})})})},e.prototype.onCacheResult=function(n){return this._onCacheResult=n,this},e.prototype.onApiResult=function(n){return this._onApiResult=n,this},e}(),YF=function(){function e(n,t){var r=t.filter,i=t.startingPoint,a=t.limit,s=t.prevResultLimit,o=t.nextResultLimit,l=t.channel,u=t.channelManager,d=t.disableBackgroundSync,f=d!==void 0&&d,m=this;this._messages=[],this._unsentMessages=[],this._isLoadingPrevious=!1,this._isLoadingNext=!1,this._iid=n,this._key="mc-".concat(Ho()),this._isDisposed=!1,this.filter=r??new to,this._channel=l,this._syncRange=new Ws({}),this._hasPrevious=!0,this._hasNext=!0,this._startingPoint=typeof i=="number"&&Number.isFinite(i)?i:Number.MAX_SAFE_INTEGER,this._limit=a||gR,this._prevResultLimit=s??Math.floor(this._limit/2),this._nextResultLimit=o??Math.floor(this._limit/2),this._channelManager=u;var p=X.of(this._iid).statManager;this._channelManager.subscribeChannelEvent(this._key,{onUpdate:function(y,T){var N=T.source,w=y.findIndex(function(O){return O.isIdentical(m.channel)});w>=0&&(m._replaceChannelOfCollection(y[w]),m.channel._runIfHandleableWithGroupChannel(function(O){switch(N){case fe.EVENT_CHANNEL_UPDATED:for(var L=!1,P=0;P<m._messages.length;P++)if(m._messages[P].createdAt>=O.messageOffsetTimestamp){L=!0;var U=P;if(U>0){var B=m._messages.splice(0,U);m._removeMessagesFromView(B.map(function(G){return m.keyOf(G)}),fe.EVENT_MESSAGE_OFFSET_UPDATED)}break}!L&&m._messages.length>0&&m._removeMessagesFromView(m._messages.map(function(G){return m.keyOf(G)}),fe.EVENT_MESSAGE_OFFSET_UPDATED);break;case fe.EVENT_CHANNEL_UNMUTED:var F=X.of(m._iid).sdkState,H=T.user;F.userId===H.userId&&m._clearCheckMyMutedTimer();break;case fe.EVENT_CHANNEL_MUTED:F=X.of(m._iid).sdkState,H=T.user,F.userId===H.userId&&O._myMutedRemainingTime!==-1&&m._startCheckMyMutedTimer(O._myMutedRemainingTime);break;case fe.EVENT_CHANNEL_LEFT:O.isPublic&&m._clearCheckMyMutedTimer()}it(function(){return A(m,void 0,void 0,function(){var G;return I(this,function(j){return Dm(N)&&(!((G=this._handler)===null||G===void 0)&&G.onChannelUpdated)&&this._handler.onChannelUpdated(T,this.channel),[2]})})})}),m._postprocessChannelUpdateEvent(y[w],N))},onRemove:function(y,T){var N=y.indexOf(m.channel.url);N>=0&&m._channel._runIfHandleableWithGroupChannel(function(w){w.myMemberState=hr.NONE,m._clearCheckMyMutedTimer(),it(function(){return A(m,void 0,void 0,function(){var O;return I(this,function(L){return!((O=this._handler)===null||O===void 0)&&O.onChannelDeleted&&this._handler.onChannelDeleted(T,this.channel.url),[2]})})}),m._postprocessChannelRemoveEvent(y[N])})}}),this._channelManager.subscribeMessageEvent(this._key,{onUpdate:function(y,T){var N,w,O=[],L=[];try{for(var P=Ge(y),U=P.next();!U.done;U=P.next()){var B=U.value;B.channelUrl===m._channel.url&&(m.filter.match(B)?O.push(B):L.push(m.keyOf(B)))}}catch(F){N={error:F}}finally{try{U&&!U.done&&(w=P.return)&&w.call(P)}finally{if(N)throw N.error}}if(No(T)){if(O.length>0)switch(T){case fe.LOCAL_MESSAGE_CANCELED:case fe.LOCAL_MESSAGE_RESEND_STARTED:case fe.EVENT_MESSAGE_SENT_FAILED:case fe.EVENT_MESSAGE_SENT_SUCCESS:case fe.EVENT_MESSAGE_UPDATED:case fe.EVENT_MESSAGE_THREADINFO_UPDATED:case fe.EVENT_MESSAGE_REACTION_UPDATED:case fe.EVENT_MESSAGE_FEEDBACK_ADDED:case fe.EVENT_MESSAGE_FEEDBACK_UPDATED:case fe.EVENT_MESSAGE_FEEDBACK_DELETED:case fe.SYNC_MESSAGE_CHANGELOGS:m._updateMessagesToView(O,T);break;case fe.EVENT_MESSAGE_SENT_PENDING:m._addMessagesToView(O,T);break;case fe.EVENT_MESSAGE_RECEIVED:m.hasNext||m._addMessagesToView(O,T);break;case fe.SYNC_MESSAGE_FILL:m._addMessagesToView(O,T)}L.length>0&&m._removeMessagesFromView(L,T)}m._postprocessMessageUpdateEvent(y,T)},onRemove:function(y,T){m._removeMessagesFromView(y,T),m._postprocessMessageRemoveEvent(y)},onRemoveUnsent:function(y,T){m._removeUnsentMessageFromView(y,T)},onPollChangeLogUpdate:function(y,T){m._updatePollsToView(y,T)},onPollUpdate:function(y,T){m._applyPollUpdateEventToView(y,T)},onPollVote:function(y,T){m._applyPollVoteEventToView(y,T)},onReactionUpdate:function(y,T){m._applyReactionEventToView(y,T)},onThreadInfoUpdate:function(y,T){m._applyThreadInfoEventToView(y,T)},onDeletedByRetentionPolicy:function(y,T,N){T===m.channel.url&&m._messageRetention(y,N)}});var E=X.of(this._iid),_=E.cacheContext,b=E.dispatcher,C=E.messageBackgroundSyncThrottleController;this._channel._updateMessageCollectionLastAccessedAt(),b.dispatch(new on({channels:[this._channel],context:{source:fe.CHANNEL_LASTACCESSEDAT_UPDATED}})),this._backgroundSync=VF.of(this._iid,this._channel),!f&&this._shouldStartBackgroundSync()&&this._backgroundSync.resume(this._startingPoint),this._changelogSync=$F.of(this._iid,this._channel,this.changelogIncludeParams),this._changelogSync.resume(),this._pollChangelogSync=qF.of(this._iid,this._channel,this._hasPollMessage.bind(this)),this._pollChangelogSync.resume(),this._prevFill=new Go(this._key,function(y){return A(m,void 0,void 0,function(){var T=this;return I(this,function(N){switch(N.label){case 0:return[4,C.run("message-fill-sync-".concat(l.url,"-prev"),function(){return A(T,void 0,void 0,function(){var w,O,L,P,U,B,F;return I(this,function(H){switch(H.label){case 0:return[4,this._getRemoteMessages(y,{prevLimit:this._prevResultLimit,source:fe.SYNC_MESSAGE_FILL,checkingContinuousMessages:_.localCacheEnabled,sdkSource:es.INTERNAL_FILL_GAP})];case 1:return w=H.sent(),O=w.messages,L=w.isContinuousMessages,O.length>0?(P=Math.min.apply(Math,Nt([],ut(O.map(function(G){return G.createdAt})),!1)),this._syncRange.extends(P),L&&((U=this._backgroundSync)===null||U===void 0||U.range.extends(P)),[2,{hasNext:O.length>=this._prevResultLimit&&this.viewTop<P,nextToken:this._syncRange.top}]):(_.localCacheEnabled&&p.put(new cr({type:tr.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:(F=(B=_.localCacheConfig)===null||B===void 0?void 0:B.maxSize)!==null&&F!==void 0?F:0,use_local_cache:_.localCacheEnabled,starting_point:0,message_init_policy:""}})),[2,{hasNext:!1,nextToken:0}])}})})})];case 1:return[2,N.sent()]}})})}),this._nextFill=new Go(this._key,function(y){return A(m,void 0,void 0,function(){var T=this;return I(this,function(N){switch(N.label){case 0:return[4,C.run("message-fill-sync-".concat(l.url,"-next"),function(){return A(T,void 0,void 0,function(){var w,O,L,P,U,B,F,H;return I(this,function(G){switch(G.label){case 0:return[4,this._getRemoteMessages(y,{nextLimit:this._nextResultLimit,source:fe.SYNC_MESSAGE_FILL,checkingHasNext:!0,checkingContinuousMessages:_.localCacheEnabled,sdkSource:es.INTERNAL_FILL_GAP})];case 1:return w=G.sent(),O=w.messages,L=w.isContinuousMessages,P=w.hasNext,O.length>0?(U=Math.max.apply(Math,Nt([],ut(O.map(function(j){return j.createdAt})),!1)),this._syncRange.extends(U),L&&((B=this._backgroundSync)===null||B===void 0||B.range.extends(U)),[2,{hasNext:P,nextToken:this._syncRange.bottom}]):(_.localCacheEnabled&&p.put(new cr({type:tr.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:(H=(F=_.localCacheConfig)===null||F===void 0?void 0:F.maxSize)!==null&&H!==void 0?H:0,use_local_cache:_.localCacheEnabled,starting_point:0,message_init_policy:""}})),[2,{hasNext:!1,nextToken:0}])}})})})];case 1:return[2,N.sent()]}})})}),this._connectionEventContext=b.on(function(y){if(y instanceof Ea)switch(y.stateType){case wn.CONNECTED:dr(function(){return A(m,void 0,void 0,function(){return I(this,function(T){return this._activate(),[2]})})});break;case wn.LOGOUT:m.dispose();break;default:m._clearCheckMyMutedTimer(),m._prevFill.stop(),m._nextFill.stop()}})}return e.prototype.keyOf=function(n){return 0},Object.defineProperty(e.prototype,"changelogIncludeParams",{get:function(){return{includeReactions:!0,includeThreadInfo:!0,includeMetaArray:!0,includeParentMessageInfo:!0}},enumerable:!1,configurable:!0}),e.prototype._postprocessChannelUpdateEvent=function(n,t){},e.prototype._postprocessChannelRemoveEvent=function(n){},e.prototype._postprocessMessageUpdateEvent=function(n,t){},e.prototype._postprocessMessageRemoveEvent=function(n){},Object.defineProperty(e.prototype,"channel",{get:function(){return this._channel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"succeededMessages",{get:function(){return Nt([],ut(this._messages),!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"failedMessages",{get:function(){return this._unsentMessages.filter(function(n){return n.sendingStatus===gn.FAILED})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pendingMessages",{get:function(){return this._unsentMessages.filter(function(n){return n.sendingStatus===gn.PENDING})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPrevious",{get:function(){return this._hasPrevious},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNext",{get:function(){return this._hasNext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewTop",{get:function(){return Math.min.apply(Math,Nt(Nt([],ut(this._messages.map(function(n){return n.createdAt})),!1),[Number.MAX_SAFE_INTEGER],!1))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewBottom",{get:function(){return Math.max.apply(Math,Nt(Nt([],ut(this._messages.map(function(n){return n.createdAt})),!1),[0],!1))},enumerable:!1,configurable:!0}),e.prototype._activate=function(){return A(this,void 0,void 0,function(){return I(this,function(n){switch(n.label){case 0:return X.of(this._iid).logger.debug("check huge gap"),this._checkHugeGap(),[4,this._refreshChannel(fe.SYNC_CHANNEL_CHANGELOGS)];case 1:return n.sent(),[2]}})})},e.prototype._replaceChannelOfCollection=function(n){this._channel.isGroupChannel()?this._channel=n:this._channel.isFeedChannel()&&(this._channel._groupChannel=n._groupChannel)},e.prototype._shouldStartBackgroundSync=function(){var n=X.of(this._iid).cacheContext;return this.channel.isGroupChannel()?n.localCacheEnabled&&!this.channel.isSuper:n.localCacheEnabled},e.prototype._setBaseMessageCollectionHandler=function(n){this._handler=n},e.prototype._filterUnderOffsetMessage=function(n){return n},e.prototype._updateChildMessagesInView=function(n){var t=[];return this._messages.forEach(function(r){r instanceof Mi&&r.parentMessageId===n.messageId&&r.applyParentMessage(n)&&t.push(r)}),t},e.prototype._updatePollsToView=function(n,t){var r,i,a=this,s=[];try{for(var o=Ge(n),l=o.next();!l.done;l=o.next()){var u=l.value,d=Ch(this._messages,u.messageId);if(d>=0){var f=this._messages[d];f.isUserMessage()&&f.applyPoll(u),s.push(f)}}}catch(m){r={error:m}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s.length>0&&No(t)&&it(function(){return A(a,void 0,void 0,function(){var m,p,E;return I(this,function(_){return m={source:t},s.length>0&&((E=(p=this._handler).onMessagesUpdated)===null||E===void 0||E.call(p,m,this.channel,s)),[2]})})}),s},e.prototype._applyPollUpdateEventToView=function(n,t){var r=this,i=Ch(this._messages,n.messageId);if(i>=0){var a=this._messages[i];a&&a.isUserMessage()&&a.poll&&a.poll.applyPollUpdateEvent(n)&&No(t)&&it(function(){return A(r,void 0,void 0,function(){var s,o,l;return I(this,function(u){return s={source:t},(l=(o=this._handler)===null||o===void 0?void 0:o.onMessagesUpdated)===null||l===void 0||l.call(o,s,this.channel,[a]),[2]})})})}},e.prototype._applyPollVoteEventToView=function(n,t){var r=this,i=Ch(this._messages,n.messageId);if(i>=0){var a=this._messages[i];a&&a.isUserMessage()&&a.poll&&a.poll.applyPollVoteEvent(n)&&No(t)&&it(function(){return A(r,void 0,void 0,function(){var s,o,l;return I(this,function(u){return s={source:t},(l=(o=this._handler)===null||o===void 0?void 0:o.onMessagesUpdated)===null||l===void 0||l.call(o,s,this.channel,[a]),[2]})})})}},e.prototype._applyReactionEventToView=function(n,t){var r=this,i=Ch(this._messages,n.messageId);if(i>=0){var a=this._messages[i];a&&(a.isUserMessage()||a.isFileMessage()||a.isMultipleFilesMessage())&&No(t)&&(a.applyReactionEvent(n),it(function(){return A(r,void 0,void 0,function(){var s,o,l;return I(this,function(u){return s={source:t},(l=(o=this._handler)===null||o===void 0?void 0:o.onMessagesUpdated)===null||l===void 0||l.call(o,s,this.channel,[a]),[2]})})}))}},e.prototype._applyThreadInfoEventToView=function(n,t){var r=this,i=Ch(this._messages,n.targetMessageId);if(i>=0){var a=this._messages[i];a&&(a.isUserMessage()||a.isFileMessage()||a.isMultipleFilesMessage())&&No(t)&&(a.applyThreadInfoUpdateEvent(n),it(function(){return A(r,void 0,void 0,function(){var s,o,l;return I(this,function(u){return s={source:t},(l=(o=this._handler)===null||o===void 0?void 0:o.onMessagesUpdated)===null||l===void 0||l.call(o,s,this.channel,[a]),[2]})})}))}},e.prototype._removeMessagesFromView=function(n,t){var r,i,a=this,s=[],o=[],l=function(m){var p=u._messages.findIndex(function(_){return a.keyOf(_)===m});if(p>=0){var E=u._messages[p];s.push(u.keyOf(E)),o.push(E),u._messages.splice(p,1)}},u=this;try{for(var d=Ge(n),f=d.next();!f.done;f=d.next())l(f.value)}catch(m){r={error:m}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return No(t)&&o.length>0&&it(function(){return A(a,void 0,void 0,function(){var m,p,E;return I(this,function(_){return m={source:t},(E=(p=this._handler)===null||p===void 0?void 0:p.onMessagesDeleted)===null||E===void 0||E.call(p,m,this.channel,s,o),[2]})})}),s},e.prototype._messageRetention=function(n,t){var r,i,a=[];try{for(var s=Ge(this._messages),o=s.next();!o.done;o=s.next()){var l=o.value;l.createdAt<=n&&a.push(this.keyOf(l))}}catch(u){r={error:u}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}a.length>0&&this._removeMessagesFromView(a,t)},e.prototype._removeUnsentMessageFromView=function(n,t){var r=this._unsentMessages.findIndex(function(i){return i.reqId===n});r>=0&&this._unsentMessages.splice(r,1)},e.prototype._getLocalMessages=function(n,t){var r=t.prevLimit,i=r===void 0?0:r,a=t.nextLimit,s=a===void 0?0:a,o=t.inclusive,l=o===void 0||o;return A(this,void 0,void 0,function(){var u,d,f,m,p;return I(this,function(E){switch(E.label){case 0:return u=[],l?[4,this._channelManager.getExactlyMatchingMessagesForTokenFromCache(this._channel.url,n,this.filter)]:[3,2];case 1:u=E.sent(),E.label=2;case 2:return i>0?[4,this._channelManager.getMessagesFromCache(this._channel.url,n,"prev",this.filter,i,!1)]:[3,4];case 3:return f=E.sent(),[3,5];case 4:f=[],E.label=5;case 5:return d=f,s>0?[4,this._channelManager.getMessagesFromCache(this._channel.url,n,"next",this.filter,s,!1)]:[3,7];case 6:return p=E.sent(),[3,8];case 7:p=[],E.label=8;case 8:return m=p,[2,{messages:Nt(Nt(Nt([],ut(u),!1),ut(d),!1),ut(m),!1).sort(function(_,b){return b.createdAt-_.createdAt}),prevMessagesCount:d.length,nextMessagesCount:m.length}]}})})},e.prototype._getRemoteMessages=function(n,t){var r=t.prevLimit,i=r===void 0?0:r,a=t.nextLimit,s=a===void 0?0:a,o=t.source,l=o===void 0?fe.REQUEST_MESSAGE:o,u=t.reverse,d=u!==void 0&&u,f=t.checkingHasNext,m=f!==void 0&&f,p=t.checkingContinuousMessages,E=p!==void 0&&p,_=t.sdkSource;return A(this,void 0,void 0,function(){var b,C;return I(this,function(y){switch(y.label){case 0:return b=xr.of(this._iid),i>0||s>0?[4,b._getMessagesByTimestampForCollection(this._channel.url,this._channel.channelType,n,vt(Y(Y(Y({},this.filter),VM),{isInclusive:!0,reverse:d,prevResultSize:i,nextResultSize:s})),l,m,E,_)]:[3,2];case 1:return C=y.sent(),[3,3];case 2:C={messages:[],isContinuousMessages:!1},y.label=3;case 3:return[2,C]}})})},e.prototype._checkHugeGap=function(){var n,t,r,i,a;return A(this,void 0,void 0,function(){var s,o,l,u,d,f,m,p,E,_,b,C,y,T,N,w,O,L,P,U,B,F,H,G,j,x=this;return I(this,function(V){switch(V.label){case 0:return s=X.of(this._iid),o=s.dispatcher,l=s.requestQueue,u=s.cacheContext,d=s.statManager,f=s.logger,this._messages.length>0?(m=this._syncRange.top,p=this.viewTop,E=this._syncRange.bottom,_=this.hasNext?this.viewBottom:Number.MAX_SAFE_INTEGER,[4,this._channelManager.getCachedMessageCountBetween(this._channel.url,this.filter,p,m)]):[3,8];case 1:return b=V.sent(),[4,this._channelManager.getCachedMessageCountBetween(this._channel.url,this.filter,E,_)];case 2:C=V.sent(),V.label=3;case 3:return V.trys.push([3,5,6,7]),[4,Up(function(){return A(x,void 0,void 0,function(){var K,W,Q,J,$,te,re,ve,ie,le,Ae,oe,he,me,Be,pe,ye,Ee=this;return I(this,function(Ue){switch(Ue.label){case 0:return K=new KF(Y(Y({channelUrl:this._channel.url,channelType:this._channel.channelType,prevStart:p,prevEnd:m,prevCount:b,nextStart:E,nextEnd:_,nextCount:C,checkingContinuousMessages:u.localCacheEnabled},this.filter),VM)),[4,l.send(K)];case 1:return W=Ue.sent(),Q=W.as(WF),J=Q.isHugeGap,$=Q.prevMessages,te=$===void 0?[]:$,re=Q.prevHasMore,ve=Q.isContinuousPrevMessages,ie=Q.nextMessages,le=ie===void 0?[]:ie,Ae=Q.nextHasmore,oe=Q.isContinuousNextMessages,J?it(function(){return A(Ee,void 0,void 0,function(){var Ye;return I(this,function(De){return!((Ye=this._handler)===null||Ye===void 0)&&Ye.onHugeGapDetected&&this._handler.onHugeGapDetected(),[2]})})}):(he=this.viewTop,me=this.viewBottom,Be=Math.min.apply(Math,Nt([Number.MAX_SAFE_INTEGER,he],ut(te.map(function(Ye){return Ye.createdAt})),!1)),pe=Math.max.apply(Math,Nt([0,me],ut(le.map(function(Ye){return Ye.createdAt})),!1)),o.dispatch(new er({messages:te,source:fe.SYNC_MESSAGE_FILL})),o.dispatch(new er({messages:le,source:fe.SYNC_MESSAGE_FILL})),this._syncRange.extends(Be,pe),(ve||oe)&&((ye=this._backgroundSync)===null||ye===void 0||ye.range.extends(Be,pe)),re&&this._prevFill.start(Be),Ae&&this._nextFill.start(pe)),[2]}})})},1)];case 4:return V.sent(),[3,7];case 5:return y=V.sent(),f.debug("Failed HugeGap Check ",y),[3,7];case 6:return u.localCacheEnabled&&d.put(new cr({type:tr.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:(t=(n=u.localCacheConfig)===null||n===void 0?void 0:n.maxSize)!==null&&t!==void 0?t:0,use_local_cache:u.localCacheEnabled,starting_point:0,message_init_policy:""}})),[7];case 7:return[3,13];case 8:T=Date.now(),V.label=9;case 9:return V.trys.push([9,11,12,13]),[4,this._getRemoteMessages(T,{prevLimit:this._prevResultLimit,nextLimit:this._nextResultLimit,source:fe.SYNC_MESSAGE_FILL,checkingHasNext:!0,checkingContinuousMessages:u.localCacheEnabled,sdkSource:es.INTERNAL_FILL_GAP})];case 10:if(N=V.sent(),w=N.messages,O=N.isContinuousMessages,L=N.hasNext,w.length>0){for(P=w.map(function(K){return K.createdAt}),U=0,B=0,F=0;F<P.length;F++)(H=P[F])<=T?U++:H>=T&&B++;this._hasPrevious=U>=this._prevResultLimit,this._hasNext=L??B>=this._nextResultLimit,(j=this._syncRange).extends.apply(j,Nt([],ut(P),!1)),O&&((r=this._backgroundSync)===null||r===void 0||r.range.extends(this._syncRange.top,this._syncRange.bottom)),this._addMessagesToView(w,fe.SYNC_MESSAGE_FILL)}else this._hasPrevious=!1,this._hasNext=!1;return[3,13];case 11:return(G=V.sent())instanceof ee&&G.code===lt.NOT_FOUND_IN_DATABASE&&(this._hasPrevious=!1,this._hasNext=!1),[3,13];case 12:return u.localCacheEnabled&&d.put(new cr({type:tr.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:(a=(i=u.localCacheConfig)===null||i===void 0?void 0:i.maxSize)!==null&&a!==void 0?a:0,use_local_cache:u.localCacheEnabled,starting_point:0,message_init_policy:""}})),[7];case 13:return[2]}})})},e.prototype._loadUnsentMessages=function(){return A(this,void 0,void 0,function(){var n;return I(this,function(t){switch(t.label){case 0:return n=this,[4,this._channelManager.getUnsentMessagesFromCache(this._channel.url,this.filter)];case 1:return n._unsentMessages=t.sent(),[2]}})})},e.prototype._hasPollMessage=function(){return A(this,void 0,void 0,function(){return I(this,function(n){switch(n.label){case 0:return[4,this._channelManager.getPollMessagesFromCache(this._channel.url,Date.now()+6e5,this.filter,1)];case 1:return n.sent().length>0?[2,!0]:[2,!1]}})})},e.prototype._refreshChannel=function(n,t){return t===void 0&&(t=!1),A(this,void 0,void 0,function(){var r,i,a=this;return I(this,function(s){switch(s.label){case 0:r=X.of(this._iid).logger,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this._channelManager.refreshChannel(this.channel.url,!0,n,t)];case 2:return s.sent(),this.channel._runIfHandleableWithGroupChannel(function(o){o.myMutedState===ns.MUTED&&dr(function(){return A(a,void 0,void 0,function(){var l;return I(this,function(u){switch(u.label){case 0:return[4,this.channel.getMyMutedInfo()];case 1:return(l=u.sent()).isMuted&&l.remainingDuration!==-1&&this._startCheckMyMutedTimer(l.remainingDuration),[2]}})})})}),[3,4];case 3:return i=s.sent(),r.warn("Failed to refresh channel",i),[3,4];case 4:return[2]}})})},e.prototype._startCheckMyMutedTimer=function(n){var t=this;this._clearCheckMyMutedTimer(),this._checkMyMutedStateTimer=setTimeout(function(){return A(t,void 0,void 0,function(){var r,i,a,s=this;return I(this,function(o){switch(o.label){case 0:this._checkMyMutedStateTimer=void 0,r=!0,o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,this._channel.getMyMutedInfo()];case 2:return i=o.sent(),r=!i.isMuted,[3,5];case 3:return o.sent(),r=!0,[3,5];case 4:return r&&(a=X.of(this._iid).sessionManager,this.channel._runIfHandleableWithGroupChannel(function(l){var u,d;l.myMutedState=ns.UNMUTED;var f={source:fe.EVENT_CHANNEL_UNMUTED,user:a.currentUser};(d=(u=s._handler)===null||u===void 0?void 0:u.onChannelUpdated)===null||d===void 0||d.call(u,f,s.channel)})),[7];case 5:return[2]}})})},n+1e3)},e.prototype._clearCheckMyMutedTimer=function(){this._checkMyMutedStateTimer&&(clearTimeout(this._checkMyMutedStateTimer),this._checkMyMutedStateTimer=void 0)},e.prototype._setHasNextAndHasPrevious=function(n,t){for(var r=n.map(function(l){return l.createdAt}),i=0,a=0,s=0;s<r.length;s++){var o=r[s];o<this._startingPoint?i++:o>this._startingPoint&&a++}this._hasPrevious=i>=this._prevResultLimit,this._hasNext=t??a>=this._nextResultLimit},e.prototype.initialize=function(n){var t=this,r=new QF;this._messages=[],this._unsentMessages=[],this._syncRange=new Ws({}),this._hasNext=!0,this._hasPrevious=!0;var i=[],a={messages:[],prevMessagesCount:0,nextMessagesCount:0};return it(function(){return A(t,void 0,void 0,function(){var s,o,l,u,d,f=this;return I(this,function(m){switch(m.label){case 0:return[4,(d=this._backgroundSync)===null||d===void 0?void 0:d.loadMetadata()];case 1:return s=m.sent(),o=X.of(this._iid),l=o.cacheContext,u=o.statManager,n===dp.CACHE_AND_REPLACE_BY_API&&this._getLocalMessages(this._startingPoint,{prevLimit:this._prevResultLimit,nextLimit:this._nextResultLimit}).then(function(p){return A(f,void 0,void 0,function(){return I(this,function(E){switch(E.label){case 0:return a=p,i=this._filterUnderOffsetMessage(a.messages),this._addMessagesToView(i,fe.REQUEST_MESSAGE),[4,this._loadUnsentMessages()];case 1:return E.sent(),r._invokeResponse("local",null,i),[2]}})})}).catch(function(p){if(Ai(p))throw p;r._invokeResponse("local",p,null)}).finally(function(){return A(f,void 0,void 0,function(){var p,E,_,b,C,y,T,N=this;return I(this,function(w){switch(w.label){case 0:return p=X.of(this._iid).cacheContext,E=!0,_=!0,b=!1,p.localCacheEnabled&&i.length>0&&(C=s.range).includes.apply(C,Nt([],ut(i.map(function(O){return O.createdAt})),!1))&&(!s.previousComplete&&a.prevMessagesCount<this._prevResultLimit?_=!0:this._startingPoint>s.range.bottom||a.nextMessagesCount<this._nextResultLimit?b=!0:_=!1),[4,this._refreshChannel(fe.REFRESH_CHANNEL,b)];case 1:return w.sent(),b&&this._channel._runIfHandleableWithGroupChannel(function(O){var L=Math.max.apply(Math,Nt([],ut(i.map(function(P){return P.createdAt})),!1));O._latestMessageInfo&&L>=O._latestMessageInfo.createdAt&&(_=!1)}),_?(E=!1,this._getRemoteMessages(this._startingPoint,{prevLimit:this._prevResultLimit,nextLimit:this._nextResultLimit,reverse:!0,checkingHasNext:!0,checkingContinuousMessages:p.localCacheEnabled,sdkSource:es.EXTERNAL_COLLECTION}).then(function(O){var L,P,U,B=O.messages,F=O.isContinuousMessages,H=O.hasNext,G=N._filterUnderOffsetMessage(B);N._messages=[],G.length>0?(N._setHasNextAndHasPrevious(G,H),(L=N._syncRange).extends.apply(L,Nt([],ut(G.map(function(j){return j.createdAt})),!1)),F&&(!((P=N._backgroundSync)===null||P===void 0)&&P.range.overlap(N._syncRange))&&((U=N._backgroundSync)===null||U===void 0||U.range.extends(N._syncRange.top,N._syncRange.bottom)),N._addMessagesToView(G,fe.REQUEST_MESSAGE)):(N._hasPrevious=!1,N._hasNext=!1),r._invokeResponse("remote",null,G)}).catch(function(O){if(Ai(O))throw O;r._invokeResponse("remote",O,null)})):(this._setHasNextAndHasPrevious(i),r._invokeResponse("remote",null,i)),p.localCacheEnabled&&u.put(new cr({type:tr.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"initial_load",event:E?"cache_hit":"cache_miss",max_db_size:(T=(y=p.localCacheConfig)===null||y===void 0?void 0:y.maxSize)!==null&&T!==void 0?T:0,message_init_policy:n,use_local_cache:p.localCacheEnabled,collection_id:this._key}})),[2]}})})}),u.put(new yf({type:tr.FEATURE_LOCALCACHE,data:{use_local_cache:l.localCacheEnabled,collection_interface:{message_init_policy:n,message:!0}}})),[2]}})})}),r},e.prototype.loadPrevious=function(){var n,t,r;return A(this,void 0,void 0,function(){var i,a,s,o,l,u,d,f,m=this;return I(this,function(p){switch(p.label){case 0:if(this._isDisposed)throw new ee({code:lt.COLLECTION_DISPOSED,message:"Collection has been disposed."});return i=X.of(this._iid),a=i.cacheContext,s=i.statManager,o=i.logger,this._hasPrevious?this._isLoadingPrevious?(o.warn("Messages are already fetching."),[2,[]]):(this._isLoadingPrevious=!0,l=this.viewTop,u=[],[4,dr(function(){return A(m,void 0,void 0,function(){var E;return I(this,function(_){switch(_.label){case 0:return[4,this._getLocalMessages(l,{prevLimit:this._prevResultLimit,inclusive:!1})];case 1:return E=_.sent(),u=this._filterUnderOffsetMessage(E.messages),[2]}})})})]):[2,[]];case 1:return p.sent(),d=u.length>=this._prevResultLimit,a.localCacheEnabled&&s.put(new cr({type:tr.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_prev",event:d?"cache_hit":"cache_miss",max_db_size:(t=(n=a.localCacheConfig)===null||n===void 0?void 0:n.maxSize)!==null&&t!==void 0?t:0,use_local_cache:a.localCacheEnabled,collection_id:this._key,message_init_policy:""}})),d&&(!((r=this._backgroundSync)===null||r===void 0)&&r.isWrappingMessages(u))?[3,3]:(f=!1,[4,dr(function(){return A(m,void 0,void 0,function(){var E,_,b,C,y,T,N,w=this;return I(this,function(O){switch(O.label){case 0:return E=X.of(this._iid).cacheContext,[4,this._getRemoteMessages(l,{prevLimit:this._prevResultLimit,reverse:!0,checkingContinuousMessages:E.localCacheEnabled,sdkSource:es.EXTERNAL_COLLECTION})];case 1:return _=O.sent(),(u=this._filterUnderOffsetMessage(_.messages)).length>0&&((b=this._syncRange).extends.apply(b,Nt([],ut(u.map(function(L){return L.createdAt})),!1)),!((C=this._backgroundSync)===null||C===void 0)&&C.range.overlap(this._syncRange)&&_.isContinuousMessages&&(f=!0,(y=this._backgroundSync)===null||y===void 0||y.range.extends(this._syncRange.top))),u=u.filter(function(L){return Ia(w._messages,L)<0}),this._hasPrevious=u.length>=this._prevResultLimit,f&&s.put(new cr({type:tr.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_prev",event:"cache_fetch",max_db_size:(N=(T=E.localCacheConfig)===null||T===void 0?void 0:T.maxSize)!==null&&N!==void 0?N:0,use_local_cache:E.localCacheEnabled,collection_id:this._key,message_init_policy:""}})),[2]}})})})]);case 2:return p.sent(),this._addMessagesToView(u,fe.REQUEST_MESSAGE),[3,4];case 3:this._hasPrevious=u.length>=this._prevResultLimit,u.length>0&&this._addMessagesToView(u,fe.REQUEST_MESSAGE),p.label=4;case 4:return this._isLoadingPrevious=!1,[2,u]}})})},e.prototype.loadNext=function(){var n,t,r;return A(this,void 0,void 0,function(){var i,a,s,o,l,u,d,f,m=this;return I(this,function(p){switch(p.label){case 0:if(this._isDisposed)throw new ee({code:lt.COLLECTION_DISPOSED,message:"Collection has been disposed."});return i=X.of(this._iid),a=i.cacheContext,s=i.statManager,o=i.logger,this._hasNext?this._isLoadingNext?(o.warn("Messages are already fetching."),[2,[]]):(this._isLoadingNext=!0,l=this.viewBottom,u=[],[4,dr(function(){return A(m,void 0,void 0,function(){var E;return I(this,function(_){switch(_.label){case 0:return[4,this._getLocalMessages(l,{nextLimit:this._nextResultLimit,inclusive:!1})];case 1:return E=_.sent(),u=this._filterUnderOffsetMessage(E.messages),[2]}})})})]):[2,[]];case 1:return p.sent(),d=u.length>=this._nextResultLimit,a.localCacheEnabled&&s.put(new cr({type:tr.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_next",event:d?"cache_hit":"cache_miss",max_db_size:(t=(n=a.localCacheConfig)===null||n===void 0?void 0:n.maxSize)!==null&&t!==void 0?t:0,use_local_cache:a.localCacheEnabled,collection_id:this._key,message_init_policy:""}})),d&&(!((r=this._backgroundSync)===null||r===void 0)&&r.isWrappingMessages(u))?[3,3]:(f=!1,[4,dr(function(){return A(m,void 0,void 0,function(){var E,_,b,C,y,T,N,w,O=this;return I(this,function(L){switch(L.label){case 0:return E=X.of(this._iid).cacheContext,[4,this._getRemoteMessages(l,{nextLimit:this._nextResultLimit,reverse:!0,checkingHasNext:!0,checkingContinuousMessages:E.localCacheEnabled,sdkSource:es.EXTERNAL_COLLECTION})];case 1:return _=L.sent(),(u=this._filterUnderOffsetMessage(_.messages)).length>0&&((b=this._syncRange).extends.apply(b,Nt([],ut(u.map(function(P){return P.createdAt})),!1)),!((C=this._backgroundSync)===null||C===void 0)&&C.range.overlap(this._syncRange)&&_.isContinuousMessages&&(f=!0,(y=this._backgroundSync)===null||y===void 0||y.range.extends(this._syncRange.bottom))),u=u.filter(function(P){return Ia(O._messages,P)<0}),this._hasNext=(T=_.hasNext)!==null&&T!==void 0?T:u.length>=this._nextResultLimit,f&&s.put(new cr({type:tr.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_next",event:"cache_fetch",max_db_size:(w=(N=E.localCacheConfig)===null||N===void 0?void 0:N.maxSize)!==null&&w!==void 0?w:0,use_local_cache:E.localCacheEnabled,collection_id:this._key,message_init_policy:""}})),[2]}})})})]);case 2:return p.sent(),this._addMessagesToView(u,fe.REQUEST_MESSAGE),[3,4];case 3:this._hasNext=u.length>=this._nextResultLimit,u.length>0&&this._addMessagesToView(u,fe.REQUEST_MESSAGE),p.label=4;case 4:return this._isLoadingNext=!1,[2,u]}})})},e.prototype.removeFailedMessage=function(n){return A(this,void 0,void 0,function(){var t;return I(this,function(r){switch(r.label){case 0:if(this._isDisposed)throw new ee({code:lt.COLLECTION_DISPOSED,message:"Collection has been disposed."});return[4,this._channelManager.removeFailedMessageFromCache(n)];case 1:return r.sent(),(t=this._unsentMessages.findIndex(function(i){return i.reqId===n}))>-1&&this._unsentMessages.splice(t,1),[2]}})})},e.prototype.dispose=function(){var n,t,r,i=this;if(!this._isDisposed){this._isDisposed=!0;var a=X.of(this._iid),s=a.cacheContext,o=a.dispatcher;this._messages=[],this._clearCheckMyMutedTimer(),this._channel._runIfHandleableWithGroupChannel(function(l){l.myMemberState!==hr.NONE&&(i._channel._updateMessageCollectionLastAccessedAt(),o.dispatch(new on({channels:[i._channel],context:{source:fe.CHANNEL_LASTACCESSEDAT_UPDATED}})))}),s.localCacheEnabled&&(this._prevFill.stop(),this._nextFill.stop()),(n=this._backgroundSync)===null||n===void 0||n.close(),(t=this._changelogSync)===null||t===void 0||t.close(),(r=this._pollChangelogSync)===null||r===void 0||r.close(),this._channelManager.unsubscribeChannelEvent(this._key),this._channelManager.unsubscribeMessageEvent(this._key),this._connectionEventContext&&this._connectionEventContext.close()}},e}(),XF=function(e){function n(t,r){return e.call(this,t,Y(Y({},r),{channelManager:zr.of(t)}))||this}return z(n,e),n.prototype.keyOf=function(t){return t.messageId},n.prototype.initialize=function(t){return e.prototype.initialize.call(this,t)},n.prototype.setMessageCollectionHandler=function(t){this._setBaseMessageCollectionHandler(t)},n.prototype._addMessagesToView=function(t,r){var i,a,s=this,o=this._filterUnderOffsetMessage(t),l=[],u=[];try{for(var d=Ge(o),f=d.next();!f.done;f=d.next()){var m=f.value;if(r===fe.SYNC_MESSAGE_FILL)if(m.messageId>0){if((b=Ia(this._messages,m))<0){Ia(this._unsentMessages,m)<0&&l.push(m);var p=b_(this._messages,m);this._messages.splice(p,0,m)}}else m instanceof fr&&(b=Ia(this._unsentMessages,m))<0&&Ia(this._messages,m)<0&&(this._unsentMessages.push(m),l.push(m));else if(m.messageId>0){if((b=Ia(this._messages,m))<0){var E=Ia(this._unsentMessages,m);E<0?l.push(m):(this._unsentMessages.splice(E,1),u.push(m)),p=b_(this._messages,m),this._messages.splice(p,0,m)}else u.push(m),this._messages[b]=m;if(m.updatedAt>0){var _=this._updateChildMessagesInView(m);u.push.apply(u,Nt([],ut(_),!1))}}else if(m instanceof fr){var b;(b=Ia(this._unsentMessages,m))<0?Ia(this._messages,m)<0&&(this._unsentMessages.push(m),l.push(m)):(u.push(m),this._unsentMessages[b]=m)}}}catch(C){i={error:C}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}No(r)&&it(function(){return A(s,void 0,void 0,function(){var C,y,T,N,w;return I(this,function(O){return C={source:r},l.length>0&&((T=(y=this._handler)===null||y===void 0?void 0:y.onMessagesAdded)===null||T===void 0||T.call(y,C,this.channel,l)),u.length>0&&((w=(N=this._handler)===null||N===void 0?void 0:N.onMessagesUpdated)===null||w===void 0||w.call(N,C,this.channel,u)),[2]})})})},n.prototype._updateMessagesToView=function(t,r){var i,a,s=this,o=[],l=[],u=[];try{for(var d=Ge(t),f=d.next();!f.done;f=d.next()){var m,p=f.value;if(p.messageId>0)if((m=Ia(this._messages,p))>=0)l.push(p),this._messages[m]=p;else{var E=Ia(this._unsentMessages,p);if(E>=0){var _=ut(this._unsentMessages.splice(E,1),1)[0];if(this.hasNext&&_)u.push(_);else{l.push(p);var b=b_(this._messages,p);this._messages.splice(b,0,p)}}else{var C=this._messages.map(function(y){return y.createdAt});(p.createdAt<Math.min.apply(Math,Nt([],ut(C),!1))&&!this._hasPrevious||p.createdAt>Math.max.apply(Math,Nt([],ut(C),!1))&&!this._hasNext)&&o.push(p)}}else p instanceof fr&&(m=Ia(this._unsentMessages,p))>=0&&(l.push(p),this._unsentMessages[m]=p)}}catch(y){i={error:y}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}return No(r)&&it(function(){return A(s,void 0,void 0,function(){var y,T,N,w,O;return I(this,function(L){return y={source:r},l.length>0?(N=(T=this._handler)===null||T===void 0?void 0:T.onMessagesUpdated)===null||N===void 0||N.call(T,y,this.channel,l):u.length>0?(O=(w=this._handler)===null||w===void 0?void 0:w.onMessagesDeleted)===null||O===void 0||O.call(w,y,this.channel,[],u):o.length>0&&this._addMessagesToView(o,r),[2]})})}),l},n}(YF),ZF={coverUrl:void 0,coverImage:void 0,isDistinct:void 0,isPublic:void 0,isDiscoverable:void 0,accessCode:void 0,name:void 0,data:void 0,customType:void 0,operatorUserIds:void 0,messageSurvivalSeconds:void 0},JF=function(e){function n(t){var r=this,i=t.channelUrl,a=t.token,s=t.limit,o=t.order,l=t.mutedMemberFilter,u=t.memberStateFilter,d=t.nicknameStartsWithFilter,f=t.operatorFilter;return(r=e.call(this)||this).method=Ie.GET,r.path="".concat(Ui,"/").concat(encodeURIComponent(i),"/members"),r.params={token:a,limit:s,order:o,muted_member_filter:l,member_state_filter:u,nickname_startswith:d,operator_filter:f,show_member_is_muted:!0,show_read_receipt:!0,show_delivery_receipt:!0},r}return z(n,e),n}(we),e5=function(e){function n(t,r){var i=e.call(this,t,r)||this;i.members=[];var a=r.next,s=r.members;return i.token=a,s&&s.length>0&&(i.members=s.map(function(o){return new xa(t,o)})),i}return z(n,e),n}(Pe);(function(e){e.ALL="all",e.MUTED="muted",e.UNMUTED="unmuted"})(df||(df={})),function(e){e.MEMBER_NICKNAME_ALPHABETICAL="member_nickname_alphabetical",e.OPERATOR_THEN_MEMBER_ALPHABETICAL="operator_then_member_alphabetical"}(hf||(hf={})),function(e){e.ALL="all",e.JOINED="joined_only",e.INVITED="invited_only",e.INVITED_BY_FRIEND="invited_by_friend",e.INVITED_BY_NON_FRIEND="invited_by_non_friend"}(ff||(ff={}));var t5=function(e){function n(t,r,i){var a,s,o,l,u=this;return(u=e.call(this,t,r,ln.GROUP,i)||this).mutedMemberFilter=df.ALL,u.memberStateFilter=ff.ALL,u.nicknameStartsWithFilter=null,u.operatorFilter=Sf.ALL,u.order=hf.MEMBER_NICKNAME_ALPHABETICAL,u.mutedMemberFilter=(a=i.mutedMemberFilter)!==null&&a!==void 0?a:df.ALL,u.memberStateFilter=(s=i.memberStateFilter)!==null&&s!==void 0?s:ff.ALL,u.nicknameStartsWithFilter=(o=i.nicknameStartsWithFilter)!==null&&o!==void 0?o:null,u.order=(l=i.order)!==null&&l!==void 0?l:hf.MEMBER_NICKNAME_ALPHABETICAL,u}return z(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&Wt(df,this.mutedMemberFilter)&&Wt(ff,this.memberStateFilter)&&(Z("string",this.nicknameStartsWithFilter)||this.nicknameStartsWithFilter===null)&&Wt(Sf,this.operatorFilter)&&Wt(hf,this.order)},n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return I(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=X.of(this._iid).requestQueue,r=new JF(vt(Y(Y({},this),{token:this._token}))),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),a=i.as(e5),s=a.members,o=a.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw ee.queryInProgress;case 4:return[3,6];case 5:throw ee.invalidParameters;case 6:return[2]}})})},n}(ro),n5=function(e){function n(t){var r=this,i=t.channelUrl,a=t.userId,s=t.accessCode;return(r=e.call(this)||this).method=Ie.PUT,r.path="".concat(Ui,"/").concat(encodeURIComponent(i),"/accept"),r.params={user_id:a,access_code:s},r}return z(n,e),n}(we),r5=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.channel=new za(t,r),i.channel.myMemberState=hr.JOINED,i}return z(n,e),n}(Pe),i5=function(e){function n(t){var r=this,i=t.channelUrl,a=t.isDistinct,s=t.isPublic,o=t.isDiscoverable,l=t.coverUrl,u=t.coverImage,d=t.accessCode,f=t.name,m=t.data,p=t.customType,E=t.operatorUserIds,_=t.messageSurvivalSeconds;return(r=e.call(this)||this).method=Ie.PUT,r.path="".concat(Ui,"/").concat(encodeURIComponent(i)),r.params=Qe({is_distinct:a,is_public:s,is_discoverable:o,name:f,data:m,custom_type:p,cover_url:l,cover_file:u,access_code:d,operator_ids:E,message_survival_seconds:_}),r}return z(n,e),n}(we),a5=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.channel=new za(t,r),i}return z(n,e),n}(Pe),s5=function(e){function n(t){var r=this,i=t.channelUrl;return(r=e.call(this)||this).method=Ie.DELETE,r.path="".concat(Ui,"/").concat(encodeURIComponent(i)),r}return z(n,e),n}(we);(function(e){function n(t,r){return e.call(this,t,r)||this}z(n,e)})(Pe);var o5=function(e){function n(t){var r=this,i=t.channelUrl;return(r=e.call(this)||this).method=Ie.DELETE,r.path="".concat(Ui,"/").concat(encodeURIComponent(i),"/hide"),r}return z(n,e),n}(we);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}z(n,e)})(Pe);var l5=function(e){function n(t){var r=t.userId,i=t.channelUrl,a=t.countPreference,s=e.call(this)||this;return s.method=Ie.PUT,s.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/count_preference/").concat(encodeURIComponent(i)),s.params={count_preference:a},s}return z(n,e),n}(we),u5=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.countPreference=r.count_preference,i}return z(n,e),n}(Pe),c5=function(e){function n(t){var r=this,i=t.channelUrl,a=t.locale;return(r=e.call(this)||this).method=Ie.PUT,r.path="".concat(Ui,"/").concat(encodeURIComponent(i),"/reset_user_history"),r.params=Qe({locale:a}),r}return z(n,e),n}(we),d5=function(e){function n(t,r){var i=e.call(this,t,r)||this,a=r.ts_message_offset;return i.messageOffsetTimestamp=a,i}return z(n,e),n}(Pe),h5=Y(Y({},Ab),{scheduledAt:void 0,file:void 0,fileUrl:void 0,fileName:void 0,mimeType:void 0,fileSize:void 0,thumbnailSizes:void 0,requireAuth:!1}),f5=Y(Y({},aR),{scheduledAt:void 0}),v5=function(e){function n(t){var r,i,a=this;a=e.call(this)||this;var s=[];t.mentionType===gi.USERS&&(t.mentionedUserIds?s=t.mentionedUserIds:t.mentionedUsers&&(s=t.mentionedUsers.map(function(d){return d.userId})));var o=t.channelType,l=t.channelUrl,u=t.scheduledMessageId;return a.method=Ie.PUT,a.path="".concat(yn(o),"/").concat(encodeURIComponent(l),"/scheduled_messages/").concat(encodeURIComponent(u)),a.params=Qe(vt({req_id:t.reqId,scheduled_at:t.scheduledAt,message_type:hd.FILE,url:t.fileUrl,file_name:t.fileName,file_size:t.fileSize,file_type:t.mimeType,thumbnails:(r=t._thumbnails)===null||r===void 0?void 0:r.map(function(d){return Ko.payloadify(d)}),custom_type:t.customType,data:t.data,require_auth:t.requireAuth,mention_type:t.mentionType,mentioned_user_ids:s,sorted_metaarray:(i=t.metaArrays)===null||i===void 0?void 0:i.map(function(d){return $r.payloadify(d)}),apple_critical_alert_options:t.appleCriticalAlertOptions?ls.payloadify(t.appleCriticalAlertOptions):null,push_option:t.pushNotificationDeliveryOption})),a}return z(n,e),n}(we),m5=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.message=new Mr(t,r),i}return z(n,e),n}(Pe),p5=function(e){function n(t){var r,i=this;i=e.call(this)||this;var a=[];t.mentionType===gi.USERS&&(t.mentionedUserIds?a=t.mentionedUserIds:t.mentionedUsers&&(a=t.mentionedUsers.map(function(u){return u.userId})));var s=t.channelType,o=t.channelUrl,l=t.scheduledMessageId;return i.method=Ie.PUT,i.path="".concat(yn(s),"/").concat(encodeURIComponent(o),"/scheduled_messages/").concat(encodeURIComponent(l)),i.params=Qe(vt({req_id:t.reqId,scheduled_at:t.scheduledAt,message_type:hd.USER,message:t.message,custom_type:t.customType,data:t.data,mention_type:t.mentionType,mentioned_user_ids:a,sorted_metaarray:(r=t.metaArrays)===null||r===void 0?void 0:r.map(function(u){return $r.payloadify(u)}),apple_critical_alert_options:t.appleCriticalAlertOptions?ls.payloadify(t.appleCriticalAlertOptions):null,target_langs:t.translationTargetLanguages,push_option:t.pushNotificationDeliveryOption})),i}return z(n,e),n}(we);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.message=new fi(t,r),i}z(n,e)})(Pe);var La,Da,g5=function(e){function n(t){var r=e.call(this)||this,i=t.channelType,a=t.channelUrl,s=t.scheduledMessageId;return r.method=Ie.DELETE,r.path="".concat(yn(i),"/").concat(encodeURIComponent(a),"/scheduled_messages/").concat(encodeURIComponent(s)),r}return z(n,e),n}(we),_5=function(e){function n(t){var r=e.call(this)||this,i=t.channelType,a=t.channelUrl,s=t.scheduledMessageId;return r.method=Ie.POST,r.path="".concat(yn(i),"/").concat(encodeURIComponent(a),"/scheduled_messages/").concat(encodeURIComponent(s),"/send_now"),r}return z(n,e),n}(we),E5=function(e){function n(t){var r=t.userId,i=t.channelUrl,a=t.pushTriggerOption,s=e.call(this)||this;return s.method=Ie.PUT,s.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/push_preference/").concat(encodeURIComponent(i)),s.params={push_trigger_option:a},s}return z(n,e),n}(we),y5=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.pushTriggerOption=r.push_trigger_option,i.enabled=r.enable,i}return z(n,e),n}(Pe),b5=function(e){function n(t){var r=t.userId,i=t.channelUrl,a=e.call(this)||this;return a.method=Ie.GET,a.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/push_preference/").concat(encodeURIComponent(i)),a}return z(n,e),n}(we),C5=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.pushTriggerOption=r.push_trigger_option,i.enabled=r.enable,i}return z(n,e),n}(Pe),S5=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType;return(r=e.call(this)||this).method=Ie.GET,r.path="".concat(yn(a),"/").concat(encodeURIComponent(i),"/message_purge_offset"),r}return z(n,e),n}(we),T5=function(e){function n(t,r){var i=e.call(this,t,r)||this,a=r.message_purge_offset;return i.messageDeletionTimestamp=a,i}return z(n,e),n}(Pe);(function(e){e.ALL="all",e.UNREAD_MESSAGE_COUNT_ONLY="unread_message_count_only",e.UNREAD_MENTION_COUNT_ONLY="unread_mention_count_only",e.OFF="off"})(La||(La={})),function(e){e.UNHIDDEN="unhidden",e.HIDDEN_ALLOW_AUTO_UNHIDE="hidden_allow_auto_unhide",e.HIDDEN_PREVENT_AUTO_UNHIDE="hidden_prevent_auto_unhide"}(Da||(Da={}));var za=function(e){function n(t,r){var i,a,s,o,l,u,d,f,m,p,E,_,b,C,y,T,N,w,O,L,P,U=this;return(U=e.call(this,t,r)||this)._unreadMemberStateMap=new Map,U._undeliveredMemberStateMap=new Map,U._typingStatus=new Map,U._lastMemberCountUpdated=0,U._typingStarted=0,U._typingEnded=0,U._hasBotInfo={general:!1,ai:!1},U.isDistinct=!1,U.isSuper=!1,U.isBroadcast=!1,U.isExclusive=!1,U.isPublic=!1,U.isDiscoverable=!0,U.isChatNotification=!1,U.isAccessCodeRequired=!1,U.isPushEnabled=!1,U.unreadMessageCount=0,U.unreadMentionCount=0,U.totalUnreadReplyCount=0,U.members=[],U.memberCount=0,U.joinedMemberCount=0,U.hiddenState=Da.UNHIDDEN,U.lastMessage=null,U.messageOffsetTimestamp=0,U.messageSurvivalSeconds=-1,U.myMemberState=hr.NONE,U.myRole=Zr.NONE,U.myMutedState=ns.UNMUTED,U.myLastRead=0,U.myCountPreference=La.ALL,U.myPushTriggerOption=xu.DEFAULT,U.inviter=null,U.invitedAt=0,U.joinedAt=0,U.lastPinnedMessage=null,U._latestMessageInfo=null,U._pinnedMessagesUpdatedAt=0,U._myMutedRemainingTime=-1,U._messageDeletionTimestamp=0,U.channelType=ln.GROUP,U.isDistinct=(a=r.is_distinct)!==null&&a!==void 0&&a,U.isSuper=(s=r.is_super)!==null&&s!==void 0&&s,U.isBroadcast=(o=r.is_broadcast)!==null&&o!==void 0&&o,U.isExclusive=(l=r.is_exclusive)!==null&&l!==void 0&&l,U.isPublic=(u=r.is_public)!==null&&u!==void 0&&u,U.isDiscoverable=(d=r.is_discoverable)!==null&&d!==void 0?d:U.isPublic,U.isChatNotification=(f=r.is_chat_notification)!==null&&f!==void 0&&f,U.isAccessCodeRequired=(m=r.is_access_code_required)!==null&&m!==void 0&&m,U.isPushEnabled=(p=r.is_push_enabled)!==null&&p!==void 0&&p,Array.isArray(r.members)&&(i=U.members).push.apply(i,Nt([],ut(r.members.map(function(B){return new xa(U._iid,B)})),!1)),U.memberCount=(E=r.member_count)!==null&&E!==void 0?E:0,U.joinedMemberCount=(_=r.joined_member_count)!==null&&_!==void 0?_:0,U.hiddenState=Wt(Da,r.hidden_state)?r.hidden_state:Da.UNHIDDEN,U.messageOffsetTimestamp=(b=r.ts_message_offset)!==null&&b!==void 0?b:0,U.messageSurvivalSeconds=(C=r.message_survival_seconds)!==null&&C!==void 0?C:-1,U.lastMessage=r.last_message?_i(U._iid,Y({channel_type:U.channelType},r.last_message)):null,r.read_receipt&&Object.keys(r.read_receipt).forEach(function(B){Z("number",r.read_receipt[B])&&U._updateUnreadMemberState(B,r.read_receipt[B])}),r.delivery_receipt&&Object.keys(r.delivery_receipt).forEach(function(B){Z("number",r.delivery_receipt[B])&&U._updateUndeliveredMemberState(B,r.delivery_receipt[B])}),U.myMemberState=Wt(hr,r.member_state)?r.member_state:hr.NONE,U.myRole=Wt(Zr,r.my_role)?r.my_role:Zr.NONE,Wt(ns,r.is_muted)?U.myMutedState=r.is_muted:Z("boolean",r.is_muted)?U.myMutedState=r.is_muted?ns.MUTED:ns.UNMUTED:U.myMutedState=ns.UNMUTED,U.myCountPreference=Wt(La,r.count_preference)?r.count_preference:La.ALL,U.myPushTriggerOption=Wt(xu,r.push_trigger_option)?r.push_trigger_option:xu.ALL,U.myLastRead=(y=r.user_last_read)!==null&&y!==void 0?y:0,U.inviter=r.inviter?new Yt(U._iid,r.inviter):null,U.invitedAt=(T=r.invited_at)!==null&&T!==void 0?T:0,U.joinedAt=(N=r.joined_ts)!==null&&N!==void 0?N:0,U._updateUnreadCount((w=r.unread_message_count)!==null&&w!==void 0?w:0,(O=r.unread_mention_count)!==null&&O!==void 0?O:0),U.totalUnreadReplyCount=(L=r.total_unread_thread_message_count)!==null&&L!==void 0?L:0,U.lastPinnedMessage=r.latest_pinned_message?_i(U._iid,Y({channel_type:U.channelType},r.latest_pinned_message)):null,r.latest_message&&(U._latestMessageInfo={messageId:r.latest_message.message_id,createdAt:r.latest_message.created_at}),U._hasBotInfo={general:!!r.has_bot,ai:!!r.has_ai_bot},U._messageDeletionTimestamp=(P=r.message_purge_offset)!==null&&P!==void 0?P:0,U}return z(n,e),Object.defineProperty(n.prototype,"isHidden",{get:function(){return this.hiddenState!==Da.UNHIDDEN},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isTyping",{get:function(){return this._typingStatus.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cachedUnreadMemberState",{get:function(){var t,r,i={};try{for(var a=Ge(this._unreadMemberStateMap),s=a.next();!s.done;s=a.next()){var o=ut(s.value,2),l=o[0],u=o[1];i[l]=u}}catch(d){t={error:d}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cachedUndeliveredMemberState",{get:function(){var t,r,i={};try{for(var a=Ge(this._undeliveredMemberStateMap),s=a.next();!s.done;s=a.next()){var o=ut(s.value,2),l=o[0],u=o[1];i[l]=u}}catch(d){t={error:d}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasBot",{get:function(){return this._hasBotInfo.general},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasAiBot",{get:function(){return this._hasBotInfo.ai},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"messageDeletionTimestamp",{get:function(){return this._messageDeletionTimestamp},enumerable:!1,configurable:!0}),n.payloadify=function(t){return Qe(vt(Y(Y({},e.payloadify.call(this,t)),{is_access_code_required:t.isAccessCodeRequired,is_distinct:t.isDistinct,is_super:t.isSuper,is_broadcast:t.isBroadcast,is_exclusive:t.isExclusive,is_public:t.isPublic,is_discoverable:t.isDiscoverable,is_muted:t.myMutedState,is_push_enabled:t.isPushEnabled,unread_message_count:t.unreadMessageCount,unread_mention_count:t.unreadMentionCount,total_unread_thread_message_count:t.totalUnreadReplyCount,push_trigger_option:t.myPushTriggerOption,count_preference:t.myCountPreference,hidden_state:t.hiddenState,member_count:t.memberCount,joined_member_count:t.joinedMemberCount,member_state:t.myMemberState,my_role:t.myRole,user_last_read:t.myLastRead,ts_message_offset:t.messageOffsetTimestamp,message_survival_seconds:t.messageSurvivalSeconds,read_receipt:t.cachedUnreadMemberState,delivery_receipt:t.cachedUndeliveredMemberState,members:t.members.map(function(r){return xa.payloadify(r)}),last_message:t.lastMessage?vE(t.lastMessage):null,inviter:t.inviter?Yt.payloadify(t.inviter):null,invited_at:t.invitedAt,joined_ts:t.joinedAt,latest_pinned_message:t.lastPinnedMessage?vE(t.lastPinnedMessage):null,latest_message:t._latestMessageInfo?{message_id:t._latestMessageInfo.messageId,created_at:t._latestMessageInfo.createdAt}:null,has_bot:t.hasBot,has_ai_bot:t.hasAiBot,message_purge_offset:t.messageDeletionTimestamp})))},n.prototype._shouldUpdateLastMessageWith=function(t){if(t.silent)return!1;var r=X.of(this._iid).appInfo;switch(r==null?void 0:r.lastMessageThreadingPolicy){case Gu.NONE:case Gu.INCLUDE_REPLY:break;case Gu.EXCLUDE_REPLY:if(t.parentMessageId>0)return!1;break;case Gu.INCLUDE_REPLY_TO_CHANNEL:if(t instanceof fr&&t.parentMessageId>0&&!t.replyToChannel)return!1}return!this.lastMessage||this.lastMessage.createdAt<t.createdAt||this.lastMessage.createdAt===t.createdAt&&this.lastMessage.messageId===t.messageId&&this.lastMessage.updatedAt<t.updatedAt},n.prototype._tryUpdateLastMessageAndCallEvents=function(t,r){var i=X.of(this._iid).dispatcher,a=zr.of(this._iid);this._updateLastMessage(r),a.handlers.map(function(s){s.onChannelChanged&&s.onChannelChanged(t)}),i.dispatch(new on({channels:[t],context:{source:fe.EVENT_MESSAGE_SENT}}))},n.prototype._shouldUpdateUnreadCountWith=function(t){var r=X.of(this._iid).appInfo;switch(r==null?void 0:r.unreadCountThreadingPolicy){case Hu.NONE:case Hu.INCLUDE_REPLY:break;case Hu.EXCLUDE_REPLY:if(t.parentMessageId>0)return!1;break;case Hu.INCLUDE_REPLY_TO_CHANNEL:if(t instanceof fr&&t.parentMessageId>0&&!t.replyToChannel)return!1}return!0},n.prototype._updateLastMessage=function(t){return!!this._shouldUpdateLastMessageWith(t)&&(this.lastMessage=t,!0)},n.prototype._updateUnreadCount=function(t,r){if(typeof t=="number"&&t>=0)if(this.myCountPreference===La.ALL||this.myCountPreference===La.UNREAD_MESSAGE_COUNT_ONLY)if(this.isExclusive||this.isSuper||this.isBroadcast){var i=X.of(this._iid).maxSuperGroupChannelUnreadCount;this.unreadMessageCount=i&&t>=i?i:t}else this.unreadMessageCount=t;else this.unreadMessageCount=0;else this.unreadMessageCount=0;typeof r=="number"&&r>=0&&(this.myCountPreference===La.ALL||this.myCountPreference===La.UNREAD_MENTION_COUNT_ONLY)?this.unreadMentionCount=r:this.unreadMentionCount=0},n.prototype._updateUnreadMemberState=function(t,r){var i=this._unreadMemberStateMap.get(t);return(!i||i<r)&&(this._unreadMemberStateMap.set(t,r),X.of(this._iid).sdkState.userId===t&&(this.myLastRead=r),!0)},n.prototype._updateUndeliveredMemberState=function(t,r){var i=this._undeliveredMemberStateMap.get(t);return(!i||i<r)&&(this._undeliveredMemberStateMap.set(t,r),!0)},n.prototype._updateTypingStatus=function(t,r){r===void 0&&(r=new Date().getTime()),r>0?this._typingStatus.set(t.userId,{user:t,ts:r}):this._typingStatus.delete(t.userId)},n.prototype._clearTypingStatus=function(){this._typingStatus.clear(),this._typingStarted=0,this._typingEnded=0},n.prototype._setLatestMemberCount=function(t,r,i){var a=!1;return i>=this._lastMemberCountUpdated&&(this._lastMemberCountUpdated=i,a=t!==this.memberCount||r!==this.joinedMemberCount,this.memberCount=t,this.joinedMemberCount=r),a},n.prototype.isReadMessage=function(t){var r=X.of(this._iid).sdkState,i=this._unreadMemberStateMap.get(r.userId);return!!i&&i>=t.createdAt},n.prototype.serialize=function(){var t=this;return Ad(this,function(r){r.cachedUnreadMemberState=t.cachedUnreadMemberState,r.cachedUndeliveredMemberState=t.cachedUndeliveredMemberState,Object.assign(r,t._serializeCachedMetaData())})},n.prototype.createMessageCollection=function(t){return t===void 0&&(t={}),new XF(this._iid,Y(Y({},t),{channel:this}))},n.prototype.createMemberListQuery=function(t){return t===void 0&&(t={}),new t5(this._iid,this.url,t)},n.prototype.createThreadedParentMessageListQuery=function(t){return t===void 0&&(t={}),new K6(this._iid,this.url,this.channelType,t)},n.prototype.addMember=function(t,r){if(r===void 0&&(r=0),!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var i=this.members.findIndex(function(s){return s.userId===t.userId});if(i>-1){var a=this.members[i];a.state===hr.JOINED&&(t.state=a.state),this.members.splice(i,1),this.memberCount--}this.members.push(t),this.memberCount++,this._updateUnreadMemberState(t.userId,r),this._updateUndeliveredMemberState(t.userId,r)}},n.prototype.removeMember=function(t){if(!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var r=t instanceof xa?t.userId:t,i=this.members.findIndex(function(a){return a.userId===r});if(i>-1)return this.members.splice(i,1),this.memberCount--,!0}return!1},n.prototype.getUnreadMemberCount=function(t){var r,i;if(t instanceof fr&&!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var a=X.of(this._iid).sdkState,s=t.createdAt,o=0;try{for(var l=Ge(this.members),u=l.next();!u.done;u=l.next()){var d=u.value;a.userId!==d.userId&&d.state===hr.JOINED&&t.sender.userId!==d.userId&&(this.cachedUnreadMemberState[d.userId]||0)<s&&o++}}catch(f){r={error:f}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return o}return 0},n.prototype.getUndeliveredMemberCount=function(t){var r,i;if(t instanceof fr&&!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var a=X.of(this._iid).sdkState,s=t.createdAt,o=0;try{for(var l=Ge(this.members),u=l.next();!u.done;u=l.next()){var d=u.value;a.userId!==d.userId&&d.state===hr.JOINED&&t.sender.userId!==d.userId&&(this.cachedUndeliveredMemberState[d.userId]||0)<s&&o++}}catch(f){r={error:f}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return o}return 0},n.prototype.getReadMembers=function(t,r){var i=this;r===void 0&&(r=!1);var a=X.of(this._iid).sdkState;if(!a.userId||this.isExclusive||this.isSuper||this.isBroadcast)return[];var s=t instanceof fr?t.sender:null,o=[];return this.members.forEach(function(l){if(r||l.userId!==a.userId&&l.userId!==(s==null?void 0:s.userId)){var u=i._unreadMemberStateMap.get(l.userId);u&&u>=t.createdAt&&o.push(l)}}),o},n.prototype.getUnreadMembers=function(t,r){var i=this;r===void 0&&(r=!1);var a=X.of(this._iid).sdkState;if(!a.userId||this.isExclusive||this.isSuper||this.isBroadcast)return[];var s=t instanceof fr?t.sender:null,o=[];return this.members.forEach(function(l){if(r||l.userId!==a.userId&&l.userId!==(s==null?void 0:s.userId)){var u=i._unreadMemberStateMap.get(l.userId);u&&u<t.createdAt&&o.push(l)}}),o},n.prototype.getReadStatus=function(t){var r=this;t===void 0&&(t=!1);var i=X.of(this._iid).sdkState;if(!i.userId||this.isExclusive||this.isSuper||this.isBroadcast)return null;var a={};return this.members.forEach(function(s){if(t||s.userId!==i.userId){var o=r._unreadMemberStateMap.get(s.userId);a[s.userId]=new X2(r._iid,{channel_url:r.url,channel_type:r.channelType,user:xa.payloadify(s),ts:o??0})}}),a},n.prototype.getDeliveryStatus=function(t){var r=this;t===void 0&&(t=!0);var i=X.of(this._iid).sdkState;if(!i.userId||this.isExclusive||this.isSuper||this.isBroadcast)return null;var a={};return this.members.forEach(function(s){if(t||s.userId!==i.userId){var o=r._undeliveredMemberStateMap.get(s.userId);a[s.userId]=new J6(r._iid,{channel_url:r.url,channel_type:r.channelType,user:xa.payloadify(s),ts:o??0})}}),a},n.prototype.getTypingUsers=function(){var t=[];return this._typingStatus.forEach(function(r){var i=r.user;t.push(i)}),t},n.prototype.invalidateTypingStatus=function(){var t=this,r=X.of(this._iid).typingIndicatorInvalidateTime,i=Date.now(),a=!1;return this._typingStatus.forEach(function(s,o){var l=s.ts;i-l>=r&&(t._typingStatus.delete(o),a=!0)}),a},n.prototype.refresh=function(){return A(this,void 0,void 0,function(){return I(this,function(t){return[2,this._refresh()]})})},n.prototype._refresh=function(t){return t===void 0&&(t=!1),A(this,void 0,void 0,function(){var r,i,a,s,o,l;return I(this,function(u){switch(u.label){case 0:return r=X.of(this._iid),i=r.requestQueue,a=r.dispatcher,s=new ME({channelUrl:this.url}),[4,i.send(s)];case 1:return o=u.sent(),l=o.as(NE).channel,this._update(l),t||a.dispatch(new on({channels:[l],context:{source:fe.REFRESH_CHANNEL}})),[2,this]}})})},n.prototype.freeze=function(){return A(this,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return[4,e.prototype.freeze.call(this)];case 1:return t.sent(),X.of(this._iid).dispatcher.dispatch(new on({channels:[this],context:{source:fe.EVENT_CHANNEL_FROZEN},isWebSocketEventComing:!0})),[2]}})})},n.prototype.unfreeze=function(){return A(this,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return[4,e.prototype.unfreeze.call(this)];case 1:return t.sent(),X.of(this._iid).dispatcher.dispatch(new on({channels:[this],context:{source:fe.EVENT_CHANNEL_UNFROZEN},isWebSocketEventComing:!0})),[2]}})})},n.prototype.updateChannel=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u;return I(this,function(d){switch(d.label){case 0:return r=Y(Y({},ZF),t),Oe(function(f){return Z("string",f.coverUrl,!0)&&(Vr(f.coverImage)||Z("string",f.coverImage,!0))&&Z("boolean",f.isDistinct,!0)&&Z("boolean",f.isPublic,!0)&&Z("boolean",f.isDiscoverable,!0)&&Z("string",f.accessCode,!0)&&Z("string",f.name,!0)&&Z("string",f.data,!0)&&Z("string",f.customType,!0)&&Qt("string",f.operatorUserIds,!0)&&Z("number",f.messageSurvivalSeconds,!0)}(r)).throw(ee.invalidParameters),i=X.of(this._iid),a=i.dispatcher,s=i.requestQueue,o=new i5(Y({channelUrl:this.url},r)),[4,s.send(o)];case 1:return l=d.sent(),u=l.as(a5).channel,this._update(u),a.dispatch(new on({channels:[u],context:{source:fe.EVENT_CHANNEL_UPDATED},isWebSocketEventComing:!0})),[2,this]}})})},n.prototype.invite=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){return Oe(t.every(function(i){return i instanceof Yt})).throw(ee.invalidParameters),[2,this.inviteWithUserIds(t.map(function(i){return i.userId}))]})})},n.prototype.inviteWithUserIds=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u;return I(this,function(d){switch(d.label){case 0:return Oe(Qt("string",t)).throw(ee.invalidParameters),r=X.of(this._iid),i=r.dispatcher,a=r.requestQueue,s=r.sessionManager,o=new wF({channelUrl:this.url,userIds:t}),[4,a.send(o)];case 1:return l=d.sent(),u=l.as(RF).channel,this._update(u),i.dispatch(new on({channels:[u],context:{source:fe.EVENT_CHANNEL_INVITED,inviter:s.currentUser,invitees:[]},isWebSocketEventComing:!0})),[2,this]}})})},n.prototype.join=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u;return I(this,function(d){switch(d.label){case 0:return Oe(Z("string",t,!0)).throw(ee.invalidParameters),r=X.of(this._iid),i=r.dispatcher,a=r.sdkState,s=r.requestQueue,o=new TF({channelUrl:this.url,userId:a.userId,accessCode:t}),[4,s.send(o)];case 1:return l=d.sent(),(u=l.as(MF).channel).myMemberState=this.myMemberState=hr.JOINED,this._update(u),i.dispatch(new on({channels:[u],context:{source:fe.EVENT_CHANNEL_JOINED,users:[]},isWebSocketEventComing:!0})),[2,this]}})})},n.prototype.leave=function(t){return t===void 0&&(t=!1),A(this,void 0,void 0,function(){var r,i,a,s;return I(this,function(o){switch(o.label){case 0:return r=X.of(this._iid),i=r.sdkState,a=r.requestQueue,s=new IF({channelUrl:this.url,userId:i.userId,shouldRemoveOperatorStatus:t}),[4,a.send(s)];case 1:return o.sent(),this.myMemberState=hr.NONE,[2]}})})},n.prototype.acceptInvitation=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u;return I(this,function(d){switch(d.label){case 0:return Oe(Z("string",t,!0)).throw(ee.invalidParameters),r=X.of(this._iid),i=r.dispatcher,a=r.sdkState,s=r.requestQueue,o=new n5({channelUrl:this.url,userId:a.userId,accessCode:t}),[4,s.send(o)];case 1:return l=d.sent(),(u=l.as(r5).channel).myMemberState=this.myMemberState=hr.JOINED,this._update(u),i.dispatch(new on({channels:[u],context:{source:fe.EVENT_CHANNEL_ACCEPTED_INVITE},isWebSocketEventComing:!0})),[2,this]}})})},n.prototype.declineInvitation=function(){return A(this,void 0,void 0,function(){var t,r,i,a;return I(this,function(s){switch(s.label){case 0:return t=X.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new LF({channelUrl:this.url,userId:r.userId}),[4,i.send(a)];case 1:return s.sent(),this.myMemberState=hr.NONE,[2,this]}})})},n.prototype.sendUserMessage=function(t){var r=this,i=new fa,a=X.of(this._iid).dispatcher,s=zh.of(this._iid);return e.prototype.sendUserMessage.call(this,t).onPending(function(o){s.completeCurrentAndProcessNextAutoResend(o),i._trigger(o)}).onFailed(function(o,l){l&&s.completeCurrentAndProcessNextAutoResend(l),i._triggerFailed(o,l)}).onSucceeded(function(o){s.completeCurrentAndProcessNextAutoResend(o),r._updateLastMessage(o),zr.of(r._iid).handlers.map(function(l){l.onChannelChanged&&l.onChannelChanged(r)}),a.dispatch(new on({channels:[r],context:{source:fe.EVENT_MESSAGE_SENT}})),i._trigger(o)}),i},n.prototype.updateUserMessage=function(t,r){return A(this,void 0,void 0,function(){var i,a,s,o,l=this;return I(this,function(u){switch(u.label){case 0:return i=X.of(this._iid).dispatcher,[4,e.prototype.updateUserMessage.call(this,t,r)];case 1:return a=u.sent(),s=this._updateLastMessage(a),o=!1,this.lastPinnedMessage&&this.lastPinnedMessage.messageId===a.messageId&&(this.lastPinnedMessage=a,s=!0,o=!0),s&&(zr.of(this._iid).handlers.map(function(d){d.onChannelChanged&&d.onChannelChanged(l)}),i.dispatch(new on({channels:[this],context:{source:o?fe.EVENT_PINNED_MESSAGE_UPDATED:fe.EVENT_MESSAGE_UPDATED}}))),o&&zr.of(this._iid).handlers.map(function(d){d.onPinnedMessageUpdated&&d.onPinnedMessageUpdated(l)}),i.dispatch(new er({messages:[a],source:fe.EVENT_MESSAGE_UPDATED})),[2,a]}})})},n.prototype._autoResendUserMessage=function(t){var r=this,i=new fa,a=X.of(this._iid).dispatcher,s=zh.of(this._iid);return e.prototype._autoResendUserMessage.call(this,t).onPending(function(o){s.completeCurrentAndProcessNextAutoResend(o),i._trigger(o)}).onFailed(function(o,l){s.completeCurrentAndProcessNextAutoResend(l),i._triggerFailed(o,l)}).onSucceeded(function(o){var l=zr.of(r._iid);s.completeCurrentAndProcessNextAutoResend(o),r._updateLastMessage(o),l.handlers.map(function(u){u.onChannelChanged&&u.onChannelChanged(r)}),a.dispatch(new on({channels:[r],context:{source:fe.EVENT_MESSAGE_SENT}})),i._trigger(o)}),i},n.prototype.sendFileMessage=function(t){var r=this,i=new fa,a=X.of(this._iid).dispatcher,s=zh.of(this._iid);return e.prototype.sendFileMessage.call(this,t).onPending(function(o){s.completeCurrentAndProcessNextAutoResend(o),i._trigger(o)}).onFailed(function(o,l){l&&s.completeCurrentAndProcessNextAutoResend(l),i._triggerFailed(o,l)}).onSucceeded(function(o){var l=zr.of(r._iid);s.completeCurrentAndProcessNextAutoResend(o),r._updateLastMessage(o),l.handlers.map(function(u){u.onChannelChanged&&u.onChannelChanged(r)}),a.dispatch(new on({channels:[r],context:{source:fe.EVENT_MESSAGE_SENT}})),i._trigger(o)}),i},n.prototype.sendMultipleFilesMessage=function(t){var r=this,i=new Rm,a=X.of(this._iid).dispatcher;return e.prototype.sendMultipleFilesMessage.call(this,t).onPending(function(s){i._trigger(s)}).onFailed(function(s,o){i._triggerFailed(s,o)}).onSucceeded(function(s){var o=zr.of(r._iid);r._updateLastMessage(s),o.handlers.map(function(l){l.onChannelChanged&&l.onChannelChanged(r)}),a.dispatch(new on({channels:[r],context:{source:fe.EVENT_MESSAGE_SENT}})),i._trigger(s)}).onFileUploaded(function(s,o,l,u){i._triggerOnFileUploaded(s,o,l,u)}),i},n.prototype.updateFileMessage=function(t,r){return A(this,void 0,void 0,function(){var i,a,s,o,l=this;return I(this,function(u){switch(u.label){case 0:return i=X.of(this._iid).dispatcher,[4,e.prototype.updateFileMessage.call(this,t,r)];case 1:return a=u.sent(),s=this._updateLastMessage(a),o=!1,this.lastPinnedMessage&&this.lastPinnedMessage.messageId===a.messageId&&(this.lastPinnedMessage=a,s=!0,o=!0),s&&(zr.of(this._iid).handlers.map(function(d){d.onChannelChanged&&d.onChannelChanged(l)}),i.dispatch(new on({channels:[this],context:{source:o?fe.EVENT_PINNED_MESSAGE_UPDATED:fe.EVENT_MESSAGE_UPDATED}}))),o&&zr.of(this._iid).handlers.map(function(d){d.onPinnedMessageUpdated&&d.onPinnedMessageUpdated(l)}),i.dispatch(new er({messages:[a],source:fe.EVENT_MESSAGE_UPDATED})),[2,a]}})})},n.prototype._autoResendFileMessage=function(t){var r=this,i=new fa,a=X.of(this._iid).dispatcher,s=zh.of(this._iid);return e.prototype._autoResendFileMessage.call(this,t).onPending(function(o){s.completeCurrentAndProcessNextAutoResend(o),i._trigger(o)}).onFailed(function(o,l){s.completeCurrentAndProcessNextAutoResend(l),i._triggerFailed(o,l)}).onSucceeded(function(o){var l=zr.of(r._iid);s.completeCurrentAndProcessNextAutoResend(o),r._updateLastMessage(o),l.handlers.map(function(u){u.onChannelChanged&&u.onChannelChanged(r)}),a.dispatch(new on({channels:[r],context:{source:fe.EVENT_MESSAGE_SENT}})),i._trigger(o)}),i},n.prototype.deleteMessage=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){switch(r.label){case 0:return[4,e.prototype.deleteMessage.call(this,t)];case 1:return r.sent(),t.messageId===0&&t instanceof fr&&X.of(this._iid).dispatcher.dispatch(new H2({reqId:t.reqId,source:fe.EVENT_MESSAGE_DELETED})),[2]}})})},n.prototype.hide=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u,d;return I(this,function(f){switch(f.label){case 0:return r=Y(Y({},IE),t),Oe(function(m){return Z("boolean",m.hidePreviousMessages,!0)&&Z("boolean",m.allowAutoUnhide,!0)}(r)).throw(ee.invalidParameters),i=X.of(this._iid),a=i.dispatcher,s=i.sdkState,o=i.requestQueue,l=new DF(Y({channelUrl:this.url,userId:s.userId},r)),[4,o.send(l)];case 1:return u=f.sent(),d=u.as(kF).messageOffsetTimestamp,this.hiddenState=r.allowAutoUnhide?Da.HIDDEN_ALLOW_AUTO_UNHIDE:Da.HIDDEN_PREVENT_AUTO_UNHIDE,r.hidePreviousMessages&&this._updateUnreadCount(0,0),d&&(this.messageOffsetTimestamp=d),a.dispatch(new on({channels:[this],context:{source:fe.EVENT_CHANNEL_HIDDEN},isWebSocketEventComing:!0})),[2,this]}})})},n.prototype.unhide=function(){return A(this,void 0,void 0,function(){var t,r,i,a;return I(this,function(s){switch(s.label){case 0:return t=X.of(this._iid),r=t.dispatcher,i=t.requestQueue,a=new o5({channelUrl:this.url}),[4,i.send(a)];case 1:return s.sent(),this.hiddenState=Da.UNHIDDEN,r.dispatch(new on({channels:[this],context:{source:fe.EVENT_CHANNEL_UNHIDDEN},isWebSocketEventComing:!0})),[2,this]}})})},n.prototype.delete=function(){return A(this,void 0,void 0,function(){var t,r;return I(this,function(i){switch(i.label){case 0:return t=X.of(this._iid).requestQueue,r=new s5({channelUrl:this.url}),[4,t.send(r)];case 1:return i.sent(),[2]}})})},n.prototype.markAsRead=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u=this;return I(this,function(d){switch(d.label){case 0:return t=X.of(this._iid),r=t.sdkState,i=t.dispatcher,a=t.requestQueue,s=new Tx({channelUrl:this.url}),[4,a.send(s)];case 1:return o=d.sent(),l=o.as(Z2).readStatus,this._updateUnreadMemberState(r.userId,l.readAt),(this.unreadMessageCount>0||this.unreadMentionCount>0)&&(this._updateUnreadCount(0,0),zr.of(this._iid).handlers.map(function(f){f.onChannelChanged&&f.onChannelChanged(u)})),i.dispatch(new on({channels:[this],context:{source:fe.EVENT_CHANNEL_READ}})),[2]}})})},n.prototype.markAsDelivered=function(){return A(this,void 0,void 0,function(){var t,r,i,a;return I(this,function(s){switch(s.label){case 0:return t=X.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new zF({channelUrl:this.url,userId:r.userId}),[4,i.send(a)];case 1:return s.sent(),[2]}})})},n.prototype.startTyping=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s;return I(this,function(o){switch(o.label){case 0:return t=X.of(this._iid),r=t.requestQueue,i=t.typingIndicatorThrottle,(a=new Date().getTime())-this._typingStarted>=i?(this._typingStarted=a,this._typingEnded=0,s=new xF({channelUrl:this.url,time:this._typingStarted}),[4,r.send(s)]):[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},n.prototype.endTyping=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s;return I(this,function(o){switch(o.label){case 0:return t=X.of(this._iid),r=t.requestQueue,i=t.typingIndicatorThrottle,(a=new Date().getTime())-this._typingEnded>=i?(this._typingStarted=0,this._typingEnded=a,s=new BF({channelUrl:this.url,time:this._typingStarted}),[4,r.send(s)]):[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},n.prototype.createScheduledUserMessage=function(t){t=Y(Y({},O6),t),Oe(L6(t)).throw(ee.invalidParameters);var r=new fa;return this._createScheduledUserMessage(t,r),r},n.prototype.updateScheduledUserMessage=function(t,r){return A(this,void 0,void 0,function(){var i,a,s,o;return I(this,function(l){switch(l.label){case 0:return i=Y(Y({},f5),r),Oe(function(u){return sR(u)&&Z("number",u.scheduledAt,!0)}(i)).throw(ee.invalidParameters),a=X.of(this._iid).requestQueue,s=new p5(Y({reqId:this._generateRequestId(),scheduledMessageId:t,channelType:this.channelType,channelUrl:this.url},i)),[4,a.send(s)];case 1:return o=l.sent(),[2,o.as(vR).message]}})})},n.prototype.createScheduledFileMessage=function(t){var r=this;t=Y(Y({},U6),t),Oe(D6(t)).throw(ee.invalidParameters);var i=Date.now(),a=this._generateRequestId(),s=new fa;return Zi(l6).then(function(){var o=r._createPendingScheduledFileMessage(t,a,i);it(function(){return A(r,void 0,void 0,function(){return I(this,function(l){return[2,s._trigger(o)]})})})}),Vr(t.file)?this._uploadFileAndUpdateParams(t).then(function(){return r._createScheduledFileMessage(t,s,a,i)}):this._createScheduledFileMessage(t,s,a,i),s},n.prototype.updateScheduledFileMessage=function(t,r){return A(this,void 0,void 0,function(){var i,a,s;return I(this,function(o){switch(o.label){case 0:return i=Y(Y({},h5),r),Oe(function(l){return wb(l)&&Z("number",l.scheduledAt,!0)&&(Vr(l.file)||Z("string",l.fileUrl))&&Z("string",l.fileName,!0)&&Z("string",l.mimeType,!0)&&Z("number",l.fileSize,!0)&&(l.thumbnailSizes===null||l.thumbnailSizes===void 0||l.thumbnailSizes.every(function(u){return Z("object",u)&&u.maxWidth>0&&u.maxHeight>0}))}(i)).throw(ee.invalidParameters),Vr(i.file)?[4,this._uploadFileAndUpdateParams(i)]:[3,2];case 1:o.sent(),o.label=2;case 2:return a=new v5(Y({reqId:this._generateRequestId(),scheduledMessageId:t,channelType:this.channelType,channelUrl:this.url},i)),[4,X.of(this._iid).requestQueue.send(a)];case 3:return s=o.sent(),[2,s.as(m5).message]}})})},n.prototype.cancelScheduledMessage=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){switch(i.label){case 0:return r=new g5({scheduledMessageId:t,channelType:this.channelType,channelUrl:this.url}),[4,X.of(this._iid).requestQueue.send(r)];case 1:return i.sent(),[2]}})})},n.prototype.sendScheduledMessageNow=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){switch(i.label){case 0:return r=new _5({scheduledMessageId:t,channelType:this.channelType,channelUrl:this.url}),[4,X.of(this._iid).requestQueue.send(r)];case 1:return i.sent(),[2]}})})},n.prototype.getMyPushTriggerOption=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return I(this,function(l){switch(l.label){case 0:return t=X.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new b5({userId:r.userId,channelUrl:this.url}),[4,i.send(a)];case 1:return s=l.sent(),o=s.as(C5).pushTriggerOption,this.myPushTriggerOption=o,[2,o]}})})},n.prototype.setMyPushTriggerOption=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u;return I(this,function(d){switch(d.label){case 0:return Oe(Wt(xu,t)).throw(ee.invalidParameters),r=X.of(this._iid),i=r.dispatcher,a=r.sdkState,s=r.requestQueue,o=new E5({userId:a.userId,channelUrl:this.url,pushTriggerOption:t}),[4,s.send(o)];case 1:return l=d.sent(),u=l.as(y5).pushTriggerOption,this.myPushTriggerOption=u,i.dispatch(new on({channels:[this],context:{source:fe.EVENT_CHANNEL_UPDATED},isWebSocketEventComing:!0})),[2,u]}})})},n.prototype.setMyCountPreference=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u;return I(this,function(d){switch(d.label){case 0:return Oe(Wt(La,t)).throw(ee.invalidParameters),r=X.of(this._iid),i=r.dispatcher,a=r.sdkState,s=r.requestQueue,o=new l5({channelUrl:this.url,userId:a.userId,countPreference:t}),[4,s.send(o)];case 1:return l=d.sent(),u=l.as(u5).countPreference,this.myCountPreference=u,this._updateUnreadCount(this.unreadMessageCount,this.unreadMentionCount),i.dispatch(new on({channels:[this],context:{source:fe.EVENT_CHANNEL_UPDATED},isWebSocketEventComing:!0})),[2,u]}})})},n.prototype.resetMyHistory=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l;return I(this,function(u){switch(u.label){case 0:return t=X.of(this._iid),r=t.dispatcher,i=t.requestQueue,a=t.sdkState,s=new c5({channelUrl:this.url,locale:a.localeForChatbot}),[4,i.send(s)];case 1:return o=u.sent(),l=o.as(d5).messageOffsetTimestamp,this.messageOffsetTimestamp=l,this.lastMessage&&this.lastMessage.createdAt<l&&(this.lastMessage=null),this._updateUnreadCount(0,0),this.totalUnreadReplyCount=0,r.dispatch(new on({channels:[this],context:{source:fe.EVENT_CHANNEL_RESET_HISTORY},isWebSocketEventComing:!0})),[2,this]}})})},n.prototype._uploadFileAndUpdateParams=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u,d,f,m;return I(this,function(p){switch(p.label){case 0:return Vr(t.file)?(r=X.of(this._iid).requestQueue,i=new np({file:t.file,channelUrl:this.url,thumbnailSizes:t.thumbnailSizes,requestId:this._generateRequestId()}),[4,r.send(i)]):[3,2];case 1:a=p.sent(),s=a.as(rp),o=s.url,l=s.fileSize,u=l===void 0?t.fileSize:l,d=s.thumbnails,f=s.requireAuth,m=f!==void 0&&f,t.fileUrl=o,t.fileSize=u,t.requireAuth=m,t._thumbnails=d,p.label=2;case 2:return[2]}})})},n.prototype.resendMessage=function(t,r){var i,a=this;if(Oe(t instanceof fr&&!t.scheduledInfo&&t.isResendable).throw(ee.invalidParameters),t.isUserMessage()){var s=(i=t.messageParams)!==null&&i!==void 0?i:gE(t),o=new fa;return this._sendUserMessage(s,ci.RESEND,t.reqId).onPending(function(f){o._trigger(f)}).onFailed(function(f,m){o._triggerFailed(f,m)}).onSucceeded(function(f){a._tryUpdateLastMessageAndCallEvents(a,f),o._trigger(f)}),o}if(t.isFileMessage()){var l=this._validateFailedFileMessageHasFile(t,r);Oe(l).throw(ee.invalidParameters),s=_E(t,r);var u=new fa;return this._sendFileMessage(s,ci.RESEND,t.reqId).onPending(function(f){u._trigger(f)}).onFailed(function(f,m){u._triggerFailed(f,m)}).onSucceeded(function(f){a._tryUpdateLastMessageAndCallEvents(a,f),u._trigger(f)}),u}if(t.isMultipleFilesMessage()){s=t.messageParams;var d=new Rm;return this._sendMultipleFilesMessage(s,ci.RESEND,t.reqId).onPending(function(f){d._trigger(f)}).onFailed(function(f,m){d._triggerFailed(f,m)}).onSucceeded(function(f){a._tryUpdateLastMessageAndCallEvents(a,f),d._trigger(f)}).onFileUploaded(function(f,m,p,E){d._triggerOnFileUploaded(f,m,p,E)}),d}},n.prototype.copyMessage=function(t,r){var i=this;if(Oe(t instanceof op&&r instanceof fr&&r.sendingStatus===gn.SUCCEEDED&&this.url===r.channelUrl&&!r.scheduledInfo).throw(ee.invalidParameters),r.isUserMessage()){Oe(!r.poll).throw(ee.notSupportedError);var a=nR(r),s=new fa;return t._sendUserMessage(a).onPending(function(u){s._trigger(u)}).onFailed(function(u,d){s._triggerFailed(u,d)}).onSucceeded(function(u){t.isGroupChannel()&&i._tryUpdateLastMessageAndCallEvents(t,u),s._trigger(u)}),s}if(r.isFileMessage()){a=iR(r);var o=new fa;return t._sendFileMessage(a).onPending(function(u){o._trigger(u)}).onFailed(function(u,d){o._triggerFailed(u,d)}).onSucceeded(function(u){t.isGroupChannel()&&i._tryUpdateLastMessageAndCallEvents(t,u),o._trigger(u)}),o}if(r.isMultipleFilesMessage()){if(t.isGroupChannel()){a=J4(r);var l=new Rm;return t._sendMultipleFilesMessage(a,ci.COPY).onPending(function(u){l._trigger(u)}).onFailed(function(u,d){l._triggerFailed(u,d)}).onSucceeded(function(u){i._tryUpdateLastMessageAndCallEvents(t,u),l._trigger(u)}).onFileUploaded(function(u,d,f,m){l._triggerOnFileUploaded(u,d,f,m)}),l}throw ee.channelTypeNotSupportedError}},n.prototype.getMessageDeletionTimestamp=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return I(this,function(l){switch(l.label){case 0:return t=X.of(this._iid),r=t.requestQueue,i=t.dispatcher,a=new S5({channelUrl:this.url,channelType:this.channelType}),[4,r.send(a)];case 1:return s=l.sent(),o=s.as(T5).messageDeletionTimestamp,this._messageDeletionTimestamp=o,i.dispatch(new aF({channel:this})),[2,o]}})})},n}(op),jR=function(){this.onUserMuted=Bt,this.onUserUnmuted=Bt,this.onUserBanned=Bt,this.onUserUnbanned=Bt,this.onChannelChanged=Bt,this.onChannelDeleted=Bt,this.onChannelFrozen=Bt,this.onChannelUnfrozen=Bt,this.onOperatorUpdated=Bt,this.onChannelMemberCountChanged=Bt,this.onMetaDataCreated=Bt,this.onMetaDataUpdated=Bt,this.onMetaDataDeleted=Bt,this.onMetaCounterCreated=Bt,this.onMetaCounterUpdated=Bt,this.onMetaCounterDeleted=Bt,this.onMessageReceived=Bt,this.onMessageUpdated=Bt,this.onMessageDeleted=Bt,this.onMentionReceived=Bt,this.onReactionUpdated=Bt,this.onThreadInfoUpdated=Bt},vf,Ml={},M5=function(){function e(n){var t=n._iid,r=n.limit,i=r===void 0?100:r,a=this;this.ref=0,this._iid=t,this._limit=i;var s,o=X.of(this._iid),l=o.sdkState,u=o.dispatcher,d=o.logger,f=o.cacheContext,m=o.statManager;this._metadataKey=(s=l.userId,"sendbird:".concat(s,"@groupchannel/sync.meta"));var p=function(E){return"sendbird:".concat(E,"@groupchannel/sync")}(l.userId);this._sync=new Go(p,function(){return A(a,void 0,void 0,function(){var E,_,b,C,y,T,N,w,O,L,P,U,B,F,H,G;return I(this,function(j){switch(j.label){case 0:return E={hasNext:!0,nextToken:""},[4,this.loadMetadata()];case 1:if(j.sent(),d.debug("channel background sync from",(O=this._metadata)===null||O===void 0?void 0:O.token),(L=this._metadata)===null||L===void 0?void 0:L.completed)return[3,14];_={includeEmpty:!0,includeMetaData:!0,hiddenChannelFilter:is.ALL,order:rr.CHRONOLOGICAL},j.label=2;case 2:if(j.trys.push([2,9,12,13]),_.order!==rr.LATEST_LAST_MESSAGE)return[3,6];j.label=3;case 3:return j.trys.push([3,5,,6]),[4,f.preference.get(bb(l.appId))];case 4:return b=j.sent(),_.includeChatNotification=!!b,[3,6];case 5:return j.sent(),_.includeChatNotification=!1,[3,6];case 6:return[4,zr.of(this._iid).getMyGroupChannels((U=(P=this._metadata)===null||P===void 0?void 0:P.token)!==null&&U!==void 0?U:"",_,this._limit,fe.SYNC_CHANNEL_BACKGROUND)];case 7:return C=j.sent(),y=C.channels,T=C.token,E.hasNext=y.length>=this._limit&&!!T,E.nextToken=T,this._metadata&&(this._metadata.token=T,(w=this._metadata.range).extends.apply(w,Nt([],ut(y.map(function(x){return x.createdAt})),!1)),this._metadata.completed=!E.hasNext),d.debug("channel background sync progress",E),[4,this.saveMetadata()];case 8:return j.sent(),[3,13];case 9:return N=j.sent(),d.debug("channel background sync error",N),N instanceof ee&&N.isInvalidTokenError?[4,this.clearMetaData()]:[3,11];case 10:j.sent(),j.label=11;case 11:throw N;case 12:return m.put(new cr({type:tr.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:"",measured_on:"channel_back_sync",event:"cache_fetch",max_db_size:(F=(B=f.localCacheConfig)===null||B===void 0?void 0:B.maxSize)!==null&&F!==void 0?F:0,use_local_cache:f.localCacheEnabled,starting_point:0,message_init_policy:(G=(H=_.order)===null||H===void 0?void 0:H.toString())!==null&&G!==void 0?G:"",collection_id:l.userId}})),[7];case 13:return[3,15];case 14:E.hasNext=!1,E.nextToken="",j.label=15;case 15:return[2,E]}})})}),this._connectionEventContext=u.on(function(E){E instanceof Ea&&(E.stateType===wn.CONNECTED?a.resume():a.pause())})}return e.of=function(n){return Ml[n]||(Ml[n]=new e({_iid:n})),Ml[n].ref++,Ml[n]},e.clear=function(n){Ml[n]&&(Ml[n].close(),delete Ml[n])},Object.defineProperty(e.prototype,"range",{get:function(){var n,t;return(t=(n=this._metadata)===null||n===void 0?void 0:n.range)!==null&&t!==void 0?t:new Ws({})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"completed",{get:function(){var n;return!!(!((n=this._metadata)===null||n===void 0)&&n.completed)},enumerable:!1,configurable:!0}),e.prototype.loadMetadata=function(){return A(this,void 0,void 0,function(){var n;return I(this,function(t){switch(t.label){case 0:return this._metadata?[3,2]:[4,X.of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:n=t.sent(),this._metadata={token:n?n.token:"",range:new Ws(n?n.range:{top:Number.MAX_SAFE_INTEGER,bottom:0}),completed:!!n&&n.completed},t.label=2;case 2:return[2,this._metadata]}})})},e.prototype.saveMetadata=function(){return A(this,void 0,void 0,function(){return I(this,function(n){switch(n.label){case 0:return this._metadata?[4,X.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return n.sent(),[2,!0];case 2:return[2,!1]}})})},e.prototype.clearMetaData=function(){return A(this,void 0,void 0,function(){return I(this,function(n){switch(n.label){case 0:return[4,X.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return n.sent(),this._metadata=void 0,[2]}})})},e.prototype.resume=function(){var n,t,r=X.of(this._iid),i=r.logger;r.sessionManager.session.hasSession&&(i.debug("channel background sync resume()"),this._sync.start((t=(n=this._metadata)===null||n===void 0?void 0:n.token)!==null&&t!==void 0?t:""))},e.prototype.pause=function(){X.of(this._iid).logger.debug("channel background sync stop()"),this._sync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete Ml[this._iid])},e}(),Nl={},N5=function(){function e(n){var t=n._iid,r=this;this.ref=0,this._iid=t;var i,a=X.of(this._iid),s=a.logger,o=a.sdkState,l=a.dispatcher,u=a.cacheContext,d=a.statManager;this._metadataKey=(i=o.userId,"sendbird:".concat(i,"@groupchannel/changelogs.meta")),this._subscribers=new ac;var f=function(m){return"sendbird:".concat(m,"@groupchannel/changelogs")}(o.userId);this._sync=new Go(f,function(){return A(r,void 0,void 0,function(){var m,p,E,_,b,C,y,T,N,w,O,L;return I(this,function(P){switch(P.label){case 0:return m={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:P.sent(),s.debug("channel changelog sync from",(w=this._metadata)===null||w===void 0?void 0:w.token),P.label=2;case 2:P.trys.push([2,9,,12]),p={includeEmpty:!0,includeMetaData:!0},P.label=3;case 3:return P.trys.push([3,5,,6]),[4,u.preference.get(bb(o.appId))];case 4:return E=P.sent(),p.includeChatNotification=!!E,[3,6];case 5:return P.sent(),p.includeChatNotification=!1,[3,6];case 6:return[4,zr.of(this._iid).getMyGroupChannelChangeLogs((L=(O=this._metadata)===null||O===void 0?void 0:O.token)!==null&&L!==void 0?L:"",p,fe.SYNC_CHANNEL_CHANGELOGS)];case 7:return _=P.sent(),b=_.updatedChannels,C=_.deletedChannelUrls,y=_.hasMore,T=_.token,this._subscribers.dispatch("progress",{updatedChannels:b,deletedChannelUrls:C,hasMore:y,token:T}),m.hasNext=y,m.nextToken=T,this._metadata&&(this._metadata.token=T),s.debug("channel changelog sync progress",m),[4,this.saveMetadata()];case 8:return P.sent(),u.localCacheEnabled&&d.put(new cr({type:tr.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:"",measured_on:"channel_change_log_sync",event:b.length>0||C.length>0?"cache_miss":"cache_hit",max_db_size:b.length,use_local_cache:u.localCacheEnabled,starting_point:0,message_init_policy:C.length.toString(),collection_id:o.userId}})),[3,12];case 9:return N=P.sent(),s.debug("channel changelog sync error",N),N instanceof ee&&N.isInvalidTokenError?[4,this.clearMetadata()]:[3,11];case 10:P.sent(),P.label=11;case 11:throw N;case 12:return[2,m]}})})}),this._sync.on("stop",function(){r._subscribers.dispatch("pause")}),this._connectionEventContext=l.on(function(m){m instanceof Ea&&(m.stateType===wn.CONNECTED?r.resume():r.pause())})}return e.of=function(n){return Nl[n]||(Nl[n]=new e({_iid:n})),Nl[n].ref++,Nl[n]},e.clear=function(n){Nl[n]&&(Nl[n].close(),delete Nl[n])},Object.defineProperty(e.prototype,"isRunning",{get:function(){return this._sync.isRunning},enumerable:!1,configurable:!0}),e.prototype.loadMetadata=function(){return A(this,void 0,void 0,function(){var n,t,r,i;return I(this,function(a){switch(a.label){case 0:return this._metadata?[3,2]:(n=X.of(this._iid),t=n.cacheContext,r=n.firstConnectedAt,[4,t.preference.get(this._metadataKey)]);case 1:i=a.sent(),this._metadata={token:i?i.token:r},a.label=2;case 2:return[2,this._metadata]}})})},e.prototype.saveMetadata=function(){return A(this,void 0,void 0,function(){return I(this,function(n){switch(n.label){case 0:return this._metadata?[4,X.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return n.sent(),[2,!0];case 2:return[2,!1]}})})},e.prototype.clearMetadata=function(){return A(this,void 0,void 0,function(){return I(this,function(n){switch(n.label){case 0:return[4,X.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return n.sent(),this._metadata=void 0,[2]}})})},e.prototype.on=function(n,t){return this._subscribers.on(n,t)},e.prototype.resume=function(){X.of(this._iid).sessionManager.session.hasSession&&this._sync.start(0)},e.prototype.pause=function(){this._sync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete Nl[this._iid])},e}(),km=function(e,n){return e.findIndex(function(t){return t.isIdentical(n)})},$M=function(e,n,t){if(e.length>0){for(var r=km(e,n),i=0,a=e.length-1,s=Math.floor((i+a)/2);i<a;){var o=qM(e[s],n,t);if(o>0)a=s,s=Math.floor((i+a)/2);else{if(!(o<0))return{place:s,oldPosition:r};i=s+1,s=Math.floor((i+a)/2)}}return{place:qM(e[s],n,t)>=0?s:s+1,oldPosition:r}}return{place:e.length,oldPosition:-1}},qM=function(e,n,t){switch(t){case rr.LATEST_LAST_MESSAGE:return e.lastMessage&&n.lastMessage?(r=n.lastMessage.createdAt-e.lastMessage.createdAt)===0?n.createdAt-e.createdAt:r:e.lastMessage?-1:n.lastMessage?1:n.createdAt-e.createdAt;case rr.CHRONOLOGICAL:return n.createdAt-e.createdAt;case rr.CHANNEL_NAME_ALPHABETICAL:var r;return(r=e.name.localeCompare(n.name))===0?e.createdAt-n.createdAt:r;default:return 0}},I5=function(){function e(n,t){var r=t.filter,i=r===void 0?new zp:r,a=t.order,s=a===void 0?rr.LATEST_LAST_MESSAGE:a,o=t.limit,l=o===void 0?mR:o,u=t.includeChangesOnInitialLoad,d=u!==void 0&&u,f=this;this.channels=[],this._isInitialized=!1,this._iid=n,this._key="gcc-".concat(Ho()),this._isDisposed=!1,this._isGetRemoteChannelsSucceeded=!0,this._includeChangesOnInitialLoad=d,this.filter=i,this.order=s,this._hasMore=!0,this._token="",this._limit=l;var m=X.of(this._iid),p=m.sdkState,E=m.cacheContext,_=m.dispatcher;E.localCacheEnabled&&(this._backgroundSync=M5.of(n),this._backgroundSync.resume()),this._changelogSync=N5.of(n),this._changelogSync.resume(),zr.of(this._iid).subscribeChannelEvent(this._key,{onUpdate:function(b,C){var y=C.source;if(Dm(y)){var T=b.filter(function(w){return f.filter.match(w,p.userId)}),N=b.filter(function(w){return!f.filter.match(w,p.userId)}).map(function(w){return w.url});T.length>0&&f._addChannelsToView(T,C),N.length>0&&f._removeChannelsFromView(N,C)}},onRemove:function(b,C){f._removeChannelsFromView(b,C)}}),_.on(function(b){b instanceof Ea&&(b.stateType===wn.CONNECTED?f._isGetRemoteChannelsSucceeded||A(f,void 0,void 0,function(){return I(this,function(C){switch(C.label){case 0:return[4,this._revokeLoadMore()];case 1:return C.sent(),[2]}})}):b.stateType===wn.LOGOUT&&f.dispose())})}return Object.defineProperty(e.prototype,"hasMore",{get:function(){return!this._isDisposed&&this._hasMore},enumerable:!1,configurable:!0}),e.prototype.setGroupChannelCollectionHandler=function(n){this._handler=n},e.prototype._addChannelsToView=function(n,t,r){var i,a,s,o,l=this;r===void 0&&(r=!1);var u=[],d=[],f=[];try{for(var m=Ge(n),p=m.next();!p.done;p=m.next()){var E=p.value,_=km(this.channels,E);_>=0&&this.channels.splice(_,1);var b=$M(this.channels,E,this.order).place;if(_<0)b===this.channels.length?!r&&this._hasMore||(u.push(E),this.channels.push(E)):(u.push(E),this.channels.splice(b,0,E));else switch(t.source){case fe.EVENT_CHANNEL_UPDATED:case fe.EVENT_MESSAGE_RECEIVED:case fe.SYNC_CHANNEL_CHANGELOGS:case fe.EVENT_MESSAGE_SENT:this.order===rr.CHANNEL_NAME_ALPHABETICAL&&this._hasMore&&b===this.channels.length?f.push(E):(this.channels.splice(b,0,E),d.push(E));break;default:this.channels.splice(b,0,E),d.push(E)}}}catch(N){i={error:N}}finally{try{p&&!p.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}if(f.length>0)try{for(var C=Ge(f),y=C.next();!y.done;y=C.next()){E=y.value;var T=km(this.channels,E);T!==-1&&this.channels.splice(T,1)}}catch(N){s={error:N}}finally{try{y&&!y.done&&(o=C.return)&&o.call(C)}finally{if(s)throw s.error}}Dm(t.source)&&it(function(){return A(l,void 0,void 0,function(){var N,w,O;return I(this,function(L){return u.length>0&&(!((N=this._handler)===null||N===void 0)&&N.onChannelsAdded)&&this._handler.onChannelsAdded(t,u),d.length>0&&(!((w=this._handler)===null||w===void 0)&&w.onChannelsUpdated)&&this._handler.onChannelsUpdated(t,d),f.length>0&&(!((O=this._handler)===null||O===void 0)&&O.onChannelsDeleted)&&this._handler.onChannelsDeleted(t,f.map(function(P){return P.url})),[2]})})})},e.prototype._removeChannelsFromView=function(n,t){var r,i,a=this,s=[],o=function(f){var m=l.channels.findIndex(function(p){return p.url===f});m>=0&&(s.push(l.channels[m].url),l.channels.splice(m,1))},l=this;try{for(var u=Ge(n),d=u.next();!d.done;d=u.next())o(d.value)}catch(f){r={error:f}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return Dm(t.source)&&s.length>0&&it(function(){return A(a,void 0,void 0,function(){var f;return I(this,function(m){return!((f=this._handler)===null||f===void 0)&&f.onChannelsDeleted&&this._handler.onChannelsDeleted(t,s),[2]})})}),s},e.prototype._getLocalChannels=function(){return A(this,void 0,void 0,function(){var n,t;return I(this,function(r){switch(r.label){case 0:return n=zr.of(this._iid),t=this.channels.length>0?function(i,a){var s,o,l,u;switch(a){case rr.LATEST_LAST_MESSAGE:return(o=(s=i.lastMessage)===null||s===void 0?void 0:s.createdAt)!==null&&o!==void 0?o:i.createdAt;case rr.CHRONOLOGICAL:return i.createdAt;case rr.CHANNEL_NAME_ALPHABETICAL:return i.name;default:return(u=(l=i.lastMessage)===null||l===void 0?void 0:l.createdAt)!==null&&u!==void 0?u:i.createdAt}}(this.channels[this.channels.length-1],this.order):null,[4,n.getChannelsFromCache(t,this.filter,this.order,this._limit,t?this.channels[this.channels.length-1].url:void 0)];case 1:return[2,r.sent()]}})})},e.prototype._getRemoteChannels=function(){return A(this,void 0,void 0,function(){var n,t,r;return I(this,function(i){switch(i.label){case 0:return[4,zr.of(this._iid).getMyGroupChannels(this._token,vt(Y(Y({},this.filter),{userIdsFilter:this.filter.userIdsFilter,searchFilter:this.filter.searchFilter,order:this.order})),this._limit)];case 1:return n=i.sent(),t=n.channels,r=n.token,this._token=r,this._hasMore=!!r,[2,t]}})})},e.prototype._revokeLoadMore=function(){return A(this,void 0,void 0,function(){var n;return I(this,function(t){switch(t.label){case 0:if(this._isDisposed)return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this._getRemoteChannels()];case 2:return n=t.sent(),this._isGetRemoteChannelsSucceeded=!0,this._addChannelsToView(n,{source:fe.REQUEST_CHANNEL},!0),[3,4];case 3:return t.sent(),this._isGetRemoteChannelsSucceeded=!1,[3,4];case 4:return[2]}})})},e.prototype.loadMore=function(){var n;return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,d,f,m,p,E,_,b,C,y,T,N,w=this;return I(this,function(O){switch(O.label){case 0:if(this._isDisposed)throw new ee({code:lt.COLLECTION_DISPOSED,message:"Collection has been disposed."});return t=null,this._includeChangesOnInitialLoad&&this.channels.length===0&&this._changelogSync.isRunning?[4,new Promise(function(L){w._changelogSyncSubscriberContext=w._changelogSync.on("progress",function(P){return L(P)}).on("pause",function(){return L(null)})})]:[3,2];case 1:t=O.sent(),(n=this._changelogSyncSubscriberContext)===null||n===void 0||n.close(),O.label=2;case 2:return r=X.of(this._iid),i=r.cacheContext,a=r.connectionManager,s=r.statManager,this._isInitialized?[3,5]:(this._isInitialized=!0,i.localCacheEnabled?[4,this._backgroundSync.loadMetadata()]:[3,4]);case 3:O.sent(),O.label=4;case 4:s.put(new yf({type:tr.FEATURE_LOCALCACHE,data:{use_local_cache:i.localCacheEnabled,collection_interface:{group_channel:!0}}})),O.label=5;case 5:return o=[],this._hasMore?!i.localCacheEnabled||a.isConnected&&!this._backgroundSync.completed?[3,7]:[4,dr(function(){return A(w,void 0,void 0,function(){return I(this,function(L){switch(L.label){case 0:return[4,this._getLocalChannels()];case 1:return o=L.sent(),[2]}})})})]:[3,11];case 6:return O.sent(),this._hasMore=o.length>=this._limit,[3,10];case 7:return O.trys.push([7,9,,10]),[4,this._getRemoteChannels()];case 8:return o=O.sent(),this._isGetRemoteChannelsSucceeded=!0,[3,10];case 9:return O.sent(),this._isGetRemoteChannelsSucceeded=!1,[3,10];case 10:this._addChannelsToView(o,{source:fe.REQUEST_CHANNEL},!0),O.label=11;case 11:if(t){try{for(l=Ge(t.updatedChannels),u=l.next();!u.done;u=l.next())d=u.value,(b=km(o,d))>=0?o[b]=d:(f=$M(o,d,this.order).place,o.splice(f,0,d))}catch(L){C={error:L}}finally{try{u&&!u.done&&(y=l.return)&&y.call(l)}finally{if(C)throw C.error}}m=o.map(function(L){return L.url});try{for(p=Ge(t.deletedChannelUrls),E=p.next();!E.done;E=p.next())_=E.value,(b=m.indexOf(_))>=0&&(o.splice(b,1),m.splice(b,1))}catch(L){T={error:L}}finally{try{E&&!E.done&&(N=p.return)&&N.call(p)}finally{if(T)throw T.error}}}return[2,o]}})})},e.prototype.dispose=function(){var n,t,r;this._isDisposed||(this._isDisposed=!0,this.channels.length>0&&this.channels.splice(0,this.channels.length),(n=this._backgroundSync)===null||n===void 0||n.close(),(t=this._changelogSync)===null||t===void 0||t.close(),(r=this._changelogSyncSubscriberContext)===null||r===void 0||r.close(),zr.of(this._iid).unsubscribeChannelEvent(this._key))},e}(),A5=function(e){function n(t){var r=this,i=t.token,a=t.limit,s=t.order,o=t.includeEmpty,l=t.membershipFilter,u=t.channelNameContainsFilter,d=t.channelUrlsFilter,f=t.customTypesFilter,m=t.customTypeStartsWithFilter,p=t.superChannelFilter,E=t.metadataOrderKeyFilter,_=t.metadataKey,b=t.metadataValues,C=t.metadataValueStartsWith,y=t.includeFrozen,T=t.includeMetaData;return(r=e.call(this)||this).method=Ie.GET,r.path=Ui,r.params=Qe(vt({token:i,limit:a,order:s,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:o,public_mode:Zs.PUBLIC,public_membership_mode:l,name_contains:u,channel_urls:d,custom_types:f,custom_type_startswith:m,super_mode:p,metadata_order_key:E,metadata_key:_,metadata_values:b,metadata_value_startswith:C,show_frozen:y,show_metadata:T})),r}return z(n,e),n}(we),w5=function(e){function n(t,r){var i=e.call(this,t,r)||this;i.channels=[];var a=r.next,s=r.channels,o=r.ts;return i.token=a,s&&s.length>0&&(i.channels=s.map(function(l){return l.ts=o,new za(t,l)})),i.ts=typeof o=="number"?o:0,i}return z(n,e),n}(Pe);(function(e){e.ALL="all",e.JOINED="joined"})(vf||(vf={}));var R5=function(e){function n(t,r){var i,a,s,o,l,u,d,f,m,p,E,_,b,C,y=this;return(y=e.call(this,t,r)||this).includeEmpty=!1,y.includeFrozen=!0,y.includeMetaData=!0,y.channelUrlsFilter=null,y.customTypesFilter=null,y.customTypeStartsWithFilter=null,y.channelNameContainsFilter=null,y.membershipFilter=vf.ALL,y.superChannelFilter=na.ALL,y.metadataKey=null,y.metadataValues=null,y.metadataOrderKeyFilter=null,y.metadataValueStartsWith=null,y.order=cf.CHRONOLOGICAL,y.includeEmpty=(i=r.includeEmpty)!==null&&i!==void 0&&i,y.includeFrozen=(a=r.includeFrozen)===null||a===void 0||a,y.includeMetaData=(s=r.includeMetaData)===null||s===void 0||s,y.channelUrlsFilter=(o=r.channelUrlsFilter)!==null&&o!==void 0?o:null,y.customTypesFilter=(l=r.customTypesFilter)!==null&&l!==void 0?l:null,y.customTypeStartsWithFilter=(u=r.customTypeStartsWithFilter)!==null&&u!==void 0?u:null,y.channelNameContainsFilter=(d=r.channelNameContainsFilter)!==null&&d!==void 0?d:null,y.membershipFilter=(f=r.membershipFilter)!==null&&f!==void 0?f:vf.ALL,y.superChannelFilter=(m=r.superChannelFilter)!==null&&m!==void 0?m:na.ALL,y.metadataKey=(p=r.metadataKey)!==null&&p!==void 0?p:null,y.metadataValues=(E=r.metadataValues)!==null&&E!==void 0?E:null,y.metadataOrderKeyFilter=(_=r.metadataOrderKeyFilter)!==null&&_!==void 0?_:null,y.metadataValueStartsWith=(b=r.metadataValueStartsWith)!==null&&b!==void 0?b:null,y.order=(C=r.order)!==null&&C!==void 0?C:cf.CHRONOLOGICAL,y}return z(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&Z("boolean",this.includeEmpty)&&Z("boolean",this.includeFrozen)&&Z("boolean",this.includeMetaData)&&Z("string",this.channelNameContainsFilter,!0)&&Qt("string",this.channelUrlsFilter,!0)&&Qt("string",this.customTypesFilter,!0)&&Z("string",this.customTypeStartsWithFilter,!0)&&Wt(vf,this.membershipFilter)&&Wt(na,this.superChannelFilter)&&Wt(cf,this.order)&&Z("string",this.metadataOrderKeyFilter,!0)&&Z("string",this.metadataKey,!0)&&Qt("string",this.metadataValues,!0)&&Z("string",this.metadataValueStartsWith,!0)},n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l;return I(this,function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:(t=[],this._hasNext?(this._isLoading=!0,r=X.of(this._iid).requestQueue,i=new A5(vt(Y(Y({},this),{token:this._token}))),[4,r.send(i)]):[3,2]):[3,5];case 1:return a=u.sent(),s=a.as(w5),o=s.channels,l=s.token,this._token=l,this._hasNext=!!l,this._isLoading=!1,[2,o];case 2:return[2,t];case 3:throw ee.queryInProgress;case 4:return[3,6];case 5:throw ee.invalidParameters;case 6:return[2]}})})},n}(qo),Qo=function(e){function n(t){t===void 0&&(t={});var r=e.call(this)||this;return Object.keys(t).forEach(function(i){r.hasOwnProperty(i)&&(r[i]=t[i])}),r}return z(n,e),n}(function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.onUserJoined=Bt,t.onUserLeft=Bt,t.onUserReceivedInvitation=Bt,t.onUserDeclinedInvitation=Bt,t.onChannelHidden=Bt,t.onUnreadMemberStatusUpdated=Bt,t.onUndeliveredMemberStatusUpdated=Bt,t.onTypingStatusUpdated=Bt,t.onPollUpdated=Bt,t.onPollVoted=Bt,t.onPollDeleted=Bt,t.onPinnedMessageUpdated=Bt,t}return z(n,e),n}(jR)),O5=function(e){function n(t){var r=this,i=t.token,a=t.limit,s=t.order,o=t.reverse,l=t.channelUrl,u=t.messageTypeFilter,d=t.scheduledStatus;return(r=e.call(this)||this).method=Ie.GET,r.path="".concat(Zw),r.params=Qe(vt({token:i,limit:a,reverse:o,channel_url:l,order:s,message_type:u,status:d})),r}return z(n,e),n}(we),L5=function(e){function n(t,r){var i=e.call(this,t,r)||this;i.scheduledMessages=[];var a=r.next,s=r.scheduled_messages;return i.token=a,i.scheduledMessages=s.map(function(o){return _i(t,o)}),i}return z(n,e),n}(Pe),U5=function(e){function n(t,r){var i,a,s,o,l,u=this;return(u=e.call(this,t,r)||this).channelUrl=null,u.order=null,u.reverse=!1,u.scheduledStatus=null,u.messageTypeFilter=mi.ALL,u.channelUrl=(i=r.channelUrl)!==null&&i!==void 0?i:null,u.order=(a=r.order)!==null&&a!==void 0?a:null,u.reverse=(s=r.reverse)!==null&&s!==void 0&&s,u.scheduledStatus=(o=r.scheduledStatus)!==null&&o!==void 0?o:null,u.messageTypeFilter=(l=r.messageTypeFilter)!==null&&l!==void 0?l:mi.ALL,u}return z(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&Z("string",this.channelUrl,!0)&&(Wt(CE,this.order)||this.order===null)&&Z("boolean",this.reverse)&&(Qt(xl,this.scheduledStatus)||this.scheduledStatus===null)&&Wt(mi,this.messageTypeFilter)},n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return I(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=X.of(this._iid).requestQueue,r=new O5(vt(Y(Y({},this),{token:this._token}))),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),a=i.as(L5),s=a.scheduledMessages,o=a.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw ee.queryInProgress;case 4:return[3,6];case 5:throw ee.invalidParameters;case 6:return[2]}})})},n}(qo),D5=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.name="groupChannel",t}return z(n,e),n.prototype.init=function(t,r){var i=r.sdkState,a=r.dispatcher,s=r.sessionManager,o=r.requestQueue,l=r.logger,u=r.onlineDetector,d=r.cacheContext;e.prototype.init.call(this,t,{sdkState:i,dispatcher:a,sessionManager:s,requestQueue:o,logger:l,onlineDetector:u,cacheContext:d}),this._manager=new zr(t,{sdkState:i,cacheContext:d,dispatcher:a,sessionManager:s,requestQueue:o,logger:l})},n.prototype.createGroupChannelCollection=function(t){return t===void 0&&(t={}),new I5(this._iid,t)},n.prototype.createMyGroupChannelListQuery=function(t){return t===void 0&&(t={}),new zR(this._iid,t)},n.prototype.createPublicGroupChannelListQuery=function(t){return t===void 0&&(t={}),new R5(this._iid,t)},n.prototype.createScheduledMessageListQuery=function(t){return t===void 0&&(t={}),new U5(this._iid,t)},n.prototype.addGroupChannelHandler=function(t,r){Oe(Z("string",t)&&r instanceof Qo).throw(ee.invalidParameters),this._manager.addHandler(t,r)},n.prototype.removeGroupChannelHandler=function(t){Oe(Z("string",t)).throw(ee.invalidParameters),this._manager.removeHandler(t)},n.prototype.removeAllGroupChannelHandlers=function(){this._manager.clearHandler()},n.prototype.buildGroupChannelFromSerializedData=function(t){return this._manager.buildGroupChannelFromSerializedData(t)},n.prototype.buildGroupChannelListQueryFromSerializedData=function(t){return this._manager.buildGroupChannelListQueryFromSerializedData(t)},n.prototype.buildMemberFromSerializedData=function(t){return this._manager.buildMemberFromSerializedData(t)},n.prototype.getChannel=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){return Oe(Z("string",t)).throw(ee.invalidParameters),[2,this._manager.getChannel(t)]})})},n.prototype.getChannelWithoutCache=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){return Oe(Z("string",t)).throw(ee.invalidParameters),[2,this._manager.getChannelWithoutCache(t)]})})},n.prototype.getMyGroupChannelChangeLogsByToken=function(t,r){return r===void 0&&(r={}),A(this,void 0,void 0,function(){var i;return I(this,function(a){switch(a.label){case 0:return i=Y(Y({},cp),r),Oe(Z("string",t)&&TE(i)).throw(ee.invalidParameters),[4,this._manager.getMyGroupChannelChangeLogs(t,i)];case 1:return[2,a.sent()]}})})},n.prototype.getMyGroupChannelChangeLogsByTimestamp=function(t,r){return r===void 0&&(r={}),A(this,void 0,void 0,function(){var i;return I(this,function(a){switch(a.label){case 0:return i=Y(Y({},cp),r),Oe(Z("number",t)&&TE(i)).throw(ee.invalidParameters),[4,this._manager.getMyGroupChannelChangeLogs(t,i)];case 1:return[2,a.sent()]}})})},n.prototype.getGroupChannelCount=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){return r=Y(Y({},HR),t),Oe(GR(r)).throw(ee.invalidParameters),[2,this._manager.getGroupChannelCount(r)]})})},n.prototype.getUnreadItemCount=function(t){return t===void 0&&(t={}),A(this,void 0,void 0,function(){return I(this,function(r){switch(r.label){case 0:return[4,this._manager.getUnreadItemCount(t)];case 1:return[2,r.sent()]}})})},n.prototype.getTotalUnreadChannelCount=function(){return A(this,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return[4,this._manager.getTotalUnreadChannelCount()];case 1:return[2,t.sent()]}})})},n.prototype.getTotalUnreadMessageCount=function(t){return t===void 0&&(t={}),A(this,void 0,void 0,function(){return I(this,function(r){switch(r.label){case 0:return[4,this._manager.getTotalUnreadMessageCount(t)];case 1:return[2,r.sent()]}})})},n.prototype.getTotalScheduledMessageCount=function(t){return t===void 0&&(t={}),A(this,void 0,void 0,function(){return I(this,function(r){switch(r.label){case 0:return[4,this._manager.getTotalScheduledMessageCount(t)];case 1:return[2,r.sent()]}})})},n.prototype.getSubscribedTotalUnreadMessageCount=function(){return this._manager.getSubscribedTotalUnreadMessageCount()},n.prototype.getSubscribedCustomTypeTotalUnreadMessageCount=function(){return this._manager.getSubscribedCustomTypeTotalUnreadMessageCount()},n.prototype.getSubscribedCustomTypeUnreadMessageCount=function(t){return this._manager.getSubscribedCustomTypeUnreadMessageCount(t)},n.prototype.createChannel=function(t){return t===void 0&&(t={}),A(this,void 0,void 0,function(){var r;return I(this,function(i){return r=Y(Y({},Um),t),Oe(SE(r)).throw(ee.invalidParameters),[2,this._manager.createChannel(r)]})})},n.prototype.createDistinctChannelIfNotExist=function(t){return t===void 0&&(t={}),A(this,void 0,void 0,function(){var r;return I(this,function(i){return r=Y(Y({},Um),t),Oe(SE(r)).throw(ee.invalidParameters),r&&(r.isDistinct=!0),[2,this.createChannel(r)]})})},n.prototype.createChannelWithUserIds=function(t,r,i,a,s,o){return r===void 0&&(r=!1),s===void 0&&(s=""),o===void 0&&(o=""),A(this,void 0,void 0,function(){var l;return I(this,function(u){return l=Y(Y({},Um),{invitedUserIds:t,isDistinct:r,name:i,data:s,customType:o}),typeof a=="string"?l.coverUrl=a:l.coverImage=a,[2,this.createChannel(l)]})})},n.prototype.markAsReadAll=function(){return A(this,void 0,void 0,function(){return I(this,function(t){return this._manager.markAsReadAll(),[2]})})},n.prototype.markAsReadWithChannelUrls=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){return Oe(Qt("string",t)).throw(ee.invalidParameters),this._manager.markAsReadWithChannelUrls(t),[2]})})},n.prototype.markAsDelivered=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){switch(r.label){case 0:return Oe(Z("string",t)).throw(ee.invalidParameters),[4,this.getChannel(t)];case 1:return[4,r.sent().markAsDelivered()];case 2:return r.sent(),[2]}})})},n}(Pp);const Qu={collection:{groupChannel:{defaultLimit:20,defaultOrder:rr.LATEST_LAST_MESSAGE,defaultIncludeEmpty:!1},message:{defaultLimit:{next:25,prev:25},searchLimit:{next:10,prev:10}}}};var k5=function(e,n,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(d){try{u(r.next(d))}catch(f){s(f)}}function l(d){try{u(r.throw(d))}catch(f){s(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,l)}u((r=r.apply(e,n||[])).next())})};const VR=(e,n)=>{M.useEffect($R(e),n)},P5=(e,n)=>{M.useLayoutEffect($R(e),n)},C_=e=>typeof e=="function"&&e(),$R=e=>()=>{const n=C_(e);return()=>{n&&(n instanceof Promise?C_(()=>k5(void 0,void 0,void 0,function*(){const t=yield n;typeof t=="function"&&t()})):typeof n=="function"&&C_(n))}};let x5=0;function F5(){return M.useState(()=>`${x5++}`)[0]}const jp=(e,n,t)=>{const r=M.useRef(n),a=F5();r.current=n,M.useEffect(()=>{var s;const o=l=>(Object.keys(l).forEach(d=>{l[d]=(...f)=>{var m,p;return(p=(m=r.current)===null||m===void 0?void 0:m[d])===null||p===void 0?void 0:p.call(m,...f)}}),l);return(s=e==null?void 0:e.groupChannel)===null||s===void 0||s.addGroupChannelHandler(a,o(new Qo)),()=>{var l;(l=e==null?void 0:e.groupChannel)===null||l===void 0||l.removeGroupChannelHandler(a)}},[e==null?void 0:e.groupChannel,a])};function mr(e){const n=M.useRef(e);return n.current=e,M.useCallback((...t)=>n.current(...t),[n])}var B5=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]]);return t};const H5=(e,n)=>{var t=B5(e,[]);const r=KM(t.order);switch(n.type){case"update_refreshing":{t.refreshing=n.value.status;break}case"update_initialized":{t.initialized=n.value.status;break}case"update_channels":{WM(n.value.channels).forEach(i=>{const a=t.groupChannels.findIndex(s=>s.url===i.url);a>-1&&(t.groupChannels[a]=i)}),r&&(t.groupChannels=t.groupChannels.sort(r));break}case"delete_channels":{n.value.channelUrls.forEach(i=>{const a=t.groupChannels.findIndex(s=>s.url===i);a>-1&&t.groupChannels.splice(a,1)}),r&&(t.groupChannels=t.groupChannels.sort(r));break}case"append_channels":{const i=WM(n.value.channels);n.value.clearBeforeAction?t.groupChannels=i:t.groupChannels=z5(t.groupChannels,i,"url"),r&&(t.groupChannels=t.groupChannels.sort(r));break}case"update_order":{t.order=n.value.order;const i=KM(t.order);i&&(t.groupChannels=t.groupChannels.sort(i));break}}return t},G5=e=>{const[{initialized:n,refreshing:t,groupChannels:r},i]=M.useReducer(H5,{initialized:!1,refreshing:!1,groupChannels:[],order:e});return{updateInitialized:f=>{i({type:"update_initialized",value:{status:f}})},updateRefreshing:f=>{i({type:"update_refreshing",value:{status:f}})},updateChannels:f=>{i({type:"update_channels",value:{channels:f}})},deleteChannels:f=>{i({type:"delete_channels",value:{channelUrls:f}})},appendChannels:(f,m)=>{i({type:"append_channels",value:{channels:f,clearBeforeAction:m}})},updateOrder:f=>{i({type:"update_order",value:{order:f}})},initialized:n,refreshing:t,groupChannels:r}},KM=e=>{if(e)return(n,t)=>{switch(e){case"latest_last_message":return n.lastMessage&&t.lastMessage?t.lastMessage.createdAt-n.lastMessage.createdAt:n.lastMessage?-1:t.lastMessage?1:t.createdAt-n.createdAt;case"chronological":return t.createdAt-n.createdAt;case"channel_name_alphabetical":return n.name.localeCompare(t.name);default:return 0}}};function z5(e,n,t){const r=new Set(e.map(a=>a[t])),i=[...e];for(let a=0;a<n.length;a++)r.has(n[a][t])||(i.push(n[a]),r.add(n[a][t]));return i}function WM(e){return e.filter(n=>n.isGroupChannel())}var cm=function(e,n,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(d){try{u(r.next(d))}catch(f){s(f)}}function l(d){try{u(r.throw(d))}catch(f){s(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,l)}u((r=r.apply(e,n||[])).next())})};const j5=(e,n)=>{const t={includeEmpty:Qu.collection.groupChannel.defaultIncludeEmpty,limit:Qu.collection.groupChannel.defaultLimit,order:Qu.collection.groupChannel.defaultOrder},r=n==null?void 0:n(t);return r||e.groupChannel.createGroupChannelCollection(Object.assign(Object.assign({},t),{filter:new zp(t)}))},V5=(e,n)=>{var t,r,i;const a=!!(!((r=(t=e.appInfo)===null||t===void 0?void 0:t.premiumFeatureList)===null||r===void 0)&&r.includes(tk.delivery_receipt)),s=M.useRef(),o=M.useRef(n);o.current=n;const{initialized:l,groupChannels:u,refreshing:d,appendChannels:f,deleteChannels:m,updateRefreshing:p,updateInitialized:E}=G5(),_=(T,N,w)=>{var O,L,P,U;const B=(L=(O=s.current)===null||O===void 0?void 0:O.channels)!==null&&L!==void 0?L:[];if(f(B,!0),T&&a)switch(N){case um.EVENT_MESSAGE_RECEIVED:case um.EVENT_MESSAGE_SENT:case um.SYNC_CHANNEL_BACKGROUND:case um.SYNC_CHANNEL_CHANGELOGS:case void 0:(U=(P=o.current)===null||P===void 0?void 0:P.markAsDelivered)===null||U===void 0||U.call(P,w??B);break}},b=mr(T=>cm(void 0,void 0,void 0,function*(){var N,w,O,L;s.current&&((N=s.current)===null||N===void 0||N.dispose()),T&&(s.current=j5(e,n==null?void 0:n.collectionCreator),(w=s.current)===null||w===void 0||w.setGroupChannelCollectionHandler({onChannelsAdded:(P,U)=>{var B,F;const H=U.filter(G=>G.isGroupChannel());_(!0,P.source,H),(F=(B=o.current)===null||B===void 0?void 0:B.onChannelsAdded)===null||F===void 0||F.call(B,H)},onChannelsUpdated:(P,U)=>{var B,F;const H=U.filter(G=>G.isGroupChannel());_(!0,P.source,H),(F=(B=o.current)===null||B===void 0?void 0:B.onChannelsUpdated)===null||F===void 0||F.call(B,H)},onChannelsDeleted:(P,U)=>{var B,F;_(!1),(F=(B=o.current)===null||B===void 0?void 0:B.onChannelsDeleted)===null||F===void 0||F.call(B,U)}}),!((O=s.current)===null||O===void 0)&&O.hasMore&&(yield(L=s.current)===null||L===void 0?void 0:L.loadMore(),_(!0)))}));M.useEffect(()=>()=>{var T;s.current&&((T=s.current)===null||T===void 0||T.dispose())},[]),VR(()=>cm(void 0,void 0,void 0,function*(){E(!1),e.currentUser&&(yield b(e.currentUser.userId),E(!0))}),[e,(i=e.currentUser)===null||i===void 0?void 0:i.userId]),jp(e,{onUserBanned:(T,N)=>{var w,O,L;N.userId===((w=e.currentUser)===null||w===void 0?void 0:w.userId)?(m([T.url]),(L=(O=o.current)===null||O===void 0?void 0:O.onChannelsDeleted)===null||L===void 0||L.call(O,[T.url])):_(!1)}});const C=mr(()=>cm(void 0,void 0,void 0,function*(){e.currentUser&&(p(!0),yield b(e.currentUser.userId),p(!1))})),y=mr(()=>cm(void 0,void 0,void 0,function*(){var T,N;!((T=s.current)===null||T===void 0)&&T.hasMore&&(yield(N=s.current)===null||N===void 0?void 0:N.loadMore(),_(!0))}));return{initialized:l,groupChannels:u,refresh:C,refreshing:d,loadMore:y}};var $5=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.name="poll",t}return z(n,e),n.prototype.init=function(t,r){var i=r.sdkState,a=r.dispatcher,s=r.sessionManager,o=r.requestQueue,l=r.logger,u=r.onlineDetector,d=r.cacheContext;e.prototype.init.call(this,t,{sdkState:i,dispatcher:a,sessionManager:s,requestQueue:o,logger:l,onlineDetector:u,cacheContext:d}),this._manager=new tp(t,{sdkState:i,dispatcher:a,sessionManager:s,requestQueue:o,logger:l,onlineDetector:u,cacheContext:d})},n.prototype.create=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){return r=Y(Y({},gx),t),Oe(V2(r)).throw(ee.invalidParameters),[2,this._manager.create(r)]})})},n.prototype.get=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){return r=Y(Y({},Ex),t),Oe(q2(r)).throw(ee.invalidParameters),[2,this._manager.get(r)]})})},n.prototype.getOption=function(t){return A(this,void 0,void 0,function(){var r;return I(this,function(i){return r=Y(Y({},_x),t),Oe($2(r)).throw(ee.invalidParameters),[2,this._manager.getOption(r)]})})},n.prototype.buildPollFromSerializedData=function(t){return this._manager.buildPollFromSerializedData(t)},n}(Pp),q5=function(e){return["-lastMessageUpdatedAt","-createdAt","syncIndex"]},QM=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return z(n,e),n}(qn),qR=function(e){this.key=e.key,this.url=e.url},KR=function(e){this.id=e.id,this.name=e.name,this.url=e.url,this.emojis=e.emojis?e.emojis.map(function(n){return new qR(n)}):[]},K5=function(e){this.emojiHash=e.emoji_hash||"",this.emojiCategories=e.emoji_categories?e.emoji_categories.map(function(n){return new KR(n)}):[]},W5={profileImage:void 0,profileUrl:void 0,nickname:void 0},YM=function(e){return{v2:function(){return A(void 0,void 0,void 0,function(){return I(this,function(n){switch(n.label){case 0:return[4,e.commitSchema([{collectionName:pR,keyName:$4,index:[Lm(rr.LATEST_LAST_MESSAGE),Lm(rr.CHRONOLOGICAL),Lm(rr.CHANNEL_NAME_ALPHABETICAL)]},{collectionName:Db,keyName:q4,index:[Qs(ii.CHANNEL_LATEST),Qs(ii.NEWEST_CHILD_MESSAGE)]},{collectionName:CR,keyName:k6,index:[Qs(ii.CHANNEL_LATEST),Qs(ii.NEWEST_CHILD_MESSAGE)]},{collectionName:W4,keyName:Q4}])];case 1:return[2,n.sent()]}})})},v3:function(){return A(void 0,void 0,void 0,function(){return I(this,function(n){switch(n.label){case 0:return[4,e.commitSchema([{collectionName:Y4,keyName:X4,index:[q5()]}])];case 1:return[2,n.sent()]}})})},v4:function(){return A(void 0,void 0,void 0,function(){return I(this,function(n){switch(n.label){case 0:return[4,e.commitSchema([{collectionName:_R,keyName:K4,index:[R6()]}])];case 1:return[2,n.sent()]}})})},v5:function(){return A(void 0,void 0,void 0,function(){return I(this,function(n){switch(n.label){case 0:return[4,e.commitSchema([{collectionName:ER,keyName:Z4,index:[["-userId","-updatedAt"]]}])];case 1:return[2,n.sent()]}})})}}},XM=function(e){var n=new bR;return function(t,r){return A(void 0,void 0,void 0,function(){var i,a,s,o;return I(this,function(l){switch(l.label){case 0:switch(t){case 1:case 2:case 3:case 4:return[3,1];case 5:return[3,2];case 6:return[3,4];case 7:return[3,11]}return[3,15];case 1:return r(),[3,16];case 2:return[4,e.reset()];case 3:return l.sent(),r(),[3,16];case 4:return l.trys.push([4,9,,10]),i=YM(e),a=i.v2,s=i.v3,o=i.v4,[4,a()];case 5:return l.sent(),[4,s()];case 6:return l.sent(),[4,o()];case 7:return l.sent(),[4,e.collection(Db).removeIf({where:{channelType:ln.OPEN}})];case 8:return l.sent(),[3,10];case 9:return l.sent(),n.warn("Failed to migrate to v2, v3, v4"),[3,10];case 10:return r(),[3,16];case 11:return l.trys.push([11,13,,14]),[4,(0,YM(e).v5)()];case 12:return l.sent(),[3,14];case 13:return l.sent(),n.warn("Failed to migrate to v5"),[3,14];case 14:return r(),[3,16];case 15:r(),l.label=16;case 16:return[2]}})})}},Q5=function(){return typeof document<"u"?document.visibilityState:"visible"},Y5=function(e){function n(t){var r=t.getVisibilityState,i=r===void 0?Q5:r,a=t.initialState,s=a===void 0?"visible":a,o=t.isEnabled,l=o===void 0||o,u=t.pauseCheckDelay,d=u===void 0?3e4:u,f=e.call(this)||this;return f._pauseCheckDelay=3e4,f._currentState="visible",f._getVisibilityState=i,f._pauseCheckDelay=d,f._currentState=s,f._isEnabled=l,f._boundToggleState=f._toggleState.bind(f),f}return z(n,e),Object.defineProperty(n.prototype,"currentState",{get:function(){return this._currentState},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isAvailable",{get:function(){return typeof window<"u"&&!!window.addEventListener&&!!window.removeEventListener},enumerable:!1,configurable:!0}),n.prototype._toggleState=function(){var t=this,r=this._getVisibilityState();r!=="hidden"?this._currentState==="hidden"&&(this._pauseDelayTimer&&(clearTimeout(this._pauseDelayTimer),this._pauseDelayTimer=void 0),this.dispatch("resume")):this._currentState!=="hidden"&&(this._pauseDelayTimer=setTimeout(function(){t._pauseDelayTimer=void 0,t.dispatch("pause")},this._pauseCheckDelay)),this._currentState=r},n.prototype.start=function(){this._isEnabled&&this.isAvailable&&(this._boundToggleState=this._toggleState.bind(this),window.addEventListener("visibilitychange",this._boundToggleState,{capture:!0}))},n.prototype.stop=function(){this._isEnabled&&this.isAvailable&&this._boundToggleState&&window.removeEventListener("visibilitychange",this._boundToggleState,{capture:!0})},n}(ac),X5=function(){function e(n){var t=n.logger,r=n.connectionDelegate,i=r===void 0?null:r,a=this;this._onlineWorker=function(){var s;return(s=a.connectionDelegate)===null||s===void 0?void 0:s.reconnect()},this._offlineWorker=function(){var s;return(s=a.connectionDelegate)===null||s===void 0?void 0:s.disconnect()},this.unsubscribes=[],this._onlineListener=function(s){if(a.isAvailableOnWeb)return window.addEventListener("online",s),function(){return window.removeEventListener("online",s,!1)}},this._offlineListener=function(s){if(a.isAvailableOnWeb)return window.addEventListener("offline",s),function(){return window.removeEventListener("offline",s,!1)}},this.logger=t,i&&(this.connectionDelegate=i)}return Object.defineProperty(e.prototype,"isAvailableOnWeb",{get:function(){return typeof window<"u"&&!!window.addEventListener&&"ononline"in window&&"onoffline"in window&&typeof navigator<"u"&&navigator.onLine!==void 0},enumerable:!1,configurable:!0}),e.prototype.setOnlineListener=function(n){n&&typeof n=="function"&&(this._onlineListener=n)},e.prototype.setOfflineListener=function(n){n&&typeof n=="function"&&(this._offlineListener=n)},e.prototype.start=function(){this.unsubscribes=[this._onlineListener(this._onlineWorker),this._offlineListener(this._offlineWorker)]},e.prototype.stop=function(){var n=this;this.unsubscribes.forEach(function(t){try{t==null||t()}catch(r){n.logger.warn(r.message)}}),this.unsubscribes=[]},e.prototype.isOnline=function(){return A(this,void 0,void 0,function(){return I(this,function(n){return this.isAvailableOnWeb?[2,navigator.onLine]:[2,new Promise(function(t){fetch("https://www.google.com",{method:Ie.GET,mode:"no-cors"}).then(function(){return t(!0)}).catch(function(){return t(!1)})})]})})},e}(),Z5=function(e){function n(t){var r,i=this;return(i=e.call(this)||this).method=Ie.GET,i.path=Nk,i.params=Qe(vt({ts:typeof t.token=="number"?t.token:void 0,token:typeof t.token=="string"?t.token:void 0,limit:(r=t.limit)!==null&&r!==void 0?r:100})),i}return z(n,e),n}(we),J5=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.configs=r.configs,i.hasMore=r.has_more,i.nextToken=r.next,i.ts=r.ts,i}return z(n,e),n}(Pe),ZM=function(e){function n(t){var r=t.userId,i=t.nickname,a=t.profileUrl,s=t.profileImage,o=t.preferredLanguages,l=e.call(this)||this;return l.method=Ie.PUT,l.path="".concat(Tn,"/").concat(encodeURIComponent(r)),l.params=Qe(vt({nickname:i,profile_url:a,profile_file:s,preferred_languages:o})),l}return z(n,e),n}(we),JM=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.user=new Yt(t,Y({},r)),i}return z(n,e),n}(Pe),e7=function(e){function n(t){var r=t.userId,i=t.token,a=t.deviceOS,s=t.deviceManufacturer,o=t.systemPushEnabled,l=e.call(this)||this;return l.method=Ie.POST,l.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/push/apns"),l.params=Qe({apns_device_token:i,always_push:!0,device_os:a,device_manufacturer:s,system_push_enabled:o}),l}return z(n,e),n}(we);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.token=r.token,i.type=r.type?jr[r.type.toLowerCase()]:jr.UNKNOWN,i.user=new Yt(t,r.user),i}z(n,e)})(Pe);var t7=function(e){function n(t){var r=t.userId,i=t.token,a=t.deviceOS,s=t.deviceManufacturer,o=t.systemPushEnabled,l=e.call(this)||this;return l.method=Ie.POST,l.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/push/gcm"),l.params=Qe({gcm_reg_token:i,always_push:!0,device_os:a,device_manufacturer:s,system_push_enabled:o}),l}return z(n,e),n}(we);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.token=r.token,i.type=r.type?jr[r.type.toLowerCase()]:jr.UNKNOWN,i.user=new Yt(t,r.user),i}z(n,e)})(Pe);var n7=function(e){function n(t){var r=t.userId,i=t.token,a=e.call(this)||this;return a.method=Ie.DELETE,a.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/push/apns/").concat(encodeURIComponent(i)),a}return z(n,e),n}(we);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.token=r.token,i.user=new Yt(t,r.user),i.lastDeletedAt=r.device_token_last_deleted_at,i}z(n,e)})(Pe);var r7=function(e){function n(t){var r=t.userId,i=t.token,a=e.call(this)||this;return a.method=Ie.DELETE,a.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/push/gcm/").concat(encodeURIComponent(i)),a}return z(n,e),n}(we);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.token=r.token,i.user=new Yt(t,r.user),i.lastDeletedAt=r.device_token_last_deleted_at,i}z(n,e)})(Pe);var i7=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=Ie.DELETE,i.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/push/apns"),i}return z(n,e),n}(we);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.type=r.type?jr[r.type.toLowerCase()]:jr.UNKNOWN,i.user=new Yt(t,r.user),i.lastDeletedAt=r.device_token_last_deleted_at,i}z(n,e)})(Pe);var a7=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=Ie.DELETE,i.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/push/gcm"),i}return z(n,e),n}(we);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.type=r.type?jr[r.type.toLowerCase()]:jr.UNKNOWN,i.user=new Yt(t,r.user),i.lastDeletedAt=r.device_token_last_deleted_at,i}z(n,e)})(Pe);var s7=function(e){function n(t){var r=t.userId,i=t.type,a=t.token,s=t.ts,o=e.call(this)||this;return o.method=Ie.GET,o.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/push/").concat(encodeURIComponent(i),"/device_tokens"),o.params={created_ts:s,token:a},o}return z(n,e),n}(we),o7=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.pushTokens={type:r.type?jr[r.type.toLowerCase()]:jr.UNKNOWN,deviceTokens:r.device_tokens,hasMore:r.has_more,token:r.token},i}return z(n,e),n}(Pe),l7=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=Ie.GET,i.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/channel_invitation_preference"),i}return z(n,e),n}(we),u7=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.autoAccept=r.auto_accept,i}return z(n,e),n}(Pe),c7=function(e){function n(t){var r=t.userId,i=t.willAutoAccept,a=e.call(this)||this;return a.method=Ie.PUT,a.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/channel_invitation_preference"),a.params={auto_accept:i},a}return z(n,e),n}(we),d7=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.autoAccept=r.auto_accept,i}return z(n,e),n}(Pe),h7=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=Ie.GET,i.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/push_preference"),i}return z(n,e),n}(we),f7=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.preference={doNotDisturbOn:r.do_not_disturb,startHour:r.start_hour,startMin:r.start_min,endHour:r.end_hour,endMin:r.end_min,timezone:r.timezone},i}return z(n,e),n}(Pe),v7=function(e){function n(t){var r=t.userId,i=t.doNotDisturbOn,a=t.startHour,s=t.startMin,o=t.endHour,l=t.endMin,u=t.timezone,d=e.call(this)||this;return d.method=Ie.PUT,d.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/push_preference"),d.params={do_not_disturb:i,start_hour:a,start_min:s,end_hour:o,end_min:l,timezone:u},d}return z(n,e),n}(we),m7=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.preference={doNotDisturbOn:r.do_not_disturb,startHour:r.start_hour,startMin:r.start_min,endHour:r.end_hour,endMin:r.end_min,timezone:r.timezone},i}return z(n,e),n}(Pe),p7=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=Ie.GET,i.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/push_preference"),i}return z(n,e),n}(we),g7=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.snoozePeriod={isSnoozeOn:r.snooze_enabled},typeof r.snooze_start_ts=="number"&&(i.snoozePeriod.startTs=r.snooze_start_ts),typeof r.snooze_end_ts=="number"&&(i.snoozePeriod.endTs=r.snooze_end_ts),i}return z(n,e),n}(Pe),_7=function(e){function n(t){var r=t.userId,i=t.snoozeOn,a=t.startTs,s=t.endTs,o=e.call(this)||this;return o.method=Ie.PUT,o.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/push_preference"),o.params={snooze_enabled:i,snooze_start_ts:a,snooze_end_ts:s},o}return z(n,e),n}(we),E7=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.snoozePeriod={isSnoozeOn:r.snooze_enabled},typeof r.snooze_start_ts=="number"&&(i.snoozePeriod.startTs=r.snooze_start_ts),typeof r.snooze_end_ts=="number"&&(i.snoozePeriod.endTs=r.snooze_end_ts),i}return z(n,e),n}(Pe),y7=function(e){function n(t){var r=t.userId,i=t.blockedUserId,a=e.call(this)||this;return a.method=Ie.POST,a.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/block"),a.params={target_id:i},a}return z(n,e),n}(we);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.user=new Yt(t,r),i}z(n,e)})(Pe);var b7=function(e){function n(t){var r=t.userId,i=t.unblockedUserId,a=e.call(this)||this;return a.method=Ie.DELETE,a.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/block/").concat(encodeURIComponent(i)),a}return z(n,e),n}(we);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}z(n,e)})(Pe);var C7=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=Ie.GET,i.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/push_preference"),i}return z(n,e),n}(we),S7=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.pushTriggerOption=r.push_trigger_option,i}return z(n,e),n}(Pe),T7=function(e){function n(t){var r=t.userId,i=t.pushTriggerOption,a=e.call(this)||this;return a.method=Ie.PUT,a.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/push_preference"),a.params={push_trigger_option:i},a}return z(n,e),n}(we),M7=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.pushTriggerOption=r.push_trigger_option,i}return z(n,e),n}(Pe),N7=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=Ie.GET,i.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/push/template"),i}return z(n,e),n}(we),I7=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.name=r.name,i}return z(n,e),n}(Pe),A7=function(e){function n(t){var r=t.userId,i=t.templateName,a=e.call(this)||this;return a.method=Ie.PUT,a.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/push/template"),a.params={name:i},a}return z(n,e),n}(we),w7=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.name=r.name,i}return z(n,e),n}(Pe),R7=function(e){function n(t){var r=t.userId,i=t.token,a=e.call(this)||this;return a.method=Ie.GET,a.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/friends/changelogs"),a.params={token:i},a}return z(n,e),n}(we),O7=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.changelogs={addedUsers:r.added.map(function(a){return new Yt(t,a)}),updatedUsers:r.updated.map(function(a){return new Yt(t,a)}),deletedUserIds:r.deleted,hasMore:r.has_more,token:r.next},i}return z(n,e),n}(Pe),L7=function(e){function n(t){var r=t.userId,i=t.discoveries,a=e.call(this)||this;return a.method=Ie.PUT,a.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/friend_discoveries"),a.params={friend_discoveries:i.map(function(s){return{friend_discovery_key:s.friendDiscoveryKey,friend_name:s.friendName}})},a}return z(n,e),n}(we),U7=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.friendDiscoveryRequestId=r.friend_discovery_request_id,i}return z(n,e),n}(Pe),D7=function(e){function n(t){var r=t.userId,i=t.discoveryKeys,a=e.call(this)||this;return a.method=Ie.DELETE,a.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/friend_discoveries"),a.params={friend_discovery_keys:i},a}return z(n,e),n}(we);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}z(n,e)})(Pe);var k7=function(e){function n(t){var r=t.userId,i=t.userIds,a=e.call(this)||this;return a.method=Ie.POST,a.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/friends"),a.params={user_ids:i},a}return z(n,e),n}(we),P7=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.users=r.users.map(function(a){return new Yt(t,a)}),i}return z(n,e),n}(Pe),x7=function(e){function n(t){var r=t.userId,i=t.userIds,a=e.call(this)||this;return a.method=Ie.DELETE,a.path="".concat(Tn,"/").concat(encodeURIComponent(r),"/friends"),a.params={user_ids:i},a}return z(n,e),n}(we);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}z(n,e)})(Pe);var F7=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=Ie.GET,i.path="".concat(Tn,"/").concat(r,"/allow_friend_discovery"),i.params={},i}return z(n,e),n}(we),B7=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.allowFriendDiscovery=r.allow_friend_discovery,i}return z(n,e),n}(Pe),H7=function(e){function n(t){var r=t.userId,i=t.allowFriendDiscovery,a=e.call(this)||this;return a.method=Ie.PUT,a.path="".concat(Tn,"/").concat(r,"/allow_friend_discovery"),a.params={allow_friend_discovery:i},a}return z(n,e),n}(we);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}z(n,e)})(Pe);var hp,G7=function(e){function n(){var t=e.call(this)||this;return t.method=Ie.GET,t.path=Xw,t}return z(n,e),n}(we),z7=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.emojiContainer=new K5(r),i}return z(n,e),n}(Pe),j7=function(e){function n(t){var r=t.categoryId,i=e.call(this)||this;return i.method=Ie.GET,i.path="".concat(Xw,"/").concat(r),i}return z(n,e),n}(we),V7=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.emojiCategory=new KR(r),i}return z(n,e),n}(Pe),$7=function(e){function n(t){var r=t.key,i=e.call(this)||this;return i.method=Ie.GET,i.path="".concat(Ek,"/").concat(r),i}return z(n,e),n}(we),q7=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.emoji=new qR(r),i}return z(n,e),n}(Pe),K7=function(e){function n(){var t=e.call(this)||this;return t.method=Ie.GET,t.path="".concat(yk),t}return z(n,e),n}(we),W7=function(e){function n(t,r){var i,a=this,s=r??{};return(a=e.call(this,t,r)||this).uikitConfiguration={string:JSON.stringify(s),json:s},a.updatedAt=(i=r==null?void 0:r.updated_at)!==null&&i!==void 0?i:0,a}return z(n,e),n}(Pe);(function(e){e.DELIVERED="DELIVERED",e.CLICKED="CLICKED"})(hp||(hp={}));var Sh,eN=function(e){function n(t){var r=t.deviceToken,i=t.pushTrackingId,a=t.messageId,s=t.allowedPushNotification,o=t.channelKey,l=t.templateKey,u=t.eventType,d=t.notificationEventDeadline,f=e.call(this)||this;return f.method=Ie.POST,f.path=Sk,f.params=Qe({device_token:r,push_tracking_id:i,message_id:a,allowed_push_notification:s,channel_key:o,template_key:l,event_type:u,notification_event_deadline:d}),f}return z(n,e),n}(we),Q7=function(){function e(n,t,r){var i=this;this._storeInitialized=!1,this._iid=n,this.options=t;var a=X.of(n),s=a.sdkState,o=a.cacheContext,l=a.dispatcher,u=a.sessionManager,d=a.requestQueue,f=a.logger,m=a.userEventHandlers,p=a.appStateToggleEnabled;this._onlineDetector=new X5({logger:f,connectionDelegate:{reconnect:function(){return A(i,void 0,void 0,function(){var _,b,C,y,T,N;return I(this,function(w){switch(w.label){case 0:if(_=X.of(n),b=_.sdkState,C=_.connectionManager,(y=_.sessionManager).session.hasSession)return[3,5];w.label=1;case 1:return w.trys.push([1,3,,4]),[4,C.connect(y.session.authToken)];case 2:return w.sent(),[3,4];case 3:if(T=w.sent(),Ai(T))throw T;return f.debug("connect failed by reconnect event = ",T),[3,4];case 4:return[3,9];case 5:if(b.appState!=="foreground")return[3,9];w.label=6;case 6:return w.trys.push([6,8,,9]),[4,C.resetAndReconnect()];case 7:return w.sent(),[3,9];case 8:if(N=w.sent(),Ai(N))throw N;return f.debug("resetAndReconnect failed by reconnect event = ",N),[3,9];case 9:return l.dispatch(new QM),[2]}})})},disconnect:function(){dr(function(){return A(i,void 0,void 0,function(){return I(this,function(_){switch(_.label){case 0:return[4,X.of(n).connectionManager.disconnect()];case 1:return _.sent(),[2]}})})})}}});var E=new zh(n,{localCacheEnabled:o.localCacheEnabled,enableAutoResend:o.localCacheConfig.enableAutoResend,dispatcher:l,sdkState:s,logger:f});r.forEach(function(_){_.init(n,{sdkState:s,cacheContext:o,dispatcher:l,sessionManager:u,requestQueue:d,logger:f,onlineDetector:i._onlineDetector}),i[_.name]=_}),this._appStateChangeDetector=new Y5({isEnabled:p}),this._appStateChangeDetector.on("resume",function(){f.debug("the page resumes from freeze"),i.setForegroundState()}).on("pause",function(){f.debug("the page freezes"),i.setBackgroundState()}),l.on(function(_){var b;if(_ instanceof Ea)_.stateType===wn.CONNECTED&&E.processNonAutoResendRegisteredPendingMessages();else if(_ instanceof Yn){if(_.code==="USEV"){var C=_.as(wR).event;if(C.category===Cf.FRIEND_DISCOVERED){var y=up.getDataAsFriendDiscoveredEvent(n,C).friendDiscoveries;it(function(){return A(i,void 0,void 0,function(){return I(this,function(O){return[2,m.forEach(function(L){L.onFriendsDiscovered&&L.onFriendsDiscovered(y)})]})})})}}}else if(_ instanceof M2){var T=X.of(i._iid).subscribedUnreadMessageCount,N=!1,w=_.ts;typeof w=="number"&&w>T.ts&&(T.all!==_.all&&(N=!0),T.all=_.all>=0?_.all:0,_.customTypes&&Object.keys(_.customTypes).forEach(function(O){T.customTypes[O]!==_.customTypes[O]&&(N=!0),T.customTypes[O]=_.customTypes[O]}),N=N&&T.ts>0,T.ts=w),N&&it(function(){return A(i,void 0,void 0,function(){return I(this,function(O){return[2,m.forEach(function(L){L.onTotalUnreadMessageCountChanged&&L.onTotalUnreadMessageCountChanged({groupChannelCount:T.all,feedChannelCount:T.feed,customTypeUnreadCount:T.customTypes}),L.onTotalUnreadMessageCountUpdated&&L.onTotalUnreadMessageCountUpdated(T.all,T.customTypes)})]})})})}else _ instanceof A2?(o.preference.set(i._getUserProfileCacheKey(s.userId),dE.payloadify(_.userProfile)),!((b=_.userProfile.appInfo.notificationInfo)===null||b===void 0)&&b.isEnabled&&o.preference.set(bb(i.appId),{value:!0})):_ instanceof R2?_.configSyncNeeded&&dr(function(){return A(i,void 0,void 0,function(){return I(this,function(O){switch(O.label){case 0:return[4,this._getAppConfigsInfo()];case 1:return O.sent(),[2]}})})}):_ instanceof AR?o.preference.set(Xm(i.appId),{configTs:_.configTs}):_ instanceof vd&&_.error&&_.error.isSessionInvalidatedError&&(f.debug("session revoked."),i._internalDisconnect(_.error))})}return e.init=function(n){var t=n.appId,r=n.appVersion,i=n.modules,a=i===void 0?[]:i,s=n.options,o=s===void 0?new Ww:s,l=n.debugMode,u=l!==void 0&&l,d=n.customApiHost,f=n.customWebSocketHost,m=n.newInstance,p=m!==void 0&&m,E=n.logLevel,_=n.localCacheEnabled,b=_!==void 0&&_,C=n.localCacheConfig,y=C===void 0?new Yw:C,T=n.localCacheEncryption,N=n.useAsyncStorageStore,w=N===void 0?null:N,O=n.useMMKVStorageStore,L=O===void 0?null:O,P=n.appStateToggleEnabled,U=P===void 0||P;if(!Sh||p){var B="su-".concat(Ho()),F=T??{encrypt:function(V){return V},decrypt:function(V){return V}},H=new bR;H.level=E??wo.WARN;var G=new Lu({encryption:F});u||(sE()?L?G=new A6({MMKV:L,encryption:F}):w&&(G=new I6({AsyncStorage:w,encryption:F}),H.warn("AsyncStorage store is deprecated due to the small size limit. Please use MMKVStorage store instead.")):G=new N6({encryption:F})),new X(B,{appId:t,appVersion:r,options:o,apiHost:d??"https://api-".concat(t,".sendbird.com"),websocketHost:f??"wss://ws-".concat(t,".sendbird.com"),store:G,encryption:F,logger:H,localCacheEnabled:b,localCacheConfig:y,debugMode:u,appStateToggleEnabled:U});var j=[new Y6,new $5],x=new e(B,o,Nt(Nt([],ut(a),!1),ut(j),!1));return Sh||(Sh=x),x}return Sh},Object.defineProperty(e,"instance",{get:function(){return Sh},enumerable:!1,configurable:!0}),Object.defineProperty(e,"version",{get:function(){return qw},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appId",{get:function(){return X.of(this._iid).sdkState.appId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appInfo",{get:function(){var n=X.of(this._iid).appInfo;return n??null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appVersion",{get:function(){var n;return(n=X.of(this._iid).sdkState.appVersion)!==null&&n!==void 0?n:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"debugMode",{get:function(){return!!X.of(this._iid).debugMode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logLevel",{get:function(){return X.of(this._iid).logger.level},set:function(n){X.of(this._iid).logger.level=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCacheEnabled",{get:function(){return X.of(this._iid).cacheContext.localCacheEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localCacheConfig",{get:function(){var n=X.of(this._iid).cacheContext;return n.localCacheEnabled?n.localCacheConfig:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ekey",{get:function(){return X.of(this._iid).sessionManager.ekey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentUser",{get:function(){var n;return(n=X.of(this._iid).sessionManager.currentUser)!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connectionState",{get:function(){var n=X.of(this._iid).connectionManager;return n.isConnected?Is.OPEN:n.isConnecting?Is.CONNECTING:Is.CLOSED},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastConnectedAt",{get:function(){var n=X.of(this._iid),t=n.connectedAt;return n.connectionManager.isConnected?t:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fcmPushToken",{get:function(){var n;return(n=this._fcmPushToken)!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"apnsPushToken",{get:function(){var n;return(n=this._apnsPushToken)!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),e.prototype._getNestDBVersion=function(){return 8},e.prototype._getPreferenceVersion=function(){return 9},e.prototype._getPreferenceCacheKey=function(n){return"sendbird@".concat(this.appId,"/").concat(n,".pref")},e.prototype._getUserProfileCacheKey=function(n){return"sendbird@".concat(this.appId,"/").concat(n,".profile")},e.prototype._internalDisconnect=function(n){return A(this,void 0,void 0,function(){var t,r,i,a;return I(this,function(s){switch(s.label){case 0:return t=X.of(this._iid),r=t.connectionManager,i=t.sdkState,a=t.requestQueue,this._appStateChangeDetector.stop(),this._onlineDetector.stop(),a.cancelAll(),[4,r.logout(n)];case 1:return s.sent(),[4,this.clearCachedData()];case 2:return s.sent(),i.appState="foreground",[2]}})})},e.prototype._getAppConfigsInfo=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a,s,o,l,u=this;return I(this,function(d){switch(d.label){case 0:return n=X.of(this._iid),t=n.requestQueue,r=n.dispatcher,i=n.cacheContext,a=n.sdkState,s={},[4,i.preference.get(Xm(a.appId))];case 1:return(l=d.sent())&&(o=l.configTs),new Go("appConfigsInfo",function(f){return A(u,void 0,void 0,function(){var m,p,E,_,b,C,y,T;return I(this,function(N){switch(N.label){case 0:return m={hasNext:!0,nextToken:f},p=new Z5({token:f}),[4,t.send(p)];case 1:return E=N.sent(),_=E.as(J5),b=_.configs,C=_.hasMore,y=_.nextToken,T=_.ts,Object.keys(b).forEach(function(w){s[w]=b[w]}),m.hasNext=C,m.nextToken=y,C||r.dispatch(new RR({appConfigsInfo:s,configTs:T})),[2,m]}})})}).start(o),[2]}})})},e.prototype.getMemoryStoreForDebugging=function(){var n=X.of(this._iid),t=n.debugMode,r=n.cacheContext;if(t)return r.store instanceof Lu?r.store:null;throw ee.debugModeRequired},e.prototype.addExtension=function(n,t){var r=X.of(this._iid).sdkState;["sb_uikit","sb_syncmanager","device-os-platform"].indexOf(n)>-1&&r.extensions&&(r.extensions[n]=t)},e.prototype.addSendbirdExtensions=function(n,t,r){var i,a,s=X.of(this._iid),o=s.logger,l=s.sdkState,u=new RegExp(Ok);if(n.length===0)return o.debug("sb.addSendbirdExtensions() has failed because the given sendbirdExtensions is empty."),!1;if(n.find(function(_){return!u.test(_.version)}))return o.debug("sb.addSendbirdExtensions() has failed because the given version did not satisfy the SemVer specification."),!1;if(r)try{for(var d=Ge(Object.entries(r)),f=d.next();!f.done;f=d.next()){var m=ut(f.value,2),p=m[0],E=m[1];if(/&|=/.test(p)||/&|=/.test(E))return o.debug("sb.addSendbirdExtensions() has failed because the given customData includes at least one invalid character: = or &."),!1}}catch(_){i={error:_}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}return l.sendbirdRuntimeEnvironment={sendbirdExtensions:n,deviceOS:t,customData:r},!0},e.prototype.setOnlineListener=function(n){this._onlineDetector.setOnlineListener(n)},e.prototype.setOfflineListener=function(n){this._onlineDetector.setOfflineListener(n)},e.prototype._safeInitializeStore=function(n){return A(this,void 0,void 0,function(){var t;return I(this,function(r){switch(r.label){case 0:t=X.of(this._iid).cacheContext,r.label=1;case 1:return r.trys.push([1,3,,5]),[4,t.store.init(n)];case 2:return r.sent(),this._storeInitialized=!0,[3,5];case 3:return r.sent(),t.replaceStore(new Lu),[4,this._safeInitializeStore(n)];case 4:return r.sent(),[3,5];case 5:return[2]}})})},e.prototype.setLocaleForChatbot=function(n){var t=X.of(this._iid).sdkState,r=function(i){return i.replace(/[^a-zA-Z-_.]/g,"")}(n.trim());r&&(t.localeForChatbot=r)},e.prototype.initializeCache=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,d;return I(this,function(f){switch(f.label){case 0:if(t=X.of(this._iid),r=t.sdkState,i=t.cacheContext,a=t.dispatcher,s=t.logger,r.userId&&r.userId===n)return[3,13];o="sendbird@".concat(r.appId,"/").concat(n,".db"),f.label=1;case 1:return f.trys.push([1,9,11,13]),i.localCacheEnabled?i.nestdb&&i.nestdb.state!==$s.CLOSED&&i.nestdb.name===o?[3,3]:(l="sendbird@".concat(r.appId,"/").concat(n,".db"),(u=i.nestdb=new w6({name:l,version:this._getNestDBVersion(),store:i.store,config:new Pf({dbname:l,itemSizeLimit:61440})})).on("upgrade",XM(u)),u.on("storeReplaced",function(m){i.replaceStore(m),i.localCacheEnabled=!1,u.on("upgrade",XM(u))}),[4,u.open()]):[3,6];case 2:return f.sent(),this._storeInitialized=!0,a.dispatch(new NR(this._iid,{userId:n})),[3,5];case 3:return[4,this._safeInitializeStore(o)];case 4:f.sent(),f.label=5;case 5:return r.userId=n,[3,8];case 6:return[4,this._safeInitializeStore(o)];case 7:f.sent(),r.userId=n,f.label=8;case 8:return[3,13];case 9:return d=f.sent(),s.warn("Nest DB Open Failed. ",d),i.store instanceof Lu||(i.replaceStore(new Lu),i.localCacheEnabled=!1),[4,this._safeInitializeStore(o)];case 10:throw f.sent(),r.userId=n,ee.databaseError;case 11:return[4,this._setupPreference(n)];case 12:return f.sent(),[7];case 13:return[2]}})})},e.prototype.getCacheDataSize=function(){return A(this,void 0,void 0,function(){var n;return I(this,function(t){switch(t.label){case 0:return(n=X.of(this._iid).cacheContext).localCacheEnabled&&n.nestdb?[4,n.nestdb.estimateUsage()]:[3,2];case 1:return[2,t.sent()];case 2:return[2,0]}})})},e.prototype.clearCachedData=function(){return A(this,void 0,void 0,function(){var n;return I(this,function(t){switch(t.label){case 0:return(n=X.of(this._iid).cacheContext).localCacheEnabled&&n.nestdb?[4,n.nestdb.clear()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this._storeInitialized?[4,n.preference.clear()]:[3,4];case 3:t.sent(),t.label=4;case 4:return[2]}})})},e.prototype.clearCachedMessages=function(n){return A(this,void 0,void 0,function(){var t,r,i=this;return I(this,function(a){switch(a.label){case 0:return Oe(Qt("string",n)).throw(ee.invalidParameters),t=Vu.of(this._iid),r=tc.of(this._iid),t&&r?[4,Promise.all(n.map(function(s){return A(i,void 0,void 0,function(){return I(this,function(o){switch(o.label){case 0:return[4,t.removeMessagesOfChannel(s)];case 1:return o.sent(),[4,r.removeMessagesOfChannel(s)];case 2:return o.sent(),[2]}})})}))]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},e.prototype._setupPreference=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s;return I(this,function(o){switch(o.label){case 0:return t=X.of(this._iid),r=t.sdkState,i=t.cacheContext,a=t.statManager,[4,i.preference.init(this._getPreferenceCacheKey(n),this._getPreferenceVersion())];case 1:return o.sent(),[4,i.preference.get(this._getUserProfileCacheKey(n))];case 2:return(s=o.sent())&&new dE(this._iid,s).apply(),[4,a.init("sendbird@".concat(r.appId,"/").concat(n,".statlog"))];case 3:return o.sent(),[2]}})})},e.prototype._ready=function(n,t,r){return r===void 0&&(r={}),A(this,void 0,void 0,function(){var i,a,s,o,l,u;return I(this,function(d){switch(d.label){case 0:return Oe(Z("string",n)&&Z("string",t,!0)).throw(ee.invalidParameters),i=X.of(this._iid),a=i.sdkState,s=i.cacheContext,o=i.connectionManager,l=r.errorForOtherUser,a.userId&&a.userId!==n?l?[3,2]:[4,o.logout()]:[3,3];case 1:return d.sent(),[3,3];case 2:throw l;case 3:return d.trys.push([3,5,,6]),[4,this.initializeCache(n)];case 4:return d.sent(),X.of(this._iid).dispatcher.dispatch(new IR),[3,6];case 5:return d.sent(),u=X.of(this._iid).logger,s.localCacheEnabled=!1,u.warn("Cache initialization failed - cache is not available."),[3,6];case 6:return[2]}})})},e.prototype.authenticateFeed=function(n,t){return A(this,void 0,void 0,function(){return I(this,function(r){switch(r.label){case 0:return[4,this.authenticate(n,t)];case 1:return[2,r.sent()]}})})},e.prototype.authenticate=function(n,t,r){var i;return r===void 0&&(r=jm.SESSION_TOKEN),A(this,void 0,void 0,function(){var a,s,o;return I(this,function(l){switch(l.label){case 0:return a=X.of(this._iid),s=a.sessionManager,o=a.connectionManager,[4,this._ready(n,t,{errorForOtherUser:o.isConnected?ee.alreadyConnectedAsAnotherUser:void 0})];case 1:return l.sent(),!((i=s.session.services)===null||i===void 0)&&i.includes($m.CHAT)?[3,3]:(s.handler||t&&r!==jm.ACCESS_TOKEN||this.setSessionHandler(new OM),[4,s.authenticate(n,t)]);case 2:l.sent(),l.label=3;case 3:return[2,this.currentUser]}})})},e.prototype.connect=function(n,t){return A(this,void 0,void 0,function(){return I(this,function(r){switch(r.label){case 0:return[4,this._ready(n,t)];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,,4,5]),[4,X.of(this._iid).connectionManager.connect(t)];case 3:return r.sent(),[3,5];case 4:return this._onlineDetector.start(),this._appStateChangeDetector.start(),[7];case 5:return[2,this.currentUser]}})})},e.prototype.reconnect=function(){var n=X.of(this._iid),t=n.connectionManager,r=n.sdkState,i=n.sessionManager.session.hasSession;return i&&(this._appStateChangeDetector.start(),this._onlineDetector.start(),t.resetAndReconnect().then(function(){r.appState="foreground"}).catch(function(){})),i},e.prototype.disconnect=function(){return A(this,void 0,void 0,function(){return I(this,function(n){switch(n.label){case 0:return[4,this._internalDisconnect()];case 1:return n.sent(),[2]}})})},e.prototype.disconnectWebSocket=function(){return A(this,void 0,void 0,function(){var n,t,r;return I(this,function(i){switch(i.label){case 0:return n=X.of(this._iid),t=n.connectionManager,r=n.requestQueue,this._appStateChangeDetector.stop(),this._onlineDetector.stop(),r.cancelAll(),[4,t.disconnectWebSocket(!0)];case 1:return i.sent(),[2]}})})},e.prototype.setBackgroundState=function(){var n=X.of(this._iid),t=n.connectionManager,r=n.sdkState,i=n.logger;r.appState==="foreground"&&(r.appState="background",i.debug("going background state"),t.background().catch(function(a){i.debug("setBackgroundState error = ",a)}))},e.prototype.setForegroundState=function(){var n=X.of(this._iid),t=n.connectionManager,r=n.sdkState,i=n.dispatcher,a=n.logger;r.appState==="background"&&(r.appState="foreground",a.debug("going foreground state"),t.resetAndReconnect().catch(function(s){a.debug("setForgroundState error = ",s)}),i.dispatch(new QM))},e.prototype.setSessionHandler=function(n){Oe(n instanceof OM).throw(ee.invalidParameters),X.of(this._iid).sessionManager.handler=n},e.prototype.addUserEventHandler=function(n,t){Oe(Z("string",n)&&t instanceof u6).throw(ee.invalidParameters),X.of(this._iid).userEventHandlers.set(n,t)},e.prototype.removeUserEventHandler=function(n){X.of(this._iid).userEventHandlers.delete(n)},e.prototype.removeAllUserEventHandler=function(){X.of(this._iid).userEventHandlers.clear()},e.prototype.addConnectionHandler=function(n,t){Oe(Z("string",n)&&t instanceof yR).throw(ee.invalidParameters),X.of(this._iid).connectionHandlers.set(n,t)},e.prototype.removeConnectionHandler=function(n){X.of(this._iid).connectionHandlers.delete(n)},e.prototype.removeAllConnectionHandler=function(){X.of(this._iid).connectionHandlers.clear()},e.prototype.createApplicationUserListQuery=function(n){return n===void 0&&(n={}),new h6(this._iid,n)},e.prototype.createBlockedUserListQuery=function(n){return n===void 0&&(n={}),new m6(this._iid,n)},e.prototype.createFriendListQuery=function(n){return n===void 0&&(n={}),new _6(this._iid,n)},e.prototype.createMessageSearchQuery=function(n){return new V6(this._iid,n)},e.prototype.createPollListQuery=function(n){return new K2(this._iid,Y({},n))},e.prototype.createPollVoterListQuery=function(n){return new W2(this._iid,Y({},n))},e.prototype.buildUserFromSerializedData=function(n){var t=ko(n);return new Yt(this._iid,Yt.payloadify(t))},e.prototype.updateCurrentUserInfo=function(n){return n===void 0&&(n={}),A(this,void 0,void 0,function(){var t,r,i,a,s,o,l;return I(this,function(u){switch(u.label){case 0:return t=Y(Y({},W5),n),Oe(function(d){return Vr(d.profileImage,!0)&&Z("string",d.profileUrl,!0)&&Z("string",d.nickname,!0)}(t)).throw(ee.invalidParameters),this.currentUser?(r=X.of(this._iid),i=r.sdkState,a=r.requestQueue,s=new ZM(Y({userId:i.userId},t)),[4,a.send(s)]):[3,2];case 1:return o=u.sent(),l=o.as(JM).user,this.currentUser&&(t.nickname&&(this.currentUser.nickname=l.nickname),(t.profileUrl||t.profileImage)&&(this.currentUser.plainProfileUrl=l.profileUrl)),[2,l];case 2:throw ee.connectionRequired}})})},e.prototype.updateCurrentUserInfoWithPreferredLanguages=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return I(this,function(l){switch(l.label){case 0:return Oe(Qt("string",n)).throw(ee.invalidParameters),this.currentUser?(t=X.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new ZM({userId:r.userId,preferredLanguages:n}),[4,i.send(a)]):[3,2];case 1:return s=l.sent(),o=s.as(JM).user,this.currentUser&&(this.currentUser.preferredLanguages=o.preferredLanguages),[2,o];case 2:throw ee.connectionRequired}})})},e.prototype.registerFCMPushTokenForCurrentUser=function(n,t){var r,i;return A(this,void 0,void 0,function(){var a,s,o,l,u,d,f=this;return I(this,function(m){switch(m.label){case 0:if(Oe(Z("string",n)&&Z("string",t==null?void 0:t.deviceManufacturer,!0)).throw(ee.invalidParameters),t!=null&&t.deviceOS&&Oe(Wt(Pl,t.deviceOS.platform,!0)&&Z("string",t.deviceOS.version,!0)).throw(ee.invalidParameters),!this.currentUser)return[3,6];a={deviceOS:"".concat(((r=t==null?void 0:t.deviceOS)===null||r===void 0?void 0:r.platform)||Pl.ANDROID,"-").concat(((i=t==null?void 0:t.deviceOS)===null||i===void 0?void 0:i.version)||"unknown"),deviceManufacturer:t==null?void 0:t.deviceManufacturer,systemPushEnabled:t==null?void 0:t.systemPushEnabled},m.label=1;case 1:return m.trys.push([1,4,,5]),s=X.of(this._iid),o=s.sessionManager,l=s.sdkState,u=s.requestQueue,o.hasDeviceToken(jr.FCM,n)?[2,Hi.SUCCESS]:(d=new t7({userId:l.userId,token:n,deviceOS:a.deviceOS,deviceManufacturer:a.deviceManufacturer,systemPushEnabled:a.systemPushEnabled}),[4,u.send(d)]);case 2:return m.sent(),[4,dr(function(){return A(f,void 0,void 0,function(){return I(this,function(p){switch(p.label){case 0:return o.setDeviceToken(jr.FCM,n,a),[4,o.saveDeviceToken()];case 1:return p.sent(),[2]}})})})];case 3:return m.sent(),this._fcmPushToken="",[2,Hi.SUCCESS];case 4:return m.sent(),[2,Hi.ERROR];case 5:return[3,7];case 6:return this._fcmPushToken=n,[2,Hi.PENDING];case 7:return[2]}})})},e.prototype.unregisterFCMPushTokenForCurrentUser=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l=this;return I(this,function(u){switch(u.label){case 0:if(Oe(Z("string",n)).throw(ee.invalidParameters),!this.currentUser)return[3,6];u.label=1;case 1:return u.trys.push([1,4,,5]),t=X.of(this._iid),r=t.sessionManager,i=t.sdkState,a=t.requestQueue,s=new r7({userId:i.userId,token:n}),[4,a.send(s)];case 2:return o=u.sent().lastDeletedAt,[4,dr(function(){return A(l,void 0,void 0,function(){return I(this,function(d){switch(d.label){case 0:return r.unsetDeviceToken(jr.FCM,n),r.setDeviceTokenDeletedAt(o),[4,r.saveDeviceToken()];case 1:return d.sent(),[2]}})})})];case 3:return u.sent(),this._fcmPushToken="",[2,Hi.SUCCESS];case 4:return u.sent(),[2,Hi.ERROR];case 5:return[3,7];case 6:return this._fcmPushToken=n,[2,Hi.PENDING];case 7:return[2]}})})},e.prototype.unregisterFCMPushTokenAllForCurrentUser=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a,s,o=this;return I(this,function(l){switch(l.label){case 0:return this.currentUser?(n=X.of(this._iid),t=n.sessionManager,r=n.sdkState,i=n.requestQueue,a=new a7({userId:r.userId}),[4,i.send(a)]):[3,3];case 1:return s=l.sent().lastDeletedAt,[4,dr(function(){return A(o,void 0,void 0,function(){return I(this,function(u){switch(u.label){case 0:return t.unsetDeviceTokens(jr.FCM),t.setDeviceTokenDeletedAt(s),[4,t.saveDeviceToken()];case 1:return u.sent(),[2]}})})})];case 2:l.sent(),l.label=3;case 3:return[2]}})})},e.prototype.registerAPNSPushTokenForCurrentUser=function(n,t){var r,i;return A(this,void 0,void 0,function(){var a,s,o,l,u,d,f=this;return I(this,function(m){switch(m.label){case 0:if(Oe(Z("string",n)&&Z("string",t==null?void 0:t.deviceManufacturer,!0)).throw(ee.invalidParameters),t!=null&&t.deviceOS&&Oe(Wt(Pl,t.deviceOS.platform,!0)&&Z("string",t.deviceOS.version,!0)).throw(ee.invalidParameters),!this.currentUser)return[3,6];a={deviceOS:"".concat(((r=t==null?void 0:t.deviceOS)===null||r===void 0?void 0:r.platform)||Pl.IOS,"-").concat(((i=t==null?void 0:t.deviceOS)===null||i===void 0?void 0:i.version)||"unknown"),deviceManufacturer:t==null?void 0:t.deviceManufacturer,systemPushEnabled:t==null?void 0:t.systemPushEnabled},m.label=1;case 1:return m.trys.push([1,4,,5]),s=X.of(this._iid),o=s.sessionManager,l=s.sdkState,u=s.requestQueue,o.hasDeviceToken(jr.APNS,n)?[2,Hi.SUCCESS]:(d=new e7({userId:l.userId,token:n,deviceOS:a.deviceOS,deviceManufacturer:a.deviceManufacturer,systemPushEnabled:a.systemPushEnabled}),[4,u.send(d)]);case 2:return m.sent(),[4,dr(function(){return A(f,void 0,void 0,function(){return I(this,function(p){switch(p.label){case 0:return o.setDeviceToken(jr.APNS,n,a),[4,o.saveDeviceToken()];case 1:return p.sent(),[2]}})})})];case 3:return m.sent(),this._apnsPushToken="",[2,Hi.SUCCESS];case 4:return m.sent(),[2,Hi.ERROR];case 5:return[3,7];case 6:return this._apnsPushToken=n,[2,Hi.PENDING];case 7:return[2]}})})},e.prototype.unregisterAPNSPushTokenForCurrentUser=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s,o,l=this;return I(this,function(u){switch(u.label){case 0:if(Oe(Z("string",n)).throw(ee.invalidParameters),!this.currentUser)return[3,6];u.label=1;case 1:return u.trys.push([1,4,,5]),t=X.of(this._iid),r=t.sessionManager,i=t.sdkState,a=t.requestQueue,s=new n7({userId:i.userId,token:n}),[4,a.send(s)];case 2:return o=u.sent().lastDeletedAt,[4,dr(function(){return A(l,void 0,void 0,function(){return I(this,function(d){switch(d.label){case 0:return r.unsetDeviceToken(jr.APNS,n),r.setDeviceTokenDeletedAt(o),[4,r.saveDeviceToken()];case 1:return d.sent(),[2]}})})})];case 3:return u.sent(),this._apnsPushToken="",[2,Hi.SUCCESS];case 4:return u.sent(),[2,Hi.ERROR];case 5:return[3,7];case 6:return this._apnsPushToken=n,[2,Hi.PENDING];case 7:return[2]}})})},e.prototype.unregisterAPNSPushTokenAllForCurrentUser=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a,s,o=this;return I(this,function(l){switch(l.label){case 0:return this.currentUser?(n=X.of(this._iid),t=n.sessionManager,r=n.sdkState,i=n.requestQueue,a=new i7({userId:r.userId}),[4,i.send(a)]):[3,3];case 1:return s=l.sent().lastDeletedAt,[4,dr(function(){return A(o,void 0,void 0,function(){return I(this,function(u){switch(u.label){case 0:return t.unsetDeviceTokens(jr.APNS),t.setDeviceTokenDeletedAt(s),[4,t.saveDeviceToken()];case 1:return u.sent(),[2]}})})})];case 2:l.sent(),l.label=3;case 3:return[2]}})})},e.prototype.markPushNotificationAsDelivered=function(n,t){var r;return t===void 0&&(t=!0),A(this,void 0,void 0,function(){var i,a,s,o,l,u,d,f,m,p,E,_,b,C,y,T,N,w,O;return I(this,function(L){switch(L.label){case 0:if(i=X.of(this._iid),a=i.logger,s=i.sessionManager,o=i.requestQueue,l=i.pushNotificationAckManager,a.debug("markPushNotificationAsDelivered:",n),u=hp.DELIVERED,d=l.parseData(n),f=d.pushTrackingId,m=d.sessionTopics,p=d.sessionKey,E=d.messageId,_=d.channelKey,b=d.templateKey,C=d.notificationEventDeadline,!p||!m.includes(ep.PUSH_ACKNOWLEDGEMENT))throw a.info("Can't use markPushNotificationAsDelivered() feature."),ee.malformedDataError;if(l.isAcked(f,u))return a.info("already delivered push notification:",f),[2];y=!!_,T=t&&y,N=(r=s.deviceTokens[0])===null||r===void 0?void 0:r.token,w=new eN({deviceToken:N??"",pushTrackingId:f,eventType:u,messageId:E,channelKey:_,templateKey:b,notificationEventDeadline:C,allowedPushNotification:T}),p&&(w.headers["Session-Key"]=p),L.label=1;case 1:return L.trys.push([1,3,,4]),[4,o.send(w)];case 2:return L.sent(),l.markAsAcked(f,u),[3,4];case 3:throw O=L.sent(),a.debug("failed to mark push notification as delivered. push tracking id: ".concat(f,". error: ").concat(O)),O;case 4:return[2]}})})},e.prototype.markPushNotificationAsClicked=function(n){var t;return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u,d,f,m,p,E,_,b,C,y,T;return I(this,function(N){switch(N.label){case 0:if(r=X.of(this._iid),i=r.logger,a=r.sessionManager,s=r.requestQueue,o=r.pushNotificationAckManager,i.debug("markPushNotificationAsClicked:",n),l=hp.CLICKED,u=o.parseData(n),d=u.pushTrackingId,f=u.sessionTopics,m=u.sessionKey,p=u.messageId,E=u.channelKey,_=u.templateKey,b=u.notificationEventDeadline,!m||!f.includes(ep.PUSH_ACKNOWLEDGEMENT))throw i.info("Can't use markPushNotificationAsClicked() feature."),ee.malformedDataError;if(o.isAcked(d,l))return i.info("already clicked push notification:",d),[2];C=(t=a.deviceTokens[0])===null||t===void 0?void 0:t.token,y=new eN({deviceToken:C??"",pushTrackingId:d,eventType:l,messageId:p,channelKey:E,templateKey:_,notificationEventDeadline:b}),m&&(y.headers["Session-Key"]=m),N.label=1;case 1:return N.trys.push([1,3,,4]),[4,s.send(y)];case 2:return N.sent(),o.markAsAcked(d,l),[3,4];case 3:throw T=N.sent(),i.debug("failed to mark push notification as clicked. push tracking id: ".concat(d,". error: ").concat(T)),T;case 4:return[2]}})})},e.prototype.getChannelInvitationPreference=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a;return I(this,function(s){switch(s.label){case 0:return n=X.of(this._iid),t=n.sdkState,r=n.requestQueue,i=new l7({userId:t.userId}),[4,r.send(i)];case 1:return a=s.sent(),[2,{autoAccept:a.as(u7).autoAccept}]}})})},e.prototype.setChannelInvitationPreference=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s;return I(this,function(o){switch(o.label){case 0:return Oe(Z("boolean",n)).throw(ee.invalidParameters),t=X.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new c7({userId:r.userId,willAutoAccept:n}),[4,i.send(a)];case 1:return s=o.sent(),[2,{autoAccept:s.as(d7).autoAccept}]}})})},e.prototype.getDoNotDisturb=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a;return I(this,function(s){switch(s.label){case 0:return n=X.of(this._iid),t=n.sdkState,r=n.requestQueue,i=new h7({userId:t.userId}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(f7).preference]}})})},e.prototype.setDoNotDisturb=function(n,t,r,i,a,s){return t===void 0&&(t=0),r===void 0&&(r=0),i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=""),A(this,void 0,void 0,function(){var o,l,u,d,f;return I(this,function(m){switch(m.label){case 0:return Oe(Z("boolean",n)&&Z("number",t)&&Z("number",r)&&Z("number",i)&&Z("number",a)&&Z("string",s)).throw(ee.invalidParameters),o=X.of(this._iid),l=o.sdkState,u=o.requestQueue,d=new v7({userId:l.userId,doNotDisturbOn:n,startHour:t,startMin:r,endHour:i,endMin:a,timezone:s}),[4,u.send(d)];case 1:return f=m.sent(),[2,f.as(m7).preference]}})})},e.prototype.getSnoozePeriod=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a;return I(this,function(s){switch(s.label){case 0:return n=X.of(this._iid),t=n.sdkState,r=n.requestQueue,i=new p7({userId:t.userId}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(g7).snoozePeriod]}})})},e.prototype.setSnoozePeriod=function(n,t,r){return t===void 0&&(t=0),r===void 0&&(r=0),A(this,void 0,void 0,function(){var i,a,s,o,l;return I(this,function(u){switch(u.label){case 0:return Oe(Z("boolean",n)&&Z("number",t)&&Z("number",r)).throw(ee.invalidParameters),i=X.of(this._iid),a=i.sdkState,s=i.requestQueue,o=new _7({userId:a.userId,snoozeOn:n,startTs:t,endTs:r}),[4,s.send(o)];case 1:return l=u.sent(),[2,l.as(E7).snoozePeriod]}})})},e.prototype.getMyPushTokensByToken=function(n,t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u,d,f,m,p,E;return I(this,function(_){switch(_.label){case 0:return Oe(Z("string",n)&&Wt(jr,t)).throw(ee.invalidParameters),r=X.of(this._iid),i=r.sdkState,a=r.requestQueue,s=r.sessionManager,o=new s7({userId:i.userId,type:t,token:n}),[4,a.send(o)];case 1:l=_.sent(),u=l.as(o7).pushTokens;try{for(d=Ge(u.deviceTokens),f=d.next();!f.done;f=d.next())m=f.value,s.setDeviceToken(u.type,m)}catch(b){p={error:b}}finally{try{f&&!f.done&&(E=d.return)&&E.call(d)}finally{if(p)throw p.error}}return[4,s.saveDeviceToken()];case 2:return _.sent(),[2,u]}})})},e.prototype.getPushTriggerOption=function(){return A(this,void 0,void 0,function(){var n,t,r,i;return I(this,function(a){switch(a.label){case 0:return n=X.of(this._iid),t=n.sdkState,r=n.requestQueue,i=new C7({userId:t.userId}),[4,r.send(i)];case 1:return[2,a.sent().as(S7).pushTriggerOption]}})})},e.prototype.setPushTriggerOption=function(n){return A(this,void 0,void 0,function(){var t,r,i,a;return I(this,function(s){switch(s.label){case 0:return Oe(Wt(xu,n)).throw(ee.invalidParameters),t=X.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new T7({userId:r.userId,pushTriggerOption:n}),[4,i.send(a)];case 1:return[2,s.sent().as(M7).pushTriggerOption]}})})},e.prototype.getPushTemplate=function(){return A(this,void 0,void 0,function(){var n,t,r,i;return I(this,function(a){switch(a.label){case 0:return n=X.of(this._iid),t=n.sdkState,r=n.requestQueue,i=new N7({userId:t.userId}),[4,r.send(i)];case 1:return[2,a.sent().as(I7).name]}})})},e.prototype.setPushTemplate=function(n){return A(this,void 0,void 0,function(){var t,r,i,a;return I(this,function(s){switch(s.label){case 0:return Oe(Wt(tE,n)).throw(ee.invalidParameters),t=X.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new A7({userId:r.userId,templateName:n}),[4,i.send(a)];case 1:return[2,s.sent().as(w7).name]}})})},e.prototype.blockUser=function(n){return A(this,void 0,void 0,function(){var t,r,i,a;return I(this,function(s){switch(s.label){case 0:return Oe(n instanceof Yt||Z("string",n)).throw(ee.invalidParameters),t=X.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new y7({userId:r.userId,blockedUserId:n instanceof Yt?n.userId:n}),[4,i.send(a)];case 1:return s.sent(),[2]}})})},e.prototype.blockUserWithUserId=function(n){return A(this,void 0,void 0,function(){return I(this,function(t){return[2,this.blockUser(n)]})})},e.prototype.unblockUser=function(n){return A(this,void 0,void 0,function(){var t,r,i,a;return I(this,function(s){switch(s.label){case 0:return Oe(n instanceof Yt||Z("string",n)).throw(ee.invalidParameters),t=X.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new b7({userId:r.userId,unblockedUserId:n instanceof Yt?n.userId:n}),[4,i.send(a)];case 1:return s.sent(),[2]}})})},e.prototype.unblockUserWithUserId=function(n){return A(this,void 0,void 0,function(){return I(this,function(t){return[2,this.unblockUser(n)]})})},e.prototype.getFriendChangeLogsByToken=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s;return I(this,function(o){switch(o.label){case 0:return Oe(Z("string",n)).throw(ee.invalidParameters),t=X.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new R7({userId:r.userId,token:n}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(O7).changelogs]}})})},e.prototype.getAllowFriendDiscovery=function(){return A(this,void 0,void 0,function(){var n,t,r,i,a;return I(this,function(s){switch(s.label){case 0:return n=X.of(this._iid),t=n.sdkState,r=n.requestQueue,i=new F7({userId:t.userId}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(B7).allowFriendDiscovery]}})})},e.prototype.setAllowFriendDiscovery=function(n){return A(this,void 0,void 0,function(){var t,r,i,a;return I(this,function(s){switch(s.label){case 0:return Oe(Z("boolean",n)).throw(ee.invalidParameters),t=X.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new H7({userId:r.userId,allowFriendDiscovery:n}),[4,i.send(a)];case 1:return s.sent(),[2,n]}})})},e.prototype.uploadFriendDiscoveries=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s;return I(this,function(o){switch(o.label){case 0:return t=X.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new L7({userId:r.userId,discoveries:n}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(U7).friendDiscoveryRequestId]}})})},e.prototype.deleteFriendDiscovery=function(n){return A(this,void 0,void 0,function(){return I(this,function(t){return[2,this.deleteFriendDiscoveries([n])]})})},e.prototype.deleteFriendDiscoveries=function(n){return A(this,void 0,void 0,function(){var t,r,i,a;return I(this,function(s){switch(s.label){case 0:return Oe(Qt("string",n)).throw(ee.invalidParameters),t=X.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new D7({userId:r.userId,discoveryKeys:n}),[4,i.send(a)];case 1:return s.sent(),[2]}})})},e.prototype.addFriends=function(n){return A(this,void 0,void 0,function(){var t,r,i,a,s;return I(this,function(o){switch(o.label){case 0:return Oe(Qt("string",n)).throw(ee.invalidParameters),t=X.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new k7({userId:r.userId,userIds:n}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(P7).users]}})})},e.prototype.deleteFriend=function(n){return A(this,void 0,void 0,function(){return I(this,function(t){return[2,this.deleteFriends([n])]})})},e.prototype.deleteFriends=function(n){return A(this,void 0,void 0,function(){var t,r,i,a;return I(this,function(s){switch(s.label){case 0:return Oe(Qt("string",n)).throw(ee.invalidParameters),t=X.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new x7({userId:r.userId,userIds:n}),[4,i.send(a)];case 1:return s.sent(),[2]}})})},e.prototype.getAllEmoji=function(){return A(this,void 0,void 0,function(){var n,t,r;return I(this,function(i){switch(i.label){case 0:return n=X.of(this._iid).requestQueue,t=new G7,[4,n.send(t)];case 1:return r=i.sent(),[2,r.as(z7).emojiContainer]}})})},e.prototype.getEmojiCategory=function(n){return A(this,void 0,void 0,function(){var t,r,i;return I(this,function(a){switch(a.label){case 0:return t=X.of(this._iid).requestQueue,r=new j7({categoryId:n}),[4,t.send(r)];case 1:return i=a.sent(),[2,i.as(V7).emojiCategory]}})})},e.prototype.getEmoji=function(n){return A(this,void 0,void 0,function(){var t,r,i;return I(this,function(a){switch(a.label){case 0:return t=X.of(this._iid).requestQueue,r=new $7({key:n}),[4,t.send(r)];case 1:return i=a.sent(),[2,i.as(q7).emoji]}})})},e.prototype.getUIKitConfiguration=function(){return A(this,void 0,void 0,function(){var n,t,r,i;return I(this,function(a){switch(a.label){case 0:return n=X.of(this._iid),Oe(n.hasExtension("sb_uikit")).throw(ee.notSupportedError),t=n.requestQueue,r=new K7,[4,t.send(r)];case 1:return i=a.sent(),[2,i.as(W7).uikitConfiguration]}})})},e.prototype.getReportCategoryInfoList=function(){return A(this,void 0,void 0,function(){return I(this,function(n){switch(n.label){case 0:return[4,X.of(this._iid).reportCategoryManager.categories()];case 1:return[2,n.sent()]}})})},e}();function Y7(e,n){return!e||!n?!0:e.url!==n.url}function as(e){return e!=null&&"sendingStatus"in e}function WR(e,n="##__USER_ID_IS_NOT_PROVIDED__##"){var t;return as(e)?((t=e.sender)===null||t===void 0?void 0:t.userId)===n:!1}function X7(e,n){return WR(e,n)||e.isAdminMessage()?!1:e.updatedAt===0}function tN(e){return"sendingStatus"in e?e.sendingStatus==="succeeded"?String(e.messageId):e.reqId:String(e.messageId)}function Cn(e){return typeof e=="boolean"}function $c(e,n){return n.includes(e)}function Z7(e){return e instanceof Set}function nN(e){return!e||!Array.isArray(e)?!1:e.length!==0}function J7(e,n){return Object.prototype.toString.call(e)===Object.prototype.toString.call(n)}const eB=()=>{const[,e]=M.useState(0);return M.useCallback(()=>e(n=>n+1),[])};function AE(e){if(typeof e!="object"||e===null)return e;if(Array.isArray(e))return e.map(t=>AE(t));const n={};return Object.keys(e).forEach(t=>{const r=t.replace(/_\w/g,i=>i[1].toUpperCase());n[r]=AE(e[t])}),n}function rN(e,n){return e.reduce((t,r)=>{const i=n(r);return t[i]=r,t},{})}var tB=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]]);return t};const nB=(e,n)=>{var t=tB(e,[]);switch(n.type){case"update_initialized":return t.initialized=n.value.status,t;case"update_refreshing":return t.refreshing=n.value.status,t;case"update_loading":return t.loading=n.value.status,t;case"update_messages":{if(n.value.clearBeforeAction)t.messageMap=rB(n.value.messages);else{const r=Object.assign({},t.messageMap),i=[],a=[];n.value.messages.forEach(s=>{const o=as(s)?s.reqId:void 0,l=s.messageId||void 0;[o,l].forEach(u=>{if(!u)return;const d=r[u];iB(d,s)&&(d&&i.push(d),a.push(s))})}),i.forEach(s=>{as(s)&&delete r[s.reqId],delete r[s.messageId]}),a.forEach(s=>{as(s)&&(r[s.reqId]=s),r[s.messageId]=s}),t.messageMap=r}return t}case"update_new_messages":{const r=n.value.currentUserId,i=n.value.messages.filter(a=>X7(a,r));return n.value.clearBeforeAction?t.newMessageMap=rN(i,tN):(i.map(s=>s.messageId).forEach(s=>delete t.newMessageMap[s]),t.newMessageMap=Object.assign(Object.assign({},t.newMessageMap),rN(i,tN))),t}case"delete_messages":case"delete_new_messages":{const r=n.type==="delete_messages"?"messageMap":"newMessageMap";return t[r]=Object.assign({},t[r]),n.value.messageIds.forEach(i=>{const a=t[r][i];a&&(as(a)&&delete t[r][a.reqId],delete t[r][a.messageId])}),n.value.reqIds.forEach(i=>{const a=t[r][i];a&&(as(a)&&delete t[r][a.reqId],delete t[r][a.messageId])}),t}}},rB=e=>e.reduce((n,t)=>(as(t)?(n[t.reqId]=t,t.sendingStatus===gn.SUCCEEDED&&(n[t.messageId]=t)):n[t.messageId]=t,n),{}),iB=(e,n)=>!as(e)||!as(n)?!0:e.sendingStatus===gn.SUCCEEDED?n.sendingStatus===gn.SUCCEEDED:e.sendingStatus!==n.sendingStatus,aB=(e=sB)=>{const[{initialized:n,loading:t,refreshing:r,messageMap:i,newMessageMap:a},s]=M.useReducer(nB,{initialized:!1,loading:!0,refreshing:!1,messageMap:{},newMessageMap:{}}),o=(b,C,y)=>{s({type:"update_messages",value:{messages:b,clearBeforeAction:C,currentUserId:y}})},l=(b,C)=>{s({type:"delete_messages",value:{messageIds:b,reqIds:C}})},u=(b,C,y)=>{s({type:"update_new_messages",value:{messages:b,clearBeforeAction:C,currentUserId:y}})},d=(b,C)=>{s({type:"delete_new_messages",value:{messageIds:b,reqIds:C}})},f=b=>{s({type:"update_initialized",value:{status:b}})},m=b=>{s({type:"update_loading",value:{status:b}})},p=b=>{s({type:"update_refreshing",value:{status:b}})},E=Object.values(a),_=M.useMemo(()=>Array.from(new Set(Object.values(i))).sort(e),[i]);return{updateInitialized:f,updateLoading:m,updateRefreshing:p,updateMessages:o,deleteMessages:l,initialized:n,loading:t,refreshing:r,messages:_,newMessages:E,updateNewMessages:u,deleteNewMessages:d}},iN=Math.floor(Number.MAX_SAFE_INTEGER/10);function sB(e,n){let t=0,r=0;return as(e)&&e.sendingStatus!=="succeeded"&&(t=iN),as(n)&&n.sendingStatus!=="succeeded"&&(r=iN),e.createdAt+t-(n.createdAt+r)}var Ss=function(e,n,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(d){try{u(r.next(d))}catch(f){s(f)}}function l(d){try{u(r.throw(d))}catch(f){s(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,l)}u((r=r.apply(e,n||[])).next())})};const oB=(e,n,t)=>{var r;const i={prevResultLimit:n.prev,nextResultLimit:n.next,startingPoint:t==null?void 0:t.startingPoint,replyType:t==null?void 0:t.replyType},a=(r=t==null?void 0:t.collectionCreator)===null||r===void 0?void 0:r.call(t,i);return a||e.createMessageCollection(Object.assign(Object.assign({},i),{filter:new to(i)}))};function aN(e){return e<Date.now()?Qu.collection.message.searchLimit:Qu.collection.message.defaultLimit}const lB=(e,n,t={})=>{var r,i,a;const s=M.useRef(t);s.current=t;const o=M.useRef(n);o.current=n;const l=s.current.logger,u=(r=s.current.startingPoint)!==null&&r!==void 0?r:Number.MAX_SAFE_INTEGER,d=aN(u),f=M.useRef({prev:!1,next:!1}),m=eB(),p=M.useRef({initialized:!1,apiInitialized:!1,instance:null}),{initialized:E,loading:_,refreshing:b,messages:C,newMessages:y,updateMessages:T,updateNewMessages:N,deleteNewMessages:w,deleteMessages:O,updateInitialized:L,updateLoading:P,updateRefreshing:U}=aB(t==null?void 0:t.sortComparator),B=mr(oe=>{var he,me,Be,pe;if(!o.current||!o.current.url)return(he=l==null?void 0:l.error)===null||he===void 0?void 0:he.call(l,"[useGroupChannelMessages] channel is required");try{switch(oe){case fe.EVENT_MESSAGE_RECEIVED:case fe.EVENT_MESSAGE_SENT_SUCCESS:case fe.SYNC_MESSAGE_FILL:case void 0:(Be=(me=s.current).markAsRead)===null||Be===void 0||Be.call(me,[o.current]);break}}catch(ye){(pe=l==null?void 0:l.warn)===null||pe===void 0||pe.call(l,"[useGroupChannelMessages/markAsReadBySource]",ye)}}),F=mr((oe,he)=>{var me,Be,pe,ye,Ee;const Ue=he.filter(Ye=>{var De;return!WR(Ye,(De=e.currentUser)===null||De===void 0?void 0:De.userId)});if(Ue.length>0)switch(oe){case fe.EVENT_MESSAGE_RECEIVED:case fe.SYNC_MESSAGE_FILL:{!((Be=(me=s.current).shouldCountNewMessages)===null||Be===void 0)&&Be.call(me)&&N(Ue,!1,(pe=e.currentUser)===null||pe===void 0?void 0:pe.userId),(Ee=(ye=s.current).onMessagesReceived)===null||Ee===void 0||Ee.call(ye,Ue);break}}}),H=mr((oe,he)=>Ss(void 0,void 0,void 0,function*(){return new Promise(me=>{var Be,pe;if(!o.current||!o.current.url)return(Be=l==null?void 0:l.error)===null||Be===void 0?void 0:Be.call(l,"[useGroupChannelMessages] channel is required");p.current.instance&&p.current.instance.dispose(),B(),N([],!0,(pe=e.currentUser)===null||pe===void 0?void 0:pe.userId);const ye=()=>{var Ue,Ye,De;const{pendingMessages:We,failedMessages:Je}=(Ue=p.current.instance)!==null&&Ue!==void 0?Ue:{};nN(We)&&T(We,!1,(Ye=e.currentUser)===null||Ye===void 0?void 0:Ye.userId),nN(Je)&&T(Je,!1,(De=e.currentUser)===null||De===void 0?void 0:De.userId)},Ee=oB(o.current,he,Object.assign(Object.assign({},s.current),{startingPoint:oe}));p.current={apiInitialized:!1,initialized:!1,instance:Ee},Ee.setMessageCollectionHandler({onMessagesAdded:(Ue,Ye,De)=>{var We;B(Ue.source),F(Ue.source,De),T(De,!1,(We=e.currentUser)===null||We===void 0?void 0:We.userId)},onMessagesUpdated:(Ue,Ye,De)=>{var We,Je,Le;B(Ue.source),F(Ue.source,De),T(De,!1,(We=e.currentUser)===null||We===void 0?void 0:We.userId),Ue.source===fe.EVENT_MESSAGE_UPDATED&&((Le=(Je=s.current).onMessagesUpdated)===null||Le===void 0||Le.call(Je,De))},onMessagesDeleted:(Ue,Ye,De,We)=>{const Je=We.map(He=>He.messageId),Le=We.filter(as).map(He=>He.reqId);O(Je,Le),w(Je,Le)},onChannelDeleted:(Ue,Ye)=>{var De,We;(We=(De=s.current).onChannelDeleted)===null||We===void 0||We.call(De,Ye)},onChannelUpdated:(Ue,Ye)=>{var De,We;m(),(We=(De=s.current).onChannelUpdated)===null||We===void 0||We.call(De,Ye)},onHugeGapDetected:()=>{H(Number.MAX_SAFE_INTEGER,Qu.collection.message.defaultLimit)}}),Ee.initialize(dp.CACHE_AND_REPLACE_BY_API).onCacheResult((Ue,Ye)=>{var De,We,Je;Ue?e.isCacheEnabled&&((De=l==null?void 0:l.error)===null||De===void 0||De.call(l,"[useGroupChannelMessages/onCacheResult]",Ue)):Ye&&((We=l==null?void 0:l.debug)===null||We===void 0||We.call(l,"[useGroupChannelMessages/onCacheResult]","message length:",Ye.length),T(Ye,!0,(Je=e.currentUser)===null||Je===void 0?void 0:Je.userId),ye(),Ye.length>0&&(p.current.initialized=!0,me()))}).onApiResult((Ue,Ye)=>{var De,We,Je,Le,He;Ue?(De=l==null?void 0:l.warn)===null||De===void 0||De.call(l,"[useGroupChannelMessages/onApiResult]",Ue):Ye&&((We=l==null?void 0:l.debug)===null||We===void 0||We.call(l,"[useGroupChannelMessages/onApiResult]","message length:",Ye.length),T(Ye,!0,(Je=e.currentUser)===null||Je===void 0?void 0:Je.userId),s.current.startingPoint||(He=(Le=s.current).onMessagesReceived)===null||He===void 0||He.call(Le,Ye),e.isCacheEnabled&&ye()),p.current.initialized=!0,p.current.apiInitialized=!0,me()})})}));jp(e,{onUserBanned(oe,he){var me,Be,pe;oe.isGroupChannel()&&!Y7(oe,o.current)&&(he.userId===((me=e.currentUser)===null||me===void 0?void 0:me.userId)?(pe=(Be=s.current).onCurrentUserBanned)===null||pe===void 0||pe.call(Be):m())}}),M.useLayoutEffect(()=>{const oe=setTimeout(()=>Ss(void 0,void 0,void 0,function*(){e.currentUser&&o.current&&(L(!1),P(!0),yield H(u,d),P(!1),L(!0))}));return()=>clearTimeout(oe)},[e,(i=e.currentUser)===null||i===void 0?void 0:i.userId,(a=o.current)===null||a===void 0?void 0:a.url,s.current.replyType]),M.useEffect(()=>()=>{p.current.instance&&p.current.instance.dispose()},[]);const G=mr(()=>Ss(void 0,void 0,void 0,function*(){e.currentUser&&o.current&&(U(!0),yield H(Number.MAX_SAFE_INTEGER,Qu.collection.message.defaultLimit),U(!1))})),j=mr(()=>Ss(void 0,void 0,void 0,function*(){var oe;const he=p.current.instance;if(he!=null&&he.hasPrevious&&!f.current.prev)try{f.current.prev=!0;const me=yield he.loadPrevious();T(me,!1,(oe=e.currentUser)===null||oe===void 0?void 0:oe.userId)}catch{}finally{f.current.prev=!1}})),x=mr(()=>{const{initialized:oe,instance:he}=p.current;return oe&&he?he.hasPrevious:!1}),V=mr(()=>Ss(void 0,void 0,void 0,function*(){var oe;const he=p.current.instance;if(he!=null&&he.hasNext&&!f.current.next)try{f.current.next=!0;const me=yield he.loadNext();T(me,!1,(oe=e.currentUser)===null||oe===void 0?void 0:oe.userId)}catch{}finally{f.current.next=!1}})),K=mr(()=>{const{initialized:oe,apiInitialized:he,instance:me}=p.current;return he&&oe&&me?me.hasNext:!1}),W=mr((oe,he)=>{var me;if(!o.current||!o.current.url)throw(me=l==null?void 0:l.error)===null||me===void 0||me.call(l,"[useGroupChannelMessages] channel is required"),new Error("Channel is required");return new Promise((Be,pe)=>{o.current.sendUserMessage(oe).onPending(ye=>{var Ee;ye.channelUrl===o.current.url&&T([ye],!1,(Ee=e.currentUser)===null||Ee===void 0?void 0:Ee.userId),he==null||he(ye)}).onSucceeded(ye=>{var Ee;ye.channelUrl===o.current.url&&T([ye],!1,(Ee=e.currentUser)===null||Ee===void 0?void 0:Ee.userId),Be(ye)}).onFailed((ye,Ee)=>{var Ue;Ee&&Ee.channelUrl===o.current.url&&T([Ee],!1,(Ue=e.currentUser)===null||Ue===void 0?void 0:Ue.userId),pe(ye)})})}),Q=mr((oe,he)=>{var me;if(!o.current||!o.current.url)throw(me=l==null?void 0:l.error)===null||me===void 0||me.call(l,"[useGroupChannelMessages] channel is required"),new Error("Channel is required");return new Promise((Be,pe)=>{o.current.sendFileMessage(oe).onPending(ye=>{var Ee;ye.channelUrl===o.current.url&&T([ye],!1,(Ee=e.currentUser)===null||Ee===void 0?void 0:Ee.userId),he==null||he(ye)}).onSucceeded(ye=>{var Ee;ye.channelUrl===o.current.url&&T([ye],!1,(Ee=e.currentUser)===null||Ee===void 0?void 0:Ee.userId),Be(ye)}).onFailed((ye,Ee)=>{var Ue;Ee&&Ee.channelUrl===o.current.url&&T([Ee],!1,(Ue=e.currentUser)===null||Ue===void 0?void 0:Ue.userId),pe(ye)})})}),J=mr((oe,he)=>Ss(void 0,void 0,void 0,function*(){var me;if(!o.current||!o.current.url)throw(me=l==null?void 0:l.error)===null||me===void 0||me.call(l,"[useGroupChannelMessages] channel is required"),new Error("Channel is required");return new Promise(Be=>{const pe=[];o.current.sendFileMessages(oe).onPending(ye=>{var Ee;ye.channelUrl===o.current.url&&T([ye],!1,(Ee=e.currentUser)===null||Ee===void 0?void 0:Ee.userId),he==null||he(ye)}).onSucceeded(ye=>{var Ee;ye.isFileMessage()&&ye.channelUrl===o.current.url&&(T([ye],!1,(Ee=e.currentUser)===null||Ee===void 0?void 0:Ee.userId),pe.push(ye)),pe.length===oe.length&&Be(pe)}).onFailed((ye,Ee)=>{var Ue;Ee&&Ee.channelUrl===o.current.url?(T([Ee],!1,(Ue=e.currentUser)===null||Ue===void 0?void 0:Ue.userId),pe.push(Ee)):pe.push(null),pe.length===oe.length&&Be(pe)})})})),$=mr((oe,he)=>{var me;if(!o.current||!o.current.url)throw(me=l==null?void 0:l.error)===null||me===void 0||me.call(l,"[useGroupChannelMessages] channel is required"),new Error("Channel is required");return new Promise((Be,pe)=>{o.current.sendMultipleFilesMessage(oe).onPending(ye=>{var Ee;ye.channelUrl===o.current.url&&T([ye],!1,(Ee=e.currentUser)===null||Ee===void 0?void 0:Ee.userId),he==null||he(ye)}).onFileUploaded(()=>{m()}).onSucceeded(ye=>{var Ee;ye.channelUrl===o.current.url&&T([ye],!1,(Ee=e.currentUser)===null||Ee===void 0?void 0:Ee.userId),Be(ye)}).onFailed((ye,Ee)=>{var Ue;Ee&&Ee.channelUrl===o.current.url&&T([Ee],!1,(Ue=e.currentUser)===null||Ue===void 0?void 0:Ue.userId),pe(ye)})})}),te=mr((oe,he)=>Ss(void 0,void 0,void 0,function*(){var me,Be;if(!o.current||!o.current.url)throw(me=l==null?void 0:l.error)===null||me===void 0||me.call(l,"[useGroupChannelMessages] channel is required"),new Error("Channel is required");const pe=yield o.current.updateUserMessage(oe,he);return pe.channelUrl===o.current.url&&T([pe],!1,(Be=e.currentUser)===null||Be===void 0?void 0:Be.userId),pe})),re=mr((oe,he)=>Ss(void 0,void 0,void 0,function*(){var me,Be;if(!o.current||!o.current.url)throw(me=l==null?void 0:l.error)===null||me===void 0||me.call(l,"[useGroupChannelMessages] channel is required"),new Error("Channel is required");const pe=yield o.current.updateFileMessage(oe,he);return pe.channelUrl===o.current.url&&T([pe],!1,(Be=e.currentUser)===null||Be===void 0?void 0:Be.userId),pe})),ve=mr(oe=>Ss(void 0,void 0,void 0,function*(){var he;if(!o.current||!o.current.url)throw(he=l==null?void 0:l.error)===null||he===void 0||he.call(l,"[useGroupChannelMessages] channel is required"),new Error("Channel is required");return new Promise((me,Be)=>{let pe;oe.isUserMessage()&&(pe=o.current.resendMessage(oe)),oe.isFileMessage()&&(pe=o.current.resendMessage(oe)),oe.isMultipleFilesMessage()&&(pe=o.current.resendMessage(oe)),pe&&("onPending"in pe&&pe.onPending(ye=>{var Ee;ye.channelUrl===o.current.url&&T([ye],!1,(Ee=e.currentUser)===null||Ee===void 0?void 0:Ee.userId)}),"onFileUploaded"in pe&&pe.onFileUploaded(()=>{m()}),"onSucceeded"in pe&&pe.onSucceeded(ye=>{var Ee;ye.channelUrl===o.current.url&&T([ye],!1,(Ee=e.currentUser)===null||Ee===void 0?void 0:Ee.userId),me(ye)}),"onFailed"in pe&&pe.onFailed((ye,Ee)=>{var Ue;Ee&&Ee.channelUrl===o.current.url&&T([Ee],!1,(Ue=e.currentUser)===null||Ue===void 0?void 0:Ue.userId),Be(ye)}))})})),ie=mr(oe=>Ss(void 0,void 0,void 0,function*(){var he,me;if(!o.current||!o.current.url)throw(he=l==null?void 0:l.error)===null||he===void 0||he.call(l,"[useGroupChannelMessages] channel is required"),new Error("Channel is required");if(oe.sendingStatus==="succeeded")oe.isUserMessage()&&(yield o.current.deleteMessage(oe)),oe.isFileMessage()&&(yield o.current.deleteMessage(oe)),oe.isMultipleFilesMessage()&&(yield o.current.deleteMessage(oe));else try{yield(me=p.current.instance)===null||me===void 0?void 0:me.removeFailedMessage(oe.reqId)}finally{O([oe.messageId],[oe.reqId])}})),le=mr(()=>{var oe;N([],!0,(oe=e.currentUser)===null||oe===void 0?void 0:oe.userId)}),Ae=mr(oe=>Ss(void 0,void 0,void 0,function*(){var he;if(e.currentUser&&o.current){const me=aN(oe);P(!0),T([],!0,(he=e.currentUser)===null||he===void 0?void 0:he.userId),yield H(oe,me),P(!1)}}));return{initialized:E,loading:_,refreshing:b,messages:C,newMessages:y,resetNewMessages:le,refresh:G,loadPrevious:j,hasPrevious:x,loadNext:V,hasNext:K,sendUserMessage:W,sendFileMessage:Q,sendFileMessages:J,sendMultipleFilesMessage:$,updateUserMessage:te,updateFileMessage:re,resendMessage:ve,deleteMessage:ie,resetWithStartingPoint:Ae,_dangerous_reducer_updateMessages:T,_dangerous_reducer_deleteMessages:O}},QR=e=>uB(e),uB=e=>typeof e=="function"&&e();function YR(e,n){const t=Object.assign({},e);return Object.keys(n).forEach(r=>{Object.prototype.hasOwnProperty.call(t,r)&&J7(t[r],n[r])&&(typeof n[r]=="object"&&!Array.isArray(n[r])?t[r]=YR(t[r],n[r]):t[r]=n[r])}),t}const xb=()=>({common:{enableUsingDefaultUserProfile:!1},groupChannel:{channel:{enableMention:!1,enableOgtag:!0,enableReactions:!0,enableReactionsSupergroup:!1,enableTypingIndicator:!0,enableVoiceMessage:!1,input:{camera:{enablePhoto:!0,enableVideo:!0},enableDocument:!0,gallery:{enablePhoto:!0,enableVideo:!0}},replyType:"quote_reply",threadReplySelectType:"thread",typingIndicatorTypes:new Set(["text"]),enableFeedback:!1,enableSuggestedReplies:!1,showSuggestedRepliesFor:"last_message_only",suggestedRepliesDirection:"vertical",enableMarkdownForUserMessage:!1,enableFormTypeMessage:!1},channelList:{enableMessageReceiptStatus:!1,enableTypingIndicator:!1},setting:{enableMessageSearch:!1}},openChannel:{channel:{enableOgtag:!0,input:{camera:{enablePhoto:!0,enableVideo:!0},enableDocument:!0,gallery:{enablePhoto:!0,enableVideo:!0}}}}});function cB(e){return delete e.groupChannel.channel.typingIndicatorTypes,delete e.groupChannel.channel.enableFeedback,delete e.groupChannel.channel.enableSuggestedReplies,delete e.groupChannel.channel.showSuggestedRepliesFor,delete e.groupChannel.channel.suggestedRepliesDirection,delete e.groupChannel.channel.enableMarkdownForUserMessage,delete e.groupChannel.channel.enableFormTypeMessage,e}const XR=()=>{const e=xb();return cB(e)},sN=xb(),dB=XR();var fp=function(e,n,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(d){try{u(r.next(d))}catch(f){s(f)}}function l(d){try{u(r.throw(d))}catch(f){s(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,l)}u((r=r.apply(e,n||[])).next())})};const wE={items:{},getItem(e){var n;return fp(this,void 0,void 0,function*(){return(n=wE.items[e])!==null&&n!==void 0?n:null})},setItem(e,n){return fp(this,void 0,void 0,function*(){wE.items[e]=n})}};class hB{constructor(n){this.storage=n??wE}init(n){return this.key=`sbu@${n}.uikitConfiguration`,this.get()}get safeKey(){if(!this.key)throw new Error("Please UIKitConfigManager.init() first");return this.key}update(n){return fp(this,void 0,void 0,function*(){const t=yield this.get(),r={updatedAt:n.updatedAt,configuration:YR(t.configuration,n.configuration)};return yield this.storage.setItem(this.safeKey,JSON.stringify(r)),r})}get(){return fp(this,void 0,void 0,function*(){const n={updatedAt:0,configuration:dB};try{const t=yield this.storage.getItem(this.safeKey);return t?JSON.parse(t):n}catch{return n}})}}function fB(e,n,t){var r,i;t.common&&Cn((r=t.common)===null||r===void 0?void 0:r.enableUsingDefaultUserProfile)&&(e.enableUsingDefaultUserProfile=t.common.enableUsingDefaultUserProfile),n.common&&Cn((i=n.common)===null||i===void 0?void 0:i.enableUsingDefaultUserProfile)&&(e.enableUsingDefaultUserProfile=n.common.enableUsingDefaultUserProfile)}function vB(e,n,t){mB(e,n,t),pB(e,n,t),gB(e,n,t),_B(e,n,t)}function mB(e,n,t){var r,i,a,s,o,l,u,d,f,m,p,E,_,b,C,y,T,N,w,O,L,P,U,B,F,H,G,j,x,V,K,W,Q,J,$,te,re,ve,ie,le,Ae,oe,he,me,Be,pe,ye,Ee,Ue,Ye,De,We,Je,Le,He,At,Ve,st,mt,et,St,Rt,xe,Ht,Xt,Ke,Ct,Dt,Vt,rn,Zt,Mn,cn,ht,ct,dt,ke,ge,Xe,Et,Pt,Jt,Tt,vn,Sn,pt,Mt,dn,In,Ze,ot,Fe,Ot,Lt,$t,an,Nn,xn,tt,ae,je,gt,sn,bn,qt,Fn,sr,Pn,bt,un,mn;!((r=t.groupChannel)===null||r===void 0)&&r.channel&&Cn((a=(i=t.groupChannel)===null||i===void 0?void 0:i.channel)===null||a===void 0?void 0:a.enableOgtag)&&(e.channel.enableOgtag=t.groupChannel.channel.enableOgtag),!((s=n.groupChannel)===null||s===void 0)&&s.channel&&Cn((l=(o=n.groupChannel)===null||o===void 0?void 0:o.channel)===null||l===void 0?void 0:l.enableOgtag)&&(e.channel.enableOgtag=(d=(u=n.groupChannel)===null||u===void 0?void 0:u.channel)===null||d===void 0?void 0:d.enableOgtag),!((f=t.groupChannel)===null||f===void 0)&&f.channel&&Cn((p=(m=t.groupChannel)===null||m===void 0?void 0:m.channel)===null||p===void 0?void 0:p.enableTypingIndicator)&&(e.channel.enableTypingIndicator=(_=(E=t.groupChannel)===null||E===void 0?void 0:E.channel)===null||_===void 0?void 0:_.enableTypingIndicator),!((b=n.groupChannel)===null||b===void 0)&&b.channel&&Cn((y=(C=n.groupChannel)===null||C===void 0?void 0:C.channel)===null||y===void 0?void 0:y.enableTypingIndicator)&&(e.channel.enableTypingIndicator=(N=(T=n.groupChannel)===null||T===void 0?void 0:T.channel)===null||N===void 0?void 0:N.enableTypingIndicator),!((w=t.groupChannel)===null||w===void 0)&&w.channel&&Cn((L=(O=t.groupChannel)===null||O===void 0?void 0:O.channel)===null||L===void 0?void 0:L.enableReactions)&&(e.channel.enableReactions=(U=(P=t.groupChannel)===null||P===void 0?void 0:P.channel)===null||U===void 0?void 0:U.enableReactions),!((B=n.groupChannel)===null||B===void 0)&&B.channel&&Cn((H=(F=n.groupChannel)===null||F===void 0?void 0:F.channel)===null||H===void 0?void 0:H.enableReactions)&&(e.channel.enableReactions=(j=(G=n.groupChannel)===null||G===void 0?void 0:G.channel)===null||j===void 0?void 0:j.enableReactions),!((x=t.groupChannel)===null||x===void 0)&&x.channel&&Cn((K=(V=t.groupChannel)===null||V===void 0?void 0:V.channel)===null||K===void 0?void 0:K.enableReactionsSupergroup)&&(e.channel.enableReactionsSupergroup=(Q=(W=t.groupChannel)===null||W===void 0?void 0:W.channel)===null||Q===void 0?void 0:Q.enableReactionsSupergroup),!((J=n.groupChannel)===null||J===void 0)&&J.channel&&Cn((te=($=n.groupChannel)===null||$===void 0?void 0:$.channel)===null||te===void 0?void 0:te.enableReactionsSupergroup)&&console.warn("Currently, EnableReactionsSupergroup feature is turned off by default. If you wish to use this feature, contact us: https://dashboard.sendbird.com/settings/contact_us?category=feedback_and_feature_requests&product=UIKit"),!((re=t.groupChannel)===null||re===void 0)&&re.channel&&Cn((ie=(ve=t.groupChannel)===null||ve===void 0?void 0:ve.channel)===null||ie===void 0?void 0:ie.enableMention)&&(e.channel.enableMention=(Ae=(le=t.groupChannel)===null||le===void 0?void 0:le.channel)===null||Ae===void 0?void 0:Ae.enableMention),!((oe=n.groupChannel)===null||oe===void 0)&&oe.channel&&Cn((me=(he=n.groupChannel)===null||he===void 0?void 0:he.channel)===null||me===void 0?void 0:me.enableMention)&&(e.channel.enableMention=(pe=(Be=n.groupChannel)===null||Be===void 0?void 0:Be.channel)===null||pe===void 0?void 0:pe.enableMention),!((ye=t.groupChannel)===null||ye===void 0)&&ye.channel&&$c((Ue=(Ee=t.groupChannel)===null||Ee===void 0?void 0:Ee.channel)===null||Ue===void 0?void 0:Ue.replyType,["none","quote_reply","thread"])&&(e.channel.replyType=(De=(Ye=t.groupChannel)===null||Ye===void 0?void 0:Ye.channel)===null||De===void 0?void 0:De.replyType),!((We=n.groupChannel)===null||We===void 0)&&We.channel&&$c((Le=(Je=n.groupChannel)===null||Je===void 0?void 0:Je.channel)===null||Le===void 0?void 0:Le.replyType,["none","quote_reply","thread"])&&(e.channel.replyType=(At=(He=n.groupChannel)===null||He===void 0?void 0:He.channel)===null||At===void 0?void 0:At.replyType),!((Ve=t.groupChannel)===null||Ve===void 0)&&Ve.channel&&$c((mt=(st=t.groupChannel)===null||st===void 0?void 0:st.channel)===null||mt===void 0?void 0:mt.threadReplySelectType,["thread","parent"])&&(e.channel.threadReplySelectType=(St=(et=t.groupChannel)===null||et===void 0?void 0:et.channel)===null||St===void 0?void 0:St.threadReplySelectType),!((Rt=n.groupChannel)===null||Rt===void 0)&&Rt.channel&&$c((Ht=(xe=n.groupChannel)===null||xe===void 0?void 0:xe.channel)===null||Ht===void 0?void 0:Ht.threadReplySelectType,["thread","parent"])&&(e.channel.threadReplySelectType=(Ke=(Xt=n.groupChannel)===null||Xt===void 0?void 0:Xt.channel)===null||Ke===void 0?void 0:Ke.threadReplySelectType),!((Ct=t.groupChannel)===null||Ct===void 0)&&Ct.channel&&Cn((Vt=(Dt=t.groupChannel)===null||Dt===void 0?void 0:Dt.channel)===null||Vt===void 0?void 0:Vt.enableVoiceMessage)&&(e.channel.enableVoiceMessage=(Zt=(rn=t.groupChannel)===null||rn===void 0?void 0:rn.channel)===null||Zt===void 0?void 0:Zt.enableVoiceMessage),!((Mn=n.groupChannel)===null||Mn===void 0)&&Mn.channel&&Cn((ht=(cn=n.groupChannel)===null||cn===void 0?void 0:cn.channel)===null||ht===void 0?void 0:ht.enableVoiceMessage)&&(e.channel.enableVoiceMessage=(dt=(ct=n.groupChannel)===null||ct===void 0?void 0:ct.channel)===null||dt===void 0?void 0:dt.enableVoiceMessage),!((ke=n.groupChannel)===null||ke===void 0)&&ke.channel&&Z7((Xe=(ge=n.groupChannel)===null||ge===void 0?void 0:ge.channel)===null||Xe===void 0?void 0:Xe.typingIndicatorTypes)&&(e.channel.typingIndicatorTypes=(Pt=(Et=n.groupChannel)===null||Et===void 0?void 0:Et.channel)===null||Pt===void 0?void 0:Pt.typingIndicatorTypes),!((Jt=n.groupChannel)===null||Jt===void 0)&&Jt.channel&&Cn((vn=(Tt=n.groupChannel)===null||Tt===void 0?void 0:Tt.channel)===null||vn===void 0?void 0:vn.enableFeedback)&&(e.channel.enableFeedback=(pt=(Sn=n.groupChannel)===null||Sn===void 0?void 0:Sn.channel)===null||pt===void 0?void 0:pt.enableFeedback),!((Mt=n.groupChannel)===null||Mt===void 0)&&Mt.channel&&Cn((In=(dn=n.groupChannel)===null||dn===void 0?void 0:dn.channel)===null||In===void 0?void 0:In.enableSuggestedReplies)&&(e.channel.enableSuggestedReplies=(ot=(Ze=n.groupChannel)===null||Ze===void 0?void 0:Ze.channel)===null||ot===void 0?void 0:ot.enableSuggestedReplies),!((Fe=n.groupChannel)===null||Fe===void 0)&&Fe.channel&&$c((Lt=(Ot=n.groupChannel)===null||Ot===void 0?void 0:Ot.channel)===null||Lt===void 0?void 0:Lt.showSuggestedRepliesFor,["all_messages","last_message_only"])&&(e.channel.showSuggestedRepliesFor=(an=($t=n.groupChannel)===null||$t===void 0?void 0:$t.channel)===null||an===void 0?void 0:an.showSuggestedRepliesFor),!((Nn=n.groupChannel)===null||Nn===void 0)&&Nn.channel&&$c((tt=(xn=n.groupChannel)===null||xn===void 0?void 0:xn.channel)===null||tt===void 0?void 0:tt.suggestedRepliesDirection,["vertical","horizontal"])&&(e.channel.suggestedRepliesDirection=(je=(ae=n.groupChannel)===null||ae===void 0?void 0:ae.channel)===null||je===void 0?void 0:je.suggestedRepliesDirection),!((gt=n.groupChannel)===null||gt===void 0)&&gt.channel&&Cn((bn=(sn=n.groupChannel)===null||sn===void 0?void 0:sn.channel)===null||bn===void 0?void 0:bn.enableMarkdownForUserMessage)&&(e.channel.enableMarkdownForUserMessage=(Fn=(qt=n.groupChannel)===null||qt===void 0?void 0:qt.channel)===null||Fn===void 0?void 0:Fn.enableMarkdownForUserMessage),!((sr=n.groupChannel)===null||sr===void 0)&&sr.channel&&Cn((bt=(Pn=n.groupChannel)===null||Pn===void 0?void 0:Pn.channel)===null||bt===void 0?void 0:bt.enableFormTypeMessage)&&(e.channel.enableFormTypeMessage=(mn=(un=n.groupChannel)===null||un===void 0?void 0:un.channel)===null||mn===void 0?void 0:mn.enableFormTypeMessage)}function pB(e,n,t){var r,i,a,s,o,l,u,d,f,m,p,E,_,b,C,y,T,N,w,O,L,P,U,B,F,H,G,j,x,V,K,W,Q,J,$,te,re,ve,ie,le,Ae,oe,he,me,Be,pe,ye,Ee,Ue,Ye,De,We,Je,Le,He,At,Ve,st,mt,et,St,Rt,xe,Ht,Xt,Ke,Ct,Dt,Vt,rn,Zt,Mn,cn,ht,ct,dt,ke,ge,Xe,Et,Pt,Jt,Tt,vn,Sn,pt,Mt,dn,In,Ze,ot,Fe,Ot,Lt,$t,an,Nn,xn,tt,ae,je,gt,sn,bn;!((i=(r=t.groupChannel)===null||r===void 0?void 0:r.channel)===null||i===void 0)&&i.input&&Cn((o=(s=(a=t.groupChannel)===null||a===void 0?void 0:a.channel)===null||s===void 0?void 0:s.input)===null||o===void 0?void 0:o.enableDocument)&&(e.channel.input.enableDocument=(d=(u=(l=t.groupChannel)===null||l===void 0?void 0:l.channel)===null||u===void 0?void 0:u.input)===null||d===void 0?void 0:d.enableDocument),!((m=(f=n.groupChannel)===null||f===void 0?void 0:f.channel)===null||m===void 0)&&m.input&&Cn((_=(E=(p=n.groupChannel)===null||p===void 0?void 0:p.channel)===null||E===void 0?void 0:E.input)===null||_===void 0?void 0:_.enableDocument)&&(e.channel.input.enableDocument=(y=(C=(b=n.groupChannel)===null||b===void 0?void 0:b.channel)===null||C===void 0?void 0:C.input)===null||y===void 0?void 0:y.enableDocument),!((w=(N=(T=t.groupChannel)===null||T===void 0?void 0:T.channel)===null||N===void 0?void 0:N.input)===null||w===void 0)&&w.camera&&Cn((U=(P=(L=(O=t.groupChannel)===null||O===void 0?void 0:O.channel)===null||L===void 0?void 0:L.input)===null||P===void 0?void 0:P.camera)===null||U===void 0?void 0:U.enablePhoto)&&(e.channel.input.camera.enablePhoto=(G=(H=(F=(B=t.groupChannel)===null||B===void 0?void 0:B.channel)===null||F===void 0?void 0:F.input)===null||H===void 0?void 0:H.camera)===null||G===void 0?void 0:G.enablePhoto),!((V=(x=(j=n.groupChannel)===null||j===void 0?void 0:j.channel)===null||x===void 0?void 0:x.input)===null||V===void 0)&&V.camera&&Cn((J=(Q=(W=(K=n.groupChannel)===null||K===void 0?void 0:K.channel)===null||W===void 0?void 0:W.input)===null||Q===void 0?void 0:Q.camera)===null||J===void 0?void 0:J.enablePhoto)&&(e.channel.input.camera.enablePhoto=(ve=(re=(te=($=n.groupChannel)===null||$===void 0?void 0:$.channel)===null||te===void 0?void 0:te.input)===null||re===void 0?void 0:re.camera)===null||ve===void 0?void 0:ve.enablePhoto),!((Ae=(le=(ie=t.groupChannel)===null||ie===void 0?void 0:ie.channel)===null||le===void 0?void 0:le.input)===null||Ae===void 0)&&Ae.camera&&Cn((Be=(me=(he=(oe=t.groupChannel)===null||oe===void 0?void 0:oe.channel)===null||he===void 0?void 0:he.input)===null||me===void 0?void 0:me.camera)===null||Be===void 0?void 0:Be.enableVideo)&&(e.channel.input.camera.enableVideo=(Ue=(Ee=(ye=(pe=t.groupChannel)===null||pe===void 0?void 0:pe.channel)===null||ye===void 0?void 0:ye.input)===null||Ee===void 0?void 0:Ee.camera)===null||Ue===void 0?void 0:Ue.enableVideo),!((We=(De=(Ye=n.groupChannel)===null||Ye===void 0?void 0:Ye.channel)===null||De===void 0?void 0:De.input)===null||We===void 0)&&We.camera&&Cn((At=(He=(Le=(Je=n.groupChannel)===null||Je===void 0?void 0:Je.channel)===null||Le===void 0?void 0:Le.input)===null||He===void 0?void 0:He.camera)===null||At===void 0?void 0:At.enableVideo)&&(e.channel.input.camera.enableVideo=(et=(mt=(st=(Ve=n.groupChannel)===null||Ve===void 0?void 0:Ve.channel)===null||st===void 0?void 0:st.input)===null||mt===void 0?void 0:mt.camera)===null||et===void 0?void 0:et.enableVideo),!((xe=(Rt=(St=t.groupChannel)===null||St===void 0?void 0:St.channel)===null||Rt===void 0?void 0:Rt.input)===null||xe===void 0)&&xe.gallery&&Cn((Ct=(Ke=(Xt=(Ht=t.groupChannel)===null||Ht===void 0?void 0:Ht.channel)===null||Xt===void 0?void 0:Xt.input)===null||Ke===void 0?void 0:Ke.gallery)===null||Ct===void 0?void 0:Ct.enablePhoto)&&(e.channel.input.gallery.enablePhoto=(Zt=(rn=(Vt=(Dt=t.groupChannel)===null||Dt===void 0?void 0:Dt.channel)===null||Vt===void 0?void 0:Vt.input)===null||rn===void 0?void 0:rn.gallery)===null||Zt===void 0?void 0:Zt.enablePhoto),!((ht=(cn=(Mn=n.groupChannel)===null||Mn===void 0?void 0:Mn.channel)===null||cn===void 0?void 0:cn.input)===null||ht===void 0)&&ht.gallery&&Cn((ge=(ke=(dt=(ct=n.groupChannel)===null||ct===void 0?void 0:ct.channel)===null||dt===void 0?void 0:dt.input)===null||ke===void 0?void 0:ke.gallery)===null||ge===void 0?void 0:ge.enablePhoto)&&(e.channel.input.gallery.enablePhoto=(Jt=(Pt=(Et=(Xe=n.groupChannel)===null||Xe===void 0?void 0:Xe.channel)===null||Et===void 0?void 0:Et.input)===null||Pt===void 0?void 0:Pt.gallery)===null||Jt===void 0?void 0:Jt.enablePhoto),!((Sn=(vn=(Tt=t.groupChannel)===null||Tt===void 0?void 0:Tt.channel)===null||vn===void 0?void 0:vn.input)===null||Sn===void 0)&&Sn.gallery&&Cn((In=(dn=(Mt=(pt=t.groupChannel)===null||pt===void 0?void 0:pt.channel)===null||Mt===void 0?void 0:Mt.input)===null||dn===void 0?void 0:dn.gallery)===null||In===void 0?void 0:In.enableVideo)&&(e.channel.input.gallery.enableVideo=(Ot=(Fe=(ot=(Ze=t.groupChannel)===null||Ze===void 0?void 0:Ze.channel)===null||ot===void 0?void 0:ot.input)===null||Fe===void 0?void 0:Fe.gallery)===null||Ot===void 0?void 0:Ot.enableVideo),!((an=($t=(Lt=n.groupChannel)===null||Lt===void 0?void 0:Lt.channel)===null||$t===void 0?void 0:$t.input)===null||an===void 0)&&an.gallery&&Cn((ae=(tt=(xn=(Nn=n.groupChannel)===null||Nn===void 0?void 0:Nn.channel)===null||xn===void 0?void 0:xn.input)===null||tt===void 0?void 0:tt.gallery)===null||ae===void 0?void 0:ae.enableVideo)&&(e.channel.input.gallery.enableVideo=(bn=(sn=(gt=(je=n.groupChannel)===null||je===void 0?void 0:je.channel)===null||gt===void 0?void 0:gt.input)===null||sn===void 0?void 0:sn.gallery)===null||bn===void 0?void 0:bn.enableVideo)}function gB(e,n,t){var r,i,a,s,o,l,u,d,f,m,p,E,_,b,C,y,T,N;!((r=t.groupChannel)===null||r===void 0)&&r.channelList&&Cn((a=(i=t.groupChannel)===null||i===void 0?void 0:i.channelList)===null||a===void 0?void 0:a.enableTypingIndicator)&&(e.channelList.enableTypingIndicator=t.groupChannel.channelList.enableTypingIndicator),!((s=n.groupChannel)===null||s===void 0)&&s.channelList&&Cn((l=(o=n.groupChannel)===null||o===void 0?void 0:o.channelList)===null||l===void 0?void 0:l.enableTypingIndicator)&&(e.channelList.enableTypingIndicator=(d=(u=n.groupChannel)===null||u===void 0?void 0:u.channelList)===null||d===void 0?void 0:d.enableTypingIndicator),!((f=t.groupChannel)===null||f===void 0)&&f.channelList&&Cn((p=(m=t.groupChannel)===null||m===void 0?void 0:m.channelList)===null||p===void 0?void 0:p.enableMessageReceiptStatus)&&(e.channelList.enableMessageReceiptStatus=(_=(E=t.groupChannel)===null||E===void 0?void 0:E.channelList)===null||_===void 0?void 0:_.enableMessageReceiptStatus),!((b=n.groupChannel)===null||b===void 0)&&b.channelList&&Cn((y=(C=n.groupChannel)===null||C===void 0?void 0:C.channelList)===null||y===void 0?void 0:y.enableMessageReceiptStatus)&&(e.channelList.enableMessageReceiptStatus=(N=(T=n.groupChannel)===null||T===void 0?void 0:T.channelList)===null||N===void 0?void 0:N.enableMessageReceiptStatus)}function _B(e,n,t){var r,i,a,s,o,l,u,d;!((r=t.groupChannel)===null||r===void 0)&&r.setting&&Cn((a=(i=t.groupChannel)===null||i===void 0?void 0:i.setting)===null||a===void 0?void 0:a.enableMessageSearch)&&(e.setting.enableMessageSearch=t.groupChannel.setting.enableMessageSearch),!((s=n.groupChannel)===null||s===void 0)&&s.setting&&Cn((l=(o=n.groupChannel)===null||o===void 0?void 0:o.setting)===null||l===void 0?void 0:l.enableMessageSearch)&&(e.setting.enableMessageSearch=(d=(u=n.groupChannel)===null||u===void 0?void 0:u.setting)===null||d===void 0?void 0:d.enableMessageSearch)}function EB(e,n,t){yB(e,n,t),bB(e,n,t)}function yB(e,n,t){var r,i,a,s,o,l,u,d;!((r=t.openChannel)===null||r===void 0)&&r.channel&&Cn((a=(i=t.openChannel)===null||i===void 0?void 0:i.channel)===null||a===void 0?void 0:a.enableOgtag)&&(e.channel.enableOgtag=t.openChannel.channel.enableOgtag),!((s=n.openChannel)===null||s===void 0)&&s.channel&&Cn((l=(o=n.openChannel)===null||o===void 0?void 0:o.channel)===null||l===void 0?void 0:l.enableOgtag)&&(e.channel.enableOgtag=(d=(u=n.openChannel)===null||u===void 0?void 0:u.channel)===null||d===void 0?void 0:d.enableOgtag)}function bB(e,n,t){var r,i,a,s,o,l,u,d,f,m,p,E,_,b,C,y,T,N,w,O,L,P,U,B,F,H,G,j,x,V,K,W,Q,J,$,te,re,ve,ie,le,Ae,oe,he,me,Be,pe,ye,Ee,Ue,Ye,De,We,Je,Le,He,At,Ve,st,mt,et,St,Rt,xe,Ht,Xt,Ke,Ct,Dt,Vt,rn,Zt,Mn,cn,ht,ct,dt,ke,ge,Xe,Et,Pt,Jt,Tt,vn,Sn,pt,Mt,dn,In,Ze,ot,Fe,Ot,Lt,$t,an,Nn,xn,tt,ae,je,gt,sn,bn;!((i=(r=t.openChannel)===null||r===void 0?void 0:r.channel)===null||i===void 0)&&i.input&&Cn((o=(s=(a=t.openChannel)===null||a===void 0?void 0:a.channel)===null||s===void 0?void 0:s.input)===null||o===void 0?void 0:o.enableDocument)&&(e.channel.input.enableDocument=(d=(u=(l=t.openChannel)===null||l===void 0?void 0:l.channel)===null||u===void 0?void 0:u.input)===null||d===void 0?void 0:d.enableDocument),!((m=(f=n.openChannel)===null||f===void 0?void 0:f.channel)===null||m===void 0)&&m.input&&Cn((_=(E=(p=n.openChannel)===null||p===void 0?void 0:p.channel)===null||E===void 0?void 0:E.input)===null||_===void 0?void 0:_.enableDocument)&&(e.channel.input.enableDocument=(y=(C=(b=n.openChannel)===null||b===void 0?void 0:b.channel)===null||C===void 0?void 0:C.input)===null||y===void 0?void 0:y.enableDocument),!((w=(N=(T=t.openChannel)===null||T===void 0?void 0:T.channel)===null||N===void 0?void 0:N.input)===null||w===void 0)&&w.camera&&Cn((U=(P=(L=(O=t.openChannel)===null||O===void 0?void 0:O.channel)===null||L===void 0?void 0:L.input)===null||P===void 0?void 0:P.camera)===null||U===void 0?void 0:U.enablePhoto)&&(e.channel.input.camera.enablePhoto=(G=(H=(F=(B=t.openChannel)===null||B===void 0?void 0:B.channel)===null||F===void 0?void 0:F.input)===null||H===void 0?void 0:H.camera)===null||G===void 0?void 0:G.enablePhoto),!((V=(x=(j=n.openChannel)===null||j===void 0?void 0:j.channel)===null||x===void 0?void 0:x.input)===null||V===void 0)&&V.camera&&Cn((J=(Q=(W=(K=n.openChannel)===null||K===void 0?void 0:K.channel)===null||W===void 0?void 0:W.input)===null||Q===void 0?void 0:Q.camera)===null||J===void 0?void 0:J.enablePhoto)&&(e.channel.input.camera.enablePhoto=(ve=(re=(te=($=n.openChannel)===null||$===void 0?void 0:$.channel)===null||te===void 0?void 0:te.input)===null||re===void 0?void 0:re.camera)===null||ve===void 0?void 0:ve.enablePhoto),!((Ae=(le=(ie=t.openChannel)===null||ie===void 0?void 0:ie.channel)===null||le===void 0?void 0:le.input)===null||Ae===void 0)&&Ae.camera&&Cn((Be=(me=(he=(oe=t.openChannel)===null||oe===void 0?void 0:oe.channel)===null||he===void 0?void 0:he.input)===null||me===void 0?void 0:me.camera)===null||Be===void 0?void 0:Be.enableVideo)&&(e.channel.input.camera.enableVideo=(Ue=(Ee=(ye=(pe=t.openChannel)===null||pe===void 0?void 0:pe.channel)===null||ye===void 0?void 0:ye.input)===null||Ee===void 0?void 0:Ee.camera)===null||Ue===void 0?void 0:Ue.enableVideo),!((We=(De=(Ye=n.openChannel)===null||Ye===void 0?void 0:Ye.channel)===null||De===void 0?void 0:De.input)===null||We===void 0)&&We.camera&&Cn((At=(He=(Le=(Je=n.openChannel)===null||Je===void 0?void 0:Je.channel)===null||Le===void 0?void 0:Le.input)===null||He===void 0?void 0:He.camera)===null||At===void 0?void 0:At.enableVideo)&&(e.channel.input.camera.enableVideo=(et=(mt=(st=(Ve=n.openChannel)===null||Ve===void 0?void 0:Ve.channel)===null||st===void 0?void 0:st.input)===null||mt===void 0?void 0:mt.camera)===null||et===void 0?void 0:et.enableVideo),!((xe=(Rt=(St=t.openChannel)===null||St===void 0?void 0:St.channel)===null||Rt===void 0?void 0:Rt.input)===null||xe===void 0)&&xe.gallery&&Cn((Ct=(Ke=(Xt=(Ht=t.openChannel)===null||Ht===void 0?void 0:Ht.channel)===null||Xt===void 0?void 0:Xt.input)===null||Ke===void 0?void 0:Ke.gallery)===null||Ct===void 0?void 0:Ct.enablePhoto)&&(e.channel.input.gallery.enablePhoto=(Zt=(rn=(Vt=(Dt=t.openChannel)===null||Dt===void 0?void 0:Dt.channel)===null||Vt===void 0?void 0:Vt.input)===null||rn===void 0?void 0:rn.gallery)===null||Zt===void 0?void 0:Zt.enablePhoto),!((ht=(cn=(Mn=n.openChannel)===null||Mn===void 0?void 0:Mn.channel)===null||cn===void 0?void 0:cn.input)===null||ht===void 0)&&ht.gallery&&Cn((ge=(ke=(dt=(ct=n.openChannel)===null||ct===void 0?void 0:ct.channel)===null||dt===void 0?void 0:dt.input)===null||ke===void 0?void 0:ke.gallery)===null||ge===void 0?void 0:ge.enablePhoto)&&(e.channel.input.gallery.enablePhoto=(Jt=(Pt=(Et=(Xe=n.openChannel)===null||Xe===void 0?void 0:Xe.channel)===null||Et===void 0?void 0:Et.input)===null||Pt===void 0?void 0:Pt.gallery)===null||Jt===void 0?void 0:Jt.enablePhoto),!((Sn=(vn=(Tt=t.openChannel)===null||Tt===void 0?void 0:Tt.channel)===null||vn===void 0?void 0:vn.input)===null||Sn===void 0)&&Sn.gallery&&Cn((In=(dn=(Mt=(pt=t.openChannel)===null||pt===void 0?void 0:pt.channel)===null||Mt===void 0?void 0:Mt.input)===null||dn===void 0?void 0:dn.gallery)===null||In===void 0?void 0:In.enableVideo)&&(e.channel.input.gallery.enableVideo=(Ot=(Fe=(ot=(Ze=t.openChannel)===null||Ze===void 0?void 0:Ze.channel)===null||ot===void 0?void 0:ot.input)===null||Fe===void 0?void 0:Fe.gallery)===null||Ot===void 0?void 0:Ot.enableVideo),!((an=($t=(Lt=n.openChannel)===null||Lt===void 0?void 0:Lt.channel)===null||$t===void 0?void 0:$t.input)===null||an===void 0)&&an.gallery&&Cn((ae=(tt=(xn=(Nn=n.openChannel)===null||Nn===void 0?void 0:Nn.channel)===null||xn===void 0?void 0:xn.input)===null||tt===void 0?void 0:tt.gallery)===null||ae===void 0?void 0:ae.enableVideo)&&(e.channel.input.gallery.enableVideo=(bn=(sn=(gt=(je=n.openChannel)===null||je===void 0?void 0:je.channel)===null||gt===void 0?void 0:gt.input)===null||sn===void 0?void 0:sn.gallery)===null||bn===void 0?void 0:bn.enableVideo)}function CB(e,n){const t=xb();return fB(t.common,e,n),vB(t.groupChannel,e,n),EB(t.openChannel,e,n),t}function SB(e){return typeof e=="object"&&"configuration"in e&&"updated_at"in e}var TB=function(e,n,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(d){try{u(r.next(d))}catch(f){s(f)}}function l(d){try{u(r.throw(d))}catch(f){s(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,l)}u((r=r.apply(e,n||[])).next())})};function Th(e){var n,t;return(t=(n=e.appInfo)===null||n===void 0?void 0:n.applicationAttributes)!==null&&t!==void 0?t:[]}const ZR=M.createContext({initDashboardConfigs:()=>Promise.resolve(),configs:sN,configsWithAppAttr:()=>sN}),MB=({storage:e,children:n,localConfigs:t={}})=>{const[r,i]=M.useState(XR),[a]=M.useState(()=>new hB(e)),s=M.useCallback(u=>TB(void 0,void 0,void 0,function*(){const d=yield a.init(u.appId);if(u.appInfo&&u.appInfo.uikitConfigInfo.lastUpdatedAt===d.updatedAt)i(d.configuration);else try{const f=yield u.getUIKitConfiguration();if(SB(f.json)){const m=AE(f.json),p=yield a.update(m);i(p.configuration)}}catch{i(d.configuration)}}),[a]),o=CB(t,r),l=mr(u=>({groupChannel:{channel:{get enableReactions(){return o.groupChannel.channel.enableReactions&&Th(u).includes(_h.reactions)},get enableReactionsSupergroup(){return o.groupChannel.channel.enableReactionsSupergroup&&Th(u).includes(_h.reactions)},get enableOgtag(){return o.groupChannel.channel.enableOgtag&&Th(u).includes(_h.enable_og_tag)}},setting:{get enableMessageSearch(){return o.groupChannel.setting.enableMessageSearch&&Th(u).includes(_h.message_search_v3)}}},openChannel:{channel:{get enableOgtag(){return o.openChannel.channel.enableOgtag&&Th(u).includes(_h.enable_og_tag)}}}}));return v.createElement(ZR.Provider,{value:{initDashboardConfigs:s,configs:o,configsWithAppAttr:l}},n)},NB=()=>M.useContext(ZR);function zo(e){return{lowerCase:e.toLowerCase(),upperCase:e.toUpperCase()}}function JR(e){return{lowerCase:e.toLowerCase(),upperCase:e.toUpperCase()}}var IB=1024*1024,ws=10,$l=100,eO=100,S_=250,Fb=1e3,tO=6e5,AB=12e3,yne=11025,oN=["audio/webm","audio/mp4","audio/mpeg","audio/ogg"],Pm="sendbird-voice-player-provider-root",RE="sendbird-global-audio-player-id",_d="Voice_message.mp3",wB="Voice_message.m4a",xo="audio/mp3;sbu_type=voice",RB="audio/x-m4a;sbu_type=voice",Bb="KEY_VOICE_MESSAGE_DURATION",Hb="KEY_INTERNAL_MESSAGE_TYPE",Gb="voice/mp3",nO="delivery_receipt",dm="32px",rO=10,OE=25*1024*1024,T_="sendbird_message_templates_token_key",qc="sendbird_message_templates_key",xf="message_template",OB=function(e){return/iPhone|iPad|iPod/i.test(e)},LB=function(e){return/WebKit/i.test(e)},UB=function(e){return/Chrome/i.test(e)},zb=function(e){return!UB(e)&&/Safari/i.test(e)},lN=function(e){return OB(e)&&(LB(e)||zb(e))},hm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function DB(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var iO={exports:{}},M_={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uN;function kB(){if(uN)return M_;uN=1;var e=v;function n(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var t=typeof Object.is=="function"?Object.is:n,r=e.useState,i=e.useEffect,a=e.useLayoutEffect,s=e.useDebugValue;function o(f,m){var p=m(),E=r({inst:{value:p,getSnapshot:m}}),_=E[0].inst,b=E[1];return a(function(){_.value=p,_.getSnapshot=m,l(_)&&b({inst:_})},[f,p,m]),i(function(){return l(_)&&b({inst:_}),f(function(){l(_)&&b({inst:_})})},[f]),s(p),p}function l(f){var m=f.getSnapshot;f=f.value;try{var p=m();return!t(f,p)}catch{return!0}}function u(f,m){return m()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return M_.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,M_}iO.exports=kB();var Ql=iO.exports;function PB(){this.__data__=[],this.size=0}var xB=PB;function FB(e,n){return e===n||e!==e&&n!==n}var aO=FB,BB=aO;function HB(e,n){for(var t=e.length;t--;)if(BB(e[t][0],n))return t;return-1}var Vp=HB,GB=Vp,zB=Array.prototype,jB=zB.splice;function VB(e){var n=this.__data__,t=GB(n,e);if(t<0)return!1;var r=n.length-1;return t==r?n.pop():jB.call(n,t,1),--this.size,!0}var $B=VB,qB=Vp;function KB(e){var n=this.__data__,t=qB(n,e);return t<0?void 0:n[t][1]}var WB=KB,QB=Vp;function YB(e){return QB(this.__data__,e)>-1}var XB=YB,ZB=Vp;function JB(e,n){var t=this.__data__,r=ZB(t,e);return r<0?(++this.size,t.push([e,n])):t[r][1]=n,this}var e8=JB,t8=xB,n8=$B,r8=WB,i8=XB,a8=e8;function wd(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}wd.prototype.clear=t8;wd.prototype.delete=n8;wd.prototype.get=r8;wd.prototype.has=i8;wd.prototype.set=a8;var $p=wd,s8=$p;function o8(){this.__data__=new s8,this.size=0}var l8=o8;function u8(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t}var c8=u8;function d8(e){return this.__data__.get(e)}var h8=d8;function f8(e){return this.__data__.has(e)}var v8=f8,m8=typeof hm=="object"&&hm&&hm.Object===Object&&hm,sO=m8,p8=sO,g8=typeof self=="object"&&self&&self.Object===Object&&self,_8=p8||g8||Function("return this")(),Yo=_8,E8=Yo,y8=E8.Symbol,jb=y8,cN=jb,oO=Object.prototype,b8=oO.hasOwnProperty,C8=oO.toString,Mh=cN?cN.toStringTag:void 0;function S8(e){var n=b8.call(e,Mh),t=e[Mh];try{e[Mh]=void 0;var r=!0}catch{}var i=C8.call(e);return r&&(n?e[Mh]=t:delete e[Mh]),i}var T8=S8,M8=Object.prototype,N8=M8.toString;function I8(e){return N8.call(e)}var A8=I8,dN=jb,w8=T8,R8=A8,O8="[object Null]",L8="[object Undefined]",hN=dN?dN.toStringTag:void 0;function U8(e){return e==null?e===void 0?L8:O8:hN&&hN in Object(e)?w8(e):R8(e)}var qp=U8;function D8(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var lO=D8,k8=qp,P8=lO,x8="[object AsyncFunction]",F8="[object Function]",B8="[object GeneratorFunction]",H8="[object Proxy]";function G8(e){if(!P8(e))return!1;var n=k8(e);return n==F8||n==B8||n==x8||n==H8}var uO=G8,z8=Yo,j8=z8["__core-js_shared__"],V8=j8,N_=V8,fN=function(){var e=/[^.]+$/.exec(N_&&N_.keys&&N_.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function $8(e){return!!fN&&fN in e}var q8=$8,K8=Function.prototype,W8=K8.toString;function Q8(e){if(e!=null){try{return W8.call(e)}catch{}try{return e+""}catch{}}return""}var cO=Q8,Y8=uO,X8=q8,Z8=lO,J8=cO,eH=/[\\^$.*+?()[\]{}|]/g,tH=/^\[object .+?Constructor\]$/,nH=Function.prototype,rH=Object.prototype,iH=nH.toString,aH=rH.hasOwnProperty,sH=RegExp("^"+iH.call(aH).replace(eH,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function oH(e){if(!Z8(e)||X8(e))return!1;var n=Y8(e)?sH:tH;return n.test(J8(e))}var lH=oH;function uH(e,n){return e==null?void 0:e[n]}var cH=uH,dH=lH,hH=cH;function fH(e,n){var t=hH(e,n);return dH(t)?t:void 0}var Rd=fH,vH=Rd,mH=Yo,pH=vH(mH,"Map"),Vb=pH,gH=Rd,_H=gH(Object,"create"),Kp=_H,vN=Kp;function EH(){this.__data__=vN?vN(null):{},this.size=0}var yH=EH;function bH(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}var CH=bH,SH=Kp,TH="__lodash_hash_undefined__",MH=Object.prototype,NH=MH.hasOwnProperty;function IH(e){var n=this.__data__;if(SH){var t=n[e];return t===TH?void 0:t}return NH.call(n,e)?n[e]:void 0}var AH=IH,wH=Kp,RH=Object.prototype,OH=RH.hasOwnProperty;function LH(e){var n=this.__data__;return wH?n[e]!==void 0:OH.call(n,e)}var UH=LH,DH=Kp,kH="__lodash_hash_undefined__";function PH(e,n){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=DH&&n===void 0?kH:n,this}var xH=PH,FH=yH,BH=CH,HH=AH,GH=UH,zH=xH;function Od(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}Od.prototype.clear=FH;Od.prototype.delete=BH;Od.prototype.get=HH;Od.prototype.has=GH;Od.prototype.set=zH;var jH=Od,mN=jH,VH=$p,$H=Vb;function qH(){this.size=0,this.__data__={hash:new mN,map:new($H||VH),string:new mN}}var KH=qH;function WH(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}var QH=WH,YH=QH;function XH(e,n){var t=e.__data__;return YH(n)?t[typeof n=="string"?"string":"hash"]:t.map}var Wp=XH,ZH=Wp;function JH(e){var n=ZH(this,e).delete(e);return this.size-=n?1:0,n}var eG=JH,tG=Wp;function nG(e){return tG(this,e).get(e)}var rG=nG,iG=Wp;function aG(e){return iG(this,e).has(e)}var sG=aG,oG=Wp;function lG(e,n){var t=oG(this,e),r=t.size;return t.set(e,n),this.size+=t.size==r?0:1,this}var uG=lG,cG=KH,dG=eG,hG=rG,fG=sG,vG=uG;function Ld(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}Ld.prototype.clear=cG;Ld.prototype.delete=dG;Ld.prototype.get=hG;Ld.prototype.has=fG;Ld.prototype.set=vG;var dO=Ld,mG=$p,pG=Vb,gG=dO,_G=200;function EG(e,n){var t=this.__data__;if(t instanceof mG){var r=t.__data__;if(!pG||r.length<_G-1)return r.push([e,n]),this.size=++t.size,this;t=this.__data__=new gG(r)}return t.set(e,n),this.size=t.size,this}var yG=EG,bG=$p,CG=l8,SG=c8,TG=h8,MG=v8,NG=yG;function Ud(e){var n=this.__data__=new bG(e);this.size=n.size}Ud.prototype.clear=CG;Ud.prototype.delete=SG;Ud.prototype.get=TG;Ud.prototype.has=MG;Ud.prototype.set=NG;var IG=Ud,AG="__lodash_hash_undefined__";function wG(e){return this.__data__.set(e,AG),this}var RG=wG;function OG(e){return this.__data__.has(e)}var LG=OG,UG=dO,DG=RG,kG=LG;function vp(e){var n=-1,t=e==null?0:e.length;for(this.__data__=new UG;++n<t;)this.add(e[n])}vp.prototype.add=vp.prototype.push=DG;vp.prototype.has=kG;var PG=vp;function xG(e,n){for(var t=-1,r=e==null?0:e.length;++t<r;)if(n(e[t],t,e))return!0;return!1}var FG=xG;function BG(e,n){return e.has(n)}var HG=BG,GG=PG,zG=FG,jG=HG,VG=1,$G=2;function qG(e,n,t,r,i,a){var s=t&VG,o=e.length,l=n.length;if(o!=l&&!(s&&l>o))return!1;var u=a.get(e),d=a.get(n);if(u&&d)return u==n&&d==e;var f=-1,m=!0,p=t&$G?new GG:void 0;for(a.set(e,n),a.set(n,e);++f<o;){var E=e[f],_=n[f];if(r)var b=s?r(_,E,f,n,e,a):r(E,_,f,e,n,a);if(b!==void 0){if(b)continue;m=!1;break}if(p){if(!zG(n,function(C,y){if(!jG(p,y)&&(E===C||i(E,C,t,r,a)))return p.push(y)})){m=!1;break}}else if(!(E===_||i(E,_,t,r,a))){m=!1;break}}return a.delete(e),a.delete(n),m}var hO=qG,KG=Yo,WG=KG.Uint8Array,QG=WG;function YG(e){var n=-1,t=Array(e.size);return e.forEach(function(r,i){t[++n]=[i,r]}),t}var XG=YG;function ZG(e){var n=-1,t=Array(e.size);return e.forEach(function(r){t[++n]=r}),t}var JG=ZG,pN=jb,gN=QG,ez=aO,tz=hO,nz=XG,rz=JG,iz=1,az=2,sz="[object Boolean]",oz="[object Date]",lz="[object Error]",uz="[object Map]",cz="[object Number]",dz="[object RegExp]",hz="[object Set]",fz="[object String]",vz="[object Symbol]",mz="[object ArrayBuffer]",pz="[object DataView]",_N=pN?pN.prototype:void 0,I_=_N?_N.valueOf:void 0;function gz(e,n,t,r,i,a,s){switch(t){case pz:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case mz:return!(e.byteLength!=n.byteLength||!a(new gN(e),new gN(n)));case sz:case oz:case cz:return ez(+e,+n);case lz:return e.name==n.name&&e.message==n.message;case dz:case fz:return e==n+"";case uz:var o=nz;case hz:var l=r&iz;if(o||(o=rz),e.size!=n.size&&!l)return!1;var u=s.get(e);if(u)return u==n;r|=az,s.set(e,n);var d=tz(o(e),o(n),r,i,a,s);return s.delete(e),d;case vz:if(I_)return I_.call(e)==I_.call(n)}return!1}var _z=gz;function Ez(e,n){for(var t=-1,r=n.length,i=e.length;++t<r;)e[i+t]=n[t];return e}var yz=Ez,bz=Array.isArray,$b=bz,Cz=yz,Sz=$b;function Tz(e,n,t){var r=n(e);return Sz(e)?r:Cz(r,t(e))}var Mz=Tz;function Nz(e,n){for(var t=-1,r=e==null?0:e.length,i=0,a=[];++t<r;){var s=e[t];n(s,t,e)&&(a[i++]=s)}return a}var Iz=Nz;function Az(){return[]}var wz=Az,Rz=Iz,Oz=wz,Lz=Object.prototype,Uz=Lz.propertyIsEnumerable,EN=Object.getOwnPropertySymbols,Dz=EN?function(e){return e==null?[]:(e=Object(e),Rz(EN(e),function(n){return Uz.call(e,n)}))}:Oz,kz=Dz;function Pz(e,n){for(var t=-1,r=Array(e);++t<e;)r[t]=n(t);return r}var xz=Pz;function Fz(e){return e!=null&&typeof e=="object"}var Qp=Fz,Bz=qp,Hz=Qp,Gz="[object Arguments]";function zz(e){return Hz(e)&&Bz(e)==Gz}var jz=zz,yN=jz,Vz=Qp,fO=Object.prototype,$z=fO.hasOwnProperty,qz=fO.propertyIsEnumerable,Kz=yN(function(){return arguments}())?yN:function(e){return Vz(e)&&$z.call(e,"callee")&&!qz.call(e,"callee")},Wz=Kz,mp={exports:{}};function Qz(){return!1}var Yz=Qz;mp.exports;(function(e,n){var t=Yo,r=Yz,i=n&&!n.nodeType&&n,a=i&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===i,o=s?t.Buffer:void 0,l=o?o.isBuffer:void 0,u=l||r;e.exports=u})(mp,mp.exports);var vO=mp.exports,Xz=9007199254740991,Zz=/^(?:0|[1-9]\d*)$/;function Jz(e,n){var t=typeof e;return n=n??Xz,!!n&&(t=="number"||t!="symbol"&&Zz.test(e))&&e>-1&&e%1==0&&e<n}var ej=Jz,tj=9007199254740991;function nj(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=tj}var mO=nj,rj=qp,ij=mO,aj=Qp,sj="[object Arguments]",oj="[object Array]",lj="[object Boolean]",uj="[object Date]",cj="[object Error]",dj="[object Function]",hj="[object Map]",fj="[object Number]",vj="[object Object]",mj="[object RegExp]",pj="[object Set]",gj="[object String]",_j="[object WeakMap]",Ej="[object ArrayBuffer]",yj="[object DataView]",bj="[object Float32Array]",Cj="[object Float64Array]",Sj="[object Int8Array]",Tj="[object Int16Array]",Mj="[object Int32Array]",Nj="[object Uint8Array]",Ij="[object Uint8ClampedArray]",Aj="[object Uint16Array]",wj="[object Uint32Array]",Er={};Er[bj]=Er[Cj]=Er[Sj]=Er[Tj]=Er[Mj]=Er[Nj]=Er[Ij]=Er[Aj]=Er[wj]=!0;Er[sj]=Er[oj]=Er[Ej]=Er[lj]=Er[yj]=Er[uj]=Er[cj]=Er[dj]=Er[hj]=Er[fj]=Er[vj]=Er[mj]=Er[pj]=Er[gj]=Er[_j]=!1;function Rj(e){return aj(e)&&ij(e.length)&&!!Er[rj(e)]}var Oj=Rj;function Lj(e){return function(n){return e(n)}}var Uj=Lj,pp={exports:{}};pp.exports;(function(e,n){var t=sO,r=n&&!n.nodeType&&n,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,s=a&&t.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();e.exports=o})(pp,pp.exports);var Dj=pp.exports,kj=Oj,Pj=Uj,bN=Dj,CN=bN&&bN.isTypedArray,xj=CN?Pj(CN):kj,pO=xj,Fj=xz,Bj=Wz,Hj=$b,Gj=vO,zj=ej,jj=pO,Vj=Object.prototype,$j=Vj.hasOwnProperty;function qj(e,n){var t=Hj(e),r=!t&&Bj(e),i=!t&&!r&&Gj(e),a=!t&&!r&&!i&&jj(e),s=t||r||i||a,o=s?Fj(e.length,String):[],l=o.length;for(var u in e)(n||$j.call(e,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||zj(u,l)))&&o.push(u);return o}var Kj=qj,Wj=Object.prototype;function Qj(e){var n=e&&e.constructor,t=typeof n=="function"&&n.prototype||Wj;return e===t}var Yj=Qj;function Xj(e,n){return function(t){return e(n(t))}}var Zj=Xj,Jj=Zj,eV=Jj(Object.keys,Object),tV=eV,nV=Yj,rV=tV,iV=Object.prototype,aV=iV.hasOwnProperty;function sV(e){if(!nV(e))return rV(e);var n=[];for(var t in Object(e))aV.call(e,t)&&t!="constructor"&&n.push(t);return n}var oV=sV,lV=uO,uV=mO;function cV(e){return e!=null&&uV(e.length)&&!lV(e)}var dV=cV,hV=Kj,fV=oV,vV=dV;function mV(e){return vV(e)?hV(e):fV(e)}var pV=mV,gV=Mz,_V=kz,EV=pV;function yV(e){return gV(e,EV,_V)}var bV=yV,SN=bV,CV=1,SV=Object.prototype,TV=SV.hasOwnProperty;function MV(e,n,t,r,i,a){var s=t&CV,o=SN(e),l=o.length,u=SN(n),d=u.length;if(l!=d&&!s)return!1;for(var f=l;f--;){var m=o[f];if(!(s?m in n:TV.call(n,m)))return!1}var p=a.get(e),E=a.get(n);if(p&&E)return p==n&&E==e;var _=!0;a.set(e,n),a.set(n,e);for(var b=s;++f<l;){m=o[f];var C=e[m],y=n[m];if(r)var T=s?r(y,C,m,n,e,a):r(C,y,m,e,n,a);if(!(T===void 0?C===y||i(C,y,t,r,a):T)){_=!1;break}b||(b=m=="constructor")}if(_&&!b){var N=e.constructor,w=n.constructor;N!=w&&"constructor"in e&&"constructor"in n&&!(typeof N=="function"&&N instanceof N&&typeof w=="function"&&w instanceof w)&&(_=!1)}return a.delete(e),a.delete(n),_}var NV=MV,IV=Rd,AV=Yo,wV=IV(AV,"DataView"),RV=wV,OV=Rd,LV=Yo,UV=OV(LV,"Promise"),DV=UV,kV=Rd,PV=Yo,xV=kV(PV,"Set"),FV=xV,BV=Rd,HV=Yo,GV=BV(HV,"WeakMap"),zV=GV,LE=RV,UE=Vb,DE=DV,kE=FV,PE=zV,gO=qp,Dd=cO,TN="[object Map]",jV="[object Object]",MN="[object Promise]",NN="[object Set]",IN="[object WeakMap]",AN="[object DataView]",VV=Dd(LE),$V=Dd(UE),qV=Dd(DE),KV=Dd(kE),WV=Dd(PE),Tu=gO;(LE&&Tu(new LE(new ArrayBuffer(1)))!=AN||UE&&Tu(new UE)!=TN||DE&&Tu(DE.resolve())!=MN||kE&&Tu(new kE)!=NN||PE&&Tu(new PE)!=IN)&&(Tu=function(e){var n=gO(e),t=n==jV?e.constructor:void 0,r=t?Dd(t):"";if(r)switch(r){case VV:return AN;case $V:return TN;case qV:return MN;case KV:return NN;case WV:return IN}return n});var QV=Tu,A_=IG,YV=hO,XV=_z,ZV=NV,wN=QV,RN=$b,ON=vO,JV=pO,e9=1,LN="[object Arguments]",UN="[object Array]",fm="[object Object]",t9=Object.prototype,DN=t9.hasOwnProperty;function n9(e,n,t,r,i,a){var s=RN(e),o=RN(n),l=s?UN:wN(e),u=o?UN:wN(n);l=l==LN?fm:l,u=u==LN?fm:u;var d=l==fm,f=u==fm,m=l==u;if(m&&ON(e)){if(!ON(n))return!1;s=!0,d=!1}if(m&&!d)return a||(a=new A_),s||JV(e)?YV(e,n,t,r,i,a):XV(e,n,l,t,r,i,a);if(!(t&e9)){var p=d&&DN.call(e,"__wrapped__"),E=f&&DN.call(n,"__wrapped__");if(p||E){var _=p?e.value():e,b=E?n.value():n;return a||(a=new A_),i(_,b,t,r,a)}}return m?(a||(a=new A_),ZV(e,n,t,r,i,a)):!1}var r9=n9,i9=r9,kN=Qp;function _O(e,n,t,r,i){return e===n?!0:e==null||n==null||!kN(e)&&!kN(n)?e!==e&&n!==n:i9(e,n,t,r,_O,i)}var a9=_O,s9=a9;function o9(e,n){return s9(e,n)}var l9=o9,EO=DB(l9);function yO(e,n){return Object.entries(n).some(function(t){var r=t[0],i=t[1];return typeof e[r]=="function"&&typeof i=="function"?!1:!EO(e[r],i)})}function cc(e){var n=D({},e),t=new Set,r=!1,i=function(a,s){if(!r)try{r=!0;var o=typeof a=="function"?a(n):a,l=yO(n,o);(s||l)&&(n=D(D({},n),o),t.forEach(function(u){return u()}))}finally{r=!1}};return{getState:function(){return n},setState:i,subscribe:function(a){return t.add(a),function(){return t.delete(a)}}}}var u9={onUserProfileMessage:void 0,disableUserProfile:!1,isReactionEnabled:!0,isMentionEnabled:!1,isVoiceMessageEnabled:!0,replyType:"NONE",showSearchIcon:!0,isTypingIndicatorEnabledOnChannelList:!1,isMessageReceiptStatusEnabledOnChannelList:!1,setCurrenttheme:function(){}},c9=D(D({},u9),{appId:"",userId:"",accessToken:void 0,theme:"light",isOnline:!1,allowProfileEdit:!0,forceLeftToRightMessageLayout:!1,disableMarkAsDelivered:!1,isMultipleFilesMessageEnabled:!1,htmlTextDirection:"ltr",uikitUploadSizeLimit:OE,uikitMultipleFilesMessageLimit:rO,imageCompression:void 0,voiceRecord:void 0,userMention:void 0,renderUserProfile:void 0,onStartDirectMessage:void 0,setCurrentTheme:void 0,userListQuery:void 0,pubSub:void 0,logger:void 0,markAsReadScheduler:void 0,markAsDeliveredScheduler:void 0,common:{enableUsingDefaultUserProfile:!1},groupChannel:{enableOgtag:!0,enableTypingIndicator:!0,enableReactions:!0,enableMention:!1,replyType:"none",threadReplySelectType:"thread",enableVoiceMessage:!0,typingIndicatorTypes:void 0,enableDocument:!1,enableFeedback:!1,enableSuggestedReplies:!1,showSuggestedRepliesFor:"all_messages",suggestedRepliesDirection:"vertical",enableMarkdownForUserMessage:!1,enableFormTypeMessage:!1,enableReactionsSupergroup:void 0},groupChannelList:{enableTypingIndicator:!1,enableMessageReceiptStatus:!1},groupChannelSettings:{enableMessageSearch:!1},openChannel:{enableOgtag:!0,enableDocument:!1}}),d9={sdkStore:{sdk:{},initialized:!1,loading:!1,error:void 0},userStore:{user:{},initialized:!1,loading:!1},appInfoStore:{messageTemplatesInfo:void 0,waitingTemplateKeysMap:{}}},id={config:c9,stores:d9,emojiManager:void 0,eventHandlers:{reaction:{onPressUserProfile:function(){}},connection:{onConnected:function(){},onFailed:function(){}},modal:{onMounted:function(){}},message:{onSendMessageFailed:function(){},onUpdateMessageFailed:function(){},onFileUploadFailed:function(){}}},utils:{updateMessageTemplatesInfo:function(){return new Promise(function(){})},getCachedTemplate:function(){return null}}};function dc(e,n,t){var r=M.useContext(e);if(!r)throw new Error("useStore must be used within a StoreProvider");var i=M.useRef(n);i.current=n;var a=Ql.useSyncExternalStore(r.subscribe,function(){return i.current(r.getState())},function(){return i.current(t)}),s=M.useCallback(function(o){var l=r.getState();yO(l,o)&&r.setState(function(u){return D(D({},u),o)})},[r]);return M.useMemo(function(){return{state:a,updateState:s}},[a,s])}var qb=v.createContext(null),h9=function(e){return cc({config:D(D({},id.config),e==null?void 0:e.config),stores:D(D({},id.stores),e==null?void 0:e.stores),eventHandlers:D(D({},id.eventHandlers),e==null?void 0:e.eventHandlers),emojiManager:id.emojiManager,utils:D(D({},id.utils),e==null?void 0:e.utils)})},f9=function(){return dc(qb,function(e){return e},id)},v9=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t._channels=new Map,t._enteredChannelUrls=[],t}return z(n,e),Object.defineProperty(n.prototype,"enteredChannels",{get:function(){var t=this;return this._enteredChannelUrls.map(function(r){return t._channels.get(r)}).filter(function(r){return!!r})},enumerable:!1,configurable:!0}),n.prototype.isEnteredChannel=function(t){return this._enteredChannelUrls.includes(t)},n.prototype.enter=function(t){this._enteredChannelUrls.indexOf(t)<0&&this._enteredChannelUrls.push(t)},n.prototype.exit=function(t){var r=this._enteredChannelUrls.indexOf(t);r>=0&&this._enteredChannelUrls.splice(r,1)},n.prototype.exitAll=function(){this._enteredChannelUrls=[]},n.prototype.get=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){return[2,this._channels.get(t)]})})},n.prototype.upsert=function(t){return A(this,void 0,void 0,function(){var r,i=this;return I(this,function(a){return r=[],t.forEach(function(s){if(i._channels.has(s.url)){var o=i._channels.get(s.url);Object.assign(o,s),r.push(o)}else i._channels.set(s.url,s),r.push(s)}),[2,r]})})},n.prototype.remove=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){return this._channels.delete(t),this.exit(t),[2]})})},n.prototype.clear=function(){return A(this,void 0,void 0,function(){return I(this,function(t){return this._channels.clear(),this._enteredChannelUrls=[],[2]})})},n}(Rr),bO={channelUrl:void 0,name:void 0,coverUrlOrImage:void 0,data:void 0,customType:void 0,operatorUserIds:void 0,isEphemeral:void 0},m9=function(e){function n(t){var r=t.channelUrl,i=t.isInternalCall,a=e.call(this)||this;return a.method=Ie.GET,a.path="".concat(i?gk:sc,"/").concat(encodeURIComponent(r)),a.params={show_pinned_messages:!0},a}return z(n,e),n}(we),PN=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.channel=new ql(t,r),i}return z(n,e),n}(Pe),p9=function(e){function n(t){var r=this,i=t.channelUrl,a=t.coverUrlOrImage,s=t.name,o=t.data,l=t.customType,u=t.operatorUserIds,d=t.isEphemeral;return(r=e.call(this)||this).method=Ie.POST,r.path=sc,r.params=Qe(vt({channel_url:i,cover_url:Z("string",a)?a:null,cover_file:Vr(a)?a:null,name:s,data:o,custom_type:l,operators:u,is_ephemeral:d})),r}return z(n,e),n}(we);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.channel=new ql(t,r),i}z(n,e)})(Pe);var g9=function(e){function n(t){var r=t.channelUrl;return e.call(this,{code:"ENTR",payload:{channel_url:r},ackRequired:!0})||this}return z(n,e),n}(pi),CO=function(e){function n(t,r,i){var a,s,o=this;return o=e.call(this,t,"SYEV",i)||this,i.data&&(o.participantCount=(a=i.data.participant_count)!==null&&a!==void 0?a:0,o.user=new Yt(t,i.data),o.ts=(s=i.data.edge_ts)!==null&&s!==void 0?s:0),o}return z(n,e),n}(Wo),_9=function(e){function n(t){var r=t.channelUrl;return e.call(this,{code:"EXIT",payload:{channel_url:r},ackRequired:!0})||this}return z(n,e),n}(pi),SO=function(e){function n(t,r,i){var a,s,o=this;return o=e.call(this,t,"EXIT",i)||this,i.data&&(o.participantCount=(a=i.data.participant_count)!==null&&a!==void 0?a:0,o.user=new Yt(t,i.data),o.ts=(s=i.data.edge_ts)!==null&&s!==void 0?s:0),o}return z(n,e),n}(Wo),w_={},Ms=function(e){function n(t,r){var i=e.call(this,t,Y(Y({},r),{channelType:ln.OPEN}))||this;return i.subscribeChannelEvent=Bt,i.unsubscribeChannelEvent=Bt,i.refreshChannel=function(){return A(i,void 0,void 0,function(){return I(this,function(a){return[2,Bt()]})})},i._openChannelCache=new v9(t),i._openChannelHandlers=new Map,i._dispatcher.on(function(a){var s,o;if(a instanceof Yn)i._handleEvent(a).catch(function(f){if(Ai(f)&&i._sdkState.appState==="foreground")throw f});else if(a instanceof Ea&&a.stateType===wn.CONNECTED){var l=i._openChannelCache.enteredChannels;try{for(var u=Ge(l),d=u.next();!d.done;d=u.next())d.value.enter()}catch(f){s={error:f}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(s)throw s.error}}}}),w_[t]||(w_[t]=i),i}return z(n,e),n.of=function(t){return w_[t]},n.prototype.buildOpenChannelFromSerializedData=function(t){var r=ko(t);return new ql(this._iid,ql.payloadify(r))},n.prototype.getChannelFromCache=function(t){var r;return A(this,void 0,void 0,function(){return I(this,function(i){switch(i.label){case 0:return[4,this._openChannelCache.get(t)];case 1:return[2,(r=i.sent())!==null&&r!==void 0?r:null]}})})},n.prototype.upsertChannelsToCache=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){switch(r.label){case 0:return[4,this._openChannelCache.upsert(t)];case 1:return[2,r.sent()]}})})},n.prototype.removeChannelsFromCache=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l;return I(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,7]),r=Ge(t),i=r.next(),u.label=1;case 1:return i.done?[3,4]:(a=i.value,[4,this._openChannelCache.remove(a)]);case 2:u.sent(),u.label=3;case 3:return i=r.next(),[3,1];case 4:return[3,7];case 5:return s=u.sent(),o={error:s},[3,7];case 6:try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(o)throw o.error}return[7];case 7:return[2]}})})},n.prototype.setEnteredToCache=function(t){this._openChannelCache.enter(t.url)},n.prototype.setExitedToCache=function(t){this._openChannelCache.exit(t.url)},Object.defineProperty(n.prototype,"handlers",{get:function(){return Nt([],ut(this._openChannelHandlers.values()),!1)},enumerable:!1,configurable:!0}),n.prototype._handleEvent=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o,l,u,d,f,m,p,E,_,b,C,y,T,N,w,O,L,P,U,B,F,H,G,j,x,V,K,W,Q,J,$,te,re,ve,ie,le,Ae,oe,he,me,Be,pe,ye,Ee,Ue,Ye,De,We,Je,Le,He,At,Ve,st,mt,et,St,Rt,xe,Ht,Xt,Ke,Ct,Dt,Vt,rn,Zt,Mn,cn,ht,ct=this;return I(this,function(dt){switch(dt.label){case 0:switch(dt.trys.push([0,59,,60]),t.code){case"MESG":case"FILE":case"ADMM":case"BRDM":return[3,1];case"MEDI":case"FEDI":case"AEDI":return[3,4];case"DELM":return[3,7];case"MRCT":return[3,10];case"MTHD":return[3,13];case"MCNT":return[3,16];case"PEDI":return[3,27];case"VOTE":return[3,30];case"SYEV":return[3,33]}return[3,58];case 1:return s=null,t.code==="MESG"?s=t.as(Lb):t.code==="FILE"?s=t.as(Ib):t.code!=="ADMM"&&t.code!="BRDM"||(s=t.as(DR)),s?(r=s.message,i=s.isMentioned,r.channelType!==ln.OPEN?[3,3]:[4,this.getChannel(r.channelUrl,!0)]):[3,3];case 2:a=dt.sent(),it(function(){return A(ct,void 0,void 0,function(){var ke,ge,Xe,Et,Pt;return I(this,function(Jt){try{for(ke=Ge(this._openChannelHandlers.values()),ge=ke.next();!ge.done;ge=ke.next())Xe=ge.value,this._openChannelCache.isEnteredChannel(a.url)&&(Xe.onMessageReceived&&Xe.onMessageReceived(a,r),i&&Xe.onMentionReceived&&Xe.onMentionReceived(a,r))}catch(Tt){Et={error:Tt}}finally{try{ge&&!ge.done&&(Pt=ke.return)&&Pt.call(ke)}finally{if(Et)throw Et.error}}return[2]})})}),dt.label=3;case 3:return[3,58];case 4:return s=null,t.code==="MEDI"?s=t.as(ap):t.code==="FEDI"?s=t.as(sp):t.code==="AEDI"&&(s=t.as(kR)),s?(o=s.message,l=s.mentionCountChange,o.channelType!==ln.OPEN?[3,6]:[4,this.getChannel(o.channelUrl,!0)]):[3,6];case 5:u=dt.sent(),d=!1,u.lastPinnedMessage&&u.lastPinnedMessage.messageId===o.messageId&&u.lastPinnedMessage.updatedAt<o.updatedAt&&(u.lastPinnedMessage=o,d=!0),it(function(){return A(ct,void 0,void 0,function(){var ke,ge,Xe,Et,Pt,Jt,Tt;return I(this,function(vn){try{for(ke=Ge(this._openChannelHandlers.values()),ge=ke.next();!ge.done;ge=ke.next())Xe=ge.value,this._openChannelCache.isEnteredChannel(u.url)&&(d&&((Jt=Xe.onPinnedMessageUpdated)===null||Jt===void 0||Jt.call(Xe,u),(Tt=Xe.onChannelChanged)===null||Tt===void 0||Tt.call(Xe,u)),Xe.onMessageUpdated&&Xe.onMessageUpdated(u,o),l>0&&Xe.onMentionReceived&&Xe.onMentionReceived(u,o))}catch(Sn){Et={error:Sn}}finally{try{ge&&!ge.done&&(Pt=ke.return)&&Pt.call(ke)}finally{if(Et)throw Et.error}}return[2]})})}),dt.label=6;case 6:return[3,58];case 7:return f=t.as(i2),W=f.channelUrl,Q=f.channelType,m=f.messageId,Q!==ln.OPEN?[3,9]:[4,this.getChannel(W,!0)];case 8:p=dt.sent(),it(function(){return A(ct,void 0,void 0,function(){var ke,ge,Xe,Et,Pt;return I(this,function(Jt){try{for(ke=Ge(this._openChannelHandlers.values()),ge=ke.next();!ge.done;ge=ke.next())Xe=ge.value,this._openChannelCache.isEnteredChannel(p.url)&&Xe.onMessageDeleted&&Xe.onMessageDeleted(p,m)}catch(Tt){Et={error:Tt}}finally{try{ge&&!ge.done&&(Pt=ke.return)&&Pt.call(ke)}finally{if(Et)throw Et.error}}return[2]})})}),dt.label=9;case 9:return[3,58];case 10:return E=t.as(PR),W=E.channelUrl,Q=E.channelType,_=E.event,Q!==ln.OPEN?[3,12]:[4,this.getChannel(W,!0)];case 11:b=dt.sent(),it(function(){return A(ct,void 0,void 0,function(){var ke,ge,Xe,Et,Pt;return I(this,function(Jt){try{for(ke=Ge(this._openChannelHandlers.values()),ge=ke.next();!ge.done;ge=ke.next())Xe=ge.value,this._openChannelCache.isEnteredChannel(b.url)&&Xe.onReactionUpdated&&Xe.onReactionUpdated(b,_)}catch(Tt){Et={error:Tt}}finally{try{ge&&!ge.done&&(Pt=ke.return)&&Pt.call(ke)}finally{if(Et)throw Et.error}}return[2]})})}),dt.label=12;case 12:return[3,58];case 13:return(C=t.as(xR).event).channelType!==ln.OPEN?[3,15]:[4,this.getChannel(C.channelUrl,!0)];case 14:y=dt.sent(),it(function(){return A(ct,void 0,void 0,function(){var ke,ge,Xe,Et,Pt;return I(this,function(Jt){try{for(ke=Ge(this._openChannelHandlers.values()),ge=ke.next();!ge.done;ge=ke.next())Xe=ge.value,this._openChannelCache.isEnteredChannel(y.url)&&Xe.onThreadInfoUpdated&&Xe.onThreadInfoUpdated(y,C)}catch(Tt){Et={error:Tt}}finally{try{ge&&!ge.done&&(Pt=ke.return)&&Pt.call(ke)}finally{if(Et)throw Et.error}}return[2]})})}),dt.label=15;case 15:return[3,58];case 16:T=t.as(FR).openChannelMemberCounts,N=[],dt.label=17;case 17:dt.trys.push([17,22,23,24]),w=Ge(T),O=w.next(),dt.label=18;case 18:return O.done?[3,21]:(L=O.value,W=L.channelUrl,oe=L.participantCount,P=L.updatedAt,[4,this.getChannelFromCache(W)]);case 19:(U=dt.sent())&&U._updateParticipantCount(oe,P)&&N.push(U),dt.label=20;case 20:return O=w.next(),[3,18];case 21:return[3,24];case 22:return B=dt.sent(),cn={error:B},[3,24];case 23:try{O&&!O.done&&(ht=w.return)&&ht.call(w)}finally{if(cn)throw cn.error}return[7];case 24:return N.length>0?[4,this.upsertChannelsToCache(N)]:[3,26];case 25:F=dt.sent(),it(function(){return A(ct,void 0,void 0,function(){var ke,ge,Xe,Et,Pt;return I(this,function(Jt){try{for(ke=Ge(this._openChannelHandlers.values()),ge=ke.next();!ge.done;ge=ke.next())(Xe=ge.value).onChannelMemberCountChanged&&Xe.onChannelMemberCountChanged(F)}catch(Tt){Et={error:Tt}}finally{try{ge&&!ge.done&&(Pt=ke.return)&&Pt.call(ke)}finally{if(Et)throw Et.error}}return[2]})})}),dt.label=26;case 26:return[3,58];case 27:return H=t.as(BR),G=H.event,j=H.status,W=H.channelUrl,Q=H.channelType,W&&Q===ln.OPEN?[4,this.getChannel(W,!0)]:[3,29];case 28:x=dt.sent(),this._dispatcher.dispatch(new Mb({event:G,source:fe.EVENT_POLL_UPDATED})),it(j===z2?function(){return A(ct,void 0,void 0,function(){var ke,ge,Xe,Et,Pt;return I(this,function(Jt){try{for(ke=Ge(this._openChannelHandlers.values()),ge=ke.next();!ge.done;ge=ke.next())(Xe=ge.value).onPollDeleted&&Xe.onPollDeleted(x,G.pollId)}catch(Tt){Et={error:Tt}}finally{try{ge&&!ge.done&&(Pt=ke.return)&&Pt.call(ke)}finally{if(Et)throw Et.error}}return[2]})})}:function(){return A(ct,void 0,void 0,function(){var ke,ge,Xe,Et,Pt;return I(this,function(Jt){try{for(ke=Ge(this._openChannelHandlers.values()),ge=ke.next();!ge.done;ge=ke.next())(Xe=ge.value).onPollUpdated&&Xe.onPollUpdated(x,G)}catch(Tt){Et={error:Tt}}finally{try{ge&&!ge.done&&(Pt=ke.return)&&Pt.call(ke)}finally{if(Et)throw Et.error}}return[2]})})}),dt.label=29;case 29:return[3,58];case 30:return V=t.as(Ub),K=V.event,W=V.channelUrl,Q=V.channelType,W&&Q===ln.OPEN?[4,this.getChannel(W,!0)]:[3,32];case 31:J=dt.sent(),this._dispatcher.dispatch(new xp({event:K,source:fe.EVENT_POLL_VOTED})),it(function(){return A(ct,void 0,void 0,function(){var ke,ge,Xe,Et,Pt;return I(this,function(Jt){try{for(ke=Ge(this._openChannelHandlers.values()),ge=ke.next();!ge.done;ge=ke.next())(Xe=ge.value).onPollVoted&&Xe.onPollVoted(J,K)}catch(Tt){Et={error:Tt}}finally{try{ge&&!ge.done&&(Pt=ke.return)&&Pt.call(ke)}finally{if(Et)throw Et.error}}return[2]})})}),dt.label=32;case 32:return[3,58];case 33:if(!($=t.as(Wo).event).isOpenChannelEvent)return[3,57];switch($.category){case Ln.CHANNEL_ENTER:return[3,34];case Ln.CHANNEL_EXIT:return[3,36];case Ln.CHANNEL_OPERATOR_UPDATE:return[3,38];case Ln.USER_CHANNEL_MUTE:case Ln.USER_CHANNEL_UNMUTE:return[3,40];case Ln.USER_CHANNEL_BAN:case Ln.USER_CHANNEL_UNBAN:return[3,42];case Ln.CHANNEL_FREEZE:case Ln.CHANNEL_UNFREEZE:return[3,44];case Ln.CHANNEL_DELETED:return[3,46];case Ln.CHANNEL_PROP_CHANGED:return[3,49];case Ln.CHANNEL_META_DATA_CHANGED:return[3,51];case Ln.CHANNEL_META_COUNTERS_CHANGED:return[3,53];case Ln.PINNED_MESSAGE_CHANGED:return[3,55]}return[3,57];case 34:return[4,this.getChannel($.channelUrl,!0)];case 35:return te=dt.sent(),re=t.as(CO),oe=re.participantCount,ve=re.user,ie=te._updateParticipantCount(oe,$.ts),it(function(){return A(ct,void 0,void 0,function(){return I(this,function(ke){return this._openChannelHandlers.forEach(function(ge){ge.onUserEntered&&ge.onUserEntered(te,ve),ie&&ge.onChannelParticipantCountChanged&&ge.onChannelParticipantCountChanged(te)}),[2]})})}),[3,57];case 36:return[4,this.getChannel($.channelUrl,!0)];case 37:return le=dt.sent(),Ae=t.as(SO),oe=Ae.participantCount,he=Ae.user,me=le._updateParticipantCount(oe,$.ts),it(function(){return A(ct,void 0,void 0,function(){return I(this,function(ke){return this._openChannelHandlers.forEach(function(ge){ge.onUserExited&&ge.onUserExited(le,he),me&&ge.onChannelParticipantCountChanged&&ge.onChannelParticipantCountChanged(le)}),[2]})})}),[3,57];case 38:return[4,this.getChannel($.channelUrl,!0)];case 39:return Be=dt.sent(),pe=t.as(OR).operators,Be.operators=pe,this.upsertChannelsToCache([Be]),it(function(){return A(ct,void 0,void 0,function(){return I(this,function(ke){return this._openChannelHandlers.forEach(function(ge){ge.onOperatorUpdated&&ge.onOperatorUpdated(Be,pe)}),[2]})})}),[3,57];case 40:return[4,this.getChannel($.channelUrl,!0)];case 41:return ye=dt.sent(),Ee=$.category===Ln.USER_CHANNEL_MUTE,Ue=t.as(Ee?uR:cR).user,it(function(){return A(ct,void 0,void 0,function(){return I(this,function(ke){return this._openChannelHandlers.forEach(function(ge){Ee?ge.onUserMuted&&ge.onUserMuted(ye,Ue):ge.onUserUnmuted&&ge.onUserUnmuted(ye,Ue)}),[2]})})}),[3,57];case 42:return[4,this.getChannel($.channelUrl,!0)];case 43:return Ye=dt.sent(),De=$.category===Ln.USER_CHANNEL_BAN,We=t.as(De?dR:hR).user,it(function(){return A(ct,void 0,void 0,function(){return I(this,function(ke){return this._openChannelHandlers.forEach(function(ge){De?ge.onUserBanned&&ge.onUserBanned(Ye,We):ge.onUserUnbanned&&ge.onUserUnbanned(Ye,We)}),[2]})})}),[3,57];case 44:return[4,this.getChannel($.channelUrl,!0)];case 45:return Je=dt.sent(),Le=t.as(fR).freeze,Je.isFrozen=Le,this.upsertChannelsToCache([Je]),it(function(){return A(ct,void 0,void 0,function(){return I(this,function(ke){return this._openChannelHandlers.forEach(function(ge){Le?ge.onChannelFrozen&&ge.onChannelFrozen(Je):ge.onChannelUnfrozen&&ge.onChannelUnfrozen(Je)}),[2]})})}),[3,57];case 46:return[4,this.getChannel($.channelUrl,!0)];case 47:return He=dt.sent(),[4,this.removeChannelsFromCache([He.url])];case 48:return dt.sent(),it(function(){return A(ct,void 0,void 0,function(){return I(this,function(ke){return this._openChannelHandlers.forEach(function(ge){ge.onChannelDeleted&&ge.onChannelDeleted(He.url,He.channelType)}),[2]})})}),[3,57];case 49:return[4,this.getChannelWithoutCache($.channelUrl,!0)];case 50:return At=dt.sent(),it(function(){return A(ct,void 0,void 0,function(){return I(this,function(ke){return this._openChannelHandlers.forEach(function(ge){ge.onChannelChanged&&ge.onChannelChanged(At)}),[2]})})}),[3,57];case 51:return[4,this.getChannel($.channelUrl,!0)];case 52:return Ve=dt.sent(),st=t.as(oR),mt=st.created,et=st.updated,St=st.deleted,mt&&Ve._upsertCachedMetaData(mt,$.ts),et&&Ve._upsertCachedMetaData(et,$.ts),St&&Ve._removeFromCachedMetaData(St,$.ts),it(function(){return A(ct,void 0,void 0,function(){return I(this,function(ke){return this._openChannelHandlers.forEach(function(ge){mt&&ge.onMetaDataCreated&&ge.onMetaDataCreated(Ve,mt),et&&ge.onMetaDataUpdated&&ge.onMetaDataUpdated(Ve,et),St&&ge.onMetaDataDeleted&&ge.onMetaDataDeleted(Ve,St)}),[2]})})}),[3,57];case 53:return[4,this.getChannel($.channelUrl,!0)];case 54:return Rt=dt.sent(),xe=t.as(lR),Ht=xe.created,Xt=xe.updated,Ke=xe.deleted,it(function(){return A(ct,void 0,void 0,function(){return I(this,function(ke){return this._openChannelHandlers.forEach(function(ge){Ht&&ge.onMetaCounterCreated&&ge.onMetaCounterCreated(Rt,Ht),Xt&&ge.onMetaCounterUpdated&&ge.onMetaCounterUpdated(Rt,Xt),Ke&&ge.onMetaCounterDeleted&&ge.onMetaCounterDeleted(Rt,Ke)}),[2]})})}),[3,57];case 55:return[4,this.getChannel($.channelUrl,!0)];case 56:return Ct=dt.sent(),Dt=t.as(LR),Vt=Dt.pinnedMessageIds,rn=Dt.latestPinnedMessage,(Zt=Dt.ts)>Ct._pinnedMessagesUpdatedAt&&(Ct.pinnedMessageIds=Vt,Ct.lastPinnedMessage=rn,Ct._pinnedMessagesUpdatedAt=Zt,this.upsertChannelsToCache([Ct]),it(function(){return A(ct,void 0,void 0,function(){var ke,ge,Xe,Et,Pt;return I(this,function(Jt){try{for(ke=Ge(this._openChannelHandlers.values()),ge=ke.next();!ge.done;ge=ke.next())(Xe=ge.value).onChannelChanged&&Xe.onChannelChanged(Ct)}catch(Tt){Et={error:Tt}}finally{try{ge&&!ge.done&&(Pt=ke.return)&&Pt.call(ke)}finally{if(Et)throw Et.error}}return[2]})})}),it(function(){return A(ct,void 0,void 0,function(){return I(this,function(ke){return this._openChannelHandlers.forEach(function(ge){ge.onPinnedMessageUpdated&&ge.onPinnedMessageUpdated(Ct)}),[2]})})})),[3,57];case 57:return[3,58];case 58:return[3,60];case 59:if(Mn=dt.sent(),Ai(Mn))throw Mn;return[3,60];case 60:return[2]}})})},n.prototype.addHandler=function(t,r){this._openChannelHandlers.set(t,r)},n.prototype.removeHandler=function(t){this._openChannelHandlers.delete(t)},n.prototype.clearHandler=function(){this._openChannelHandlers.clear()},n.prototype.getChannel=function(t,r){return r===void 0&&(r=!1),A(this,void 0,void 0,function(){var i;return I(this,function(a){switch(a.label){case 0:Oe(Z("string",t)).throw(ee.invalidParameters),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.getChannelFromCache(t)];case 2:return(i=a.sent())?[2,i]:[3,4];case 3:return a.sent(),[3,4];case 4:return[4,this.getChannelWithoutCache(t,r)];case 5:return[2,a.sent()]}})})},n.prototype.getChannelWithoutCache=function(t,r){return r===void 0&&(r=!1),A(this,void 0,void 0,function(){var i,a,s;return I(this,function(o){switch(o.label){case 0:return Oe(Z("string",t)).throw(ee.invalidParameters),i=new m9({channelUrl:t,isInternalCall:r}),[4,this._requestQueue.send(i)];case 1:return a=o.sent(),s=a.as(PN).channel,[4,this.upsertChannelsToCache([s])];case 2:return[2,o.sent()[0]]}})})},n.prototype.createChannel=function(t){return A(this,void 0,void 0,function(){var r,i,a,s;return I(this,function(o){switch(o.label){case 0:return r=Y(Y({},bO),t),Oe(function(l){return Qt("string",l.operatorUserIds,!0)&&(Z("string",l.coverUrlOrImage,!0)||Vr(l.coverUrlOrImage,!0))&&Z("string",l.name,!0)&&Z("string",l.data,!0)&&Z("string",l.customType,!0)&&(Z("string",l.channelUrl)&&/^\w+$/.test(l.channelUrl)||l.channelUrl===null||l.channelUrl===void 0)&&Z("boolean",l.isEphemeral,!0)}(r)).throw(ee.invalidParameters),i=new p9(r),[4,this._requestQueue.send(i)];case 1:return a=o.sent(),s=a.as(PN).channel,this.upsertChannelsToCache([s]),[2,s]}})})},n}(UR),xN={name:void 0,coverUrlOrImage:void 0,data:void 0,customType:void 0,operatorUserIds:void 0},E9=function(e){function n(t){var r=this,i=t.channelUrl,a=t.token,s=t.limit;return(r=e.call(this)||this).method=Ie.GET,r.path="".concat(sc,"/").concat(encodeURIComponent(i),"/participants"),r.params={token:a,limit:s},r}return z(n,e),n}(we),y9=function(e){function n(t,r){var i=e.call(this,t,r)||this;i.participants=[];var a=r.next,s=r.participants;return i.token=a,i.participants=s.map(function(o){return new jx(t,o)}),i}return z(n,e),n}(Pe),b9=function(e){function n(t,r,i){return e.call(this,t,r,ln.OPEN,i)||this}return z(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)},n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return I(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=X.of(this._iid).requestQueue,r=new E9(Y(Y({},this),{token:this._token})),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),a=i.as(y9),s=a.participants,o=a.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw ee.queryInProgress;case 4:return[3,6];case 5:throw ee.invalidParameters;case 6:return[2]}})})},n}(ro),C9=function(e){function n(t){var r=this,i=t.channelUrl,a=t.coverUrlOrImage,s=t.name,o=t.data,l=t.customType,u=t.operatorUserIds;return(r=e.call(this)||this).method=Ie.PUT,r.path="".concat(sc,"/").concat(encodeURIComponent(i)),r.params=Qe(vt({cover_url:Z("string",a)?a:null,cover_file:Vr(a)?a:null,name:s,data:o,custom_type:l,operators:u})),r}return z(n,e),n}(we),S9=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.channel=new ql(t,r),i}return z(n,e),n}(Pe),T9=function(e){function n(t){var r=this,i=t.channelUrl;return(r=e.call(this)||this).method=Ie.DELETE,r.path="".concat(sc,"/").concat(encodeURIComponent(i)),r}return z(n,e),n}(we);(function(e){function n(t,r){return e.call(this,t,r)||this}z(n,e)})(Pe);var ql=function(e){function n(t,r){var i,a=this;return(a=e.call(this,t,r)||this)._lastParticipantCountUpdated=0,a.participantCount=0,a.operators=[],a.lastPinnedMessage=null,a._pinnedMessagesUpdatedAt=0,a.channelType=ln.OPEN,a.participantCount=(i=r.participant_count)!==null&&i!==void 0?i:0,a.operators=Array.isArray(r.operators)?r.operators.map(function(s){return new Yt(t,s)}):[],a.lastPinnedMessage=r.latest_pinned_message?_i(a._iid,Y({channel_type:a.channelType},r.latest_pinned_message)):null,a}return z(n,e),n.payloadify=function(t){return Qe(vt(Y(Y({},op.payloadify(t)),{participant_count:t.participantCount,operators:t.operators.map(function(r){return Yt.payloadify(r)}),latest_pinned_message:t.lastPinnedMessage?vE(t.lastPinnedMessage):null})))},n.prototype.serialize=function(){return Ad(this)},n.prototype.isOperator=function(t){return t instanceof Yt?this.isOperator(t.userId):this.operators.some(function(r){return r.userId===t})},n.prototype._updateParticipantCount=function(t,r){return r>this._lastParticipantCountUpdated&&(this.participantCount=t,this._lastParticipantCountUpdated=r,!0)},n.prototype.createParticipantListQuery=function(t){return new b9(this._iid,this.url,t)},n.prototype.refresh=function(){return A(this,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return[4,Ms.of(this._iid).getChannelWithoutCache(this.url)];case 1:return[2,t.sent()]}})})},n.prototype.enter=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return I(this,function(l){switch(l.label){case 0:return t=X.of(this._iid).requestQueue,r=new g9({channelUrl:this.url}),[4,t.send(r)];case 1:return i=l.sent(),a=i.as(CO),s=a.participantCount,o=a.ts,this._updateParticipantCount(s,o),Ms.of(this._iid).setEnteredToCache(this),[2]}})})},n.prototype.exit=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return I(this,function(l){switch(l.label){case 0:return t=X.of(this._iid).requestQueue,r=new _9({channelUrl:this.url}),[4,t.send(r)];case 1:return i=l.sent(),a=i.as(SO),s=a.participantCount,o=a.ts,this._updateParticipantCount(s,o),Ms.of(this._iid).setExitedToCache(this),xr.of(this._iid).fileMessageQueue.cancel(this),[2]}})})},n.prototype.updateChannel=function(t){return A(this,void 0,void 0,function(){var r,i,a,s,o;return I(this,function(l){switch(l.label){case 0:return r=Y(Y({},xN),t),Oe(function(u){return Qt("string",u.operatorUserIds,!0)&&(Z("string",u.coverUrlOrImage,!0)||Vr(u.coverUrlOrImage,!0))&&Z("string",u.name,!0)&&Z("string",u.data,!0)&&Z("string",u.customType,!0)}(r)).throw(ee.invalidParameters),i=X.of(this._iid).requestQueue,a=new C9(Y({channelUrl:this.url},r)),[4,i.send(a)];case 1:return s=l.sent(),o=s.as(S9).channel,this._update(o),[4,Ms.of(this._iid).upsertChannelsToCache([o])];case 2:return l.sent(),[2,this]}})})},n.prototype.updateChannelWithOperatorUserIds=function(t,r,i,a,s){return A(this,void 0,void 0,function(){var o;return I(this,function(l){return o=Y(Y({},xN),{name:t,coverUrlOrImage:r,data:i,operatorUserIds:a,customType:s}),[2,this.updateChannel(o)]})})},n.prototype.delete=function(){return A(this,void 0,void 0,function(){var t,r;return I(this,function(i){switch(i.label){case 0:return t=X.of(this._iid).requestQueue,r=new T9({channelUrl:this.url}),[4,t.send(r)];case 1:return i.sent(),[4,Ms.of(this._iid).removeChannelsFromCache([this.url])];case 2:return i.sent(),[2]}})})},n.prototype.updateUserMessage=function(t,r){return A(this,void 0,void 0,function(){var i,a,s,o=this;return I(this,function(l){switch(l.label){case 0:return[4,e.prototype.updateUserMessage.call(this,t,r)];case 1:return i=l.sent(),a=!1,s=!1,this.lastPinnedMessage&&this.lastPinnedMessage.messageId===i.messageId&&(this.lastPinnedMessage=i,a=!0,s=!0),a&&Ms.of(this._iid).handlers.map(function(u){u.onChannelChanged&&u.onChannelChanged(o)}),s&&Ms.of(this._iid).handlers.map(function(u){u.onPinnedMessageUpdated&&u.onPinnedMessageUpdated(o)}),[2,i]}})})},n.prototype.updateFileMessage=function(t,r){return A(this,void 0,void 0,function(){var i,a,s,o=this;return I(this,function(l){switch(l.label){case 0:return[4,e.prototype.updateFileMessage.call(this,t,r)];case 1:return i=l.sent(),a=!1,s=!1,this.lastPinnedMessage&&this.lastPinnedMessage.messageId===i.messageId&&(this.lastPinnedMessage=i,a=!0,s=!0),a&&Ms.of(this._iid).handlers.map(function(u){u.onChannelChanged&&u.onChannelChanged(o)}),s&&Ms.of(this._iid).handlers.map(function(u){u.onPinnedMessageUpdated&&u.onPinnedMessageUpdated(o)}),[2,i]}})})},n}(op);(function(e){function n(t){t===void 0&&(t={});var r=e.call(this)||this;return Object.keys(t).forEach(function(i){r.hasOwnProperty(i)&&(r[i]=t[i])}),r}return z(n,e),n})(function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.onUserEntered=Bt,t.onUserExited=Bt,t.onChannelParticipantCountChanged=Bt,t.onPollUpdated=Bt,t.onPollVoted=Bt,t.onPollDeleted=Bt,t.onPinnedMessageUpdated=Bt,t}return z(n,e),n}(jR));var M9=function(e){function n(t){var r=this,i=t.token,a=t.limit,s=t.nameKeyword,o=t.urlKeyword,l=t.customTypes,u=t.includeFrozen,d=t.includeMetaData;return(r=e.call(this)||this).method=Ie.GET,r.path=sc,r.params=Qe({token:i,limit:a,name_contains:s,url_contains:o,custom_types:l,show_frozen:u,show_metadata:d,show_pinned_messages:!0}),r}return z(n,e),n}(we),N9=function(e){function n(t,r){var i=e.call(this,t,r)||this;i.channels=[];var a=r.next,s=r.channels,o=r.ts;return i.token=a,s&&s.length>0&&(i.channels=s.map(function(l){return new ql(t,l)})),i.ts=typeof o=="number"?o:null,i}return z(n,e),n}(Pe),I9=function(e){function n(t,r){var i,a,s,o,l,u=this;return(u=e.call(this,t,r)||this).includeFrozen=!0,u.includeMetaData=!0,u.nameKeyword=null,u.urlKeyword=null,u.customTypes=null,u.includeFrozen=(i=r.includeFrozen)===null||i===void 0||i,u.includeMetaData=(a=r.includeMetaData)===null||a===void 0||a,u.nameKeyword=(s=r.nameKeyword)!==null&&s!==void 0?s:null,u.urlKeyword=(o=r.urlKeyword)!==null&&o!==void 0?o:null,u.customTypes=(l=r.customTypes)!==null&&l!==void 0?l:null,u}return z(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&Z("boolean",this.includeFrozen)&&Z("boolean",this.includeMetaData)&&Z("string",this.nameKeyword,!0)&&Z("string",this.urlKeyword,!0)&&Qt("string",this.customTypes,!0)},n.prototype.next=function(){return A(this,void 0,void 0,function(){var t,r,i,a,s,o;return I(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,4]:this._hasNext?(this._isLoading=!0,t=X.of(this._iid).requestQueue,r=new M9(vt(Y(Y({},this),{token:this._token}))),[4,t.send(r)]):[3,3]:[3,6];case 1:return i=l.sent(),a=i.as(N9),s=a.channels,o=a.token,this._token=o,this._hasNext=!!o,[4,Ms.of(this._iid).upsertChannelsToCache(s)];case 2:return l.sent(),this._isLoading=!1,[2,s];case 3:return[2,[]];case 4:throw ee.queryInProgress;case 5:return[3,7];case 6:throw ee.invalidParameters;case 7:return[2]}})})},n}(qo),A9=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.name="openChannel",t}return z(n,e),n.prototype.init=function(t,r){var i=r.sdkState,a=r.dispatcher,s=r.sessionManager,o=r.requestQueue,l=r.logger,u=r.onlineDetector,d=r.cacheContext;e.prototype.init.call(this,t,{sdkState:i,dispatcher:a,sessionManager:s,requestQueue:o,logger:l,onlineDetector:u,cacheContext:d}),this._manager=new Ms(t,{sdkState:i,dispatcher:a,requestQueue:o,logger:l,cacheContext:d,sessionManager:s})},n.prototype.createOpenChannelListQuery=function(t){return t===void 0&&(t={}),new I9(this._iid,t)},n.prototype.addOpenChannelHandler=function(t,r){this._manager.addHandler(t,r)},n.prototype.removeOpenChannelHandler=function(t){this._manager.removeHandler(t)},n.prototype.removeAllOpenChannelHandlers=function(){this._manager.clearHandler()},n.prototype.buildOpenChannelFromSerializedData=function(t){return this._manager.buildOpenChannelFromSerializedData(t)},n.prototype.getChannel=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){return[2,this._manager.getChannel(t)]})})},n.prototype.getChannelWithoutCache=function(t){return A(this,void 0,void 0,function(){return I(this,function(r){return[2,this._manager.getChannelWithoutCache(t)]})})},n.prototype.createChannel=function(t){return t===void 0&&(t={}),A(this,void 0,void 0,function(){return I(this,function(r){return[2,this._manager.createChannel(t)]})})},n.prototype.createChannelWithOperatorUserIds=function(t,r,i,a,s){return A(this,void 0,void 0,function(){var o;return I(this,function(l){return(o=Y({},bO)).name=t,o.coverUrlOrImage=r,o.data=i,o.operatorUserIds=a,o.customType=s,[2,this._manager.createChannel(o)]})})},n}(Pp),vm=function(e,n){return D(D({},e),{stores:D(D({},e.stores),{appInfoStore:D(D({},e.stores.appInfoStore),n)})})},mm=function(e,n){return D(D({},e),{stores:D(D({},e.stores),{sdkStore:D(D({},e.stores.sdkStore),n)})})},R_=function(e,n){return D(D({},e),{stores:D(D({},e.stores),{userStore:D(D({},e.stores.userStore),n)})})};function w9(e){var n=e.appId,t=e.customApiHost,r=e.customWebSocketHost,i=e.sdkInitParams,a=i===void 0?{}:i,s=Object.assign(a,{appId:n,modules:[new D5,new A9],localCacheEnabled:!0});return t&&(s.customApiHost=t),r&&(s.customWebSocketHost=r),Q7.init(s)}var O_="3.16.3";function R9(e,n){var t,r,i=n.logger,a=n.sessionHandler,s=n.isMobile,o=n.customExtensionParams;(t=i.info)===null||t===void 0||t.call(i,"SendbirdProvider | useConnect/setupConnection/setVersion",{version:O_}),e.addExtension("sb_uikit",O_),e.addSendbirdExtensions([{product:aE.UIKIT_CHAT,version:O_,platform:$u==null?void 0:$u.JS}],{platform:s?Pl.MOBILE_WEB:Pl.WEB},o),a&&((r=i.info)===null||r===void 0||r.call(i,"SendbirdProvider | useConnect/setupConnection/configureSession",a),e.setSessionHandler(a))}var O9="No sendbird state value available. Make sure you are rendering `<SendbirdProvider>` at the top of your app.",yt=function(){var e,n=M.useContext(qb);if(!n)throw new Error(O9);var t=Ql.useSyncExternalStore(n.subscribe,n.getState),r=M.useMemo(function(){return{initMessageTemplateInfo:function(i){var a=i.payload;n.setState(function(s){return vm(s,{messageTemplatesInfo:a,waitingTemplateKeysMap:{}})})},upsertMessageTemplates:function(i){var a=i.payload,s=t.stores.appInfoStore,o=s.messageTemplatesInfo;if(!o)return t;var l=D({},s.waitingTemplateKeysMap);a.forEach(function(u){var d=u.key,f=u.template;o.templatesMap[d]=f,delete l[d]}),n.setState(function(u){return vm(u,{waitingTemplateKeysMap:l,messageTemplatesInfo:o})})},upsertWaitingTemplateKeys:function(i){var a=i.payload,s=t.stores.appInfoStore,o=a.keys,l=a.requestedAt,u=D({},s.waitingTemplateKeysMap);o.forEach(function(d){var f,m;u[d]={erroredMessageIds:(m=(f=u[d])===null||f===void 0?void 0:f.erroredMessageIds)!==null&&m!==void 0?m:[],requestedAt:l}}),n.setState(function(d){return vm(d,{waitingTemplateKeysMap:u})})},markErrorWaitingTemplateKeys:function(i){var a=i.payload,s=t.stores.appInfoStore,o=a.keys,l=a.messageId,u=D({},s.waitingTemplateKeysMap);o.forEach(function(d){var f=u[d];f&&f.erroredMessageIds.indexOf(l)===-1&&f.erroredMessageIds.push(l)}),n.setState(function(d){return vm(d,{waitingTemplateKeysMap:u})})},setSdkLoading:function(i){n.setState(function(a){return mm(a,{initialized:!1,loading:i})})},sdkError:function(){n.setState(function(i){return mm(i,{initialized:!1,loading:!1,error:!0})})},initSdk:function(i){n.setState(function(a){return mm(a,{sdk:i,initialized:!0,loading:!1,error:!1})})},resetSdk:function(){n.setState(function(i){return mm(i,{sdk:{},initialized:!1,loading:!1,error:!1})})},initUser:function(i){n.setState(function(a){return R_(a,{initialized:!0,loading:!1,user:i})})},resetUser:function(){n.setState(function(i){return R_(i,{initialized:!1,loading:!1,user:{}})})},updateUserInfo:function(i){n.setState(function(a){return R_(a,{user:i})})},connect:function(i){return tn(void 0,void 0,void 0,function(){var a,s,o,l,u,d,f,m,p,E,_,b,C,y,T,N,w,O,L,P,U,B,F,H;return nn(this,function(G){switch(G.label){case 0:return a=i.logger,s=i.userId,o=i.appId,l=i.accessToken,u=i.nickname,d=i.profileUrl,f=i.isMobile,m=i.sdkInitParams,p=i.customApiHost,E=i.customWebSocketHost,_=i.customExtensionParams,b=i.eventHandlers,C=i.initializeMessageTemplatesInfo,y=i.configureSession,T=i.initDashboardConfigs,[4,r.disconnect({logger:a})];case 1:G.sent(),N=w9({appId:o,customApiHost:p,customWebSocketHost:E,sdkInitParams:m}),R9(N,{logger:a,isMobile:f,customExtensionParams:_,sessionHandler:y?y(N):void 0}),r.setSdkLoading(!0),G.label=2;case 2:return G.trys.push([2,8,,9]),[4,N.connect(s,l)];case 3:return w=G.sent(),r.initUser(w),u||d?[4,N.updateCurrentUserInfo({nickname:u||w.nickname||"",profileUrl:d||w.profileUrl})]:[3,5];case 4:G.sent(),G.label=5;case 5:return[4,C==null?void 0:C(N)];case 6:return G.sent(),[4,T==null?void 0:T(N)];case 7:return G.sent(),r.initSdk(N),(U=(P=b==null?void 0:b.connection)===null||P===void 0?void 0:P.onConnected)===null||U===void 0||U.call(P,w),[3,9];case 8:return O=G.sent(),L=O,r.resetSdk(),r.resetUser(),(B=a.error)===null||B===void 0||B.call(a,"SendbirdProvider | useSendbird/connect failed",L),(H=(F=b==null?void 0:b.connection)===null||F===void 0?void 0:F.onFailed)===null||H===void 0||H.call(F,L),[3,9];case 9:return[2]}})})},disconnect:function(i){return tn(void 0,[i],void 0,function(a){var s,o,l=a.logger;return nn(this,function(u){switch(u.label){case 0:return r.setSdkLoading(!0),s=t.stores.sdkStore.sdk,s!=null&&s.disconnectWebSocket?[4,s.disconnectWebSocket()]:[3,2];case 1:u.sent(),u.label=2;case 2:return r.resetSdk(),r.resetUser(),(o=l.info)===null||o===void 0||o.call(l,"SendbirdProvider | useSendbird/disconnect completed"),[2]}})})}}},[n,(e=t.stores.sdkStore)===null||e===void 0?void 0:e.sdk,t.stores.appInfoStore]);return{state:t,actions:r}},TO="INITIALIZE_AUDIO_UNIT",xE="RESET_AUDIO_UNIT",MO="SET_CURRENT_PLAYER",NO="ON_VOICE_PLAYER_PLAY",IO="ON_VOICE_PLAYER_PAUSE",AO="ON_CURRENT_TIME_UPDATE",As={IDLE:"IDLE",PREPARING:"PREPARING",PLAYING:"PLAYING",PAUSED:"PAUSED",COMPLETED:"COMPLETED"},Uu=function(){return{audioFile:null,playbackTime:0,duration:1e3,playingStatus:As.IDLE}},L9={currentPlayer:null,currentGroupKey:"",audioStorage:{}};function U9(e,n){var t,r,i,a,s,o,l,u,d;switch(n.type){case TO:{var f=n.payload.groupKey,m=!((o=e.audioStorage)===null||o===void 0)&&o[f]?e.audioStorage[f]:Uu();return m.playingStatus=As.PREPARING,D(D({},e),{audioStorage:D(D({},e.audioStorage),(t={},t[f]=m,t))})}case xE:{var f=n.payload.groupKey;return D(D({},e),{audioStorage:D(D({},e.audioStorage),(r={},r[f]=Uu(),r))})}case MO:{var p=n.payload,E=p.audioPlayer,f=p.groupKey;return D(D({},e),{currentPlayer:E,currentGroupKey:f})}case NO:{var _=n.payload,f=_.groupKey,b=_.audioFile,m=!((l=e.audioStorage)===null||l===void 0)&&l[f]?e.audioStorage[f]:Uu();return m.audioFile=b,m.playingStatus=As.PLAYING,D(D({},e),{audioStorage:D(D({},e.audioStorage),(i={},i[f]=m,i))})}case IO:{var C=n.payload,f=C.groupKey,y=C.duration,T=C.currentTime,m=!((u=e.audioStorage)===null||u===void 0)&&u[f]?e.audioStorage[f]:Uu();return m.playingStatus=As.PAUSED,y===T&&(m.playbackTime=0),D(D({},e),{audioStorage:D(D({},e.audioStorage),(a={},a[f]=m,a))})}case AO:{var f=n.payload.groupKey,N=e.currentPlayer,T=N.currentTime,y=N.duration,m=!((d=e.audioStorage)===null||d===void 0)&&d[f]?e.audioStorage[f]:Uu();return m.playbackTime===m.duration&&m.playingStatus===As.PAUSED?m.playbackTime=0:T>0&&y>0&&(m.playbackTime=T,m.duration=y),D(D({},e),{audioStorage:D(D({},e.audioStorage),(s={},s[f]=m,s))})}default:return e}}var D9=function(e,n){return e===void 0&&(e=""),n===void 0&&(n=""),"".concat(e,"-").concat(n)},FN=function(e){return zb(navigator.userAgent)&&e.includes("m4a")?{name:wB,mimeType:RB}:{name:_d,mimeType:xo}},FE="ALL",L_=function(){},k9={currentGroupKey:"",currentPlayer:null,audioStorage:{}},wO=M.createContext({play:L_,pause:L_,stop:L_,voicePlayerStore:k9}),P9=function(e){var n=e.children,t=M.useReducer(U9,L9),r=t[0],i=t[1],a=r.currentGroupKey,s=r.currentPlayer,o=r.audioStorage,l=yt().state,u=l.config,d=u.logger,f=function(E){E===void 0&&(E=""),a.includes(E)&&(d.info("VoicePlayer: Pause playing(by text)."),m(a))},m=function(E){s?E===a?(d.info("VoicePlayer: Pause playing(by group key)."),s.pause()):E===FE&&(d.info("VoicePlayer: Pause playing(all)."),s.pause()):d.warning("VoicePlayer: No currentPlayer to pause.")},p=function(E){var _=E.groupKey,b=E.audioFile,C=E.audioFileUrl,y=C===void 0?"":C,T=E.audioFileMimeType,N=T===void 0?xo:T;_!==a&&m(a);var w=document.getElementById(Pm),O=document.getElementById(RE);w&&O&&w.removeChild(O),d.info("VoicePlayer: Start getting audio file."),new Promise(function(L,P){var U;if(i({type:TO,payload:{groupKey:_}}),b){d.info("VoicePlayer: Use the audioFile instance."),L(b);return}var B=(U=o==null?void 0:o[_])===null||U===void 0?void 0:U.audioFile;if(B){d.info("VoicePlayer: Get from the audioStorage."),L(B);return}fetch(y).then(function(F){return F.blob()}).then(function(F){var H=new File([F],FN(N).name,{lastModified:new Date().getTime(),type:FN(N).mimeType});L(H),d.info("VoicePlayer: Get the audioFile from URL.")}).catch(P)}).then(function(L){var P,U=document.getElementById(Pm);d.info("VoicePlayer: Succeeded getting audio file.",{audioFile:L});var B=o[_]||Uu(),F=new Audio((P=URL==null?void 0:URL.createObjectURL)===null||P===void 0?void 0:P.call(URL,L));F.id=RE,F.currentTime=B.playbackTime,F.volume=1,F.loop=!1,F.onplaying=function(){d.info("VoicePlayer: OnPlaying event is called from audioPlayer",{groupKey:_,audioPlayer:F}),i({type:NO,payload:{groupKey:_,audioFile:L}})},F.onpause=function(){d.info("VoicePlayer: OnPause event is called from audioPlayer",{groupKey:_,audioPlayer:F}),i({type:IO,payload:{groupKey:_,duration:F.duration,currentTime:F.currentTime}})},F.ontimeupdate=function(){i({type:AO,payload:{groupKey:_}})},F.onerror=function(H){d.error("VoicePlayer: Failed to load the audioFile on the audio player.",H),i({type:xE,payload:{groupKey:_}})},F.dataset.sbGroupId=_;try{U==null||U.childNodes.forEach(function(H){var G,j,x=H,V=(G=x.dataset)===null||G===void 0?void 0:G.sbGroupKey;V!==_&&((j=x==null?void 0:x.pause)===null||j===void 0||j.call(x),U.removeChild(x),d.info("VoicePlayer: Removed other player.",{element:x}))})}finally{F==null||F.play(),U==null||U.appendChild(F),i({type:MO,payload:{groupKey:_,audioPlayer:F}}),d.info("VoicePlayer: Succeeded playing audio player.",{groupKey:_,audioPlayer:F})}}).catch(function(L){d.warning("VoicePlayer: Failed loading audio file with URL.",L),i({type:xE,payload:{groupKey:_}})})};return v.createElement(wO.Provider,{value:{play:p,pause:m,stop:f,voicePlayerStore:r}},v.createElement("div",{id:Pm,style:{display:"none"}}),n)},RO=function(){return M.useContext(wO)},x9={en:{MESSAGE_STATUS__YESTERDAY:"Yesterday",CHANNEL__MESSAGE_LIST__NOTIFICATION__NEW_MESSAGE:"new message(s) since",CHANNEL__MESSAGE_LIST__NOTIFICATION__ON:"on",CHANNEL_PREVIEW_MOBILE_LEAVE:"Leave channel",CHANNEL_SETTING__HEADER__TITLE:"Channel information",CHANNEL_SETTING__PROFILE__EDIT:"Edit",CHANNEL_SETTING__MEMBERS__TITLE:"Members",CHANNEL_SETTING__MEMBERS__SEE_ALL_MEMBERS:"All members",CHANNEL_SETTING__MEMBERS__INVITE_MEMBER:"Invite users",CHANNEL_SETTING__MEMBERS__YOU:" (You)",CHANNEL_SETTING__MEMBERS__SELECT_TITLE:"Select members",CHANNEL_SETTING__MEMBERS__OPERATOR:"Operator",CHANNEL_SETTING__LEAVE_CHANNEL__TITLE:"Leave channel",CHANNEL_SETTING__OPERATORS__TITLE:"Operators",CHANNEL_SETTING__OPERATORS__TITLE_ALL:"All operators",CHANNEL_SETTING__OPERATORS__TITLE_ADD:"Add operator",CHANNEL_SETTING__OPERATORS__ADD_BUTTON:"Add",CHANNEL_SETTING__MUTED_MEMBERS__TITLE:"Muted members",CHANNEL_SETTING__MUTED_MEMBERS__TITLE_ALL:"All muted members",CHANNEL_SETTING__NO_UNMUTED:"No muted members yet",CHANNEL_SETTING__BANNED_MEMBERS__TITLE:"Banned users",CHANNEL_SETTING__FREEZE_CHANNEL:"Freeze Channel",CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR:"Register as operator",CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR:"Unregister operator",CHANNEL_SETTING__MODERATION__MUTE:"Mute",CHANNEL_SETTING__MODERATION__UNMUTE:"Unmute",CHANNEL_SETTING__MODERATION__BAN:"Ban",CHANNEL_SETTING__MODERATION__UNBAN:"Unban",CHANNEL_SETTING__MODERATION__EMPTY_BAN:"No banned members yet",CHANNEL_SETTING__MODERATION__ALL_BAN:"All banned members",OPEN_CHANNEL_CONVERSATION__TITLE_PARTICIPANTS:"participants",OPEN_CHANNEL_CONVERSATION__SELECT_PARTICIPANTS:"Select participants",OPEN_CHANNEL_LIST__TITLE:"Channels",CREATE_OPEN_CHANNEL_LIST__TITLE:"New channel profile",CREATE_OPEN_CHANNEL_LIST__SUBTITLE__IMG_SECTION:"Channel image",CREATE_OPEN_CHANNEL_LIST__SUBTITLE__IMG_UPLOAD:"Upload",CREATE_OPEN_CHANNEL_LIST__SUBTITLE__TEXT_SECTION:"Channel name",CREATE_OPEN_CHANNEL_LIST__SUBTITLE__TEXT_PLACE_HOLDER:"Enter channel name",CREATE_OPEN_CHANNEL_LIST__SUBMIT:"Create",OPEN_CHANNEL_SETTINGS__OPERATOR_TITLE:"Channel Information",OPEN_CHANNEL_SETTINGS__OPERATOR_URL:"URL",OPEN_CHANNEL_SETTINGS__PARTICIPANTS_ACCORDION_TITLE:"Participants",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_PANEL:"Delete channel",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_TITLE:"Delete channel?",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_CONTEXT:"Once deleted, this channel can't be restored.",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_SUBMIT:"Delete",OPEN_CHANNEL_SETTINGS__OPERATORS_TITLE:"Operators",OPEN_CHANNEL_SETTINGS__OPERATORS__TITLE_ADD:"Add operator",OPEN_CHANNEL_SETTINGS__OPERATORS__TITLE_ALL:"All operators",OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE:"Muted participants",OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE_ALL:"All muted participants",OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__NO_ONE:"No muted participants yet",OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__TITLE:"Banned users",OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__TITLE_ALL:"All banned users",OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__NO_ONE:"No banned users yet",OPEN_CHANNEL_SETTINGS__MEMBERS__YOU:" (You)",OPEN_CHANNEL_SETTINGS__MEMBERS__OPERATOR:"Operator",OPEN_CHANNEL_SETTINGS__PARTICIPANTS_TITLE:"Participants",OPEN_CHANNEL_SETTINGS__EMPTY_LIST:"No participants yet",OPEN_CHANNEL_SETTINGS__SEE_ALL:"See all participants",OPEN_CHANNEL_SETTINGS__ALL_PARTICIPANTS_TITLE:"All participants",OPEN_CHANNEL_SETTINGS__NO_TITLE:"(No title)",OPEN_CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR:"Register as operator",OPEN_CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR:"Unregister operator",OPEN_CHANNEL_SETTING__MODERATION__MUTE:"Mute",OPEN_CHANNEL_SETTING__MODERATION__UNMUTE:"Unmute",OPEN_CHANNEL_SETTING__MODERATION__BAN:"Ban",OPEN_CHANNEL_SETTING__MODERATION__UNBAN:"Unban",TRYING_TO_CONNECT:"Trying to connect",TYPING_INDICATOR__IS_TYPING:"is typing...",TYPING_INDICATOR__AND:"and",TYPING_INDICATOR__ARE_TYPING:"are typing...",TYPING_INDICATOR__MULTIPLE_TYPING:"Several people are typing...",CHANNEL_FROZEN:"Channel frozen",PLACE_HOLDER__NO_CHANNEL:"No channels",PLACE_HOLDER__WRONG:"Something went wrong",PLACE_HOLDER__RETRY_TO_CONNECT:"Retry",PLACE_HOLDER__NO_MESSAGES:"No messages",TOOLTIP__AND_YOU:", and you",TOOLTIP__YOU:"you",TOOLTIP__UNKNOWN_USER:"(no name)",UNKNOWN__UNKNOWN_MESSAGE_TYPE:"(Unknown message type)",UNKNOWN__CANNOT_READ_MESSAGE:"Cannot read this message.",UNKNOWN__TEMPLATE_ERROR:"(Template error)",FORM_VERSION_ERROR:"Form type messages are not available in this version.",UNKNOWN__CANNOT_READ_TEMPLATE:"Cannot read this template.",MESSAGE_EDITED:"(edited)",MODAL__DELETE_MESSAGE__TITLE:"Delete this message?",MODAL__CHANNEL_INFORMATION__TITLE:"Edit channel information",MODAL__CHANNEL_INFORMATION__CHANNEL_IMAGE:"Channel image",MODAL__CHANNEL_INFORMATION__UPLOAD:"Upload",MODAL__CHANNEL_INFORMATION__CHANNEL_NAME:"Channel name",MODAL__CHANNEL_INFORMATION__INPUT__PLACE_HOLDER:"Enter name",MODAL__INVITE_MEMBER__TITLE:"Invite member",MODAL__INVITE_MEMBER__SELECTED:"selected",MODAL__CHOOSE_CHANNEL_TYPE__TITLE:"New channel",MODAL__CHOOSE_CHANNEL_TYPE__GROUP:"Group",MODAL__CHOOSE_CHANNEL_TYPE__SUPER_GROUP:"Super group",MODAL__CHOOSE_CHANNEL_TYPE__BROADCAST:"Broadcast",MODAL__CREATE_CHANNEL__TITLE:"New channel",MODAL__CREATE_CHANNEL__GROUP:"Group",MODAL__CREATE_CHANNEL__SUPER:"Super group",MODAL__CREATE_CHANNEL__BROADCAST:"Broadcast",MODAL__CREATE_CHANNEL__SELECTED:"selected",MODAL__LEAVE_CHANNEL__TITLE:"Leave this channel?",MODAL__LEAVE_CHANNEL__FOOTER:"Leave",MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_MUTED:"You're muted by the operator.",MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_FROZEN:"Channel is frozen.",USER_PROFILE__MESSAGE:"Message",USER_PROFILE__USER_ID:"User ID",EDIT_PROFILE__TITLE:"My profile",EDIT_PROFILE__IMAGE_LABEL:"Profile image",EDIT_PROFILE__IMAGE_UPLOAD:"Upload",EDIT_PROFILE__NICKNAME_LABEL:"Nickname",EDIT_PROFILE__NICKNAME_PLACEHOLDER:"Enter your nickname",EDIT_PROFILE__USERID_LABEL:"User ID",EDIT_PROFILE__THEME_LABEL:"Dark theme",MESSAGE_INPUT__PLACE_HOLDER:"Enter message",MESSAGE_INPUT__PLACE_HOLDER__DISABLED:"Chat is unavailable in this channel",MESSAGE_INPUT__PLACE_HOLDER__SUGGESTED_REPLIES:"Please choose one from above",MESSAGE_INPUT__PLACE_HOLDER__MESSAGE_FORM:"Please fill out the message form.",MESSAGE_INPUT__PLACE_HOLDER__FROZEN:"Chat is unavailable in this channel",MESSAGE_INPUT__PLACE_HOLDER__MUTED:"Chat is unavailable because you're muted",MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT:"You're muted",MESSAGE_INPUT__QUOTE_REPLY__PLACE_HOLDER:"Reply to message",BUTTON__SUBMIT:"Submit",BUTTON__CANCEL:"Cancel",BUTTON__DELETE:"Delete",BUTTON__SAVE:"Save",BUTTON__CREATE:"Create",BUTTON__INVITE:"Invite",BUTTON__OK:"OK",BADGE__OVER:"+",NO_TITLE:"No title",NO_NAME:"(No name)",NO_MEMBERS:"(No members)",LABEL__OPERATOR:"Operator",MESSAGE_MENU__COPY:"Copy",MESSAGE_MENU__REPLY:"Reply",MESSAGE_MENU__THREAD:"Reply in thread",MESSAGE_MENU__OPEN_IN_CHANNEL:"Open in channel",MESSAGE_MENU__EDIT:"Edit",MESSAGE_MENU__RESEND:"Resend",MESSAGE_MENU__DELETE:"Delete",MESSAGE_MENU__SAVE:"Save",CONTEXT_MENU_DROPDOWN__COPY:"Copy",CONTEXT_MENU_DROPDOWN__EDIT:"Edit",CONTEXT_MENU_DROPDOWN__RESEND:"Resend",CONTEXT_MENU_DROPDOWN__DELETE:"Delete",CONTEXT_MENU_DROPDOWN__SAVE:"Save",SEARCH:"Search",SEARCH_IN_CHANNEL:"Search in channel",SEARCH_IN:"Search in",SEARCHING:"Searching for messages...",NO_SEARCHED_MESSAGE:"No results found.",QUOTE_MESSAGE_INPUT__REPLY_TO:"Reply to",QUOTE_MESSAGE_INPUT__FILE_TYPE_IMAGE:"Photo",QUOTE_MESSAGE_INPUT__FILE_TYPE_GIF:"GIF",QUOTE_MESSAGE_INPUT__FILE_TYPE__VIDEO:"Video",QUOTED_MESSAGE__REPLIED_TO:"replied to",QUOTED_MESSAGE__CURRENT_USER:"You",QUOTED_MESSAGE__UNAVAILABLE:"Message unavailable",THREAD__HEADER_TITLE:"Thread",CHANNEL__THREAD_REPLY:"reply",CHANNEL__THREAD_REPLIES:"replies",CHANNEL__THREAD_OVER_MAX:"99+",THREAD__THREAD_REPLY:"reply",THREAD__THREAD_REPLIES:"replies",THREAD__INPUT__REPLY_TO_THREAD:"Reply to thread",THREAD__INPUT__REPLY_IN_THREAD:"Reply in thread",MENTION_NAME__NO_NAME:"(No name)",MENTION_COUNT__OVER_LIMIT:"You can mention up to %d times at a time.",UI__FILE_VIEWER__UNSUPPORT:"Unsupported message",VOICE_RECORDING_PERMISSION_DENIED:`You cannot record the voice since
        voice recording is not permitted in your device system setting`,VOICE_MESSAGE:"Voice Message",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_GIF:"GIF",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_PHOTO:"Photo",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_VIDEO:"Video",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_AUDIO:"Audio",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_VOICE_MESSAGE:"Voice message",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_GENERAL:"File",CHANNEL_PREVIEW_LAST_MESSAGE_TEMPLATE_MESSAGE:"Message",DATE_FORMAT__MESSAGE_LIST__NOTIFICATION__UNREAD_SINCE:"p 'on' MMM dd",DATE_FORMAT__MESSAGE_LIST__DATE_SEPARATOR:"MMMM dd, yyyy",DATE_FORMAT__THREAD_LIST__DATE_SEPARATOR:"MMM dd, yyyy",DATE_FORMAT__MESSAGE_CREATED_AT:"p",DATE_FORMAT__UNREAD_SINCE:"p MMM dd",DATE_FORMAT__LAST_MESSAGE_CREATED_AT__TODAY:"p",DATE_FORMAT__LAST_MESSAGE_CREATED_AT__THIS_YEAR:"MMM d",DATE_FORMAT__LAST_MESSAGE_CREATED_AT__PREVIOUS_YEAR:"yyyy/M/d",FILE_UPLOAD_NOTIFICATION__COUNT_LIMIT:"Up to %d files can be attached.",FILE_UPLOAD_NOTIFICATION__SIZE_LIMIT:"The maximum size per file is %d MB.",FEEDBACK_LIKE:"Like",FEEDBACK_DISLIKE:"Dislike",EDIT_COMMENT:"Edit comment",REMOVE_FEEDBACK:"Remove Feedback",FEEDBACK_MODAL_TITLE:"Provide additional feedback (optional)",FEEDBACK_CONTENT_PLACEHOLDER:"Leave a comment",BUTTON__REMOVE_FEEDBACK:"Remove feedback",FEEDBACK_FAILED_SUBMIT:"Couldnt submit. Try again.",FEEDBACK_FAILED_SAVE:"Couldnt save. Try again.",FEEDBACK_FAILED_DELETE:"Couldnt delete. Try again.",FORM_ITEM_REQUIRED:"This field is required",FORM_ITEM_INVALID:"Please check the value",FORM_ITEM_OPTIONAL_EMPTY:"No Response"}},Kb=function(e){return x9[e]},F9={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},B9=function(n,t,r){var i,a=F9[n];return typeof a=="string"?i=a:t===1?i=a.one:i=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};function U_(e){return function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=n.width?String(n.width):e.defaultWidth,r=e.formats[t]||e.formats[e.defaultWidth];return r}}var H9={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},G9={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},z9={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},j9={date:U_({formats:H9,defaultWidth:"full"}),time:U_({formats:G9,defaultWidth:"full"}),dateTime:U_({formats:z9,defaultWidth:"full"})},V9={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},$9=function(n,t,r,i){return V9[n]};function Nh(e){return function(n,t){var r=t!=null&&t.context?String(t.context):"standalone",i;if(r==="formatting"&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,s=t!=null&&t.width?String(t.width):a;i=e.formattingValues[s]||e.formattingValues[a]}else{var o=e.defaultWidth,l=t!=null&&t.width?String(t.width):e.defaultWidth;i=e.values[l]||e.values[o]}var u=e.argumentCallback?e.argumentCallback(n):n;return i[u]}}var q9={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},K9={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},W9={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Q9={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Y9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},X9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Z9=function(n,t){var r=Number(n),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},J9={ordinalNumber:Z9,era:Nh({values:q9,defaultWidth:"wide"}),quarter:Nh({values:K9,defaultWidth:"wide",argumentCallback:function(n){return n-1}}),month:Nh({values:W9,defaultWidth:"wide"}),day:Nh({values:Q9,defaultWidth:"wide"}),dayPeriod:Nh({values:Y9,defaultWidth:"wide",formattingValues:X9,defaultFormattingWidth:"wide"})};function Ih(e){return function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=n.match(i);if(!a)return null;var s=a[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?t$(o,function(f){return f.test(s)}):e$(o,function(f){return f.test(s)}),u;u=e.valueCallback?e.valueCallback(l):l,u=t.valueCallback?t.valueCallback(u):u;var d=n.slice(s.length);return{value:u,rest:d}}}function e$(e,n){for(var t in e)if(e.hasOwnProperty(t)&&n(e[t]))return t}function t$(e,n){for(var t=0;t<e.length;t++)if(n(e[t]))return t}function n$(e){return function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.match(e.matchPattern);if(!r)return null;var i=r[0],a=n.match(e.parsePattern);if(!a)return null;var s=e.valueCallback?e.valueCallback(a[0]):a[0];s=t.valueCallback?t.valueCallback(s):s;var o=n.slice(i.length);return{value:s,rest:o}}}var r$=/^(\d+)(th|st|nd|rd)?/i,i$=/\d+/i,a$={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},s$={any:[/^b/i,/^(a|c)/i]},o$={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},l$={any:[/1/i,/2/i,/3/i,/4/i]},u$={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},c$={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},d$={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},h$={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},f$={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},v$={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},m$={ordinalNumber:n$({matchPattern:r$,parsePattern:i$,valueCallback:function(n){return parseInt(n,10)}}),era:Ih({matchPatterns:a$,defaultMatchWidth:"wide",parsePatterns:s$,defaultParseWidth:"any"}),quarter:Ih({matchPatterns:o$,defaultMatchWidth:"wide",parsePatterns:l$,defaultParseWidth:"any",valueCallback:function(n){return n+1}}),month:Ih({matchPatterns:u$,defaultMatchWidth:"wide",parsePatterns:c$,defaultParseWidth:"any"}),day:Ih({matchPatterns:d$,defaultMatchWidth:"wide",parsePatterns:h$,defaultParseWidth:"any"}),dayPeriod:Ih({matchPatterns:f$,defaultMatchWidth:"any",parsePatterns:v$,defaultParseWidth:"any"})},OO={code:"en-US",formatDistance:B9,formatLong:j9,formatRelative:$9,localize:J9,match:m$,options:{weekStartsOn:0,firstWeekContainsDate:1}},LO={stringSet:Kb("en"),dateLocale:OO},On=v.createContext(LO),p$=function(e){var n=e.children;return v.createElement(On.Provider,{value:D(D({},LO),e)},n)},Ut=function(){var e=v.useContext(On);if(!e)throw new Error("`useLocalization` hook must be used within `SendbirdProvider` that includes `LocalizationProvider`.");return e},kd=Vw(),g$=function(e){return new Promise(function(n){setTimeout(n,e)})},_n=function(){},sa=function(e){var n={};return Object.entries(e).forEach(function(t){var r=t[0],i=t[1];i!=null&&(n[r]=i)}),n};function Pd(e){var n=e;n&&(!n.startsWith("http://")&&!n.startsWith("https://")&&(n="https://"+n),window.open(n,"_blank","noopener,noreferrer"))}function zt(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.filter(Boolean).join(" ")}var _$=!1,UO="sendbird--mobile-mode",DO=v.createContext({breakpoint:_$,isMobile:!1}),BN=function(){try{var e=document.querySelector("body");e==null||e.classList.add(UO)}catch{}},HN=function(){try{var e=document.querySelector("body");e==null||e.classList.remove(UO)}catch{}},E$=function(e){var n=e.children,t=e.logger,r=(e==null?void 0:e.breakpoint)||!1,i=M.useState(!1),a=i[0],s=i[1];return M.useEffect(function(){var o,l=function(){var u;if(typeof r=="boolean")s(r),r?BN():HN();else{var d=window.matchMedia("(max-width: ".concat(r,")"));(u=t==null?void 0:t.info)===null||u===void 0||u.call(t,"MediaQueryProvider: Screensize updated to ".concat(r)),d.matches?(s(!0),BN()):(s(!1),HN())}};return l(),window.addEventListener("resize",l),(o=t==null?void 0:t.info)===null||o===void 0||o.call(t,"MediaQueryProvider: addEventListener",{updateSize:l}),function(){var u;window.removeEventListener("resize",l),(u=t==null?void 0:t.info)===null||u===void 0||u.call(t,"MediaQueryProvider: removeEventListener",{updateSize:l})}},[r]),v.createElement(DO.Provider,{value:{breakpoint:r,isMobile:a}},n)},pr=function(){return v.useContext(DO)},ga=v.forwardRef(function(e,n){var t=e.className,r=t===void 0?"":t,i=e.children,a=e.disabled,s=a===void 0?!1:a,o=e.width,l=o===void 0?"56px":o,u=e.height,d=u===void 0?"56px":u,f=e.type,m=f===void 0?"button":f,p=e.style,E=p===void 0?{}:p,_=e.onBlur,b=_===void 0?function(){}:_,C=e.onClick,y=C===void 0?function(){}:C,T=e.testID,N=M.useState(!1),w=N[0],O=N[1];return v.createElement("button",{"data-testid":T,className:Ne(Ne([],Array.isArray(r)?r:[r],!0),["sendbird-iconbutton",w?"sendbird-iconbutton--pressed":""],!1).join(" "),disabled:s,ref:n,type:m,style:D(D({},E),{height:d,width:l}),onClick:function(L){s||(O(!0),y==null||y(L))},onBlur:function(L){O(!1),b==null||b(L)}},v.createElement("span",{className:"sendbird-iconbutton__inner"},i))}),Ma={H_1:"H_1",H_2:"H_2",SUBTITLE_1:"SUBTITLE_1",SUBTITLE_2:"SUBTITLE_2",BODY_1:"BODY_1",BODY_2:"BODY_2",BUTTON_1:"BUTTON_1",BUTTON_2:"BUTTON_2",BUTTON_3:"BUTTON_3",CAPTION_1:"CAPTION_1",CAPTION_2:"CAPTION_2",CAPTION_3:"CAPTION_3"},Na={ONBACKGROUND_1:"ONBACKGROUND_1",ONBACKGROUND_2:"ONBACKGROUND_2",ONBACKGROUND_3:"ONBACKGROUND_3",ONBACKGROUND_4:"ONBACKGROUND_4",ONCONTENT_1:"ONCONTENT_1",ONCONTENT_2:"ONCONTENT_2",ONCONTENT_3:"ONCONTENT_3",ONCONTENT_INVERSE_1:"ONCONTENT_INVERSE_1",ONCONTENT_INVERSE_3:"ONCONTENT_INVERSE_3",PRIMARY:"PRIMARY",ERROR:"ERROR",SECONDARY_3:"SECONDARY_3"};function y$(e){switch(e){case Ma.H_1:return"sendbird-label--h-1";case Ma.H_2:return"sendbird-label--h-2";case Ma.SUBTITLE_1:return"sendbird-label--subtitle-1";case Ma.SUBTITLE_2:return"sendbird-label--subtitle-2";case Ma.BODY_1:return"sendbird-label--body-1";case Ma.BODY_2:return"sendbird-label--body-2";case Ma.BUTTON_1:return"sendbird-label--button-1";case Ma.BUTTON_2:return"sendbird-label--button-2";case Ma.BUTTON_3:return"sendbird-label--button-3";case Ma.CAPTION_1:return"sendbird-label--caption-1";case Ma.CAPTION_2:return"sendbird-label--caption-2";case Ma.CAPTION_3:return"sendbird-label--caption-3";default:return""}}function kO(e){switch(e){case Na.ONBACKGROUND_1:return"sendbird-label--color-onbackground-1";case Na.ONBACKGROUND_2:return"sendbird-label--color-onbackground-2";case Na.ONBACKGROUND_3:return"sendbird-label--color-onbackground-3";case Na.ONBACKGROUND_4:return"sendbird-label--color-onbackground-4";case Na.ONCONTENT_1:return"sendbird-label--color-oncontent-1";case Na.ONCONTENT_2:return"sendbird-label--color-oncontent-2";case Na.ONCONTENT_3:return"sendbird-label--color-oncontent-3";case Na.ONCONTENT_INVERSE_1:return"sendbird-label--color-oncontent-inverse-1";case Na.ONCONTENT_INVERSE_3:return"sendbird-label--color-oncontent-inverse-3";case Na.PRIMARY:return"sendbird-label--color-primary";case Na.ERROR:return"sendbird-label--color-error";case Na.SECONDARY_3:return"sendbird-label--color-secondary-3";default:return""}}var Me=M.forwardRef(function(e,n){var t=e.className,r=t===void 0?[]:t,i=e.type,a=e.color,s=e.children,o=s===void 0?null:s,l=e.testID;return v.createElement("span",{className:Ne(Ne([],Array.isArray(r)?r:[r],!0),["sendbird-label",y$(i),kO(a)],!1).join(" "),ref:n,"data-testid":l},o)}),be=Ma,de=Na,hc=Kb("en"),Vn;(function(e){e.PRIMARY="PRIMARY",e.SECONDARY="SECONDARY",e.DANGER="DANGER",e.DISABLED="DISABLED",e.WARNING="WARNING"})(Vn||(Vn={}));var _a;(function(e){e.BIG="BIG",e.SMALL="SMALL"})(_a||(_a={}));function b$(e){switch(e){case Vn.PRIMARY:return"sendbird-button--primary";case Vn.SECONDARY:return"sendbird-button--secondary";case Vn.DANGER:return"sendbird-button--danger";case Vn.DISABLED:return"sendbird-button--disabled";case Vn.WARNING:return"sendbird-button--warning";default:return""}}function C$(e){switch(e){case _a.BIG:return"sendbird-button--big";case _a.SMALL:return"sendbird-button--small";default:return""}}function Ri(e){var n=e.className,t=e.type,r=t===void 0?Vn.PRIMARY:t,i=e.size,a=i===void 0?_a.BIG:i,s=e.children,o=s===void 0?"Button":s,l=e.disabled,u=l===void 0?!1:l,d=e.onClick,f=d===void 0?function(){}:d,m=e.labelType,p=m===void 0?be.BUTTON_1:m,E=e.labelColor,_=E===void 0?de.ONCONTENT_1:E,b=Ne(Ne([],Array.isArray(n)?n:[n],!0),["sendbird-button",u?"sendbird-button__disabled":"",b$(r),C$(a)],!1).join(" ");return v.createElement("button",{className:b,type:"button",onClick:f,disabled:u},v.createElement(Me,{className:"sendbird-button__text",type:p,color:_},o))}var $e={ADD:"ADD",ARROW_LEFT:"ARROW_LEFT",ATTACH:"ATTACH",AUDIO_ON_LINED:"AUDIO_ON_LINED",BAN:"BAN",BROADCAST:"BROADCAST",CAMERA:"CAMERA",CHANNELS:"CHANNELS",CHAT:"CHAT",CHAT_FILLED:"CHAT_FILLED",CHEVRON_DOWN:"CHEVRON_DOWN",CHEVRON_RIGHT:"CHEVRON_RIGHT",CLOSE:"CLOSE",COLLAPSE:"COLLAPSE",COPY:"COPY",CREATE:"CREATE",DELETE:"DELETE",DISCONNECTED:"DISCONNECTED",DOCUMENT:"DOCUMENT",DONE:"DONE",DONE_ALL:"DONE_ALL",DOWNLOAD:"DOWNLOAD",EDIT:"EDIT",EMOJI_MORE:"EMOJI_MORE",ERROR:"ERROR",EXPAND:"EXPAND",FILE_AUDIO:"FILE_AUDIO",FILE_DOCUMENT:"FILE_DOCUMENT",FREEZE:"FREEZE",GIF:"GIF",INFO:"INFO",LEAVE:"LEAVE",MEMBERS:"MEMBERS",MESSAGE:"MESSAGE",MODERATIONS:"MODERATIONS",MORE:"MORE",MUTE:"MUTE",NOTIFICATIONS:"NOTIFICATIONS",NOTIFICATIONS_OFF_FILLED:"NOTIFICATIONS_OFF_FILLED",OPERATOR:"OPERATOR",PHOTO:"PHOTO",PLAY:"PLAY",PLUS:"PLUS",QUESTION:"QUESTION",REFRESH:"REFRESH",REPLY:"REPLY",REMOVE:"REMOVE",SEARCH:"SEARCH",SEND:"SEND",SETTINGS_FILLED:"SETTINGS_FILLED",SLIDE_LEFT:"SLIDE_LEFT",SPINNER:"SPINNER",SUPERGROUP:"SUPERGROUP",THREAD:"THREAD",THUMBNAIL_NONE:"THUMBNAIL_NONE",TOGGLE_OFF:"TOGGLE_OFF",TOGGLE_ON:"TOGGLE_ON",USER:"USER",FEEDBACK_LIKE:"FEEDBACK_LIKE",FEEDBACK_DISLIKE:"FEEDBACK_DISLIKE"},Yr={DEFAULT:"DEFAULT",PRIMARY:"PRIMARY",PRIMARY_2:"PRIMARY_2",SECONDARY:"SECONDARY",SECONDARY_2:"SECONDARY_2",CONTENT:"CONTENT",CONTENT_INVERSE:"CONTENT_INVERSE",CONTENT_INVERSE_3:"CONTENT_INVERSE_3",WHITE:"WHITE",GRAY:"GRAY",THUMBNAIL_ICON:"THUMBNAIL_ICON",SENT:"SENT",READ:"READ",ON_BACKGROUND_1:"ON_BACKGROUND_1",ON_BACKGROUND_2:"ON_BACKGROUND_2",ON_BACKGROUND_3:"ON_BACKGROUND_3",ON_BACKGROUND_4:"ON_BACKGROUND_4",BACKGROUND_3:"BACKGROUND_3",ERROR:"ERROR"};function S$(e){switch(e){case Yr.PRIMARY:return"sendbird-icon-color--primary";case Yr.PRIMARY_2:return"sendbird-icon-color--primary-2";case Yr.SECONDARY:return"sendbird-icon-color--secondary";case Yr.SECONDARY_2:return"sendbird-icon-color--secondary-2";case Yr.CONTENT:return"sendbird-icon-color--content";case Yr.CONTENT_INVERSE:return"sendbird-icon-color--content-inverse";case Yr.CONTENT_INVERSE_3:return"sendbird-icon-color--content-inverse-3";case Yr.WHITE:return"sendbird-icon-color--white";case Yr.GRAY:return"sendbird-icon-color--gray";case Yr.THUMBNAIL_ICON:return"sendbird-icon-color--thumbnail-icon";case Yr.SENT:return"sendbird-icon-color--sent";case Yr.READ:return"sendbird-icon-color--read";case Yr.ON_BACKGROUND_1:return"sendbird-icon-color--on-background-1";case Yr.ON_BACKGROUND_2:return"sendbird-icon-color--on-background-2";case Yr.ON_BACKGROUND_3:return"sendbird-icon-color--on-background-3";case Yr.ON_BACKGROUND_4:return"sendbird-icon-color--on-background-4";case Yr.BACKGROUND_3:return"sendbird-icon-color--background-3";case Yr.ERROR:return"sendbird-icon-color--error";default:return""}}function T$(e){switch(e){case $e.ADD:return"sendbird-icon-add";case $e.ARROW_LEFT:return"sendbird-icon-arrow-left";case $e.ATTACH:return"sendbird-icon-attach";case $e.AUDIO_ON_LINED:return"sendbird-icon-audio-on-lined";case $e.BAN:return"sendbird-icon-ban";case $e.BROADCAST:return"sendbird-icon-broadcast";case $e.CAMERA:return"sendbird-icon-camera";case $e.CHANNELS:return"sendbird-icon-channels";case $e.CHAT:return"sendbird-icon-chat";case $e.CHAT_FILLED:return"sendbird-icon-chat-filled";case $e.CHEVRON_DOWN:return"sendbird-icon-chevron-down";case $e.CHEVRON_RIGHT:return"sendbird-icon-chevron-right";case $e.CLOSE:return"sendbird-icon-close";case $e.COLLAPSE:return"sendbird-icon-collapse";case $e.COPY:return"sendbird-icon-copy";case $e.CREATE:return"sendbird-icon-create";case $e.DELETE:return"sendbird-icon-delete";case $e.DISCONNECTED:return"sendbird-icon-disconnected";case $e.DOCUMENT:return"sendbird-icon-document";case $e.DONE:return"sendbird-icon-done";case $e.DONE_ALL:return"sendbird-icon-done-all";case $e.DOWNLOAD:return"sendbird-icon-down-load";case $e.EDIT:return"sendbird-icon-edit";case $e.EMOJI_MORE:return"sendbird-icon-emoji-more";case $e.ERROR:return"sendbird-icon-error";case $e.EXPAND:return"sendbird-icon-expand";case $e.FILE_AUDIO:return"sendbird-icon-file-audio";case $e.FILE_DOCUMENT:return"sendbird-icon-file-document";case $e.FREEZE:return"sendbird-icon-freeze";case $e.GIF:return"sendbird-icon-gif";case $e.INFO:return"sendbird-icon-info";case $e.LEAVE:return"sendbird-icon-leave";case $e.MEMBERS:return"sendbird-icon-members";case $e.MESSAGE:return"sendbird-icon-message";case $e.MODERATIONS:return"sendbird-icon-moderations";case $e.MORE:return"sendbird-icon-more";case $e.MUTE:return"sendbird-icon-mute";case $e.NOTIFICATIONS:return"sendbird-icon-notifications";case $e.NOTIFICATIONS_OFF_FILLED:return"sendbird-icon-notifications-off-filled";case $e.OPERATOR:return"sendbird-icon-operator";case $e.PHOTO:return"sendbird-icon-photo";case $e.PLAY:return"sendbird-icon-play";case $e.PLUS:return"sendbird-iconn-plus";case $e.QUESTION:return"sendbird-icon-question";case $e.REFRESH:return"sendbird-icon-refresh";case $e.REMOVE:return"sendbird-icon-remove";case $e.REPLY:return"sendbird-icon-reply";case $e.SEARCH:return"sendbird-icon-search";case $e.SEND:return"sendbird-icon-send";case $e.SETTINGS_FILLED:return"sendbird-icon-settings-filled";case $e.SPINNER:return"sendbird-icon-spinner";case $e.SUPERGROUP:return"sendbird-icon-supergroup";case $e.THREAD:return"sendbird-icon-thread";case $e.THUMBNAIL_NONE:return"sendbird-icon-thumbnail-none";case $e.TOGGLE_OFF:return"sendbird-icon-toggle-off";case $e.TOGGLE_ON:return"sendbird-icon-toggle-on";case $e.USER:return"sendbird-icon-user";case $e.FEEDBACK_LIKE:return"sendbird-icon-feedback-like";case $e.FEEDBACK_DISLIKE:return"sendbird-icon-feedback-dislike";default:return"sendbird-icon-unknown"}}var GN;function BE(){return BE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},BE.apply(null,arguments)}const M$=e=>M.createElement("svg",BE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),GN||(GN=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M50.667 5.333a8 8 0 0 1 8 8v37.334a8 8 0 0 1-8 8H13.333a8 8 0 0 1-8-8V13.333a8 8 0 0 1 8-8zm0 5.334H13.333a2.667 2.667 0 0 0-2.666 2.666v37.334a2.667 2.667 0 0 0 2.666 2.666h37.334a2.667 2.667 0 0 0 2.666-2.666V13.333a2.667 2.667 0 0 0-2.666-2.666m-18.667 8a2.667 2.667 0 0 1 2.649 2.355l.018.311v8h8a2.667 2.667 0 0 1 .311 5.316l-.311.018h-8v8a2.667 2.667 0 0 1-5.316.311l-.018-.311v-8h-8a2.667 2.667 0 0 1-.311-5.316l.311-.018h8v-8A2.667 2.667 0 0 1 32 18.667",className:"icon-add_svg__fill"})));var zN;function HE(){return HE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},HE.apply(null,arguments)}const N$=e=>M.createElement("svg",HE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),zN||(zN=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M33.886 8.781a2.67 2.67 0 0 1 .221 3.52l-.221.251-16.78 16.781H56a2.667 2.667 0 0 1 .311 5.316l-.311.018-38.895-.001 16.78 16.782a2.666 2.666 0 0 1 .222 3.52l-.221.251a2.67 2.67 0 0 1-3.52.222l-.252-.222L8.781 33.886a2.67 2.67 0 0 1-.222-3.52l.222-.252L30.114 8.781a2.67 2.67 0 0 1 3.772 0",className:"icon-arrow-left_svg__fill"})));var jN;function GE(){return GE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},GE.apply(null,arguments)}const I$=e=>M.createElement("svg",GE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),jN||(jN=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m55.334 28.926-24.506 23.34c-5.222 4.973-13.74 4.973-18.962 0-5.149-4.903-5.149-12.797 0-17.7l24.506-23.34c3.138-2.988 8.278-2.988 11.416 0 3.064 2.919 3.064 7.594 0 10.513L23.255 45.077c-1.055 1.005-2.815 1.005-3.87.001-.98-.933-.98-2.39 0-3.325l22.64-21.535a2.667 2.667 0 0 0-3.676-3.864L15.709 37.89a7.58 7.58 0 0 0-.001 11.05c3.113 2.966 8.11 2.966 11.224 0l24.533-23.338c5.272-5.021 5.272-13.217 0-18.238-5.197-4.95-13.573-4.95-18.77 0L8.187 30.704c-7.356 7.005-7.356 18.419 0 25.424 7.281 6.935 19.036 6.935 26.318 0l24.506-23.34a2.666 2.666 0 1 0-3.678-3.862z",className:"icon-attach_svg__fill"})));var VN,$N;function zE(){return zE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},zE.apply(null,arguments)}const A$=e=>M.createElement("svg",zE({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 64 64"},e),VN||(VN=M.createElement("g",{clipPath:"url(#icon-audio-on-lined_svg__a)"},M.createElement("path",{d:"M32 0C26.11 0 21.333 4.776 21.333 10.667V32c0 5.891 4.776 10.667 10.667 10.667S42.667 37.89 42.667 32V10.667C42.667 4.776 37.89 0 32 0m-5.333 10.667a5.333 5.333 0 0 1 10.666 0V32a5.333 5.333 0 0 1-10.666 0z",className:"icon-audio-on-lined_svg__fill",clipRule:"evenodd"}),M.createElement("path",{d:"M16 26.667a2.667 2.667 0 1 0-5.333 0V32c0 10.879 8.143 19.856 18.666 21.168v5.499h-8a2.667 2.667 0 0 0 0 5.333h21.334a2.667 2.667 0 1 0 0-5.333h-8v-5.499C45.19 51.856 53.333 42.88 53.333 32v-5.333a2.667 2.667 0 1 0-5.333 0V32c0 8.837-7.163 16-16 16s-16-7.163-16-16z",className:"icon-audio-on-lined_svg__fill"}))),$N||($N=M.createElement("defs",null,M.createElement("clipPath",{id:"icon-audio-on-lined_svg__a"},M.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"})))));var qN;function jE(){return jE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},jE.apply(null,arguments)}const w$=e=>M.createElement("svg",jE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),qN||(qN=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32s10.745 24 24 24 24-10.745 24-24S45.255 8 32 8m12.333 21.333a1 1 0 0 1 1 1v3.334a1 1 0 0 1-1 1H19.667a1 1 0 0 1-1-1v-3.334a1 1 0 0 1 1-1z",className:"icon-ban_svg__fill"})));var KN;function VE(){return VE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},VE.apply(null,arguments)}const R$=e=>M.createElement("svg",VE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),KN||(KN=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M58.545 5.498q.121.389.122.796v46.079a2.666 2.666 0 0 1-3.462 2.546l-17.951-5.61c-.645 5.273-5.14 9.358-10.587 9.358C20.776 58.667 16 53.89 16 48v-5.334h-5.333a8 8 0 0 1-7.997-7.75l-.003-.25V24a8 8 0 0 1 8-8H16L55.205 3.749a2.665 2.665 0 0 1 3.34 1.75zM21.333 44.587V48a5.333 5.333 0 0 0 10.652.398L32 47.92zm32-34.667-32 9.997v18.83l32 9.997zM16 21.333h-5.333a2.67 2.67 0 0 0-2.65 2.356L8 24v10.667a2.667 2.667 0 0 0 2.667 2.666H16z",className:"icon-broadcast_svg__fill"})));var WN;function $E(){return $E=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},$E.apply(null,arguments)}const O$=e=>M.createElement("svg",$E({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),WN||(WN=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M40 5.333c.892 0 1.724.446 2.219 1.188l4.541 6.812H56a8 8 0 0 1 7.986 7.53l.014.47v29.334a8 8 0 0 1-8 8H8a8 8 0 0 1-8-8V21.333a8 8 0 0 1 8-8h9.237l4.544-6.812a2.67 2.67 0 0 1 1.888-1.167l.331-.02zm-1.43 5.334H25.428l-4.542 6.812a2.66 2.66 0 0 1-1.887 1.167l-.331.02H8a2.67 2.67 0 0 0-2.667 2.667v29.334A2.667 2.667 0 0 0 8 53.333h48a2.667 2.667 0 0 0 2.667-2.666V21.333A2.667 2.667 0 0 0 56 18.667H45.333a2.67 2.67 0 0 1-2.218-1.188zM32 21.333c7.364 0 13.333 5.97 13.333 13.334S39.363 48 32 48s-13.333-5.97-13.333-13.333S24.637 21.333 32 21.333m0 5.334a8 8 0 1 0 0 16 8 8 0 0 0 0-16",className:"icon-camera_svg__fill"})));var QN;function qE(){return qE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},qE.apply(null,arguments)}const L$=e=>M.createElement("svg",qE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),QN||(QN=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m42.65 5.333.311.017a2.666 2.666 0 0 1 2.373 2.633l-.017.311-1.45 13.04h9.466a2.667 2.667 0 0 1 .311 5.315l-.31.018H43.271l-1.184 10.666h11.245a2.667 2.667 0 0 1 .312 5.316l-.31.018H41.495l-1.512 13.627a2.667 2.667 0 0 1-5.318-.277l.017-.311 1.448-13.04H25.496l-1.512 13.628a2.667 2.667 0 0 1-5.318-.277l.017-.311 1.448-13.04h-9.464a2.667 2.667 0 0 1-.311-5.315l.31-.018h10.057l1.186-10.667H10.667a2.667 2.667 0 0 1-.311-5.315l.31-.018h11.835l1.515-13.627a2.67 2.67 0 0 1 2.634-2.373l.311.017a2.666 2.666 0 0 1 2.373 2.633l-.017.311-1.45 13.04H38.5l1.515-13.628a2.67 2.67 0 0 1 2.634-2.373zm-5.927 32 1.186-10.667H27.272l-1.184 10.667z",className:"icon-channels_svg__fill"})));var YN;function KE(){return KE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},KE.apply(null,arguments)}const U$=e=>M.createElement("svg",KE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),YN||(YN=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62 62 0 0 0 4.886-1.363l1.721-.568 2.04-.696 1.95.917A23.9 23.9 0 0 0 32 56c13.255 0 24-10.745 24-24S45.255 8 32 8",className:"icon-chat_svg__fill"})));var XN;function WE(){return WE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},WE.apply(null,arguments)}const D$=e=>M.createElement("svg",WE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),XN||(XN=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667",className:"icon-chat-filled_svg__fill"})));var ZN;function QE(){return QE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},QE.apply(null,arguments)}const k$=e=>M.createElement("svg",QE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),ZN||(ZN=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M16.121 21.879a3 3 0 0 0-4.242 0 3 3 0 0 0 0 4.242l18 18a3 3 0 0 0 4.242 0l18-18a3 3 0 0 0 0-4.242 3 3 0 0 0-4.242 0L32 37.757z",className:"icon-chevron-down_svg__fill"})));var JN;function YE(){return YE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},YE.apply(null,arguments)}const P$=e=>M.createElement("svg",YE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),JN||(JN=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M22.114 46.114a2.668 2.668 0 0 0 3.772 3.772l16-16a2.67 2.67 0 0 0 0-3.772l-16-16a2.668 2.668 0 0 0-3.772 3.772L36.23 32z",className:"icon-chevron-right_svg__fill"})));var eI;function XE(){return XE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},XE.apply(null,arguments)}const x$=e=>M.createElement("svg",XE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),eI||(eI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M52.552 11.448a2.666 2.666 0 0 1 .222 3.52l-.222.251-16.781 16.78 16.781 16.782a2.665 2.665 0 0 1 0 3.771 2.666 2.666 0 0 1-3.52.222l-.251-.222L32 35.771 15.219 52.552a2.665 2.665 0 0 1-3.771 0 2.666 2.666 0 0 1-.222-3.52l.222-.251L28.228 32l-16.78-16.781a2.665 2.665 0 0 1 0-3.771 2.666 2.666 0 0 1 3.52-.222l.251.222 16.78 16.78 16.782-16.78a2.665 2.665 0 0 1 3.771 0",className:"icon-close_svg__fill"})));var tI;function ZE(){return ZE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ZE.apply(null,arguments)}const F$=e=>M.createElement("svg",ZE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),tI||(tI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M16 8a2.667 2.667 0 0 0-2.649 2.356l-.018.31v42.667a2.667 2.667 0 0 0 5.316.311l.018-.31V34.666h25.56l-6.113 6.114a2.67 2.67 0 0 0-.221 3.52l.221.251a2.666 2.666 0 0 0 3.52.222l.252-.222 10.666-10.666a2.666 2.666 0 0 0 .222-3.52l-.222-.252-10.666-10.666a2.666 2.666 0 0 0-3.993 3.52l.221.251 6.113 6.114h-25.56V10.667A2.667 2.667 0 0 0 16 8",className:"icon-collapse_svg__fill"})));var nI;function JE(){return JE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},JE.apply(null,arguments)}const B$=e=>M.createElement("svg",JE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),nI||(nI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M53.333 21.333a8 8 0 0 1 8 8v24a8 8 0 0 1-8 8h-24a8 8 0 0 1-8-8v-24a8 8 0 0 1 8-8zm0 5.334h-24a2.667 2.667 0 0 0-2.666 2.666v24A2.667 2.667 0 0 0 29.333 56h24A2.667 2.667 0 0 0 56 53.333v-24a2.667 2.667 0 0 0-2.667-2.666m-18.666-24a8 8 0 0 1 7.986 7.53l.014.47v2.666a2.667 2.667 0 0 1-5.316.311l-.018-.31v-2.667a2.67 2.67 0 0 0-2.355-2.65L34.667 8h-24a2.67 2.67 0 0 0-2.65 2.356l-.017.31v24a2.67 2.67 0 0 0 2.356 2.65l.31.017h2.667a2.667 2.667 0 0 1 .311 5.316l-.31.018h-2.667a8 8 0 0 1-7.987-7.53l-.013-.47v-24c0-4.26 3.33-7.743 7.53-7.987l.47-.013z",className:"icon-copy_svg__fill"})));var rI;function ey(){return ey=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ey.apply(null,arguments)}const H$=e=>M.createElement("svg",ey({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),rI||(rI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62 62 0 0 0 4.886-1.363l1.721-.568 2.04-.696 1.95.917A23.9 23.9 0 0 0 32 56c13.255 0 24-10.745 24-24S45.255 8 32 8m2.667 16v5.333H40c3.556 0 3.556 5.334 0 5.334h-5.333V40c0 3.556-5.334 3.556-5.334 0v-5.333H24c-3.556 0-3.556-5.334 0-5.334h5.333V24c0-3.556 5.334-3.556 5.334 0",className:"icon-create_svg__fill"})));var iI;function ty(){return ty=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ty.apply(null,arguments)}const G$=e=>M.createElement("svg",ty({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),iI||(iI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M37.333 2.667c4.26 0 7.743 3.33 7.987 7.53l.013.47v2.666H56a2.667 2.667 0 0 1 .311 5.316l-.311.018h-2.668l.001 34.666c0 4.26-3.33 7.743-7.53 7.987l-.47.013H18.667a8 8 0 0 1-7.987-7.53l-.013-.47V18.667H8a2.667 2.667 0 0 1-.311-5.316L8 13.333h10.666v-2.666a8 8 0 0 1 7.53-7.987l.47-.013zm10.666 16H16v34.666a2.67 2.67 0 0 0 2.356 2.65l.31.017h26.667a2.67 2.67 0 0 0 2.65-2.356l.017-.31zm-21.332 8a2.667 2.667 0 0 1 2.648 2.355l.018.311v16a2.667 2.667 0 0 1-5.316.311l-.017-.31v-16a2.667 2.667 0 0 1 2.667-2.667m10.666 0a2.67 2.67 0 0 1 2.65 2.355l.017.311v16a2.667 2.667 0 0 1-5.315.311l-.018-.31v-16a2.667 2.667 0 0 1 2.666-2.667m0-18.667H26.667a2.67 2.67 0 0 0-2.65 2.356l-.017.31v2.667h16v-2.666a2.67 2.67 0 0 0-2.356-2.65L37.334 8z",className:"icon-delete_svg__fill"})));var aI;function ny(){return ny=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ny.apply(null,arguments)}const z$=e=>M.createElement("svg",ny({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),aI||(aI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m54.534 6.069-.248.217-9.736 9.735-.04.04-9.573 9.573q-.226.178-.405.404L6.286 54.286a2.423 2.423 0 0 0 3.18 3.645l.248-.217 13.374-13.373a2.42 2.42 0 0 0 1.88-.401 12.12 12.12 0 0 1 14.04 0 2.424 2.424 0 1 0 2.808-3.952 16.95 16.95 0 0 0-11.303-3.072l6.743-6.744a24.1 24.1 0 0 1 10.159 5.021 2.424 2.424 0 0 0 3.11-3.719 29 29 0 0 0-9.34-5.23l5.633-5.634a36.2 36.2 0 0 1 9.225 5.934 2.425 2.425 0 0 0 3.211-3.633 41 41 0 0 0-8.796-5.941l7.256-7.256a2.423 2.423 0 0 0-3.18-3.645m-35.04 21.474a29 29 0 0 0-6.032 3.942 2.424 2.424 0 0 0 3.137 3.697 24 24 0 0 1 5.022-3.282 2.425 2.425 0 0 0-2.127-4.357M4.748 22.909a2.424 2.424 0 0 0 3.207 3.636 36.36 36.36 0 0 1 26.978-8.977 2.424 2.424 0 0 0 .389-4.832A41.2 41.2 0 0 0 4.748 22.909",className:"icon-disconnected_svg__fill"})));var sI;function ry(){return ry=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ry.apply(null,arguments)}const j$=e=>M.createElement("svg",ry({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),sI||(sI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M37.333 2.667a3 3 0 0 1 .274.014l.085.01.058.008q.07.01.141.026l.029.007q.075.016.146.037l.034.01q.357.107.663.303l.034.022q.053.034.104.072l.057.043q.045.033.085.068.091.075.176.16l-.126-.117q.075.065.143.135L55.21 19.438q.07.07.134.143l.035.04q.04.047.076.096l.04.054.07.1.024.038c.16.253.279.535.347.836l.01.048q.014.064.024.13l.006.048.007.051.004.041q.014.135.014.27v32a8 8 0 0 1-8 8H16a8 8 0 0 1-8-8V10.667a8 8 0 0 1 8-8zM34.666 8H16a2.667 2.667 0 0 0-2.667 2.667v42.666A2.667 2.667 0 0 0 16 56h32a2.667 2.667 0 0 0 2.667-2.667L50.666 24H37.333a2.667 2.667 0 0 1-2.648-2.356l-.018-.31zm12.227 10.667-6.894-6.894.001 6.894z",className:"icon-document_svg__fill"})));var oI;function iy(){return iy=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},iy.apply(null,arguments)}const V$=e=>M.createElement("svg",iy({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),oI||(oI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M12.552 31.448a2.665 2.665 0 1 0-3.771 3.771l13.333 13.333a2.666 2.666 0 0 0 3.772 0L55.219 19.22a2.667 2.667 0 0 0-3.771-3.771L24 42.895z",className:"icon-done_svg__fill"})));var lI;function ay(){return ay=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ay.apply(null,arguments)}const $$=e=>M.createElement("svg",ay({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),lI||(lI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M5.886 31.448 19.219 44.78a2.667 2.667 0 0 1-3.771 3.771L2.114 35.22a2.667 2.667 0 0 1 3.772-3.771zm52.228-16a2.666 2.666 0 1 1 3.772 3.771L32.552 48.552a2.665 2.665 0 0 1-3.771 0L15.448 35.22a2.665 2.665 0 0 1 0-3.771 2.665 2.665 0 0 1 3.771 0l11.448 11.447zm-9.562 0a2.665 2.665 0 0 1 0 3.771L32.556 35.215a2.665 2.665 0 0 1-3.771 0 2.664 2.664 0 0 1 0-3.77L44.78 15.447a2.665 2.665 0 0 1 3.771 0z",className:"icon-done-all_svg__fill"})));var uI;function sy(){return sy=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},sy.apply(null,arguments)}const q$=e=>M.createElement("svg",sy({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),uI||(uI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M56 42.667a2.667 2.667 0 0 1 2.649 2.355l.018.311v8c0 4.26-3.33 7.743-7.53 7.987l-.47.013H13.333a8 8 0 0 1-7.986-7.53l-.014-.47v-8a2.667 2.667 0 0 1 5.316-.311l.018.311v8a2.67 2.67 0 0 0 2.355 2.65l.311.017h37.334a2.667 2.667 0 0 0 2.648-2.356l.018-.31v-8A2.667 2.667 0 0 1 56 42.667m-36.552-8.781a2.666 2.666 0 0 1 3.52-3.993l.251.221 6.114 6.114V5.333a2.667 2.667 0 0 1 5.316-.311l.018.311v30.894l6.114-6.113a2.67 2.67 0 0 1 3.52-.221l.251.221a2.666 2.666 0 0 1 .222 3.52l-.222.252-10.658 10.657a2 2 0 0 1-.135.128l.127-.119a3 3 0 0 1-.195.176l-.056.045-.086.064-.056.04-.086.056-.06.036-.081.046-.079.04a3 3 0 0 1-.14.065l-.09.036q-.034.014-.067.025l-.09.03-.063.019q-.064.018-.13.034l-.013.003-.144.028-.064.01q-.045.008-.092.012l-.084.008-.103.006-.069.002h-.095q-.042 0-.082-.003l.139.003q-.126 0-.249-.011l-.061-.007-.092-.012-.09-.015-.118-.025-.04-.01a3 3 0 0 1-.34-.11l-.015-.006q-.074-.03-.145-.063l-.042-.02L30.71 45l-.067-.039q-.045-.026-.087-.054l-.062-.041q-.045-.03-.088-.063l-.04-.03-.008-.007a3 3 0 0 1-.251-.223z",className:"icon-download_svg__fill"})));var cI;function oy(){return oy=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},oy.apply(null,arguments)}const K$=e=>M.createElement("svg",oy({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 65 65"},e),cI||(cI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M56 56a2.667 2.667 0 0 1 .311 5.315l-.311.018H8a2.667 2.667 0 0 1-.311-5.316L8 56zM35.448 3.448a2.665 2.665 0 0 1 3.771 0l10.667 10.666a2.67 2.67 0 0 1 0 3.772L20.552 47.219c-.5.5-1.178.781-1.885.781H8a2.667 2.667 0 0 1-2.667-2.667V34.667c0-.708.281-1.386.781-1.886zm1.885 5.659L10.667 35.77v6.896h6.89L44.227 16z",className:"icon-edit_svg__fill"})));var dI;function ly(){return ly=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ly.apply(null,arguments)}const W$=e=>M.createElement("svg",ly({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),dI||(dI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32.097 3.22c2.65 0 5.255.357 7.763 1.054a2.134 2.134 0 0 1-1.144 4.111 24.7 24.7 0 0 0-6.619-.899c-13.603 0-24.63 11.027-24.63 24.63s11.027 24.63 24.63 24.63 24.63-11.027 24.63-24.63c0-2.227-.295-4.413-.87-6.518a2.13 2.13 0 0 1 1.494-2.62 2.13 2.13 0 0 1 2.62 1.494 29 29 0 0 1 1.023 7.644c0 15.96-12.938 28.897-28.897 28.897-15.96 0-28.897-12.937-28.897-28.897S16.138 3.22 32.097 3.22m10.705 34.792a2.133 2.133 0 0 1 2.024 2.808c-1.873 5.623-6.937 9.488-12.729 9.488s-10.856-3.865-12.73-9.488a2.134 2.134 0 0 1 1.875-2.803l.15-.005zm-3.477 4.266H24.867l.294.382c1.539 1.887 3.718 3.113 6.115 3.342l.314.024.507.015c2.617 0 5.037-1.188 6.743-3.151l.193-.23zM21.392 21.954c1.087 0 1.985.814 2.116 1.866l.017.267v5.353a2.133 2.133 0 0 1-4.25.268l-.017-.268v-5.353c0-1.178.955-2.133 2.134-2.133m21.41 0c1.088 0 1.985.814 2.117 1.866l.017.267v5.353a2.133 2.133 0 0 1-4.25.268l-.017-.268v-5.353c0-1.178.955-2.133 2.133-2.133M54.853 0a.8.8 0 0 1 .8.8v7.786h7.76a.8.8 0 0 1 .8.8v2.667a.8.8 0 0 1-.8.8h-7.76v7.758a.8.8 0 0 1-.8.8h-2.666a.8.8 0 0 1-.8-.8v-7.758h-7.785a.8.8 0 0 1-.8-.8V9.387a.8.8 0 0 1 .8-.8l7.784-.001V.8a.8.8 0 0 1 .8-.8z",className:"icon-emoji-more_svg__fill"})));var hI;function uy(){return uy=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},uy.apply(null,arguments)}const Q$=e=>M.createElement("svg",uy({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),hI||(hI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 5.06a8 8 0 0 1 6.561 3.424l.287.439 22.608 37.744a8 8 0 0 1 .022 7.962 8 8 0 0 1-6.356 4.014l-.535.024H9.384a8 8 0 0 1-6.862-4.038 8.01 8.01 0 0 1-.226-7.493l.27-.506L25.16 8.91A8 8 0 0 1 32 5.06m0 5.333c-.816 0-1.58.372-2.076.99l-.196.28-22.565 37.67a2.67 2.67 0 0 0 1.909 3.973l.341.027h45.144a2.67 2.67 0 0 0 2.45-3.659l-.148-.304L34.28 11.676A2.67 2.67 0 0 0 32 10.393m0 32.274A2.667 2.667 0 1 1 32 48a2.667 2.667 0 0 1 0-5.333m0-21.334a2.667 2.667 0 0 1 2.649 2.356l.018.311v10.667a2.667 2.667 0 0 1-5.316.311l-.018-.311V24A2.667 2.667 0 0 1 32 21.333",className:"icon-error_svg__fill"})));var fI;function cy(){return cy=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},cy.apply(null,arguments)}const Y$=e=>M.createElement("svg",cy({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),fI||(fI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M48 8a2.667 2.667 0 0 1 2.649 2.356l.018.31V32l-.001.027v21.306a2.667 2.667 0 0 1-5.315.311l-.018-.31V34.665H19.772l6.114 6.115a2.67 2.67 0 0 1 .221 3.52l-.221.251a2.666 2.666 0 0 1-3.52.222l-.252-.222-10.666-10.666a2.666 2.666 0 0 1-.222-3.52l.222-.252 10.666-10.666a2.666 2.666 0 0 1 3.993 3.52l-.221.251-6.113 6.114h25.56V10.667A2.667 2.667 0 0 1 48 8",className:"icon-expand_svg__fill"})));var vI;function dy(){return dy=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},dy.apply(null,arguments)}const X$=e=>M.createElement("svg",dy({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),vI||(vI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M30.52 12.51c1.685-1.226 4.139-.103 4.139 1.893v35.194c0 1.996-2.454 3.119-4.138 1.893l-12.45-9.909H7.898c-1.416 0-2.564-1.074-2.564-2.399V24.818c0-1.325 1.148-2.4 2.564-2.4h10.175zm20.427.163c10.293 10.667 10.293 27.987 0 38.654a2.137 2.137 0 0 1-3.156-.047c-.86-.942-.84-2.448.044-3.364 8.49-8.799 8.49-23.033 0-31.832-.884-.916-.904-2.422-.044-3.364a2.137 2.137 0 0 1 3.156-.047m-8.492 8.799c5.597 5.8 5.597 15.231 0 21.031a2.136 2.136 0 0 1-3.156-.046c-.86-.942-.84-2.448.044-3.364 3.794-3.932 3.794-10.279 0-14.211-.884-.916-.904-2.422-.044-3.363a2.136 2.136 0 0 1 3.156-.047",className:"icon-file-audio_svg__fill"})));var mI;function hy(){return hy=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},hy.apply(null,arguments)}const Z$=e=>M.createElement("svg",hy({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),mI||(mI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M39.414 6.4a2.4 2.4 0 0 1 1.71.701l12.642 12.75c.407.41.634.953.634 1.516v29.765c0 3.542-4.342 6.468-8 6.468H16.16c-3.658 0-6.4-2.926-6.4-6.468L9.6 12.868c0-3.542 2.902-6.468 6.56-6.468zm3.331 35.173-21.49.027-.147.005c-1.066.08-1.908 1.014-1.908 2.155 0 1.193.92 2.16 2.055 2.16l21.49-.027.147-.005c1.066-.08 1.908-1.014 1.908-2.155 0-1.193-.92-2.16-2.055-2.16m0-8.533-21.49.027-.147.005c-1.066.08-1.908 1.014-1.908 2.155 0 1.193.92 2.16 2.055 2.16l21.49-.027.147-.005c1.066-.08 1.908-1.014 1.908-2.155 0-1.193-.92-2.16-2.055-2.16m-11.807-8.507h-9.6l-.153.006a2.15 2.15 0 0 0-1.985 2.154c0 1.193.957 2.16 2.138 2.16h9.6l.152-.005a2.15 2.15 0 0 0 1.985-2.155c0-1.193-.957-2.16-2.137-2.16",className:"icon-file-document_svg__fill"})));var pI;function fy(){return fy=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},fy.apply(null,arguments)}const J$=e=>M.createElement("svg",fy({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),pI||(pI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m41.636 3.226.251.222a2.67 2.67 0 0 1 .222 3.52l-.222.251-7.219 7.218V27.38l11.209-6.472 2.643-9.86a2.667 2.667 0 0 1 5.218 1.051l-.067.329-2.237 8.35 8.352 2.24a2.67 2.67 0 0 1 1.952 2.938l-.067.328a2.67 2.67 0 0 1-2.937 1.952l-.329-.066-9.861-2.643L37.334 32l11.209 6.47 9.862-2.64.329-.067a2.67 2.67 0 0 1 2.937 1.952l.067.328a2.67 2.67 0 0 1-1.952 2.938l-8.353 2.237 2.238 8.353.067.329a2.666 2.666 0 0 1-5.218 1.052l-2.643-9.861-11.209-6.472v12.944l7.219 7.218a2.667 2.667 0 0 1-3.52 3.993l-.251-.222L32 54.437l-6.114 6.115a2.666 2.666 0 0 1-3.52.222l-.251-.222a2.666 2.666 0 0 1-.222-3.52l.222-.251 7.218-7.22V36.62l-11.209 6.47-2.642 9.863a2.666 2.666 0 0 1-5.218-1.052l.067-.329 2.236-8.351-8.35-2.24a2.665 2.665 0 0 1-1.953-2.937l.067-.328a2.665 2.665 0 0 1 2.937-1.952l.329.066 9.861 2.642L26.667 32l-11.209-6.472-9.86 2.643-.329.066a2.665 2.665 0 0 1-2.937-1.952l-.067-.328a2.67 2.67 0 0 1 1.952-2.938l8.35-2.239-2.235-8.351-.067-.329a2.667 2.667 0 0 1 5.218-1.052l2.642 9.862 11.209 6.47V14.439L22.116 7.22a2.665 2.665 0 0 1 0-3.771 2.666 2.666 0 0 1 3.52-.222l.251.222 6.114 6.112 6.115-6.112a2.666 2.666 0 0 1 3.52-.222z",className:"icon-freeze_svg__fill"})));var gI;function vy(){return vy=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},vy.apply(null,arguments)}const eq=e=>M.createElement("svg",vy({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),gI||(gI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M16.664 45.333q3.233 0 5.89-.953 2.658-.954 4.113-2.683V31.34h-10.29v3.94h4.902v4.474q-1.292 1.284-4.327 1.283-3.017 0-4.58-2.085-1.561-2.085-1.562-6.168v-1.657q.018-4.047 1.455-6.097t4.184-2.05q2.155 0 3.385 1.034t1.59 3.262h5.243q-.486-4.206-3.107-6.408t-7.273-2.201q-3.34 0-5.827 1.506t-3.807 4.35q-1.32 2.843-1.32 6.728v1.765q.036 3.78 1.428 6.578 1.392 2.797 3.95 4.269 2.56 1.47 5.953 1.47m20.67 0V18.667H32v26.666h5.333zm10.396 0V34.436h9.721v-4.432H47.73v-6.887h10.937v-4.45h-16v26.666z",className:"icon-gif_svg__fill"})));var _I;function my(){return my=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},my.apply(null,arguments)}const tq=e=>M.createElement("svg",my({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),_I||(_I=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32s10.745 24 24 24 24-10.745 24-24S45.255 8 32 8m1.667 21.333a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-3.334a1 1 0 0 1-1-1v-14a1 1 0 0 1 1-1zm-1.667-8a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334",className:"icon-info_svg__fill"})));var EI;function py(){return py=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},py.apply(null,arguments)}const nq=e=>M.createElement("svg",py({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),EI||(EI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 5.333a2.667 2.667 0 0 1 .311 5.316l-.311.018H10.667a2.67 2.67 0 0 0-2.65 2.355L8 13.333v37.334a2.667 2.667 0 0 0 2.356 2.648l.31.018H32a2.667 2.667 0 0 1 .311 5.316l-.311.018H10.667a8 8 0 0 1-7.987-7.53l-.013-.47V13.333a8 8 0 0 1 7.53-7.986l.47-.014zm17.634 13.893.252.222 10.666 10.666a2.666 2.666 0 0 1 .222 3.52l-.222.252-10.666 10.666a2.666 2.666 0 0 1-3.993-3.52l.221-.251 4.78-4.782L20 36a2.667 2.667 0 0 1-.311-5.315l.311-.018h33.56l-7.446-7.448a2.67 2.67 0 0 1-.221-3.52l.221-.251a2.666 2.666 0 0 1 3.52-.222",className:"icon-leave_svg__fill"})));var yI;function gy(){return gy=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},gy.apply(null,arguments)}const rq=e=>M.createElement("svg",gy({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),yI||(yI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M34.667 37.333c7.17 0 13.018 5.66 13.32 12.755l.013.579V56a2.667 2.667 0 0 1-5.315.311L42.667 56v-5.333c0-4.26-3.33-7.743-7.53-7.987l-.47-.013H13.333a8 8 0 0 0-7.986 7.53l-.014.47V56a2.667 2.667 0 0 1-5.316.311L0 56v-5.333c0-7.17 5.66-13.019 12.755-13.321l.578-.013zM54 37.765a13.33 13.33 0 0 1 9.986 12.297l.014.605V56a2.667 2.667 0 0 1-5.315.311L58.667 56v-5.331a8 8 0 0 0-6-7.74A2.667 2.667 0 1 1 54 37.765M24 5.333c7.364 0 13.333 5.97 13.333 13.334S31.363 32 24 32s-13.333-5.97-13.333-13.333S16.637 5.333 24 5.333m19.328.43a13.333 13.333 0 0 1 0 25.834 2.667 2.667 0 1 1-1.323-5.167 8 8 0 0 0 0-15.5 2.667 2.667 0 1 1 1.323-5.167M24 10.667a8 8 0 1 0 0 16 8 8 0 0 0 0-16",className:"icon-members_svg__fill"})));var bI;function _y(){return _y=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},_y.apply(null,arguments)}const iq=e=>M.createElement("svg",_y({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),bI||(bI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62 62 0 0 0 4.886-1.363l1.721-.568 2.04-.696 1.95.917A23.9 23.9 0 0 0 32 56c13.255 0 24-10.745 24-24S45.255 8 32 8M18.667 29.333a2.667 2.667 0 1 1-.001 5.333 2.667 2.667 0 0 1 .001-5.333m13.333 0a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334m13.333 0a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334",className:"icon-message_svg__fill"})));var CI;function Ey(){return Ey=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ey.apply(null,arguments)}const aq=e=>M.createElement("svg",Ey({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),CI||(CI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M18.667 34.667a2.667 2.667 0 0 1 .311 5.316l-.311.017h-5.334v16a2.667 2.667 0 0 1-5.316.311L8 56V40H2.667a2.667 2.667 0 0 1-.311-5.315l.31-.018h16zM32 29.333a2.667 2.667 0 0 1 2.649 2.356l.018.311v24a2.667 2.667 0 0 1-5.316.311L29.333 56V32A2.667 2.667 0 0 1 32 29.333M61.333 40a2.667 2.667 0 0 1 .311 5.315l-.31.018h-5.335L56 56a2.667 2.667 0 0 1-5.315.311L50.667 56l-.001-10.668-5.333.001a2.667 2.667 0 0 1-.311-5.316l.311-.017zm-8-34.667a2.67 2.67 0 0 1 2.65 2.356L56 8v24a2.667 2.667 0 0 1-5.315.311L50.667 32V8a2.667 2.667 0 0 1 2.666-2.667m-42.666 0a2.667 2.667 0 0 1 2.648 2.356l.018.311v18.667a2.667 2.667 0 0 1-5.316.311L8 26.667V8a2.667 2.667 0 0 1 2.667-2.667m21.333 0a2.667 2.667 0 0 1 2.649 2.356l.018.311-.001 10.666H40a2.668 2.668 0 0 1 .311 5.317L40 24H24a2.667 2.667 0 0 1-.311-5.315l.311-.018h5.333V8A2.667 2.667 0 0 1 32 5.333",className:"icon-moderations_svg__fill"})));var SI;function yy(){return yy=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},yy.apply(null,arguments)}const sq=e=>M.createElement("svg",yy({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),SI||(SI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 45.333a5.333 5.333 0 1 1 0 10.666 5.333 5.333 0 0 1 0-10.666M32 28a5.333 5.333 0 1 1 0 10.668A5.333 5.333 0 0 1 32 28m0-17.333c2.946 0 5.333 2.387 5.333 5.333S34.946 21.333 32 21.333 26.667 18.946 26.667 16s2.387-5.333 5.333-5.333",className:"icon-more_svg__fill"})));var TI;function by(){return by=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},by.apply(null,arguments)}const oq=e=>M.createElement("svg",by({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),TI||(TI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m55.62 19.616.067.123A26.55 26.55 0 0 1 58.667 32c0 4.326-1.03 8.41-2.864 12.025q-1.518 4.089-.67 6.363 1.066 2.855 2.662 4.758 2.31 2.379-1.506 3.33-3.135.782-10.879-1.646l-.488-.155-1.594-.527A26.6 26.6 0 0 1 32 58.667a26.55 26.55 0 0 1-12.326-3.014l-.059-.03 4-4A21.2 21.2 0 0 0 32 53.333c2.993 0 5.89-.614 8.562-1.786l.498-.226 1.925-.905 3.613 1.196.695.219q1.093.337 2.054.595l.472.125.485.121-.167-.42-.2-.594c-.814-2.685-.484-5.681.713-9.065l.154-.425.106-.284.528-1.084a21.2 21.2 0 0 0 1.895-8.8 21.2 21.2 0 0 0-1.71-8.385zm2.266-13.502a2.67 2.67 0 0 1 .221 3.52l-.221.252-48 48a2.668 2.668 0 0 1-3.993-3.52l.221-.252 5.238-5.237a26.56 26.56 0 0 1-6.015-16.412L5.333 32C5.333 17.272 17.273 5.333 32 5.333a26.55 26.55 0 0 1 16.877 6.02l5.237-5.239a2.67 2.67 0 0 1 3.772 0M32 10.667c-11.782 0-21.333 9.55-21.333 21.333 0 4.836 1.614 9.401 4.48 13.084l29.936-29.938A21.25 21.25 0 0 0 32 10.666z",className:"icon-mute_svg__fill"})));var MI;function Cy(){return Cy=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Cy.apply(null,arguments)}const lq=e=>M.createElement("svg",Cy({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),MI||(MI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M36.613 53.333c2.056 0 3.338 2.227 2.307 4.005a8 8 0 0 1-13.84 0c-.98-1.689.129-3.783 2.004-3.988l.303-.017zM32 2.667c11.56 0 20.972 9.194 21.323 20.669l.01.664v13.333a5.334 5.334 0 0 0 4.936 5.319l.753.033c2.963.318 3.077 4.616.342 5.24l-.342.056-.355.019H5.333l-.355-.019c-3.082-.33-3.082-4.965 0-5.296l.753-.033a5.335 5.335 0 0 0 4.92-4.9l.016-.419V24c0-11.782 9.55-21.333 21.333-21.333M32 8c-8.636 0-15.674 6.842-15.989 15.4L16 24v13.333c0 1.562-.336 3.046-.939 4.383l-.275.564-.218.387h34.861l-.215-.387a10.6 10.6 0 0 1-1.146-3.74l-.055-.674-.013-.533V24c0-8.837-7.163-16-16-16",className:"icon-notifications_svg__fill"})));var NI;function Sy(){return Sy=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Sy.apply(null,arguments)}const uq=e=>M.createElement("svg",Sy({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),NI||(NI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M36.613 53.333c2.056 0 3.338 2.227 2.307 4.005a8 8 0 0 1-13.84 0c-.98-1.689.129-3.783 2.004-3.988l.303-.017zM32 2.667c7.173 0 13.52 3.54 17.387 8.97l5.686-5.687a2.105 2.105 0 0 1 2.85-.117l.127.117a2.105 2.105 0 0 1 0 2.977L8.927 58.05c-.78.781-2.023.82-2.85.117l-.127-.117a2.105 2.105 0 0 1 0-2.977L13.023 48h-7.69l-.355-.019c-3.082-.33-3.082-4.965 0-5.296l.753-.033a5.335 5.335 0 0 0 4.92-4.9l.016-.419V24c0-11.782 9.55-21.333 21.333-21.333m20.85 16.795c.271 1.253.433 2.548.473 3.874l.01.664v13.333a5.334 5.334 0 0 0 4.936 5.319l.753.033c2.963.318 3.077 4.616.342 5.24l-.342.056-.355.019H24.31z",className:"icon-notifications-off-filled_svg__fill"})));var II;function Ty(){return Ty=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ty.apply(null,arguments)}const cq=e=>M.createElement("svg",Ty({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),II||(II=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M29.83 6.45a2.667 2.667 0 0 1 4.34 0l11.697 16.374L57 13.918c1.88-1.504 4.573.054 4.32 2.35l-.047.29-8 37.334A2.666 2.666 0 0 1 50.666 56H13.333a2.666 2.666 0 0 1-2.607-2.108l-8-37.333c-.525-2.452 2.315-4.207 4.273-2.641l11.132 8.906zM32 12.587l-11.163 15.63a2.667 2.667 0 0 1-3.836.532l-7.497-5.997 5.984 27.915h33.021l5.984-27.915L47 28.749a2.667 2.667 0 0 1-3.632-.281l-.204-.251zM32 32a5.333 5.333 0 1 1 0 10.668A5.333 5.333 0 0 1 32 32",className:"icon-operator_svg__fill"})));var AI;function My(){return My=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},My.apply(null,arguments)}const dq=e=>M.createElement("svg",My({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),AI||(AI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M50.667 5.333a8 8 0 0 1 8 8v37.334a8 8 0 0 1-8 8H13.333a8 8 0 0 1-8-8V13.333a8 8 0 0 1 8-8zm-8 25.107L19.77 53.332l30.896.001a2.667 2.667 0 0 0 2.661-2.498l.005-.168v-9.564L42.666 30.44zm8-19.773H13.333a2.667 2.667 0 0 0-2.666 2.666v37.334c0 1.143.72 2.119 1.731 2.498L40.781 24.78a2.67 2.67 0 0 1 3.52-.222l.251.222 8.78 8.78.001-20.228a2.667 2.667 0 0 0-2.498-2.661zm-28 5.333a6.666 6.666 0 1 1 0 13.333 6.666 6.666 0 0 1 0-13.333m0 5.333a1.334 1.334 0 1 0 0 2.667 1.334 1.334 0 0 0 0-2.667",className:"icon-photo_svg__fill"})));var wI;function Ny(){return Ny=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ny.apply(null,arguments)}const hq=e=>M.createElement("svg",Ny({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),wI||(wI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M51.908 34.75c1.9-1.233 1.896-3.26.013-4.514L19.376 8.577c-1.893-1.26-3.404-.391-3.376 1.968l.522 42.888c.028 2.347 1.596 3.247 3.493 2.016z",className:"icon-play_svg__fill"})));var RI;function Iy(){return Iy=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Iy.apply(null,arguments)}const fq=e=>M.createElement("svg",Iy({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),RI||(RI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M34.667 29.333h18.666c3.556 0 3.556 5.334 0 5.334H34.667v18.666c0 3.556-5.334 3.556-5.334 0V34.667H10.667c-3.556 0-3.556-5.334 0-5.334h18.666V10.667c0-3.556 5.334-3.556 5.334 0z",className:"icon-plus_svg__fill"})));var OI;function Ay(){return Ay=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ay.apply(null,arguments)}const vq=e=>M.createElement("svg",Ay({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),OI||(OI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 61.333C15.8 61.333 2.667 48.2 2.667 32S15.8 2.667 32 2.667 61.333 15.8 61.333 32 48.2 61.333 32 61.333M32 56c13.255 0 24-10.745 24-24S45.255 8 32 8 8 18.745 8 32s10.745 24 24 24m2.213-18.63a2.667 2.667 0 1 1-5.333 0v-2.69c0-1.148.734-2.168 1.823-2.53.173-.058.532-.195 1.01-.407.809-.36 1.616-.79 2.354-1.282 1.835-1.223 2.813-2.528 2.813-3.786a5.333 5.333 0 0 0-10.364-1.777 2.667 2.667 0 0 1-5.032-1.77 10.668 10.668 0 0 1 20.729 3.551c0 3.413-2.022 6.109-5.187 8.22a21 21 0 0 1-2.813 1.578zm-5.333 7.523a2.667 2.667 0 1 1 5.333 0v.44a2.667 2.667 0 1 1-5.333 0v-.44",className:"icon-question_svg__fill"})));var LI;function wy(){return wy=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},wy.apply(null,arguments)}const mq=e=>M.createElement("svg",wy({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),LI||(LI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m46.14 14.43.562.537 6.631 6.167v-7.8a2.67 2.67 0 0 1 2.356-2.65l.311-.017a2.667 2.667 0 0 1 2.649 2.355l.018.311v16a2.67 2.67 0 0 1-2.356 2.65L56 32H40a2.667 2.667 0 0 1-.311-5.315l.311-.018h11.452l-8.44-7.85c-5.964-5.893-15.168-7.182-22.563-3.156-7.38 4.018-11.172 12.357-9.314 20.455 1.859 8.107 8.935 14.032 17.362 14.518 8.43.487 16.162-4.585 18.967-12.426a2.667 2.667 0 0 1 5.022 1.797C48.88 50.082 38.973 56.582 28.19 55.959c-10.785-.623-19.862-8.222-22.254-18.65C3.542 26.872 8.426 16.135 17.9 10.977c9.227-5.024 20.65-3.579 28.241 3.453z",className:"icon-refresh_svg__fill"})));var UI;function Ry(){return Ry=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ry.apply(null,arguments)}const pq=e=>M.createElement("svg",Ry({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),UI||(UI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667m9.886 19.447a2.67 2.67 0 0 0-3.772 0L32 28.23l-6.114-6.115-.134-.124a2.667 2.667 0 0 0-3.638.124l-.124.134a2.667 2.667 0 0 0 .124 3.638L28.23 32l-6.115 6.114-.124.134a2.667 2.667 0 0 0 .124 3.638l.134.124a2.667 2.667 0 0 0 3.638-.124L32 35.77l6.114 6.115.134.124a2.667 2.667 0 0 0 3.638-.124l.124-.134a2.667 2.667 0 0 0-.124-3.638L35.77 32l6.115-6.114.124-.134a2.667 2.667 0 0 0-.124-3.638z",className:"icon-remove_svg__fill"})));var DI;function Oy(){return Oy=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Oy.apply(null,arguments)}const gq=e=>M.createElement("svg",Oy({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12"},e),DI||(DI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M11.774 10.5c.062 0 .12-.025.164-.07a.22.22 0 0 0 .062-.164c-.069-1.447-.495-2.678-1.268-3.66-.618-.785-1.455-1.409-2.49-1.855a9.3 9.3 0 0 0-2.406-.655 10 10 0 0 0-.862-.078V2.225a.23.23 0 0 0-.128-.203.23.23 0 0 0-.24.028L.084 5.692A.22.22 0 0 0 0 5.865c0 .068.03.132.082.175l4.523 3.737c.067.056.16.068.24.03a.22.22 0 0 0 .13-.202v-1.95c1.134-.08 2.178.003 3.107.25a6.4 6.4 0 0 1 2.087.96c1.018.724 1.398 1.5 1.401 1.507a.23.23 0 0 0 .204.128",className:"icon-reply-filled_svg__fill"})));var kI;function Ly(){return Ly=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ly.apply(null,arguments)}const _q=e=>M.createElement("svg",Ly({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),kI||(kI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M26.667 48C14.885 48 5.333 38.449 5.333 26.667S14.885 5.333 26.667 5.333 48 14.885 48 26.667c0 4.93-1.672 9.469-4.48 13.081l13.67 13.67a2.668 2.668 0 0 1-3.772 3.772l-13.67-13.67A21.24 21.24 0 0 1 26.667 48m0-5.333c8.836 0 16-7.164 16-16s-7.164-16-16-16-16 7.163-16 16 7.163 16 16 16",className:"icon-search_svg__fill"})));var PI;function Uy(){return Uy=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Uy.apply(null,arguments)}const Eq=e=>M.createElement("svg",Uy({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),PI||(PI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M59.795 29.43 7.329 2.979C4.691 1.802 1.76 4.153 2.932 6.798l6.925 18.609a2 2 0 0 0 1.544 1.275l32.273 5.394L11.4 37.47a2 2 0 0 0-1.544 1.275L2.932 57.353c-.879 2.645 1.76 4.997 4.397 3.527l52.466-26.453c2.051-.882 2.051-3.82 0-4.996z",className:"icon-send_svg__fill"})));var xI;function Dy(){return Dy=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Dy.apply(null,arguments)}const yq=e=>M.createElement("svg",Dy({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),xI||(xI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667A5.33 5.33 0 0 1 37.333 8v.24A4.4 4.4 0 0 0 40 12.267a4.4 4.4 0 0 0 4.853-.88l.16-.16a5.33 5.33 0 0 1 7.547 0 5.333 5.333 0 0 1 0 7.546l-.16.16a4.4 4.4 0 0 0-.88 4.854V24a4.4 4.4 0 0 0 4.027 2.667H56c2.946 0 5.333 2.387 5.333 5.333S58.946 37.333 56 37.333h-.24A4.4 4.4 0 0 0 51.733 40a4.4 4.4 0 0 0 .88 4.853l.16.16a5.33 5.33 0 0 1 0 7.547 5.333 5.333 0 0 1-7.546 0l-.16-.16a4.4 4.4 0 0 0-4.854-.88 4.4 4.4 0 0 0-2.666 4.027V56a5.333 5.333 0 0 1-10.667 0v-.24A4.4 4.4 0 0 0 24 51.733a4.4 4.4 0 0 0-4.853.88l-.16.16a5.33 5.33 0 0 1-7.547 0 5.333 5.333 0 0 1 0-7.546l.16-.16a4.4 4.4 0 0 0 .88-4.854 4.4 4.4 0 0 0-4.027-2.666H8A5.333 5.333 0 0 1 8 26.88h.24A4.4 4.4 0 0 0 12.267 24a4.4 4.4 0 0 0-.88-4.853l-.16-.16a5.33 5.33 0 0 1 0-7.547 5.333 5.333 0 0 1 7.546 0l.16.16a4.4 4.4 0 0 0 4.854.88H24a4.4 4.4 0 0 0 2.667-4.027V8A5.33 5.33 0 0 1 32 2.667M32 24a8 8 0 1 0 0 16 8 8 0 0 0 0-16",className:"icon-settings-filled_svg__fill"})));var FI;function ky(){return ky=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ky.apply(null,arguments)}const bq=e=>M.createElement("svg",ky({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32"},e),FI||(FI=M.createElement("path",{d:"M21.943 24.39a1.333 1.333 0 0 1-1.886 1.886l-9.333-9.333a1.333 1.333 0 0 1 0-1.886l9.333-9.333a1.333 1.333 0 1 1 1.886 1.885L13.553 16z",className:"icon-slide-left_svg__fill",clipRule:"evenodd"})));var BI;function Py(){return Py=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Py.apply(null,arguments)}const Cq=e=>M.createElement("svg",Py({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),BI||(BI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 61.333C48.2 61.333 61.333 48.2 61.333 32S48.2 2.667 32 2.667 2.667 15.8 2.667 32a2.838 2.838 0 1 0 5.678 0C8.344 18.935 18.934 8.344 32 8.344c13.065 0 23.656 10.591 23.656 23.656S45.065 55.656 32 55.656a2.838 2.838 0 1 0 0 5.677",className:"icon-spinner_svg__fill"})));var HI;function xy(){return xy=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},xy.apply(null,arguments)}const Sq=e=>M.createElement("svg",xy({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),HI||(HI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M36.889 43.013c6.608 0 12.121 4.685 12.43 10.734l.014.537V58a2.667 2.667 0 0 1-5.316.311L44 58v-3.716c0-3.07-2.87-5.718-6.636-5.925l-.475-.013H27.11c-3.838 0-6.86 2.525-7.096 5.557l-.015.381V58a2.667 2.667 0 0 1-5.315.311L14.667 58v-3.716c0-6.126 5.324-10.986 11.864-11.26l.58-.011zm18.578-17.291q.401 0 .784.118c4.632 1.426 7.518 4.801 7.736 9.688l.013.594v12.8a2.667 2.667 0 0 1-5.315.311l-.018-.311V36.124c-.002-2.595-1.163-4.171-3.528-5.034l-.104-.037-2.502.002a2.667 2.667 0 0 1-2.648-2.356l-.018-.31a2.67 2.67 0 0 1 2.355-2.65l.311-.017zm-44 0 .31.018a2.666 2.666 0 0 1 2.356 2.648l-.018.311a2.666 2.666 0 0 1-2.648 2.356l-2.51-.002-.119.042c-2.246.85-3.503 2.574-3.505 5.147v12.68l-.018.31A2.666 2.666 0 0 1 0 48.922V36.24l.014-.591c.225-4.874 3.203-8.415 7.712-9.809q.384-.117.788-.118zM32 19.958c5.512 0 10 4.409 10 9.871s-4.488 9.872-10 9.872-10-4.41-10-9.872 4.488-9.871 10-9.871m0 5.333c-2.588 0-4.667 2.043-4.667 4.538s2.08 4.538 4.667 4.538c2.588 0 4.667-2.042 4.667-4.538 0-2.495-2.08-4.538-4.667-4.538M17.333 2.667c5.513 0 10 4.409 10 9.871s-4.487 9.871-10 9.871c-5.512 0-10-4.409-10-9.871s4.488-9.871 10-9.871m29.334 0c5.512 0 10 4.409 10 9.871s-4.488 9.871-10 9.871c-5.513 0-10-4.409-10-9.871s4.487-9.871 10-9.871M17.333 8c-2.587 0-4.666 2.042-4.666 4.538s2.079 4.538 4.666 4.538S22 15.034 22 12.538 19.921 8 17.333 8m29.334 0C44.079 8 42 10.042 42 12.538s2.079 4.538 4.667 4.538 4.666-2.042 4.666-4.538S49.254 8 46.667 8",className:"icon-supergroup_svg__fill"})));var GI,zI;function Fy(){return Fy=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Fy.apply(null,arguments)}const Tq=e=>M.createElement("svg",Fy({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 64 64"},e),GI||(GI=M.createElement("path",{d:"M38.824 25.895a2.95 2.95 0 0 1 4.16-.074L57.1 39.378a2.92 2.92 0 0 1 .002 4.213L42.985 57.177a2.95 2.95 0 0 1-4.158-.07 2.92 2.92 0 0 1 .07-4.14l11.928-11.48-11.926-11.451a2.92 2.92 0 0 1-.075-4.14",className:"icon-thread_svg__fill",clipRule:"evenodd"})),zI||(zI=M.createElement("path",{d:"M8.866 6c1.583 0 2.866 1.216 2.866 2.716V25.5c0 7.672 6.846 14.068 15.475 14.068h22.927c1.583 0 2.866 1.216 2.866 2.716S51.717 45 50.134 45H27.207C15.604 45 6 36.35 6 25.5V8.716C6 7.216 7.283 6 8.866 6",className:"icon-thread_svg__fill",clipRule:"evenodd"})));var jI;function By(){return By=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},By.apply(null,arguments)}const Mq=e=>M.createElement("svg",By({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),jI||(jI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M34.667 5.333a2.667 2.667 0 0 1 0 5.334H13.333a2.667 2.667 0 0 0-2.666 2.666v37.334c0 1.143.72 2.118 1.73 2.497l28.384-28.383a2.667 2.667 0 0 1 3.771 0l8.781 8.78v-4.228a2.667 2.667 0 0 1 2.498-2.661l.169-.005a2.667 2.667 0 0 1 2.667 2.666v21.334a8 8 0 0 1-8 8H13.33a8 8 0 0 1-7.998-8V13.333a8 8 0 0 1 8-8zm8 25.105L19.77 53.333h30.897a2.667 2.667 0 0 0 2.661-2.498l.005-.168v-9.563zM22.667 16a6.666 6.666 0 1 1 0 13.333 6.666 6.666 0 0 1 0-13.333m0 5.333a1.334 1.334 0 1 0 0 2.667 1.334 1.334 0 0 0 0-2.667M56.78 3.448a2.665 2.665 0 0 1 3.771 0 2.665 2.665 0 0 1 0 3.771l-4.782 4.78 4.782 4.782c.998.998 1.04 2.59.125 3.638l-.125.133a2.665 2.665 0 0 1-3.771 0l-4.782-4.781-4.78 4.781a2.667 2.667 0 0 1-3.638.125l-.133-.125a2.665 2.665 0 0 1 0-3.771L48.228 12l-4.78-4.781a2.667 2.667 0 0 1-.125-3.638l.125-.133a2.665 2.665 0 0 1 3.771 0l4.78 4.78z",className:"icon-thumbnail-none_svg__fill"})));var VI;function Hy(){return Hy=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Hy.apply(null,arguments)}const Nq=e=>M.createElement("svg",Hy({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 88 48"},e),VI||(VI=M.createElement("g",{fill:"none",fillRule:"evenodd"},M.createElement("rect",{width:80,height:40,x:4,y:4,fill:"#000",className:"icon-toggleoff_svg__fill",rx:20}),M.createElement("circle",{cx:24,cy:24,r:12,fill:"#FFF"}),M.createElement("path",{fill:"#FFF",d:"M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992z"}),M.createElement("path",{fill:"#000",d:"M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0m0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4z",className:"icon-toggleoff_svg__fill"}))));var $I;function Gy(){return Gy=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Gy.apply(null,arguments)}const Iq=e=>M.createElement("svg",Gy({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 88 48"},e),$I||($I=M.createElement("g",{fill:"none",fillRule:"evenodd"},M.createElement("rect",{width:80,height:40,x:4,y:4,fill:"#000",className:"icon-toggleon_svg__fill",rx:20}),M.createElement("circle",{cx:64,cy:24,r:12,fill:"#FFF"}),M.createElement("path",{fill:"#FFF",d:"M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992z"}),M.createElement("path",{fill:"#000",d:"M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0m0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4z",className:"icon-toggleon_svg__fill"}))));var qI;function zy(){return zy=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},zy.apply(null,arguments)}const Aq=e=>M.createElement("svg",zy({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),qI||(qI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M42.667 37.333c7.17 0 13.018 5.66 13.32 12.755l.013.579V56a2.667 2.667 0 0 1-5.315.311L50.667 56v-5.333c0-4.26-3.33-7.743-7.53-7.987l-.47-.013H21.333a8 8 0 0 0-7.986 7.53l-.014.47V56a2.667 2.667 0 0 1-5.316.311L8 56v-5.333c0-7.17 5.66-13.019 12.755-13.321l.578-.013zM32 5.333c7.364 0 13.333 5.97 13.333 13.334S39.363 32 32 32s-13.333-5.97-13.333-13.333S24.637 5.333 32 5.333m0 5.334a8 8 0 1 0 0 16 8 8 0 0 0 0-16",className:"icon-user_svg__fill"})));var KI;function jy(){return jy=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},jy.apply(null,arguments)}const wq=e=>M.createElement("svg",jy({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),KI||(KI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M12.346 5.336v-.001c.405-.523 1.182-.524 1.58-.037.162.2.25.443.25.69v3.678c0 .518.42.938.938.938H18.6c.359 0 .7.179.911.488l.001.001.369.548.003.004c.174.256.226.583.134.895l-1.532 5.316c-.131.459-.559.782-1.044.782h-7.075c-.3 0-.593-.127-.8-.345l-1.13-1.222v-6.647zm-4.73 3.078 3.245-4.223.002-.002c1.125-1.456 3.339-1.521 4.517-.075.421.52.671 1.177.671 1.874v2.74h2.55c.99 0 1.908.496 2.462 1.31l.002.004.368.547.002.002a2.93 2.93 0 0 1 .382 2.475v.003l-1.528 5.302a2.96 2.96 0 0 1-2.847 2.142h-7.075a2.99 2.99 0 0 1-2.166-.935l-.007-.007-.066-.072a2.13 2.13 0 0 1-1.821 1.025H4.192a2.13 2.13 0 0 1-2.13-2.13v-8.3a2.13 2.13 0 0 1 2.13-2.13h2.115c.493 0 .948.168 1.31.45m-3.678 1.68c0-.141.114-.255.254-.255h2.115c.14 0 .254.114.254.255v8.3c0 .14-.114.255-.254.255H4.192a.255.255 0 0 1-.255-.255z",clipRule:"evenodd"})));var WI;function Vy(){return Vy=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Vy.apply(null,arguments)}const Rq=e=>M.createElement("svg",Vy({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),WI||(WI=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M11.654 18.664v.001c-.405.523-1.182.524-1.58.037-.162-.2-.25-.444-.25-.69v-3.678a.94.94 0 0 0-.938-.938H5.4c-.359 0-.7-.179-.911-.488l-.001-.001-.369-.548-.003-.004a1.05 1.05 0 0 1-.134-.895l1.532-5.316c.131-.459.559-.782 1.044-.782h7.075c.3 0 .593.127.8.345l1.13 1.222v6.647zm4.73-3.078-3.245 4.223-.002.002c-1.125 1.456-3.339 1.521-4.517.075a2.98 2.98 0 0 1-.671-1.874v-2.74h-2.55c-.99 0-1.908-.496-2.462-1.31l-.002-.004-.368-.547-.002-.002a2.93 2.93 0 0 1-.382-2.475v-.003L3.711 5.63a2.96 2.96 0 0 1 2.847-2.142h7.075c.823 0 1.608.345 2.166.935l.007.007.066.072a2.13 2.13 0 0 1 1.821-1.025h2.115a2.13 2.13 0 0 1 2.13 2.13v8.3a2.13 2.13 0 0 1-2.13 2.13h-2.115a2.12 2.12 0 0 1-1.31-.45m3.678-1.68c0 .141-.114.255-.254.255h-2.115a.255.255 0 0 1-.255-.255v-8.3c0-.14.115-.255.255-.255h2.115c.14 0 .255.114.255.255z",clipRule:"evenodd"})));function Oq(e){switch(e){case $e.ADD:return v.createElement(M$,null);case $e.ARROW_LEFT:return v.createElement(N$,null);case $e.ATTACH:return v.createElement(I$,null);case $e.AUDIO_ON_LINED:return v.createElement(A$,null);case $e.BAN:return v.createElement(w$,null);case $e.BROADCAST:return v.createElement(R$,null);case $e.CAMERA:return v.createElement(O$,null);case $e.CHANNELS:return v.createElement(L$,null);case $e.CHAT:return v.createElement(U$,null);case $e.CHAT_FILLED:return v.createElement(D$,null);case $e.CHEVRON_DOWN:return v.createElement(k$,null);case $e.CHEVRON_RIGHT:return v.createElement(P$,null);case $e.CLOSE:return v.createElement(x$,null);case $e.COLLAPSE:return v.createElement(F$,null);case $e.COPY:return v.createElement(B$,null);case $e.CREATE:return v.createElement(H$,null);case $e.DELETE:return v.createElement(G$,null);case $e.DISCONNECTED:return v.createElement(z$,null);case $e.DOCUMENT:return v.createElement(j$,null);case $e.DONE:return v.createElement(V$,null);case $e.DONE_ALL:return v.createElement($$,null);case $e.DOWNLOAD:return v.createElement(q$,null);case $e.EDIT:return v.createElement(K$,null);case $e.EMOJI_MORE:return v.createElement(W$,null);case $e.ERROR:return v.createElement(Q$,null);case $e.EXPAND:return v.createElement(Y$,null);case $e.FILE_AUDIO:return v.createElement(X$,null);case $e.FILE_DOCUMENT:return v.createElement(Z$,null);case $e.FREEZE:return v.createElement(J$,null);case $e.GIF:return v.createElement(eq,null);case $e.INFO:return v.createElement(tq,null);case $e.LEAVE:return v.createElement(nq,null);case $e.MEMBERS:return v.createElement(rq,null);case $e.MESSAGE:return v.createElement(iq,null);case $e.MODERATIONS:return v.createElement(aq,null);case $e.MORE:return v.createElement(sq,null);case $e.MUTE:return v.createElement(oq,null);case $e.NOTIFICATIONS:return v.createElement(lq,null);case $e.NOTIFICATIONS_OFF_FILLED:return v.createElement(uq,null);case $e.OPERATOR:return v.createElement(cq,null);case $e.PHOTO:return v.createElement(dq,null);case $e.PLAY:return v.createElement(hq,null);case $e.PLUS:return v.createElement(fq,null);case $e.QUESTION:return v.createElement(vq,null);case $e.REFRESH:return v.createElement(mq,null);case $e.REMOVE:return v.createElement(pq,null);case $e.REPLY:return v.createElement(gq,null);case $e.SEARCH:return v.createElement(_q,null);case $e.SEND:return v.createElement(Eq,null);case $e.SETTINGS_FILLED:return v.createElement(yq,null);case $e.SLIDE_LEFT:return v.createElement(bq,null);case $e.SPINNER:return v.createElement(Cq,null);case $e.SUPERGROUP:return v.createElement(Sq,null);case $e.THREAD:return v.createElement(Tq,null);case $e.THUMBNAIL_NONE:return v.createElement(Mq,null);case $e.TOGGLE_OFF:return v.createElement(Nq,null);case $e.TOGGLE_ON:return v.createElement(Iq,null);case $e.USER:return v.createElement(Aq,null);case $e.FEEDBACK_LIKE:return v.createElement(wq,null);case $e.FEEDBACK_DISLIKE:return v.createElement(Rq,null);default:return"icon"}}function qe(e){var n=e.className,t=n===void 0?"":n,r=e.type,i=e.fillColor,a=i===void 0?Yr.DEFAULT:i,s=e.width,o=s===void 0?26:s,l=e.height,u=l===void 0?26:l,d=e.onClick,f=d===void 0?_n:d,m=e.children,p=m===void 0?null:m,E=e.testID,_={width:typeof o=="string"?o:"".concat(o,"px"),minWidth:typeof o=="string"?o:"".concat(o,"px"),height:typeof u=="string"?u:"".concat(u,"px"),minHeight:typeof u=="string"?u:"".concat(u,"px")};return v.createElement("div",{className:Ne(Ne([],Array.isArray(t)?t:[t],!0),["sendbird-icon",T$(r),S$(a)],!1).join(" "),"data-testid":E,role:"button",onClick:f,onKeyDown:f,tabIndex:0,style:_},p||Oq(r))}var Se=$e,ze=Yr,qr=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=Math.random()*16|0,t=e==="x"?n:n&3|8;return t.toString(16)})},nc="sendbird-modal-root",Lq=function(){return v.createElement("div",{id:nc,className:nc})},Uq=function(e){var n=e.titleText,t=e.onCloseClick;return v.createElement("div",{className:"sendbird-modal__header"},v.createElement(Me,{type:be.H_1,color:de.ONBACKGROUND_1},n),v.createElement("div",{className:"sendbird-modal__close"},v.createElement(ga,{width:"32px",height:"32px",onClick:t},v.createElement(qe,{type:Se.CLOSE,fillColor:ze.DEFAULT,width:"24px",height:"24px"}))))},Dq=function(e){var n=e.children;return v.createElement("div",{className:"sendbird-modal__body"},v.createElement(Me,{type:be.SUBTITLE_1,color:de.ONBACKGROUND_2},n))},Ed=function(e){var n=e.submitText,t=e.disabled,r=t===void 0?!1:t,i=e.hideCancelButton,a=i===void 0?!1:i,s=e.type,o=s===void 0?Vn.DANGER:s,l=e.onSubmit,u=e.onCancel,d=M.useContext(On).stringSet;return v.createElement("div",{className:"sendbird-modal__footer"},!a&&v.createElement(Ri,{type:Vn.SECONDARY,onClick:u},v.createElement(Me,{type:be.BUTTON_1,color:de.ONBACKGROUND_1},d.BUTTON__CANCEL)),v.createElement(Ri,{type:o,disabled:r,onClick:l},n))};function wr(e){var n,t=e.children,r=t===void 0?null:t,i=e.className,a=i===void 0?"":i,s=e.contentClassName,o=s===void 0?"":s,l=e.isCloseOnClickOutside,u=l===void 0?!1:l,d=e.isFullScreenOnMobile,f=d===void 0?!1:d,m=e.titleText,p=e.submitText,E=e.disabled,_=E===void 0?!1:E,b=e.hideFooter,C=b===void 0?!1:b,y=e.type,T=y===void 0?Vn.DANGER:y,N=e.renderHeader,w=e.onSubmit,O=w===void 0?_n:w,L=e.onClose,P=e.onCancel,U=e.customFooter,B=(n=L??P)!==null&&n!==void 0?n:_n,F=yt().state.eventHandlers,H=M.useState(function(){return"sbu-modal-".concat(qr())})[0];M.useEffect(function(){var j,x;return(x=(j=F==null?void 0:F.modal)===null||j===void 0?void 0:j.onMounted)===null||x===void 0?void 0:x.call(j,{close:B,id:H})},[]);var G=pr().isMobile;return kd.createPortal(v.createElement("div",{className:zt("sendbird-modal",a,f&&G&&"sendbird-modal--full-mobile")},v.createElement("div",{className:zt.apply(void 0,Ne(["sendbird-modal__content"],Array.isArray(o)?o:[o],!1))},(N==null?void 0:N())||v.createElement(Uq,{titleText:m??"",onCloseClick:B}),v.createElement(Dq,null,r),!C&&(U??v.createElement(Ed,{disabled:_,onCancel:B,onSubmit:O,submitText:p??"",type:T}))),v.createElement("div",{className:zt("sendbird-modal__backdrop",u&&"sendbird-modal__backdrop--clickoutside"),onClick:function(j){j==null||j.stopPropagation(),u&&B()}})),document.getElementById(nc))}var PO=M.createContext({start:_n,stop:_n,isRecordable:!1}),kq=function(e){var n,t=e.children,r=yt().state,i=r.config,a=i.logger,s=i.groupChannel,o=M.useState(null),l=o[0],u=o[1],d=M.useState(!1),f=d[0],m=d[1],p=M.useState(!1),E=p[0],_=p[1],b=Ut().stringSet,C=s.enableVoiceMessage,y=M.useState(null),T=y[0],N=y[1],w=(n=oN.find(function(P){return MediaRecorder.isTypeSupported(P)}))!==null&&n!==void 0?n:"";C&&!w&&a.error("VoiceRecorder: Browser does not support mimeType",{mimmeTypes:oN}),M.useEffect(function(){C&&!T&&Kh(()=>import("./bundle-CYSX5oho-B0Fjmgvw.js"),[]).then(function(P){return N(P)})},[C,T]);var O=M.useCallback(function(P){var U,B;if(C&&!T){a.error("VoiceRecorder: Recording audio processor is being loaded.");return}var F=function(){try{navigator.permissions.query({name:"microphone"}).then(function(H){H.state==="denied"&&(a.warning("VoiceRecorder: Permission denied."),_(!0))})}catch(H){a.warning("VoiceRecorder: Failed to check permission.",H)}};a.info("VoiceRecorder: Start recording."),l&&(L(),a.info("VoiceRecorder: Previous mediaRecorder is stopped.")),F(),(B=(U=navigator==null?void 0:navigator.mediaDevices)===null||U===void 0?void 0:U.getUserMedia)===null||B===void 0||B.call(U,{audio:!0}).then(function(H){var G;a.info("VoiceRecorder: Succeeded getting media stream.",H),m(!0);var j=new MediaRecorder(H,{mimeType:w,audioBitsPerSecond:AB});j.ondataavailable=function(x){a.info("VoiceRecorder: Succeeded getting an available data.",x.data);var V=new File([x.data],_d,{lastModified:new Date().getTime(),type:xo});T==null||T.downsampleToWav(V,function(W){var Q,J=T==null?void 0:T.encodeMp3(W),$=new Blob(J,{type:xo}),te=new File([$],_d,{lastModified:new Date().getTime(),type:xo});(Q=P==null?void 0:P.onRecordingEnded)===null||Q===void 0||Q.call(P,te),a.info("VoiceRecorder: Succeeded converting audio file.",te)});var K=H.getAudioTracks();K.forEach(function(W){return W.stop()}),m(!1)},j.onstart=(G=P==null?void 0:P.onRecordingStarted)!==null&&G!==void 0?G:_n,j==null||j.start(),u(j)}).catch(function(H){a.error("VoiceRecorder: Failed getting media stream.",H),u(null)})},[l,T]),L=M.useCallback(function(){l==null||l.stop(),u(null),m(!1),a.info("VoiceRecorder: Stop recording.")},[l]);return v.createElement(PO.Provider,{value:{start:O,stop:L,isRecordable:f}},t,E&&v.createElement(wr,{hideFooter:!0,onClose:function(){return _(!1)}},v.createElement(v.Fragment,null,b.VOICE_RECORDING_PERMISSION_DENIED)))},xO=function(){return M.useContext(PO)},Ls=Symbol("@ts-pattern/matcher"),gp="@ts-pattern/anonymous-select-key",$y=function(e){return!!(e&&typeof e=="object")},xm=function(e){return e&&!!e[Ls]},fc=function e(n,t,r){if($y(n)){if(xm(n)){var i=n[Ls]().match(t),a=i.matched,s=i.selections;return a&&s&&Object.keys(s).forEach(function(l){return r(l,s[l])}),a}if(!$y(t))return!1;if(Array.isArray(n))return!!Array.isArray(t)&&n.length===t.length&&n.every(function(l,u){return e(l,t[u],r)});if(n instanceof Map)return t instanceof Map&&Array.from(n.keys()).every(function(l){return e(n.get(l),t.get(l),r)});if(n instanceof Set){if(!(t instanceof Set))return!1;if(n.size===0)return t.size===0;if(n.size===1){var o=Array.from(n.values())[0];return xm(o)?Array.from(t.values()).every(function(l){return e(o,l,r)}):t.has(o)}return Array.from(n.values()).every(function(l){return t.has(l)})}return Object.keys(n).every(function(l){var u,d=n[l];return(l in t||xm(u=d)&&u[Ls]().matcherType==="optional")&&e(d,t[l],r)})}return Object.is(t,n)},Kl=function e(n){var t,r,i;return $y(n)?xm(n)?(t=(r=(i=n[Ls]()).getSelectionKeys)==null?void 0:r.call(i))!=null?t:[]:Array.isArray(n)?Mf(n,e):Mf(Object.values(n),e):[]},Mf=function(e,n){return e.reduce(function(t,r){return t.concat(n(r))},[])};function QI(e){var n;return(n={})[Ls]=function(){return{match:function(t){var r={},i=function(a,s){r[a]=s};return t===void 0?(Kl(e).forEach(function(a){return i(a,void 0)}),{matched:!0,selections:r}):{matched:fc(e,t,i),selections:r}},getSelectionKeys:function(){return Kl(e)},matcherType:"optional"}},n}function YI(e){var n;return(n={})[Ls]=function(){return{match:function(t){if(!Array.isArray(t))return{matched:!1};var r={};if(t.length===0)return Kl(e).forEach(function(a){r[a]=[]}),{matched:!0,selections:r};var i=function(a,s){r[a]=(r[a]||[]).concat([s])};return{matched:t.every(function(a){return fc(e,a,i)}),selections:r}},getSelectionKeys:function(){return Kl(e)}}},n}function XI(){var e,n=[].slice.call(arguments);return(e={})[Ls]=function(){return{match:function(t){var r={},i=function(a,s){r[a]=s};return{matched:n.every(function(a){return fc(a,t,i)}),selections:r}},getSelectionKeys:function(){return Mf(n,Kl)},matcherType:"and"}},e}function ZI(){var e,n=[].slice.call(arguments);return(e={})[Ls]=function(){return{match:function(t){var r={},i=function(a,s){r[a]=s};return Mf(n,Kl).forEach(function(a){return i(a,void 0)}),{matched:n.some(function(a){return fc(a,t,i)}),selections:r}},getSelectionKeys:function(){return Mf(n,Kl)},matcherType:"or"}},e}function JI(e){var n;return(n={})[Ls]=function(){return{match:function(t){return{matched:!fc(e,t,function(){})}},getSelectionKeys:function(){return[]},matcherType:"not"}},n}function Js(e){var n;return(n={})[Ls]=function(){return{match:function(t){return{matched:!!e(t)}}}},n}function eA(){var e,n=[].slice.call(arguments),t=typeof n[0]=="string"?n[0]:void 0,r=n.length===2?n[1]:typeof n[0]=="string"?void 0:n[0];return(e={})[Ls]=function(){return{match:function(i){var a,s=((a={})[t??gp]=i,a);return{matched:r===void 0||fc(r,i,function(o,l){s[o]=l}),selections:s}},getSelectionKeys:function(){return[t??gp].concat(r===void 0?[]:Kl(r))}}},e}var FO=Js(function(e){return!0}),Pq=FO,xq=Js(function(e){return typeof e=="string"}),Fq=Js(function(e){return typeof e=="number"}),Bq=Js(function(e){return typeof e=="boolean"}),Hq=Js(function(e){return typeof e=="bigint"}),Gq=Js(function(e){return typeof e=="symbol"}),zq=Js(function(e){return e==null}),qy={__proto__:null,optional:QI,array:YI,intersection:XI,union:ZI,not:JI,when:Js,select:eA,any:FO,_:Pq,string:xq,number:Fq,boolean:Bq,bigint:Hq,symbol:Gq,nullish:zq,instanceOf:function(e){return Js(function(n){return function(t){return t instanceof n}}(e))},typed:function(){return{array:YI,optional:QI,intersection:XI,union:ZI,not:JI,select:eA,when:Js}}};function ji(e){return new jq(e,[])}var jq=function(){function e(t,r){this.value=void 0,this.cases=void 0,this.value=t,this.cases=r}var n=e.prototype;return n.with=function(){var t=[].slice.call(arguments),r=t[t.length-1],i=[t[0]],a=[];return t.length===3&&typeof t[1]=="function"?(i.push(t[0]),a.push(t[1])):t.length>2&&i.push.apply(i,t.slice(1,t.length-1)),new e(this.value,this.cases.concat([{match:function(s){var o={},l=!!(i.some(function(u){return fc(u,s,function(d,f){o[d]=f})})&&a.every(function(u){return u(s)}));return{matched:l,value:l&&Object.keys(o).length?gp in o?o[gp]:o:s}},handler:r}]))},n.when=function(t,r){return new e(this.value,this.cases.concat([{match:function(i){return{matched:!!t(i),value:i}},handler:r}]))},n.otherwise=function(t){return new e(this.value,this.cases.concat([{match:function(r){return{matched:!0,value:r}},handler:t}])).run()},n.exhaustive=function(){return this.run()},n.run=function(){for(var t=this.value,r=void 0,i=0;i<this.cases.length;i++){var a=this.cases[i],s=a.match(this.value);if(s.matched){t=s.value,r=a.handler;break}}if(!r){var o;try{o=JSON.stringify(this.value)}catch{o=this.value}throw new Error("Pattern matching error: no pattern matches value "+o)}return r(t,this.value)},e}(),BO=M.createContext({openModal:_n}),Vq=function(e){var n=e.children,t=M.useState([]),r=t[0],i=t[1],a=M.useCallback(function(l){i(function(u){return Ne(Ne([],u,!0),[l],!1)})},[]),s=M.useCallback(function(){i(function(l){return l.slice(1)})},[]),o=M.useMemo(function(){return function(){return ji(r).when(function(l){return l.length===0},function(){return v.createElement(v.Fragment,null)}).otherwise(function(){var l=r[0],u=l.modalProps,d=l.childElement;return v.createElement(wr,D({},u,{className:zt("sendbird-global-modal",u==null?void 0:u.className),onClose:function(){var f;(f=u==null?void 0:u.onClose)===null||f===void 0||f.call(u),s()}}),d({closeModal:s}))})}},[r]);return v.createElement(BO.Provider,{value:{openModal:a}},v.createElement(o,null),n)},Wb=function(){return M.useContext(BO)},HO=function(e){var n={};return{__getTopics:function(){return n},subscribe:function(t,r){var i;return(i=n[t])!==null&&i!==void 0||(n[t]=new Set),n[t].add(r),{remove:function(){n[t].delete(r)}}},publish:function(t,r){n[t]&&n[t].forEach(function(i){e!=null&&e.publishSynchronous?i(r!==void 0?r:{}):setTimeout(function(){return i(r!==void 0?r:{})},0)})}}},$q=function(){function e(n){var t=this,r,i=n.sdk,a=n.logger;(r=i==null?void 0:i.getAllEmoji)===null||r===void 0||r.call(i).then(function(s){t._emojiContainer=s,a==null||a.info("EmojiManager | Succeeded getting all emojis. ",s)}).catch(function(){a==null||a.warning("EmojiManager | Failed getting all emojis.")})}return Object.defineProperty(e.prototype,"AllEmojisAsArray",{get:function(){return this._emojiContainer.emojiCategories.flatMap(function(n){return n.emojis})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"AllEmojisAsMap",{get:function(){return this._emojiContainer.emojiCategories.flatMap(function(n){return n.emojis}).reduce(function(n,t){return n.set(t.key,t.url),n},new Map)},enumerable:!1,configurable:!0}),e.prototype.getAllEmojis=function(n){var t=this;return ji(n).when(function(r){return["array","arr"].includes(r)},function(){return t.AllEmojisAsArray}).when(function(r){return["map"].includes(r)},function(){return t.AllEmojisAsMap}).otherwise(function(){return t.AllEmojisAsArray})},e.prototype.getEmojiUrl=function(n){var t,r;return(r=(t=this.AllEmojisAsArray.find(function(i){return i.key===n}))===null||t===void 0?void 0:t.url)!==null&&r!==void 0?r:""},Object.defineProperty(e.prototype,"emojiContainer",{get:function(){return this._emojiContainer},enumerable:!1,configurable:!0}),e}(),GO={100:"extra-light",200:"light",300:"main",400:"dark",500:"extra-dark","overlay-01":"overlay-dark","overlay-02":"overlay-light","onlight-01":"onlight-text-high-emphasis","onlight-02":"onlight-text-mid-emphasis","onlight-03":"onlight-text-low-emphasis","onlight-04":"onlight-text-disabled","ondark-01":"ondark-text-high-emphasis","ondark-02":"ondark-text-mid-emphasis","ondark-03":"ondark-text-low-emphasis","ondark-04":"ondark-text-disabled"},qq=Object.values(GO).sort(function(e,n){return n.length-e.length}),Kq=new Map(Object.entries(GO).map(function(e){var n=e[0],t=e[1];return[t,n]})),Wq=function(e){var n={};return Object.entries(e).forEach(function(t){for(var r=t[0],i=t[1],a=r,s=0,o=qq;s<o.length;s++){var l=o[s],u=new RegExp("-".concat(l,"$"));if(u.test(r)){var d=Kq.get(l);if(d){a=r.replace(u,"-".concat(d));break}}}n[a]=i}),n};/*!
 * css-vars-ponyfill
 * v2.4.9
 * https://jhildenbiddle.github.io/css-vars-ponyfill/
 * (c) 2018-2024 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */function va(){return va=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},va.apply(this,arguments)}/*!
 * get-css-data
 * v2.1.0
 * https://github.com/jhildenbiddle/get-css-data
 * (c) 2018-2022 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */function tA(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t={mimeType:n.mimeType||null,onBeforeSend:n.onBeforeSend||Function.prototype,onSuccess:n.onSuccess||Function.prototype,onError:n.onError||Function.prototype,onComplete:n.onComplete||Function.prototype},r=Array.isArray(e)?e:[e],i=Array.apply(null,Array(r.length)).map(function(u){return null});function a(u){var d=typeof u=="string",f=d&&u.trim().charAt(0)==="<";return d&&!f}function s(u,d){t.onError(u,r[d],d)}function o(u,d){var f=t.onSuccess(u,r[d],d);u=f===!1?"":f||u,i[d]=u,i.indexOf(null)===-1&&t.onComplete(i)}var l=document.createElement("a");r.forEach(function(u,d){l.setAttribute("href",u),l.href=String(l.href);var f=!!(document.all&&!window.atob),m=f&&l.host.split(":")[0]!==location.host.split(":")[0];if(m){var p=l.protocol===location.protocol;if(p){var E=new XDomainRequest;E.open("GET",u),E.timeout=0,E.onprogress=Function.prototype,E.ontimeout=Function.prototype,E.onload=function(){var b=E.responseText;a(b)?o(b,d):s(E,d)},E.onerror=function(b){s(E,d)},setTimeout(function(){E.send()},0)}else console.warn("Internet Explorer 9 Cross-Origin (CORS) requests must use the same protocol (".concat(u,")")),s(null,d)}else{var _=new XMLHttpRequest;_.open("GET",u),t.mimeType&&_.overrideMimeType&&_.overrideMimeType(t.mimeType),t.onBeforeSend(_,u,d),_.onreadystatechange=function(){if(_.readyState===4){var b=_.responseText;_.status<400&&a(b)||_.status===0&&a(b)?o(b,d):s(_,d)}},_.send()}})}/**
 * Gets CSS data from <style> and <link> nodes (including @imports), then
 * returns data in order processed by DOM. Allows specifying nodes to
 * include/exclude and filtering CSS data using RegEx.
 *
 * @preserve
 * @param {object}   [options] The options object
 * @param {object}   [options.rootElement=document] Root element to traverse for
 *                   <link> and <style> nodes.
 * @param {string}   [options.include] CSS selector matching <link> and <style>
 *                   nodes to include
 * @param {string}   [options.exclude] CSS selector matching <link> and <style>
 *                   nodes to exclude
 * @param {object}   [options.filter] Regular expression used to filter node CSS
 *                   data. Each block of CSS data is tested against the filter,
 *                   and only matching data is included.
 * @param {boolean}  [options.skipDisabled=true] Determines if disabled
 *                   stylesheets will be skipped while collecting CSS data.
 * @param {boolean}  [options.useCSSOM=false] Determines if CSS data will be
 *                   collected from a stylesheet's runtime values instead of its
 *                   text content. This is required to get accurate CSS data
 *                   when a stylesheet has been modified using the deleteRule()
 *                   or insertRule() methods because these modifications will
 *                   not be reflected in the stylesheet's text content.
 * @param {function} [options.onBeforeSend] Callback before XHR is sent. Passes
 *                   1) the XHR object, 2) source node reference, and 3) the
 *                   source URL as arguments.
 * @param {function} [options.onSuccess] Callback on each CSS node read. Passes
 *                   1) CSS text, 2) source node reference, and 3) the source
 *                   URL as arguments.
 * @param {function} [options.onError] Callback on each error. Passes 1) the XHR
 *                   object for inspection, 2) soure node reference, and 3) the
 *                   source URL that failed (either a <link> href or an @import)
 *                   as arguments
 * @param {function} [options.onComplete] Callback after all nodes have been
 *                   processed. Passes 1) concatenated CSS text, 2) an array of
 *                   CSS text in DOM order, and 3) an array of nodes in DOM
 *                   order as arguments.
 *
 * @example
 *
 *   getCssData({
 *     rootElement : document,
 *     include     : 'style,link[rel="stylesheet"]',
 *     exclude     : '[href="skip.css"]',
 *     filter      : /red/,
 *     skipDisabled: true,
 *     useCSSOM    : false,
 *     onBeforeSend(xhr, node, url) {
 *       // ...
 *     }
 *     onSuccess(cssText, node, url) {
 *       // ...
 *     }
 *     onError(xhr, node, url) {
 *       // ...
 *     },
 *     onComplete(cssText, cssArray, nodeArray) {
 *       // ...
 *     }
 *   });
 */function nA(e){var n={cssComments:/\/\*[\s\S]+?\*\//g,cssImports:/(?:@import\s*)(?:url\(\s*)?(?:['"])([^'"]*)(?:['"])(?:\s*\))?(?:[^;]*;)/g},t={rootElement:e.rootElement||document,include:e.include||'style,link[rel="stylesheet"]',exclude:e.exclude||null,filter:e.filter||null,skipDisabled:e.skipDisabled!==!1,useCSSOM:e.useCSSOM||!1,onBeforeSend:e.onBeforeSend||Function.prototype,onSuccess:e.onSuccess||Function.prototype,onError:e.onError||Function.prototype,onComplete:e.onComplete||Function.prototype},r=Array.apply(null,t.rootElement.querySelectorAll(t.include)).filter(function(u){return!Qq(u,t.exclude)}),i=Array.apply(null,Array(r.length)).map(function(u){return null});function a(){var u=i.indexOf(null)===-1;if(u){i.reduce(function(f,m,p){return m===""&&f.push(p),f},[]).reverse().forEach(function(f){return[r,i].forEach(function(m){return m.splice(f,1)})});var d=i.join("");t.onComplete(d,i,r)}}function s(u,d,f,m){var p=t.onSuccess(u,f,m);u=p!==void 0&&!p?"":p||u,l(u,f,m,function(E,_){i[d]===null&&(_.forEach(function(b){return t.onError(b.xhr,f,b.url)}),!t.filter||t.filter.test(E)?i[d]=E:i[d]="",a())})}function o(u,d){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],m={};return m.rules=(u.replace(n.cssComments,"").match(n.cssImports)||[]).filter(function(p){return f.indexOf(p)===-1}),m.urls=m.rules.map(function(p){return p.replace(n.cssImports,"$1")}),m.absoluteUrls=m.urls.map(function(p){return D_(p,d)}),m.absoluteRules=m.rules.map(function(p,E){var _=m.urls[E],b=D_(m.absoluteUrls[E],d);return p.replace(_,b)}),m}function l(u,d,f,m){var p=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],E=arguments.length>5&&arguments[5]!==void 0?arguments[5]:[],_=o(u,f,E);_.rules.length?tA(_.absoluteUrls,{onBeforeSend:function(C,y,T){t.onBeforeSend(C,d,y)},onSuccess:function(C,y,T){var N=t.onSuccess(C,d,y);C=N===!1?"":N||C;var w=o(C,y,E);return w.rules.forEach(function(O,L){C=C.replace(O,w.absoluteRules[L])}),C},onError:function(C,y,T){p.push({xhr:C,url:y}),E.push(_.rules[T]),l(u,d,f,m,p,E)},onComplete:function(C){C.forEach(function(y,T){u=u.replace(_.rules[T],y)}),l(u,d,f,m,p,E)}}):m(u,p)}r.length?r.forEach(function(u,d){var f=u.getAttribute("href"),m=u.getAttribute("rel"),p=u.nodeName.toLowerCase()==="link"&&f&&m&&m.toLowerCase().indexOf("stylesheet")!==-1,E=t.skipDisabled===!1?!1:u.disabled,_=u.nodeName.toLowerCase()==="style";if(p&&!E){var b=f.indexOf("data:text/css")!==-1;if(b){var C=decodeURIComponent(f.substring(f.indexOf(",")+1));t.useCSSOM&&(C=Array.apply(null,u.sheet.cssRules).map(function(T){return T.cssText}).join("")),s(C,d,u,location.href)}else tA(f,{mimeType:"text/css",onBeforeSend:function(N,w,O){t.onBeforeSend(N,u,w)},onSuccess:function(N,w,O){var L=D_(f);s(N,d,u,L)},onError:function(N,w,O){i[d]="",t.onError(N,u,w),a()}})}else if(_&&!E){var y=u.textContent;t.useCSSOM&&(y=Array.apply(null,u.sheet.cssRules).map(function(T){return T.cssText}).join("")),s(y,d,u,location.href)}else i[d]="",a()}):t.onComplete("",[])}function D_(e,n){var t=document.implementation.createHTMLDocument(""),r=t.createElement("base"),i=t.createElement("a");return t.head.appendChild(r),t.body.appendChild(i),r.href=n||document.baseURI||(document.querySelector("base")||{}).href||location.href,i.href=e,i.href}function Qq(e,n){var t=e.matches||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector;return t.call(e,n)}var zO=jO;function jO(e,n,t){e instanceof RegExp&&(e=rA(e,t)),n instanceof RegExp&&(n=rA(n,t));var r=VO(e,n,t);return r&&{start:r[0],end:r[1],pre:t.slice(0,r[0]),body:t.slice(r[0]+e.length,r[1]),post:t.slice(r[1]+n.length)}}function rA(e,n){var t=n.match(e);return t?t[0]:null}jO.range=VO;function VO(e,n,t){var r,i,a,s,o,l=t.indexOf(e),u=t.indexOf(n,l+1),d=l;if(l>=0&&u>0){if(e===n)return[l,u];for(r=[],a=t.length;d>=0&&!o;)d==l?(r.push(d),l=t.indexOf(e,d+1)):r.length==1?o=[r.pop(),u]:(i=r.pop(),i<a&&(a=i,s=u),u=t.indexOf(n,d+1)),d=l<u&&l>=0?l:u;r.length&&(o=[a,s])}return o}function Qb(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t={preserveStatic:!0,removeComments:!1},r=va({},t,n),i=[];function a(G){throw new Error("CSS parse error: ".concat(G))}function s(G){var j=G.exec(e);if(j)return e=e.slice(j[0].length),j}function o(){return s(/^{\s*/)}function l(){return s(/^}/)}function u(){s(/^\s*/)}function d(){if(u(),!(e[0]!=="/"||e[1]!=="*")){for(var G=2;e[G]&&(e[G]!=="*"||e[G+1]!=="/");)G++;if(!e[G])return a("end of comment is missing");var j=e.slice(2,G);return e=e.slice(G+2),{type:"comment",comment:j}}}function f(){for(var G=[],j;j=d();)G.push(j);return r.removeComments?[]:G}function m(){for(u();e[0]==="}";)a("extra closing bracket");var G=s(/^(("(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^{])+)/);if(G){var j=G[0].trim(),x,V=/\/\*/.test(j);V&&(j=j.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,""));var K=/["']\w*,\w*["']/.test(j);K&&(j=j.replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(Q){return Q.replace(/,/g,"")}));var W=/,/.test(j);return W?x=j.split(/\s*(?![^(]*\)),\s*/):x=[j],K&&(x=x.map(function(Q){return Q.replace(/\u200C/g,",")})),x}}function p(){if(e[0]==="@")return B();s(/^([;\s]*)+/);var G=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,j=s(/^(\*?[-#/*\\\w.]+(\[[0-9a-z_-]+\])?)\s*/);if(j){if(j=j[0].trim(),!s(/^:\s*/))return a("property missing ':'");var x=s(/^((?:\/\*.*?\*\/|'(?:\\'|.)*?'|"(?:\\"|.)*?"|\((\s*'(?:\\'|.)*?'|"(?:\\"|.)*?"|[^)]*?)\s*\)|[^};])+)/),V={type:"declaration",property:j.replace(G,""),value:x?x[0].replace(G,"").trim():""};return s(/^[;\s]*/),V}}function E(){if(!o())return a("missing '{'");for(var G,j=f();G=p();)j.push(G),j=j.concat(f());return l()?j:a("missing '}'")}function _(){u();for(var G=[],j;j=s(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)G.push(j[1]),s(/^,\s*/);if(G.length)return{type:"keyframe",values:G,declarations:E()}}function b(){var G=s(/^@([-\w]+)?keyframes\s*/);if(G){var j=G[1];if(G=s(/^([-\w]+)\s*/),!G)return a("@keyframes missing name");var x=G[1];if(!o())return a("@keyframes missing '{'");for(var V,K=f();V=_();)K.push(V),K=K.concat(f());return l()?{type:"keyframes",name:x,vendor:j,keyframes:K}:a("@keyframes missing '}'")}}function C(){var G=s(/^@page */);if(G){var j=m()||[];return{type:"page",selectors:j,declarations:E()}}}function y(){var G=s(/@(top|bottom|left|right)-(left|center|right|top|middle|bottom)-?(corner)?\s*/);if(G){var j="".concat(G[1],"-").concat(G[2])+(G[3]?"-".concat(G[3]):"");return{type:"page-margin-box",name:j,declarations:E()}}}function T(){var G=s(/^@font-face\s*/);if(G)return{type:"font-face",declarations:E()}}function N(){var G=s(/^@supports *([^{]+)/);if(G)return{type:"supports",supports:G[1].trim(),rules:H()}}function w(){var G=s(/^@host\s*/);if(G)return{type:"host",rules:H()}}function O(){var G=s(/^@media([^{]+)*/);if(G)return{type:"media",media:(G[1]||"").trim(),rules:H()}}function L(){var G=s(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(G)return{type:"custom-media",name:G[1].trim(),media:G[2].trim()}}function P(){var G=s(/^@([-\w]+)?document *([^{]+)/);if(G)return{type:"document",document:G[2].trim(),vendor:G[1]?G[1].trim():null,rules:H()}}function U(){var G=s(/^@(import|charset|namespace)\s*([^;]+);/);if(G)return{type:G[1],name:G[2].trim()}}function B(){if(u(),e[0]==="@"){var G=U()||T()||O()||b()||N()||P()||L()||w()||C()||y();if(G&&!r.preserveStatic){var j=!1;if(G.declarations)j=G.declarations.some(function(V){return/var\(/.test(V.value)});else{var x=G.keyframes||G.rules||[];j=x.some(function(V){return(V.declarations||[]).some(function(K){return/var\(/.test(K.value)})})}return j?G:{}}return G}}function F(){if(!r.preserveStatic){var G=zO("{","}",e);if(G){var j=/:(?:root|host)(?![.:#(])/.test(G.pre)&&/--\S*\s*:/.test(G.body),x=/var\(/.test(G.body);if(!j&&!x)return e=e.slice(G.end+1),{}}}var V=m()||[],K=r.preserveStatic?E():E().filter(function(W){var Q=V.some(function($){return/:(?:root|host)(?![.:#(])/.test($)})&&/^--\S/.test(W.property),J=/var\(/.test(W.value);return Q||J});return V.length||a("selector missing"),{type:"rule",selectors:V,declarations:K}}function H(G){if(!G&&!o())return a("missing '{'");for(var j,x=f();e.length&&(G||e[0]!=="}")&&(j=B()||F());)j.type&&x.push(j),x=x.concat(f());return!G&&!l()?a("missing '}'"):x}return{type:"stylesheet",stylesheet:{rules:H(!0),errors:i}}}function iA(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t={parseHost:!1,store:{},onWarning:function(){}},r=va({},t,n),i=new RegExp(":".concat(r.parseHost?"host":"root","$"));return typeof e=="string"&&(e=Qb(e,r)),e.stylesheet.rules.forEach(function(a){a.type!=="rule"||!a.selectors.some(function(s){return i.test(s)})||a.declarations.forEach(function(s,o){var l=s.property,u=s.value;l&&l.indexOf("--")===0&&(r.store[l]=u)})}),r.store}function $O(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",t=arguments.length>2?arguments[2]:void 0,r={charset:function(s){return"@charset "+s.name+";"},comment:function(s){return s.comment.indexOf("__CSSVARSPONYFILL")===0?"/*"+s.comment+"*/":""},"custom-media":function(s){return"@custom-media "+s.name+" "+s.media+";"},declaration:function(s){return s.property+":"+s.value+";"},document:function(s){return"@"+(s.vendor||"")+"document "+s.document+"{"+i(s.rules)+"}"},"font-face":function(s){return"@font-face{"+i(s.declarations)+"}"},host:function(s){return"@host{"+i(s.rules)+"}"},import:function(s){return"@import "+s.name+";"},keyframe:function(s){return s.values.join(",")+"{"+i(s.declarations)+"}"},keyframes:function(s){return"@"+(s.vendor||"")+"keyframes "+s.name+"{"+i(s.keyframes)+"}"},media:function(s){return"@media "+s.media+"{"+i(s.rules)+"}"},namespace:function(s){return"@namespace "+s.name+";"},page:function(s){return"@page "+(s.selectors.length?s.selectors.join(", "):"")+"{"+i(s.declarations)+"}"},"page-margin-box":function(s){return"@"+s.name+"{"+i(s.declarations)+"}"},rule:function(s){var o=s.declarations;if(o.length)return s.selectors.join(",")+"{"+i(o)+"}"},supports:function(s){return"@supports "+s.supports+"{"+i(s.rules)+"}"}};function i(a){for(var s="",o=0;o<a.length;o++){var l=a[o];t&&t(l);var u=r[l.type](l);u&&(s+=u,u.length&&l.selectors&&(s+=n))}return s}return i(e.stylesheet.rules)}function qO(e,n){e.rules.forEach(function(t){if(t.rules){qO(t,n);return}if(t.keyframes){t.keyframes.forEach(function(r){r.type==="keyframe"&&n(r.declarations,t)});return}t.declarations&&n(t.declarations,e)})}var Yq="--",Xq="var";function Zq(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t={preserveStatic:!0,preserveVars:!1,variables:{},onWarning:function(){}},r=va({},t,n);return typeof e=="string"&&(e=Qb(e,r)),qO(e.stylesheet,function(i,a){for(var s=0;s<i.length;s++){var o=i[s],l=o.type,u=o.property,d=o.value;if(l==="declaration"){if(!r.preserveVars&&u&&u.indexOf(Yq)===0){i.splice(s,1),s--;continue}if(d.indexOf(Xq+"(")!==-1){var f=jh(d,r);f!==o.value&&(f=Jq(f),r.preserveVars?(i.splice(s,0,{type:l,property:u,value:f}),s++):o.value=f)}}}}),$O(e)}function Jq(e){var n=/calc\(([^)]+)\)/g;return(e.match(n)||[]).forEach(function(t){var r="calc".concat(t.split("calc").join(""));e=e.replace(t,r)}),e}function jh(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0;if(e.indexOf("var(")===-1)return e;var r=zO("(",")",e);function i(s){var o=s.split(",")[0].replace(/[\s\n\t]/g,""),l=(s.match(/(?:\s*,\s*){1}(.*)?/)||[])[1],u=Object.prototype.hasOwnProperty.call(n.variables,o)?String(n.variables[o]):void 0,d=u||(l?String(l):void 0),f=t||s;return u||n.onWarning('variable "'.concat(o,'" is undefined')),d&&d!=="undefined"&&d.length>0?jh(d,n,f):"var(".concat(f,")")}if(r)if(r.pre.slice(-3)==="var"){var a=r.body.trim().length===0;return a?(n.onWarning("var() must contain a non-whitespace string"),e):r.pre.slice(0,-3)+i(r.body)+jh(r.post,n)}else return r.pre+"(".concat(jh(r.body,n),")")+jh(r.post,n);else return e.indexOf("var(")!==-1&&n.onWarning('missing closing ")" in the value "'.concat(e,'"')),e}var Yp=typeof window<"u",aA=Yp&&window.CSS&&window.CSS.supports&&window.CSS.supports("(--a: 0)"),Du={group:0,job:0},pm={rootElement:Yp?document:null,shadowDOM:!1,include:"style,link[rel=stylesheet]",exclude:"",variables:{},onlyLegacy:!0,preserveStatic:!0,preserveVars:!1,silent:!1,updateDOM:!0,updateURLs:!0,watch:null,onBeforeSend:function(){},onError:function(){},onWarning:function(){},onSuccess:function(){},onComplete:function(){},onFinally:function(){}},qs={cssComments:/\/\*[\s\S]+?\*\//g,cssKeyframes:/@(?:-\w*-)?keyframes/,cssMediaQueries:/@media[^{]+\{([\s\S]+?})\s*}/g,cssUrls:/url\((?!['"]?(?:data|http|\/\/):)['"]?([^'")]*)['"]?\)/g,cssVarDeclRules:/(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^}]*})/g,cssVarDecls:/(?:[\s;]*)(-{2}\w[\w-]*)(?:\s*:\s*)([^;]*);/g,cssVarFunc:/var\(\s*--[\w-]/,cssVars:/(?:(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^;]*;*\s*)|(?:var\(\s*))(--[^:)]+)(?:\s*[:)])/},Gr={dom:{},job:{},user:{}},Fm=!1,Fa=null,Vh=0,Ky=null,Wy=!1;/**
 * Fetches, parses, and transforms CSS custom properties from specified
 * <style> and <link> elements into static values, then appends a new <style>
 * element with static values to the DOM to provide CSS custom property
 * compatibility for legacy browsers. Also provides a single interface for
 * live updates of runtime values in both modern and legacy browsers.
 *
 * @preserve
 * @param {object}   [options] Options object
 * @param {object}   [options.rootElement=document] Root element to traverse for
 *                   <link> and <style> nodes
 * @param {boolean}  [options.shadowDOM=false] Determines if shadow DOM <link>
 *                   and <style> nodes will be processed.
 * @param {string}   [options.include="style,link[rel=stylesheet]"] CSS selector
 *                   matching <link re="stylesheet"> and <style> nodes to
 *                   process
 * @param {string}   [options.exclude] CSS selector matching <link
 *                   rel="stylehseet"> and <style> nodes to exclude from those
 *                   matches by options.include
 * @param {object}   [options.variables] A map of custom property name/value
 *                   pairs. Property names can omit or include the leading
 *                   double-hyphen (), and values specified will override
 *                   previous values
 * @param {boolean}  [options.onlyLegacy=true] Determines if the ponyfill will
 *                   only generate legacy-compatible CSS in browsers that lack
 *                   native support (i.e., legacy browsers)
 * @param {boolean}  [options.preserveStatic=true] Determines if CSS
 *                   declarations that do not reference a custom property will
 *                   be preserved in the transformed CSS
 * @param {boolean}  [options.preserveVars=false] Determines if CSS custom
 *                   property declarations will be preserved in the transformed
 *                   CSS
 * @param {boolean}  [options.silent=false] Determines if warning and error
 *                   messages will be displayed on the console
 * @param {boolean}  [options.updateDOM=true] Determines if the ponyfill will
 *                   update the DOM after processing CSS custom properties
 * @param {boolean}  [options.updateURLs=true] Determines if relative url()
 *                   paths will be converted to absolute urls in external CSS
 * @param {boolean}  [options.watch=false] Determines if a MutationObserver will
 *                   be created that will execute the ponyfill when a <link> or
 *                   <style> DOM mutation is observed
 * @param {function} [options.onBeforeSend] Callback before XHR is sent. Passes
 *                   1) the XHR object, 2) source node reference, and 3) the
 *                   source URL as arguments
 * @param {function} [options.onError] Callback after a CSS parsing error has
 *                   occurred or an XHR request has failed. Passes 1) an error
 *                   message, and 2) source node reference, 3) xhr, and 4 url as
 *                   arguments.
 * @param {function} [options.onWarning] Callback after each CSS parsing warning
 *                   has occurred. Passes 1) a warning message as an argument.
 * @param {function} [options.onSuccess] Callback after CSS data has been
 *                   collected from each node and before CSS custom properties
 *                   have been transformed. Allows modifying the CSS data before
 *                   it is transformed by returning any string value (or false
 *                   to skip). Passes 1) CSS text, 2) source node reference, and
 *                   3) the source URL as arguments.
 * @param {function} [options.onComplete] Callback after all CSS has been
 *                   processed, legacy-compatible CSS has been generated, and
 *                   (optionally) the DOM has been updated. Passes 1) a CSS
 *                   string with CSS variable values resolved, 2) an array of
 *                   output <style> node references that have been appended to
 *                   the DOM, 3) an object containing all custom properies names
 *                   and values, and 4) the ponyfill execution time in
 *                   milliseconds.
 * @param {function} [options.onFinally] Callback in modern and legacy browsers
 *                   after the ponyfill has finished all tasks. Passes 1) a
 *                   boolean indicating if the last ponyfill call resulted in a
 *                   style change, 2) a boolean indicating if the current
 *                   browser provides native support for CSS custom properties,
 *                   and 3) the ponyfill execution time in milliseconds.
 * @example
 *
 *   cssVars({
 *     rootElement   : document,
 *     shadowDOM     : false,
 *     include       : 'style,link[rel="stylesheet"]',
 *     exclude       : '',
 *     variables     : {},
 *     onlyLegacy    : true,
 *     preserveStatic: true,
 *     preserveVars  : false,
 *     silent        : false,
 *     updateDOM     : true,
 *     updateURLs    : true,
 *     watch         : false,
 *     onBeforeSend(xhr, node, url) {},
 *     onError(message, node, xhr, url) {},
 *     onWarning(message) {},
 *     onSuccess(cssText, node, url) {},
 *     onComplete(cssText, styleNode, cssVariables, benchmark) {},
 *     onFinally(hasChanged, hasNativeSupport, benchmark)
 *   });
 */function Uo(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n="cssVars(): ",t=va({},pm,e);function r(d,f,m,p){!t.silent&&window.console&&console.error("".concat(n).concat(d,`
`),f),t.onError(d,f,m,p)}function i(d){!t.silent&&window.console&&console.warn("".concat(n).concat(d)),t.onWarning(d)}function a(d){t.onFinally(!!d,aA,k_()-t.__benchmark)}if(Yp){if(t.watch){t.watch=pm.watch,eK(t),Uo(t);return}else t.watch===!1&&Fa&&(Fa.disconnect(),Fa=null);if(!t.__benchmark){if(Fm===t.rootElement){tK(e);return}var s=[].slice.call(t.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])'));if(t.__benchmark=k_(),t.exclude=[Fa?'[data-cssvars]:not([data-cssvars=""])':'[data-cssvars="out"]',"link[disabled]:not([data-cssvars])",t.exclude].filter(function(d){return d}).join(","),t.variables=iK(t.variables),s.forEach(function(d){var f=d.nodeName.toLowerCase()==="style"&&d.__cssVars.text,m=f&&d.textContent!==d.__cssVars.text;f&&m&&(d.sheet&&(d.sheet.disabled=!1),d.setAttribute("data-cssvars",""))}),!Fa){var o=[].slice.call(t.rootElement.querySelectorAll('[data-cssvars="out"]'));o.forEach(function(d){var f=d.getAttribute("data-cssvars-group"),m=f?t.rootElement.querySelector('[data-cssvars="src"][data-cssvars-group="'.concat(f,'"]')):null;m||d.parentNode.removeChild(d)}),Vh&&s.length<Vh&&(Vh=s.length,Gr.dom={})}}if(document.readyState!=="loading")if(aA&&t.onlyLegacy){var l=!1;if(t.updateDOM){var u=t.rootElement.host||(t.rootElement===document?document.documentElement:t.rootElement);Object.keys(t.variables).forEach(function(d){var f=t.variables[d];l=l||f!==getComputedStyle(u).getPropertyValue(d),u.style.setProperty(d,f)})}a(l)}else!Wy&&(t.shadowDOM||t.rootElement.shadowRoot||t.rootElement.host)?nA({rootElement:pm.rootElement,include:pm.include,exclude:t.exclude,skipDisabled:!1,onSuccess:function(f,m,p){var E=(m.sheet||{}).disabled&&!m.__cssVars;return E?!1:(f=f.replace(qs.cssComments,"").replace(qs.cssMediaQueries,""),f=(f.match(qs.cssVarDeclRules)||[]).join(""),f||!1)},onComplete:function(f,m,p){iA(f,{store:Gr.dom,onWarning:i}),Wy=!0,Uo(t)}}):(Fm=t.rootElement,nA({rootElement:t.rootElement,include:t.include,exclude:t.exclude,skipDisabled:!1,onBeforeSend:t.onBeforeSend,onError:function(f,m,p){var E=f.responseURL||KO(p,location.href),_=f.statusText?"(".concat(f.statusText,")"):"Unspecified Error"+(f.status===0?" (possibly CORS related)":""),b="CSS XHR Error: ".concat(E," ").concat(f.status," ").concat(_);r(b,m,f,E)},onSuccess:function(f,m,p){var E=(m.sheet||{}).disabled&&!m.__cssVars;if(E)return!1;var _=m.nodeName.toLowerCase()==="link",b=m.nodeName.toLowerCase()==="style"&&f!==m.textContent,C=t.onSuccess(f,m,p);return f=C!==void 0&&!C?"":C||f,t.updateURLs&&(_||b)&&(f=rK(f,p)),f},onComplete:function(f,m){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],E=va({},Gr.dom,Gr.user),_=!1;if(Gr.job={},p.forEach(function(L,P){var U=m[P];if(L.__cssVars=L.__cssVars||{},L.__cssVars.text=U,qs.cssVars.test(U))try{var B=Qb(U,{preserveStatic:t.preserveStatic,removeComments:!0});iA(B,{parseHost:!!t.rootElement.host,store:Gr.dom,onWarning:i}),L.__cssVars.tree=B}catch(F){r(F.message,L)}}),va(Gr.job,Gr.dom),t.updateDOM?(va(Gr.user,t.variables),va(Gr.job,Gr.user)):(va(Gr.job,Gr.user,t.variables),va(E,t.variables)),_=Du.job>0&&!!(Object.keys(Gr.job).length>Object.keys(E).length||Object.keys(E).length&&Object.keys(Gr.job).some(function(L){return Gr.job[L]!==E[L]})),_)Qy(t.rootElement),Uo(t);else{var b=[],C=[],y=!1;if(t.updateDOM&&Du.job++,p.forEach(function(L,P){var U=!L.__cssVars.tree;if(L.__cssVars.tree)try{Zq(L.__cssVars.tree,va({},t,{variables:Gr.job,onWarning:i}));var B=$O(L.__cssVars.tree);if(t.updateDOM){var F=m[P],H=qs.cssVarFunc.test(F);if(L.getAttribute("data-cssvars")||L.setAttribute("data-cssvars","src"),B.length&&H){var G=L.getAttribute("data-cssvars-group")||++Du.group,j=B.replace(/\s/g,""),x=t.rootElement.querySelector('[data-cssvars="out"][data-cssvars-group="'.concat(G,'"]'))||document.createElement("style");y=y||qs.cssKeyframes.test(B),t.preserveStatic&&L.sheet&&(L.sheet.disabled=!0),x.hasAttribute("data-cssvars")||x.setAttribute("data-cssvars","out"),j===L.textContent.replace(/\s/g,"")?(U=!0,x&&x.parentNode&&(L.removeAttribute("data-cssvars-group"),x.parentNode.removeChild(x))):j!==x.textContent.replace(/\s/g,"")&&([L,x].forEach(function(V){V.setAttribute("data-cssvars-job",Du.job),V.setAttribute("data-cssvars-group",G)}),x.textContent=B,b.push(B),C.push(x),x.parentNode||L.parentNode.insertBefore(x,L.nextSibling))}}else L.textContent.replace(/\s/g,"")!==B&&b.push(B)}catch(V){r(V.message,L)}U&&L.setAttribute("data-cssvars","skip"),L.hasAttribute("data-cssvars-job")||L.setAttribute("data-cssvars-job",Du.job)}),Vh=t.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])').length,t.shadowDOM){for(var T=[].concat(t.rootElement).concat([].slice.call(t.rootElement.querySelectorAll("*"))),N=0,w;w=T[N];++N)if(w.shadowRoot&&w.shadowRoot.querySelector("style")){var O=va({},t,{rootElement:w.shadowRoot});Uo(O)}}t.updateDOM&&y&&nK(t.rootElement),Fm=!1,t.onComplete(b.join(""),C,JSON.parse(JSON.stringify(Gr.job)),k_()-t.__benchmark),a(C.length)}}}));else document.addEventListener("DOMContentLoaded",function d(f){Uo(e),document.removeEventListener("DOMContentLoaded",d)})}}Uo.reset=function(){Du.job=0,Du.group=0,Fm=!1,Fa&&(Fa.disconnect(),Fa=null),Vh=0,Ky=null,Wy=!1;for(var e in Gr)Gr[e]={}};function eK(e){function n(l){var u=t(l)&&l.hasAttribute("disabled"),d=(l.sheet||{}).disabled;return u||d}function t(l){var u=l.nodeName.toLowerCase()==="link"&&(l.getAttribute("rel")||"").indexOf("stylesheet")!==-1;return u}function r(l){return l.nodeName.toLowerCase()==="style"}function i(l){var u=!1;if(l.type==="attributes"&&t(l.target)&&!n(l.target)){var d=l.attributeName==="disabled",f=l.attributeName==="href",m=l.target.getAttribute("data-cssvars")==="skip",p=l.target.getAttribute("data-cssvars")==="src";d?u=!m&&!p:f&&(m?l.target.setAttribute("data-cssvars",""):p&&Qy(e.rootElement,!0),u=!0)}return u}function a(l){var u=!1;if(l.type==="childList"){var d=r(l.target),f=l.target.getAttribute("data-cssvars")==="out";u=d&&!f}return u}function s(l){var u=!1;return l.type==="childList"&&(u=[].slice.call(l.addedNodes).some(function(d){var f=d.nodeType===1,m=f&&d.hasAttribute("data-cssvars"),p=r(d)&&qs.cssVars.test(d.textContent),E=!m&&(t(d)||p);return E&&!n(d)})),u}function o(l){var u=!1;return l.type==="childList"&&(u=[].slice.call(l.removedNodes).some(function(d){var f=d.nodeType===1,m=f&&d.getAttribute("data-cssvars")==="out",p=f&&d.getAttribute("data-cssvars")==="src",E=p;if(p||m){var _=d.getAttribute("data-cssvars-group"),b=e.rootElement.querySelector('[data-cssvars-group="'.concat(_,'"]'));p&&Qy(e.rootElement,!0),b&&b.parentNode.removeChild(b)}return E})),u}window.MutationObserver&&(Fa&&(Fa.disconnect(),Fa=null),Fa=new MutationObserver(function(l){var u=l.some(function(d){return i(d)||a(d)||s(d)||o(d)});u&&Uo(e)}),Fa.observe(document.documentElement,{attributes:!0,attributeFilter:["disabled","href"],childList:!0,subtree:!0}))}function tK(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;clearTimeout(Ky),Ky=setTimeout(function(){e.__benchmark=null,Uo(e)},n)}function nK(e){var n=["animation-name","-moz-animation-name","-webkit-animation-name"].filter(function(m){return getComputedStyle(document.body)[m]})[0];if(n){for(var t=[].slice.call(e.querySelectorAll("*")),r=[],i="__CSSVARSPONYFILL-KEYFRAMES__",a=0,s=t.length;a<s;a++){var o=t[a],l=getComputedStyle(o)[n];l!=="none"&&(o.style[n]+=i,r.push(o))}document.body.offsetHeight;for(var u=0,d=r.length;u<d;u++){var f=r[u].style;f[n]=f[n].replace(i,"")}}}function rK(e,n){var t=e.replace(qs.cssComments,"").match(qs.cssUrls)||[];return t.forEach(function(r){var i=r.replace(qs.cssUrls,"$1"),a=KO(i,n);e=e.replace(r,r.replace(i,a))}),e}function iK(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=/^-{2}/;return Object.keys(e).reduce(function(t,r){var i=n.test(r)?r:"--".concat(r.replace(/^-+/,""));return t[i]=e[r],t},{})}function KO(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:location.href,t=document.implementation.createHTMLDocument(""),r=t.createElement("base"),i=t.createElement("a");return t.head.appendChild(r),t.body.appendChild(i),r.href=n,i.href=e,i.href}function k_(){return Yp&&(window.performance||{}).now?window.performance.now():new Date().getTime()}function Qy(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=[].slice.call(e.querySelectorAll('[data-cssvars="skip"],[data-cssvars="src"]'));t.forEach(function(r){return r.setAttribute("data-cssvars","")}),n&&(Gr.dom={})}function Yb(e,n){n===void 0&&(n=[]),M.useLayoutEffect(function(){return function(){e()}},n)}function WO(e,n){var t,r,i=M.useState(typeof window<"u"&&(r=(t=window==null?void 0:window.navigator)===null||t===void 0?void 0:t.onLine)!==null&&r!==void 0?r:!0),a=i[0],s=i[1];return M.useEffect(function(){var o=qr();try{n.warning("sdk changed",o);var l=new yR({onDisconnected:function(){s(!1),n.warning("onDisconnected",{isOnline:a})},onReconnectStarted:function(){s(!1),n.warning("onReconnectStarted",{isOnline:a})},onReconnectSucceeded:function(){s(!0),n.warning("onReconnectSucceeded",{isOnline:a})},onReconnectFailed:function(){e.reconnect(),n.warning("onReconnectFailed")}});e!=null&&e.addConnectionHandler&&(e.addConnectionHandler(o,l),n.info("Added ConnectionHandler",o))}catch{}return function(){try{e.removeConnectionHandler(o),n.info("Removed ConnectionHandler",o)}catch{}}},[e]),M.useEffect(function(){var o=function(){try{n.warning("Try reconnecting SDK"),e.connectionState!=="OPEN"&&e.reconnect()}catch{}};return window.addEventListener("online",o),function(){window.removeEventListener("online",o)}},[e]),M.useEffect(function(){var o=document.querySelector("body");if(!a&&!(e!=null&&e.isCacheEnabled))try{o==null||o.classList.add("sendbird__offline"),n.info("Added class sendbird__offline to body")}catch{}else try{o==null||o.classList.remove("sendbird__offline"),n.info("Removed class sendbird__offline from body")}catch{}},[a,e==null?void 0:e.isCacheEnabled]),a}var aK=2e3;function QO(e){var n=e.logger,t=e.timeout,r=e.cb,i=[],a=null,s=function(l){var u=i.find(function(f){return f.url===l.url});if(u?n.info("Channel: Mark as read already in queue",{channel:l}):i.push(l),!a){var d=i.shift();d&&r(d),a=setInterval(function(){if(i.length===0&&a){clearInterval(a),a=null;return}var f=i.shift();f&&r(f)},t||aK)}},o=function(){i=[],a&&(clearInterval(a),a=null)};return{push:s,clear:o,getQueue:function(){return i}}}function YO(e,n){var t=this,r=e.isConnected,i=n.logger,a=M.useMemo(function(){return QO({logger:i,cb:function(s){return tn(t,void 0,void 0,function(){var o;return nn(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,s.markAsDelivered()];case 1:return l.sent(),[3,3];case 2:return o=l.sent(),i==null||i.warning("Channel: Mark as delivered failed",{channel:s,error:o}),[3,3];case 3:return[2]}})})}})},[]);return M.useEffect(function(){r||a.clear()},[r]),Yb(function(){a.clear()}),a}var sA="sendbird-sort-by-row";function sK(e){var n=e.className,t=n===void 0?"":n,r=e.maxItemCount,i=e.itemWidth,a=e.itemHeight,s=e.children;if(Array.isArray(s)&&s.length>r){for(var o=[],l=0;l<s.length;l+=r)o.push(v.createElement("div",{className:Ne(Ne([],Array.isArray(t)?t:[t],!0),[sA],!1).join(" "),key:qr(),style:{width:i*r,height:a}},s.slice(l,l+r)));return v.createElement(v.Fragment,null,o)}return v.createElement("div",{className:Ne(Ne([],Array.isArray(t)?t:[t],!0),[sA],!1).join(" "),style:{width:i*(Array.isArray(s)?s.length:1),height:a}},s)}var ur;(function(e){e.NONE="NONE",e.PENDING="PENDING",e.SENT="SENT",e.FAILED="FAILED",e.DELIVERED="DELIVERED",e.READ="READ"})(ur||(ur={}));var XO=function(e,n){var t,r,i,a,s;if(!n||!("sendingStatus"in n))return ur.NONE;if(n.sendingStatus==="pending")return ur.PENDING;if(n.sendingStatus==="failed")return ur.FAILED;if(!((t=e==null?void 0:e.isGroupChannel)===null||t===void 0)&&t.call(e)){if(((i=(r=e).getUnreadMemberCount)===null||i===void 0?void 0:i.call(r,n))===0)return ur.READ;if(((s=(a=e).getUndeliveredMemberCount)===null||s===void 0?void 0:s.call(a,n))===0)return ur.DELIVERED}return n.sendingStatus==="succeeded"?ur.SENT:ur.NONE};function _p(e){"@babel/helpers - typeof";return _p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_p(e)}function br(e,n){if(n.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+n.length+" present")}function ra(e){br(1,arguments);var n=Object.prototype.toString.call(e);return e instanceof Date||_p(e)==="object"&&n==="[object Date]"?new Date(e.getTime()):typeof e=="number"||n==="[object Number]"?new Date(e):((typeof e=="string"||n==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function oA(e){br(1,arguments);var n=ra(e);return n.setMilliseconds(0),n}function oK(e,n){br(2,arguments);var t=oA(e),r=oA(n);return t.getTime()===r.getTime()}var P_,Dl={IMAGE:["image/jpeg","image/jpg","image/png","image/gif","image/svg+xml","image/webp","image/bmp"],VIDEO:["video/mpeg","video/ogg","video/webm","video/mp4"],AUDIO:["audio/aac","audio/midi","audio/x-midi","audio/mpeg","audio/ogg","audio/opus","audio/wav","audio/webm","audio/3gpp","audio/3gpp2","audio/mp3"],DOCUMENT:["text/plain","text/css","text/csv","text/html","text/calendar","text/javascript","text/xml","text/x-log","video/quicktime"],APPLICATION:["application/x-abiword","application/x-freearc","application/vnd.amazon.ebook","application/octet-stream","application/x-bzip","application/x-bzip2","application/x-cdf","application/x-csh","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-fontobject","application/epub+zip","application/gzip","application/java-archive","application/json","application/ld+json","application/vnd.apple.installer+xml","application/vnd.oasis.opendocument.presentation","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.text","application/ogg","application/pdf","application/x-httpd-php","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.rar","application/rtf","application/x-sh","application/x-tar","application/vnd.visio","application/xhtml+xml","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/xml","application/vnd.mozilla.xul+xml","application/zip","application/x-7z-compressed"],ARCHIVE:["application/zip","application/x-rar-compressed","application/x-7z-compressed","application/x-tar","application/gzip","application/x-bzip","application/x-bzip2","application/x-xz","application/x-iso9660-image"]},Ah={IMAGE:[".apng",".avif",".gif",".jpg",".jpeg",".jfif",".pjpeg",".pjp",".png",".svg",".webp",".bmp",".ico",".cur",".tif",".tiff",".heic",".heif"],VIDEO:[".mp4",".webm",".ogv",".3gp",".3g2",".avi",".mov",".wmv",".mpg",".mpeg",".m4v",".mkv"],AUDIO:[".aac",".midi",".mp3",".oga",".opus",".wav",".weba",".3gp",".3g2"],DOCUMENT:[".txt",".log",".csv",".rtf",".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx"],ARCHIVE:[".zip",".rar",".7z",".tar",".gz",".bz2",".xz",".iso"]},lK=function(e){if(Array.isArray(e)&&e.length>0){var n=e.reduce(function(t,r){var i=r.toLowerCase();switch(i){case"image":{t.push.apply(t,Ne(Ne([],Dl.IMAGE,!1),Ah.IMAGE,!1));break}case"video":{t.push.apply(t,Ne(Ne([],Dl.VIDEO,!1),Ah.VIDEO,!1));break}case"audio":{t.push.apply(t,Ne(Ne([],Dl.AUDIO,!1),Ah.AUDIO,!1));break}case"archive":{t.push.apply(t,Ne(Ne([],Dl.ARCHIVE,!1),Ah.ARCHIVE,!1));break}default:{t.push(r);break}}return t},[]);return Array.from(new Set(n)).join(",")}return Ne(Ne([],Object.values(Dl).flat(),!0),Object.values(Ah).flat(),!0).join(",")},js={ADMIN:"ADMIN",TEXT:"TEXT",FILE:"FILE",MULTIPLE_FILES:"MULTIPLE_FILES",THUMBNAIL:"THUMBNAIL",OG:"OG",UNKNOWN:"UNKNOWN"},ku={IMAGE:"IMAGE",AUDIO:"AUDIO",VIDEO:"VIDEO",GIF:"GIF",VOICE:"VOICE",OTHERS:"OTHERS"},uK=function(e){return e==="video/quicktime"},cK=function(e){return zb(navigator.userAgent)&&uK(e)},Ds=function(e){return Dl.IMAGE.indexOf(e)>=0},jo=function(e){return Dl.VIDEO.indexOf(e)>=0||cK(e)},vc=function(e){return e==="image/gif"},Nf=function(e){return Ds(e)||jo(e)},Xb=function(e){return Dl.AUDIO.indexOf(e)>=0},dK=function(){return D({},ku)},Zb=function(e){return vc(e)?ku.GIF:Ds(e)?ku.IMAGE:jo(e)?ku.VIDEO:Xb(e)?ku.AUDIO:ku.OTHERS},yd=function(e){return e.sendingStatus==="succeeded"},lA=function(e,n){return XO(e,n)===ur.READ},Ha=function(e){return(e==null?void 0:e.sendingStatus)==="failed"},Rs=function(e){return(e==null?void 0:e.sendingStatus)==="pending"},hK=function(e){return e===ur.SENT||e===ur.DELIVERED||e===ur.READ},ZO=function(e){return e&&(e.isAdminMessage&&typeof e.isAdminMessage=="function"?e.isAdminMessage():(e==null?void 0:e.messageType)==="admin")},Vi=function(e){return e&&(e.isUserMessage&&typeof e.isUserMessage=="function"?e.isUserMessage():(e==null?void 0:e.messageType)==="user")},Di=function(e){return!!e&&(e.isFileMessage&&typeof e.isFileMessage=="function"?e.isFileMessage():(e==null?void 0:e.messageType)==="file")},Oi=function(e){return e&&(e.isMultipleFilesMessage&&typeof e.isMultipleFilesMessage=="function"?e.isMultipleFilesMessage():e.messageType==="file"&&Object.prototype.hasOwnProperty.call(e,"fileInfoList"))},JO=function(e){return!!e.parentMessageId&&!!e.parentMessage},e3=function(e){return!!e.messageForm},Ep=function(e){var n;return!!(e&&(!((n=e.extendedMessagePayload)===null||n===void 0)&&n[xf]))},t3=function(e){var n=e.type;return!(n&&!n3[n])},n3={default:"default"},fK=(P_={},P_[n3.default]="ui_container_type__default",P_),Xp=function(e){return!e||!Vi(e)?!1:!!e.ogMetaData&&!!(e.ogMetaData.url||e.ogMetaData.title||e.ogMetaData.description||e.ogMetaData.defaultImage)},vK=function(e){return Vi(e)},io=function(e){return!e||!Di(e)?!1:Nf(e.type)},r3=function(e){return!e||!Di(e)?!1:io(e)&&Ds(e.type)},Ys=function(e){return!e||!Di(e)?!1:io(e)&&jo(e.type)},yp=function(e){return!e||!Di(e)?!1:io(e)&&vc(e.type)},mK=function(e){return!e||!Di(e)?!1:Xb(e.type)},pK=function(e){return e?!!e.mimeType&&(Ds(e.mimeType)||vc(e.mimeType)):!1},gK=function(e){return/^audio\//.test(e)},i3=function(e){return/^voice\//.test(e)},ja=function(e){var n,t,r,i;if(!e||!Di(e)||!e.type)return!1;var a=e.type.split(";"),s=a[0],o=a[1];if(!gK(s))return!1;if(o){var l=o.split("="),u=l[0],d=l[1];return u==="sbu_type"&&d==="voice"}return i3((i=(r=(t=(n=e==null?void 0:e.metaArrays)===null||n===void 0?void 0:n.find(function(f){return f.key==="KEY_INTERNAL_MESSAGE_TYPE"}))===null||t===void 0?void 0:t.value)===null||r===void 0?void 0:r[0])!==null&&i!==void 0?i:"")},Zp=function(e){return Vi(e)&&(e==null?void 0:e.updatedAt)>0},$h=function(){return D({},js)},If=function(e){return ZO(e)?js.ADMIN:Vi(e)?Xp(e)?js.OG:js.TEXT:Oi(e)?js.MULTIPLE_FILES:Di(e)?io(e)?js.THUMBNAIL:ja(e)?ku.VOICE:js.FILE:js.UNKNOWN},_K=function(e,n){return Array.isArray(n)?Ne(Ne([],e,!0),n,!0):(e.push(n),e)},ai=function(e){return Array.isArray(e)?e.reduce(_K,[]).join(" "):e},a3=function(e,n){return n.userIds.some(function(t){return t===e})},EK=function(e,n,t,r){var i="";return a3(n,e)&&(i=e.userIds.length===1?r.TOOLTIP__YOU:r.TOOLTIP__AND_YOU),"".concat(e.userIds.filter(function(a){return a!==n}).map(function(a){return t.get(a)||r.TOOLTIP__UNKNOWN_USER}).join(", ")).concat(i)};function Jb(e){var n;return e!=null&&e.extendedMessagePayload&&Array.isArray((n=e==null?void 0:e.extendedMessagePayload)===null||n===void 0?void 0:n.suggested_replies)?e.extendedMessagePayload.suggested_replies:[]}var eC=function(e,n){if(n||(n=40),e==null)return"";if(e.length<=n)return e;var t="...",r=t.length,i=n-r,a=Math.ceil(i/2),s=Math.floor(i/2);return e.substr(0,a)+t+e.substr(e.length-s)},tC=function(e){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",e);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var n=document.createElement("textarea");n.textContent=e,n.style.position="fixed",document.body.appendChild(n),n.select();try{return document.execCommand("copy")}catch{return!1}finally{document.body.removeChild(n)}}return!1},nC=function(e){var n;return(n=e==null?void 0:e.emojiCategories)===null||n===void 0?void 0:n.map(function(t){return t.emojis}).reduce(function(t,r){return t.concat(r)},[])},yK=function(e){var n,t=new Map;return(n=e==null?void 0:e.emojiCategories)===null||n===void 0||n.forEach(function(r){var i;(i=r==null?void 0:r.emojis)===null||i===void 0||i.forEach(function(a){a&&a.key&&t.set(a.key,a)})}),t},Yy=function(e,n){var t;return n?((t=e==null?void 0:e.emojiCategories)===null||t===void 0?void 0:t.filter(function(r){return n.includes(r.id)}).flatMap(function(r){return r.emojis}))||[]:nC(e)||[]},bK=function(e){return function(n){var t=n.key;return t===e}},CK=function(e,n){var t,r,i=bK(n??"");return((r=(t=e==null?void 0:e.emojiCategories.find(function(a){return a.emojis.some(i)}))===null||t===void 0?void 0:t.emojis.find(i))===null||r===void 0?void 0:r.url)||""},SK=function(e){return(e==null?void 0:e.friendName)||(e==null?void 0:e.nickname)||(e==null?void 0:e.userId)},Bm=function(e){return(e==null?void 0:e.sender)&&SK(e==null?void 0:e.sender)},TK=function(e,n){if(e===n)return!0;if(e==null||n==null||e.length!==n.length)return!1;for(var t=Ne([],e,!0).sort(),r=Ne([],n,!0).sort(),i=0;i<t.length;++i)if(t[i]!==r[i])return!1;return!0},uA=function(e){return e?!!(e.friendDiscoveryKey||e.friendName):!1},cA=function(e,n){var t,r,i,a,s=e.customTypesFilter,o=s===void 0?[]:s;if(e!=null&&e.messageTypeFilter&&e.messageTypeFilter!==n.messageType)return!1;if((o==null?void 0:o.length)>0){var l=o.filter(function(d){return d!=="*"});if(l.length>0&&!l.includes(n.customType))return!1}if(e!=null&&e.senderUserIdsFilter&&((t=e==null?void 0:e.senderUserIdsFilter)===null||t===void 0?void 0:t.length)>0)if(!((r=n==null?void 0:n.isUserMessage)===null||r===void 0)&&r.call(n)||!((i=n==null?void 0:n.isFileMessage)===null||i===void 0)&&i.call(n)){var u=n.sender||n._sender;if(!(!((a=e==null?void 0:e.senderUserIdsFilter)===null||a===void 0)&&a.includes(u==null?void 0:u.userId)))return!1}else return!1;return!(!(e!=null&&e.includeParentMessageInfo)&&(n!=null&&n.parentMessageId||n!=null&&n.parentMessage))},Kc=function(e,n,t){var r,i,a,s,o,l,u,d=e.includeEmpty,f=e.includeFrozen,m=e.searchFilter,p=e.userIdsFilter,E=e.customTypesFilter,_=e.channelUrlsFilter,b=e.customTypeStartsWithFilter,C=e.channelNameContainsFilter,y=e.nicknameContainsFilter,T=e.myMemberStateFilter,N=e.hiddenChannelFilter,w=e.unreadChannelFilter,O=e.publicChannelFilter,L=e.superChannelFilter,P=e.metadataKey,U=P===void 0?"":P,B=e.metadataValues,F=B===void 0?["a","b"]:B,H=e.metadataValueStartsWith;if(!d&&(n==null?void 0:n.lastMessage)===null)return!1;if(m!=null&&m.query&&((i=(r=m==null?void 0:m.fields)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0)>0){var G=m.query,j=m.fields;if(G&&j&&j.length>0&&!j.some(function(re){var ve,ie;switch(re){case"channel_name":return(ve=n==null?void 0:n.name)===null||ve===void 0?void 0:ve.toLowerCase().includes(G.toLowerCase());case"member_nickname":return(ie=n==null?void 0:n.members)===null||ie===void 0?void 0:ie.some(function(le){return le.nickname.toLowerCase().includes(G.toLowerCase())});default:return!0}}))return!1}if(((a=p==null?void 0:p.userIds)===null||a===void 0?void 0:a.length)>0){var x=p.includeMode,V=p.queryType,K=p.userIds,W=(s=n==null?void 0:n.members)===null||s===void 0?void 0:s.map(function(re){return re.userId});if(x){if(K.length>0)switch(V){case"AND":{if(K.some(function(re){return!W.includes(re)}))return!1;break}case"OR":{if(K.every(function(re){return!W.includes(re)}))return!1;break}}}else if(K.includes(t)||K.push(t),((o=n==null?void 0:n.members)===null||o===void 0?void 0:o.length)>K.length||!TK(K,W))return!1}if(d===!1&&(n==null?void 0:n.lastMessage)===null||f===!1&&(n==null?void 0:n.isFrozen)===!0||E&&!E.includes(n==null?void 0:n.customType)||b&&!new RegExp("^".concat(b)).test(n==null?void 0:n.customType)||C&&!(!((l=n==null?void 0:n.name)===null||l===void 0)&&l.toLowerCase().includes(C.toLowerCase())))return!1;if(y){var Q=y.toLowerCase();if(!((u=n==null?void 0:n.members)===null||u===void 0)&&u.every(function(re){return!re.nickname.toLowerCase().includes(Q)}))return!1}if(_&&!_.includes(n==null?void 0:n.url))return!1;if(T)switch(T){case"joined_only":if((n==null?void 0:n.myMemberState)!=="joined")return!1;break;case"invited_only":if((n==null?void 0:n.myMemberState)!=="invited")return!1;break;case"invited_by_friend":if((n==null?void 0:n.myMemberState)!=="invited"||!uA(n==null?void 0:n.inviter))return!1;break;case"invited_by_non_friend":if((n==null?void 0:n.myMemberState)!=="invited"||uA(n==null?void 0:n.inviter))return!1;break}if(N)switch(N){case"unhidden_only":if(n!=null&&n.isHidden||(n==null?void 0:n.hiddenState)!=="unhidden")return!1;break;case"hidden_only":if(!(n!=null&&n.isHidden))return!1;break;case"hidden_allow_auto_unhide":if(!(n!=null&&n.isHidden)||(n==null?void 0:n.hiddenState)!=="hidden_allow_auto_unhide")return!1;break;case"hidden_prevent_auto_unhide":if(!(n!=null&&n.isHidden)||(n==null?void 0:n.hiddenState)!=="hidden_prevent_auto_unhide")return!1;break}if(w)switch(w){case"unread_message":if((n==null?void 0:n.unreadMessageCount)===0)return!1;break}if(O)switch(O){case"public":if(!(n!=null&&n.isPublic))return!1;break;case"private":if(n!=null&&n.isPublic)return!1;break}if(L)switch(L){case"super":if(!(n!=null&&n.isSuper))return!1;break;case"nonsuper":if(n!=null&&n.isSuper)return!1;break}var J=n.cachedMetaData,$=J===void 0?{}:J;if(U&&(F||H)){var te=$[U];if(!te||F&&!F.every(function(re){return te.includes(re)})||H&&!te.startsWith(H))return!1}return!0},MK=function(e,n){var t=ji(n).with(rr.CHANNEL_NAME_ALPHABETICAL,function(){return function(r,i){return r.name.localeCompare(i.name)}}).with(rr.CHRONOLOGICAL,function(){return function(r,i){return i.createdAt-r.createdAt}}).otherwise(function(){return function(r,i){var a,s,o,l;return((s=(a=i.lastMessage)===null||a===void 0?void 0:a.createdAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER)-((l=(o=r.lastMessage)===null||o===void 0?void 0:o.createdAt)!==null&&l!==void 0?l:Number.MIN_SAFE_INTEGER)}});return e.sort(t)},Wc=function(e,n,t){var r=Ne([],e,!0),i=r.findIndex(function(a){return a.url===n.url});return i!==-1?r[i]=n:r.push(n),MK(r,t??rr.LATEST_LAST_MESSAGE)},dA;(function(e){e.normal="normal",e.mention="mention",e.url="url"})(dA||(dA={}));var NK=function(e,n){if(Array.isArray(e)&&Array.isArray(n)&&e.length===n.length){for(var t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}return!1},mc=function(e){return!!e&&"sender"in e},IK=function(e){return oK(e.createdAt,e.invitedAt)&&!e.lastMessage},rC=function(e,n){return n?"ltr":e},AK="Group Channel",wK="AI Chatbot Widget Channel",Ff=function(e){return!(e!=null&&e.name)||e.name===AK||e.name===wK},Jp="sendbird-app__layout",RK=60,OK=function(e){$w(n,e);function n(t){var r=e.call(this,t)||this;return r.menuRef=v.createRef(),r.setupEvents=function(){var i=r.props.closeDropdown,a=r.menuRef,s=function(o){var l,u;a!=null&&a.current&&!(!((u=(l=a==null?void 0:a.current)===null||l===void 0?void 0:l.contains)===null||u===void 0)&&u.call(l,o.target))&&(i==null||i())};r.setState({handleClickOutside:s}),document.addEventListener("mousedown",s)},r.cleanUpEvents=function(){var i=r.state.handleClickOutside;document.removeEventListener("mousedown",i)},r.getMenuPosition=function(){var i,a,s,o=r.props,l=o.parentRef,u=o.openLeft,d=document.getElementById(Jp),f=((i=d==null?void 0:d.getBoundingClientRect)===null||i===void 0?void 0:i.call(d))||{top:0,left:0,width:window.innerWidth,height:window.innerHeight},m=(s=(a=l==null?void 0:l.current)===null||a===void 0?void 0:a.getBoundingClientRect)===null||s===void 0?void 0:s.call(a),p=((m==null?void 0:m.x)||(m==null?void 0:m.left)||0)-f.left,E=((m==null?void 0:m.y)||(m==null?void 0:m.top)||0)-f.top,_={top:E,left:p};if(!r.menuRef.current)return _;var b=r.menuRef.current.getBoundingClientRect();if(E+b.height+RK>f.height&&(_.top-=b.height),p+b.width>f.width&&!u&&(_.left-=b.width),_.top<0&&(_.top=b.height<f.height?(f.height-b.height)/2:0),_.top+=32,u){var C=Number.isNaN(b.width-30)?108:b.width-30;_.left-=C}return _.left<0&&(_.left=b.width<f.width?(f.width-b.width)/2:0),r.setState({menuStyle:_}),_},r.state={menuStyle:{top:0,left:0},handleClickOutside:function(){}},r}return n.prototype.componentDidMount=function(){this.setupEvents(),this.getMenuPosition()},n.prototype.componentWillUnmount=function(){this.cleanUpEvents()},n.prototype.render=function(){var t=document.getElementById(bd);if(!t)return v.createElement(v.Fragment,null);var r=this.state.menuStyle,i=this.props,a=i.children,s=i.style,o=i.className,l=o===void 0?"":o,u=i.testID,d=i.id;return kd.createPortal(v.createElement("div",{className:zt(Bf,l),"data-testid":u,id:d},v.createElement("div",{className:"sendbird-dropdown__menu-backdrop"}),v.createElement("ul",{className:"".concat(l," sendbird-dropdown__menu"),ref:this.menuRef,style:D({display:"inline-block",position:"fixed",left:"".concat(Math.round(r.left),"px"),top:"".concat(Math.round(r.top),"px")},s),"data-testid":"sendbird-dropdown-menu"},a)),t)},n}(v.Component),LK={x:0,y:0,left:0,top:0,height:0},UK=function(e){var n=e.id,t=e.children,r=e.parentRef,i=e.parentContainRef,a=e.spaceFromTrigger,s=a===void 0?{x:0,y:0}:a,o=e.closeDropdown,l=M.useState({left:0,top:0}),u=l[0],d=l[1],f=M.useRef(null);M.useEffect(function(){return i&&(i!=null&&i.current)&&i.current.classList.add("sendbird-reactions--pressed"),function(){i&&(i!=null&&i.current)&&i.current.classList.remove("sendbird-reactions--pressed")}},[]),M.useEffect(function(){var p=function(E){var _,b;f!=null&&f.current&&!(!((b=(_=f==null?void 0:f.current)===null||_===void 0?void 0:_.contains)===null||b===void 0)&&b.call(_,E.target))&&o()};return document.addEventListener("mousedown",p),function(){document.removeEventListener("mousedown",p)}},[]),M.useEffect(function(){var p,E,_,b,C=(s==null?void 0:s.x)||0,y=(s==null?void 0:s.y)||0,T=document.getElementById(Jp),N=((p=T==null?void 0:T.getBoundingClientRect)===null||p===void 0?void 0:p.call(T))||{top:0,left:0,width:window.innerWidth,height:window.innerHeight},w=(_=(E=r==null?void 0:r.current)===null||E===void 0?void 0:E.getBoundingClientRect())!==null&&_!==void 0?_:LK,O=((w==null?void 0:w.x)||(w==null?void 0:w.left)||0)-N.left,L=((w==null?void 0:w.y)||(w==null?void 0:w.top)||0)-N.top,P={top:L,left:O};if(!(f!=null&&f.current))d(P);else{var U=(b=f==null?void 0:f.current)===null||b===void 0?void 0:b.getBoundingClientRect();P.top<U.height?(P.top+=w.height,P.top+=y):(P.top-=U.height,P.top-=y),P.left-=U.width/2,P.left+=w.height/2-2,P.left+=C;var B=N.width-U.width;B<P.left&&(P.left=B),P.left<0&&(P.left=0),d(P)}},[t]);var m=document.getElementById(Gf);return m?kd.createPortal(v.createElement("div",{className:Bf,id:n},v.createElement("div",{className:"sendbird-dropdown__menu-backdrop"}),v.createElement("ul",{className:"sendbird-dropdown__reaction-bar","data-testid":"sendbird-dropdown__reaction-bar",ref:f,style:{display:"inline-block",position:"fixed",left:"".concat(Math.round(u.left),"px"),top:"".concat(Math.round(u.top),"px")}},M.Children.count(t)<=0?v.createElement(Me,{className:"sendbird-dropdown__reaction-bar__emptyLabel",type:be.BODY_1,color:de.ONBACKGROUND_1},"Emojis is not loaded yet."):v.createElement(sK,{className:"sendbird-dropdown__reaction-bar__row",maxItemCount:8,itemWidth:44,itemHeight:40},t))),m):null},s3=M.createContext(void 0),iC=function(e){var n=e.children,t=e.value;return v.createElement(s3.Provider,{value:t},n)},Wr=function(){var e=M.useContext(s3);if(!e)throw new Error("useMessageMenuContext must be used within a MessageMenuProvider.");return e},Ei=function(e){var n=e.className,t=e.disabled,r=e.tabIndex,i=r===void 0?0:r,a=e.testID,s=e.onClick,o=e.children,l=function(u){!t&&s&&s(u)};return v.createElement("li",{className:zt("sendbird-menu-item",n),role:"menuitem","aria-disabled":t,"data-testid":a,tabIndex:i,onClick:l,onKeyDown:function(u){u.code==="Enter"&&l(u)}},v.createElement(Me,{className:"sendbird-menu-item__text",type:be.SUBTITLE_2,color:t?de.ONBACKGROUND_4:de.ONBACKGROUND_1},o))},pc=function(e){var n=e.className,t=e.disabled,r=t===void 0?!1:t,i=e.tabIndex,a=i===void 0?0:i,s=e.testID,o=e.onClick,l=e.children;return v.createElement("div",{className:zt("sendbird-message__bottomsheet--action",n),role:"menuitem",tabIndex:a,"aria-disabled":r,onClick:o,"data-testid":s},l)},Bf="sendbird-observing-message-menu",Hf=function(e){return"m_".concat(e)},Li=OK,o3=UK,vi=function(e){var n=e.className,t=n===void 0?"":n,r=e.children,i=e.onClick,a=e.disable,s=a===void 0?!1:a,o=e.dataSbId,l=o===void 0?"":o,u=e.testID;return v.createElement(Ei,{className:zt.apply(void 0,Ne(Ne([],Array.isArray(t)?t:[t],!1),["sendbird-dropdown__menu-item",s?"disable":""],!1)),disabled:s,testID:u??l,onClick:i},r)},bd="sendbird-dropdown-portal",DK=function(){return v.createElement("div",{id:bd,className:bd})},Gf="sendbird-emoji-list-portal",kK=function(){return v.createElement("div",{id:Gf})};function $i(e){var n=e.menuTrigger,t=e.menuItems,r=e.isOpen,i=e.onClick,a=M.useState(!1),s=a[0],o=a[1];return v.createElement("div",{className:"sendbird-context-menu",onClick:i},n==null?void 0:n(function(){return o(!s)}),(s||r)&&t(function(){return o(!1)}))}function PK(e){var n=M.useRef(e);return EO(e,n.current)||(n.current=e),n.current}function e0(e,n){M.useEffect(e,n.map(PK))}function xK(e){var n,t,r,i,a,s,o,l,u,d,f,m,p,E,_,b,C,y,T,N,w,O,L,P,U,B,F,H,G,j,x,V,K=e.legacyConfig,W=e.uikitOptions,Q=W===void 0?{}:W,J=K.replyType,$=K.isMentionEnabled,te=K.isReactionEnabled,re=K.disableUserProfile,ve=K.isVoiceMessageEnabled,ie=K.isTypingIndicatorEnabledOnChannelList,le=K.isMessageReceiptStatusEnabledOnChannelList,Ae=K.showSearchIcon;return{common:{enableUsingDefaultUserProfile:(t=(n=Q.common)===null||n===void 0?void 0:n.enableUsingDefaultUserProfile)!==null&&t!==void 0?t:typeof re=="boolean"?!re:void 0},groupChannel:{enableOgtag:(r=Q.groupChannel)===null||r===void 0?void 0:r.enableOgtag,enableMention:(a=(i=Q.groupChannel)===null||i===void 0?void 0:i.enableMention)!==null&&a!==void 0?a:$,enableReactions:(o=(s=Q.groupChannel)===null||s===void 0?void 0:s.enableReactions)!==null&&o!==void 0?o:te,enableReactionsSupergroup:(l=Q.groupChannel)===null||l===void 0?void 0:l.enableReactionsSupergroup,enableTypingIndicator:(u=Q.groupChannel)===null||u===void 0?void 0:u.enableTypingIndicator,enableVoiceMessage:(f=(d=Q.groupChannel)===null||d===void 0?void 0:d.enableVoiceMessage)!==null&&f!==void 0?f:ve,replyType:(p=(m=Q.groupChannel)===null||m===void 0?void 0:m.replyType)!==null&&p!==void 0?p:J!=null?zo(J).lowerCase:void 0,threadReplySelectType:(E=Q.groupChannel)===null||E===void 0?void 0:E.threadReplySelectType,input:{enableDocument:(b=(_=Q.groupChannel)===null||_===void 0?void 0:_.input)===null||b===void 0?void 0:b.enableDocument},typingIndicatorTypes:(C=Q.groupChannel)===null||C===void 0?void 0:C.typingIndicatorTypes,enableFeedback:(y=Q.groupChannel)===null||y===void 0?void 0:y.enableFeedback,enableSuggestedReplies:(T=Q.groupChannel)===null||T===void 0?void 0:T.enableSuggestedReplies,showSuggestedRepliesFor:(N=Q.groupChannel)===null||N===void 0?void 0:N.showSuggestedRepliesFor,suggestedRepliesDirection:(w=Q.groupChannel)===null||w===void 0?void 0:w.suggestedRepliesDirection,enableMarkdownForUserMessage:(O=Q.groupChannel)===null||O===void 0?void 0:O.enableMarkdownForUserMessage,enableFormTypeMessage:(L=Q.groupChannel)===null||L===void 0?void 0:L.enableFormTypeMessage},groupChannelList:{enableTypingIndicator:(U=(P=Q.groupChannelList)===null||P===void 0?void 0:P.enableTypingIndicator)!==null&&U!==void 0?U:ie,enableMessageReceiptStatus:(F=(B=Q.groupChannelList)===null||B===void 0?void 0:B.enableMessageReceiptStatus)!==null&&F!==void 0?F:le},groupChannelSettings:{enableMessageSearch:(G=(H=Q.groupChannelSettings)===null||H===void 0?void 0:H.enableMessageSearch)!==null&&G!==void 0?G:Ae},openChannel:{enableOgtag:(j=Q.openChannel)===null||j===void 0?void 0:j.enableOgtag,input:{enableDocument:(V=(x=Q.openChannel)===null||x===void 0?void 0:x.input)===null||V===void 0?void 0:V.enableDocument}}}}var FK={getItem:function(e){return tn(this,void 0,void 0,function(){var n;return nn(this,function(t){return[2,(n=localStorage.getItem(e))!==null&&n!==void 0?n:null]})})},setItem:function(e,n){return tn(this,void 0,void 0,function(){return nn(this,function(t){return[2,localStorage.setItem(e,n)]})})}},BK=function(e){var n=e.children;return v.createElement(P9,null,v.createElement(kq,null,n))},Aa={DEBUG:"debug",WARNING:"warning",ERROR:"error",INFO:"info",ALL:"all"},HK=function(e){switch(e){case Aa.WARNING:return"color: Orange";case Aa.ERROR:return"color: Red";default:return"color: Gray"}},GK=function(e){var n=e.level,t=e.title,r=e.description,i=r===void 0?"":r,a=e.payload,s=a===void 0?[]:a;console.log.apply(console,Ne(["%c SendbirdUIKit | ".concat(n," | ").concat(new Date().toISOString()," | ").concat(t," ").concat(i&&"|"),HK(n),i],s,!1))},zK=function(){return{info:_n,error:_n,warning:_n}},hA=function(e,n){var t=GK,r=Array.isArray(e)?e:[e],i=function(a){return function(s,o){for(var l=[],u=2;u<arguments.length;u++)l[u-2]=arguments[u];return t({level:a,title:s,description:o,payload:l})}};return r.reduce(function(a,s){return s===Aa.DEBUG||s===Aa.ALL?D(D({},a),{info:i(Aa.INFO),error:i(Aa.ERROR),warning:i(Aa.WARNING)}):s===Aa.INFO?D(D({},a),{info:i(Aa.INFO)}):s===Aa.ERROR?D(D({},a),{error:i(Aa.ERROR)}):s===Aa.WARNING?D(D({},a),{warning:i(Aa.WARNING)}):D({},a)},zK())},jK={"--sendbird-dark-primary-500":"#4d2aa6","--sendbird-dark-primary-400":"#6440C4","--sendbird-dark-primary-300":"#7B53EF","--sendbird-dark-primary-200":"#9E8CF5","--sendbird-dark-primary-100":"#E2DFFF","--sendbird-dark-secondary-500":"#007A7A","--sendbird-dark-secondary-400":"#189A8D","--sendbird-dark-secondary-300":"#2EBA9F","--sendbird-dark-secondary-200":"#6FD6BE","--sendbird-dark-secondary-100":"#AEF2DC","--sendbird-dark-information-100":"#b2d9ff","--sendbird-dark-error-500":"#A30E2D","--sendbird-dark-error-400":"#C11F41","--sendbird-dark-error-300":"#E53157","--sendbird-dark-error-200":"#FF6183","--sendbird-dark-error-100":"#FFABBD","--sendbird-dark-background-700":"#000000","--sendbird-dark-background-600":"#161616","--sendbird-dark-background-500":"#2C2C2C","--sendbird-dark-background-400":"#393939","--sendbird-dark-background-300":"#A8A8A8","--sendbird-dark-background-200":"#D9D9D9","--sendbird-dark-background-100":"#F0F0F0","--sendbird-dark-background-50":"#FFFFFF","--sendbird-dark-overlay":"rgba(0, 0, 0, 0.32)","--sendbird-dark-onlight-01":"rgba(0, 0, 0, 0.88)","--sendbird-dark-onlight-02":"rgba(0, 0, 0, 0.50)","--sendbird-dark-onlight-03":"rgba(0, 0, 0, 0.38)","--sendbird-dark-onlight-04":"rgba(0, 0, 0, 0.12)","--sendbird-dark-ondark-01":"rgba(255, 255, 255, 0.88)","--sendbird-dark-ondark-02":"rgba(255, 255, 255, 0.50)","--sendbird-dark-ondark-03":"rgba(255, 255, 255, 0.38)","--sendbird-dark-ondark-04":"rgba(255, 255, 255, 0.12)","--sendbird-dark-shadow-01":"0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-02":"0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-03":"0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-04":"0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-message-input":"0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)","--sendbird-light-primary-500":"#4d2aa6","--sendbird-light-primary-400":"#6440C4","--sendbird-light-primary-300":"#7B53EF","--sendbird-light-primary-200":"#9E8CF5","--sendbird-light-primary-100":"#E2DFFF","--sendbird-light-secondary-500":"#007A7A","--sendbird-light-secondary-400":"#189A8D","--sendbird-light-secondary-300":"#2EBA9F","--sendbird-light-secondary-200":"#6FD6BE","--sendbird-light-secondary-100":"#AEF2DC","--sendbird-light-information-100":"#b2d9ff","--sendbird-light-error-500":"#A30E2D","--sendbird-light-error-400":"#C11F41","--sendbird-light-error-300":"#E53157","--sendbird-light-error-200":"#FF6183","--sendbird-light-error-100":"#FFABBD","--sendbird-light-background-700":"#000000","--sendbird-light-background-600":"#161616","--sendbird-light-background-500":"#2C2C2C","--sendbird-light-background-400":"#393939","--sendbird-light-background-300":"#A8A8A8","--sendbird-light-background-200":"#D9D9D9","--sendbird-light-background-100":"#F0F0F0","--sendbird-light-background-50":" #FFFFFF","--sendbird-light-overlay":"rgba(0, 0, 0, 0.32)","--sendbird-light-onlight-01":"rgba(0, 0, 0, 0.88)","--sendbird-light-onlight-02":"rgba(0, 0, 0, 0.50)","--sendbird-light-onlight-03":"rgba(0, 0, 0, 0.38)","--sendbird-light-onlight-04":"rgba(0, 0, 0, 0.12)","--sendbird-light-ondark-01":"rgba(255, 255, 255, 0.88)","--sendbird-light-ondark-02":"rgba(255, 255, 255, 0.50)","--sendbird-light-ondark-03":"rgba(255, 255, 255, 0.38)","--sendbird-light-ondark-04":"rgba(255, 255, 255, 0.12)","--sendbird-light-shadow-01":"0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-02":"0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-03":"0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-04":"0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-message-input":"0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)"},VK=function(e){if(e==null)return!0;for(var n in e)if(e.hasOwnProperty(n))return!1;return JSON.stringify(e)===JSON.stringify({})},$K=function(e){M.useLayoutEffect(function(){if(!VK(e)){var n=D(D({},jK),Wq(e));Uo({variables:n})}},[e])},qK=20,l3=function(e){return{version:Number(e.ui_template.version),uiTemplate:JSON.stringify(e.ui_template.body.items),colorVariables:e.color_variables}},fA=function(e){var n={};return e.forEach(function(t){n[t.key]=l3(t)}),n};function KK(e){var n=this,t,r=e.sdk,i=e.logger,a=e.appInfoStore,s=e.actions,o=a==null?void 0:a.messageTemplatesInfo,l=M.useCallback(function(m){var p,E;if(!o)return null;var _=null,b=(p=o==null?void 0:o.templatesMap)!==null&&p!==void 0?p:null;return b&&(_=(E=b[m])!==null&&E!==void 0?E:null),_},[a==null?void 0:a.messageTemplatesInfo]),u=function(m){return tn(n,void 0,void 0,function(){var p,E,_,b;return nn(this,function(C){switch(C.label){case 0:p=!0,E=null,_=[],C.label=1;case 1:return p?[4,m.message.getMessageTemplatesByToken(E,{limit:qK})]:[3,3];case 2:return b=C.sent(),p=b.hasMore,E=b.token,b.templates.forEach(function(y){_.push(JSON.parse(y.template))}),[3,1];case 3:return[2,_]}})})},d=function(m){return tn(n,void 0,void 0,function(){var p,E,_,b,C,b,C,y;return nn(this,function(T){switch(T.label){case 0:return p=(y=m.appInfo)===null||y===void 0?void 0:y.messageTemplateInfo.token,p?(E=localStorage.getItem(T_),_=localStorage.getItem(qc),!E||E!==p?[4,u(m)]:[3,2]):(localStorage.removeItem(T_),localStorage.removeItem(qc),[2]);case 1:return b=T.sent(),C={token:p,templatesMap:fA(b)},s.initMessageTemplateInfo({payload:C}),localStorage.setItem(T_,p),localStorage.setItem(qc,JSON.stringify(b)),[3,3];case 2:E&&E===p&&_&&(b=JSON.parse(_),C={token:p,templatesMap:fA(b)},s.initMessageTemplateInfo({payload:C})),T.label=3;case 3:return[2]}})})},f=M.useCallback(function(m,p,E){return tn(n,void 0,void 0,function(){var _,b,C,y,T,N,w,O,L;return nn(this,function(P){switch(P.label){case 0:s.upsertWaitingTemplateKeys({keys:m,requestedAt:E}),_=[],P.label=1;case 1:P.trys.push([1,5,,6]),b=!0,C=null,P.label=2;case 2:return b?[4,r.message.getMessageTemplatesByToken(C,{keys:m})]:[3,4];case 3:return y=P.sent(),y.templates.forEach(function(U){_.push(JSON.parse(U.template))}),b=y.hasMore,C=y.token,[3,2];case 4:return[3,6];case 5:return T=P.sent(),(L=i==null?void 0:i.error)===null||L===void 0||L.call(i,"Sendbird | fetchProcessedMessageTemplates failed",T,m),[3,6];case 6:return _.length>0?(N=localStorage.getItem(qc),N?(w=JSON.parse(N),O=w.map(function(U){return U.key}),_.forEach(function(U){O.includes(U.key)||w.push(U)}),localStorage.setItem(qc,JSON.stringify(w))):localStorage.setItem(qc,JSON.stringify([_])),s.upsertMessageTemplates({payload:_.map(function(U){return{key:U.key,template:l3(U)}})})):s.markErrorWaitingTemplateKeys({keys:m,messageId:p}),[2]}})})},[s.upsertMessageTemplates,s.upsertWaitingTemplateKeys,(t=r==null?void 0:r.message)===null||t===void 0?void 0:t.getMessageTemplatesByToken]);return{getCachedTemplate:l,updateMessageTemplatesInfo:f,initializeMessageTemplatesInfo:d}}var WK=function(e){M.useEffect(function(){var n=document.getElementById(Pm);n.parentElement.dir=e},[e])};function QK(e,n){var t=e.isConnected,r=n.logger,i=M.useMemo(function(){return QO({logger:r,cb:function(a){try{a.markAsRead()}catch(s){r.warning("Channel: Mark as delivered failed",{channel:a,error:s})}}})},[]);return M.useEffect(function(){t||i.clear()},[t]),Yb(function(){i.clear()}),i}var YK=function(e){var n,t=e.appId,r=e.userId,i=e.accessToken,a=e.customApiHost,s=e.customWebSocketHost,o=e.configureSession,l=e.theme,u=l===void 0?"light":l,d=e.logger,f=e.config,m=f===void 0?{}:f,p=e.nickname,E=p===void 0?"":p,_=e.colorSet,b=e.profileUrl,C=b===void 0?"":b,y=e.voiceRecord,T=e.userListQuery,N=e.imageCompression,w=N===void 0?{}:N,O=e.allowProfileEdit,L=O===void 0?!1:O,P=e.disableMarkAsDelivered,U=P===void 0?!1:P,B=e.renderUserProfile,F=e.onUserProfileMessage,H=e.onStartDirectMessage,G=e.isUserIdUsedForNickname,j=G===void 0?!0:G,x=e.sdkInitParams,V=e.customExtensionParams,K=e.isMultipleFilesMessageEnabled,W=K===void 0?!1:K,Q=e.eventHandlers,J=e.htmlTextDirection,$=J===void 0?"ltr":J,te=e.forceLeftToRightMessageLayout,re=te===void 0?!1:te,ve=H??F,ie=m.userMention,le=ie===void 0?{}:ie,Ae=m.isREMUnitEnabled,oe=Ae===void 0?!1:Ae,he=m.pubSub,me=pr().isMobile,Be=M.useState(he??HO())[0],pe=f9(),ye=pe.state,Ee=pe.updateState,Ue=yt().actions,Ye=ye.stores,De=Ye.sdkStore,We=Ye.appInfoStore,Je=NB(),Le=Je.configs,He=Je.configsWithAppAttr,At=Je.initDashboardConfigs,Ve=De.initialized,st=De==null?void 0:De.sdk,mt=(n=st==null?void 0:st.appInfo)!==null&&n!==void 0?n:{},et=mt.uploadSizeLimit,St=mt.multipleFilesMessageFileCountLimit;$K(_);var Rt=KK({sdk:st,logger:d,appInfoStore:We,actions:Ue}),xe=Rt.getCachedTemplate,Ht=Rt.updateMessageTemplatesInfo,Xt=Rt.initializeMessageTemplatesInfo;M.useEffect(function(){Ue.connect({appId:t,userId:r,accessToken:i,isUserIdUsedForNickname:j,isMobile:me,logger:d,nickname:E,profileUrl:C,configureSession:o,customApiHost:a,customWebSocketHost:s,sdkInitParams:x,customExtensionParams:V,initDashboardConfigs:At,eventHandlers:Q,initializeMessageTemplatesInfo:Xt})},[t,r]),Yb(function(){Ue.disconnect({logger:d})},[De]);var Ke=M.useState(u),Ct=Ke[0],Dt=Ke[1];M.useEffect(function(){Dt(u)},[u]),M.useEffect(function(){var Tt=document.querySelector("body");Tt==null||Tt.classList.remove("sendbird-experimental__rem__units"),oe&&(Tt==null||Tt.classList.add("sendbird-experimental__rem__units"))},[oe]),M.useEffect(function(){d.info("Setup theme","Theme: ".concat(Ct));try{var Tt=document.querySelector("body");Tt==null||Tt.classList.remove("sendbird-theme--light"),Tt==null||Tt.classList.remove("sendbird-theme--dark"),Tt==null||Tt.classList.add("sendbird-theme--".concat(Ct||"light")),d.info("Finish setup theme")}catch(vn){d.warning("Setup theme failed","".concat(vn))}return function(){try{var vn=document.querySelector("body");vn==null||vn.classList.remove("sendbird-theme--light"),vn==null||vn.classList.remove("sendbird-theme--dark")}catch{}}},[Ct]),WK($);var Vt=WO(De.sdk,d),rn=QK({isConnected:Vt},{logger:d}),Zt=YO({isConnected:Vt},{logger:d}),Mn=M.useMemo(function(){return Math.min(rO,St??Number.MAX_SAFE_INTEGER)},[St]),cn=M.useMemo(function(){if(De.initialized)return new $q({sdk:st,logger:d})},[De.initialized]),ht=M.useMemo(function(){return{common:{enableUsingDefaultUserProfile:Le.common.enableUsingDefaultUserProfile},groupChannel:{enableOgtag:Ve&&He(st).groupChannel.channel.enableOgtag,enableTypingIndicator:Le.groupChannel.channel.enableTypingIndicator,enableReactions:Ve&&He(st).groupChannel.channel.enableReactions,enableMention:Le.groupChannel.channel.enableMention,replyType:Le.groupChannel.channel.replyType,threadReplySelectType:Le.groupChannel.channel.threadReplySelectType,enableVoiceMessage:Le.groupChannel.channel.enableVoiceMessage,enableDocument:Le.groupChannel.channel.input.enableDocument,typingIndicatorTypes:Le.groupChannel.channel.typingIndicatorTypes,enableFeedback:Le.groupChannel.channel.enableFeedback,enableSuggestedReplies:Le.groupChannel.channel.enableSuggestedReplies,showSuggestedRepliesFor:Le.groupChannel.channel.showSuggestedRepliesFor,suggestedRepliesDirection:Le.groupChannel.channel.suggestedRepliesDirection,enableMarkdownForUserMessage:Le.groupChannel.channel.enableMarkdownForUserMessage,enableFormTypeMessage:Le.groupChannel.channel.enableFormTypeMessage,enableReactionsSupergroup:Ve&&He(st).groupChannel.channel.enableReactionsSupergroup},groupChannelList:{enableTypingIndicator:Le.groupChannel.channelList.enableTypingIndicator,enableMessageReceiptStatus:Le.groupChannel.channelList.enableMessageReceiptStatus},groupChannelSettings:{enableMessageSearch:Ve&&He(st).groupChannel.setting.enableMessageSearch},openChannel:{enableOgtag:Ve&&He(st).openChannel.channel.enableOgtag,enableDocument:Le.openChannel.channel.input.enableDocument}}},[Ve,Le.common,Le.groupChannel.channel,Le.groupChannel.channelList,Le.groupChannel.setting,Le.openChannel.channel]),ct=M.useMemo(function(){return{stores:{sdkStore:ye.stores.sdkStore,userStore:ye.stores.userStore,appInfoStore:ye.stores.appInfoStore}}},[ye.stores.sdkStore,ye.stores.userStore,ye.stores.appInfoStore]),dt=M.useMemo(function(){return et??OE},[et,OE]),ke=M.useMemo(function(){return D({compressionRate:.7,outputFormat:"preserve"},w)},[w]),ge=M.useMemo(function(){var Tt,vn;return{maxRecordingTime:(Tt=y==null?void 0:y.maxRecordingTime)!==null&&Tt!==void 0?Tt:tO,minRecordingTime:(vn=y==null?void 0:y.minRecordingTime)!==null&&vn!==void 0?vn:Fb}},[y==null?void 0:y.maxRecordingTime,y==null?void 0:y.minRecordingTime]),Xe=M.useMemo(function(){return{maxMentionCount:(le==null?void 0:le.maxMentionCount)||10,maxSuggestionCount:(le==null?void 0:le.maxSuggestionCount)||15}},[le==null?void 0:le.maxMentionCount,le==null?void 0:le.maxSuggestionCount]),Et=M.useMemo(function(){return{disableUserProfile:!Le.common.enableUsingDefaultUserProfile,isReactionEnabled:Ve&&He(st).groupChannel.channel.enableReactions,isMentionEnabled:Le.groupChannel.channel.enableMention,isVoiceMessageEnabled:Le.groupChannel.channel.enableVoiceMessage,replyType:zo(Le.groupChannel.channel.replyType).upperCase,isTypingIndicatorEnabledOnChannelList:Le.groupChannel.channelList.enableTypingIndicator,isMessageReceiptStatusEnabledOnChannelList:Le.groupChannel.channelList.enableMessageReceiptStatus,showSearchIcon:Ve&&He(st).groupChannel.setting.enableMessageSearch}},[Ve,He,Le.common.enableUsingDefaultUserProfile,Le.groupChannel.channel.enableReactions,Le.groupChannel.channel.enableMention,Le.groupChannel.channel.enableVoiceMessage,Le.groupChannel.channel.replyType,Le.groupChannel.channelList.enableTypingIndicator,Le.groupChannel.channelList.enableMessageReceiptStatus,Le.groupChannel.setting.enableMessageSearch]),Pt=M.useMemo(function(){return{config:D(D({disableMarkAsDelivered:U,renderUserProfile:B,onStartDirectMessage:ve,onUserProfileMessage:ve,allowProfileEdit:L,isOnline:Vt,userId:r,appId:t,accessToken:i,theme:Ct,setCurrentTheme:Dt,setCurrenttheme:Dt,isMultipleFilesMessageEnabled:W,uikitMultipleFilesMessageLimit:Mn,logger:d,pubSub:Be,userListQuery:T,htmlTextDirection:$,forceLeftToRightMessageLayout:re,markAsReadScheduler:rn,markAsDeliveredScheduler:Zt,uikitUploadSizeLimit:dt,imageCompression:ke,voiceRecord:ge,userMention:Xe},ht),Et)}},[U,B,ve,L,Vt,r,t,i,Ct,Dt,W,Mn,d,Be,T,$,re,rn,Zt,dt,ke,ge,Xe,ht,Et]),Jt=M.useMemo(function(){return{utils:{updateMessageTemplatesInfo:Ht,getCachedTemplate:xe}}},[Ht,xe]);return e0(function(){Ee(D(D(D(D({},ct),Jt),Pt),{eventHandlers:Q,emojiManager:cn}))},[ct,Pt,Q,cn,Jt]),null},XK=function(e){var n,t,r,i,a,s,o,l,u,d=e.children,f=e.stringSet,m=e.breakpoint,p=e.dateLocale,E=sa({config:{renderUserProfile:e==null?void 0:e.renderUserProfile,onStartDirectMessage:e==null?void 0:e.onStartDirectMessage,allowProfileEdit:e==null?void 0:e.allowProfileEdit,appId:e==null?void 0:e.appId,userId:e==null?void 0:e.userId,accessToken:e==null?void 0:e.accessToken,theme:e==null?void 0:e.theme,htmlTextDirection:e==null?void 0:e.htmlTextDirection,forceLeftToRightMessageLayout:e==null?void 0:e.forceLeftToRightMessageLayout,pubSub:(n=e==null?void 0:e.config)===null||n===void 0?void 0:n.pubSub,logger:e==null?void 0:e.logger,userListQuery:e==null?void 0:e.userListQuery,voiceRecord:{maxRecordingTime:(r=(t=e==null?void 0:e.voiceRecord)===null||t===void 0?void 0:t.maxRecordingTime)!==null&&r!==void 0?r:tO,minRecordingTime:(a=(i=e==null?void 0:e.voiceRecord)===null||i===void 0?void 0:i.minRecordingTime)!==null&&a!==void 0?a:Fb},userMention:{maxMentionCount:((o=(s=e==null?void 0:e.config)===null||s===void 0?void 0:s.userMention)===null||o===void 0?void 0:o.maxMentionCount)||10,maxSuggestionCount:((u=(l=e==null?void 0:e.config)===null||l===void 0?void 0:l.userMention)===null||u===void 0?void 0:u.maxSuggestionCount)||15},imageCompression:D({compressionRate:.7,outputFormat:"preserve"},e==null?void 0:e.imageCompression),disableMarkAsDelivered:e==null?void 0:e.disableMarkAsDelivered,isMultipleFilesMessageEnabled:e==null?void 0:e.isMultipleFilesMessageEnabled},eventHandlers:e==null?void 0:e.eventHandlers}),_=M.useRef(h9(E)),b=M.useMemo(function(){return D(D({},Kb("en")),f)},[f]);return v.createElement(qb.Provider,{value:_.current},v.createElement(E$,{logger:_.current.getState().config.logger,breakpoint:m},v.createElement(p$,{stringSet:b,dateLocale:p},v.createElement(BK,null,v.createElement(Vq,null,d)))),v.createElement(kK,null),v.createElement(Lq,null),v.createElement(DK,null))},ZK=function(e){var n=e.children,t=e.config,r=t==null?void 0:t.logLevel,i=M.useState(hA(r)),a=i[0],s=i[1];return M.useEffect(function(){s(hA(r))},[r]),v.createElement(XK,D({},e,{logger:a}),v.createElement(YK,D({},e,{logger:a})),n)},JK=function(e){var n=xK({legacyConfig:{replyType:e.replyType,isMentionEnabled:e.isMentionEnabled,isReactionEnabled:e.isReactionEnabled,disableUserProfile:e.disableUserProfile,isVoiceMessageEnabled:e.isVoiceMessageEnabled,isTypingIndicatorEnabledOnChannelList:e.isTypingIndicatorEnabledOnChannelList,isMessageReceiptStatusEnabledOnChannelList:e.isMessageReceiptStatusEnabledOnChannelList,showSearchIcon:e.showSearchIcon},uikitOptions:e.uikitOptions});return v.createElement(MB,{storage:FK,localConfigs:{common:n==null?void 0:n.common,groupChannel:{channel:n==null?void 0:n.groupChannel,channelList:n==null?void 0:n.groupChannelList,setting:n==null?void 0:n.groupChannelSettings},openChannel:{channel:n==null?void 0:n.openChannel}}},v.createElement(ZK,D({},e)))},u3=v.createContext({disableUserProfile:!0,isOpenChannel:!1}),Yl=function(){return M.useContext(u3)},xd=function(e){var n,t=e.isOpenChannel,r=t===void 0?!1:t,i=e.disableUserProfile,a=i===void 0?!1:i,s=e.renderUserProfile,o=e.onUserProfileMessage,l=e.onStartDirectMessage,u=e.children,d=yt().state,f=d.config,m=(n=l??o)!==null&&n!==void 0?n:f.onStartDirectMessage;return v.createElement(u3.Provider,{value:{isOpenChannel:r,disableUserProfile:a??!f.common.enableUsingDefaultUserProfile,renderUserProfile:s??f.renderUserProfile,onStartDirectMessage:m,onUserProfileMessage:m}},u)},c3=10,d3=15,mf="@",eW=1,Ua;(function(e){e.PARENT="PARENT",e.THREAD="THREAD"})(Ua||(Ua={}));function tW(e){return"sendingStatus"in e?e.sendingStatus==="succeeded"?String(e.messageId):e.reqId:String(e.messageId)}function h3(){var e,n;return((e=document.getElementById("sendbird-dropdown-portal"))===null||e===void 0?void 0:e.childElementCount)===0&&((n=document.getElementById("sendbird-emoji-list-portal"))===null||n===void 0?void 0:n.childElementCount)===0}function vA(e){var n,t=(n=document.querySelectorAll('[data-sb-created-at="'.concat(e,'"]')))===null||n===void 0?void 0:n[0];return t instanceof HTMLElement?t.offsetTop:null}var Af=function(e){return e?e.isFrozen&&e.myRole!=="operator":!1},Cd=function(e){return e?e.myMutedState==="muted":!1},mA=function(e,n){var t,r,i,a;return n&&Array.isArray((r=(t=e==null?void 0:e.lastMessage)===null||t===void 0?void 0:t.extendedMessagePayload)===null||r===void 0?void 0:r.suggested_replies)&&!!(!((a=(i=e==null?void 0:e.lastMessage)===null||i===void 0?void 0:i.extendedMessagePayload)===null||a===void 0)&&a.disable_chat_input)},f3=function(e){return e<=eW},pA=function(e,n){return n&&e.some(function(t){var r;return!!t.messageForm&&!t.messageForm.isSubmitted&&!!(!((r=t.extendedMessagePayload)===null||r===void 0)&&r.disable_chat_input)&&f3(t.messageForm.version)})};function zf(e){var n=e.channel,t=e.config,r=e.moduleLevel;return!n||n.isBroadcast||n.isEphemeral?!1:n.isSuper?r??t.groupChannel.enableReactionsSupergroup:r??t.groupChannel.enableReactions}var Jr;(function(e){e.CHANNEL="CHANNEL",e.THREAD="THREAD"})(Jr||(Jr={}));var v3=function(e,n){return!n||n.length===0?!0:n.includes(e)};function Hm(e){return v3(Jr.CHANNEL,e)}function qh(e){return v3(Jr.THREAD,e)}var Xr;(function(e){e.USER_UPDATED="USER_UPDATED",e.SEND_MESSAGE_START="SEND_MESSAGE_START",e.SEND_MESSAGE_FAILED="SEND_MESSAGE_FAILED",e.SEND_USER_MESSAGE="SEND_USER_MESSAGE",e.SEND_FILE_MESSAGE="SEND_FILE_MESSAGE",e.ON_FILE_INFO_UPLOADED="ON_FILE_INFO_UPLOADED",e.UPDATE_USER_MESSAGE="UPDATE_USER_MESSAGE",e.DELETE_MESSAGE="DELETE_MESSAGE",e.LEAVE_CHANNEL="LEAVE_CHANNEL",e.CREATE_CHANNEL="CREATE_CHANNEL",e.UPDATE_OPEN_CHANNEL="UPDATE_OPEN_CHANNEL"})(Xr||(Xr={}));var Hn=Xr,wh=function(e){return e};function nW(e){var n=this,t=e.onBeforeSendUserMessage,r=t===void 0?wh:t,i=e.onBeforeSendFileMessage,a=i===void 0?wh:i,s=e.onBeforeUpdateUserMessage,o=s===void 0?wh:s,l=e.onBeforeSendVoiceMessage,u=l===void 0?wh:l,d=e.onBeforeSendMultipleFilesMessage,f=d===void 0?wh:d,m=e.sendFileMessage,p=e.sendMultipleFilesMessage,E=e.sendUserMessage,_=e.updateUserMessage,b=e.updateFileMessage,C=e.resendMessage,y=e.deleteMessage,T=e.resetNewMessages,N=e.scrollToBottom,w=e.quoteMessage,O=e.replyType,L=e.currentChannel,P=yt().state,U=P.eventHandlers,B=P.config.pubSub,F=M.useCallback(function(j){var x=D({},j);return e.quoteMessage&&O!=="NONE"&&(x.isReplyToChannel=!0,x.parentMessageId=w==null?void 0:w.messageId),x},[O,w]),H=M.useCallback(function(){setTimeout(N,0)},[]),G=M.useCallback(function(j,x,V){return tn(n,void 0,void 0,function(){var K,W;return nn(this,function(Q){switch(Q.label){case 0:return Q.trys.push([0,2,,3]),[4,j(x)];case 1:return K=Q.sent(),[2,K===void 0?x:K];case 2:throw W=Q.sent(),typeof(U==null?void 0:U.message)=="object"&&ji(V).with("file","voice",function(){var J,$,te,re;x.file&&(($=(J=U.message).onFileUploadFailed)===null||$===void 0||$.call(J,W)),(re=(te=U.message).onSendMessageFailed)===null||re===void 0||re.call(te,x,W)}).with("multipleFiles",function(){var J,$,te,re;x.fileInfoList&&(($=(J=U.message).onFileUploadFailed)===null||$===void 0||$.call(J,W)),(re=(te=U.message).onSendMessageFailed)===null||re===void 0||re.call(te,x,W)}).with("user",function(){var J,$;($=(J=U.message).onSendMessageFailed)===null||$===void 0||$.call(J,x,W)}).with("update",function(){var J,$;($=(J=U.message).onUpdateMessageFailed)===null||$===void 0||$.call(J,x,W)}).exhaustive(),W;case 3:return[2]}})})},[U]);return{sendUserMessage:M.useCallback(function(j){return tn(n,void 0,void 0,function(){var x,V;return nn(this,function(K){switch(K.label){case 0:return x=F(j),[4,G(r,x,"user")];case 1:return V=K.sent(),[2,E(V,H)]}})})},[F,E,N,G]),sendFileMessage:M.useCallback(function(j){return tn(n,void 0,void 0,function(){var x,V;return nn(this,function(K){switch(K.label){case 0:return x=F(j),[4,G(a,x,"file")];case 1:return V=K.sent(),[2,m(V,H)]}})})},[F,m,N,G]),sendMultipleFilesMessage:M.useCallback(function(j){return tn(n,void 0,void 0,function(){var x,V;return nn(this,function(K){switch(K.label){case 0:return x=F(j),[4,G(f,x,"multipleFiles")];case 1:return V=K.sent(),[2,p(V,H)]}})})},[F,p,N,G]),sendVoiceMessage:M.useCallback(function(j,x){return tn(n,void 0,void 0,function(){var V,K;return nn(this,function(W){switch(W.label){case 0:return V=F(D(D({},j),{fileName:_d,mimeType:xo,metaArrays:[new $r({key:Bb,value:["".concat(x)]}),new $r({key:Hb,value:[Gb]})]})),[4,G(u,V,"voice")];case 1:return K=W.sent(),[2,m(K,H)]}})})},[F,m,N,G]),updateUserMessage:M.useCallback(function(j,x){return tn(n,void 0,void 0,function(){var V,K;return nn(this,function(W){switch(W.label){case 0:return V=F(x),[4,G(o,V,"update")];case 1:return K=W.sent(),[2,_(j,K).then(function(Q){return B.publish(Xr.UPDATE_USER_MESSAGE,{channel:L,message:Q,publishingModules:[Jr.CHANNEL]}),Q})]}})})},[F,_,G,L==null?void 0:L.url]),updateFileMessage:b,resendMessage:C,deleteMessage:y,resetNewMessages:T}}var ao=function(){var e,n,t,r=M.useContext(aC);if(!r)throw new Error("useGroupChannel must be used within a GroupChannelProvider");var i=yt().state.config,a=i.markAsReadScheduler,s=Ql.useSyncExternalStore(r.subscribe,r.getState),o=M.useCallback(function(C){r.setState(function(y){return D(D({},y),{animatedMessageId:C})})},[]),l=M.useCallback(function(C){r.setState(function(y){return D(D({},y),{isScrollBottomReached:C})})},[]),u=M.useCallback(function(C){return tn(void 0,void 0,void 0,function(){return nn(this,function(y){switch(y.label){case 0:return s.scrollRef.current?(o(null),l(!0),[4,g$()]):[2];case 1:return y.sent(),i.isOnline&&s.hasNext()?[4,s.resetWithStartingPoint(Number.MAX_SAFE_INTEGER)]:[3,3];case 2:y.sent(),y.label=3;case 3:return s.scrollPubSub.publish("scrollToBottom",{animated:C}),s.currentChannel&&!s.hasNext()&&(s.resetNewMessages(),s.disableMarkAsRead||a.push(s.currentChannel)),[2]}})})},[s.scrollRef.current,i.isOnline,a]),d=M.useCallback(function(C,y,T,N){return tn(void 0,void 0,void 0,function(){var w,O,L,P,U;return nn(this,function(B){switch(B.label){case 0:return w=s.scrollRef.current,O=w==null?void 0:w.parentNode,L={activate:function(){!w||!O||(w.style.pointerEvents="auto",O.style.cursor="auto")},deactivate:function(){!w||!O||(w.style.pointerEvents="none",O.style.cursor="wait")}},L.deactivate(),o(null),P=s.messages.find(function(F){return F.messageId===y||F.createdAt===C}),P?(U=vA(P.createdAt),U&&s.scrollPubSub.publish("scroll",{top:U,animated:N}),(T??!0)&&o(y),[3,3]):[3,1];case 1:return[4,s.resetWithStartingPoint(C)];case 2:B.sent(),setTimeout(function(){var F=vA(C);F&&s.scrollPubSub.publish("scroll",{top:F,lazy:!1,animated:N}),(T??!0)&&o(y)}),B.label=3;case 3:return L.activate(),[2]}})})},[o,s.scrollRef.current,(e=s.messages)===null||e===void 0?void 0:e.map(function(C){return C==null?void 0:C.messageId})]),f=M.useCallback(function(C,y,T){s.currentChannel&&(T?s.currentChannel.deleteReaction(C,y).catch(function(N){var w;(w=i.logger)===null||w===void 0||w.warning("Failed to delete reaction:",N)}):s.currentChannel.addReaction(C,y).catch(function(N){var w;(w=i.logger)===null||w===void 0||w.warning("Failed to add reaction:",N)}))},[(n=s.currentChannel)===null||n===void 0?void 0:n.deleteReaction,(t=s.currentChannel)===null||t===void 0?void 0:t.addReaction]),m=nW(D(D({},s),{scrollToBottom:u})),p=M.useCallback(function(C){r.setState(function(y){return D(D({},y),{currentChannel:C,fetchChannelError:null,quoteMessage:null,animatedMessageId:null,nicknamesMap:new Map(C.members.map(function(T){var N=T.userId,w=T.nickname;return[N,w]}))})},!0)},[]),E=M.useCallback(function(C){r.setState(function(y){return D(D({},y),{currentChannel:null,fetchChannelError:C,quoteMessage:null,animatedMessageId:null})})},[]),_=M.useCallback(function(C){r.setState(function(y){return D(D({},y),{quoteMessage:C})})},[]),b=M.useMemo(function(){return D({setCurrentChannel:p,handleChannelError:E,setQuoteMessage:_,scrollToBottom:u,scrollToMessage:d,toggleReaction:f,setAnimatedMessageId:o,setIsScrollBottomReached:l},m)},[p,E,_,u,d,f,o,l,m]);return{state:s,actions:b}};function rW(e,n){n===void 0&&(n=[]);var t=M.useRef(null),r=M.useRef(0),i=M.useRef(0),a=M.useState(function(){return HO({publishSynchronous:!0})})[0],s=ao().actions.setIsScrollBottomReached;return M.useLayoutEffect(function(){r.current=0,i.current=0,s(!0),t.current&&(t.current.scrollTop=t.current.scrollHeight)},n),M.useLayoutEffect(function(){var o=[];return o.push(a.subscribe("scrollToBottom",function(l){var u=l.resolve,d=l.animated;gA(function(){if(!t.current){u&&u();return}t.current.scroll?t.current.scroll({top:t.current.scrollHeight,behavior:_A(e,d)}):t.current.scrollTop=t.current.scrollHeight,i.current=0,s(!0),u&&u()})})),o.push(a.subscribe("scroll",function(l){var u=l.top,d=l.animated,f=l.lazy,m=l.resolve;gA(function(){if(t.current){var p=t.current,E=p.scrollTop,_=p.scrollHeight,b=p.clientHeight;t.current.scroll?t.current.scroll({top:u,behavior:_A(e,d)}):typeof u=="number"&&(t.current.scrollTop=u),i.current=Math.max(0,_-E-b),s(i.current===0),m&&m()}},f)})),function(){o.forEach(function(l){var u=l.remove;return u()})}},[e]),{scrollRef:t,scrollPubSub:a,scrollDistanceFromBottomRef:i,scrollPositionRef:r}}function gA(e,n){n===void 0&&(n=!0),n?setTimeout(function(){e()}):e()}function _A(e,n){return typeof n=="boolean"?n?"smooth":"auto":e}var m3={currentChannel:null,channelUrl:"",fetchChannelError:null,nicknamesMap:new Map,messages:[],quoteMessage:null,animatedMessageId:null,isScrollBottomReached:!0,scrollRef:{current:null},scrollDistanceFromBottomRef:{current:0},scrollPositionRef:{current:0},messageInputRef:{current:null},isReactionEnabled:!1,isMessageGroupingEnabled:!0,isMultipleFilesMessageEnabled:!1,showSearchIcon:!0,replyType:"NONE",threadReplySelectType:Ua.PARENT,disableMarkAsRead:!1,scrollBehavior:"auto",scrollPubSub:null},aC=M.createContext(null),iW=function(e){return cc(D(D({},m3),e))},aW=function(e){var n=e.children,t=sa({channelUrl:e==null?void 0:e.channelUrl,renderUserProfile:e==null?void 0:e.renderUserProfile,disableUserProfile:e==null?void 0:e.disableUserProfile,onUserProfileMessage:e==null?void 0:e.onUserProfileMessage,onStartDirectMessage:e==null?void 0:e.onStartDirectMessage,isReactionEnabled:e==null?void 0:e.isReactionEnabled,isMessageGroupingEnabled:e==null?void 0:e.isMessageGroupingEnabled,isMultipleFilesMessageEnabled:e==null?void 0:e.isMultipleFilesMessageEnabled,showSearchIcon:e==null?void 0:e.showSearchIcon,threadReplySelectType:e==null?void 0:e.threadReplySelectType,disableMarkAsRead:e==null?void 0:e.disableMarkAsRead,scrollBehavior:e==null?void 0:e.scrollBehavior,forceLeftToRightMessageLayout:e==null?void 0:e.forceLeftToRightMessageLayout,startingPoint:e==null?void 0:e.startingPoint,animatedMessageId:e==null?void 0:e.animatedMessageId,onMessageAnimated:e==null?void 0:e.onMessageAnimated,messageListQueryParams:e==null?void 0:e.messageListQueryParams,filterEmojiCategoryIds:e==null?void 0:e.filterEmojiCategoryIds,onBeforeSendUserMessage:e==null?void 0:e.onBeforeSendUserMessage,onBeforeSendFileMessage:e==null?void 0:e.onBeforeSendFileMessage,onBeforeSendVoiceMessage:e==null?void 0:e.onBeforeSendVoiceMessage,onBeforeSendMultipleFilesMessage:e==null?void 0:e.onBeforeSendMultipleFilesMessage,onBeforeUpdateUserMessage:e==null?void 0:e.onBeforeUpdateUserMessage,onBeforeDownloadFileMessage:e==null?void 0:e.onBeforeDownloadFileMessage,onBackClick:e==null?void 0:e.onBackClick,onChatHeaderActionClick:e==null?void 0:e.onChatHeaderActionClick,onReplyInThreadClick:e==null?void 0:e.onReplyInThreadClick,onSearchClick:e==null?void 0:e.onSearchClick,onQuoteMessageClick:e==null?void 0:e.onQuoteMessageClick,renderUserMentionItem:e==null?void 0:e.renderUserMentionItem}),r=M.useRef(iW(t));return v.createElement(aC.Provider,{value:r.current},n)},sW=function(e){var n,t,r,i=e.channelUrl,a=e.children,s=e.isReactionEnabled,o=e.replyType,l=e.threadReplySelectType,u=e.isMessageGroupingEnabled,d=u===void 0?!0:u,f=e.isMultipleFilesMessageEnabled,m=e.showSearchIcon,p=e.disableMarkAsRead,E=p===void 0?!1:p,_=e.scrollBehavior,b=_===void 0?"auto":_,C=e.startingPoint,y=e.animatedMessageId,T=e.messageListQueryParams,N=e.onBeforeSendUserMessage,w=e.onBeforeSendFileMessage,O=e.onBeforeSendVoiceMessage,L=e.onBeforeSendMultipleFilesMessage,P=e.onBeforeUpdateUserMessage,U=e.onBeforeDownloadFileMessage,B=e.onMessageAnimated,F=e.onBackClick,H=e.onChatHeaderActionClick,G=e.onReplyInThreadClick,j=e.onSearchClick,x=e.onQuoteMessageClick,V=e.renderUserMentionItem,K=e.filterEmojiCategoryIds,W=ao(),Q=W.state,J=W.actions,$=lW().updateState,te=yt().state,re=te.config,ve=te.stores,ie=ve.sdkStore,le=re.markAsReadScheduler,Ae=re.logger,oe=re.pubSub,he=rW(b,[(n=Q.currentChannel)===null||n===void 0?void 0:n.url]),me=he.scrollRef,Be=he.scrollPubSub,pe=he.scrollDistanceFromBottomRef,ye=he.scrollPositionRef,Ee=Q.isScrollBottomReached,Ue=zo(o??re.groupChannel.replyType).upperCase,Ye=JR(l??re.groupChannel.threadReplySelectType).upperCase,De=zo(o??re.groupChannel.replyType).upperCase,We=zf({channel:Q.currentChannel,config:re,moduleLevel:s}),Je=QR(function(){return De==="NONE"?Ir.NONE:Ir.ONLY_REPLY_TO_CHANNEL}),Le=lB(ie.sdk,Q.currentChannel,{startingPoint:C,replyType:Je,collectionCreator:uW(Q.currentChannel,T),shouldCountNewMessages:function(){return!Ee},markAsRead:function(mt){Ee&&!E&&mt.forEach(function(et){return le.push(et)})},onMessagesReceived:function(mt){Ee&&h3()&&mt.length!==Q.messages.length&&setTimeout(function(){return J.scrollToBottom(!0)},10)},onChannelDeleted:function(){J.setCurrentChannel(null),F==null||F()},onCurrentUserBanned:function(){J.setCurrentChannel(null),F==null||F()},onChannelUpdated:function(mt){J.setCurrentChannel(mt)},logger:Ae});VR(function(){return tn(void 0,void 0,void 0,function(){var mt,et,St;return nn(this,function(Rt){switch(Rt.label){case 0:if(!(ie.initialized&&i))return[3,4];Rt.label=1;case 1:return Rt.trys.push([1,3,,4]),[4,ie.sdk.groupChannel.getChannel(i)];case 2:return mt=Rt.sent(),J.setCurrentChannel(mt),[3,4];case 3:return et=Rt.sent(),J.handleChannelError(et),(St=Ae==null?void 0:Ae.error)===null||St===void 0||St.call(Ae,"GroupChannelProvider: error when fetching channel",et),[3,4];case 4:return[2]}})})},[ie.initialized,ie.sdk,i]),P5(function(){return tn(void 0,void 0,void 0,function(){var mt,et;return nn(this,function(St){return Le.initialized&&J.scrollToBottom(),mt=function(Rt){var xe;Rt.channel.url===((xe=Q.currentChannel)===null||xe===void 0?void 0:xe.url)&&J.scrollToBottom(!0)},(oe==null?void 0:oe.subscribe)===void 0?[2]:(et=[re.pubSub.subscribe(Hn.SEND_USER_MESSAGE,mt),re.pubSub.subscribe(Hn.SEND_FILE_MESSAGE,mt)],[2,function(){et.forEach(function(Rt){return Rt.remove()})}])})})},[Le.initialized,(t=Q.currentChannel)===null||t===void 0?void 0:t.url]),M.useEffect(function(){typeof C=="number"&&J.scrollToMessage(C,0,!1,!1)},[C]),M.useEffect(function(){y&&J.setAnimatedMessageId(y)},[y]);var He=M.useMemo(function(){return{onBeforeSendUserMessage:N,onBeforeSendFileMessage:w,onBeforeSendVoiceMessage:O,onBeforeSendMultipleFilesMessage:L,onBeforeUpdateUserMessage:P,onBeforeDownloadFileMessage:U,onBackClick:F,onChatHeaderActionClick:H,onReplyInThreadClick:G,onSearchClick:j,onQuoteMessageClick:x,onMessageAnimated:B}},[N,w,O,L,P,U,F,H,G,j,x,B]),At=M.useMemo(function(){return{renderUserMentionItem:V,filterEmojiCategoryIds:K}},[V,K]),Ve=M.useMemo(function(){return{isReactionEnabled:We,isMessageGroupingEnabled:d,isMultipleFilesMessageEnabled:f,replyType:Ue,threadReplySelectType:Ye,showSearchIcon:m??re.groupChannelSettings.enableMessageSearch,disableMarkAsRead:E,scrollBehavior:b}},[We,d,f,Ue,Ye,m,E,b,re.groupChannelSettings.enableMessageSearch]),st=M.useMemo(function(){return{scrollRef:me,scrollPubSub:Be,scrollDistanceFromBottomRef:pe,scrollPositionRef:ye,isScrollBottomReached:Ee}},[me,Be,pe,ye,Ee]);return e0(function(){$(D(D(D(D(D({channelUrl:i,currentChannel:Q.currentChannel},Ve),st),He),At),Le))},[i,(r=Q.currentChannel)===null||r===void 0?void 0:r.serialize(),Ve,st,He,At,Le.initialized,Le.loading,Le.messages.map(function(mt){return mt.serialize()})]),a},oW=function(e){return v.createElement(aW,D({},e),v.createElement(sW,D({},e),v.createElement(xd,D({},e),e.children)))},lW=function(){return dc(aC,function(e){return e},m3)},p3=function(){var e=ao(),n=e.state,t=e.actions;return D(D({},n),t)};function uW(e,n){return function(t){var r=D(D(D({},t),{prevResultLimit:30,nextResultLimit:30}),n);return e.createMessageCollection(D(D({},r),{filter:new to(r)}))}}var g3=function(e){var n=e.members;function t(){var r=M.useContext(On).stringSet;return!n||n.length===0?"":n&&n.length===1?"".concat(n[0].nickname," ").concat(r.TYPING_INDICATOR__IS_TYPING):n&&n.length===2?"".concat(n[0].nickname," ").concat(r.TYPING_INDICATOR__AND," ").concat(n[1].nickname," ").concat(r.TYPING_INDICATOR__ARE_TYPING):r.TYPING_INDICATOR__MULTIPLE_TYPING}return v.createElement(v.Fragment,null,t())},cW=function(e){var n,t,r,i=e.channelUrl,a=yt().state,s=(t=(n=a==null?void 0:a.stores)===null||n===void 0?void 0:n.sdkStore)===null||t===void 0?void 0:t.sdk,o=(r=a==null?void 0:a.config)===null||r===void 0?void 0:r.logger,l=M.useState(qr()),u=l[0],d=l[1],f=M.useState([]),m=f[0],p=f[1];return M.useEffect(function(){var E;if(!((E=s==null?void 0:s.groupChannel)===null||E===void 0)&&E.addGroupChannelHandler){s.groupChannel.removeGroupChannelHandler(u);var _=qr(),b=new Qo({onTypingStatusUpdated:function(C){if(o.info("Channel > Typing Indicator: onTypingStatusUpdated",C),C.url===i){var y=C.getTypingUsers();p(y)}}});s.groupChannel.addGroupChannelHandler(_,b),d(_)}return function(){var C;p([]),!((C=s==null?void 0:s.groupChannel)===null||C===void 0)&&C.removeGroupChannelHandler&&s.groupChannel.removeGroupChannelHandler(u)}},[i]),v.createElement(Me,{className:"sendbird-conversation__footer__typing-indicator__text",type:be.CAPTION_2,color:de.ONBACKGROUND_2},v.createElement(g3,{members:m}))},wf;(function(e){e.Text="text",e.Bubble="bubble"})(wf||(wf={}));function dW(){var e=M.useContext(On).stringSet;return v.createElement("div",{className:"sendbird-connection-status"},v.createElement(Me,{type:be.BODY_2,color:de.ONBACKGROUND_2},e.TRYING_TO_CONNECT),v.createElement(qe,{type:Se.DISCONNECTED,fillColor:ze.SENT,width:"14px",height:"14px"}))}function Xo(e){var n=e.className,t=n===void 0?"":n,r=e.width,i=r===void 0?"26px":r,a=e.height,s=a===void 0?"26px":a,o=e.children,l=e.testID;return v.createElement("div",{className:Ne(Ne([],Array.isArray(t)?t:[t],!0),["sendbird-loader"],!1).join(" "),"data-testid":l,style:{width:typeof i=="string"?i:"".concat(i,"px"),height:typeof s=="string"?s:"".concat(s,"px")}},o||v.createElement(qe,{type:Se.SPINNER,width:"26px",height:"26px"}))}var Dn={LOADING:"LOADING",NO_CHANNELS:"NO_CHANNELS",NO_MESSAGES:"NO_MESSAGES",WRONG:"WRONG",SEARCH_IN:"SEARCH_IN",SEARCHING:"SEARCHING",NO_RESULTS:"NO_RESULTS"};function Nr(e){var n=e.className,t=n===void 0?"":n,r=e.type,i=e.iconSize,a=e.searchInString,s=a===void 0?"":a,o=e.retryToConnect,l=M.useContext(On).stringSet;return v.createElement("div",{className:Ne(Ne([],Array.isArray(t)?t:[t],!0),["sendbird-place-holder"],!1).join(" ")},r===Dn.LOADING&&v.createElement(Xo,{width:i||"48px",height:i||"48px"},v.createElement(qe,{type:Se.SPINNER,fillColor:ze.PRIMARY,width:i||"48px",height:i||"48px"})),(r===Dn.NO_CHANNELS||r===Dn.NO_MESSAGES||r===Dn.WRONG)&&v.createElement("div",{className:"sendbird-place-holder__body"},r===Dn.NO_CHANNELS&&v.createElement(qe,{className:"sendbird-place-holder__body__icon",type:Se.CHAT,fillColor:ze.ON_BACKGROUND_3,width:i||"64px",height:i||"64px"}),r===Dn.WRONG&&v.createElement(qe,{className:"sendbird-place-holder__body__icon",type:Se.ERROR,fillColor:ze.ON_BACKGROUND_3,width:i||"64px",height:i||"64px"}),r===Dn.NO_MESSAGES&&v.createElement(qe,{className:"sendbird-place-holder__body__icon",type:Se.MESSAGE,fillColor:ze.ON_BACKGROUND_3,width:i||"64px",height:i||"64px"}),v.createElement(Me,{className:"sendbird-place-holder__body__text",type:be.BODY_1,color:de.ONBACKGROUND_2},r===Dn.NO_CHANNELS&&l.PLACE_HOLDER__NO_CHANNEL,r===Dn.WRONG&&l.PLACE_HOLDER__WRONG,r===Dn.NO_MESSAGES&&l.PLACE_HOLDER__NO_MESSAGES),o&&v.createElement("div",{className:"sendbird-place-holder__body__reconnect",role:"button",onClick:o,onKeyPress:o,tabIndex:0},v.createElement(qe,{className:"sendbird-place-holder__body__reconnect__icon",type:Se.REFRESH,fillColor:ze.PRIMARY,width:"20px",height:"20px"}),v.createElement(Me,{className:"sendbird-place-holder__body__reconnect__text",type:be.BUTTON_1,color:de.PRIMARY},l.PLACE_HOLDER__RETRY_TO_CONNECT))),(r===Dn.NO_RESULTS||r===Dn.SEARCH_IN||r===Dn.SEARCHING)&&v.createElement("div",{className:"sendbird-place-holder__body--align-top"},r===Dn.SEARCH_IN&&v.createElement("div",{className:"sendbird-place-holder__body--align-top__text"},v.createElement(Me,{className:"sendbird-place-holder__body--align-top__text__search-in",type:be.BUTTON_2,color:de.ONBACKGROUND_2},l.SEARCH_IN),v.createElement(Me,{className:"sendbird-place-holder__body--align-top__text__channel-name",type:be.BUTTON_2,color:de.PRIMARY},"'".concat(s)),v.createElement(Me,{className:"sendbird-place-holder__body--align-top__text__quote",type:be.BUTTON_2,color:de.PRIMARY},"'")),r===Dn.SEARCHING&&v.createElement(Me,{className:"sendbird-place-hlder__body--align-top__searching",type:be.BODY_1,color:de.ONBACKGROUND_2},l.SEARCHING),r===Dn.NO_RESULTS&&v.createElement(Me,{className:"sendbird-place-hlder__body--align-top__no-result",type:be.BODY_1,color:de.ONBACKGROUND_2},l.NO_SEARCHED_MESSAGE)))}var _3=function(e){var n,t,r,i,a=e.isLoading,s=e.isInvalid,o=e.channelUrl,l=sa(e),u=l.renderChannelHeader,d=l.renderMessageList,f=l.renderMessageInput,m=l.renderTypingIndicator,p=l.renderPlaceholderLoader,E=l.renderPlaceholderInvalid,_=yt().state,b=_.stores,C=_.config,y=(n=b==null?void 0:b.sdkStore)===null||n===void 0?void 0:n.error,T=C.logger,N=C.isOnline;return a?v.createElement("div",{className:"sendbird-conversation"},(p==null?void 0:p())||v.createElement(Nr,{type:Dn.LOADING})):o?s?v.createElement("div",{className:"sendbird-conversation"},(E==null?void 0:E())||v.createElement(Nr,{type:Dn.WRONG})):y?v.createElement("div",{className:"sendbird-conversation"},(E==null?void 0:E())||v.createElement(Nr,{type:Dn.WRONG,retryToConnect:function(){T.info("Channel: reconnecting")}})):v.createElement("div",{className:"sendbird-conversation"},u==null?void 0:u({className:"sendbird-conversation__channel-header"}),d==null?void 0:d(e),v.createElement("div",{className:"sendbird-conversation__footer"},f==null?void 0:f(),v.createElement("div",{className:"sendbird-conversation__footer__typing-indicator"},(m==null?void 0:m())||((t=C==null?void 0:C.groupChannel)===null||t===void 0?void 0:t.enableTypingIndicator)&&((i=(r=C==null?void 0:C.groupChannel)===null||r===void 0?void 0:r.typingIndicatorTypes)===null||i===void 0?void 0:i.has(wf.Text))&&v.createElement(cW,{channelUrl:o}),!N&&v.createElement(dW,null)))):v.createElement("div",{className:"sendbird-conversation"},(E==null?void 0:E())||v.createElement(Nr,{type:Dn.NO_CHANNELS}))},E3=function(e){if(e!==null)return typeof e=="number"?"".concat(e,"px"):e};function EA(e,n,t){var r;return"min(".concat(n??t,", ").concat((r=E3(e))!==null&&r!==void 0?r:t,")")}function hW(e){var n=e.width,t=e.height,r=e.maxSideLength,i=e.defaultMinLength,a=M.useMemo(function(){return EA(n,r,i)},[n]),s=M.useMemo(function(){return EA(t,r,i)},[t]);return[a,s]}var fW=function(){var e=M.useState(!1),n=e[0],t=e[1],r=M.useState(null),i=r[0],a=r[1],s=M.useCallback(function(o){o!==null&&a(o)},[]);return M.useEffect(function(){if(i){var o=new IntersectionObserver(function(l){var u=l[0];t(u.isIntersecting)});return o.observe(i),function(){o.disconnect()}}},[i]),[s,n]},vW=function(){var e=M.useRef(!1),n=fW(),t=n[0],r=n[1];return r&&(e.current=!0),[t,e.current]};function yA(e,n){return e===void 0&&(e=!1),n===void 0&&(n=null),e?"50%":E3(n)}function mW(e,n,t){var r=typeof e=="string"?parseInt(e,10):e,i=t-1,a=n===0?r*2:r,s=n===1?r*2:r,o=n===i?r*2:r,l=n===i-1?r*2:r;return"".concat(a,"px ").concat(s,"px ").concat(o,"px ").concat(l,"px")}var yr=function(e){var n=e.className,t=n===void 0?"":n,r=e.url,i=e.alt,a=i===void 0?"":i,s=e.width,o=s===void 0?null:s,l=e.maxSideLength,u=l===void 0?null:l,d=e.height,f=d===void 0?null:d,m=e.circle,p=m===void 0?!1:m,E=e.fixedSize,_=E===void 0?!1:E,b=e.placeHolder,C=b===void 0?null:b,y=e.defaultComponent,T=y===void 0?null:y,N=e.borderRadius,w=N===void 0?null:N,O=e.onLoad,L=O===void 0?_n:O,P=e.onError,U=P===void 0?_n:P,B=e.shadeOnHover,F=e.isUploaded,H=F===void 0?!0:F,G=vW(),j=G[0],x=G[1],V=x?r:null,K=M.useState(!1),W=K[0],Q=K[1],J=M.useState(!0),$=J[0],te=J[1],re=hW({width:o,height:f,maxSideLength:u,defaultMinLength:"400px"}),ve=re[0],ie=re[1],le=function(){return typeof C=="function"?C({style:{width:"100%",minWidth:ve,maxWidth:_?ve:"400px",height:ie,position:"absolute",display:"flex",justifyContent:"center",alignItems:"center"}}):C},Ae=function(){return typeof T=="function"?T():T},oe=function(){var he=V?{backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover",backgroundImage:"url(".concat(V,")")}:{};return v.createElement("div",{className:"sendbird-image-renderer__image",style:D({width:"100%",minWidth:ve,maxWidth:_?ve:"400px",height:ie,position:"absolute",borderRadius:yA(p,w)},he)})};return ve&&ie&&v.createElement("div",{ref:j,className:Ne(Ne([],Array.isArray(t)?t:[t],!0),["sendbird-image-renderer"],!1).join(" "),style:{width:"100%",minWidth:ve,maxWidth:_?ve:"400px",height:ie}},$&&le(),!V||W?Ae():oe(),B&&v.createElement("div",{className:"sendbird-multiple-files-image-renderer__image-cover",style:D({borderRadius:yA(p,w)},H?{}:{display:"inline-flex"})}),V&&v.createElement(pW,{src:V,alt:a,onLoadStart:function(){te(!0),Q(!1)},onLoad:function(){te(!1),Q(!1),L()},onError:function(){te(!1),Q(!0),U()}}))},pW=function(e){var n=e.src,t=e.alt,r=e.onLoadStart,i=r===void 0?_n:r,a=e.onLoad,s=a===void 0?_n:a,o=e.onError,l=o===void 0?_n:o,u=M.useRef({currSrc:n,prevSrc:n,loadFailure:!1});return u.current.currSrc!==n&&(u.current.prevSrc=u.current.currSrc,u.current.currSrc=n),M.useLayoutEffect(function(){if(n){var d=u.current.prevSrc!==u.current.currSrc,f=u.current.loadFailure;(d||f)&&i()}},[n,navigator.onLine]),v.createElement("img",{className:"sendbird-image-renderer__hidden-image-loader",src:n,alt:t,onLoad:function(){u.current.loadFailure=!1,s()},onError:function(){u.current.loadFailure=!0,l()}})},Sd=function(e){if(typeof e=="number")return e;if(typeof e=="string"){var n=Number.parseFloat(e);if(!Number.isNaN(n))return n}return NaN},y3=function(e){var n=e.width,t=e.height,r=e.text,i=Sd(n),a=Sd(t);return typeof i=="number"&&!Number.isNaN(i)&&(i*=.575),typeof a=="number"&&!Number.isNaN(a)&&(a*=.575),v.createElement("div",{className:zt("sendbird-avatar-img--default",r&&"text"),style:{width:n,height:t}},r?v.createElement("div",{className:"sendbird-avatar-text"},r):v.createElement(qe,{type:Se.USER,fillColor:ze.CONTENT,width:i,height:a}))},So="sendbird-avatar-img",gW=function(e){var n=e.src,t=n===void 0?"":n,r=e.alt,i=r===void 0?"":r,a=e.height,s=e.width,o=e.customDefaultComponent,l=function(){return o?o({width:s,height:a}):v.createElement(y3,{width:s,height:a})};return typeof t=="string"?v.createElement(yr,{className:So,url:t,height:a,width:s,alt:i,defaultComponent:l}):t&&t.length?t.length===1?v.createElement(yr,{className:So,url:t[0],height:a,width:s,alt:i,defaultComponent:l}):t.length===2?v.createElement("div",{className:"sendbird-avatar--inner__two-child"},v.createElement(yr,{className:So,url:t[0],height:a,width:s,alt:i,defaultComponent:l}),v.createElement(yr,{className:So,url:t[1],height:a,width:s,alt:i,defaultComponent:l})):t.length===3?v.createElement(v.Fragment,null,v.createElement("div",{className:"sendbird-avatar--inner__three-child--upper"},v.createElement(yr,{className:So,url:t[0],height:a,width:s,alt:i,defaultComponent:l})),v.createElement("div",{className:"sendbird-avatar--inner__three-child--lower"},v.createElement(yr,{className:So,url:t[1],height:a,width:s,alt:i,defaultComponent:l}),v.createElement(yr,{className:So,url:t[2],height:a,width:s,alt:i,defaultComponent:l}))):v.createElement("div",{className:"sendbird-avatar--inner__four-child"},t.slice(0,4).map(function(u,d){return v.createElement(yr,{className:So,url:u,height:a,width:s,alt:i,key:"".concat(u,"-").concat(d),defaultComponent:l})})):v.createElement(yr,{className:So,url:"",height:a,width:s,alt:i,defaultComponent:l})};function _W(e,n){var t=e.className,r=t===void 0?"":t,i=e.src,a=i===void 0?"":i,s=e.alt,o=s===void 0?"":s,l=e.width,u=l===void 0?"56px":l,d=e.height,f=d===void 0?"56px":d,m=e.zIndex,p=m===void 0?0:m,E=e.left,_=E===void 0?"":E,b=e.bottom,C=b===void 0?"":b,y=e.onClick,T=e.customDefaultComponent;return v.createElement("div",{className:Ne(Ne([],Array.isArray(r)?r:[r],!0),["sendbird-avatar"],!1).join(" "),role:"button",ref:n,style:{height:f,width:u,zIndex:p,left:_,bottom:C},onClick:y,onKeyDown:y,tabIndex:0},v.createElement(gW,{src:a,width:u,height:f,alt:o,customDefaultComponent:T}))}var Fr=v.forwardRef(_W),b3="https://static.sendbird.com/sample/cover/cover_",x_=function(e,n){return e!=null&&e.coverUrl&&!new RegExp("^".concat(b3)).test(e.coverUrl)?e.coverUrl:((e==null?void 0:e.members)||[]).filter(function(t){return t.userId!==n}).map(function(t){var r=t.profileUrl;return r})},EW=function(e){return e!=null&&e.coverUrl?!!new RegExp("^".concat(b3)).test(e.coverUrl):!0};function t0(e){var n=e.channel,t=e.userId,r=e.theme,i=e.width,a=i===void 0?56:i,s=e.height,o=s===void 0?56:s,l=n==null?void 0:n.isBroadcast,u=M.useMemo(function(){return l?EW(n)?v.createElement("div",{className:"sendbird-chat-header--default-avatar",style:{width:a,height:o,display:"flex",justifyContent:"center",alignItems:"center"}},v.createElement(qe,{type:Se.BROADCAST,fillColor:ze.CONTENT,width:a*.575,height:o*.575})):v.createElement(Fr,{className:"sendbird-chat-header--avatar--broadcast-channel",src:x_(n,t),width:a,height:o,alt:n==null?void 0:n.name}):v.createElement(Fr,{className:"sendbird-chat-header--avatar--group-channel",src:x_(n,t),width:"".concat(a,"px"),height:"".concat(o,"px"),alt:n==null?void 0:n.name})},[x_(n,t),r]);return v.createElement(v.Fragment,null,u)}var C3=function(e,n,t){var r,i=t||hc;return!(e!=null&&e.name)&&!(e!=null&&e.members)?i.NO_TITLE:Ff(e)?((r=e==null?void 0:e.members)===null||r===void 0?void 0:r.length)===1?i.NO_MEMBERS:e==null?void 0:e.members.filter(function(a){var s=a.userId;return s!==n}).map(function(a){var s=a.nickname;return s||i.NO_NAME}).join(", "):e.name},ma;(function(e){e.ONBACKGROUND_1="ONBACKGROUND_1",e.ONBACKGROUND_2="ONBACKGROUND_2",e.ONBACKGROUND_3="ONBACKGROUND_3",e.ONBACKGROUND_4="ONBACKGROUND_4",e.ONCONTENT_1="ONCONTENT_1",e.PRIMARY="PRIMARY",e.ERROR="ERROR"})(ma||(ma={}));var Xy=function(e){switch(e){case ma.ONBACKGROUND_1:return"sendbird-color--onbackground-1";case ma.ONBACKGROUND_2:return"sendbird-color--onbackground-2";case ma.ONBACKGROUND_3:return"sendbird-color--onbackground-3";case ma.ONBACKGROUND_4:return"sendbird-color--onbackground-4";case ma.ONCONTENT_1:return"sendbird-color--oncontent-1";case ma.PRIMARY:return"sendbird-color--primary";case ma.ERROR:return"sendbird-color--error";default:return""}},so=function(e){var n=e.className,t=n===void 0?"":n,r=e.color,i=r===void 0?ma.ONBACKGROUND_1:r,a=e.disabled,s=a===void 0?!1:a,o=e.disableUnderline,l=o===void 0?!1:o,u=e.onClick,d=u===void 0?function(){}:u,f=e.children;return v.createElement("div",{className:Ne(Ne([],Array.isArray(t)?t:[t],!0),[Xy(i),l?"sendbird-textbutton--not-underline":"sendbird-textbutton",s?"sendbird-textbutton--disabled":""],!1).join(" "),role:"button",tabIndex:0,onClick:function(m){return d(m)},onKeyPress:function(m){return d(m)}},f)},yW=function(e){var n,t=e.className,r=e.renderLeft,i=e.renderRight,a=e.renderMiddle,s=!1;try{s=(n=pr==null?void 0:pr())===null||n===void 0?void 0:n.isMobile}catch{}return v.createElement("div",{className:zt("sendbird-ui-header",t),"data-testid":"sendbird-ui-header"},r?v.createElement("div",{className:zt("sendbird-ui-header__left",s?"sendbird-ui-header--is-mobile":"sendbird-ui-header--is-desktop")},r==null?void 0:r()):null,v.createElement("div",{className:"sendbird-ui-header__middle"},a==null?void 0:a()),i?v.createElement("div",{className:zt("sendbird-ui-header__right",s?"sendbird-ui-header--is-mobile":"sendbird-ui-header--is-desktop")},i==null?void 0:i()):null)},bW=function(e){var n=e.title,t=e.subtitle,r=e.onClickSubtitle;return v.createElement("div",{className:"sendbird-ui-header__middle"},n&&v.createElement(Me,{className:"sendbird-ui-header__middle__title",type:be.H_2,color:de.ONBACKGROUND_1},n),t&&(r?v.createElement(so,{className:"sendbird-ui-header__middle__subtitle__container",onClick:r,disableUnderline:!0},v.createElement(Me,{className:"sendbird-ui-header__middle__subtitle",type:be.CAPTION_3,color:de.ONBACKGROUND_2},t)):v.createElement(Me,{className:"sendbird-ui-header__middle__subtitle",type:be.BODY_1,color:de.ONBACKGROUND_2},t)))},CW=function(e){var n=e.className,t=e.onClick,r=e.type,i=e.color,a=e.width,s=a===void 0?"32px":a,o=e.height,l=o===void 0?"32px":o,u=e.renderIcon,d=u===void 0?function(f){return v.createElement(S3,D({},f))}:u;return v.createElement(ga,{className:n,width:s,height:l,onClick:t},d({type:r,color:i}))},S3=function(e){var n=e.className,t=e.type,r=e.color,i=e.width,a=i===void 0?"22px":i,s=e.height,o=s===void 0?"22px":s,l=e.onClick,u=l===void 0?_n:l;return v.createElement(qe,{className:n,type:t,fillColor:r,width:a,height:o,onClick:function(d){return u==null?void 0:u(d)}})},hi=Object.assign(yW,{Title:bW,IconButton:CW,Icon:S3}),T3=function(e){var n=e.className,t=e.currentChannel,r=e.showSearchIcon,i=e.onBackClick,a=e.onSearchClick,s=e.onChatHeaderActionClick,o=e.renderLeft,l=e.renderMiddle,u=e.renderRight,d=yt().state,f=d.config,m=f.userId,p=f.theme,E=pr().isMobile,_=Ut().stringSet,b=(t==null?void 0:t.myMutedState)==="muted",C=C3(t,m,_);return v.createElement(hi,{className:zt("sendbird-chat-header",n),renderLeft:o??function(){return v.createElement(v.Fragment,null,E&&v.createElement(hi.Icon,{className:"sendbird-chat-header__icon_back",onClick:i,type:Se.ARROW_LEFT,color:ze.PRIMARY,width:"24px",height:"24px"}),v.createElement(t0,{theme:p,channel:t,userId:m,height:32,width:32}))},renderMiddle:l??function(){return v.createElement(hi.Title,{title:C})},renderRight:u??function(){return v.createElement(v.Fragment,null,b&&v.createElement(hi.Icon,{className:"sendbird-chat-header__right__mute",type:Se.NOTIFICATIONS_OFF_FILLED,color:ze.ON_BACKGROUND_2,width:"24px",height:"24px"}),r&&!(t!=null&&t.isEphemeral)&&v.createElement(hi.IconButton,{className:"sendbird-chat-header__right__search",onClick:a,type:Se.SEARCH,color:ze.PRIMARY,renderIcon:function(y){return v.createElement(hi.Icon,D({},y,{width:"24px",height:"24px"}))}}),v.createElement(hi.IconButton,{className:"sendbird-chat-header__right__info",onClick:s,type:Se.INFO,color:ze.PRIMARY,renderIcon:function(y){return v.createElement(hi.Icon,D({},y,{width:"24px",height:"24px"}))}}))}})},SW=function(e){var n=p3();return v.createElement(T3,D({},e,n,{currentChannel:n.currentChannel}))};function TW(e){return br(1,arguments),e instanceof Date||_p(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function MW(e){if(br(1,arguments),!TW(e)&&typeof e!="number")return!1;var n=ra(e);return!isNaN(Number(n))}function Vo(e){if(e===null||e===!0||e===!1)return NaN;var n=Number(e);return isNaN(n)?n:n<0?Math.ceil(n):Math.floor(n)}function NW(e,n){br(2,arguments);var t=ra(e).getTime(),r=Vo(n);return new Date(t+r)}function IW(e,n){br(2,arguments);var t=Vo(n);return NW(e,-t)}var AW=864e5;function wW(e){br(1,arguments);var n=ra(e),t=n.getTime();n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0);var r=n.getTime(),i=t-r;return Math.floor(i/AW)+1}function bp(e){br(1,arguments);var n=1,t=ra(e),r=t.getUTCDay(),i=(r<n?7:0)+r-n;return t.setUTCDate(t.getUTCDate()-i),t.setUTCHours(0,0,0,0),t}function M3(e){br(1,arguments);var n=ra(e),t=n.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(t+1,0,4),r.setUTCHours(0,0,0,0);var i=bp(r),a=new Date(0);a.setUTCFullYear(t,0,4),a.setUTCHours(0,0,0,0);var s=bp(a);return n.getTime()>=i.getTime()?t+1:n.getTime()>=s.getTime()?t:t-1}function RW(e){br(1,arguments);var n=M3(e),t=new Date(0);t.setUTCFullYear(n,0,4),t.setUTCHours(0,0,0,0);var r=bp(t);return r}var OW=6048e5;function LW(e){br(1,arguments);var n=ra(e),t=bp(n).getTime()-RW(n).getTime();return Math.round(t/OW)+1}var UW={};function n0(){return UW}function Cp(e,n){var t,r,i,a,s,o,l,u;br(1,arguments);var d=n0(),f=Vo((t=(r=(i=(a=n==null?void 0:n.weekStartsOn)!==null&&a!==void 0?a:n==null||(s=n.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&i!==void 0?i:d.weekStartsOn)!==null&&r!==void 0?r:(l=d.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&t!==void 0?t:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=ra(e),p=m.getUTCDay(),E=(p<f?7:0)+p-f;return m.setUTCDate(m.getUTCDate()-E),m.setUTCHours(0,0,0,0),m}function N3(e,n){var t,r,i,a,s,o,l,u;br(1,arguments);var d=ra(e),f=d.getUTCFullYear(),m=n0(),p=Vo((t=(r=(i=(a=n==null?void 0:n.firstWeekContainsDate)!==null&&a!==void 0?a:n==null||(s=n.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&i!==void 0?i:m.firstWeekContainsDate)!==null&&r!==void 0?r:(l=m.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&t!==void 0?t:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var E=new Date(0);E.setUTCFullYear(f+1,0,p),E.setUTCHours(0,0,0,0);var _=Cp(E,n),b=new Date(0);b.setUTCFullYear(f,0,p),b.setUTCHours(0,0,0,0);var C=Cp(b,n);return d.getTime()>=_.getTime()?f+1:d.getTime()>=C.getTime()?f:f-1}function DW(e,n){var t,r,i,a,s,o,l,u;br(1,arguments);var d=n0(),f=Vo((t=(r=(i=(a=n==null?void 0:n.firstWeekContainsDate)!==null&&a!==void 0?a:n==null||(s=n.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&i!==void 0?i:d.firstWeekContainsDate)!==null&&r!==void 0?r:(l=d.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&t!==void 0?t:1),m=N3(e,n),p=new Date(0);p.setUTCFullYear(m,0,f),p.setUTCHours(0,0,0,0);var E=Cp(p,n);return E}var kW=6048e5;function PW(e,n){br(1,arguments);var t=ra(e),r=Cp(t,n).getTime()-DW(t,n).getTime();return Math.round(r/kW)+1}function lr(e,n){for(var t=e<0?"-":"",r=Math.abs(e).toString();r.length<n;)r="0"+r;return t+r}var Il={y:function(n,t){var r=n.getUTCFullYear(),i=r>0?r:1-r;return lr(t==="yy"?i%100:i,t.length)},M:function(n,t){var r=n.getUTCMonth();return t==="M"?String(r+1):lr(r+1,2)},d:function(n,t){return lr(n.getUTCDate(),t.length)},a:function(n,t){var r=n.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(n,t){return lr(n.getUTCHours()%12||12,t.length)},H:function(n,t){return lr(n.getUTCHours(),t.length)},m:function(n,t){return lr(n.getUTCMinutes(),t.length)},s:function(n,t){return lr(n.getUTCSeconds(),t.length)},S:function(n,t){var r=t.length,i=n.getUTCMilliseconds(),a=Math.floor(i*Math.pow(10,r-3));return lr(a,t.length)}},Qc={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},xW={G:function(n,t,r){var i=n.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(n,t,r){if(t==="yo"){var i=n.getUTCFullYear(),a=i>0?i:1-i;return r.ordinalNumber(a,{unit:"year"})}return Il.y(n,t)},Y:function(n,t,r,i){var a=N3(n,i),s=a>0?a:1-a;if(t==="YY"){var o=s%100;return lr(o,2)}return t==="Yo"?r.ordinalNumber(s,{unit:"year"}):lr(s,t.length)},R:function(n,t){var r=M3(n);return lr(r,t.length)},u:function(n,t){var r=n.getUTCFullYear();return lr(r,t.length)},Q:function(n,t,r){var i=Math.ceil((n.getUTCMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return lr(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(n,t,r){var i=Math.ceil((n.getUTCMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return lr(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(n,t,r){var i=n.getUTCMonth();switch(t){case"M":case"MM":return Il.M(n,t);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(n,t,r){var i=n.getUTCMonth();switch(t){case"L":return String(i+1);case"LL":return lr(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(n,t,r,i){var a=PW(n,i);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):lr(a,t.length)},I:function(n,t,r){var i=LW(n);return t==="Io"?r.ordinalNumber(i,{unit:"week"}):lr(i,t.length)},d:function(n,t,r){return t==="do"?r.ordinalNumber(n.getUTCDate(),{unit:"date"}):Il.d(n,t)},D:function(n,t,r){var i=wW(n);return t==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):lr(i,t.length)},E:function(n,t,r){var i=n.getUTCDay();switch(t){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(n,t,r,i){var a=n.getUTCDay(),s=(a-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return lr(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(n,t,r,i){var a=n.getUTCDay(),s=(a-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return lr(s,t.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(n,t,r){var i=n.getUTCDay(),a=i===0?7:i;switch(t){case"i":return String(a);case"ii":return lr(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(n,t,r){var i=n.getUTCHours(),a=i/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(n,t,r){var i=n.getUTCHours(),a;switch(i===12?a=Qc.noon:i===0?a=Qc.midnight:a=i/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(n,t,r){var i=n.getUTCHours(),a;switch(i>=17?a=Qc.evening:i>=12?a=Qc.afternoon:i>=4?a=Qc.morning:a=Qc.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(n,t,r){if(t==="ho"){var i=n.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return Il.h(n,t)},H:function(n,t,r){return t==="Ho"?r.ordinalNumber(n.getUTCHours(),{unit:"hour"}):Il.H(n,t)},K:function(n,t,r){var i=n.getUTCHours()%12;return t==="Ko"?r.ordinalNumber(i,{unit:"hour"}):lr(i,t.length)},k:function(n,t,r){var i=n.getUTCHours();return i===0&&(i=24),t==="ko"?r.ordinalNumber(i,{unit:"hour"}):lr(i,t.length)},m:function(n,t,r){return t==="mo"?r.ordinalNumber(n.getUTCMinutes(),{unit:"minute"}):Il.m(n,t)},s:function(n,t,r){return t==="so"?r.ordinalNumber(n.getUTCSeconds(),{unit:"second"}):Il.s(n,t)},S:function(n,t){return Il.S(n,t)},X:function(n,t,r,i){var a=i._originalDate||n,s=a.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return CA(s);case"XXXX":case"XX":return Mu(s);case"XXXXX":case"XXX":default:return Mu(s,":")}},x:function(n,t,r,i){var a=i._originalDate||n,s=a.getTimezoneOffset();switch(t){case"x":return CA(s);case"xxxx":case"xx":return Mu(s);case"xxxxx":case"xxx":default:return Mu(s,":")}},O:function(n,t,r,i){var a=i._originalDate||n,s=a.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+bA(s,":");case"OOOO":default:return"GMT"+Mu(s,":")}},z:function(n,t,r,i){var a=i._originalDate||n,s=a.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+bA(s,":");case"zzzz":default:return"GMT"+Mu(s,":")}},t:function(n,t,r,i){var a=i._originalDate||n,s=Math.floor(a.getTime()/1e3);return lr(s,t.length)},T:function(n,t,r,i){var a=i._originalDate||n,s=a.getTime();return lr(s,t.length)}};function bA(e,n){var t=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),a=r%60;if(a===0)return t+String(i);var s=n;return t+String(i)+s+lr(a,2)}function CA(e,n){if(e%60===0){var t=e>0?"-":"+";return t+lr(Math.abs(e)/60,2)}return Mu(e,n)}function Mu(e,n){var t=n||"",r=e>0?"-":"+",i=Math.abs(e),a=lr(Math.floor(i/60),2),s=lr(i%60,2);return r+a+t+s}var SA=function(n,t){switch(n){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},I3=function(n,t){switch(n){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},FW=function(n,t){var r=n.match(/(P+)(p+)?/)||[],i=r[1],a=r[2];if(!a)return SA(n,t);var s;switch(i){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",SA(i,t)).replace("{{time}}",I3(a,t))},BW={p:I3,P:FW};function HW(e){var n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),e.getTime()-n.getTime()}var GW=["D","DD"],zW=["YY","YYYY"];function jW(e){return GW.indexOf(e)!==-1}function VW(e){return zW.indexOf(e)!==-1}function TA(e,n,t){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(n,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(n,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(n,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(n,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var $W=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,qW=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,KW=/^'([^]*?)'?$/,WW=/''/g,QW=/[a-zA-Z]/;function Ar(e,n,t){var r,i,a,s,o,l,u,d,f,m,p,E,_,b,C,y,T,N;br(2,arguments);var w=String(n),O=n0(),L=(r=(i=t==null?void 0:t.locale)!==null&&i!==void 0?i:O.locale)!==null&&r!==void 0?r:OO,P=Vo((a=(s=(o=(l=t==null?void 0:t.firstWeekContainsDate)!==null&&l!==void 0?l:t==null||(u=t.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&o!==void 0?o:O.firstWeekContainsDate)!==null&&s!==void 0?s:(f=O.locale)===null||f===void 0||(m=f.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(P>=1&&P<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var U=Vo((p=(E=(_=(b=t==null?void 0:t.weekStartsOn)!==null&&b!==void 0?b:t==null||(C=t.locale)===null||C===void 0||(y=C.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&_!==void 0?_:O.weekStartsOn)!==null&&E!==void 0?E:(T=O.locale)===null||T===void 0||(N=T.options)===null||N===void 0?void 0:N.weekStartsOn)!==null&&p!==void 0?p:0);if(!(U>=0&&U<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!L.localize)throw new RangeError("locale must contain localize property");if(!L.formatLong)throw new RangeError("locale must contain formatLong property");var B=ra(e);if(!MW(B))throw new RangeError("Invalid time value");var F=HW(B),H=IW(B,F),G={firstWeekContainsDate:P,weekStartsOn:U,locale:L,_originalDate:B},j=w.match(qW).map(function(x){var V=x[0];if(V==="p"||V==="P"){var K=BW[V];return K(x,L.formatLong)}return x}).join("").match($W).map(function(x){if(x==="''")return"'";var V=x[0];if(V==="'")return YW(x);var K=xW[V];if(K)return!(t!=null&&t.useAdditionalWeekYearTokens)&&VW(x)&&TA(x,n,String(e)),!(t!=null&&t.useAdditionalDayOfYearTokens)&&jW(x)&&TA(x,n,String(e)),K(H,x,L.localize,G);if(V.match(QW))throw new RangeError("Format string contains an unescaped latin alphabet character `"+V+"`");return x}).join("");return j}function YW(e){var n=e.match(KW);return n?n[1].replace(WW,"'"):e}function MA(e){if(e){var n=e.querySelectorAll("[data-sb-mention='true']"),t=Array.from(n);return t}return[]}function jf(e,n){var t=e.ref,r=n.logger,i=t.current,a=M.useState([]),s=a[0],o=a[1];return M.useLayoutEffect(function(){if(i){var l=MA(i);o(l)}},[i]),M.useEffect(function(){var l={childList:!0,subtree:!0},u=function(f){var m=f.length>0;m&&o(MA(i))},d=new MutationObserver(u);return i&&d.observe(i,l),function(){try{d.disconnect()}catch{r.error("useDirtyGetMentions: observer disconnect failed",{observer:d})}}},[i]),s}var sC=function(e){var n=e.children,t=n===void 0?void 0:n,r=e.className,i=r===void 0?"":r,a=e.separatorColor,s=a===void 0?ma.ONBACKGROUND_4:a;return v.createElement("div",{className:Ne(Ne([],Array.isArray(i)?i:[i],!0),["sendbird-separator"],!1).join(" ")},v.createElement("div",{className:["sendbird-separator__left","".concat(Xy(s),"--background-color")].join(" ")}),v.createElement("div",{className:"sendbird-separator__text"},t||v.createElement(Me,{type:be.CAPTION_2,color:de.ONBACKGROUND_2},"Date Separator")),v.createElement("div",{className:["sendbird-separator__right","".concat(Xy(s),"--background-color")].join(" ")}))},ei={Enter:"Enter",ArrowUp:"ArrowUp",ArrowDown:"ArrowDown",Backspace:"Backspace"},Zy={ElementNode:1,TextNode:3},F_={Span:"SPAN",Br:"BR",Div:"DIV"};/*! @license DOMPurify 3.2.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.5/LICENSE */const{entries:A3,setPrototypeOf:NA,isFrozen:XW,getPrototypeOf:ZW,getOwnPropertyDescriptor:JW}=Object;let{freeze:ia,seal:us,create:w3}=Object,{apply:Jy,construct:eb}=typeof Reflect<"u"&&Reflect;ia||(ia=function(n){return n});us||(us=function(n){return n});Jy||(Jy=function(n,t,r){return n.apply(t,r)});eb||(eb=function(n,t){return new n(...t)});const gm=aa(Array.prototype.forEach),eQ=aa(Array.prototype.lastIndexOf),IA=aa(Array.prototype.pop),Rh=aa(Array.prototype.push),tQ=aa(Array.prototype.splice),Gm=aa(String.prototype.toLowerCase),B_=aa(String.prototype.toString),AA=aa(String.prototype.match),Oh=aa(String.prototype.replace),nQ=aa(String.prototype.indexOf),rQ=aa(String.prototype.trim),Ns=aa(Object.prototype.hasOwnProperty),Yi=aa(RegExp.prototype.test),Lh=iQ(TypeError);function aa(e){return function(n){n instanceof RegExp&&(n.lastIndex=0);for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return Jy(e,n,r)}}function iQ(e){return function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return eb(e,t)}}function jn(e,n){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Gm;NA&&NA(e,null);let r=n.length;for(;r--;){let i=n[r];if(typeof i=="string"){const a=t(i);a!==i&&(XW(n)||(n[r]=a),i=a)}e[i]=!0}return e}function aQ(e){for(let n=0;n<e.length;n++)Ns(e,n)||(e[n]=null);return e}function Nu(e){const n=w3(null);for(const[t,r]of A3(e))Ns(e,t)&&(Array.isArray(r)?n[t]=aQ(r):r&&typeof r=="object"&&r.constructor===Object?n[t]=Nu(r):n[t]=r);return n}function Uh(e,n){for(;e!==null;){const r=JW(e,n);if(r){if(r.get)return aa(r.get);if(typeof r.value=="function")return aa(r.value)}e=ZW(e)}function t(){return null}return t}const wA=ia(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),H_=ia(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),G_=ia(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),sQ=ia(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),z_=ia(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),oQ=ia(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),RA=ia(["#text"]),OA=ia(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),j_=ia(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),LA=ia(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),_m=ia(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),lQ=us(/\{\{[\w\W]*|[\w\W]*\}\}/gm),uQ=us(/<%[\w\W]*|[\w\W]*%>/gm),cQ=us(/\$\{[\w\W]*/gm),dQ=us(/^data-[\-\w.\u00B7-\uFFFF]+$/),hQ=us(/^aria-[\-\w]+$/),R3=us(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),fQ=us(/^(?:\w+script|data):/i),vQ=us(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),O3=us(/^html$/i),mQ=us(/^[a-z][.\w]*(-[.\w]+)+$/i);var UA=Object.freeze({__proto__:null,ARIA_ATTR:hQ,ATTR_WHITESPACE:vQ,CUSTOM_ELEMENT:mQ,DATA_ATTR:dQ,DOCTYPE_NAME:O3,ERB_EXPR:uQ,IS_ALLOWED_URI:R3,IS_SCRIPT_OR_DATA:fQ,MUSTACHE_EXPR:lQ,TMPLIT_EXPR:cQ});const Dh={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},pQ=function(){return typeof window>"u"?null:window},gQ=function(n,t){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(r=t.getAttribute(i));const a="dompurify"+(r?"#"+r:"");try{return n.createPolicy(a,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},DA=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function L3(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pQ();const n=tt=>L3(tt);if(n.version="3.2.5",n.removed=[],!e||!e.document||e.document.nodeType!==Dh.document||!e.Element)return n.isSupported=!1,n;let{document:t}=e;const r=t,i=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:s,Node:o,Element:l,NodeFilter:u,NamedNodeMap:d=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:f,DOMParser:m,trustedTypes:p}=e,E=l.prototype,_=Uh(E,"cloneNode"),b=Uh(E,"remove"),C=Uh(E,"nextSibling"),y=Uh(E,"childNodes"),T=Uh(E,"parentNode");if(typeof s=="function"){const tt=t.createElement("template");tt.content&&tt.content.ownerDocument&&(t=tt.content.ownerDocument)}let N,w="";const{implementation:O,createNodeIterator:L,createDocumentFragment:P,getElementsByTagName:U}=t,{importNode:B}=r;let F=DA();n.isSupported=typeof A3=="function"&&typeof T=="function"&&O&&O.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:H,ERB_EXPR:G,TMPLIT_EXPR:j,DATA_ATTR:x,ARIA_ATTR:V,IS_SCRIPT_OR_DATA:K,ATTR_WHITESPACE:W,CUSTOM_ELEMENT:Q}=UA;let{IS_ALLOWED_URI:J}=UA,$=null;const te=jn({},[...wA,...H_,...G_,...z_,...RA]);let re=null;const ve=jn({},[...OA,...j_,...LA,..._m]);let ie=Object.seal(w3(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),le=null,Ae=null,oe=!0,he=!0,me=!1,Be=!0,pe=!1,ye=!0,Ee=!1,Ue=!1,Ye=!1,De=!1,We=!1,Je=!1,Le=!0,He=!1;const At="user-content-";let Ve=!0,st=!1,mt={},et=null;const St=jn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Rt=null;const xe=jn({},["audio","video","img","source","image","track"]);let Ht=null;const Xt=jn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ke="http://www.w3.org/1998/Math/MathML",Ct="http://www.w3.org/2000/svg",Dt="http://www.w3.org/1999/xhtml";let Vt=Dt,rn=!1,Zt=null;const Mn=jn({},[Ke,Ct,Dt],B_);let cn=jn({},["mi","mo","mn","ms","mtext"]),ht=jn({},["annotation-xml"]);const ct=jn({},["title","style","font","a","script"]);let dt=null;const ke=["application/xhtml+xml","text/html"],ge="text/html";let Xe=null,Et=null;const Pt=t.createElement("form"),Jt=function(ae){return ae instanceof RegExp||ae instanceof Function},Tt=function(){let ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Et&&Et===ae)){if((!ae||typeof ae!="object")&&(ae={}),ae=Nu(ae),dt=ke.indexOf(ae.PARSER_MEDIA_TYPE)===-1?ge:ae.PARSER_MEDIA_TYPE,Xe=dt==="application/xhtml+xml"?B_:Gm,$=Ns(ae,"ALLOWED_TAGS")?jn({},ae.ALLOWED_TAGS,Xe):te,re=Ns(ae,"ALLOWED_ATTR")?jn({},ae.ALLOWED_ATTR,Xe):ve,Zt=Ns(ae,"ALLOWED_NAMESPACES")?jn({},ae.ALLOWED_NAMESPACES,B_):Mn,Ht=Ns(ae,"ADD_URI_SAFE_ATTR")?jn(Nu(Xt),ae.ADD_URI_SAFE_ATTR,Xe):Xt,Rt=Ns(ae,"ADD_DATA_URI_TAGS")?jn(Nu(xe),ae.ADD_DATA_URI_TAGS,Xe):xe,et=Ns(ae,"FORBID_CONTENTS")?jn({},ae.FORBID_CONTENTS,Xe):St,le=Ns(ae,"FORBID_TAGS")?jn({},ae.FORBID_TAGS,Xe):{},Ae=Ns(ae,"FORBID_ATTR")?jn({},ae.FORBID_ATTR,Xe):{},mt=Ns(ae,"USE_PROFILES")?ae.USE_PROFILES:!1,oe=ae.ALLOW_ARIA_ATTR!==!1,he=ae.ALLOW_DATA_ATTR!==!1,me=ae.ALLOW_UNKNOWN_PROTOCOLS||!1,Be=ae.ALLOW_SELF_CLOSE_IN_ATTR!==!1,pe=ae.SAFE_FOR_TEMPLATES||!1,ye=ae.SAFE_FOR_XML!==!1,Ee=ae.WHOLE_DOCUMENT||!1,De=ae.RETURN_DOM||!1,We=ae.RETURN_DOM_FRAGMENT||!1,Je=ae.RETURN_TRUSTED_TYPE||!1,Ye=ae.FORCE_BODY||!1,Le=ae.SANITIZE_DOM!==!1,He=ae.SANITIZE_NAMED_PROPS||!1,Ve=ae.KEEP_CONTENT!==!1,st=ae.IN_PLACE||!1,J=ae.ALLOWED_URI_REGEXP||R3,Vt=ae.NAMESPACE||Dt,cn=ae.MATHML_TEXT_INTEGRATION_POINTS||cn,ht=ae.HTML_INTEGRATION_POINTS||ht,ie=ae.CUSTOM_ELEMENT_HANDLING||{},ae.CUSTOM_ELEMENT_HANDLING&&Jt(ae.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ie.tagNameCheck=ae.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ae.CUSTOM_ELEMENT_HANDLING&&Jt(ae.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ie.attributeNameCheck=ae.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ae.CUSTOM_ELEMENT_HANDLING&&typeof ae.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ie.allowCustomizedBuiltInElements=ae.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),pe&&(he=!1),We&&(De=!0),mt&&($=jn({},RA),re=[],mt.html===!0&&(jn($,wA),jn(re,OA)),mt.svg===!0&&(jn($,H_),jn(re,j_),jn(re,_m)),mt.svgFilters===!0&&(jn($,G_),jn(re,j_),jn(re,_m)),mt.mathMl===!0&&(jn($,z_),jn(re,LA),jn(re,_m))),ae.ADD_TAGS&&($===te&&($=Nu($)),jn($,ae.ADD_TAGS,Xe)),ae.ADD_ATTR&&(re===ve&&(re=Nu(re)),jn(re,ae.ADD_ATTR,Xe)),ae.ADD_URI_SAFE_ATTR&&jn(Ht,ae.ADD_URI_SAFE_ATTR,Xe),ae.FORBID_CONTENTS&&(et===St&&(et=Nu(et)),jn(et,ae.FORBID_CONTENTS,Xe)),Ve&&($["#text"]=!0),Ee&&jn($,["html","head","body"]),$.table&&(jn($,["tbody"]),delete le.tbody),ae.TRUSTED_TYPES_POLICY){if(typeof ae.TRUSTED_TYPES_POLICY.createHTML!="function")throw Lh('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ae.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Lh('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');N=ae.TRUSTED_TYPES_POLICY,w=N.createHTML("")}else N===void 0&&(N=gQ(p,i)),N!==null&&typeof w=="string"&&(w=N.createHTML(""));ia&&ia(ae),Et=ae}},vn=jn({},[...H_,...G_,...sQ]),Sn=jn({},[...z_,...oQ]),pt=function(ae){let je=T(ae);(!je||!je.tagName)&&(je={namespaceURI:Vt,tagName:"template"});const gt=Gm(ae.tagName),sn=Gm(je.tagName);return Zt[ae.namespaceURI]?ae.namespaceURI===Ct?je.namespaceURI===Dt?gt==="svg":je.namespaceURI===Ke?gt==="svg"&&(sn==="annotation-xml"||cn[sn]):!!vn[gt]:ae.namespaceURI===Ke?je.namespaceURI===Dt?gt==="math":je.namespaceURI===Ct?gt==="math"&&ht[sn]:!!Sn[gt]:ae.namespaceURI===Dt?je.namespaceURI===Ct&&!ht[sn]||je.namespaceURI===Ke&&!cn[sn]?!1:!Sn[gt]&&(ct[gt]||!vn[gt]):!!(dt==="application/xhtml+xml"&&Zt[ae.namespaceURI]):!1},Mt=function(ae){Rh(n.removed,{element:ae});try{T(ae).removeChild(ae)}catch{b(ae)}},dn=function(ae,je){try{Rh(n.removed,{attribute:je.getAttributeNode(ae),from:je})}catch{Rh(n.removed,{attribute:null,from:je})}if(je.removeAttribute(ae),ae==="is")if(De||We)try{Mt(je)}catch{}else try{je.setAttribute(ae,"")}catch{}},In=function(ae){let je=null,gt=null;if(Ye)ae="<remove></remove>"+ae;else{const qt=AA(ae,/^[\r\n\t ]+/);gt=qt&&qt[0]}dt==="application/xhtml+xml"&&Vt===Dt&&(ae='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ae+"</body></html>");const sn=N?N.createHTML(ae):ae;if(Vt===Dt)try{je=new m().parseFromString(sn,dt)}catch{}if(!je||!je.documentElement){je=O.createDocument(Vt,"template",null);try{je.documentElement.innerHTML=rn?w:sn}catch{}}const bn=je.body||je.documentElement;return ae&&gt&&bn.insertBefore(t.createTextNode(gt),bn.childNodes[0]||null),Vt===Dt?U.call(je,Ee?"html":"body")[0]:Ee?je.documentElement:bn},Ze=function(ae){return L.call(ae.ownerDocument||ae,ae,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},ot=function(ae){return ae instanceof f&&(typeof ae.nodeName!="string"||typeof ae.textContent!="string"||typeof ae.removeChild!="function"||!(ae.attributes instanceof d)||typeof ae.removeAttribute!="function"||typeof ae.setAttribute!="function"||typeof ae.namespaceURI!="string"||typeof ae.insertBefore!="function"||typeof ae.hasChildNodes!="function")},Fe=function(ae){return typeof o=="function"&&ae instanceof o};function Ot(tt,ae,je){gm(tt,gt=>{gt.call(n,ae,je,Et)})}const Lt=function(ae){let je=null;if(Ot(F.beforeSanitizeElements,ae,null),ot(ae))return Mt(ae),!0;const gt=Xe(ae.nodeName);if(Ot(F.uponSanitizeElement,ae,{tagName:gt,allowedTags:$}),ae.hasChildNodes()&&!Fe(ae.firstElementChild)&&Yi(/<[/\w!]/g,ae.innerHTML)&&Yi(/<[/\w!]/g,ae.textContent)||ae.nodeType===Dh.progressingInstruction||ye&&ae.nodeType===Dh.comment&&Yi(/<[/\w]/g,ae.data))return Mt(ae),!0;if(!$[gt]||le[gt]){if(!le[gt]&&an(gt)&&(ie.tagNameCheck instanceof RegExp&&Yi(ie.tagNameCheck,gt)||ie.tagNameCheck instanceof Function&&ie.tagNameCheck(gt)))return!1;if(Ve&&!et[gt]){const sn=T(ae)||ae.parentNode,bn=y(ae)||ae.childNodes;if(bn&&sn){const qt=bn.length;for(let Fn=qt-1;Fn>=0;--Fn){const sr=_(bn[Fn],!0);sr.__removalCount=(ae.__removalCount||0)+1,sn.insertBefore(sr,C(ae))}}}return Mt(ae),!0}return ae instanceof l&&!pt(ae)||(gt==="noscript"||gt==="noembed"||gt==="noframes")&&Yi(/<\/no(script|embed|frames)/i,ae.innerHTML)?(Mt(ae),!0):(pe&&ae.nodeType===Dh.text&&(je=ae.textContent,gm([H,G,j],sn=>{je=Oh(je,sn," ")}),ae.textContent!==je&&(Rh(n.removed,{element:ae.cloneNode()}),ae.textContent=je)),Ot(F.afterSanitizeElements,ae,null),!1)},$t=function(ae,je,gt){if(Le&&(je==="id"||je==="name")&&(gt in t||gt in Pt))return!1;if(!(he&&!Ae[je]&&Yi(x,je))){if(!(oe&&Yi(V,je))){if(!re[je]||Ae[je]){if(!(an(ae)&&(ie.tagNameCheck instanceof RegExp&&Yi(ie.tagNameCheck,ae)||ie.tagNameCheck instanceof Function&&ie.tagNameCheck(ae))&&(ie.attributeNameCheck instanceof RegExp&&Yi(ie.attributeNameCheck,je)||ie.attributeNameCheck instanceof Function&&ie.attributeNameCheck(je))||je==="is"&&ie.allowCustomizedBuiltInElements&&(ie.tagNameCheck instanceof RegExp&&Yi(ie.tagNameCheck,gt)||ie.tagNameCheck instanceof Function&&ie.tagNameCheck(gt))))return!1}else if(!Ht[je]){if(!Yi(J,Oh(gt,W,""))){if(!((je==="src"||je==="xlink:href"||je==="href")&&ae!=="script"&&nQ(gt,"data:")===0&&Rt[ae])){if(!(me&&!Yi(K,Oh(gt,W,"")))){if(gt)return!1}}}}}}return!0},an=function(ae){return ae!=="annotation-xml"&&AA(ae,Q)},Nn=function(ae){Ot(F.beforeSanitizeAttributes,ae,null);const{attributes:je}=ae;if(!je||ot(ae))return;const gt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:re,forceKeepAttr:void 0};let sn=je.length;for(;sn--;){const bn=je[sn],{name:qt,namespaceURI:Fn,value:sr}=bn,Pn=Xe(qt);let bt=qt==="value"?sr:rQ(sr);if(gt.attrName=Pn,gt.attrValue=bt,gt.keepAttr=!0,gt.forceKeepAttr=void 0,Ot(F.uponSanitizeAttribute,ae,gt),bt=gt.attrValue,He&&(Pn==="id"||Pn==="name")&&(dn(qt,ae),bt=At+bt),ye&&Yi(/((--!?|])>)|<\/(style|title)/i,bt)){dn(qt,ae);continue}if(gt.forceKeepAttr||(dn(qt,ae),!gt.keepAttr))continue;if(!Be&&Yi(/\/>/i,bt)){dn(qt,ae);continue}pe&&gm([H,G,j],mn=>{bt=Oh(bt,mn," ")});const un=Xe(ae.nodeName);if($t(un,Pn,bt)){if(N&&typeof p=="object"&&typeof p.getAttributeType=="function"&&!Fn)switch(p.getAttributeType(un,Pn)){case"TrustedHTML":{bt=N.createHTML(bt);break}case"TrustedScriptURL":{bt=N.createScriptURL(bt);break}}try{Fn?ae.setAttributeNS(Fn,qt,bt):ae.setAttribute(qt,bt),ot(ae)?Mt(ae):IA(n.removed)}catch{}}}Ot(F.afterSanitizeAttributes,ae,null)},xn=function tt(ae){let je=null;const gt=Ze(ae);for(Ot(F.beforeSanitizeShadowDOM,ae,null);je=gt.nextNode();)Ot(F.uponSanitizeShadowNode,je,null),Lt(je),Nn(je),je.content instanceof a&&tt(je.content);Ot(F.afterSanitizeShadowDOM,ae,null)};return n.sanitize=function(tt){let ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},je=null,gt=null,sn=null,bn=null;if(rn=!tt,rn&&(tt="<!-->"),typeof tt!="string"&&!Fe(tt))if(typeof tt.toString=="function"){if(tt=tt.toString(),typeof tt!="string")throw Lh("dirty is not a string, aborting")}else throw Lh("toString is not a function");if(!n.isSupported)return tt;if(Ue||Tt(ae),n.removed=[],typeof tt=="string"&&(st=!1),st){if(tt.nodeName){const sr=Xe(tt.nodeName);if(!$[sr]||le[sr])throw Lh("root node is forbidden and cannot be sanitized in-place")}}else if(tt instanceof o)je=In("<!---->"),gt=je.ownerDocument.importNode(tt,!0),gt.nodeType===Dh.element&&gt.nodeName==="BODY"||gt.nodeName==="HTML"?je=gt:je.appendChild(gt);else{if(!De&&!pe&&!Ee&&tt.indexOf("<")===-1)return N&&Je?N.createHTML(tt):tt;if(je=In(tt),!je)return De?null:Je?w:""}je&&Ye&&Mt(je.firstChild);const qt=Ze(st?tt:je);for(;sn=qt.nextNode();)Lt(sn),Nn(sn),sn.content instanceof a&&xn(sn.content);if(st)return tt;if(De){if(We)for(bn=P.call(je.ownerDocument);je.firstChild;)bn.appendChild(je.firstChild);else bn=je;return(re.shadowroot||re.shadowrootmode)&&(bn=B.call(r,bn,!0)),bn}let Fn=Ee?je.outerHTML:je.innerHTML;return Ee&&$["!doctype"]&&je.ownerDocument&&je.ownerDocument.doctype&&je.ownerDocument.doctype.name&&Yi(O3,je.ownerDocument.doctype.name)&&(Fn="<!DOCTYPE "+je.ownerDocument.doctype.name+`>
`+Fn),pe&&gm([H,G,j],sr=>{Fn=Oh(Fn,sr," ")}),N&&Je?N.createHTML(Fn):Fn},n.setConfig=function(){let tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Tt(tt),Ue=!0},n.clearConfig=function(){Et=null,Ue=!1},n.isValidAttribute=function(tt,ae,je){Et||Tt({});const gt=Xe(tt),sn=Xe(ae);return $t(gt,sn,je)},n.addHook=function(tt,ae){typeof ae=="function"&&Rh(F[tt],ae)},n.removeHook=function(tt,ae){if(ae!==void 0){const je=eQ(F[tt],ae);return je===-1?void 0:tQ(F[tt],je,1)[0]}return IA(F[tt])},n.removeHooks=function(tt){F[tt]=[]},n.removeAllHooks=function(){F=DA()},n}var U3=L3(),D3="sendbird-mention-user-label",oC="sendbird-text-message-item-body",k3="sendbird-og-message-item-body__text-bubble";function tb(e){var n=e.userId,t=e.nickname,r='<span data-userid="'.concat(n,'" data-sb-mention="true" class="').concat(D3,'">').concat(t,"</span>"),i=U3(window),a=i.sanitize(r),s=a.split(" "),o=s[0],l=s.slice(1),u=Ne([o,'contenteditable="false"'],l,!0).join(" ");return u}var Rf=function(e){return e===void 0&&(e=""),e?e.replace(/[<>]/g,function(n){return n==="<"?"&#60;":"&#62;"}):""},zm=function(e){return e?Array.from(e):[]};function _Q(e){var n;return e&&((n=e.isGroupChannel)===null||n===void 0?void 0:n.call(e))&&!e.isBroadcast&&!e.isSuper}function V_(e){return e.nodeType===Zy.ElementNode}function kA(e){var n="",t="";return e.forEach(function(r){if(V_(r)&&r.nodeName===F_.Span){var i=r.innerText,a=r.dataset,s=a===void 0?{}:a,o=s.userid,l=o===void 0?"":o;n+=i,t+="".concat(mf,"{").concat(l,"}")}else if(V_(r)&&r.nodeName===F_.Br)n+=`
`,t+=`
`;else if(V_(r)&&r.nodeName===F_.Div){var u=r.textContent,d=u===void 0?"":u;n+=`
`.concat(d),t+=`
`.concat(d)}else{var f=r.textContent,d=f===void 0?"":f;n+=d,t+=d}}),{messageText:n,mentionTemplate:t}}function EQ(e){var n=e.map(function(t){var r=t.text,i=t.userId;return i?tb({userId:i,nickname:r}):Rf(r)}).join(" ").concat(" ");document.execCommand("insertHTML",!1,n)}var P3="sendbird-word__mention",x3="sendbird-mention-user-label",F3=".".concat(P3,", .").concat(x3);function PA(e,n){var t=Ne([e],Array.from(e.querySelectorAll(n)),!0).find(function(r){return r.matches(n)});return t}function yQ(e){var n=PA(e,".".concat(k3));if(n)return zm(n.childNodes);var t=PA(e,".".concat(oC));return zm(t?t.childNodes:e.childNodes)}function bQ(e){return!!(e!=null&&e.querySelector(F3))}function CQ(e){var n=e==null?void 0:e.reduce(function(t,r){var i,a,s,o=r==null?void 0:r.innerText;if(r instanceof Text&&(s=!1,o=(i=r.textContent)!==null&&i!==void 0?i:""),r instanceof HTMLElement&&(s=r.classList.contains(P3)||r.classList.contains(x3)?r:r.querySelector(F3)),s){var l=r==null?void 0:r.innerText,u=(a=s.dataset)===null||a===void 0?void 0:a.userid;return Ne(Ne([],t,!0),[{text:l,userId:u}],!1)}return Ne(Ne([],t,!0),[{text:o}],!1)},[]);return n}function SQ(e,n){var t={},r=n.members;return e.forEach(function(i){if(i.userId){var a=r.find(function(s){return s.userId===i.userId});a&&(t[i.userId]=a)}}),Object.values(t)}function xA(e){var n=window.getSelection();if(n&&n.rangeCount>0){var t=n.getRangeAt(n.rangeCount-1);t.deleteContents();var r=document.createTextNode(e+"");t.insertNode(r),t.setStart(r,r.length),t.collapse(!0),n.removeAllRanges(),n.addRange(t)}}function TQ(e){var n=document.createElement("div");return n.innerHTML=e,n}function MQ(e){var n=e.ref,t=e.setIsInput,r=e.channel,i=e.setMentionedUsers;return M.useCallback(function(a){a.preventDefault();var s=a.clipboardData.getData("text/html"),o=a.clipboardData.getData("text")||NQ(a);if(!s){xA(Rf(o)),t(!0);return}var l=U3(window),u=l.sanitize(s),d=TQ(u);if(!bQ(d)){xA(Rf(o)),d.remove(),t(!0);return}var f=yQ(d),m=CQ(f),p=r.isGroupChannel()?SQ(m,r):[];i(p),EQ(m),d.remove(),t(!0)},[n,t,r,i])}function NQ(e){var n=e.clipboardData.getData("text/uri-list");return n.length===0?"":n.split(`
`).reduce(function(t,r){var i=r.trim();return i!==""&&!i.startsWith("#")&&(t+=i+`
`),t},"")}var Vf="@",Ur={string:"string",mention:"mention",url:"url",undetermined:"undetermined",markdown:"markdown"},IQ=/\[(.*?)\]\((.*?)\)|\*\*(.*?)\*\*/g;function AQ(e,n){var t=n||Vf;return RegExp("(".concat(e.map(function(r){var i=r.userId.replace(/([.*+?^${}()|[\]\\])/g,"\\$1");return"".concat(t,"\\{").concat(i,"\\}")}).join("|"),")"),"g")}function wQ(e){var n=e.tokens,t=e.mentionedUsers,r=t===void 0?[]:t,i=e.templatePrefix,a=i===void 0?Vf:i;if(!(r!=null&&r.length))return n;var s=AQ(r,a),o=n.map(function(l){if(l.type!==Ur.undetermined)return l;var u=l.value,d=u.split(s),f=d.map(function(m){if(m.match(s)){var p=r.find(function(_){return"@{".concat(_==null?void 0:_.userId,"}")===m}),E=(p==null?void 0:p.nickname)||"(No name)";return{value:E,type:Ur.mention,userId:p==null?void 0:p.userId}}else return{value:m,type:Ur.undetermined}});return f}).flat();return o}function RQ(e){var n=/(?:https?:\/\/|www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.(xn--)?[a-z]{2,20}\b([-a-zA-Z0-9@:%_+[\],.~#?&/=]*[-a-zA-Z0-9@:%_+~#?&/=])*/g,t=e.map(function(r){if(r.type!==Ur.undetermined)return r;var i=r.value,a=i===void 0?"":i,s=Array.from(a.matchAll(n)),o=s.map(function(d){var f,m=d[0],p=(f=d.index)!==null&&f!==void 0?f:0,E=p+m.length;return{text:m,start:p,end:E}}),l=[{value:a,type:Ur.string}],u=0;return o.forEach(function(d){var f=d.text,m=d.start,p=d.end,E=l.pop().value,_=E.slice(0,m-u),b=f,C=E.slice(p-u);_.length>0&&l.push({value:_,type:Ur.string}),l.push({value:b,type:Ur.url}),C.length>0&&l.push({value:C,type:Ur.string}),u=p}),l}).flat();return t}function lC(e){var n=e,t=[];return n.forEach(function(r){if(r.type===Ur.mention||r.type===Ur.markdown){t.push(r);return}var i=r.value,a=Array.from(i.matchAll(IQ)),s=a.map(function(d){var f,m=d[0],p=(f=d.index)!==null&&f!==void 0?f:0,E=p+m.length;return{text:m,start:p,end:E,groups:d.filter(function(_){return typeof _=="string"})}}),o=i,l=0;if(s.forEach(function(d){var f=d.text,m=d.start,p=d.end,E=d.groups,_={type:Ur.undetermined,value:o.slice(0,m-l)};t.push(_);var b;f.startsWith("[")?b="url":f.startsWith("**")&&(b="bold");var C={type:Ur.markdown,markdownType:b,value:f,groups:E};t.push(C),o=i.slice(p),l=p}),o){var u={type:Ur.undetermined,value:o};t.push(u)}}),t}function B3(e){var n=e.reduce(function(t,r){var i=t[t.length-1];return(i==null?void 0:i.type)===Ur.string&&r.type===Ur.string?(i.value="".concat(i.value).concat(r.value),t):Ne(Ne([],t,!0),[r],!1)},[]);return n}function Wl(e){var n=e.messageText,t=e.mentionedUsers,r=t===void 0?[]:t,i=e.templatePrefix,a=i===void 0?Vf:i,s=e.includeMarkdown,o=s===void 0?!1:s,l=[{type:Ur.undetermined,value:n}],u=wQ({tokens:l,mentionedUsers:r,templatePrefix:a}),d=RQ(o?lC(u):u),f=B3(d);return f}function OQ(e){var n=[{type:Ur.undetermined,value:e}],t=lC(n);return H3(t)}function H3(e){var n=e.map(function(t){return t.type===Ur.markdown?H3(nb({messageText:t.groups[1]})):t.value});return n.join("")}function nb(e){var n=e.messageText,t=[{type:Ur.undetermined,value:n}],r=B3(lC(t));return r}function LQ(e){var n="",t=e.split(`
`),r=t.map(function(a){var s,o,l=((s=a.match(/^\s*/))===null||s===void 0?void 0:s[0])||"",u=((o=a.match(/\s*$/))===null||o===void 0?void 0:o[0])||"",d=l.replace(/ /g,n),f=u.replace(/ /g,n);return d+a.trim()+f}),i=r.join(`
`);return i}var Sp;(function(e){e.BASE="base",e.GROUP="group",e.OPEN="open"})(Sp||(Sp={}));var UQ=function(e){var n=e.channel,t=e.config,r=ji(n==null?void 0:n.channelType).with(Sp.GROUP,function(){var i;return(i=t==null?void 0:t.groupChannel)===null||i===void 0?void 0:i.enableDocument}).with(Sp.OPEN,function(){var i;return(i=t==null?void 0:t.openChannel)===null||i===void 0?void 0:i.enableDocument}).otherwise(function(){return!0});return r},DQ="sendbird-message-input-text-field",Xi=function(){return null},$_=function(e){e&&e.current&&(e.current.innerHTML="")},FA={targetString:"",startNodeIndex:null,startOffsetIndex:null,endNodeIndex:null,endOffsetIndex:null},gc=v.forwardRef(function(e,n){var t,r,i,a,s,o=e.channel,l=e.className,u=l===void 0?"":l,d=e.messageFieldId,f=d===void 0?"":d,m=e.isEdit,p=m===void 0?!1:m,E=e.isMobile,_=E===void 0?!1:E,b=e.isMentionEnabled,C=b===void 0?!1:b,y=e.isVoiceMessageEnabled,T=y===void 0?!0:y,N=e.isSelectingMultipleFilesEnabled,w=N===void 0?!1:N,O=e.disabled,L=O===void 0?!1:O,P=e.message,U=P===void 0?null:P,B=e.placeholder,F=B===void 0?"":B,H=e.maxLength,G=H===void 0?5e3:H,j=e.onFileUpload,x=j===void 0?Xi:j,V=e.onSendMessage,K=V===void 0?Xi:V,W=e.onUpdateMessage,Q=W===void 0?Xi:W,J=e.onCancelEdit,$=J===void 0?Xi:J,te=e.onStartTyping,re=te===void 0?Xi:te,ve=e.channelUrl,ie=ve===void 0?"":ve,le=e.mentionSelectedUser,Ae=le===void 0?null:le,oe=e.onUserMentioned,he=oe===void 0?Xi:oe,me=e.onMentionStringChange,Be=me===void 0?Xi:me,pe=e.onMentionedUserIdsUpdated,ye=pe===void 0?Xi:pe,Ee=e.onVoiceMessageIconClick,Ue=Ee===void 0?Xi:Ee,Ye=e.onKeyUp,De=Ye===void 0?Xi:Ye,We=e.onKeyDown,Je=We===void 0?Xi:We,Le=e.renderFileUploadIcon,He=Le===void 0?Xi:Le,At=e.renderVoiceMessageIcon,Ve=At===void 0?Xi:At,st=e.renderSendMessageIcon,mt=st===void 0?Xi:st,et=e.setMentionedUsers,St=et===void 0?Xi:et,Rt=e.acceptableMimeTypes,xe=n&&"current"in n?n:M.useRef(null),Ht=M.useRef(null),Xt=f||DQ,Ke=Ut().stringSet,Ct=yt().state,Dt=Ct.config,Vt=Ct.eventHandlers,rn=UQ({channel:o,config:Dt}),Zt=M.useRef(),Mn=M.useState(!1),cn=Mn[0],ht=Mn[1],ct=M.useState([]),dt=ct[0],ke=ct[1],ge=M.useState(D({},FA)),Xe=ge[0],Et=ge[1],Pt=e==null?void 0:e.value;M.useEffect(function(){var Ze=xe==null?void 0:xe.current;ke([]),ht(Ze!=null&&Ze.textContent?Ze.textContent.trim().length>0:!1)},[Pt]),M.useEffect(function(){p||(ht(!1),$_(xe))},[ie]),M.useEffect(function(){var Ze,ot;if(p&&(U!=null&&U.messageId)){var Fe=xe==null?void 0:xe.current;if(C&&(U!=null&&U.mentionedUsers)&&U.mentionedUsers.length>0&&(U!=null&&U.mentionedMessageTemplate)&&U.mentionedMessageTemplate.length>0){var Ot=U.mentionedUsers,Lt=Ot===void 0?[]:Ot,$t=Wl({messageText:U==null?void 0:U.mentionedMessageTemplate,mentionedUsers:Lt,includeMarkdown:o.isGroupChannel()&&Dt.groupChannel.enableMarkdownForUserMessage});Fe&&(Fe.innerHTML=$t.map(function(an){if(an.type===Ur.mention){var Nn=Lt.find(function(tt){return tt.userId===an.userId}),xn="".concat(Vf).concat((Nn==null?void 0:Nn.nickname)||an.value||Ke.MENTION_NAME__NO_NAME);return tb({userId:an.userId,nickname:xn})}return Rf(an.value)}).join(""))}else{try{Fe&&(Fe.innerHTML=(Ze=Rf(U==null?void 0:U.message))!==null&&Ze!==void 0?Ze:"")}catch{}ke([])}ht(Fe!=null&&Fe.textContent?((ot=Fe==null?void 0:Fe.textContent)===null||ot===void 0?void 0:ot.trim().length)>0:!1)}},[p,U]);var Jt=M.useCallback(function(){var Ze,ot=xe==null?void 0:xe.current;if(C&&ot){var Fe=Array.from(ot.getElementsByClassName("sendbird-mention-user-label")).map(function(Ot){var Lt;return(Lt=Ot==null?void 0:Ot.dataset)===null||Lt===void 0?void 0:Lt.userid});(!NK(dt,Fe)||Fe.length===0)&&(ye(Fe),ke(Fe))}ht(ot!=null&&ot.textContent?((Ze=ot.textContent)===null||Ze===void 0?void 0:Ze.trim().length)>0:!1)},[Xe,C]);M.useEffect(function(){var Ze,ot,Fe,Ot;if(C&&Ae){var Lt=Xe.targetString,$t=Xe.startNodeIndex,an=Xe.startOffsetIndex,Nn=Xe.endNodeIndex,xn=Xe.endOffsetIndex,tt=xe==null?void 0:xe.current;if(Lt&&$t!==null&&an!==null&&xn!==null&&Nn!==null&&tt){var ae=zm(tt==null?void 0:tt.childNodes),je=(ot=(Ze=ae[$t])===null||Ze===void 0?void 0:Ze.textContent)!==null&&ot!==void 0?ot:"",gt=document.createTextNode(je.slice(0,an)),sn=(Ot=(Fe=ae[Nn])===null||Fe===void 0?void 0:Fe.textContent)!==null&&Ot!==void 0?Ot:"",bn=xn&&document.createTextNode("".concat(sn.slice(xn))),qt=tb({userId:Ae==null?void 0:Ae.userId,nickname:"".concat(mf).concat((Ae==null?void 0:Ae.nickname)||Ke.MENTION_NAME__NO_NAME)}),Fn=document.createElement("div");Fn.innerHTML=qt;var sr=Ne(Ne(Ne([],ae.slice(0,$t),!0),[gt,Fn.childNodes[0],bn],!1),ae.slice(Nn+1),!0);if(tt&&(tt.innerHTML="",sr.forEach(function(un){un&&tt.appendChild(un)})),he(Ae),window.getSelection||document.getSelection){var Pn=window.getSelection()||document.getSelection();Pn==null||Pn.removeAllRanges();var bt=new Range;bt.selectNodeContents(tt),bt.setStart(tt.childNodes[$t+2],1),bt.setEnd(tt.childNodes[$t+2],1),bt.collapse(!1),Pn==null||Pn.addRange(bt),tt.focus()}Et(D({},FA)),Jt()}}},[Ae,C]);var Tt=M.useCallback(function(){var Ze,ot,Fe=((Ze=window==null?void 0:window.getSelection)===null||Ze===void 0?void 0:Ze.call(window))||((ot=document==null?void 0:document.getSelection)===null||ot===void 0?void 0:ot.call(document)),Ot=xe==null?void 0:xe.current;if((Fe==null?void 0:Fe.anchorNode)===Ot&&Be(""),C&&Ot&&Fe&&Fe.anchorNode===Fe.focusNode&&Fe.anchorOffset===Fe.focusOffset)for(var Lt="",$t=null,an=null,Nn=function(ae){var je=Ot.childNodes[ae];if(je.nodeType===Zy.TextNode){var gt=function(){var Fn;return je===Fe.anchorNode?je!=null&&je.textContent?je==null?void 0:je.textContent.slice(0,Fe.anchorOffset):"":(Fn=je==null?void 0:je.textContent)!==null&&Fn!==void 0?Fn:""}();if(Lt.length>0)Lt+=gt;else{for(var sn=gt.lastIndexOf(mf),bn=sn-1;bn>-1&&gt[bn]===mf;bn-=1)sn=bn;sn>-1&&(Lt=gt,$t=ae,an=sn)}}else Lt="",$t=null,an=null;if(je===Fe.anchorNode){var qt=Lt&&an!==null?Lt.slice(an):"";return Et({targetString:qt,startNodeIndex:$t,startOffsetIndex:an,endNodeIndex:ae,endOffsetIndex:Fe.anchorOffset}),Be(qt),{value:void 0}}},xn=0;xn<Ot.childNodes.length;xn+=1){var tt=Nn(xn);if(typeof tt=="object")return tt.value}},[C]),vn=function(){var Ze,ot;try{var Fe=xe==null?void 0:xe.current;if(!p&&(Fe!=null&&Fe.textContent)){var Ot=kA(Fe.childNodes),Lt=Ot.messageText,$t=Ot.mentionTemplate,an={message:Lt,mentionTemplate:$t};K(an),$_(xe),lN(navigator.userAgent)?(Ht.current&&Ht.current.focus(),requestAnimationFrame(function(){return Fe.focus()})):Fe.focus(),ht(!1)}}catch(Nn){(ot=(Ze=Vt==null?void 0:Vt.message)===null||Ze===void 0?void 0:Ze.onSendMessageFailed)===null||ot===void 0||ot.call(Ze,U,Nn)}},Sn=!(!((r=(t=xe==null?void 0:xe.current)===null||t===void 0?void 0:t.textContent)===null||r===void 0)&&r.trim()),pt=function(){var Ze,ot;try{var Fe=xe==null?void 0:xe.current,Ot=U==null?void 0:U.messageId;if(p&&Ot&&Fe){var Lt=kA(Fe.childNodes),$t=Lt.messageText,an=Lt.mentionTemplate,Nn={messageId:Ot,message:$t,mentionTemplate:an};Q(Nn),$_(xe)}}catch(xn){(ot=(Ze=Vt==null?void 0:Vt.message)===null||Ze===void 0?void 0:Ze.onUpdateMessageFailed)===null||ot===void 0||ot.call(Ze,U,xn)}},Mt=MQ({ref:xe,setMentionedUsers:St,channel:o,setIsInput:ht}),dn=function(Ze){var ot,Fe,Ot=Ze.currentTarget.files;try{Ot&&x(Array.from(Ot))}catch(Lt){(Fe=(ot=Vt==null?void 0:Vt.message)===null||ot===void 0?void 0:ot.onFileUploadFailed)===null||Fe===void 0||Fe.call(ot,Lt)}finally{Ze.target.value=""}},In=function(){var Ze,ot=xe,Fe=window.getSelection();if(!(!Fe||Fe.rangeCount===0)){var Ot=Fe.getRangeAt(Fe.rangeCount-1),Lt=Ot.getBoundingClientRect(),$t=(Ze=ot.current)===null||Ze===void 0?void 0:Ze.getBoundingClientRect();if(!(!$t||!ot.current)){if(Lt.bottom>$t.bottom){var an=Math.min(Lt.bottom-$t.bottom,ot.current.scrollHeight-ot.current.clientHeight);ot.current.scrollTop+=an}else if(Lt.top<$t.top){var an=Math.min($t.top-Lt.top,ot.current.scrollTop);ot.current.scrollTop-=an}}}};return v.createElement("form",{className:zt.apply(void 0,Ne(Ne([],Array.isArray(u)?u:[u],!1),[p&&"sendbird-message-input__edit",L&&"sendbird-message-input-form__disabled"],!1))},v.createElement("div",{className:zt("sendbird-message-input",L&&"sendbird-message-input__disabled"),"data-testid":"sendbird-message-input"},lN(navigator.userAgent)&&v.createElement("input",{id:"ghost-input-reset-ime-cjk",ref:Ht,style:{opacity:0,padding:0,margin:0,height:0,border:"none",position:"absolute",top:-9999},defaultValue:"_"}),v.createElement("div",{id:"".concat(Xt).concat(p?U==null?void 0:U.messageId:""),className:"sendbird-message-input--textarea ".concat(Xt),contentEditable:!L,role:"textbox","aria-label":"Text Input",ref:xe,disabled:L,maxLength:G,onKeyDown:function(Ze){var ot,Fe,Ot,Lt,$t=Je(Ze);$t?Ze.preventDefault():(!Ze.shiftKey&&Ze.key===ei.Enter&&!_&&(!((ot=xe==null?void 0:xe.current)===null||ot===void 0)&&ot.textContent)&&xe.current.textContent.trim().length>0&&((Fe=Ze==null?void 0:Ze.nativeEvent)===null||Fe===void 0?void 0:Fe.isComposing)!==!0&&(Ze.preventDefault(),vn()),Ze.key===ei.Backspace&&((Lt=(Ot=xe==null?void 0:xe.current)===null||Ot===void 0?void 0:Ot.childNodes)===null||Lt===void 0?void 0:Lt.length)===2&&!xe.current.childNodes[0].textContent&&xe.current.childNodes[1].nodeType===Zy.ElementNode&&xe.current.removeChild(xe.current.childNodes[1]))},onKeyUp:function(Ze){var ot=De(Ze);ot?Ze.preventDefault():Tt()},onClick:function(){Tt()},onInput:function(){var Ze;re(),ht(!((Ze=xe==null?void 0:xe.current)===null||Ze===void 0)&&Ze.textContent?xe.current.textContent.trim().length>0:!1),Jt()},onPaste:function(Ze){Mt(Ze),setTimeout(In)}}),((s=(a=(i=xe==null?void 0:xe.current)===null||i===void 0?void 0:i.textContent)===null||a===void 0?void 0:a.length)!==null&&s!==void 0?s:0)===0&&v.createElement(Me,{className:"sendbird-message-input--placeholder",type:be.BODY_1,color:L?de.ONBACKGROUND_4:de.ONBACKGROUND_3},F||Ke.MESSAGE_INPUT__PLACE_HOLDER),!p&&cn&&v.createElement(ga,{className:"sendbird-message-input--send",height:"32px",width:"32px",onClick:function(){return vn()},testID:"sendbird-message-input-send-button"},(mt==null?void 0:mt())||v.createElement(qe,{type:Se.SEND,fillColor:L?ze.ON_BACKGROUND_4:ze.PRIMARY,width:"20px",height:"20px"})),!p&&!cn&&((He==null?void 0:He())||rn&&v.createElement(ga,{className:zt("sendbird-message-input--attach",T&&"is-voice-message-enabled"),height:"32px",width:"32px",onClick:function(){var Ze,ot;(ot=(Ze=Zt==null?void 0:Zt.current)===null||Ze===void 0?void 0:Ze.click)===null||ot===void 0||ot.call(Ze)}},v.createElement(qe,{type:Se.ATTACH,fillColor:L?ze.ON_BACKGROUND_4:ze.CONTENT_INVERSE,width:"20px",height:"20px"}),v.createElement("input",{className:"sendbird-message-input--attach-input",type:"file",ref:Zt,onChange:function(Ze){return dn(Ze)},accept:lK(Rt),multiple:w&&_Q(o)}))),T&&!p&&!cn&&v.createElement(ga,{className:"sendbird-message-input--voice-message",width:"32px",height:"32px",onClick:Ue},(Ve==null?void 0:Ve())||v.createElement(qe,{type:Se.AUDIO_ON_LINED,fillColor:L?ze.ON_BACKGROUND_4:ze.CONTENT_INVERSE,width:"20px",height:"20px"}))),p&&v.createElement("div",{className:"sendbird-message-input--edit-action","data-testid":"sendbird-message-input--edit-action"},v.createElement(Ri,{className:"sendbird-message-input--edit-action__cancel",type:Vn.SECONDARY,size:_a.SMALL,onClick:$},Ke.BUTTON__CANCEL),v.createElement(Ri,{className:"sendbird-message-input--edit-action__save",type:Vn.PRIMARY,size:_a.SMALL,disabled:Sn,onClick:function(){return pt()}},Ke.BUTTON__SAVE)))});function BA(e){br(1,arguments);var n=ra(e);return n.setHours(0,0,0,0),n}function r0(e,n){br(2,arguments);var t=BA(e),r=BA(n);return t.getTime()===r.getTime()}function uC(e){return br(1,arguments),r0(e,Date.now())}function kQ(e,n){br(2,arguments);var t=ra(e),r=ra(n);return t.getFullYear()===r.getFullYear()}function cC(e){return br(1,arguments),kQ(e,Date.now())}function PQ(e,n){br(2,arguments);var t=ra(e),r=Vo(n);return isNaN(r)?new Date(NaN):(r&&t.setDate(t.getDate()+r),t)}function xQ(e,n){br(2,arguments);var t=Vo(n);return PQ(e,-t)}function dC(e){return br(1,arguments),r0(e,xQ(Date.now(),1))}var G3=function(e,n,t){var r;return t===void 0&&(t=hc),!(e!=null&&e.name)&&!(e!=null&&e.members)?t.NO_TITLE:Ff(e)?((r=e==null?void 0:e.members)===null||r===void 0?void 0:r.length)===1?t.NO_MEMBERS:((e==null?void 0:e.members)||[]).filter(function(i){var a=i.userId;return a!==n}).map(function(i){var a=i.nickname;return a||t.NO_NAME}).join(", "):e.name},z3=function(e){var n,t=e.channel,r=e.locale,i=e.stringSet,a=i===void 0?hc:i,s=(n=t==null?void 0:t.lastMessage)===null||n===void 0?void 0:n.createdAt,o=r?{locale:r}:null;return s?uC(s)?Ar(s,a.DATE_FORMAT__LAST_MESSAGE_CREATED_AT__TODAY,o):dC(s)?a.MESSAGE_STATUS__YESTERDAY||"Yesterday":cC(s)?Ar(s,a.DATE_FORMAT__LAST_MESSAGE_CREATED_AT__THIS_YEAR,o):Ar(s,a.DATE_FORMAT__LAST_MESSAGE_CREATED_AT__PREVIOUS_YEAR,o):""},FQ=function(e){return e!=null&&e.memberCount?e.memberCount:0},HA=function(e,n){var t,r,i,a,s,o;return n===void 0&&(n=hc),vc(e)?(t=n==null?void 0:n.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_GIF)!==null&&t!==void 0?t:"":Ds(e)?(r=n==null?void 0:n.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_PHOTO)!==null&&r!==void 0?r:"":jo(e)?(i=n==null?void 0:n.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_VIDEO)!==null&&i!==void 0?i:"":Xb(e)?(a=n==null?void 0:n.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_AUDIO)!==null&&a!==void 0?a:"":i3(e)?(s=n==null?void 0:n.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_VOICE_MESSAGE)!==null&&s!==void 0?s:"":(o=n==null?void 0:n.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_GENERAL)!==null&&o!==void 0?o:""},BQ=function(e,n){var t,r,i,a;if(e===void 0&&(e=null),n===void 0&&(n=hc),!e)return"";if(Ep(e))return n.CHANNEL_PREVIEW_LAST_MESSAGE_TEMPLATE_MESSAGE;if(e.isFileMessage())return HA(e.type,n);if(e.isMultipleFilesMessage()){var s=(r=(t=e.fileInfoList)===null||t===void 0?void 0:t[0])===null||r===void 0?void 0:r.mimeType;return Ds(s)||vc(s)?(i=n==null?void 0:n.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_PHOTO)!==null&&i!==void 0?i:"":HA(s,n)}return(a=e.message)!==null&&a!==void 0?a:""},HQ=function(e,n){return n===void 0&&(n=hc),e!=null&&e.lastMessage?BQ(e==null?void 0:e.lastMessage,n):""},GA=function(e){return e!=null&&e.unreadMessageCount?e.unreadMessageCount:0},Al,wl,GQ=(Al={},Al[ur.SENT]=Se.DONE,Al[ur.DELIVERED]=Se.DONE_ALL,Al[ur.READ]=Se.DONE_ALL,Al[ur.FAILED]=Se.ERROR,Al[ur.PENDING]=void 0,Al[ur.NONE]=void 0,Al),zQ=(wl={},wl[ur.SENT]=ze.SENT,wl[ur.DELIVERED]=ze.SENT,wl[ur.READ]=ze.READ,wl[ur.FAILED]=ze.ERROR,wl[ur.PENDING]=void 0,wl[ur.NONE]=void 0,wl);function hC(e){var n,t=e.className,r=e.message,i=e.channel,a=e.isDateSeparatorConsidered,s=a===void 0?!0:a,o=Ut(),l=o.stringSet,u=o.dateLocale,d=XO(i,r),f=((n=i==null?void 0:i.isGroupChannel)===null||n===void 0?void 0:n.call(i))&&(i.isSuper||i.isPublic||i.isBroadcast)&&!(d===ur.PENDING||d===ur.FAILED);return v.createElement("div",{className:Ne(Ne([],Array.isArray(t)?t:[t],!0),["sendbird-message-status"],!1).join(" ")},d===ur.PENDING?v.createElement(Xo,{className:"sendbird-message-status__icon",testID:"sendbird-message-status-icon",width:"16px",height:"16px"},v.createElement(qe,{type:Se.SPINNER,fillColor:ze.PRIMARY,width:"16px",height:"16px"})):v.createElement(qe,{className:zt("sendbird-message-status__icon",f&&"hide-icon",d!==ur.FAILED&&"sendbird-message-status--sent"),testID:"sendbird-message-status-icon",type:GQ[d]||Se.ERROR,fillColor:zQ[d],width:"16px",height:"16px"}),hK(d)&&v.createElement(Me,{className:"sendbird-message-status__text",testID:"sendbird-message-status-text",type:be.CAPTION_3,color:de.ONBACKGROUND_2},s?Ar((r==null?void 0:r.createdAt)||0,l.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:u}):z3({channel:i,locale:u,stringSet:l})))}var jQ=function(e){var n=e.ref,t=e.onClick,r=t===void 0?_n:t,i=e.onBlur,a=i===void 0?_n:i,s=e.renderIcon,o=s===void 0?function(l){return v.createElement(qe,D({},l))}:s;return v.createElement(ga,{ref:n,width:"32px",height:"32px",onClick:r,onBlur:a},o({type:Se.MORE,fillColor:ze.CONTENT_INVERSE,width:"24px",height:"24px"}))},zA=function(e){var n,t=Ut().stringSet,r=Wr(),i=r.message,a=r.hideMenu;return v.createElement(Ei,D({},e,{onClick:function(s){var o;Vi(i)&&tC(i.message),a(),(o=e.onClick)===null||o===void 0||o.call(e,s)}}),(n=e.children)!==null&&n!==void 0?n:t.MESSAGE_MENU__COPY)},jA=function(e){var n,t=Ut().stringSet,r=Wr(),i=r.message,a=r.hideMenu,s=r.setQuoteMessage;return v.createElement(Ei,D({},e,{disabled:i.parentMessageId>0,onClick:function(o){var l;s(i),a(),(l=e.onClick)===null||l===void 0||l.call(e,o)}}),(n=e.children)!==null&&n!==void 0?n:t.MESSAGE_MENU__REPLY)},VA=function(e){var n,t=Ut().stringSet,r=Wr(),i=r.message,a=r.hideMenu,s=r.onReplyInThread;return v.createElement(Ei,D({},e,{onClick:function(o){var l;s({message:i}),a(),(l=e.onClick)===null||l===void 0||l.call(e,o)}}),(n=e.children)!==null&&n!==void 0?n:t.MESSAGE_MENU__THREAD)},$A=function(e){var n,t=Ut().stringSet,r=Wr(),i=r.hideMenu,a=r.onMoveToParentMessage;return v.createElement(Ei,D({},e,{onClick:function(s){var o;a(),i(),(o=e.onClick)===null||o===void 0||o.call(e,s)}}),(n=e.children)!==null&&n!==void 0?n:t.MESSAGE_MENU__OPEN_IN_CHANNEL)},qA=function(e){var n,t=Ut().stringSet,r=Wr(),i=r.hideMenu,a=r.showEdit,s=r.isOnline;return v.createElement(Ei,D({},e,{onClick:function(o){var l;s&&(a(!0),i(),(l=e.onClick)===null||l===void 0||l.call(e,o))}}),(n=e.children)!==null&&n!==void 0?n:t.MESSAGE_MENU__EDIT)},KA=function(e){var n,t=Ut().stringSet,r=Wr(),i=r.message,a=r.hideMenu,s=r.resendMessage,o=r.isOnline;return v.createElement(Ei,D({},e,{onClick:function(l){var u;o&&(s(i),a(),(u=e.onClick)===null||u===void 0||u.call(e,l))}}),(n=e.children)!==null&&n!==void 0?n:t.MESSAGE_MENU__RESEND)},WA=function(e){var n,t,r,i=Ut().stringSet,a=Wr(),s=a.message,o=a.hideMenu,l=a.deleteMessage,u=a.showRemove,d=a.isOnline,f=a.disableDeleteMessage;return v.createElement(Ei,D({},e,{disabled:typeof f=="boolean"?f:((t=(n=s.threadInfo)===null||n===void 0?void 0:n.replyCount)!==null&&t!==void 0?t:0)>0,onClick:function(m){var p;Ha(s)?l(s):d&&(u(!0),o(),(p=e.onClick)===null||p===void 0||p.call(e,m))}}),(r=e.children)!==null&&r!==void 0?r:i.MESSAGE_MENU__DELETE)},j3=function(e){var n,t=e.channel,r=e.message;if(Ha(r)||Rs(r)||!(!((n=t==null?void 0:t.isGroupChannel)===null||n===void 0)&&n.call(t))||t!=null&&t.isEphemeral)return!1;var i=t==null?void 0:t.isBroadcast,a=(t==null?void 0:t.myRole)===Zr.OPERATOR;return i?a:!0},VQ=function(e){var n=e.message;return Vi(n)},$Q=function(e){var n=e.message,t=e.channel,r=e.isByMe;return!(t!=null&&t.isEphemeral)&&Vi(n)&&yd(n)&&r},qQ=function(e){var n=e.message,t=e.isByMe;return Ha(n)&&(n==null?void 0:n.isResendable)&&t},KQ=function(e){var n=e.message,t=e.channel,r=e.isByMe;return!(t!=null&&t.isEphemeral)&&!Rs(n)&&r},WQ=function(e){var n=e.onMoveToParentMessage,t=n===void 0?void 0:n;return!!t},QQ=function(e){var n=e.channel,t=e.message,r=e.replyType;return j3({channel:n,message:t})&&r==="QUOTE_REPLY"},YQ=function(e){var n=e.channel,t=e.message,r=e.replyType,i=e.onReplyInThread;return j3({channel:n,message:t})&&r==="THREAD"&&!(t!=null&&t.parentMessageId)&&typeof i=="function"},fC=function(e){var n,t=e.className,r=e.message,i=e.channel,a=e.isByMe,s=e.replyType,o=e.renderTrigger,l=o===void 0?jQ:o,u=e.renderMenuItems,d=e.disableDeleteMessage,f=d===void 0?null:d,m=e.showEdit,p=m===void 0?_n:m,E=e.showRemove,_=E===void 0?_n:E,b=e.deleteMessage,C=e.resendMessage,y=e.setQuoteMessage,T=e.onReplyInThread,N=e.onMoveToParentMessage,w=yt().state.config.isOnline,O=M.useRef(null),L=M.useRef(null),P=M.useState(!1),U=P[0],B=P[1],F=function(){return B(!1)},H=function(){return B(!0)},G=function(){return B(function(x){return!x})},j={message:r,channel:i,isByMe:a,replyType:s,onReplyInThread:T,onMoveToParentMessage:N};return v.createElement("div",{className:zt("sendbird-message-menu",t),ref:L},v.createElement(iC,{value:{message:r,hideMenu:F,showMenu:H,toggleMenu:G,setQuoteMessage:y,onReplyInThread:T,onMoveToParentMessage:N,showEdit:p,showRemove:_,deleteMessage:b,resendMessage:C,isOnline:w,disableDeleteMessage:f,triggerRef:O,containerRef:L}},l({ref:O,onClick:G}),U&&v.createElement(Li,{id:Hf(r.messageId),parentRef:O,parentContainRef:L,closeDropdown:F,openLeft:a},(n=u==null?void 0:u({items:{CopyMenuItem:zA,ReplyMenuItem:jA,ThreadMenuItem:VA,OpenInChannelMenuItem:$A,EditMenuItem:qA,ResendMenuItem:KA,DeleteMenuItem:WA}}))!==null&&n!==void 0?n:v.createElement(v.Fragment,null,VQ(j)&&v.createElement(zA,null),QQ(j)&&v.createElement(jA,null),YQ(j)&&v.createElement(VA,null),WQ(j)&&v.createElement($A,null),$Q(j)&&v.createElement(qA,null),qQ(j)&&v.createElement(KA,null),KQ(j)&&v.createElement(WA,null)))))},XQ=300;function QA(e){ZQ(e)&&e.touches.length<2&&e.preventDefault&&e.preventDefault()}function ZQ(e){return e&&"touches"in e}function cs(e,n){var t=e.onLongPress,r=e.onClick,i=n===void 0?{}:n,a=i.delay,s=a===void 0?XQ:a,o=i.shouldPreventDefault,l=o===void 0?!0:o,u=i.shouldStopPropagation,d=u===void 0?!1:u,f=pr().isMobile,m=M.useState(!1),p=m[0],E=m[1],_=M.useState(!1),b=_[0],C=_[1],y=M.useRef(),T=M.useRef(),N=M.useCallback(function(O){O.persist();var L=D({},O);C(!1),d&&O.stopPropagation(),l&&O.target&&(O.target.addEventListener("touchend",QA,{passive:!1}),T.current=O.target),y.current=setTimeout(function(){t(L),E(!0)},s)},[t,s,l,d,f]),w=M.useCallback(function(O,L,P){L===void 0&&(L=!0),P===void 0&&(P=!1),C(!!P),y!=null&&y.current&&clearTimeout(y.current),L&&!p&&!b&&(r==null||r(O)),E(!1),l&&T.current&&T.current.removeEventListener("touchend",QA)},[l,r,p,b]);return{onMouseDown:function(O){return N(O)},onMouseUp:function(O){return w(O)},onMouseLeave:function(O){return w(O,!1)},onTouchStart:function(O){return N(O)},onTouchMove:function(O){return w(O,!1,!0)},onTouchEnd:function(O){return w(O)}}}var Of=v.forwardRef(function(e,n){var t=e.className,r=e.width,i=e.height,a=e.selected,s=e.dataSbId,o=s===void 0?"":s,l=e.testID,u=e.onClick,d=e.children,f=cs({onLongPress:_n,onClick:u},{shouldPreventDefault:!0,shouldStopPropagation:!0});return v.createElement("div",D({className:Ne(Ne([],Array.isArray(t)?t:[t],!0),["sendbird-reaction-button".concat(a?"--selected":"")],!1).join(" "),ref:n,role:"button",style:{width:r,height:i}},f,{tabIndex:0,"data-sb-id":l??o,"data-testid":l??o}),v.createElement("div",{className:"sendbird-reaction-button__inner"},d))});function vC(e){var n=e.className,t=e.message,r=e.userId,i=e.spaceFromTrigger,a=i===void 0?{x:0,y:0}:i,s=e.emojiContainer,o=e.filterEmojiCategoryIds,l=e.toggleReaction,u=M.useRef(null),d=M.useRef(null),f=M.useMemo(function(){return Yy(s,o==null?void 0:o(t))},[s,o]);return Rs(t)||Ha(t)?null:v.createElement("div",{className:ai([n??"","sendbird-message-item-reaction-menu"]),ref:d},v.createElement($i,{menuTrigger:function(m){return v.createElement(ga,{className:"sendbird-message-item-reaction-menu__trigger",ref:u,width:"32px",height:"32px",onClick:function(){m()}},v.createElement(qe,{className:"sendbird-message-item-reaction-menu__trigger__icon",testID:"sendbird-message-item-reaction-menu__trigger__icon",type:Se.EMOJI_MORE,fillColor:ze.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(m){return v.createElement(o3,{id:Hf(t.messageId),parentRef:u,parentContainRef:d,closeDropdown:m,spaceFromTrigger:a},f.map(function(p){var E,_,b,C=((b=(_=(E=t==null?void 0:t.reactions)===null||E===void 0?void 0:E.find(function(y){return y.key===p.key}))===null||_===void 0?void 0:_.userIds)===null||b===void 0?void 0:b.some(function(y){return y===r}))||!1;return v.createElement(Of,{key:p.key,width:"36px",height:"36px",selected:C,onClick:function(){m(),l==null||l(t,p.key,C)},testID:"ui_emoji_reactions_menu_".concat(p.key)},v.createElement(yr,{url:p.url,width:"28px",height:"28px",placeHolder:function(y){var T=y.style;return v.createElement("div",{style:T},v.createElement(qe,{type:Se.QUESTION,fillColor:ze.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}))}))}}))}var mC=v.forwardRef(function(e,n){var t=e.className,r=t===void 0?"":t,i=e.testID,a=e.children,s=e.count,o=s===void 0?"":s,l=e.isAdd,u=l===void 0?!1:l,d=e.selected,f=d===void 0?!1:d,m=e.onClick,p=m===void 0?function(){}:m,E=function(){return f&&!u?"--selected":u?"--is-add":""};return v.createElement("div",{className:Ne(Ne([],Array.isArray(r)?r:[r],!0),["sendbird-reaction-badge".concat(E())],!1).join(" "),"data-testid":i,role:"button",ref:n,onClick:p,onKeyDown:p,onTouchEnd:p,tabIndex:0},v.createElement("div",{className:"sendbird-reaction-badge__inner"},v.createElement("div",{className:"sendbird-reaction-badge__inner__icon"},a),v.createElement(Me,{className:a&&o?"sendbird-reaction-badge__inner__count":"",type:be.CAPTION_3,color:de.ONBACKGROUND_1},o)))}),i0=function(e){var n,t=e.className,r=t===void 0?"":t,i=e.children,a=e.onBackdropClick,s=yt().state.config.logger,o=M.useRef();return o.current=document.getElementById(nc),o.current||(o.current=document.createElement("div"),o.current.setAttribute("id",nc),document.body.appendChild(o.current),(n=s==null?void 0:s.warning)===null||n===void 0||n.call(s,"@sendbird/uikit-react/ui/BottomSheet | Should put a ModalRoot to use the BottomSheet.")),kd.createPortal(v.createElement("div",{className:"".concat(r," sendbird-bottomsheet")},v.createElement("div",{className:"sendbird-bottomsheet__content",role:"dialog","aria-modal":"true","aria-expanded":"true"},i),v.createElement("div",{className:"sendbird-bottomsheet__backdrop",onClick:function(l){l==null||l.stopPropagation(),a==null||a()}})),o.current)};function JQ(e){var n=e.height,t=n===void 0?24:n,r=e.width,i=r===void 0?24:r;return v.createElement("div",{className:"sendbird-muted-avatar",style:{height:"".concat(t,"px"),width:"".concat(i,"px")}},v.createElement("div",{className:"sendbird-muted-avatar__icon"},v.createElement("div",{className:"sendbird-muted-avatar__bg",style:{height:"".concat(t,"px"),width:"".concat(i,"px")}}),v.createElement(qe,{type:Se.MUTE,fillColor:ze.WHITE,width:"".concat(t-8,"px"),height:"".concat(i-8,"px")})))}function eY(e){var n=e.id,t=e.checked,r=t===void 0?!1:t,i=e.disabled,a=e.onChange,s=M.useState(r),o=s[0],l=s[1];return v.createElement("label",{className:["sendbird-checkbox",i?"disabled":""].join(" "),htmlFor:n},v.createElement("input",{disabled:i,id:n,type:"checkbox",checked:o,onClick:function(){i||l(!o)},onChange:a}),v.createElement("span",{className:["sendbird-checkbox--checkmark",i?"disabled":""].join(" ")}))}var V3=function(e){var n=e.stores,t=n===void 0?{}:n,r=t.sdkStore,i=r===void 0?{}:r,a=i.sdk;return a},tY=function(e){var n=e.config,t=n===void 0?{}:n,r=t.pubSub;return r},$3=function(e){return function(n){return new Promise(function(t,r){var i=V3(e),a=tY(e);i||r(new Error("Sdk not found")),i.groupChannel||r(new Error("Not found GroupChannelModule")),i.groupChannel.createChannel&&typeof i.groupChannel.createChannel=="function"||r(new Error('Not found the function "createChannel"')),i.groupChannel.createChannel(n).then(function(s){t(s),a.publish(Hn.CREATE_CHANNEL,{channel:s})}).catch(r)})}};function Xl(e){var n,t,r=e.user,i=e.currentUserId,a=e.disableMessaging,s=a===void 0?!1:a,o=e.onSuccess,l=yt().state,u=$3(l),d=(n=l==null?void 0:l.config)===null||n===void 0?void 0:n.logger,f=M.useContext(On).stringSet,m=i||((t=l==null?void 0:l.config)===null||t===void 0?void 0:t.userId),p=Yl().onStartDirectMessage;return v.createElement("div",{className:"sendbird__user-profile"},v.createElement("section",{className:"sendbird__user-profile-avatar"},v.createElement(Fr,{height:"80px",width:"80px",src:r==null?void 0:r.profileUrl})),v.createElement("section",{className:"sendbird__user-profile-name"},v.createElement(Me,{type:be.H_2,color:de.ONBACKGROUND_1},(r==null?void 0:r.nickname)||f.NO_NAME)),(r==null?void 0:r.userId)!==m&&!s&&v.createElement("section",{className:"sendbird__user-profile-message"},v.createElement(Ri,{type:Vn.SECONDARY,onClick:function(){var E={isDistinct:!1,invitedUserIds:r!=null&&r.userId?[r==null?void 0:r.userId]:[],operatorUserIds:[m]};o==null||o(),u(E).then(function(_){d.info("UserProfile, channel create",_),p==null||p(_)})}},f.USER_PROFILE__MESSAGE)),v.createElement("div",{className:"sendbird__user-profile-separator"}),v.createElement("section",{className:"sendbird__user-profile-userId"},v.createElement(Me,{className:"sendbird__user-profile-userId--label",type:be.CAPTION_2,color:de.ONBACKGROUND_2},f.USER_PROFILE__USER_ID),v.createElement(Me,{className:"sendbird__user-profile-userId--value",type:be.BODY_1,color:de.ONBACKGROUND_1},r==null?void 0:r.userId)))}function ds(e){var n=e.user,t=e.channel,r=e.className,i=r===void 0?void 0:r,a=e.checked,s=e.checkBox,o=e.isOperator,l=e.disabled,u=e.disableMessaging,d=e.action,f=e.onChange,m=e.avatarSize,p=m===void 0?"40px":m,E=e.onClick,_=e.onUserAvatarClick,b=e.renderListItemMenu,C=e.size,y=C===void 0?"normal":C,T=o??(n==null?void 0:n.role)==="operator",N=n.userId,w=M.useRef(null),O=M.useRef(null),L=M.useRef(null),P=Yl(),U=P.disableUserProfile,B=P.renderUserProfile,F=Ut().stringSet,H=yt().state.config,G=H.userId,j=y==="small"?"sendbird-user-list-item--small":"sendbird-user-list-item",x=y==="small"?"sendbird-user-list-item--small__avatar":"sendbird-user-list-item__avatar",V=y==="small"?"sendbird-user-list-item--small__title":"sendbird-user-list-item__title",K=y==="small"?"sendbird-user-list-item--small__subtitle":"sendbird-user-list-item__subtitle",W=y==="small"?"sendbird-user-list-item--small__checkbox":"sendbird-user-list-item__checkbox",Q=y==="small"?"sendbird-user-list-item--small__action":"sendbird-user-list-item__action",J=y==="small"?"sendbird-user-list-item--small__operator":"sendbird-user-list-item__operator";return v.createElement("div",{className:zt.apply(void 0,Ne([j],Array.isArray(i)?i:[i],!1)),ref:O},v.createElement($i,{menuTrigger:function($){return v.createElement(v.Fragment,null,v.createElement(Fr,{className:x,ref:L,src:(n==null?void 0:n.profileUrl)||(n==null?void 0:n.plainProfileUrl)||"",width:p,height:p,onClick:function(){var te;U||($(),(te=_??E)===null||te===void 0||te())}}),(n==null?void 0:n.isMuted)&&v.createElement(JQ,{height:Sd(p),width:Sd(p)}))},menuItems:function($){return B?B({user:n,currentUserId:G??"",close:$,avatarRef:L}):v.createElement(Li,{openLeft:!0,parentRef:L,parentContainRef:L,closeDropdown:$,style:{paddingTop:"0px",paddingBottom:"0px"}},v.createElement(Xl,{disableMessaging:u,user:n,currentUserId:G,onSuccess:$}))}}),v.createElement(Me,{className:V,type:be.SUBTITLE_1,color:de.ONBACKGROUND_1},n.nickname||F.NO_NAME,G===n.userId&&F.CHANNEL_SETTING__MEMBERS__YOU),!n.nickname&&v.createElement(Me,{className:K,type:be.CAPTION_3,color:de.ONBACKGROUND_2},n.userId),s&&v.createElement("label",{className:W,htmlFor:N},v.createElement(eY,{id:N,checked:a,disabled:l,onChange:function($){return f==null?void 0:f($)}})),T&&v.createElement(Me,{className:zt(J,s&&"checkbox"),type:be.SUBTITLE_2,color:de.ONBACKGROUND_2},F.LABEL__OPERATOR),!s&&!b&&d&&v.createElement("div",{className:Q,ref:w},d({actionRef:w,parentRef:O})),!s&&b&&v.createElement("div",{className:Q,ref:w},b({channel:t,user:n})))}function nY(e){var n=e.className,t=n===void 0?"":n,r=e.children,i=r===void 0?"":r;return v.createElement("div",{className:Ne(Ne([],Array.isArray(t)?t:[t],!0),["sendbird-tooltip"],!1).join(" ")},v.createElement(Me,{className:"sendbird-tooltip__text",type:be.CAPTION_2,color:de.ONCONTENT_1},i))}var rY=8;function iY(e){var n=e.className,t=n===void 0?"":n,r=e.children,i=e.hoverTooltip,a=M.useState(!1),s=a[0],o=a[1],l=M.useRef();return v.createElement("div",{className:Ne(Ne([],Array.isArray(t)?t:[t],!0),["sendbird-tooltip-wrapper"],!1).join(" "),onMouseOver:function(){o(!0)},onFocus:function(){o(!0)},onMouseOut:function(){o(!1)},onBlur:function(){o(!1)}},v.createElement("div",{className:"sendbird-tooltip-wrapper__children",ref:l},r),s&&v.createElement("div",{className:"sendbird-tooltip-wrapper__hover-tooltip",style:{bottom:"calc(100% + ".concat(rY,"px)")}},v.createElement("div",{className:"sendbird-tooltip-wrapper__hover-tooltip__inner"},v.createElement("div",{className:"sendbird-tooltip-wrapper__hover-tooltip__inner__tooltip-container",style:{left:l.current?"calc(".concat(l.current.offsetWidth/2,"px - 50%)"):void 0}},i))))}var aY={message:{},isByMe:!1},q3=v.createContext(aY),rc=function(e){var n=e.children,t=e.message,r=e.isByMe,i=r===void 0?!1:r;return v.createElement(q3.Provider,{value:{message:t,isByMe:i}},n)},K3=function(){var e=v.useContext(q3);if(e===void 0)throw new Error("useMessageContext must be used within a MessageProvider");return e},sY=function(e){var n,t,r,i=e.message,a=e.channel,s=e.emojiKey,o=s===void 0?"":s,l=e.hideMenu,u=e.emojiContainer,d=e.onPressUserProfileHandler,f=a.members,m=f===void 0?[]:f,p=M.useState(o),E=p[0],_=p[1];function b(){if(d&&i){var C=i==null?void 0:i.sender;d(C)}}return v.createElement(i0,{onBackdropClick:l},v.createElement("div",{className:"sendbird-message__bottomsheet"},v.createElement("div",{className:"sendbird-message__bottomsheet__reacted-members"},(n=i.reactions)===null||n===void 0?void 0:n.map(function(C){var y=CK(u,C.key);return v.createElement("div",{key:C.key,className:zt("sendbird-message__bottomsheet__reacted-members__item",E===C.key&&"sendbird-message__bottomsheet__reacted-members__item__selected"),onClick:function(){_(C.key)}},v.createElement(yr,{url:y,width:"28px",height:"28px",placeHolder:function(T){var N=T.style;return v.createElement("div",{style:N},v.createElement(qe,{type:Se.QUESTION,fillColor:ze.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}),v.createElement(Me,{type:be.BUTTON_2,color:E===C.key?de.PRIMARY:de.ONBACKGROUND_3},C.userIds.length))})),v.createElement("div",{className:"sendbird-message__bottomsheet__reactor-list"},((r=(t=i.reactions)===null||t===void 0?void 0:t.find(function(C){return C.key===E}))===null||r===void 0?void 0:r.userIds.map(function(C){return m.find(function(y){return y.userId===C})}).filter(function(C){return C!==void 0})).map(function(C){return v.createElement(ds,{key:C.userId,className:"sendbird-message__bottomsheet__reactor-list__item",user:C,avatarSize:"36px",onUserAvatarClick:b})}))))};function oY(e){var n,t=e.reaction,r=e.memberNicknamesMap,i=e.setEmojiKey,a=e.toggleReaction,s=e.emojisMap,o=e.channel,l=e.message,u=e.isFiltered,d=Wb().openModal,f=yt().state.config.userId,m=pr().isMobile,p=K3(),E=M.useContext(On).stringSet,_=a3(f,t),b=t.userIds.length>0&&(o==null?void 0:o.isGroupChannel())&&!o.isSuper,C=function(){if(u&&!_){d({modalProps:{titleText:"Add reaction failed",hideFooter:!0,isCloseOnClickOutside:!0},childElement:function(T){var N=T.closeModal;return v.createElement(Ed,{type:Vn.PRIMARY,submitText:E.BUTTON__OK,hideCancelButton:!0,onCancel:N,onSubmit:N})}});return}i(""),a==null||a(l??(p==null?void 0:p.message),t.key,_)},y=cs({onLongPress:function(){i(t.key)},onClick:C},{shouldPreventDefault:!0,shouldStopPropagation:!0});return v.createElement(iY,{className:"sendbird-emoji-reactions__reaction-badge",hoverTooltip:b?v.createElement(nY,null,EK(t,f,r,E)):v.createElement(v.Fragment,null)},v.createElement("div",D({},m?y:{onClick:C}),v.createElement(mC,{count:t.userIds.length,selected:_},v.createElement(yr,{circle:!0,url:((n=s.get(t==null?void 0:t.key))===null||n===void 0?void 0:n.url)||"",width:"20px",height:"20px",defaultComponent:v.createElement(qe,{width:"20px",height:"20px",type:Se.QUESTION})}))))}var lY=function(e){var n=e.onClick,t=cs({onLongPress:function(){},onClick:n},{shouldPreventDefault:!0,shouldStopPropagation:!0});return v.createElement("div",D({className:"sendbird-emoji-reactions__add-reaction-badge","data-testid":"sendbird-emoji-reactions__add-reaction-badge"},t),v.createElement(mC,{isAdd:!0},v.createElement(qe,{type:Se.EMOJI_MORE,fillColor:ze.ON_BACKGROUND_3,width:"20px",height:"20px"})))},uY=function(e){var n=e.userId,t=e.message,r=e.emojiContainer,i=e.hideMenu,a=e.toggleReaction,s=M.useMemo(function(){return nC(r)},[r]);return v.createElement(i0,{onBackdropClick:i},v.createElement("div",{className:"sendbird-message__bottomsheet sendbird-message__emojis-bottomsheet"},s.map(function(o){var l,u,d,f,m=(f=(d=(u=(l=t==null?void 0:t.reactions)===null||l===void 0?void 0:l.find(function(p){return p.key===o.key}))===null||u===void 0?void 0:u.userIds)===null||d===void 0?void 0:d.some(function(p){return p===n}))!==null&&f!==void 0?f:!1;return v.createElement(Of,{key:o.key,width:"44px",height:"44px",selected:m,onClick:function(p){p==null||p.stopPropagation(),a==null||a(t,o.key,m),i()},testID:"ui_mobile_emoji_reactions_menu_".concat(o.key)},v.createElement(yr,{url:o.url,width:"38px",height:"38px",placeHolder:function(p){var E=p.style;return v.createElement("div",{style:E},v.createElement(qe,{type:Se.QUESTION,fillColor:ze.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}))})))},pC=function(e){var n,t,r,i,a,s=e.className,o=s===void 0?"":s,l=e.userId,u=e.message,d=e.channel,f=e.emojiContainer,m=e.memberNicknamesMap,p=e.spaceFromTrigger,E=p===void 0?{x:0,y:0}:p,_=e.isByMe,b=_===void 0?!1:_,C=e.toggleReaction,y=e.onPressUserProfile,T=e.filterEmojiCategoryIds,N=!1;try{var w=yt().state.config;N=d?zf({channel:d,config:w}):!1}catch{}var O=pr().isMobile,L=M.useRef(null),P=M.useState(!1),U=P[0],B=P[1],F=M.useState(""),H=F[0],G=F[1],j=yK(f),x=M.useMemo(function(){return Yy(f,T==null?void 0:T(u))},[f,T]),V=((t=(n=u.reactions)===null||n===void 0?void 0:n.length)!==null&&t!==void 0?t:0)<j.size;return v.createElement("div",{className:ai([o,"sendbird-emoji-reactions",b?"outgoing":"incoming"])},((i=(r=u.reactions)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0)>0&&((a=u.reactions)===null||a===void 0?void 0:a.map(function(K){return v.createElement(oY,{key:K==null?void 0:K.key,reaction:K,memberNicknamesMap:m,setEmojiKey:G,toggleReaction:C,emojisMap:j,channel:d,message:u,isFiltered:Yy(f,T==null?void 0:T(u)).every(function(W){return W.key!==(K==null?void 0:K.key)})})})),!O&&V&&v.createElement($i,{menuTrigger:function(K){return v.createElement(mC,{className:"sendbird-emoji-reactions__add-reaction-badge",testID:"sendbird-emoji-reactions__add-reaction-badge",ref:L,isAdd:!0,onClick:function(W){var Q;K(),(Q=W==null?void 0:W.stopPropagation)===null||Q===void 0||Q.call(W)}},v.createElement(qe,{type:Se.EMOJI_MORE,fillColor:ze.ON_BACKGROUND_3,width:"20px",height:"20px"}))},menuItems:function(K){return v.createElement(o3,{parentRef:L,parentContainRef:L,closeDropdown:K,spaceFromTrigger:E},x.map(function(W){var Q,J,$,te=(($=(J=(Q=u==null?void 0:u.reactions)===null||Q===void 0?void 0:Q.find(function(re){return re.key===W.key}))===null||J===void 0?void 0:J.userIds)===null||$===void 0?void 0:$.some(function(re){return re===l}))||!1;return v.createElement(Of,{key:W.key,width:"36px",height:"36px",selected:te,onClick:function(re){K(),C==null||C(u,W.key,te),re==null||re.stopPropagation()},testID:"ui_emoji_reactions_menu_".concat(W.key)},v.createElement(yr,{url:(W==null?void 0:W.url)||"",width:"28px",height:"28px",placeHolder:function(re){var ve=re.style;return v.createElement("div",{style:ve},v.createElement(qe,{type:Se.QUESTION,fillColor:ze.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}))}))}}),O&&V&&v.createElement(lY,{onClick:function(){B(!0)}}),O&&U&&v.createElement(uY,{userId:l,message:u,emojiContainer:f,hideMenu:function(){B(!1)},toggleReaction:C}),O&&H&&d!==null&&N&&v.createElement(sY,{message:u,channel:d,emojiKey:H,hideMenu:function(){G("")},emojiContainer:f,onPressUserProfileHandler:y}))};function cY(e){var n,t=e.className,r=t===void 0?"":t,i=e.message;return!(i!=null&&i.isAdminMessage||i!=null&&i.messageType)||!(!((n=i==null?void 0:i.isAdminMessage)===null||n===void 0)&&n.call(i))||(i==null?void 0:i.messageType)!=="admin"?null:v.createElement("div",{className:Ne(Ne([],Array.isArray(r)?r:[r],!0),["sendbird-admin-message"],!1).join(" ")},v.createElement(Me,{className:"sendbird-admin-message__text",type:be.CAPTION_2,color:de.ONBACKGROUND_2},i==null?void 0:i.message))}function Tp(e){return ji(e).when(Di,function(){var n;return(n=e==null?void 0:e.type)!==null&&n!==void 0?n:""}).when(Oi,function(){var n,t;return(t=(n=a0(e))===null||n===void 0?void 0:n.mimeType)!==null&&t!==void 0?t:""}).otherwise(function(){return""})}function a0(e){var n=e.fileInfoList;return n.length>0?n[0]:null}function gC(e){return ji(e).when(Di,function(){var n;return(n=e==null?void 0:e.name)!==null&&n!==void 0?n:""}).when(Oi,function(){var n,t;return(t=(n=a0(e))===null||n===void 0?void 0:n.fileName)!==null&&t!==void 0?t:""}).otherwise(function(){return""})}function Td(e){return ji(e).when(Di,function(){var n;return(n=e==null?void 0:e.url)!==null&&n!==void 0?n:""}).when(Oi,function(){var n,t;return(t=(n=a0(e))===null||n===void 0?void 0:n.url)!==null&&t!==void 0?t:""}).otherwise(function(){return""})}function dY(e){return ji(e).when(Di,function(){return e.thumbnails}).when(Oi,function(){var n,t;return(t=(n=a0(e))===null||n===void 0?void 0:n.thumbnails)!==null&&t!==void 0?t:[]}).otherwise(function(){return[]})}function W3(e){var n=dY(e);return n&&n.length>0?n[0].url:""}function hY(e){var n,t,r,i,a,s,o,l=e.message,u=e.userId,d=u===void 0?"":u,f=e.isByMe,m=f===void 0?!1:f,p=e.className,E=p===void 0?"":p,_=e.isUnavailable,b=_===void 0?!1:_,C=e.onClick,y=M.useContext(On).stringSet,T=l.parentMessage,N=T==null?void 0:T.sender,w=d===(N==null?void 0:N.userId)?y.QUOTED_MESSAGE__CURRENT_USER:N==null?void 0:N.nickname,O=Td(T),L=Tp(T),P=d===((t=l==null?void 0:l.sender)===null||t===void 0?void 0:t.userId)?y.QUOTED_MESSAGE__CURRENT_USER:(r=l==null?void 0:l.sender)===null||r===void 0?void 0:r.nickname,U=M.useState(!1),B=U[0],F=U[1],H=dK(),G=(a=(i=gC(T))===null||i===void 0?void 0:i.split("/"))!==null&&a!==void 0?a:O.split("/");return v.createElement("div",{className:ai([E,"sendbird-quote-message",m?"outgoing":"incoming",b?"unavailable":""]),key:T==null?void 0:T.messageId,onClick:function(){!b&&C&&C()},onTouchEnd:function(){!b&&C&&C()}},v.createElement("div",{className:"sendbird-quote-message__replied-to"},v.createElement(qe,{className:"sendbird-quote-message__replied-to__icon",type:Se.REPLY,fillColor:ze.ON_BACKGROUND_3,width:"12px",height:"12px"}),v.createElement(Me,{className:"sendbird-quote-message__replied-to__text",testID:"sendbird-quote-message__replied-to__text",type:be.CAPTION_2,color:de.ONBACKGROUND_3},v.createElement("span",{className:"sendbird-quote-message__replied-to__text__nickname"},P),v.createElement("span",{className:"sendbird-quote-message__replied-to__text__text"},y.QUOTED_MESSAGE__REPLIED_TO),v.createElement("span",{className:"sendbird-quote-message__replied-to__text__nickname"},w))),v.createElement("div",{className:"sendbird-quote-message__replied-message"},b&&v.createElement("div",{className:"sendbird-quote-message__replied-message__text-message"},v.createElement(Me,{className:"sendbird-quote-message__replied-message__text-message__word",testID:"sendbird-quote-message__replied-message__text-message__word",type:be.BODY_2,color:de.ONBACKGROUND_1},y.QUOTED_MESSAGE__UNAVAILABLE)),Vi(T)&&((s=T==null?void 0:T.message)===null||s===void 0?void 0:s.length)>0&&!b&&v.createElement("div",{className:"sendbird-quote-message__replied-message__text-message"},v.createElement(Me,{className:"sendbird-quote-message__replied-message__text-message__word",testID:"sendbird-quote-message__replied-message__text-message__word",type:be.BODY_2,color:de.ONBACKGROUND_1},T==null?void 0:T.message)),ja(T)&&O&&!b&&v.createElement("div",{className:"sendbird-quote-message__replied-message__text-message"},v.createElement(Me,{className:"sendbird-quote-message__replied-message__text-message__word",testID:"sendbird-quote-message__replied-message__text-message__word",type:be.BODY_2,color:de.ONBACKGROUND_1},y.VOICE_MESSAGE)),(io(T)||Oi(T))&&O&&!b&&v.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message"},v.createElement(yr,{className:"sendbird-quote-message__replied-message__thumbnail-message__image",url:O,alt:L,width:"144px",height:"108px",onLoad:function(){return F(!0)},defaultComponent:v.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__placeholder"},v.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__placeholder__icon"},v.createElement(qe,{type:jo(L)?Se.PLAY:Se.PHOTO,fillColor:ze.ON_BACKGROUND_2,width:"22px",height:"22px"})))}),jo(L)&&!(((o=T==null?void 0:T.thumbnails)===null||o===void 0?void 0:o.length)>0)&&v.createElement(v.Fragment,null,v.createElement("video",{className:"sendbird-quote-message__replied-message__thumbnail-message__video"},v.createElement("source",{src:O,type:L})),v.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover"},v.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover__icon"},v.createElement(qe,{type:Se.PLAY,fillColor:ze.ON_BACKGROUND_2,width:"14px",height:"14px"})))),B&&vc(L)&&v.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover"},v.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover__icon"},v.createElement(qe,{type:Se.GIF,fillColor:ze.THUMBNAIL_ICON,width:"14px",height:"14px"})))),If(T)===js.FILE&&O&&!b&&v.createElement("div",{className:"sendbird-quote-message__replied-message__file-message"},v.createElement(qe,{className:"sendbird-quote-message__replied-message__file-message__type-icon",type:(n={},n[H.IMAGE]=Se.PHOTO,n[H.VIDEO]=Se.PLAY,n[H.AUDIO]=Se.FILE_AUDIO,n[H.GIF]=Se.GIF,n[H.OTHERS]=Se.FILE_DOCUMENT,n)[Zb(L)],fillColor:ze.ON_BACKGROUND_3,width:"16px",height:"16px"}),v.createElement(Me,{className:"sendbird-quote-message__replied-message__file-message__file-name",type:be.BODY_2,color:de.ONBACKGROUND_3},eC(G[G.length-1])))))}var YA=function(e){var n,t=Ut().stringSet,r=Wr(),i=r.message,a=r.hideMenu;return v.createElement(Ei,D({},e,{onClick:function(s){var o;Vi(i)&&tC(i.message),a(),(o=e.onClick)===null||o===void 0||o.call(e,s)}}),(n=e.children)!==null&&n!==void 0?n:v.createElement(v.Fragment,null,v.createElement(Me,{type:be.SUBTITLE_1,color:de.ONBACKGROUND_1},t.MESSAGE_MENU__COPY),v.createElement(qe,{type:Se.COPY,fillColor:ze.PRIMARY,width:"24px",height:"24px"})))},XA=function(e){var n,t,r,i=Ut().stringSet,a=Wr(),s=a.message,o=a.hideMenu,l=a.setQuoteMessage;return v.createElement(Ei,D({},e,{disabled:s.parentMessageId>0,onClick:function(u){var d;l(s),o(),(d=e.onClick)===null||d===void 0||d.call(e,u)}}),(n=e.children)!==null&&n!==void 0?n:v.createElement(v.Fragment,null,v.createElement(Me,{type:be.SUBTITLE_1,color:((t=s.parentMessageId)!==null&&t!==void 0?t:0)>0?de.ONBACKGROUND_4:de.ONBACKGROUND_1},i.MESSAGE_MENU__REPLY),v.createElement(qe,{type:Se.REPLY,fillColor:((r=s.parentMessageId)!==null&&r!==void 0?r:0)>0?ze.ON_BACKGROUND_4:ze.PRIMARY,width:"24px",height:"24px"})))},ZA=function(e){var n,t=Ut().stringSet,r=Wr(),i=r.message,a=r.hideMenu,s=r.onReplyInThread;return v.createElement(Ei,D({},e,{onClick:function(o){var l;s({message:i}),a(),(l=e.onClick)===null||l===void 0||l.call(e,o)}}),(n=e.children)!==null&&n!==void 0?n:v.createElement(v.Fragment,null,v.createElement(Me,{type:be.SUBTITLE_1,color:de.ONBACKGROUND_1},t.MESSAGE_MENU__THREAD),v.createElement(qe,{type:Se.THREAD,fillColor:ze.PRIMARY,width:"24px",height:"24px"})))},JA=function(e){var n,t=Ut().stringSet,r=Wr(),i=r.hideMenu,a=r.showEdit,s=r.isOnline;return v.createElement(Ei,D({},e,{onClick:function(o){var l;s&&(a(!0),i(),(l=e.onClick)===null||l===void 0||l.call(e,o))}}),(n=e.children)!==null&&n!==void 0?n:v.createElement(v.Fragment,null,v.createElement(Me,{type:be.SUBTITLE_1,color:de.ONBACKGROUND_1},t.MESSAGE_MENU__EDIT),v.createElement(qe,{type:Se.EDIT,fillColor:ze.PRIMARY,width:"24px",height:"24px"})))},ew=function(e){var n,t=Ut().stringSet,r=Wr(),i=r.message,a=r.hideMenu,s=r.resendMessage,o=r.isOnline;return v.createElement(Ei,D({},e,{onClick:function(l){var u;o&&(s(i),a(),(u=e.onClick)===null||u===void 0||u.call(e,l))}}),(n=e.children)!==null&&n!==void 0?n:v.createElement(v.Fragment,null,v.createElement(Me,{type:be.SUBTITLE_1,color:de.ONBACKGROUND_1},t.MESSAGE_MENU__RESEND),v.createElement(qe,{type:Se.REFRESH,fillColor:ze.PRIMARY,width:"24px",height:"24px"})))},tw=function(e){var n,t,r,i=Ut().stringSet,a=Wr(),s=a.message,o=a.hideMenu,l=a.deleteMessage,u=a.showRemove,d=a.isOnline,f=a.disableDeleteMessage;return v.createElement(Ei,D({},e,{disabled:typeof f=="boolean"?f:((t=(n=s.threadInfo)===null||n===void 0?void 0:n.replyCount)!==null&&t!==void 0?t:0)>0,onClick:function(m){var p;Ha(s)?l(s):d&&(u(!0),o(),(p=e.onClick)===null||p===void 0||p.call(e,m))}}),(r=e.children)!==null&&r!==void 0?r:v.createElement(v.Fragment,null,v.createElement(Me,{type:be.SUBTITLE_1,color:f?de.ONBACKGROUND_4:de.ONBACKGROUND_1},i.MESSAGE_MENU__DELETE),v.createElement(qe,{type:Se.DELETE,fillColor:ze.PRIMARY,width:"24px",height:"24px"})))},fY=function(e){var n,t=Ut().stringSet,r=Wr(),i=r.hideMenu,a=r.message,s=r.onDownloadClick,o=a.url;return v.createElement(Ei,D({},e,{onClick:function(){i()}}),(n=e.children)!==null&&n!==void 0?n:v.createElement("a",{className:"sendbird-message__contextmenu--hyperlink",rel:"noopener noreferrer",href:o,target:"_blank",onClick:s},v.createElement(Me,{type:be.SUBTITLE_1,color:de.ONBACKGROUND_1},t.MESSAGE_MENU__SAVE),v.createElement(qe,{type:Se.DOWNLOAD,fillColor:ze.PRIMARY,width:"24px",height:"24px"})))},vY=function(e){var n,t,r,i,a=e.channel,s=e.message,o=e.replyType,l=e.userId,u=e.resendMessage,d=e.showEdit,f=e.showRemove,m=e.deleteMenuState,p=e.deleteMessage,E=e.setQuoteMessage,_=e.parentRef,b=e.onReplyInThread,C=e.isOpenedFromThread,y=C===void 0?!1:C,T=e.onDownloadClick,N=T===void 0?null:T,w=e.renderMenuItems,O=e.hideMenu,L=((n=s==null?void 0:s.sender)===null||n===void 0?void 0:n.userId)===l,P=yt().state.config.isOnline,U=Vi(s),B=Vi(s)&&yd(s)&&L,F=Ha(s)&&(s==null?void 0:s.isResendable)&&L,H=!Rs(s)&&L,G=L&&(m===void 0||m!=="HIDE"),j=G&&H,x=!Rs(s)&&Di(s)&&!(ja(s)&&(a!=null&&a.isSuper)||a!=null&&a.isBroadcast),V=o==="QUOTE_REPLY"&&!Ha(s)&&!Rs(s)&&(a==null?void 0:a.isGroupChannel()),K=o==="THREAD"&&!y&&!Ha(s)&&!Rs(s)&&!JO(s)&&(a==null?void 0:a.isGroupChannel()),W=m!==void 0&&m==="DISABLE"||((r=(t=s==null?void 0:s.threadInfo)===null||t===void 0?void 0:t.replyCount)!==null&&r!==void 0?r:0)>0,Q={message:s,hideMenu:O,setQuoteMessage:E,onReplyInThread:b,onMoveToParentMessage:_n,showEdit:d,showRemove:f,deleteMessage:p,resendMessage:u,isOnline:P,disableDeleteMessage:W,triggerRef:_,containerRef:_,onDownloadClick:N};return v.createElement(iC,{value:Q},v.createElement(Li,{className:"sendbird-message__mobile-context-menu",parentRef:_,parentContainRef:_,closeDropdown:O},(i=w==null?void 0:w({items:{CopyMenuItem:YA,ReplyMenuItem:XA,ThreadMenuItem:ZA,EditMenuItem:JA,ResendMenuItem:ew,DeleteMenuItem:tw}}))!==null&&i!==void 0?i:v.createElement(v.Fragment,null,U&&v.createElement(YA,null),V&&v.createElement(XA,null),K&&v.createElement(ZA,null),B&&v.createElement(JA,null),F&&v.createElement(ew,null),j&&v.createElement(tw,null),x&&v.createElement(fY,null))))},nw=function(e){var n,t=Ut().stringSet,r=Wr(),i=r.message,a=r.hideMenu;return v.createElement(pc,D({},e,{onClick:function(s){var o;Vi(i)&&tC(i.message),a(),(o=e.onClick)===null||o===void 0||o.call(e,s)}}),(n=e.children)!==null&&n!==void 0?n:v.createElement(v.Fragment,null,v.createElement(qe,{type:Se.COPY,fillColor:ze.PRIMARY,width:"24px",height:"24px"}),v.createElement(Me,{type:be.SUBTITLE_1,color:de.ONBACKGROUND_1},t.MESSAGE_MENU__COPY)))},rw=function(e){var n,t=Ut().stringSet,r=Wr(),i=r.hideMenu,a=r.showEdit,s=r.isOnline;return v.createElement(pc,D({},e,{onClick:function(o){var l;s&&(a(!0),i(),(l=e.onClick)===null||l===void 0||l.call(e,o))}}),(n=e.children)!==null&&n!==void 0?n:v.createElement(v.Fragment,null,v.createElement(qe,{type:Se.EDIT,fillColor:ze.PRIMARY,width:"24px",height:"24px"}),v.createElement(Me,{type:be.SUBTITLE_1,color:de.ONBACKGROUND_1},t.MESSAGE_MENU__EDIT)))},iw=function(e){var n,t=Ut().stringSet,r=Wr(),i=r.message,a=r.hideMenu,s=r.resendMessage,o=r.isOnline;return v.createElement(pc,D({},e,{onClick:function(l){var u;o&&(s(i),a(),(u=e.onClick)===null||u===void 0||u.call(e,l))}}),(n=e.children)!==null&&n!==void 0?n:v.createElement(v.Fragment,null,v.createElement(qe,{type:Se.REFRESH,fillColor:ze.PRIMARY,width:"24px",height:"24px"}),v.createElement(Me,{type:be.SUBTITLE_1,color:de.ONBACKGROUND_1},t.MESSAGE_MENU__RESEND)))},aw=function(e){var n,t,r,i=Ut().stringSet,a=Wr(),s=a.message,o=a.hideMenu,l=a.setQuoteMessage;return v.createElement(pc,D({},e,{disabled:s.parentMessageId>0,onClick:function(u){var d;l(s),o(),(d=e.onClick)===null||d===void 0||d.call(e,u)}}),(n=e.children)!==null&&n!==void 0?n:v.createElement(v.Fragment,null,v.createElement(qe,{type:Se.REPLY,fillColor:((t=s.parentMessageId)!==null&&t!==void 0?t:0)>0?ze.ON_BACKGROUND_3:ze.PRIMARY,width:"24px",height:"24px"}),v.createElement(Me,{type:be.SUBTITLE_1,color:((r=s.parentMessageId)!==null&&r!==void 0?r:0)>0?de.ONBACKGROUND_4:de.ONBACKGROUND_1},i.MESSAGE_MENU__REPLY)))},sw=function(e){var n,t=Ut().stringSet,r=Wr(),i=r.message,a=r.hideMenu,s=r.onReplyInThread;return v.createElement(pc,D({},e,{onClick:function(o){var l;s({message:i}),a(),(l=e.onClick)===null||l===void 0||l.call(e,o)}}),(n=e.children)!==null&&n!==void 0?n:v.createElement(v.Fragment,null,v.createElement(qe,{type:Se.THREAD,fillColor:ze.PRIMARY,width:"24px",height:"24px"}),v.createElement(Me,{type:be.SUBTITLE_1,color:de.ONBACKGROUND_1},t.MESSAGE_MENU__THREAD)))},ow=function(e){var n,t,r,i=Ut().stringSet,a=Wr(),s=a.message,o=a.hideMenu,l=a.deleteMessage,u=a.showRemove,d=a.isOnline,f=a.disableDeleteMessage;return v.createElement(pc,D({},e,{disabled:typeof f=="boolean"?f:((t=(n=s.threadInfo)===null||n===void 0?void 0:n.replyCount)!==null&&t!==void 0?t:0)>0,onClick:function(m){var p;Ha(s)?l(s):d&&(u(!0),o(),(p=e.onClick)===null||p===void 0||p.call(e,m))}}),(r=e.children)!==null&&r!==void 0?r:v.createElement(v.Fragment,null,v.createElement(qe,{type:Se.DELETE,fillColor:ze.PRIMARY,width:"24px",height:"24px"}),v.createElement(Me,{type:be.SUBTITLE_1,color:f?de.ONBACKGROUND_4:de.ONBACKGROUND_1},i.MESSAGE_MENU__DELETE)))},mY=function(e){var n,t=Ut().stringSet,r=Wr(),i=r.hideMenu,a=r.message,s=r.onDownloadClick,o=a.url;return v.createElement(pc,{onClick:function(){return i()}},(n=e.children)!==null&&n!==void 0?n:v.createElement("a",{className:"sendbird-message__bottomsheet--hyperlink",rel:"noopener noreferrer",href:o,target:"_blank",onClick:s},v.createElement(qe,{type:Se.DOWNLOAD,fillColor:ze.PRIMARY,width:"24px",height:"24px"}),v.createElement(Me,{type:be.SUBTITLE_1,color:de.ONBACKGROUND_1},t.MESSAGE_MENU__SAVE)))},q_=38,pY=function(e){var n,t,r,i,a=e.hideMenu,s=e.channel,o=e.emojiContainer,l=e.message,u=e.replyType,d=e.userId,f=e.resendMessage,m=e.deleteMessage,p=e.toggleReaction,E=e.isReactionEnabled,_=E===void 0?!1:E,b=e.showEdit,C=e.showRemove,y=e.deleteMenuState,T=e.setQuoteMessage,N=e.onReplyInThread,w=e.isOpenedFromThread,O=w===void 0?!1:w,L=e.onDownloadClick,P=e.renderMenuItems,U=((n=l==null?void 0:l.sender)===null||n===void 0?void 0:n.userId)===d,B=yt().state.config.isOnline,F=Vi(l),H=Vi(l)&&yd(l)&&U,G=B&&Ha(l)&&(l==null?void 0:l.isResendable)&&U,j=!Rs(l)&&U,x=U&&(y===void 0||y!=="HIDE"),V=x&&j,K=y!==void 0&&y==="DISABLE"||((r=(t=l==null?void 0:l.threadInfo)===null||t===void 0?void 0:t.replyCount)!==null&&r!==void 0?r:0)>0,W=yd(l)&&Di(l)&&!ja(l),Q=!Ha(l)&&!Rs(l)&&_,J=u==="QUOTE_REPLY"&&!Ha(l)&&!Rs(l)&&(s==null?void 0:s.isGroupChannel())&&!(s!=null&&s.isBroadcast),$=u==="THREAD"&&!O&&!Ha(l)&&!Rs(l)&&!JO(l)&&(s==null?void 0:s.isGroupChannel())&&!(s!=null&&s.isBroadcast),te=Math.floor(window.innerWidth/q_)-1,re=M.useState(!1),ve=re[0],ie=re[1],le=o&&nC(o),Ae=ve?le:le==null?void 0:le.slice(0,te),oe=le&&le.length>te,he={message:l,hideMenu:a,setQuoteMessage:T,onReplyInThread:N,onMoveToParentMessage:function(){},showEdit:b,showRemove:C,deleteMessage:m,resendMessage:f,isOnline:B,disableDeleteMessage:K,triggerRef:null,containerRef:null,onDownloadClick:L};return v.createElement(iC,{value:he},v.createElement(i0,{onBackdropClick:a},v.createElement("div",{className:"sendbird-message__bottomsheet"},Q&&v.createElement("div",{className:"sendbird-message__bottomsheet-reactions"},v.createElement("ul",{className:"sendbird-message__bottomsheet-reaction-bar"},v.createElement("div",{className:zt("sendbird-message__bottomsheet-reaction-bar__row",ve&&"sendbird-message__bottomsheet-reaction-bar__all")},Ae.map(function(me){var Be,pe,ye,Ee=(ye=(pe=(Be=l==null?void 0:l.reactions)===null||Be===void 0?void 0:Be.filter(function(Ue){return Ue.key===me.key})[0])===null||pe===void 0?void 0:pe.userIds)===null||ye===void 0?void 0:ye.some(function(Ue){return Ue===d});return v.createElement(Of,{key:me.key,width:"".concat(q_,"px"),height:"".concat(q_,"px"),selected:Ee,onClick:function(){a(),p==null||p(l,me.key,Ee)},testID:"ui_mobile_emoji_reactions_menu_".concat(me.key)},v.createElement(yr,{url:(me==null?void 0:me.url)||"",width:"28px",height:"28px",placeHolder:function(Ue){var Ye=Ue.style;return v.createElement("div",{style:Ye},v.createElement(qe,{type:Se.QUESTION,fillColor:ze.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}))}),oe&&!ve&&v.createElement(Of,{key:"emoji_more",width:"38px",height:"38px",onClick:function(){return ie(!0)},testID:"ui_mobile_emoji_reactions_menu_emojiadd"},v.createElement(yr,{url:"",width:"28px",height:"28px",placeHolder:function(me){var Be=me.style;return v.createElement("div",{style:Be},v.createElement(qe,{type:Se.EMOJI_MORE,fillColor:ze.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}))))),!ve&&v.createElement("div",{className:"sendbird-message__bottomsheet--actions"},(i=P==null?void 0:P({items:{CopyMenuItem:nw,EditMenuItem:rw,ResendMenuItem:iw,ReplyMenuItem:aw,ThreadMenuItem:sw,DeleteMenuItem:ow}}))!==null&&i!==void 0?i:v.createElement(v.Fragment,null,F&&v.createElement(nw,null),H&&v.createElement(rw,null),G&&v.createElement(iw,null),J&&v.createElement(aw,null),$&&v.createElement(sw,null),V&&v.createElement(ow,null),W&&v.createElement(mY,null))))))},_C=function(e){return v.createElement(v.Fragment,null,e!=null&&e.isReactionEnabled?v.createElement(pY,D({},e)):v.createElement(vY,D({},e)))};function gY(e,n){var t,r=e.className,i=e.threadInfo,a=e.onClick,s=i.mostRepliedUsers,o=s===void 0?[]:s,l=i.replyCount,u=Ut().stringSet;return v.createElement("div",{className:"sendbird-ui-thread-replies ".concat(r),role:"button",onClick:function(d){a==null||a(d),d==null||d.stopPropagation()},onKeyDown:function(d){a==null||a(d),d==null||d.stopPropagation()},ref:n},v.createElement("div",{className:"sendbird-ui-thread-replies__user-profiles"},o.slice(0,4).map(function(d){return v.createElement(Fr,{key:d.userId,className:"sendbird-ui-thread-replies__user-profiles__avatar",src:d==null?void 0:d.profileUrl,alt:"user profile",width:"20px",height:"20px"})}),(o==null?void 0:o.length)>=5&&v.createElement("div",{className:"sendbird-ui-thread-replies__user-profiles__avatar"},v.createElement(Fr,{className:"sendbird-ui-thread-replies__user-profiles__avatar__image",src:(t=o==null?void 0:o[4])===null||t===void 0?void 0:t.profileUrl,alt:"user profile",width:"20px",height:"20px"}),v.createElement("div",{className:"sendbird-ui-thread-replies__user-profiles__avatar__cover"}),v.createElement("div",{className:"sendbird-ui-thread-replies__user-profiles__avatar__plus"},v.createElement(qe,{type:Se.PLUS,fillColor:ze.WHITE,width:"16px",height:"16px"})))),v.createElement(Me,{className:"sendbird-ui-thread-replies__reply-counts",type:be.CAPTION_2,color:de.PRIMARY},l===1?"".concat(l," ").concat(u.CHANNEL__THREAD_REPLY):"".concat(l>99?u.CHANNEL__THREAD_OVER_MAX:l," ").concat(u.CHANNEL__THREAD_REPLIES)),v.createElement(qe,{className:"sendbird-ui-thread-replies__icon",type:Se.CHEVRON_RIGHT,fillColor:ze.PRIMARY,width:"16px",height:"16px"}))}var _Y=v.forwardRef(gY);function EY(e){var n,t,r,i=e.mentionTemplate,a=e.mentionedUserId,s=e.mentionedUserNickname,o=e.isByMe,l=M.useRef(),u=yt().state,d=(n=u==null?void 0:u.config)===null||n===void 0?void 0:n.userId,f=(r=(t=u==null?void 0:u.stores)===null||t===void 0?void 0:t.sdkStore)===null||r===void 0?void 0:r.sdk,m=d===a,p=M.useState(),E=p[0],_=p[1],b=M.useCallback(function(C){if(E||!(f!=null&&f.createApplicationUserListQuery)){C();return}var y=f==null?void 0:f.createApplicationUserListQuery({userIdsFilter:[a]});y.next().then(function(T){(T==null?void 0:T.length)>0&&_(T[0]),C()})},[f,a]);return v.createElement($i,{menuTrigger:function(C){return v.createElement("a",{className:zt("sendbird-word__mention",m&&"sendbird-word__mention--me"),onClick:function(){return b(C)},ref:l,"data-userid":a,"data-nickname":s,"data-sb-mention":!0},v.createElement(Me,{type:be.CAPTION_1,color:o?de.ONCONTENT_1:de.ONBACKGROUND_1},"".concat(i).concat(s)))},menuItems:function(C){return v.createElement(Li,{parentRef:l,parentContainRef:l,closeDropdown:C,style:{paddingTop:"0px",paddingBottom:"0px"}},v.createElement(Xl,{user:E,onSuccess:C,currentUserId:d}))}})}var yY=/https?:\/\//;function Q3(e){var n=e.className,t=n===void 0?"":n,r=e.src,i=e.type,a=e.color,s=e.children,o=yY.test(r)?r:"http://".concat(r);return v.createElement("a",{className:Ne(Ne([],Array.isArray(t)?t:[t],!0),["sendbird-link-label",kO(a)],!1).join(" "),href:o,target:"_blank",rel:"noopener noreferrer",onTouchEnd:function(l){l.preventDefault(),l.nativeEvent.stopImmediatePropagation(),Pd(o)}},v.createElement(Me,{className:"sendbird-link-label__label",testID:"sendbird-link-label__label",type:i,color:a},s))}function bY(e,n,t){return"sb-msg_".concat(e,"_").concat(n,"_").concat(t)}var CY=["https:","http:","tel:","mailto:"];function SY(e){var n=decodeURIComponent(e);try{var t=new URL(n).protocol;return CY.some(function(r){return r===t.toLowerCase()})?n:"#"}catch{!n.startsWith("http://")&&!n.startsWith("https://")&&(n="https://"+n)}return n}function Md(e){var n=e.tokens,t=K3(),r=t==null?void 0:t.message,i=t==null?void 0:t.isByMe,a=r.updatedAt,s=r.createdAt;return v.createElement(v.Fragment,null,n==null?void 0:n.map(function(o,l){var u=bY(s,a,l);return ji(o.type).with(Ur.markdown,function(){var d=o,f=d.groups;return v.createElement("span",{className:"sendbird-word",key:u,"data-testid":"sendbird-ui-word"},ji(d.markdownType).with("bold",function(){return v.createElement("span",{style:{fontWeight:"bold"}},v.createElement(Md,{tokens:nb({messageText:f[1]})}))}).with("url",function(){return v.createElement("a",{className:i?"sendbird-label--color-oncontent-1":"sendbird-label--color-onbackground-1",href:SY(f[2])},v.createElement(Md,{tokens:nb({messageText:f[1]})}))}).otherwise(function(){return v.createElement(v.Fragment,null)}))}).with(Ur.mention,function(){return v.createElement("span",{className:"sendbird-word",key:u,"data-testid":"sendbird-ui-word"},v.createElement(EY,{mentionTemplate:Vf,mentionedUserId:o.userId,mentionedUserNickname:o.value,isByMe:i}))}).with(Ur.url,function(){return v.createElement("span",{className:"sendbird-word",key:u,"data-testid":"sendbird-ui-word"},v.createElement(Q3,{src:o.value,type:be.BODY_1,color:i?de.ONCONTENT_1:de.ONBACKGROUND_1},o.value))}).otherwise(function(){return v.createElement(v.Fragment,{key:u},LQ(o.value))})}))}function TY(e){var n,t,r,i,a=e.className,s=e.message,o=e.isByMe,l=o===void 0?!1:o,u=e.mouseHover,d=u===void 0?!1:u,f=e.isMentionEnabled,m=f===void 0?!1:f,p=e.isReactionEnabled,E=p===void 0?!1:p,_=e.isMarkdownEnabled,b=_===void 0?!1:_,C=e.onMessageHeightChange,y=C===void 0?function(){}:C,T=M.useContext(On).stringSet,N=m&&((n=s==null?void 0:s.mentionedMessageTemplate)===null||n===void 0?void 0:n.length)>0&&(s==null?void 0:s.mentionedUsers)&&((t=s==null?void 0:s.mentionedUsers)===null||t===void 0?void 0:t.length)>0,w=M.useMemo(function(){var L;return Wl(N?{mentionedUsers:(L=s==null?void 0:s.mentionedUsers)!==null&&L!==void 0?L:void 0,messageText:s==null?void 0:s.mentionedMessageTemplate,includeMarkdown:b}:{messageText:s==null?void 0:s.message,includeMarkdown:b})},[s==null?void 0:s.updatedAt,s==null?void 0:s.message]),O=function(){var L;return Pd((L=s==null?void 0:s.ogMetaData)===null||L===void 0?void 0:L.url)};return v.createElement("div",{className:ai([a??"","sendbird-og-message-item-body",l?"outgoing":"incoming",d?"mouse-hover":"",E&&((r=s==null?void 0:s.reactions)===null||r===void 0?void 0:r.length)>0?"reactions":""])},v.createElement(Me,{type:be.BODY_1,color:l?de.ONCONTENT_1:de.ONBACKGROUND_1},v.createElement("div",{className:k3},v.createElement(Md,{tokens:w}),Zp(s)&&v.createElement(Me,{className:"sendbird-og-message-item-body__text-bubble__message",type:be.BODY_1,color:l?de.ONCONTENT_2:de.ONBACKGROUND_2}," ".concat(T.MESSAGE_EDITED," ")))),((i=s.ogMetaData)===null||i===void 0?void 0:i.defaultImage)&&v.createElement(MY,{onClick:O,ogImage:s.ogMetaData.defaultImage,onMessageHeightChange:y}),s.ogMetaData&&v.createElement(NY,{onClick:O,ogMetaData:s.ogMetaData,onMessageHeightChange:y}),v.createElement("div",{className:"sendbird-og-message-item-body__cover"}))}var MY=function(e){var n=e.onClick,t=e.ogImage,r=e.onMessageHeightChange,i=M.useRef(null),a=pr().isMobile;return v.createElement("div",{ref:i,className:zt("sendbird-og-message-item-body__og-thumbnail",!t.url&&"sendbird-og-message-item-body__og-thumbnail__empty"),onClick:function(){return n()}},v.createElement(yr,{className:"sendbird-og-message-item-body__og-thumbnail__image",url:t.url||"",alt:t.alt||"",width:"100%",height:a?"136px":"240px",onLoad:r,onError:function(){var s,o;try{(o=(s=i==null?void 0:i.current)===null||s===void 0?void 0:s.classList)===null||o===void 0||o.add("sendbird-og-message-item-body__og-thumbnail__empty")}catch{}},defaultComponent:v.createElement("div",{className:"sendbird-og-message-item-body__og-thumbnail__place-holder"},v.createElement(qe,{className:"sendbird-og-message-item-body__og-thumbnail__place-holder__icon",type:Se.THUMBNAIL_NONE,width:"56px",height:"56px"}))}))},NY=function(e){var n=e.onClick,t=e.ogMetaData,r=e.onMessageHeightChange;return M.useEffect(function(){r()},[t.title,t.description,t.url]),v.createElement("div",{className:"sendbird-og-message-item-body__description",onClick:function(){return n()}},t.title&&v.createElement(Me,{className:"sendbird-og-message-item-body__description__title",type:be.SUBTITLE_2,color:de.ONBACKGROUND_1},t.title),t.description&&v.createElement(Me,{className:"sendbird-og-message-item-body__description__description",type:be.BODY_2,color:de.ONBACKGROUND_1},t.description),t.url&&v.createElement(Me,{className:"sendbird-og-message-item-body__description__url",type:be.CAPTION_3,color:de.ONBACKGROUND_2},t.url))};function IY(e){var n,t=e.className,r=t===void 0?"":t,i=e.message,a=e.isByMe,s=a===void 0?!1:a,o=e.mouseHover,l=o===void 0?!1:o,u=e.isMentionEnabled,d=u===void 0?!1:u,f=e.isReactionEnabled,m=f===void 0?!1:f,p=e.isMarkdownEnabled,E=p===void 0?!1:p,_=M.useContext(On).stringSet,b=d&&(i==null?void 0:i.mentionedMessageTemplate)&&i.mentionedMessageTemplate.length>0&&(i==null?void 0:i.mentionedUsers)&&i.mentionedUsers.length>0,C=M.useMemo(function(){var y;return Wl(b?{mentionedUsers:(y=i==null?void 0:i.mentionedUsers)!==null&&y!==void 0?y:void 0,messageText:i==null?void 0:i.mentionedMessageTemplate,includeMarkdown:E}:{messageText:i==null?void 0:i.message,includeMarkdown:E})},[i==null?void 0:i.updatedAt,i==null?void 0:i.message]);return v.createElement(Me,{type:be.BODY_1,color:s?de.ONCONTENT_1:de.ONBACKGROUND_1},v.createElement("div",{className:ai([r,oC,s?"outgoing":"incoming",l?"mouse-hover":"",m&&((n=i==null?void 0:i.reactions)===null||n===void 0?void 0:n.length)>0?"reactions":""])},v.createElement(Md,{tokens:C}),Zp(i)&&v.createElement(Me,{className:"sendbird-text-message-item-body__message edited",type:be.BODY_1,color:s?de.ONCONTENT_2:de.ONBACKGROUND_2}," ".concat(_.MESSAGE_EDITED," "))))}function AY(e){var n=this,t,r=e.className,i=r===void 0?"":r,a=e.message,s=e.isByMe,o=s===void 0?!1:s,l=e.mouseHover,u=l===void 0?!1:l,d=e.isReactionEnabled,f=d===void 0?!1:d,m=e.truncateLimit,p=e.onBeforeDownloadFileMessage,E=null;try{var _=yt().state.config.logger;E=_}catch{}var b=pr().isMobile,C=m??(b?20:void 0),y=function(){return Pd(a==null?void 0:a.url)},T=p?function(){return tn(n,void 0,void 0,function(){var N,w,O,L;return nn(this,function(P){switch(P.label){case 0:return P.trys.push([0,2,,3]),[4,p({message:a})];case 1:return N=P.sent(),N?y():(O=E==null?void 0:E.info)===null||O===void 0||O.call(E,"FileMessageItemBody: Not allowed to download."),[3,3];case 2:return w=P.sent(),(L=E==null?void 0:E.error)===null||L===void 0||L.call(E,"FileMessageItemBody: Error occurred while determining download continuation:",w),[3,3];case 3:return[2]}})})}:y;return v.createElement("div",{className:ai([i,"sendbird-file-message-item-body",o?"outgoing":"incoming",u?"mouse-hover":"",f&&((t=a==null?void 0:a.reactions)===null||t===void 0?void 0:t.length)>0?"reactions":""])},v.createElement("div",{className:"sendbird-file-message-item-body__file-icon"},v.createElement(qe,{className:"sendbird-file-message-item-body__file-icon__icon",type:{IMAGE:Se.PHOTO,VIDEO:Se.PLAY,AUDIO:Se.FILE_AUDIO,GIF:Se.GIF,OTHERS:Se.FILE_DOCUMENT}[Zb(a==null?void 0:a.type)],fillColor:ze.PRIMARY,width:"24px",height:"24px"})),v.createElement(so,{className:"sendbird-file-message-item-body__file-name",onClick:T,color:o?ma.ONCONTENT_1:ma.ONBACKGROUND_1},v.createElement(Me,{className:"sendbird-file-message-item-body__file-name__text",testID:"sendbird-file-message-item-body__file-name__text",type:be.BODY_1,color:o?de.ONCONTENT_1:de.ONBACKGROUND_1},eC((a==null?void 0:a.name)||(a==null?void 0:a.url),C))))}function EC(e,n){M.useLayoutEffect(function(){var r;(r=e.current)===null||r===void 0||r.focus()},[e.current]);var t=mr(function(r){var i=n[r.key];i==null||i(r),r.stopPropagation()});return t}var $f={SINGLE:"SINGLE",MULTI:"MULTI"};function wY(e){var n=e.props;if(n.viewerType===$f.MULTI){var t=n,r=t.fileInfoList,i=t.currentIndex;return r[i]}var a=n;return{name:a.name,type:a.type,url:a.url}}function RY(e){if(e.viewerType!==$f.MULTI){var n=e.onDelete,t=e.isByMe,r=e.disableDelete,i=e.className;return t?v.createElement("div",{className:"sendbird-fileviewer__header__right__actions__delete ".concat(i)},v.createElement(qe,{className:r?"disabled":"",type:Se.DELETE,fillColor:r?ze.GRAY:ze.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:function(a){r||n==null||n(a)}})):v.createElement(v.Fragment,null)}return v.createElement(v.Fragment,null)}function OY(e){if(e.viewerType===$f.MULTI){var n=e.onClickLeft,t=e.onClickRight;return v.createElement("div",{className:"sendbird-file-viewer-slider"},v.createElement("div",{className:"sendbird-file-viewer-arrow--left"},v.createElement(qe,{type:Se.SLIDE_LEFT,fillColor:ze.ON_BACKGROUND_1,height:dm,width:dm,onClick:function(r){n==null||n(),r.stopPropagation()}})),v.createElement("div",{className:"sendbird-file-viewer-arrow--right"},v.createElement(qe,{type:Se.SLIDE_LEFT,fillColor:ze.ON_BACKGROUND_1,height:dm,width:dm,onClick:function(r){r.stopPropagation(),t==null||t()}})))}return v.createElement(v.Fragment,null)}var lw=function(e){var n=e.profileUrl,t=e.nickname,r=e.onClose,i=e.onDownloadClick,a=e,s=a.onClickLeft,o=a.onClickRight,l=M.useRef(null),u=EC(l,{Escape:function(_){return r==null?void 0:r(_)},ArrowLeft:function(){return s==null?void 0:s()},ArrowRight:function(){return o==null?void 0:o()}}),d=wY({props:e}),f=d.name,m=d.type,p=d.url,E=M.useContext(On).stringSet;return v.createElement(wr,{onClose:r},v.createElement("div",{className:"sendbird-fileviewer","data-testid":"sendbird-fileviewer",onKeyDown:u,tabIndex:1,ref:l},v.createElement("div",{className:"sendbird-fileviewer__header"},v.createElement("div",{className:"sendbird-fileviewer__header__left"},v.createElement("div",{className:"sendbird-fileviewer__header__left__avatar"},v.createElement(Fr,{height:"32px",width:"32px",src:n})),v.createElement("div",{className:"sendbird-fileviewer__header__left__text-container"},v.createElement(Me,{className:"sendbird-fileviewer__header__left__filename",type:be.H_2,color:de.ONBACKGROUND_1},f),v.createElement(Me,{className:"sendbird-fileviewer__header__left__sender-name",type:be.BODY_1,color:de.ONBACKGROUND_2},t))),v.createElement("div",{className:"sendbird-fileviewer__header__right"},Nf(m)&&v.createElement("div",{className:"sendbird-fileviewer__header__right__actions"},v.createElement("a",{className:"sendbird-fileviewer__header__right__actions__download",rel:"noopener noreferrer",href:p,target:"_blank",onClick:i},v.createElement(qe,{type:Se.DOWNLOAD,fillColor:ze.ON_BACKGROUND_1,height:"24px",width:"24px"})),v.createElement(RY,D({className:"sendbird-fileviewer__header__right__actions__delete"},e))),v.createElement("div",{className:"sendbird-fileviewer__header__right__actions__close"},v.createElement(qe,{type:Se.CLOSE,fillColor:ze.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:function(_){return r==null?void 0:r(_)}})))),v.createElement("div",{className:"sendbird-fileviewer__content"},jo(m)&&v.createElement("video",{controls:!0,className:"sendbird-fileviewer__content__video"},v.createElement("source",{src:p,type:m})),Ds(m)&&v.createElement("img",{src:p,alt:f,className:e.viewerType===$f.MULTI?"sendbird-fileviewer__content__img__multi":"sendbird-fileviewer__content__img"}),!Nf(m)&&v.createElement("div",{className:"sendbird-fileviewer__content__unsupported"},v.createElement(Me,{type:be.H_1,color:de.ONBACKGROUND_1},(E==null?void 0:E.UI__FILE_VIEWER__UNSUPPORT)||"Unsupported message")),v.createElement(OY,D({},e)))))};function s0(e){var n,t,r,i=e.message,a=e.statefulFileInfoList,s=a===void 0?[]:a,o=e.onClose,l=e.isByMe,u=l===void 0?!1:l,d=e.onDelete,f=e.currentIndex,m=e.onClickLeft,p=e.onClickRight,E=e.onDownloadClick;if(Oi(i)){var _=i;return v.createElement(lw,{profileUrl:_.sender.profileUrl,nickname:_.sender.nickname,viewerType:$f.MULTI,fileInfoList:s.filter(function(b){return b.url}).map(function(b){return{name:b.fileName||"",type:b.mimeType||"",url:b.url||""}}),currentIndex:f||0,onClickLeft:m||_n,onClickRight:p||_n,onClose:o,onDownloadClick:E})}else if(Di(i)){var _=i;return kd.createPortal(v.createElement(lw,{profileUrl:(n=_.sender)===null||n===void 0?void 0:n.profileUrl,nickname:(t=_.sender)===null||t===void 0?void 0:t.nickname,name:_.name,type:_.type,url:_==null?void 0:_.url,isByMe:u,disableDelete:(((r=_.threadInfo)===null||r===void 0?void 0:r.replyCount)||0)>0,onClose:o,onDelete:d||_n,onDownloadClick:E}),document.getElementById(nc))}return v.createElement(v.Fragment,null)}function LY(e){var n,t=e.children,r=e.className,i=e.message,a=e.isReactionEnabled;return v.createElement("div",{className:"sendbird-image-grid-wrap"},v.createElement("div",{className:ai([r??"","sendbird-image-grid",a&&((n=i==null?void 0:i.reactions)===null||n===void 0?void 0:n.length)>0?"reactions":""])},t))}var UY=400,K_=8,Yc=4,DY=54,Em=40,kY=48,PY=320,uw=28,cw=12,xY=200,FY=8,BY=32,HY=60,W_={CHAT_WEB:"calc(".concat(UY/2,"px - ").concat((K_+Yc)/2,"px)"),CHAT_MOBILE:"calc(50vw - ".concat((kY+Em+DY+K_+Yc)/2,"px)"),THREAD_PARENT_WEB:"calc(".concat((PY-(uw+Em+cw+Yc))/2,"px)"),THREAD_PARENT_MOBILE:"calc(50vw - ".concat((uw+Em+cw+Yc)/2,"px)"),THREAD_CHILD_WEB:"calc(".concat((xY-FY-Yc)/2,"px)"),THREAD_CHILD_MOBILE:"calc(50vw - ".concat((BY+Em+HY+K_+Yc)/2,"px)")},GY={CHAT_WEB:"6px",CHAT_MOBILE:"6px",THREAD_PARENT_WEB:"6px",THREAD_PARENT_MOBILE:"6px",THREAD_CHILD_WEB:"6px",THREAD_CHILD_MOBILE:"6px"},Xc="34px",Mp={PARENT:"parent",CHILD:"child"};function Y3(e){var n=this,t=e.className,r=e.message,i=e.isReactionEnabled,a=i===void 0?!1:i,s=e.threadMessageKindKey,o=e.statefulFileInfoList,l=o===void 0?[]:o,u=e.onBeforeDownloadFileMessage,d=u===void 0?null:u,f=yt().state.config.logger,m=M.useState(-1),p=m[0],E=m[1];function _(){E(-1)}function b(){E(p===0?l.length-1:p-1)}function C(){E(p===l.length-1?0:p+1)}return s?v.createElement(v.Fragment,null,p>-1&&v.createElement(s0,{message:r,statefulFileInfoList:l,currentIndex:p,onClickLeft:b,onClickRight:C,onClose:_,onDownloadClick:function(y){return tn(n,void 0,void 0,function(){var T,N,w,O;return nn(this,function(L){switch(L.label){case 0:if(!d)return[2];L.label=1;case 1:return L.trys.push([1,3,,4]),[4,d({message:r,index:p})];case 2:return T=L.sent(),T||(y.preventDefault(),(w=f==null?void 0:f.info)===null||w===void 0||w.call(f,"MultipleFilesMessageItemBody: Not allowed to download.")),[3,4];case 3:return N=L.sent(),(O=f==null?void 0:f.error)===null||O===void 0||O.call(f,"MultipleFilesMessageItemBody: Error occurred while determining download continuation:",N),[3,4];case 4:return[2]}})})}}),v.createElement(LY,{className:t,message:r,isReactionEnabled:a},l.map(function(y,T){var N,w,O,L;return v.createElement("div",{className:"sendbird-multiple-files-image-renderer-wrapper",onClick:r.sendingStatus===gn.SUCCEEDED?function(){return E(T)}:void 0,key:"sendbird-multiple-files-image-renderer-".concat(T,"-").concat(y.url)},v.createElement(yr,{url:(L=(O=(w=(N=y.thumbnails)===null||N===void 0?void 0:N[0])===null||w===void 0?void 0:w.url)!==null&&O!==void 0?O:y.url)!==null&&L!==void 0?L:"",fixedSize:!1,width:W_[s],maxSideLength:W_.CHAT_WEB,height:W_[s],borderRadius:mW(GY[s],T,l.length),shadeOnHover:!0,isUploaded:!!y.isUploaded,placeHolder:function(P){var U=P.style;return y.mimeType&&vc(y.mimeType)?v.createElement(Q_.GIF,{style:U}):v.createElement(Q_.Default,{style:U})},defaultComponent:v.createElement(Q_.LoadError,null)}))}))):v.createElement(v.Fragment,null)}var Q_={Default:function(e){var n=e.style;return v.createElement("div",{className:"sendbird-multiple-files-image-renderer__thumbnail__placeholder",style:n},v.createElement(qe,{type:Se.PHOTO,fillColor:ze.ON_BACKGROUND_2,width:Xc,height:Xc}))},GIF:function(e){var n=e.style;return v.createElement("div",{className:"sendbird-multiple-files-image-renderer__thumbnail__placeholder",style:n},v.createElement("div",{className:"sendbird-multiple-files-image-renderer__thumbnail__placeholder__icon"},v.createElement(qe,{type:Se.GIF,fillColor:ze.THUMBNAIL_ICON,width:Xc,height:Xc})))},LoadError:function(){return v.createElement("div",{className:"sendbird-multiple-files-image-renderer__thumbnail__placeholder"},v.createElement(qe,{type:Se.THUMBNAIL_NONE,fillColor:ze.ON_BACKGROUND_2,width:Xc,height:Xc}))}};function yC(e){var n=e.threadMessageKind,t=e.isMobile,r=M.useMemo(function(){return ji(n).with(Mp.PARENT,function(){return t?"THREAD_PARENT_MOBILE":"THREAD_PARENT_WEB"}).with(Mp.CHILD,function(){return t?"THREAD_CHILD_MOBILE":"THREAD_CHILD_WEB"}).otherwise(function(){return t?"CHAT_MOBILE":"CHAT_WEB"})},[t,n]);return r}var bC=function(e){var n,t,r=M.useRef(new Map),i=function(s,o){return!r.current.has(s)&&o&&r.current.set(s,URL.createObjectURL(o)),r.current.get(s)},a=function(){r.current.size>0&&(r.current.forEach(function(s){return URL.revokeObjectURL(s)}),r.current.clear())};return M.useEffect(function(){return function(){return a()}},[]),!e||!e.isMultipleFilesMessage||!e.isMultipleFilesMessage()?[]:e.sendingStatus===gn.SUCCEEDED?(a(),e.fileInfoList.map(function(s){var o,l;return D(D({},s),{url:s.url,isUploaded:!0,mimeType:(o=s.mimeType)!==null&&o!==void 0?o:void 0,fileName:(l=s.fileName)!==null&&l!==void 0?l:void 0})})):(t=(n=e==null?void 0:e.messageParams)===null||n===void 0?void 0:n.fileInfoList.map(function(s,o){var l,u;return D(D({},s),{url:(u=(l=i(o))!==null&&l!==void 0?l:s.fileUrl)!==null&&u!==void 0?u:s.file instanceof Blob?i(o,s.file):void 0,isUploaded:!s.file&&typeof s.fileUrl=="string"&&s.fileUrl.length>0})}))!==null&&t!==void 0?t:[]},rb={PRIMARY:"progress-bar-color--primary",GRAY:"progress-bar-color--gray"},X3=function(e){var n=e.className,t=n===void 0?"":n,r=e.disabled,i=r===void 0?!1:r,a=e.maxSize,s=e.currentSize,o=s===void 0?0:s,l=e.colorType,u=l===void 0?rb.PRIMARY:l,d=M.useMemo(function(){return"".concat(o/a*100,"%")},[o,a]);return v.createElement("div",{className:zt("sendbird-progress-bar",t,u,i&&"progress-bar--disabled")},v.createElement("div",{className:"sendbird-progress-bar__fill",style:{width:d}}))},Z3=function(e){var n,t=e.key,r=t===void 0?"":t,i=e.channelUrl,a=i===void 0?"":i,s=e.audioFile,o=e.audioFileUrl,l=o===void 0?"":o,u=e.audioFileMimeType,d=u===void 0?xo:u,f=D9(a,r),m=RO(),p=m.play,E=m.pause,_=m.stop,b=m.voicePlayerStore,C=xO().isRecordable,y=((n=b==null?void 0:b.audioStorage)===null||n===void 0?void 0:n[f])||Uu(),T=function(){C||p==null||p({groupKey:f,audioFile:s,audioFileUrl:l,audioFileMimeType:d})},N=function(){E==null||E(f)},w=function(O){O===void 0&&(O=""),_==null||_(O)};return M.useEffect(function(){return function(){var O;if(s||l){var L=document.getElementById(RE);(O=L==null?void 0:L.pause)===null||O===void 0||O.call(L)}}},[]),{play:T,pause:N,stop:w,playbackTime:((y==null?void 0:y.playbackTime)||0)*1e3,duration:((y==null?void 0:y.duration)||0)*1e3,playingStatus:y.playingStatus}},J3=function(e){var n=e.className,t=e.time,r=t===void 0?0:t,i=e.labelType,a=i===void 0?be.CAPTION_2:i,s=e.labelColor,o=s===void 0?de.ONCONTENT_1:s,l=r<0?0:r,u=Math.floor(l/36e5),d=Math.floor(l%36e5/6e4),f=Math.floor(l%36e5%6e4/1e3);return v.createElement("div",{className:"sendbird-ui-play-time ".concat(n)},v.createElement(Me,{type:a,color:o},"".concat(u?u+":":"").concat(d<10?"0":"").concat(d||"0",":").concat(f<10?"0":"").concat(f)))},eL=function(e){var n,t=e.className,r=e.message,i=e.channelUrl,a=e.isByMe,s=a===void 0?!1:a,o=e.isReactionEnabled,l=o===void 0?!1:o,u=M.useState(!1),d=u[0],f=u[1],m=Z3({channelUrl:i,key:"".concat(r==null?void 0:r.messageId),audioFileUrl:r==null?void 0:r.url,audioFileMimeType:r==null?void 0:r.type}),p=m.play,E=m.pause,_=m.playbackTime,b=_===void 0?0:_,C=m.duration,y=m.playingStatus,T=y===void 0?As.IDLE:y;M.useEffect(function(){var w;l&&((w=r==null?void 0:r.reactions)===null||w===void 0?void 0:w.length)>0?f(!0):f(!1)},[l,(n=r==null?void 0:r.reactions)===null||n===void 0?void 0:n.length]);var N=M.useMemo(function(){var w,O=1;if(r!=null&&r.metaArrays){var L=(w=r==null?void 0:r.metaArrays.find(function(P){return P.key==="KEY_VOICE_MESSAGE_DURATION"}))===null||w===void 0?void 0:w.value[0];return L?parseInt(L):O}return O},[r==null?void 0:r.metaArrays]);return v.createElement("div",{className:zt("sendbird-voice-message-item-body",t,d&&"is-reactions-contained")},v.createElement(X3,{className:"sendbird-voice-message-item-body__progress-bar",maxSize:C||N,currentSize:b,colorType:s?rb.PRIMARY:rb.GRAY}),v.createElement("div",{className:"sendbird-voice-message-item-body__status-button"},(T===As.IDLE||T===As.PAUSED)&&v.createElement("div",{className:"sendbird-voice-message-item-body__status-button__button",onClick:p},v.createElement(qe,{width:"18px",height:"18px",type:Se.PLAY,fillColor:ze.PRIMARY})),T===As.PREPARING&&v.createElement(Xo,{width:"22.2px",height:"22.2px"},v.createElement(qe,{width:"22.2px",height:"22.2px",type:Se.SPINNER,fillColor:ze.PRIMARY_2})),T===As.PLAYING&&v.createElement("div",{className:"sendbird-voice-message-item-body__status-button__button",onClick:function(){E()}},v.createElement("div",{className:"sendbird-voice-message-item-body__status-button__button__pause"},v.createElement("div",{className:"sendbird-voice-message-item-body__status-button__button__pause__inner"}),v.createElement("div",{className:"sendbird-voice-message-item-body__status-button__button__pause__inner"})))),v.createElement(J3,{className:"sendbird-voice-message-item-body__playback-time",time:N-b,labelType:be.BODY_1,labelColor:s?de.ONCONTENT_1:de.ONBACKGROUND_1}))};function zY(e){var n,t,r=e.className,i=r===void 0?"":r,a=e.message,s=e.isByMe,o=s===void 0?!1:s,l=e.mouseHover,u=l===void 0?!1:l,d=e.isReactionEnabled,f=d===void 0?!1:d,m=e.showFileViewer,p=m===void 0?_n:m,E=e.style,_=E===void 0?{}:E,b=W3(a),C=M.useState(!1),y=C[0],T=C[1],N=cs({onLongPress:_n,onClick:function(){yd(a)&&(p==null||p(!0))}});return v.createElement("div",D({className:ai([i,"sendbird-thumbnail-message-item-body",o?"outgoing":"incoming",u?"mouse-hover":"",f&&((t=(n=a.reactions)===null||n===void 0?void 0:n.length)!==null&&t!==void 0?t:0)>0?"reactions":""])},N),v.createElement(yr,{className:"sendbird-thumbnail-message-item-body__thumbnail",url:b||Td(a),alt:Tp(a),width:(_==null?void 0:_.width)||"360px",height:(_==null?void 0:_.height)||"270px",onLoad:function(){T(!0)},placeHolder:function(w){var O=w.style;return v.createElement("div",{className:"sendbird-thumbnail-message-item-body__placeholder",style:O})}}),Ys(a)&&!b&&!y&&v.createElement("video",{className:"sendbird-thumbnail-message-item-body__video"},v.createElement("source",{src:Td(a),type:Tp(a)})),v.createElement("div",{className:"sendbird-thumbnail-message-item-body__image-cover"}),(Ys(a)||yp(a))&&v.createElement("div",{className:"sendbird-thumbnail-message-item-body__icon-wrapper"},v.createElement("div",{className:"sendbird-thumbnail-message-item-body__icon-wrapper__icon"},v.createElement(qe,{type:Ys(a)?Se.PLAY:Se.GIF,fillColor:ze.THUMBNAIL_ICON,width:"34px",height:"34px"}))))}function jY(e){var n,t=e.className,r=e.message,i=e.isByMe,a=i===void 0?!1:i,s=e.mouseHover,o=s===void 0?!1:s,l=e.isReactionEnabled,u=l===void 0?!1:l,d=M.useContext(On).stringSet;return v.createElement("div",{className:ai([t??"","sendbird-unknown-message-item-body",a?"outgoing":"incoming",o?"mouse-hover":"",u&&((n=r==null?void 0:r.reactions)===null||n===void 0?void 0:n.length)>0?"reactions":""])},v.createElement(Me,{className:"sendbird-unknown-message-item-body__header",type:be.BODY_1,color:a?de.ONCONTENT_1:de.ONBACKGROUND_1},d.UNKNOWN__UNKNOWN_MESSAGE_TYPE),v.createElement(Me,{className:"sendbird-unknown-message-item-body__description",type:be.BODY_1,color:a?de.ONCONTENT_2:de.ONBACKGROUND_2},d.UNKNOWN__CANNOT_READ_MESSAGE))}var ft;(function(e){e.Box="box",e.Text="text",e.Image="image",e.TextButton="textButton",e.ImageButton="imageButton",e.Carousel="carouselView"})(ft||(ft={}));const Np=(e,n)=>typeof n[e]!="string"?{}:{[e]:VY(n[e])};function VY(e){return e.startsWith("#")?e.length===9?`#${e.slice(3)}${e[1]}${e[2]}`:e.length===5?`#${e.slice(2)}${e[1]}`:e:e}const Y_=e=>e?{viewStyle:Object.assign(Object.assign(Object.assign({},e),Np("backgroundColor",e)),Np("borderColor",e))}:{},$Y=e=>e?{textStyle:Object.assign(Object.assign({},e),Np("color",e))}:{},qY=e=>e?{imageStyle:Object.assign(Object.assign({},e),Np("tintColor",e))}:{},KY={run(e){return e.type===ft.Text||e.type===ft.TextButton?Object.assign(Object.assign(Object.assign({},e),Y_(e.viewStyle)),$Y(e.textStyle)):e.type===ft.ImageButton||e.type===ft.Image?Object.assign(Object.assign(Object.assign({},e),Y_(e.viewStyle)),qY(e.imageStyle)):Object.assign(Object.assign({},e),Y_(e.viewStyle))}},Fl=e=>typeof e=="string"?!Number.isNaN(Number(e)):typeof e=="number"&&!Number.isNaN(e),Nd=(e,n)=>n[e]===void 0||n[e]===null?{}:Fl(n[e])?{[e]:Number(n[e])}:{},dw=(e,n)=>n?{[e]:{left:Fl(n.left)?Number(n.left):n.left,right:Fl(n.right)?Number(n.right):n.right,top:Fl(n.top)?Number(n.top):n.top,bottom:Fl(n.bottom)?Number(n.bottom):n.bottom}}:{},hw=(e,n)=>n?{[e]:{type:n.type,value:Fl(n.value)?Number(n.value):n.value}}:{},WY=e=>e?{metaData:{pixelWidth:Fl(e.pixelWidth)?Number(e.pixelWidth):e.pixelWidth,pixelHeight:Fl(e.pixelHeight)?Number(e.pixelHeight):e.pixelHeight}}:{},QY=e=>e?{viewStyle:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),Nd("borderWidth",e)),Nd("radius",e)),dw("margin",e.margin)),dw("padding",e.padding))}:{},YY=e=>e?{textStyle:Object.assign(Object.assign(Object.assign({},e),Nd("size",e)),Nd("weight",e))}:{},XY=e=>e?{carouselStyle:Object.assign(Object.assign({},e),Nd("spacing",e))}:{},o0=e=>Object.assign(Object.assign(Object.assign({},hw("width",e.width)),hw("height",e.height)),QY(e.viewStyle)),ZY=e=>Object.assign(Object.assign(Object.assign({},o0(e)),YY(e.textStyle)),Nd("maxTextLines",e)),JY=e=>Object.assign(Object.assign({},o0(e)),WY(e.metaData)),eX=e=>Object.assign(Object.assign(Object.assign({},o0(e)),XY(e.carouselStyle)),{items:e.items.map(n=>Object.assign(Object.assign({},n),{body:Object.assign(Object.assign({},n.body),{items:n.body.items.map(t=>tL.run(t))})}))}),tL={run(e){return e.type===ft.Text||e.type===ft.TextButton?Object.assign(Object.assign({},e),ZY(e)):e.type===ft.ImageButton||e.type===ft.Image?Object.assign(Object.assign({},e),JY(e)):e.type===ft.Carousel?Object.assign(Object.assign({},e),eX(e)):Object.assign(Object.assign({},e),o0(e))}},tX=()=>{},nL=e=>{var n;const t=(e==null?void 0:e.defaultMapper)||tX,r={defaultMapper:t,mapBoxProps:(e==null?void 0:e.mapBoxProps)||t,mapTextProps:(e==null?void 0:e.mapTextProps)||t,mapImageProps:(e==null?void 0:e.mapImageProps)||t,mapTextButtonProps:(e==null?void 0:e.mapTextButtonProps)||t,mapImageButtonProps:(e==null?void 0:e.mapImageButtonProps)||t,mapCarouselProps:(e==null?void 0:e.mapCarouselProps)||t},i=[KY,tL,...(n=e==null?void 0:e.transforms)!==null&&n!==void 0?n:[]],a=new Set;return{setTransforms(s){i.length=0,i.push(...s),a.clear()},addTransforms(s){i.push(...s)},parse(s,o){const l=i.reduce((u,d)=>d.run(u),s);switch(l.type){case ft.Box:return{transformed:l,properties:r.mapBoxProps(l,o)};case ft.Text:return{transformed:l,properties:r.mapTextProps(l,o)};case ft.Image:return{transformed:l,properties:r.mapImageProps(l,o)};case ft.TextButton:return{transformed:l,properties:r.mapTextButtonProps(l,o)};case ft.ImageButton:return{transformed:l,properties:r.mapImageButtonProps(l,o)};case ft.Carousel:return{transformed:l,properties:r.mapCarouselProps(l,o)};default:return{transformed:l,properties:void 0}}}}},Zc=({children:e})=>v.createElement(v.Fragment,null,e);function rL(e){var n,t,r,i,a,s;return{box:((n=e==null?void 0:e.views)===null||n===void 0?void 0:n.box)||Zc,text:((t=e==null?void 0:e.views)===null||t===void 0?void 0:t.text)||Zc,image:((r=e==null?void 0:e.views)===null||r===void 0?void 0:r.image)||Zc,imageButton:((i=e==null?void 0:e.views)===null||i===void 0?void 0:i.imageButton)||Zc,textButton:((a=e==null?void 0:e.views)===null||a===void 0?void 0:a.textButton)||Zc,carouselView:((s=e==null?void 0:e.views)===null||s===void 0?void 0:s.carouselView)||Zc}}var nX=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]]);return t};const iL=M.createContext({sizes:{},updateSize:()=>{}}),rX=({children:e})=>{const[n,t]=M.useState({}),r=M.useCallback(i=>{var{id:a}=i,s=nX(i,["id"]);a&&t(o=>Object.assign(Object.assign({},o),{[a]:s}))},[]);return v.createElement(iL.Provider,{value:{sizes:n,updateSize:r}},e)},iX=()=>M.useContext(iL);var Gn;(function(e){e.Row="row",e.Column="column"})(Gn||(Gn={}));var Qn;(function(e){e.Center="center",e.Left="left",e.Right="right",e.Top="top",e.Bottom="bottom"})(Qn||(Qn={}));var kn;(function(e){e[e.FillParent=0]="FillParent",e[e.WrapContent=1]="WrapContent"})(kn||(kn={}));var ri;(function(e){e.Normal="normal",e.Bold="bold"})(ri||(ri={}));var wi;(function(e){e.AspectFit="aspectFit",e.AspectFill="aspectFill",e.ScalesToFill="scalesToFill"})(wi||(wi={}));const aL=[1,2],ym=e=>{switch(e){case Qn.Right:case Qn.Bottom:return"flex-end";case Qn.Center:return"center";case Qn.Left:case Qn.Top:default:return"flex-start"}},aX=e=>e?aL.includes(Number(e)):!0,sX=e=>{const n=new Map,t=function(r){return(n.has(r)||n.set(r,e.call(this,r)))&&n.get(r)};return t.cache=n,t},oX=sX(e=>{const n=(t,r)=>{"items"in t&&(t==null?void 0:t.items)!=null&&t.items.forEach((i,a)=>{const s=`${r}-${a}`;i.id=s,n(i,s)})};return e.forEach((t,r)=>{const i=`${r}`;t.id=i,n(t,i)}),e}),ss={rootLayout:Gn.Column,view:{size:{width:{type:"flex",value:kn.FillParent},height:{type:"flex",value:kn.WrapContent}}},box:{layout:Gn.Row,align:{vertical:Qn.Top,horizontal:Qn.Left}},textButton:{maxTextLines:1},carousel:{style:{spacing:10,maxChildWidth:240}}},sL=e=>{const n=e.Container||v.Fragment,t=e.UnknownMessage||(()=>null),r=e.parser||nL(),i=e.renderer||rL(),a=({templateItems:s,templateVersion:o,parentLayout:l=ss.box.layout,depth:u=0})=>{if(!aX(o))throw new Error(`Cannot parse template item due to unsupported template version: ${o}, ${aL}`);return v.createElement(v.Fragment,null,s.map((d,f,m)=>{const p=r.parse(d,{parentLayout:l,depth:u,elemIdx:f,siblings:m}),E=p.transformed,_={key:f,siblings:m,parentLayout:l,parsedProperties:p.properties};switch(E.type){case ft.Carousel:{if(!Array.isArray(E.items)||E.items.length===0)throw new Error("Cannot parse template item as Carousel if carousel has no items.");return v.createElement(i.carouselView,Object.assign({},E,_),E.items.map((b,C)=>v.createElement(a,{key:C,templateItems:b.body.items||[],depth:u+1,templateVersion:b.version})))}case ft.Box:return v.createElement(i.box,Object.assign({},E,_),v.createElement(a,{templateItems:E.items||[],parentLayout:E.layout,depth:u+1,templateVersion:o}));case ft.Text:return v.createElement(i.text,Object.assign({},E,_));case ft.Image:return v.createElement(i.image,Object.assign({},E,_));case ft.TextButton:return v.createElement(i.textButton,Object.assign({},E,_));case ft.ImageButton:return v.createElement(i.imageButton,Object.assign({},E,_));default:return v.createElement(t,{item:E})}}))};return{MessageTemplate:({templateVersion:s,templateItems:o,parentLayout:l=ss.rootLayout})=>{const u=oX(o);return v.createElement(rX,null,v.createElement(n,null,v.createElement(a,{isRoot:!0,parentLayout:l,templateItems:u,templateVersion:s})))},MessageTemplateBase:a}};var Ga;(function(e){e.Web="web",e.Custom="custom",e.UIKit="uikit"})(Ga||(Ga={}));ft.Image,Ga.Web,wi.AspectFill,ft.Box,Gn.Column,kn.FillParent,ft.Box,kn.FillParent,kn.FillParent,ft.Box,Gn.Column,kn.FillParent,kn.WrapContent,ft.Text,Qn.Center,Qn.Center,kn.FillParent,ft.Image,Ga.Web,kn.FillParent,wi.AspectFill,ft.Box,kn.FillParent,ft.Box,kn.FillParent,kn.FillParent,ft.Box,Gn.Column,ft.Box,Qn.Left,Qn.Center,Gn.Row,kn.FillParent,ft.Text,kn.FillParent,Qn.Center,Qn.Left,ri.Bold,ft.ImageButton,Ga.UIKit,wi.AspectFit,ft.Text,ft.TextButton,Ga.Web,ri.Bold;ft.Image,Ga.Web,wi.AspectFill,ft.Box,Gn.Column,kn.FillParent,ft.Box,kn.FillParent,Gn.Row,ft.TextButton,Ga.Web,ri.Bold,ft.TextButton,Ga.Web,kn.FillParent,ri.Bold,ft.Box,kn.FillParent,Gn.Row,ft.Text,kn.FillParent,ri.Bold,ft.ImageButton,Ga.UIKit,wi.AspectFit,ft.Text;ft.Box,Gn.Column,ft.Image,wi.AspectFill,ft.Box,Gn.Column,ft.Text,ri.Bold,ft.Text,ft.Box,Qn.Left,Qn.Center,Gn.Row,ft.Image,wi.AspectFill,ft.Box,Qn.Left,Qn.Center,Gn.Column,ft.Text,ri.Bold,ft.Text,ri.Bold,ft.Box,Qn.Left,Qn.Center,Gn.Row,ft.Image,wi.AspectFill,ft.Box,Qn.Left,Qn.Center,Gn.Column,ft.Text,ri.Bold,ft.Text,ri.Bold,ft.Box,Qn.Left,Qn.Center,Gn.Row,ft.Image,wi.AspectFill,ft.Box,Qn.Left,Qn.Center,Gn.Column,ft.Text,ri.Bold,ft.Text,ri.Bold,ft.Box,Qn.Left,Qn.Center,Gn.Row,ft.TextButton,Ga.Web,ri.Bold,ft.TextButton,Ga.Web,ri.Bold;ft.Box,Gn.Column,ft.Image,ft.Box,Gn.Column,ft.Box,Gn.Row,ft.Box,Gn.Column,ft.Text,ri.Bold,ft.Text,ft.ImageButton,Ga.UIKit,ft.Box,Gn.Column,ft.Box,Qn.Left,Qn.Center,Gn.Row,ft.Image,wi.AspectFill,ft.Box,Gn.Column,ft.Text,ri.Bold,ft.Text,ft.Box,Qn.Left,Qn.Center,Gn.Row,ft.Image,wi.AspectFill,ft.Box,Gn.Column,ft.Text,ri.Bold,ft.Text;kn.FillParent,kn.FillParent,kn.FillParent,kn.FillParent,kn.FillParent,kn.FillParent;kn.FillParent,kn.WrapContent,kn.FillParent,kn.FillParent;const lX=24;function uX({spacing:e,childrenLength:n,paddingInlineStart:t,paddingInlineEnd:r}){const i=t,a=r,s=M.useRef(null),o=M.useRef(Array.from({length:n},()=>v.createRef())),l=M.useRef(!1),u=M.useRef(!1),d=M.useRef(null),f=M.useRef({sx:null,sy:null,offset:0,translateX:0,currentIndex:0}),[m,p]=M.useState(()=>o.current.map(()=>0)),E=M.useMemo(()=>{let x=i;return m.map((V,K)=>{const W=x-(K>0?e:0),Q=W-V;return x=Q,{start:W,end:Q}})},[m,e,i]),_=M.useMemo(()=>{const x=m.reduce((K,W)=>K+W,0),V=e*(n-1);return x+V},[m,e,n]);M.useLayoutEffect(()=>{p(o.current.map(x=>{var V,K;return(K=(V=x.current)===null||V===void 0?void 0:V.clientWidth)!==null&&K!==void 0?K:0}))},[n]),M.useLayoutEffect(()=>{E.length>0&&(f.current.translateX=E[0].start,w())},[E]);const b=()=>{s.current&&(l.current=!0,s.current.style.cursor="grabbing",s.current.style.transition="none",d.current=requestAnimationFrame(w))},C=()=>{s.current&&(l.current=!1,s.current.style.cursor="grab",s.current.style.transition="transform 0.5s ease",d.current&&(cancelAnimationFrame(d.current),d.current=null))},y=()=>{const{offset:x,currentIndex:V}=f.current,K=Math.abs(x)>=lX,W=x<0&&V<n-1,Q=x>0&&V>0;let J=V;K&&W?J=V+1:K&&Q&&(J=V-1);function $(te){var re,ve;const ie=(ve=(re=s.current)===null||re===void 0?void 0:re.clientWidth)!==null&&ve!==void 0?ve:0,le=i,Ae=Math.min(0,ie-_)-a;return Math.min(le,Math.max(Ae,te))}f.current.currentIndex=J,f.current.translateX=$(E[J].start),f.current.offset=0},T=()=>{u.current=!0},N=()=>{u.current=!1},w=()=>{s.current&&(s.current.style.transform=`translateX(${f.current.translateX+f.current.offset}px)`),d.current&&(d.current=requestAnimationFrame(w))},O=()=>{s.current&&(s.current.style.touchAction="pan-x")},L=()=>{s.current&&(s.current.style.touchAction="pan-y")};return{carouselRef:s,childrenRefs:o,handlers:{onMouseDown:x=>{b(),N(),f.current.sx=x.clientX,f.current.sy=x.clientY,f.current.offset=0,d.current=requestAnimationFrame(w)},onMouseMove:x=>{!l.current||f.current.sx===null||(f.current.offset=x.clientX-f.current.sx)},onMouseUp:()=>{l.current&&(N(),y(),C())},onMouseLeave:()=>{l.current&&(N(),y(),C())},onTouchStart:x=>{N(),C();const V=x.touches[0];f.current.sx=V.clientX,f.current.sy=V.clientY,f.current.offset=0,d.current=requestAnimationFrame(w)},onTouchMove:x=>{if(f.current.sx===null||f.current.sy===null||u.current)return;const{clientX:V,clientY:K}=x.touches[0],{sx:W,sy:Q}=f.current;if(l.current){f.current.offset=V-W;return}Math.abs(K-Q)>Math.abs(V-W)?T():(f.current.offset=V-W,O(),b())},onTouchEnd:()=>{L(),N(),y(),C()}}}}var cX=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]]);return t};const dX=({children:e,style:n,spacing:t=ss.carousel.style.spacing,maxChildWidth:r=ss.carousel.style.maxChildWidth})=>{const i=n??{},{paddingInlineStart:a=0,paddingInlineEnd:s=0}=i,o=cX(i,["paddingInlineStart","paddingInlineEnd"]),{carouselRef:l,childrenRefs:u,handlers:d}=uX({spacing:t,childrenLength:e.length,paddingInlineStart:Number(a),paddingInlineEnd:Number(s)});return v.createElement("div",Object.assign({},d,{ref:l,className:"sb-message-template__carousel",style:Object.assign(Object.assign({},o),{gap:t,width:"100%",overflow:"visible"})}),e.map((f,m)=>v.createElement(hX,{ref:u.current[m],key:m,maxChildWidth:r},f)))},hX=v.forwardRef(function({maxChildWidth:n,children:t},r){const i=fX(t.props,n)?n:"fit-content";return v.createElement("div",{ref:r,style:{maxWidth:i,width:"100%",flexShrink:0,overflow:"hidden",userSelect:"none"}},t)});function fX(e,n){return!!e.templateItems.find(t=>{var r,i,a,s;const o=((r=t.width)===null||r===void 0?void 0:r.type)==="flex"&&((i=t.width)===null||i===void 0?void 0:i.value)===kn.FillParent,l=((a=t.width)===null||a===void 0?void 0:a.type)==="fixed"&&((s=t.width)===null||s===void 0?void 0:s.value)>=n;return o||l})}function vX(e){var n;return e.type===ft.Text&&((n=e.width)===null||n===void 0?void 0:n.value)==kn.WrapContent}const fw=({size:e,option:n})=>n==="wrap"?e.type==="flex"&&e.value==kn.WrapContent:n==="fill"?e.type==="flex"&&e.value==kn.FillParent:e.type==="fixed",mX=e=>{var n;return typeof e!="string"?!1:((n=e.split(".").pop())===null||n===void 0?void 0:n.toLowerCase())==="gif"};var pX=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]]);return t};const gX=e=>{const{imageSize:n,canvasRef:t,canvasProps:r}=_X(e);return v.createElement("canvas",Object.assign({},r,{ref:t,width:n==null?void 0:n.width,height:n==null?void 0:n.height,onError:e.onError}))},_X=e=>{var{metaData:n,tintColor:t}=e,r=pX(e,["metaData","tintColor"]);const i=M.useRef(null),[a,s]=M.useState(),o=M.useMemo(()=>n!=null&&n.pixelHeight&&(n!=null&&n.pixelWidth)?{width:n.pixelWidth,height:n.pixelHeight}:a,[a,n==null?void 0:n.pixelHeight,n==null?void 0:n.pixelWidth]);return M.useEffect(()=>{if(o==null&&(console.log("Canvas_ReactMessageTemplateImage: no metaData, render fit to container"),i.current)){i.current.style.width="100%",i.current.style.height="100%";const l=i.current.getBoundingClientRect();s(l)}},[o]),M.useEffect(()=>{if(r.src){const l=new Image,u=()=>{if(i.current&&t&&o){const f=i.current.getContext("2d");if(f){const{width:m,height:p}=o;f.clearRect(0,0,m,p),f.beginPath(),f.globalCompositeOperation="source-over",f.fillStyle="#000",f.drawImage(l,0,0,m,p),f.globalCompositeOperation="source-atop",f.fillStyle=t,f.fillRect(0,0,m,p)}}},d=f=>{var m;(m=r.onError)===null||m===void 0||m.call(r,f)};return l.addEventListener("load",u),l.addEventListener("error",d),l.src=r.src,()=>{l.removeEventListener("load",u),l.removeEventListener("error",d)}}},[r.src,o,t]),{canvasRef:i,canvasProps:r,imageSize:o}},EX=e=>v.createElement("img",Object.assign({},e,{onError:e.onError,referrerPolicy:"no-referrer"})),yX=e=>v.createElement("div",{style:Object.assign(Object.assign({},e.style),{backgroundColor:"transparent"})});var bX=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]]);return t};const vw=e=>{var{tintColor:n,metaData:t}=e,r=bX(e,["tintColor","metaData"]);const{hasError:i,onError:a}=CX(r.src);return r.onError&&console.warn("`onError` is intercepted and not executed in the ReactMessageTemplateImage."),i?v.createElement(yX,Object.assign({},r)):n&&!mX(r.src)?v.createElement(gX,Object.assign({},r,{onError:a,tintColor:n,metaData:t})):v.createElement(EX,Object.assign({},r,{onError:a}))},CX=e=>{const[n,t]=M.useState(!1);return M.useEffect(()=>t(!1),[e]),{hasError:n,onError:M.useCallback(()=>t(!0),[])}};function Jc(e){return Object.assign({display:"flex",overflow:"hidden",boxSizing:"border-box"},e)}function ed(e,n,t){NX(e,n,t),TX(e,n)}function SX(e,n,t,r){n&&(e["--border-width"]=`${n}px`,e["--border-color"]=t||"transparent"),r&&(e.borderRadius=r,e["--border-radius"]=`${r}px`)}function TX(e,n){var t,r,i,a,s,o,l,u;const{viewStyle:d}=n;e.marginBlockStart=(t=d==null?void 0:d.margin)===null||t===void 0?void 0:t.top,e.marginBlockEnd=(r=d==null?void 0:d.margin)===null||r===void 0?void 0:r.bottom,e.marginInlineStart=(i=d==null?void 0:d.margin)===null||i===void 0?void 0:i.left,e.marginInlineEnd=(a=d==null?void 0:d.margin)===null||a===void 0?void 0:a.right;const f=((o=(s=d==null?void 0:d.margin)===null||s===void 0?void 0:s.left)!==null&&o!==void 0?o:0)+((u=(l=d==null?void 0:d.margin)===null||l===void 0?void 0:l.right)!==null&&u!==void 0?u:0);f>0&&e.width==="100%"&&(e.width=`calc(100% - ${f}px)`),d!=null&&d.backgroundColor&&(e.backgroundColor=d.backgroundColor),d!=null&&d.backgroundImageUrl&&(e.backgroundImage=`url(${JSON.stringify(d.backgroundImageUrl)})`,e.backgroundSize="100% 100%",e.backgroundPosition="center"),SX(e,d==null?void 0:d.borderWidth,d==null?void 0:d.borderColor,d==null?void 0:d.radius)}function MX(e,n,t){const r={};return e.type==="flex"&&e.value==kn.FillParent?(r.width="100%",t===Gn.Row&&(r.flex=1)):e.type==="fixed"&&e.value>=0&&(r.width=e.value),n.type==="flex"&&n.value==kn.FillParent?(r.height="100%",t===Gn.Column&&(r.flex=1)):n.type==="fixed"&&n.value>=0&&(r.height=n.value),r}function NX(e,n,t){var r,i;const{width:a,height:s}=ss.view.size,{parentLayout:o}=t,l=MX((r=n.width)!==null&&r!==void 0?r:a,(i=n.height)!==null&&i!==void 0?i:s,o);Object.assign(e,l)}function mw(e,n=ss.box.layout,t=ss.box.align){n===Gn.Row&&(e.flexDirection="row",e.alignItems=ym(t.vertical),e.justifyContent=ym(t.horizontal)),n===Gn.Column&&(e.flexDirection="column",e.alignItems=ym(t.horizontal),e.justifyContent=ym(t.vertical))}function IX(e,n=ss.box.align.horizontal){e.textAlign=n}function pw(e,n){const{contentMode:t=wi.AspectFit}=n||{};if(t)switch(t){case wi.AspectFill:e.objectFit="cover";break;case wi.AspectFit:e.objectFit="contain";break;case wi.ScalesToFill:e.objectFit="fill";break}}function gw(e,n){var t,r,i,a;const s=n==null?void 0:n.metaData;!(s!=null&&s.pixelHeight)||!(s!=null&&s.pixelWidth)||((t=n==null?void 0:n.width)===null||t===void 0?void 0:t.type)==="fixed"||((r=n==null?void 0:n.height)===null||r===void 0?void 0:r.type)==="fixed"||(e.aspectRatio=`${(i=n==null?void 0:n.metaData)===null||i===void 0?void 0:i.pixelWidth} / ${(a=n==null?void 0:n.metaData)===null||a===void 0?void 0:a.pixelHeight}`)}function _w(e){return{WebkitLineClamp:e,WebkitBoxOrient:"vertical",display:"-webkit-box",overflow:"hidden",overflowWrap:"anywhere",flex:1}}function Ew(e,n,t){const{textStyle:r,width:i}=n,{size:a,color:s,weight:o}=r||{};if(a&&(e.fontSize=a),s&&(e.color=s),o&&(e.fontWeight=o),(i==null?void 0:i.type)==="flex"&&(i==null?void 0:i.value)==kn.WrapContent&&(e.width="fit-content",e.maxWidth="100%"),n.type===ft.Text){const{siblings:l,elemIdx:u}=t;l!=null&&l.length>=2&&l.every(vX)&&(e.flexShrink=l.length-1===u?1:0)}}const oL=v.createContext(null),AX=e=>{const{message:n,handleWebAction:t,handleCustomAction:r,handlePredefinedAction:i,children:a}=e,s=v.useMemo(()=>({message:n,handleWebAction:t,handleCustomAction:r,handlePredefinedAction:i}),[n==null?void 0:n.updatedAt]);return v.createElement(oL.Provider,{value:s},a)},wX=()=>{const e=v.useContext(oL);if(!e)throw new Error("useMessageContext must be used within a MessageProvider");return e};function lL(e){const n=M.useRef(e);return M.useEffect(()=>{n.current=e},[e]),M.useCallback((...t)=>n.current(...t),[n])}function RX(e,n){const t=lL(e),r=M.useRef(yw);return M.useCallback(a=>{if(r.current(),r.current=yw,a!=null){const s=e(a);typeof s=="function"&&(r.current=s)}},[t,...n])}function yw(){}function OX(e){const n=lL(e);return RX(r=>{const i=new ResizeObserver(a=>{a[0]!=null&&n(a[0])});return i.observe(r),()=>{i.unobserve(r)}},[n])}function LX(){const[e,n]=M.useState(-1),[t,r]=M.useState(-1),[i,a]=M.useState(-1),[s,o]=M.useState(-1),[l,u]=M.useState(-1),[d,f]=M.useState(-1);return{ref:OX(p=>{const{width:E,height:_}=p.contentRect,b=p.target,{width:C,height:y}=b.getBoundingClientRect();n(C),r(y),a(E),o(_),u(C-E),f(y-_)}),width:e,height:t,contentWidth:i,contentHeight:s,paddingWidth:l,paddingHeight:d}}var UX=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]]);return t};function bm({width:e=ss.view.size.width,height:n=ss.view.size.height,parentLayout:t=ss.box.layout,option:r}){return t===Gn.Row?fw({size:e,option:r}):fw({size:n,option:r})}function DX(e){const{style:n,props:t}=e,r=LX(),{ref:i}=r,a=UX(r,["ref"]),{updateSize:s,sizes:o}=iX(),{id:l,siblings:u,parentLayout:d}=t,{width:f,height:m,paddingWidth:p,paddingHeight:E,contentWidth:_,contentHeight:b}=a;return M.useEffect(()=>{s({id:t.id,width:f,height:m,paddingWidth:p,paddingHeight:E,contentWidth:_,contentHeight:b})},[t.id,f,m,p,E,_,b,s]),{recalculatedStyle:M.useMemo(()=>{const y=(N=0,w)=>{var O,L,P,U;return d===Gn.Row?N+((L=(O=o[w.id])===null||O===void 0?void 0:O.contentWidth)!==null&&L!==void 0?L:0):N+((U=(P=o[w.id])===null||P===void 0?void 0:P.contentHeight)!==null&&U!==void 0?U:0)};if(bm({width:t.width,height:t.height,parentLayout:d,option:"fill"})){const N=u.filter(({width:L,height:P})=>!bm({width:L,height:P,parentLayout:d,option:"fill"})).reduce(y,0),w=u.filter(({width:L,height:P})=>bm({width:L,height:P,parentLayout:d,option:"fill"})).length,O=d===Gn.Row?{maxWidth:`calc((100% - ${N}px) / ${w})`}:{maxHeight:`calc((100% - ${N}px) / ${w})`};return Object.assign(Object.assign(Object.assign({},n),O),f==0&&{height:0})}else{const N=u.findIndex(O=>O.id===l),w=u.slice(0,N).filter(({width:O,height:L})=>bm({width:O,height:L,parentLayout:d,option:"wrap"})).reduce(y,0);return Object.assign(Object.assign(Object.assign({},n),f===0&&{height:0}),d===Gn.Row?{maxWidth:`calc(100% - ${w}px)`}:{maxHeight:`calc(100% - ${w}px)`})}},[t.width,t.height,d,o,u,n,f,l]),elemRef:i}}var kX=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]]);return t};const PX=(e="")=>["http://","https://","ftp://"].some(n=>e.startsWith(n)),bw=(e="")=>PX(e)?e:`https://${e}`,kh=({children:e,props:n,className:t,style:r})=>{var i,a,s,o,l,u,d,f,m;const{recalculatedStyle:p,elemRef:E}=DX({style:r,props:n}),{message:_,handleWebAction:b,handleCustomAction:C,handlePredefinedAction:y}=wX(),T=!((i=n.viewStyle)===null||i===void 0)&&i.borderWidth?"sb-message-template__border":"",N={paddingBlockStart:(s=(a=n.viewStyle)===null||a===void 0?void 0:a.padding)===null||s===void 0?void 0:s.top,paddingBlockEnd:(l=(o=n.viewStyle)===null||o===void 0?void 0:o.padding)===null||l===void 0?void 0:l.bottom,paddingInlineStart:(d=(u=n.viewStyle)===null||u===void 0?void 0:u.padding)===null||d===void 0?void 0:d.left,paddingInlineEnd:(m=(f=n.viewStyle)===null||f===void 0?void 0:f.padding)===null||m===void 0?void 0:m.right},w=H=>{var G,j,x,V,K,W,Q;((G=n.action)===null||G===void 0?void 0:G.type)==="web"?b?b(H,n.action,_):(x=window==null?void 0:window.open(bw((j=n==null?void 0:n.action)===null||j===void 0?void 0:j.data),"_blank","noopener noreferrer"))===null||x===void 0||x.focus():((V=n.action)===null||V===void 0?void 0:V.type)==="custom"?C?C(H,n.action,_):(W=window==null?void 0:window.open(bw((K=n==null?void 0:n.action)===null||K===void 0?void 0:K.data),"_blank","noopener noreferrer"))===null||W===void 0||W.focus():((Q=n.action)===null||Q===void 0?void 0:Q.type)==="uikit"&&(y==null||y(H,n.action,_))};if(n.type===ft.TextButton)return v.createElement("button",{className:Cw(t,T),"data-sb-template-id":n.elementId,style:Object.assign(Object.assign({},r),N),onClick:w},e);const{display:O,flexDirection:L,justifyContent:P,alignItems:U,objectFit:B}=p,F=kX(p,["display","flexDirection","justifyContent","alignItems","objectFit"]);return v.createElement("div",{ref:E,className:Cw(t,T,n.action&&"sb-message-template__action"),"data-sb-template-id":n.elementId,style:F,onClick:w},v.createElement("div",{style:Object.assign({display:O,flexDirection:L,justifyContent:P,alignItems:U,objectFit:B,width:"100%",height:"100%"},N)},e))};function Cw(...e){return e.filter(n=>!!n).join(" ")}function xX(e){var n,t,r,i;const a=(n=e==null?void 0:e.height)===null||n===void 0?void 0:n.type,s=(t=e==null?void 0:e.width)===null||t===void 0?void 0:t.type,o=a==="fixed"||s==="fixed",l=a==="flex"&&((r=e==null?void 0:e.height)===null||r===void 0?void 0:r.value)===kn.FillParent||s==="flex"&&((i=e==null?void 0:e.width)===null||i===void 0?void 0:i.value)===kn.FillParent;return o||l}function FX(e){return e.split(`
`).map((n,t)=>v.createElement(v.Fragment,{key:t},n,v.createElement("br",null)))}function Sw(e){const{text:n,maxTextLines:t}=e,r=xX(e),i=typeof t=="number"&&t>0,a=FX(n);if(i||r){const s=Object.assign(Object.assign({},(i||r)&&{maxWidth:"100%"}),r&&{maxHeight:"100%",overflow:"hidden"});return v.createElement("div",{style:s},i?v.createElement("div",{style:_w(t)},a):a)}return i?v.createElement("div",{style:_w(t)},a):a}const uL=rL({views:{box(e){return v.createElement(kh,{className:"sb-message-template__box",elementId:e.elementId,style:e.parsedProperties,props:e},e.children)},text(e){return v.createElement(kh,{className:"sb-message-template__text",elementId:e.elementId,style:e.parsedProperties,props:e},Sw(e))},image(e){var n;return v.createElement(kh,{className:"sb-message-template__image-container",elementId:e.elementId,style:e.parsedProperties,props:e},v.createElement(vw,{className:"sb-message-template__image",alt:"image",src:e.imageUrl,style:{width:"100%",height:"100%",aspectRatio:"inherit",objectFit:"inherit"},tintColor:(n=e.imageStyle)===null||n===void 0?void 0:n.tintColor,metaData:e.metaData}))},textButton(e){return v.createElement(kh,{className:"sb-message-template__text-button",elementId:e.elementId,style:e.parsedProperties,props:e},Sw(Object.assign({maxTextLines:ss.textButton.maxTextLines},e)))},imageButton(e){var n;return v.createElement(kh,{className:"sb-message-template__image-container sb-message-template__image-button",elementId:e.elementId,style:e.parsedProperties,props:e},v.createElement(vw,{className:"sb-message-template__image",alt:"image-button",src:e.imageUrl,style:{width:"100%",height:"100%",aspectRatio:"inherit",objectFit:"inherit"},tintColor:(n=e.imageStyle)===null||n===void 0?void 0:n.tintColor,metaData:e.metaData}))},carouselView(e){var n,t;return v.createElement(dX,{maxChildWidth:(n=e.carouselStyle)===null||n===void 0?void 0:n.maxChildWidth,spacing:(t=e.carouselStyle)===null||t===void 0?void 0:t.spacing,style:e.parsedProperties},e.children)}}}),cL=nL({mapBoxProps(e,n){const t=Jc();return ed(t,e,n),mw(t,e.layout,e.align),t},mapTextProps(e,n){var t;const r=Jc({whiteSpace:"pre-line",wordBreak:"break-word"});return ed(r,e,n),Ew(r,e,n),mw(r,Gn.Row,e.align),IX(r,(t=e.align)===null||t===void 0?void 0:t.horizontal),r},mapImageProps(e,n){const t=Jc();return ed(t,e,n),pw(t,e.imageStyle),gw(t,e),t},mapTextButtonProps(e,n){const t=Jc({whiteSpace:"pre-line",alignItems:"center",justifyContent:"center"});return ed(t,e,n),Ew(t,e,n),t},mapImageButtonProps(e,n){const t=Jc();return ed(t,e,n),pw(t,e.imageStyle),gw(t,e),t},mapCarouselProps(e,n){var t,r,i,a,s,o,l,u;const d=Jc();return ed(d,e,n),d.paddingBlockStart=(r=(t=e.viewStyle)===null||t===void 0?void 0:t.padding)===null||r===void 0?void 0:r.top,d.paddingBlockEnd=(a=(i=e.viewStyle)===null||i===void 0?void 0:i.padding)===null||a===void 0?void 0:a.bottom,d.paddingInlineStart=(o=(s=e.viewStyle)===null||s===void 0?void 0:s.padding)===null||o===void 0?void 0:o.left,d.paddingInlineEnd=(u=(l=e.viewStyle)===null||l===void 0?void 0:l.padding)===null||u===void 0?void 0:u.right,d}});sL({renderer:uL,parser:cL,Container:({children:e,className:n})=>v.createElement("div",{className:`sb-message-template__parent ${n}`,style:{display:"flex",flexDirection:"column",maxWidth:400,marginBlockEnd:24}},e)});var BX=sL({parser:cL,renderer:uL,Container:function(e){var n=e.children,t=e.className;return v.createElement("div",{className:["sb-message-template__parent ".concat(t),"sendbird-message-template__root"].join(" ")},n)}}).MessageTemplate;function HX(e){var n=e.templateItems,t=e.templateVersion;return v.createElement(BX,{templateItems:n,templateVersion:t})}function Tw(e){var n=e.className,t=e.message,r=e.isByMe,i=M.useContext(On).stringSet,a=t.message;return v.createElement("div",{className:ai([n??"",r?"outgoing":"incoming","sendbird-template-message-item-body__fallback_message"])},a?v.createElement(v.Fragment,null,v.createElement(Me,{type:be.BODY_1,color:de.ONCONTENT_INVERSE_1},a)):v.createElement(v.Fragment,null,v.createElement(Me,{className:"sendbird-template-message-item-body__fallback_message__header",type:be.BODY_1,color:de.ONCONTENT_INVERSE_1},i.UNKNOWN__TEMPLATE_ERROR),v.createElement(Me,{className:"sendbird-template-message-item-body__fallback_message__description",type:be.BODY_1,color:de.ONCONTENT_INVERSE_3},i.UNKNOWN__CANNOT_READ_TEMPLATE)))}var Cm="40px";function GX(e){var n=e.className,t=e.isByMe;return v.createElement("div",{className:zt(n,t?"outgoing":"incoming","sendbird-template-loading-message-item-body")},v.createElement(Xo,{className:"sendbird-message-status__icon",testID:"sendbird-message-status-icon",width:Cm,height:Cm},v.createElement(qe,{type:Se.SPINNER,fillColor:ze.CONTENT_INVERSE_3,width:Cm,height:Cm})))}var zX=function(e){var n=e.message,t=e.templateVersion,r=e.templateItems;return v.createElement(AX,{message:n},v.createElement(HX,{templateVersion:t,templateItems:r}))},dL=function(e){var n={},t={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=e[r];if(typeof i=="object"&&i!==null){var a=dL(i),s=a[0],o=a[1];n[r]=s,t[r]=o}else if(typeof i=="string"){var l=i.split(","),u=l[0],d=l[1];n[r]=u,t[r]=d||u}else n[r]=i,t[r]=i}return[n,t]};function jX(e){var n=e.colorVariables,t=e.theme,r=dL(n),i=r[0],a=r[1];return t==="light"?i:a}var VX=function(e){$w(n,e);function n(t){var r=e.call(this,t)||this;return r.state={hasError:!1},r}return n.getDerivedStateFromError=function(){return{hasError:!0}},n.prototype.componentDidCatch=function(t,r){var i;(i=this.props.logger)===null||i===void 0||i.error("Error caught by ErrorBoundary: ",t,r)},n.prototype.render=function(){return this.state.hasError?this.props.fallbackMessage:this.props.children},n}(M.Component),hL=function(e,n,t){t===void 0&&(t="");for(var r=0,i=Object.entries(e);r<i.length;r++){var a=i[r],s=a[0],o=a[1],l=t?"".concat(t,".").concat(s):s;o&&typeof o=="object"?hL(o,n,l):n[l]=o}};function $X(e){var n={};return hL(e,n),n}var qX=500,Mw=function(e){var n=e.template,t=e.templateData,r=t===void 0?{}:t,i=e.colorVariables,a=e.theme,s={};i&&a&&(s=jX({colorVariables:i,theme:a}));var o=D(D({},r),s),l=$X(o),u=n;return Object.entries(l).forEach(function(d){var f=d[0],m=d[1],p="\\{".concat(f,"\\}"),E=new RegExp(p,"g");u=u.replace(E,m)}),u};function KX(e){var n,t=e.className,r=t===void 0?"":t,i=e.message,a=e.isByMe,s=a===void 0?!1:a,o=e.theme,l=o===void 0?"light":o,u=(n=i.extendedMessagePayload)===null||n===void 0?void 0:n[xf],d=function(){return v.createElement(Tw,{className:r,message:i,isByMe:s})};if(!(u!=null&&u.key))return d();var f=u.key,m=yt().state;if(!m)return d();var p=m.config.logger,E=m.utils,_=E.getCachedTemplate,b=E.updateMessageTemplatesInfo,C=m.stores.appInfoStore.waitingTemplateKeysMap,y=Object.entries(C).map(function(H){var G=H[0],j=H[1];return[G,j.requestedAt,j.erroredMessageIds.join(",")].join("-")}).join("_"),T=M.useState(B()),N=T[0],w=T[1];function O(H,G){for(var j=[],x=0;(x=H.indexOf(G,x))!==-1;)j.push({start:x,end:x+G.length}),x+=G.length;return j}function L(H,G,j){var x="",V=0;return G.forEach(function(K){var W=K.start,Q=K.end;x+=H.slice(V,W)+j,V=Q}),x+=H.slice(V),x}function P(H,G,j){var x=O(H,G);return L(H,x,j)}function U(H){var G=Mw({template:H.uiTemplate,templateData:u.variables,colorVariables:H.colorVariables,theme:l});if(u.view_variables){var j={};Object.entries(u.view_variables).forEach(function(x){var V=x[0],K=x[1],W=[];K.forEach(function(Q){var J=Q==null?void 0:Q.key;if(J){var $=_(J);$||p.error("TemplateMessageItemBody | simple template is expected to be cached: ",J);var te=Mw({template:$.uiTemplate,templateData:Q.variables,colorVariables:$.colorVariables,theme:l});W.push({version:$.version,body:{items:JSON.parse(te)}}),j[V]=JSON.stringify(W)}})}),Object.entries(j).forEach(function(x){var V=x[0],K=x[1];G=P(G,'"@{'.concat(V,'}"'),K)})}return JSON.parse(G)}function B(){var H={filledMessageTemplateItemsList:[],isErrored:!1},G=[],j=_(f);if(j||G.push(f),u!=null&&u.view_variables)try{Object.entries(u.view_variables).forEach(function(V){var K=V[0],W=V[1];W.forEach(function(Q){var J=Q==null?void 0:Q.key;J&&!_(J)&&!G.includes(J)&&G.push(J)})})}catch{return p.error("TemplateMessageItemBody | received view_variables is malformed: ",u),H.isErrored=!0,H}try{if(G.length>0)F(G);else if(j){var x=U(j);H.filledMessageTemplateItemsList.push({version:j.version,items:x})}}catch(V){p.error("TemplateMessageItemBody | fetching non-cached templates by given template keys failed: ",V),H.isErrored=!0}return H}M.useEffect(function(){if(!N.isErrored&&N.filledMessageTemplateItemsList.length===0){var H=B();w(H)}},[u.key,y]);function F(H){if(H.length>0){var G=[];H.forEach(function(V){var K=C[V];G.push([V,K])});var j=Date.now(),x=[];G.forEach(function(V){var K=V[0],W=V[1];if(!W||W.erroredMessageIds.indexOf(i.messageId)===-1&&j>W.requestedAt+qX)x.push(K);else if(W.erroredMessageIds.indexOf(i.messageId)>-1)throw new Error("TemplateMessageItemBody | fetching template key ".concat(K," for messageId: ").concat(i.messageId," has failed."))}),x.length>0&&b(x,i.messageId,j)}}return N.isErrored?d():N.filledMessageTemplateItemsList.length===0?v.createElement(GX,{className:r,isByMe:s}):v.createElement("div",{className:ai([r,s?"outgoing":"incoming","sendbird-template-message-item-body"])},v.createElement(VX,{fallbackMessage:v.createElement(Tw,{className:r,message:i,isByMe:s}),logger:p},N.filledMessageTemplateItemsList.map(function(H,G){var j;return v.createElement(zX,{key:G,message:i,templateVersion:(j=H.version)!==null&&j!==void 0?j:0,templateItems:H.items})})))}function fL(e){var n=e.text,t=e.onCancel,r=M.useContext(On).stringSet,i=M.useRef(null),a=EC(i,{Enter:function(){return t==null?void 0:t()},Escape:function(){return t==null?void 0:t()}});return v.createElement("div",{onKeyDown:a},v.createElement(wr,{contentClassName:"sendbird-message-feedback-modal-content__mobile",type:Vn.PRIMARY,onSubmit:t,onClose:t,submitText:r.BUTTON__OK,renderHeader:function(){return v.createElement("div",{className:"sendbird-modal__header"},v.createElement(Me,{type:be.H_1,color:de.ONBACKGROUND_1,className:"sendbird-message-feedback-modal-header"},n))},customFooter:v.createElement("div",{className:"sendbird-message-feedback-modal-footer__root_failed"},v.createElement(Ri,{onClick:t},v.createElement(Me,{type:be.BUTTON_3,color:de.ONCONTENT_1},r.BUTTON__OK)))}))}function vL(e){var n=e.className,t=n===void 0?"":n,r=e.isByMe,i=e.displayThreadReplies,a=e.bottom,s=e.message,o=e.channel,l=e.userId,u=e.chainBottom,d=u===void 0?!1:u,f=M.useRef(null),m=Yl(),p=m.disableUserProfile,E=m.renderUserProfile;return r||d||!mc(s)?null:v.createElement($i,{menuTrigger:function(_){var b,C;return v.createElement(Fr,{className:zt(t,i&&"use-thread-replies"),src:((C=(b=o==null?void 0:o.members)===null||b===void 0?void 0:b.find(function(y){return(y==null?void 0:y.userId)===s.sender.userId}))===null||C===void 0?void 0:C.profileUrl)||s.sender.profileUrl||"",ref:f,width:"28px",height:"28px",bottom:a,onClick:function(){p||_()}})},menuItems:function(_){return E?E({user:s.sender,close:_,currentUserId:l,avatarRef:f}):v.createElement(Li,{parentRef:f,parentContainRef:f,closeDropdown:_,style:{paddingTop:"0px",paddingBottom:"0px"}},v.createElement(Xl,{user:s.sender,onSuccess:_}))}})}var WX=function(e){var n=e.children;return v.createElement(Me,{className:"sendbird-form-message__input__label",type:be.CAPTION_2,color:de.ONBACKGROUND_2},n)},QX=function(e){var n=e.name,t=e.required,r=e.errorMessage,i=e.isValid,a=e.values,s=e.isInvalidated,o=e.isSubmitTried,l=e.style,u=e.onFocused,d=e.onChange,f=e.placeHolder,m=e.isSubmitted,p=l.layout,E=l.options,_=E===void 0?[]:E,b=l.resultCount,C=b??{},y=C.min,T=y===void 0?1:y,N=C.max,w=N===void 0?1:N,O=B(),L=M.useContext(On).stringSet,P=function(){u==null||u(!0)},U=function(){u==null||u(!1)};function B(){return m?_.map(function(H){return{state:a.includes(H)?"submittedSelected":"submittedDefault",option:H}}):_.map(function(H){return{state:a.includes(H)?"selected":"default",option:H}})}var F=function(H){if(!m){var G;T===1&&w===1?G=O[H].state==="selected"?[]:[O[H].option]:G=O.reduce(function(j,x,V){return V===H?x.state==="default"&&a.length<w&&j.push(x.option):x.state==="selected"&&j.push(x.option),j},[]),d(G)}};return v.createElement("div",{className:"sendbird-form-message__input__root"},v.createElement(WX,null,v.createElement("div",{className:"sendbird-form-message__input__title-container"},n," ",!t&&v.createElement("span",{className:"sendbird-form-message__input__title-optional"},"(optional)"))),v.createElement("div",{className:"sendbird-input_for_form"},function(){switch(p){case"chip":return v.createElement("div",{className:"sendbird-form-message__input__chip-container"},O.map(function(G,j){return v.createElement("div",{className:"sendbird-form-message__input__chip ".concat(G.state),key:j,onClick:function(){return F(j)}},v.createElement("div",{className:"sendbird-form-message__input__chip-text"},G.option),m&&G.state==="submittedSelected"&&v.createElement(qe,{className:"sendbird-form-message__submitted-check-icon-chip",type:Se.DONE,fillColor:ze.SECONDARY_2,width:"20px",height:"20px"}))}));case"textarea":{var H=a.length>0?a[0]:"";return v.createElement("div",{className:"sendbird-form-message__input__container"},m?v.createElement("div",{className:"sendbird-form-message__submitted-input-box textarea"},v.createElement("div",{className:"sendbird-form-message__submitted-input-box-text"},H),i&&v.createElement("div",{className:"sendbird-form-message__submitted-check-icon-container"},v.createElement(qe,{type:Se.DONE,fillColor:ze.SECONDARY_2,width:"20px",height:"20px"})),!H&&v.createElement(Me,{className:"sendbird-input__placeholder",type:be.BODY_1,color:de.ONBACKGROUND_3},L.FORM_ITEM_OPTIONAL_EMPTY)):v.createElement(v.Fragment,null,v.createElement("textarea",{className:zt("sendbird-input__input",!!r&&"error","sendbird-form-message__input__textarea"),required:t,disabled:m,value:H,onFocus:P,onBlur:U,onChange:function(G){var j=G.target.value;d(j?[j]:[])}}),f&&!H&&v.createElement(Me,{className:"sendbird-input__placeholder textarea",type:be.BODY_1,color:de.ONBACKGROUND_3},f)))}case"text":case"number":case"phone":case"email":{var H=a.length>0?a[0]:"";return v.createElement("div",{className:"sendbird-form-message__input__container"},m?v.createElement("div",{className:"sendbird-form-message__submitted-input-box"},v.createElement("div",{className:"sendbird-form-message__submitted-input-box-text"},H),i&&v.createElement("div",{className:"sendbird-form-message__submitted-check-icon-container"},v.createElement(qe,{type:Se.DONE,fillColor:ze.SECONDARY_2,width:"20px",height:"20px"})),!H&&v.createElement(Me,{className:"sendbird-input__placeholder",type:be.BODY_1,color:de.ONBACKGROUND_3},L.FORM_ITEM_OPTIONAL_EMPTY)):v.createElement(v.Fragment,null,v.createElement("input",{type:p==="number"?"text":p,inputMode:p==="number"?"numeric":"text",className:"sendbird-input__input ".concat(r?"error":""),name:n,required:t,disabled:m,value:H,onFocus:P,onBlur:U,onChange:function(j){var x=j.target.value;d(x?[x]:[])}}),f&&!H&&v.createElement(Me,{className:"sendbird-input__placeholder",type:be.BODY_1,color:de.ONBACKGROUND_3},f)))}default:return v.createElement(v.Fragment,null)}}(),r&&(o||s)&&v.createElement(Me,{className:"sendbird-form-message__error-label",type:be.CAPTION_3},r)))},YX=function(e){var n=e.isByMe,t=e.text;return v.createElement("div",{className:ai(["sendbird-unknown-message-item-body",n?"outgoing":"incoming"])},v.createElement(Me,{className:"sendbird-unknown-message-item-body__description",type:be.BODY_1,color:n?de.ONCONTENT_3:de.ONBACKGROUND_3},t))};function XX(e){var n=this,t=e.message,r=e.form,i=e.isByMe,a=e.logger,s=r.items,o=r.id,l=M.useContext(On).stringSet,u=M.useState(!1),d=u[0],f=u[1],m=M.useState(!1),p=m[0],E=m[1],_=M.useState(function(){var L=[];return s.forEach(function(P){var U=P.required,B=P.style,F=B===void 0?{}:B,H=F.layout,G=F.defaultOptions,j=G===void 0?[]:G;L.push({draftValues:H==="chip"?j:[],required:U,errorMessage:null,isInvalidated:!1})}),L}),b=_[0],C=_[1],y=r.isSubmitted,T=b.some(function(L){var P=L.errorMessage;return!!P}),N=b.some(function(L){var P=L.isInvalidated;return P}),w=T&&(p||N)||y,O=M.useCallback(function(){return tn(n,void 0,void 0,function(){var L,P,U;return nn(this,function(B){switch(B.label){case 0:E(!0),B.label=1;case 1:return B.trys.push([1,3,,4]),L=b.some(function(F){var H=F.errorMessage;return H}),L?[2]:(P=b.some(function(F){return F.required&&(!F.draftValues||F.draftValues.length===0)}),P?(C(function(F){return F.map(function(H){return H.required&&H.draftValues.length===0?D(D({},H),{errorMessage:l.FORM_ITEM_REQUIRED}):H})}),[2]):(b.forEach(function(F,H){s[H].draftValues=F.draftValues}),[4,t.submitMessageForm()]));case 2:return B.sent(),[3,4];case 3:return U=B.sent(),f(!0),a==null||a.error(U),[3,4];case 4:return[2]}})})},[b,t.messageId,t.submitMessageForm,o]);return f3(r.version)?v.createElement("div",{className:ai(["".concat(oC," disable-hover"),"sendbird-form-message__root","incoming"])},s.map(function(L,P){var U,B=L.name,F=L.placeholder,H=L.id,G=L.required,j=L.style,x=b[P],V=x.draftValues,K=V===void 0?[]:V,W=x.errorMessage;return v.createElement(QX,{key:H,style:j,placeHolder:F,values:(U=L.submittedValues)!==null&&U!==void 0?U:K,isInvalidated:b[P].isInvalidated,isSubmitTried:p,errorMessage:W,isValid:y,isSubmitted:y,name:B,required:G,onFocused:function(Q){W&&!Q&&!b[P].isInvalidated?C(function(J){var $=J.slice(0);return $[P]=D(D({},$[P]),{isInvalidated:!0}),$}):W||C(function(J){var $=J.slice(0);return $[P]=D(D({},$[P]),{isInvalidated:!1}),$})},onChange:function(Q){C(function(J){var $=J.slice(0);return $[P]=D(D({},$[P]),{draftValues:Q,errorMessage:function(){return L.isValid(Q)?G&&Q.length===0?l.FORM_ITEM_REQUIRED:null:l.FORM_ITEM_INVALID}()}),$})}})}),v.createElement(Ri,{className:"sendbird-form-message__submit-button",onClick:O,disabled:w,labelType:be.BUTTON_2,labelColor:de.ONCONTENT_1},y?"Submitted successfully":"Submit"),d&&v.createElement(fL,{text:"Submit failed.",onCancel:function(){f(!1)}})):v.createElement(YX,{isByMe:i,text:l.FORM_VERSION_ERROR})}var ZX="sendbird-message-content__middle__message-item-body",mL=function(e){var n,t=e.className,r=t===void 0?ZX:t,i=e.message,a=e.channel,s=e.showFileViewer,o=e.onMessageHeightChange,l=e.onBeforeDownloadFileMessage,u=e.mouseHover,d=e.isMobile,f=e.config,m=e.isReactionEnabledInChannel,p=e.isByMe,E=(n=e.customSubcomponentsProps)!==null&&n!==void 0?n:{},_=yC({isMobile:d}),b=bC(i),C=$h(),y=(a==null?void 0:a.isGroupChannel())&&f.groupChannel.enableOgtag,T=(a==null?void 0:a.isGroupChannel())&&f.groupChannel.enableFormTypeMessage,N=function(){return v.createElement(jY,{className:r,message:i,isByMe:p,mouseHover:u,isReactionEnabled:m})};return ji(i).when(function(w){return T&&e3(w)},function(){return v.createElement(XX,{isByMe:p,message:i,form:i.messageForm,logger:f.logger})}).when(Ep,function(){var w,O,L=i.extendedMessagePayload[xf];return t3(L)?v.createElement(KX,{className:r,message:i,isByMe:p,theme:f==null?void 0:f.theme}):((O=(w=f.logger)===null||w===void 0?void 0:w.error)===null||O===void 0||O.call(w,"TemplateMessageItemBody: invalid type value in message.extendedMessagePayload.message_template.",L),N())}).when(function(w){return y&&mc(w)&&Xp(w)},function(){var w;return v.createElement(TY,{className:r,message:i,isByMe:p,mouseHover:u,isMentionEnabled:(w=f.groupChannel.enableMention)!==null&&w!==void 0?w:!1,isReactionEnabled:m,onMessageHeightChange:o,isMarkdownEnabled:f.groupChannel.enableMarkdownForUserMessage})}).when(vK,function(){var w;return v.createElement(IY,{className:r,message:i,isByMe:p,mouseHover:u,isMentionEnabled:(w=f.groupChannel.enableMention)!==null&&w!==void 0?w:!1,isReactionEnabled:m,isMarkdownEnabled:f.groupChannel.enableMarkdownForUserMessage})}).when(function(w){return If(w)===C.FILE},function(){return v.createElement(AY,{className:r,message:i,isByMe:p,mouseHover:u,isReactionEnabled:m,onBeforeDownloadFileMessage:l})}).when(Oi,function(){var w;return v.createElement(Y3,D({className:r,message:i,isByMe:p,mouseHover:u,isReactionEnabled:m,threadMessageKindKey:_,statefulFileInfoList:b,onBeforeDownloadFileMessage:l},(w=E.MultipleFilesMessageItemBody)!==null&&w!==void 0?w:{}))}).when(ja,function(){var w;return v.createElement(eL,{className:r,message:i,channelUrl:(w=a==null?void 0:a.url)!==null&&w!==void 0?w:"",isByMe:p,isReactionEnabled:m})}).when(io,function(){var w;return v.createElement(zY,D({className:r,message:i,isByMe:p,mouseHover:u,isReactionEnabled:m,showFileViewer:s,style:d?{width:"100%"}:{}},(w=E.ThumbnailMessageItemBody)!==null&&w!==void 0?w:{}))}).otherwise(function(){return N()})},pL=function(e){var n,t,r=e.channel,i=e.message;return v.createElement(Me,{className:"sendbird-message-content__middle__sender-name",type:be.CAPTION_2,color:de.ONBACKGROUND_2},((t=(n=r==null?void 0:r.members)===null||n===void 0?void 0:n.find(function(a){var s;return(a==null?void 0:a.userId)===((s=i==null?void 0:i.sender)===null||s===void 0?void 0:s.userId)}))===null||t===void 0?void 0:t.nickname)||Bm(i))},Nw=v.forwardRef(function(e,n){var t=e.children,r=e.isSelected,i=e.onClick,a=i===void 0?function(){}:i,s=e.disabled,o=s===void 0?!1:s;return v.createElement("button",{className:["sendbird-iconbutton__feedback",r?"sendbird-iconbutton__feedback__pressed":"",o?"sendbird-iconbutton__feedback__disabled":""].join(" "),ref:n,type:"button",onClick:function(l){a==null||a(l)},disabled:o},v.createElement("span",{className:["sendbird-iconbutton__feedback__inner",r?"sendbird-iconbutton__feedback__inner__pressed":"",o?"sendbird-iconbutton__feedback__inner__disabled":""].join(" ")},t))});function JX(e){var n=e.hideMenu,t=e.onEditFeedback,r=e.onRemoveFeedback,i=Ut().stringSet;return v.createElement(i0,{onBackdropClick:n},v.createElement("div",{className:"sendbird-message__bottomsheet--feedback-options-menu"},v.createElement("div",{className:"sendbird-message__bottomsheet--feedback-option",onClick:function(){n(),t()}},v.createElement(Me,{type:be.BODY_1,color:de.ONBACKGROUND_1},i.EDIT_COMMENT)),v.createElement("div",{className:"sendbird-message__bottomsheet--feedback-option",onClick:function(){n(),r()}},v.createElement(Me,{type:be.BODY_1,color:de.ERROR},i.REMOVE_FEEDBACK))))}var od=function(e){var n=e.children;return v.createElement(Me,{className:"sendbird-input-label",type:be.CAPTION_3,color:de.ONBACKGROUND_1},n)},Ip=v.forwardRef(function(e,n){var t=e.name,r=e.required,i=e.disabled,a=e.value,s=e.placeHolder,o=e.autoFocus,l=o===void 0?!1:o,u=M.useState(a),d=u[0],f=u[1];return v.createElement("div",{className:"sendbird-input"},v.createElement("input",{className:"sendbird-input__input",ref:n,name:t,required:r,disabled:i,value:d,onChange:function(m){f(m.target.value)},autoFocus:l}),s&&!d&&v.createElement(Me,{className:"sendbird-input__placeholder",type:be.BODY_1,color:de.ONBACKGROUND_3},s))});function eZ(e){var n,t,r=e.selectedFeedback,i=e.message,a=e.onClose,s=e.onSubmit,o=e.onUpdate,l=e.onRemove,u=M.useContext(On).stringSet,d=pr().isMobile,f=(i==null?void 0:i.myFeedback)&&r===i.myFeedback.rating,m=(n=i==null?void 0:i.myFeedback)===null||n===void 0?void 0:n.comment,p=function(){var C,y,T;if(r){var N=(y=(C=_.current)===null||C===void 0?void 0:C.value)!==null&&y!==void 0?y:"";f?N!==((T=i.myFeedback)===null||T===void 0?void 0:T.comment)?o==null||o(r,N):a==null||a():i.myFeedback||s==null||s(r,N)}},E=M.useRef(),_=M.useRef(),b=EC(E,{Enter:function(){return p()},Escape:function(){return a==null?void 0:a()}});return v.createElement("div",{onKeyDown:b},v.createElement(wr,{contentClassName:"sendbird-message-feedback-modal-content__mobile",type:Vn.PRIMARY,onCancel:a,onSubmit:function(){p()},submitText:u.BUTTON__SUBMIT,renderHeader:function(){return v.createElement("div",{className:"sendbird-modal__header"},v.createElement(Me,{type:be.H_1,color:de.ONBACKGROUND_1,className:"sendbird-message-feedback-modal-header"},u.FEEDBACK_MODAL_TITLE))},customFooter:v.createElement("div",{className:"sendbird-message-feedback-modal-footer__root"},!d&&(i!=null&&i.myFeedback)&&r===i.myFeedback.rating?v.createElement(Ri,{type:Vn.WARNING,onClick:l,labelType:be.BUTTON_3},u.BUTTON__REMOVE_FEEDBACK):v.createElement("div",null),v.createElement("div",{className:"sendbird-message-feedback-modal-footer__right-content"},v.createElement(Ri,{type:Vn.SECONDARY,onClick:a},v.createElement(Me,{type:be.BUTTON_3,color:de.ONBACKGROUND_1},u.BUTTON__CANCEL)),v.createElement(Ri,{onClick:function(){return p()}},v.createElement(Me,{type:be.BUTTON_3,color:de.ONCONTENT_1},m?u.BUTTON__SAVE:u.BUTTON__SUBMIT))))},v.createElement("div",{className:"sendbird-message-feedback-modal-body__root"},v.createElement(Ip,{name:"sendbird-message-feedback-modal-body__root",ref:_,value:f?(t=i.myFeedback)===null||t===void 0?void 0:t.comment:void 0,placeHolder:u.FEEDBACK_CONTENT_PLACEHOLDER,autoFocus:!0}))))}function CC(e,n){var t=M.useState(!1),r=t[0],i=t[1];return M.useEffect(function(){var a=Array.isArray(n)?n:[n],s=function(){var d,f=a==null?void 0:a.map(function(m){return m==null?void 0:m.querySelector(e)});i((d=f==null?void 0:f.some(function(m){return!!m}))!==null&&d!==void 0?d:!1)};s();var o=function(d){d.forEach(function(f){(f.addedNodes.length||f.removedNodes.length)&&(Array.from(f.addedNodes).forEach(function(m){m.nodeType===Node.ELEMENT_NODE&&m.matches(e)&&i(!0)}),Array.from(f.removedNodes).forEach(function(m){m.nodeType===Node.ELEMENT_NODE&&m.matches(e)&&i(!1)}))})},l=new MutationObserver(o),u={childList:!0,subtree:!0};return a==null||a.forEach(function(d){d&&l.observe(d,u)}),function(){l.disconnect()}},[e,n]),r}var ib;(function(e){e.NOT_APPLICABLE="NOT_APPLICABLE",e.NO_FEEDBACK="NO_FEEDBACK",e.SUBMITTED="SUBMITTED"})(ib||(ib={}));function tZ(e){var n,t,r,i=e.channel,a=e.message,s=e.showFileViewer,o=e.onMessageHeightChange,l=e.onBeforeDownloadFileMessage,u=e.renderSenderProfile,d=e.renderMessageHeader,f=e.renderMessageBody,m=e.isByMe,p=e.displayThreadReplies,E=e.mouseHover,_=e.isMobile,b=e.isReactionEnabledInChannel,C=e.hoveredMenuClassName,y=e.templateType,T=e.useReplying,N=yt().state.config,w=Ut().dateLocale,O=(n=fK[y])!==null&&n!==void 0?n:"",L=u(D(D({},e),{chainBottom:!1,className:"",isByMe:m,displayThreadReplies:p})),P=d(e),U=f({message:a,channel:i,showFileViewer:s,onMessageHeightChange:o,mouseHover:E,isMobile:_,config:N,isReactionEnabledInChannel:b,isByMe:m,onBeforeDownloadFileMessage:l}),B=v.createElement(Me,{className:zt("sendbird-message-content__middle__body-container__created-at","right",C,O),type:be.CAPTION_3,color:de.ONBACKGROUND_2},Ar((a==null?void 0:a.createdAt)||0,"p",{locale:w})),F=(t=a.extendedMessagePayload)===null||t===void 0?void 0:t[xf],H=(r=F==null?void 0:F.container_options)!==null&&r!==void 0?r:{},G=H.profile,j=G===void 0?!0:G,x=H.time,V=x===void 0?!0:x,K=H.nickname,W=K===void 0?!0:K,Q=j||W;return v.createElement("div",{className:"sendbird-message-content__sendbird-ui-container-type__default__root"},!m&&Q&&!T&&v.createElement("div",{className:"sendbird-message-content__sendbird-ui-container-type__default__header-container"},v.createElement("div",{className:"sendbird-message-content__sendbird-ui-container-type__default__header-container__left__profile"},j&&L),W&&P),U,!m&&V&&v.createElement("div",{className:"sendbird-message-content__sendbird-ui-container-type__default__bottom"},B))}function nZ(e){var n=this,t,r,i,a,s,o,l,u,d,f,m,p,E,_=e.className,b=e.userId,C=e.channel,y=e.message,T=e.disabled,N=T===void 0?!1:T,w=e.chainTop,O=w===void 0?!1:w,L=e.chainBottom,P=L===void 0?!1:L,U=e.isReactionEnabled,B=U===void 0?!1:U,F=e.disableQuoteMessage,H=F===void 0?!1:F,G=e.replyType,j=e.threadReplySelectType,x=e.nicknamesMap,V=e.emojiContainer,K=e.scrollToMessage,W=e.showEdit,Q=e.showRemove,J=e.showFileViewer,$=e.resendMessage,te=e.deleteMessage,re=e.toggleReaction,ve=e.setQuoteMessage,ie=e.onReplyInThread,le=e.onQuoteMessageClick,Ae=e.onMessageHeightChange,oe=e.onBeforeDownloadFileMessage,he=e.filterEmojiCategoryIds,me=sa(e),Be=me.renderSenderProfile,pe=Be===void 0?function(bt){return v.createElement(vL,D({},bt))}:Be,ye=me.renderMessageBody,Ee=ye===void 0?function(bt){return v.createElement(mL,D({},bt))}:ye,Ue=me.renderMessageHeader,Ye=Ue===void 0?function(bt){return v.createElement(pL,D({},bt))}:Ue,De=me.renderMessageMenu,We=De===void 0?function(bt){return v.createElement(fC,D({},bt))}:De,Je=me.renderEmojiMenu,Le=Je===void 0?function(bt){return v.createElement(vC,D({},bt))}:Je,He=me.renderEmojiReactions,At=He===void 0?function(bt){return v.createElement(pC,D({},bt))}:He,Ve=me.renderMobileMenuOnLongPress,st=Ve===void 0?function(bt){return v.createElement(_C,D({},bt))}:Ve,mt=Ut(),et=mt.dateLocale,St=mt.stringSet,Rt=yt().state,xe=Rt.config,Ht=Rt.eventHandlers,Xt=xe.logger,Ke=(t=Ht==null?void 0:Ht.reaction)===null||t===void 0?void 0:t.onPressUserProfile,Ct=M.useRef(),Dt=M.useRef(),Vt=M.useRef(),rn=pr().isMobile,Zt=M.useState(!1),Mn=Zt[0],cn=Zt[1],ht=M.useState(!1),ct=ht[0],dt=ht[1],ke=CC("#".concat(Hf(y.messageId),".").concat(Bf),[document.getElementById(bd),document.getElementById(Gf)]),ge=M.useState(!1),Xe=ge[0],Et=ge[1],Pt=M.useState(!1),Jt=Pt[0],Tt=Pt[1],vn=M.useState(""),Sn=vn[0],pt=vn[1],Mt=b===((r=y==null?void 0:y.sender)===null||r===void 0?void 0:r.userId)||(y==null?void 0:y.sendingStatus)==="pending"||(y==null?void 0:y.sendingStatus)==="failed",dn=Mt?"outgoing":"incoming",In=O?"chain-top":"",Ze=B&&!(C!=null&&C.isEphemeral),ot=Ze?"use-reactions":"",Fe=ke?"sendbird-mouse-hover":"",Ot=!!((G==="QUOTE_REPLY"||G==="THREAD")&&(y!=null&&y.parentMessageId)&&(y!=null&&y.parentMessage)&&!H),Lt=Ot?"use-quote":"",$t=((i=y==null?void 0:y.threadInfo)===null||i===void 0?void 0:i.replyCount)&&y.threadInfo.replyCount>0&&G==="THREAD",an=!Mt&&!!(y!=null&&y.myFeedbackStatus)&&y.myFeedbackStatus!==ib.NOT_APPLICABLE,Nn=!!(!((a=xe==null?void 0:xe.groupChannel)===null||a===void 0)&&a.enableFeedback)&&an,xn=(s=y==null?void 0:y.myFeedback)===null||s===void 0?void 0:s.rating,tt=!Ep(y)&&!e3(y),ae=tt&&rn,je=tt&&Mt&&!rn,gt=tt&&$t,sn=tt&&!Mt&&!rn,bn=function(){var bt=2;return Dt.current&&(bt+=4+Dt.current.clientHeight),Vt.current&&(bt+=4+Vt.current.clientHeight),bt>0?bt+"px":""},qt=function(){Tt(!1)},Fn=function(bt){bt===void 0&&(bt=!1),rn&&bt?Et(!0):Tt(!0)},sr=cs({onLongPress:function(){ae&&cn(!0)},onClick:_n},{delay:300,shouldPreventDefault:!1});if(ZO(y))return v.createElement(cY,{message:y});if(Ep(y)){var Pn=y.extendedMessagePayload[xf];if(t3(Pn))return v.createElement(tZ,D({},e,{renderSenderProfile:pe,renderMessageHeader:Ye,renderMessageBody:Ee,isByMe:Mt,displayThreadReplies:$t,mouseHover:ct,isMobile:rn,isReactionEnabledInChannel:Ze,hoveredMenuClassName:Fe,templateType:Pn.type,useReplying:Ot}))}return v.createElement("div",{className:ai([_??"","sendbird-message-content",dn]),onMouseOver:function(){return dt(!0)},onMouseLeave:function(){return dt(!1)}},v.createElement("div",{className:zt("sendbird-message-content__left",ot,dn,Lt),"data-testid":"sendbird-message-content__left"},pe(D(D({},e),{className:"sendbird-message-content__left__avatar",isByMe:Mt,displayThreadReplies:$t,bottom:bn()})),je&&v.createElement("div",{className:zt("sendbird-message-content-menu",ot,Fe,dn)},We({channel:C,message:y,isByMe:Mt,replyType:G,showEdit:W,showRemove:Q,resendMessage:$,setQuoteMessage:ve,onReplyInThread:function(bt){var un,mn,pn=bt.message;j===Ua.THREAD?ie==null||ie({message:pn}):j===Ua.PARENT&&(K==null||K((mn=(un=pn.parentMessage)===null||un===void 0?void 0:un.createdAt)!==null&&mn!==void 0?mn:0,pn.parentMessageId))},deleteMessage:te}),Ze&&Le({message:y,userId:b,emojiContainer:V,toggleReaction:re,filterEmojiCategoryIds:he}))),v.createElement("div",D({className:zt("sendbird-message-content__middle"),"data-testid":"sendbird-message-content__middle"},rn?D({},sr):{},{ref:Ct}),!Mt&&!O&&!Ot&&Ye(e),Ot?v.createElement("div",{className:zt("sendbird-message-content__middle__quote-message",Mt?"outgoing":"incoming",Lt),"data-testid":"sendbird-message-content__middle__quote-message"},v.createElement(hY,{className:"sendbird-message-content__middle__quote-message__quote",message:y,userId:b,isByMe:Mt,isUnavailable:((o=C==null?void 0:C.messageOffsetTimestamp)!==null&&o!==void 0?o:0)>((u=(l=y.parentMessage)===null||l===void 0?void 0:l.createdAt)!==null&&u!==void 0?u:0),onClick:function(){var bt;G==="THREAD"&&j===Ua.THREAD&&(le==null||le({message:y})),(G==="QUOTE_REPLY"||G==="THREAD"&&j===Ua.PARENT)&&(!((bt=y==null?void 0:y.parentMessage)===null||bt===void 0)&&bt.createdAt)&&(y!=null&&y.parentMessageId)&&(K==null||K(y.parentMessage.createdAt,y.parentMessageId))}})):null,v.createElement("div",{className:zt("sendbird-message-content__middle__body-container")},Mt&&!P&&v.createElement("div",{className:zt("sendbird-message-content__middle__body-container__created-at","left",Fe)},v.createElement("div",{className:"sendbird-message-content__middle__body-container__created-at__component-container"},v.createElement(hC,{message:y,channel:C}))),Ee({message:y,channel:C,showFileViewer:J,onMessageHeightChange:Ae,mouseHover:ct,isMobile:rn,config:xe,isReactionEnabledInChannel:Ze,isByMe:Mt,onBeforeDownloadFileMessage:oe}),Ze&&((d=y==null?void 0:y.reactions)===null||d===void 0?void 0:d.length)>0&&v.createElement("div",{className:zt("sendbird-message-content-reactions",Oi(y)?"image-grid":Mt&&!io(y)&&!Xp(y)&&"primary",ct&&"mouse-hover")},At({userId:b,message:y,channel:C,isByMe:Mt,emojiContainer:V,memberNicknamesMap:x??new Map,toggleReaction:re,onPressUserProfile:Ke,filterEmojiCategoryIds:he})),!Mt&&!P&&v.createElement(Me,{className:zt("sendbird-message-content__middle__body-container__created-at","right",Fe),type:be.CAPTION_3,color:de.ONBACKGROUND_2},Ar((y==null?void 0:y.createdAt)||0,St.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:et}))),gt&&(y==null?void 0:y.threadInfo)&&v.createElement(_Y,{className:"sendbird-message-content__middle__thread-replies",threadInfo:y==null?void 0:y.threadInfo,onClick:function(){return ie==null?void 0:ie({message:y})},ref:Dt}),Nn&&v.createElement("div",{className:"sendbird-message-content__middle__body-container__feedback-buttons-container",ref:Vt},v.createElement(Nw,{isSelected:((f=y==null?void 0:y.myFeedback)===null||f===void 0?void 0:f.rating)===Ll.GOOD,onClick:function(){return tn(n,void 0,void 0,function(){var bt,un,mn;return nn(this,function(pn){switch(pn.label){case 0:if(xn)return[3,5];pn.label=1;case 1:return pn.trys.push([1,3,,4]),[4,y.submitFeedback({rating:Ll.GOOD})];case 2:return pn.sent(),Fn(),[3,4];case 3:return bt=pn.sent(),(mn=(un=xe==null?void 0:xe.logger)===null||un===void 0?void 0:un.error)===null||mn===void 0||mn.call(un,"Channel: Submit feedback failed.",bt),pt(St.FEEDBACK_FAILED_SUBMIT),[3,4];case 4:return[3,6];case 5:Fn(!0),pn.label=6;case 6:return[2]}})})},disabled:!!(y!=null&&y.myFeedback)&&y.myFeedback.rating!==Ll.GOOD},v.createElement(qe,{type:Se.FEEDBACK_LIKE,width:"24px",height:"24px"})),v.createElement(Nw,{isSelected:((m=y==null?void 0:y.myFeedback)===null||m===void 0?void 0:m.rating)===Ll.BAD,onClick:function(){return tn(n,void 0,void 0,function(){var bt,un,mn;return nn(this,function(pn){switch(pn.label){case 0:if(xn)return[3,5];pn.label=1;case 1:return pn.trys.push([1,3,,4]),[4,y.submitFeedback({rating:Ll.BAD})];case 2:return pn.sent(),Fn(),[3,4];case 3:return bt=pn.sent(),(mn=(un=xe==null?void 0:xe.logger)===null||un===void 0?void 0:un.error)===null||mn===void 0||mn.call(un,"Channel: Submit feedback failed.",bt),pt(St.FEEDBACK_FAILED_SUBMIT),[3,4];case 4:return[3,6];case 5:Fn(!0),pn.label=6;case 6:return[2]}})})},disabled:!!(y!=null&&y.myFeedback)&&y.myFeedback.rating!==Ll.BAD},v.createElement(qe,{type:Se.FEEDBACK_DISLIKE,width:"24px",height:"24px"})))),sn&&v.createElement("div",{className:zt("sendbird-message-content__right",In,ot,Lt),"data-testid":"sendbird-message-content__right"},v.createElement("div",{className:zt("sendbird-message-content-menu",In,Fe,dn)},Ze&&Le({className:"sendbird-message-content-menu__reaction-menu",message:y,userId:b,emojiContainer:V,toggleReaction:re,filterEmojiCategoryIds:he}),We({className:"sendbird-message-content-menu__normal-menu",channel:C,message:y,isByMe:Mt,replyType:G,showRemove:Q,resendMessage:$,setQuoteMessage:ve,onReplyInThread:function(bt){var un,mn,pn=bt.message;j===Ua.THREAD?ie==null||ie({message:pn}):j===Ua.PARENT&&(K==null||K((mn=(un=pn.parentMessage)===null||un===void 0?void 0:un.createdAt)!==null&&mn!==void 0?mn:0,pn.parentMessageId))},deleteMessage:te}))),Mn&&mc(y)&&C&&st({parentRef:Ct,channel:C,hideMenu:function(){cn(!1)},message:y,isReactionEnabled:Ze,isByMe:Mt,userId:b,replyType:G,disabled:N,showRemove:Q,emojiContainer:V,resendMessage:$,deleteMessage:te,setQuoteMessage:ve,toggleReaction:re,showEdit:W,onReplyInThread:function(bt){var un,mn=bt.message;j===Ua.THREAD?ie==null||ie({message:mn}):j===Ua.PARENT&&(K==null||K(((un=mn==null?void 0:mn.parentMessage)===null||un===void 0?void 0:un.createdAt)||0,(mn==null?void 0:mn.parentMessageId)||0))},onDownloadClick:function(bt){return tn(n,void 0,void 0,function(){var un,mn,pn,Cr;return nn(this,function(yi){switch(yi.label){case 0:if(!oe)return[2];yi.label=1;case 1:return yi.trys.push([1,3,,4]),[4,oe({message:y})];case 2:return un=yi.sent(),un||(bt.preventDefault(),(pn=Xt==null?void 0:Xt.info)===null||pn===void 0||pn.call(Xt,"MessageContent: Not allowed to download.")),[3,4];case 3:return mn=yi.sent(),(Cr=Xt==null?void 0:Xt.error)===null||Cr===void 0||Cr.call(Xt,"MessageContent: Error occurred while determining download continuation:",mn),[3,4];case 4:return[2]}})})}}),((p=y==null?void 0:y.myFeedback)===null||p===void 0?void 0:p.rating)&&Xe&&v.createElement(JX,{hideMenu:function(){Et(!1)},onEditFeedback:function(){Et(!1),Tt(!0)},onRemoveFeedback:function(){return tn(n,void 0,void 0,function(){var bt,un,mn;return nn(this,function(pn){switch(pn.label){case 0:return pn.trys.push([0,3,,4]),y.myFeedback===null?[3,2]:[4,y.deleteFeedback(y.myFeedback.id)];case 1:pn.sent(),pn.label=2;case 2:return[3,4];case 3:return bt=pn.sent(),(mn=(un=xe==null?void 0:xe.logger)===null||un===void 0?void 0:un.error)===null||mn===void 0||mn.call(un,"Channel: Delete feedback failed.",bt),pt(St.FEEDBACK_FAILED_DELETE),[3,4];case 4:return Et(!1),[2]}})})}}),((E=y==null?void 0:y.myFeedback)===null||E===void 0?void 0:E.rating)&&Jt&&v.createElement(eZ,{selectedFeedback:y.myFeedback.rating,message:y,onUpdate:function(bt,un){return tn(n,void 0,void 0,function(){var mn,pn,Cr,yi;return nn(this,function(Dr){switch(Dr.label){case 0:if(y.myFeedback===null)return[3,4];mn=new Lo({id:y.myFeedback.id,rating:bt,comment:un}),Dr.label=1;case 1:return Dr.trys.push([1,3,,4]),[4,y.updateFeedback(mn)];case 2:return Dr.sent(),[3,4];case 3:return pn=Dr.sent(),(yi=(Cr=xe==null?void 0:xe.logger)===null||Cr===void 0?void 0:Cr.error)===null||yi===void 0||yi.call(Cr,"Channel: Update feedback failed.",pn),pt(St.FEEDBACK_FAILED_SAVE),[3,4];case 4:return qt(),[2]}})})},onClose:qt,onRemove:function(){return tn(n,void 0,void 0,function(){var bt,un,mn;return nn(this,function(pn){switch(pn.label){case 0:return pn.trys.push([0,3,,4]),y.myFeedback===null?[3,2]:[4,y.deleteFeedback(y.myFeedback.id)];case 1:pn.sent(),pn.label=2;case 2:return[3,4];case 3:return bt=pn.sent(),(mn=(un=xe==null?void 0:xe.logger)===null||un===void 0?void 0:un.error)===null||mn===void 0||mn.call(un,"Channel: Delete feedback failed.",bt),pt(St.FEEDBACK_FAILED_DELETE),[3,4];case 4:return qt(),[2]}})})}}),Sn&&v.createElement(fL,{text:Sn,onCancel:function(){pt("")}}))}var rZ=function(e){var n=e.value,t=e.onClickReply,r=e.type,i=r===void 0?"vertical":r;return v.createElement("div",{className:"sendbird-suggested-replies__option ".concat(i),id:n,onClick:function(a){return t(a,n)}},n)},iZ=function(e){var n=e.replyOptions,t=e.onSendMessage,r=e.type,i=r===void 0?"vertical":r,a=M.useState(!1),s=a[0],o=a[1],l=function(d,f){d.preventDefault(),t({message:f}),o(!0)};if(s)return null;var u=n.map(function(d,f){return v.createElement(rZ,{key:f,value:d,onClickReply:l,type:i})});return v.createElement("div",{className:"sendbird-suggested-replies ".concat(i)},u)};function aZ(e){var n=e.member,t=e.isFocused,r=t===void 0?!1:t,i=e.parentScrollRef,a=e.onClick,s=e.onMouseOver,o=e.onMouseMove,l=e.renderUserMentionItem,u=M.useRef(null),d=M.useContext(On).stringSet;M.useEffect(function(){r&&(i==null?void 0:i.current)!=null&&(u==null?void 0:u.current)!=null&&(i.current.scrollTop>=u.current.offsetTop||i.current.scrollTop+i.current.clientHeight<=u.current.offsetTop)&&u.current.scrollIntoView({block:"nearest",inline:"nearest"})},[r]);var f=M.useMemo(function(){if(l)return v.createElement("div",{className:"sendbird-mention-suggest-list__user-item",onClick:function(m){return a==null?void 0:a({event:m,member:n,itemRef:u})},onMouseOver:function(m){return s==null?void 0:s({event:m,member:n,itemRef:u})},onMouseMove:function(m){return o==null?void 0:o({event:m,member:n,itemRef:u})},key:(n==null?void 0:n.userId)||qr(),ref:u},l({user:n}))},[l]);return f||v.createElement("div",{className:zt("sendbird-mention-suggest-list__user-item",r&&"focused"),onClick:function(m){return a==null?void 0:a({event:m,member:n,itemRef:u})},onMouseOver:function(m){return s==null?void 0:s({event:m,member:n,itemRef:u})},onMouseMove:function(m){return o==null?void 0:o({event:m,member:n,itemRef:u})},key:(n==null?void 0:n.userId)||qr(),ref:u},v.createElement(Fr,{className:"sendbird-mention-suggest-list__user-item__avatar",src:n==null?void 0:n.profileUrl,alt:"user-profile",width:"24px",height:"24px"}),v.createElement(Me,{className:"sendbird-mention-suggest-list__user-item__nickname",testID:"sendbird-mention-suggest-list__user-item__nickname",type:be.SUBTITLE_2,color:n!=null&&n.nickname?de.ONBACKGROUND_1:de.ONBACKGROUND_3},(n==null?void 0:n.nickname)||(d==null?void 0:d.MENTION_NAME__NO_NAME)),v.createElement(Me,{className:"sendbird-mention-suggest-list__user-item__user-id",testID:"sendbird-mention-suggest-list__user-item__user-id",type:be.SUBTITLE_2,color:de.ONBACKGROUND_2},n==null?void 0:n.userId))}function sZ(e,n,t,r){return tn(this,void 0,void 0,function(){return nn(this,function(i){return[2,n.members.sort(function(a,s){var o;return(o=a.nickname)===null||o===void 0?void 0:o.localeCompare(s.nickname)}).filter(function(a){var s;return((s=a.nickname)===null||s===void 0?void 0:s.toLowerCase().startsWith(r.toLowerCase()))&&a.userId!==e&&a.isActive}).slice(0,t)]})})}function oZ(e,n,t,r){return tn(this,void 0,void 0,function(){var i;return nn(this,function(a){return i=n.createMemberListQuery({limit:t+1,nicknameStartsWithFilter:r}),[2,i.next().then(function(s){return s.filter(function(o){return e!==(o==null?void 0:o.userId)}).slice(0,t)})]})})}var lZ=300,SC=function(e){var n,t,r,i=e.className,a=e.currentChannel,s=e.targetNickname,o=s===void 0?"":s,l=e.onUserItemClick,u=e.onFocusItemChange,d=e.onFetchUsers,f=e.renderUserMentionItem,m=e.inputEvent,p=e.ableAddMention,E=p===void 0?!0:p,_=e.maxMentionCount,b=_===void 0?c3:_,C=e.maxSuggestionCount,y=C===void 0?d3:C,T=yt().state,N=T.config,w=T.stores,O=N.logger,L=((r=(t=(n=w==null?void 0:w.sdkStore)===null||n===void 0?void 0:n.sdk)===null||t===void 0?void 0:t.currentUser)===null||r===void 0?void 0:r.userId)||"",P=M.useRef(null),U=Ut().stringSet,B=M.useState(null),F=B[0],H=B[1],G=M.useState(""),j=G[0],x=G[1],V=M.useState(""),K=V[0],W=V[1],Q=M.useState(null),J=Q[0],$=Q[1],te=M.useState([]),re=te[0],ve=te[1];return M.useEffect(function(){clearTimeout(F??void 0),H(setTimeout(function(){x(o)},lZ))},[o]),M.useEffect(function(){if((m==null?void 0:m.key)===ei.Enter&&J&&re.length>0&&(l==null||l(J)),(m==null?void 0:m.key)===ei.ArrowUp){var ie=re.findIndex(function(le){return(le==null?void 0:le.userId)===(J==null?void 0:J.userId)});0<ie&&($(re[ie-1]),u==null||u(re[ie-1]))}if((m==null?void 0:m.key)===ei.ArrowDown){var ie=re.findIndex(function(Ae){return(Ae==null?void 0:Ae.userId)===(J==null?void 0:J.userId)});ie<re.length-1&&($(re[ie+1]),u==null||u(re[ie+1]))}},[m]),M.useEffect(function(){if(!(K&&j.indexOf(K)===0&&re.length===0)){if(a!=null&&a.isSuper&&!(a!=null&&a.createMemberListQuery)){O.warning("SuggestedMentionList: Creating member list query failed");return}var ie=a!=null&&a.isSuper?oZ:sZ;ie(L,a,y,j.slice(mf.length)).then(function(le){le.length<1?O.info("SuggestedMentionList: Fetched member list is empty"):(O.info("SuggestedMentionList: Fetching member list succeeded",{memberList:le}),$(le[0])),W(j),d==null||d(le),ve(le)}).catch(function(le){le&&O.error("SuggestedMentionList: Fetching member list failed",le)})}},[a==null?void 0:a.url,a==null?void 0:a.members.map(function(ie){return ie.nickname}).join(),a==null?void 0:a.members.map(function(ie){return ie.isActive}).join(),j,y,L,re.length,K]),!E&&re.length===0?null:v.createElement("div",{className:zt("sendbird-mention-suggest-list",i),"data-testid":"sendbird-mention-suggest-list",key:"sendbird-mention-suggest-list",ref:P},E&&(re==null?void 0:re.map(function(ie){return v.createElement(aZ,{key:(ie==null?void 0:ie.userId)||qr(),member:ie,isFocused:(ie==null?void 0:ie.userId)===(J==null?void 0:J.userId),parentScrollRef:P,onClick:function(le){var Ae=le.member;l==null||l(Ae)},onMouseOver:function(le){var Ae=le.member;$(Ae)},renderUserMentionItem:f})})),!E&&v.createElement("div",{className:"sendbird-mention-suggest-list__notice-item"},v.createElement(qe,{className:"sendbird-mention-suggest-list__notice-item__icon",type:Se.INFO,fillColor:ze.ON_BACKGROUND_2,width:"20px",height:"20px"}),v.createElement(Me,{className:"sendbird-mention-suggest-list__notice-item__text",type:be.SUBTITLE_2,color:de.ONBACKGROUND_2},U.MENTION_COUNT__OVER_LIMIT.replace("%d",String(b)))))},Iw=function(e,n){var t=M.useState(!1),r=t[0],i=t[1];M.useEffect(function(){r?e():i(!0)},n)},gL=function(e){var n,t,r=e.message,i=e.children,a=e.hasSeparator,s=e.chainTop,o=e.chainBottom,l=e.handleScroll,u=e.channel,d=e.emojiContainer,f=e.editInputDisabled,m=e.shouldRenderSuggestedReplies,p=e.isReactionEnabled,E=e.replyType,_=e.threadReplySelectType,b=e.nicknamesMap,C=e.scrollToMessage,y=e.toggleReaction,T=e.setQuoteMessage,N=e.onQuoteMessageClick,w=e.onReplyInThreadClick,O=e.onBeforeDownloadFileMessage,L=e.sendUserMessage,P=e.updateUserMessage,U=e.resendMessage,B=e.deleteMessage,F=e.setAnimatedMessageId,H=e.animatedMessageId,G=e.onMessageAnimated,j=e.usedInLegacy,x=j===void 0?!0:j,V=sa(e),K=V.renderUserMentionItem,W=V.renderMessage,Q=V.renderMessageContent,J=Q===void 0?function(Fe){return v.createElement(nZ,D({},Fe))}:Q,$=V.renderSuggestedReplies,te=$===void 0?function(Fe){return v.createElement(iZ,D({},Fe))}:$,re=V.renderCustomSeparator,ve=V.renderEditInput,ie=V.renderFileViewer,le=V.renderRemoveMessageModal,Ae=V.filterEmojiCategoryIds,oe=Ut(),he=oe.dateLocale,me=oe.stringSet,Be=yt().state,pe=Be.config,ye=pe.userId,Ee=pe.isOnline,Ue=pe.userMention,Ye=pe.logger,De=pe.groupChannel,We=(Ue==null?void 0:Ue.maxMentionCount)||c3,Je=(Ue==null?void 0:Ue.maxSuggestionCount)||d3,Le=M.useState(!1),He=Le[0],At=Le[1],Ve=M.useState(!1),st=Ve[0],mt=Ve[1],et=M.useState(!1),St=et[0],Rt=et[1],xe=M.useState(!1),Ht=xe[0],Xt=xe[1],Ke=M.useState(""),Ct=Ke[0],Dt=Ke[1],Vt=M.useState([]),rn=Vt[0],Zt=Vt[1],Mn=M.useState([]),cn=Mn[0],ht=Mn[1],ct=M.useState(null),dt=ct[0],ke=ct[1],ge=M.useState(null),Xe=ge[0],Et=ge[1],Pt=M.useState([]),Jt=Pt[0],Tt=Pt[1],vn=M.useRef(null),Sn=M.useRef(null),pt=Ee&&De.enableMention&&Ct.length>0&&!Af(u)&&!Cd(u),Mt=jf({ref:vn},{logger:Ye}),dn=(Mt==null?void 0:Mt.length)<We;M.useEffect(function(){Zt(rn.filter(function(Fe){var Ot=Fe.userId,Lt=cn.indexOf(Ot);return Lt<0?!1:(cn.splice(Lt,1),!0)}))},[cn]),Iw(function(){l==null||l()},[He,(n=r==null?void 0:r.reactions)===null||n===void 0?void 0:n.length]),Iw(function(){l==null||l(!0)},[r==null?void 0:r.updatedAt,r==null?void 0:r.message]);var In=M.useRef(m);M.useEffect(function(){In.current!==m?l==null||l():In.current=m},[m]),M.useLayoutEffect(function(){x&&(l==null||l(!0))},[]),M.useLayoutEffect(function(){var Fe=[];return H===r.messageId&&(Sn!=null&&Sn.current)?(Fe.push(setTimeout(function(){Xt(!0)},500)),Fe.push(setTimeout(function(){F(null),G==null||G()},1600))):Xt(!1),function(){Fe.forEach(function(Ot){return clearTimeout(Ot)})}},[H,Sn.current,r.messageId]);var Ze=M.useMemo(function(){var Fe;return(Fe=re==null?void 0:re({message:r}))!==null&&Fe!==void 0?Fe:null},[r,re]),ot=function(){if(i)return i;if(W){var Fe=D(D({},e),{renderMessage:void 0});return W(Fe)}return v.createElement(v.Fragment,null,J({className:"sendbird-message-hoc__message-content",userId:ye,scrollToMessage:C,channel:u,message:r,disabled:!Ee,chainTop:s,chainBottom:o,isReactionEnabled:p,replyType:E,threadReplySelectType:_,nicknamesMap:b,emojiContainer:d,showEdit:At,showRemove:mt,showFileViewer:Rt,resendMessage:U,deleteMessage:B,toggleReaction:y,setQuoteMessage:T,onReplyInThread:w,onQuoteMessageClick:N,onMessageHeightChange:l,onBeforeDownloadFileMessage:O,filterEmojiCategoryIds:Ae}),m&&te({replyOptions:Jb(r),onSendMessage:L,type:De==null?void 0:De.suggestedRepliesDirection}),st&&(le==null?void 0:le({message:r,onCancel:function(){return mt(!1)}})),St&&ie({message:r,onCancel:function(){return Rt(!1)}}))};return He&&(!((t=r==null?void 0:r.isUserMessage)===null||t===void 0)&&t.call(r))?(ve==null?void 0:ve())||v.createElement(v.Fragment,null,pt&&v.createElement(SC,{currentChannel:u,targetNickname:Ct,inputEvent:dt??void 0,renderUserMentionItem:K,onUserItemClick:function(Fe){Fe&&Zt(Ne(Ne([],rn,!0),[Fe],!1)),Dt(""),Et(Fe),ke(null)},onFocusItemChange:function(){ke(null)},onFetchUsers:function(Fe){Tt(Fe)},ableAddMention:dn,maxMentionCount:We,maxSuggestionCount:Je}),v.createElement(gc,{isEdit:!0,channel:u,disabled:f,ref:vn,mentionSelectedUser:Xe,isMentionEnabled:De.enableMention,message:r,onStartTyping:function(){var Fe;(Fe=u==null?void 0:u.startTyping)===null||Fe===void 0||Fe.call(u)},onUpdateMessage:function(Fe){var Ot,Lt=Fe.messageId,$t=Fe.message,an=Fe.mentionTemplate;P(Lt,{message:$t,mentionedUsers:rn,mentionedMessageTemplate:an}),At(!1),(Ot=u==null?void 0:u.endTyping)===null||Ot===void 0||Ot.call(u)},onCancelEdit:function(){var Fe;Dt(""),Zt([]),ht([]),Tt([]),At(!1),(Fe=u==null?void 0:u.endTyping)===null||Fe===void 0||Fe.call(u)},onUserMentioned:function(Fe){(Xe==null?void 0:Xe.userId)===(Fe==null?void 0:Fe.userId)&&(Et(null),Dt(""))},onMentionStringChange:function(Fe){Dt(Fe)},onMentionedUserIdsUpdated:function(Fe){ht(Fe)},onKeyDown:function(Fe){return pt&&(Jt==null?void 0:Jt.length)>0&&(Fe.key===ei.Enter&&dn||Fe.key===ei.ArrowUp||Fe.key===ei.ArrowDown)?(ke(Fe),!0):!1}})):v.createElement("div",{className:zt("sendbird-msg-hoc sendbird-msg--scroll-ref",Ht&&"sendbird-msg-hoc__animated"),"data-testid":"sendbird-message-view",style:i||W?void 0:{marginBottom:"2px"},"data-sb-message-id":r.messageId,"data-sb-created-at":r.createdAt,ref:Sn},a&&(Ze||v.createElement(sC,null,v.createElement(Me,{type:be.CAPTION_2,color:de.ONBACKGROUND_2},Ar(r.createdAt,me.DATE_FORMAT__MESSAGE_LIST__DATE_SEPARATOR,{locale:he})))),ot())},_L=function(e){var n=e.message,t=e.onCancel,r=e.deleteMessage,i=e.onDownloadClick,a=n.sender,s=n.type,o=n.url,l=n.name,u=l===void 0?"":l,d=n.threadInfo,f=a.profileUrl,m=a.nickname,p=a.userId,E=yt().state,_=E.config;return kd.createPortal(v.createElement(uZ,{profileUrl:f,nickname:m,type:s,url:o,name:u,onCancel:t,onDelete:function(){return r(n).then(function(){return t()})},isByMe:_.userId===p,disableDelete:d!=null&&d.replyCount?d.replyCount>0:!1,onDownloadClick:i}),document.getElementById(nc))},uZ=function(e){var n=e.profileUrl,t=e.nickname,r=e.name,i=e.type,a=e.url,s=e.isByMe,o=e.onCancel,l=e.onDelete,u=e.disableDelete,d=e.onDownloadClick;return v.createElement(wr,{onClose:o},v.createElement("div",{className:"sendbird-fileviewer","data-testid":"sendbird-fileviewer"},v.createElement("div",{className:"sendbird-fileviewer__header"},v.createElement("div",{className:"sendbird-fileviewer__header__left"},v.createElement("div",{className:"sendbird-fileviewer__header__left__avatar"},v.createElement(Fr,{height:"32px",width:"32px",src:n})),v.createElement("div",{className:"sendbird-fileviewer__header__left__text-container"},v.createElement(Me,{className:"sendbird-fileviewer__header__left__filename",type:be.H_2,color:de.ONBACKGROUND_1},r),v.createElement(Me,{className:"sendbird-fileviewer__header__left__sender-name",type:be.BODY_1,color:de.ONBACKGROUND_2},t))),v.createElement("div",{className:"sendbird-fileviewer__header__right"},Nf(i)&&v.createElement("div",{className:"sendbird-fileviewer__header__right__actions"},v.createElement("a",{className:"sendbird-fileviewer__header__right__actions__download",rel:"noopener noreferrer",href:a,target:"_blank",onClick:d},v.createElement(qe,{type:Se.DOWNLOAD,fillColor:ze.ON_BACKGROUND_1,height:"24px",width:"24px"})),l&&s&&v.createElement("div",{className:"sendbird-fileviewer__header__right__actions__delete"},v.createElement(qe,{className:u?"disabled":"",type:Se.DELETE,fillColor:u?ze.GRAY:ze.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:function(){u||l()}}))),v.createElement("div",{className:"sendbird-fileviewer__header__right__actions__close"},v.createElement(qe,{type:Se.CLOSE,fillColor:ze.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:o})))),v.createElement("div",{className:"sendbird-fileviewer__content"},jo(i)&&v.createElement("video",{controls:!0,className:"sendbird-fileviewer__content__video"},v.createElement("source",{src:a,type:i})),Ds(i)&&v.createElement("img",{src:a,alt:r,className:"sendbird-fileviewer__content__img"}),!Nf(i)&&v.createElement("div",{className:"sendbird-fileviewer__content__unsupported"},v.createElement(Me,{type:be.H_1,color:de.ONBACKGROUND_1},hc.UI__FILE_VIEWER__UNSUPPORT)))))},cZ=function(e){var n=ao(),t=n.state.onBeforeDownloadFileMessage,r=n.actions.deleteMessage,i=yt().state.config.logger;return v.createElement(_L,D({},e,{deleteMessage:r,onDownloadClick:function(a){return tn(void 0,void 0,void 0,function(){var s,o,l,u;return nn(this,function(d){switch(d.label){case 0:if(!t)return[2];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,t({message:e.message})];case 2:return s=d.sent(),s||(a.preventDefault(),(l=i.info)===null||l===void 0||l.call(i,"FileViewer: Not allowed to download.")),[3,4];case 3:return o=d.sent(),(u=i.error)===null||u===void 0||u.call(i,"FileViewer: Error occurred while determining download continuation:",o),[3,4];case 4:return[2]}})})}}))};function TC(e,n){return ji(n).when(Oi,function(){var t=n.fileInfoList.length;return"Do you want to delete all ".concat(t," photos?")}).otherwise(function(){return e.MODAL__DELETE_MESSAGE__TITLE})}var EL=function(e){var n,t=e.onSubmit,r=t===void 0?function(){}:t,i=e.onCancel,a=e.message,s=e.deleteMessage,o=M.useContext(On).stringSet;return v.createElement(wr,{type:Vn.DANGER,disabled:!((n=a==null?void 0:a.threadInfo)===null||n===void 0)&&n.replyCount?a.threadInfo.replyCount>0:void 0,onCancel:i,onSubmit:function(){(a.isUserMessage()||a.isFileMessage()||a.isMultipleFilesMessage())&&s(a).then(function(){r(),i()})},submitText:o.MESSAGE_MENU__DELETE,titleText:TC(o,a)})},dZ=function(e){var n=ao().actions.deleteMessage;return v.createElement(EL,D({},e,{deleteMessage:n}))},hZ=function(e){var n=yt().state,t=n.config,r=n.emojiManager,i=ao(),a=i.state,s=a.loading,o=a.currentChannel,l=a.animatedMessageId,u=a.replyType,d=a.threadReplySelectType,f=a.isReactionEnabled,m=a.nicknamesMap,p=a.renderUserMentionItem,E=a.filterEmojiCategoryIds,_=a.onQuoteMessageClick,b=a.onReplyInThreadClick,C=a.onMessageAnimated,y=a.onBeforeDownloadFileMessage,T=a.messages,N=i.actions,w=N.toggleReaction,O=N.setQuoteMessage,L=N.setAnimatedMessageId,P=N.scrollToMessage,U=N.updateUserMessage,B=N.sendUserMessage,F=N.resendMessage,H=N.deleteMessage,G=e.message,j=!s&&!!o,x=QR(function(){var V=t.groupChannel,K=V.enableSuggestedReplies,W=V.showSuggestedRepliesFor,Q=T[T.length-1],J=mc(Q)&&(Q==null?void 0:Q.sendingStatus)!=="succeeded",$=W==="all_messages"?!0:G.messageId===(Q==null?void 0:Q.messageId);return K&&Jb(G).length>0&&!J&&$});return v.createElement(gL,D({},e,{channel:o,emojiContainer:r==null?void 0:r.emojiContainer,editInputDisabled:!j||Af(o??void 0)||Cd(o??void 0)||!t.isOnline,shouldRenderSuggestedReplies:x,isReactionEnabled:f??!1,replyType:u??"NONE",threadReplySelectType:d??Ua.PARENT,nicknamesMap:m,renderUserMentionItem:p,filterEmojiCategoryIds:E,scrollToMessage:P,toggleReaction:w,setQuoteMessage:O,onQuoteMessageClick:_,onReplyInThreadClick:b,sendUserMessage:B,updateUserMessage:U,resendMessage:F,deleteMessage:H,animatedMessageId:l,setAnimatedMessageId:L,onMessageAnimated:C,renderFileViewer:function(V){return v.createElement(cZ,D({},V))},renderRemoveMessageModal:function(V){return v.createElement(dZ,D({},V))},usedInLegacy:!1,onBeforeDownloadFileMessage:y}))},yL=function(e){var n=e.className,t=n===void 0?"":n,r=e.count,i=r===void 0?0:r,a=e.time,s=a===void 0?"":a,o=e.onClick,l=e.lastReadAt,u=M.useContext(On),d=u.stringSet,f=u.dateLocale,m=M.useMemo(function(){var p,E;if(d.CHANNEL__MESSAGE_LIST__NOTIFICATION__ON!=="on"){var _=((E=(p=s==null?void 0:s.toString)===null||p===void 0?void 0:p.call(s))===null||E===void 0?void 0:E.split(" "))||[];return _==null||_.splice(-2,0,d.CHANNEL__MESSAGE_LIST__NOTIFICATION__ON),_.join(" ")}else if(l)return Ar(l,d.DATE_FORMAT__MESSAGE_LIST__NOTIFICATION__UNREAD_SINCE,{locale:f})},[s,l]);return v.createElement("div",{className:zt(i<1?"sendbird-notification--hide":"sendbird-notification",t),"data-testid":"sendbird-notification",onClick:o},v.createElement(Me,{className:"sendbird-notification__text",testID:"sendbird-notification__text",color:de.ONCONTENT_1,type:be.CAPTION_2},"".concat(i," "),d.CHANNEL__MESSAGE_LIST__NOTIFICATION__NEW_MESSAGE," ".concat(m)),v.createElement(qe,{width:"24px",height:"24px",type:Se.CHEVRON_DOWN,fillColor:ze.CONTENT}))},bL=function(e){var n=e.className,t=n===void 0?"":n,r=M.useContext(On).stringSet;return v.createElement("div",{className:zt("sendbird-notification","sendbird-notification--frozen",t),"data-testid":"sendbird-notification"},v.createElement(Me,{className:"sendbird-notification__text",testID:"sendbird-notification__text",type:be.CAPTION_2},r.CHANNEL_FROZEN))},fZ=function(){return v.createElement("div",{className:"typing-dots-container"},v.createElement("span",null),v.createElement("span",null),v.createElement("span",null))},CL=2,Lf=28,Aw=Lf+CL*2,ab=24,Sm=3,vZ=CL,mZ=function(e){var n=e.sources,t=e.max;return v.createElement(v.Fragment,null," ",n.slice(0,t).map(function(r,i){return v.createElement(Fr,{className:"sendbird-message-content__left__avatar multiple",src:r||"",key:"avatar_stack_item_".concat(r),width:"".concat(Lf,"px"),height:"".concat(Lf,"px"),zIndex:i,left:"".concat(i*ab-vZ,"px")})})," ")},pZ=function(e){var n=e.typingMembers,t=n.length,r=Math.min(t,4),i=t-Sm,a=(r-1)*(Aw-ab),s=12;return v.createElement("div",{className:"sendbird-message-content__left incoming",style:{minWidth:r*Aw-a+s}},v.createElement(mZ,{sources:n.map(function(o){return o.profileUrl}),max:Sm}),i>0?v.createElement(Fr,{className:"sendbird-message-content__left__avatar multiple",width:"".concat(Lf,"px"),height:"".concat(Lf,"px"),zIndex:Sm,left:"".concat(Sm*ab,"px"),customDefaultComponent:function(o){var l=o.width,u=o.height;return v.createElement(y3,{width:l,height:u,text:"+".concat(i)})}}):null)},SL=function(e){var n=e.typingMembers,t=e.handleScroll;return M.useLayoutEffect(function(){t==null||t(!0)},[]),n.length===0?null:v.createElement("div",{className:"sendbird-message-content incoming",style:{marginBottom:"2px"}},v.createElement(pZ,{typingMembers:n}),v.createElement("div",{className:"sendbird-message-content__middle"},v.createElement(fZ,null)))},MC=function(e,n,t,r,i,a){if(!i||i.channelType!=="group")return[Tm(e,n,r),Tm(n,t,r)];if(a==="THREAD"&&(n!=null&&n.threadInfo))return[!1,!1];var s=(n==null?void 0:n.sendingStatus)||"",o=s!=="pending"&&s!=="failed";return[Tm(e,n,r,i)&&o,Tm(n,t,r,i)&&o]},ww=function(e,n){return Ar(e.createdAt,n.DATE_FORMAT__MESSAGE_CREATED_AT)},Tm=function(e,n,t,r){var i,a;return e&&n&&e.messageType&&e.messageType!=="admin"&&n.messageType&&(n==null?void 0:n.messageType)!=="admin"&&"sender"in e&&"sender"in n&&e.createdAt&&n.createdAt&&e.sender.userId&&n.sender.userId?(e==null?void 0:e.sendingStatus)===(n==null?void 0:n.sendingStatus)&&((i=e==null?void 0:e.sender)===null||i===void 0?void 0:i.userId)===((a=n==null?void 0:n.sender)===null||a===void 0?void 0:a.userId)&&ww(e,t)===ww(n,t)&&(r?lA(r,e)===lA(r,n):!0):!1},sb=function(e){var n=e.allMessages,t=e.stringSet,r=e.isMessageGroupingEnabled,i=r===void 0?!0:r,a=e.currentIndex,s=a===void 0?0:a,o=e.currentMessage,l=e.currentChannel,u=l===void 0?null:l,d=e.replyType,f=d===void 0?"":d,m=n[s-1],p=n[s+1],E=i?MC(m,o,p,t,u,f):[!1,!1],_=E[0],b=E[1],C=m==null?void 0:m.createdAt,y=o.createdAt,T="sendingStatus"in o&&o.sendingStatus!=="succeeded",N=T?!1:!(C&&r0(y,C));return{chainTop:_,chainBottom:b,hasSeparator:N}},TL=function(e,n,t){var r;try{var i=e.current,a=(r=i==null?void 0:i.querySelectorAll('[data-sb-created-at="'.concat(n,'"]')))===null||r===void 0?void 0:r[0];i&&a instanceof HTMLElement&&(i.scrollTop=a.offsetTop)}catch{}finally{t==null||t(!0)}},no=function(e,n,t){e===void 0&&(e=0);var r=10,i=e;if(i>r){t==null||t(!0);return}try{var a=(n==null?void 0:n.current)||document.querySelector(".sendbird-conversation__messages-padding");a&&(a.scrollTop=a.scrollHeight),t==null||t(!0)}catch{setTimeout(function(){no(i+1,n,t)},500*i)}},ML=function(e){var n=e==null?void 0:e.myRole;return n==="operator"},NL=function(e){var n=e==null?void 0:e.isFrozen;return n&&!ML(e)},IL=function(e){var n=e==null?void 0:e.myMutedState;return n==="muted"},gZ=function(e){for(var n=e.emojiCategories,t=n===void 0?[]:n,r=new Map,i=0;i<t.length;i+=1)for(var a=t[i].emojis,s=0;s<a.length;s+=1){var o=a[s],l=o.key,u=o.url;r.set(l,u)}return r},_Z=function(e){e===void 0&&(e=[]);for(var n=new Map,t=0;t<e.length;t+=1){var r=e[t],i=r.userId,a=r.nickname;n.set(i,a)}return n},EZ=function(e,n){var t=e.map(function(r){return[r[n],r]});return Array.from(new Map(t).values())},yZ=function(e){return EZ(e,"messageId")},bZ=function(e){return e.sort(function(n,t){return n.createdAt-t.createdAt})},CZ=function(e,n){var t=e[e.length-1],r=n[0];if((t==null?void 0:t.createdAt)<(r==null?void 0:r.createdAt))return Ne(Ne([],e,!0),n,!0);var i=Ne(Ne([],e,!0),n,!0),a=yZ(i);return bZ(a)},Rw=function(e,n){if("sendingStatus"in n&&(n.sendingStatus===gn.SUCCEEDED||n.sendingStatus===gn.PENDING)){var t=e.map(function(i){return"sendingStatus"in i&&i.sendingStatus?i.sendingStatus:i.isAdminMessage()?gn.SUCCEEDED:null}).lastIndexOf(gn.SUCCEEDED);if(t+1<e.length){var r=Ne([],e,!0);return r.splice(t+1,0,n),r}}return Ne(Ne([],e,!0),[n],!1)},Fo=function(e,n,t){return Math.abs(e-n)<=t},SZ=M.forwardRef(function(e,n){var t=e.messages,r=e.renderMessage,i=e.scrollPositionRef,a=e.scrollDistanceFromBottomRef,s=e.onLoadPrevious,o=e.onLoadNext,l=e.loadThreshold,u=l===void 0?.05:l,d=e.typingIndicator,f=e.onScrollPosition,m=f===void 0?_n:f,p=e.initDeps,E=v.useRef(!1),_=v.useRef(),b=M.useRef(0);M.useLayoutEffect(function(){n.current&&(n.current.scrollTop=n.current.scrollHeight)},p),M.useLayoutEffect(function(){n.current&&(_.current==="top"&&(n.current.scrollTop=n.current.scrollHeight-i.current),_.current==="bottom"&&(n.current.scrollTop=b.current),_.current=void 0)},[n.current,t.length]);var C=M.useCallback(function(){return tn(void 0,void 0,void 0,function(){var y,T;return nn(this,function(N){switch(N.label){case 0:return n.current?(y=n.current,m(TZ(y)),i.current=y.scrollHeight-y.scrollTop,a.current=i.current-y.clientHeight,b.current=y.scrollTop,E.current?[2]:(T=y.clientHeight*Math.min(Math.max(0,u),1),y.scrollTop<=T?(E.current=!0,_.current="top",[4,s()]):[3,2])):[2];case 1:return N.sent(),E.current=!1,[3,5];case 2:return y.scrollHeight-y.scrollTop-y.clientHeight<=T?(E.current=!0,_.current="bottom",[4,o()]):[3,4];case 3:return N.sent(),E.current=!1,[3,5];case 4:_.current=void 0,N.label=5;case 5:return[2]}})})},[t.length]);return v.createElement("div",{className:"sendbird-conversation__scroll-container"},v.createElement("div",{className:"sendbird-conversation__padding"}),v.createElement("div",{ref:n,className:"sendbird-conversation__messages-padding","data-testid":"sendbird-message-list-container",onScroll:C},t.map(function(y,T){return r({message:y,index:T})}),d))});function TZ(e){return Fo(e.scrollTop,0,ws)?"top":Fo(e.scrollHeight,e.clientHeight+e.scrollTop,ws)?"bottom":"middle"}var MZ=function(e){var n,t,r,i,a,s=e.className,o=s===void 0?"":s,l=sa(e),u=l.renderMessage,d=u===void 0?function(pe){return v.createElement(hZ,D({},pe))}:u,f=l.renderMessageContent,m=l.renderSuggestedReplies,p=l.renderCustomSeparator,E=l.renderPlaceholderLoader,_=E===void 0?function(){return v.createElement(Nr,{type:Dn.LOADING})}:E,b=l.renderPlaceholderEmpty,C=b===void 0?function(){return v.createElement(Nr,{className:"sendbird-conversation__no-messages",type:Dn.NO_MESSAGES})}:b,y=l.renderFrozenNotification,T=y===void 0?function(){return v.createElement(bL,{className:"sendbird-conversation__messages__notification"})}:y,N=ao(),w=N.state,O=w.channelUrl,L=w.hasNext,P=w.loading,U=w.messages,B=w.newMessages,F=w.isScrollBottomReached,H=w.isMessageGroupingEnabled,G=w.currentChannel,j=w.replyType,x=w.scrollPubSub,V=w.loadNext,K=w.loadPrevious,W=w.resetNewMessages,Q=w.scrollRef,J=w.scrollPositionRef,$=w.scrollDistanceFromBottomRef,te=N.actions,re=te.scrollToBottom,ve=te.setIsScrollBottomReached,ie=yt().state,le=Ut().stringSet,Ae=M.useState(),oe=Ae[0],he=Ae[1];M.useEffect(function(){he(F?void 0:new Date)},[F]);var me=function(pe){pe===void 0&&(pe=!1);var ye=Q.current;if(ye){var Ee=$.current,Ue=ye.scrollHeight-ye.scrollTop-ye.offsetHeight;if(Ee<Ue&&(!pe||Ee<ws)){var Ye=Ue-Ee;x.publish("scroll",{top:ye.scrollTop+Ye,lazy:!1,animated:!1})}}},Be={frozenNotification:function(){return!G||!G.isFrozen?null:T()},unreadMessagesNotification:function(){return F||!oe?null:v.createElement(yL,{className:"sendbird-conversation__messages__notification",count:B.length,lastReadAt:oe,onClick:function(){return re()}})},scrollToBottomButton:function(){return!L()&&F?null:v.createElement("div",{className:"sendbird-conversation__scroll-bottom-button",onClick:function(){return re()},onKeyDown:function(){return re()},tabIndex:0,role:"button"},v.createElement(qe,{width:"24px",height:"24px",type:Se.CHEVRON_DOWN,fillColor:ze.PRIMARY}))}};return P?_():U.length===0?C():v.createElement(v.Fragment,null,v.createElement("div",{className:"sendbird-conversation__messages ".concat(o),dir:rC(ie.config.htmlTextDirection,ie.config.forceLeftToRightMessageLayout)},v.createElement(SZ,{ref:Q,initDeps:[O],scrollPositionRef:J,scrollDistanceFromBottomRef:$,onLoadNext:V,onLoadPrevious:K,onScrollPosition:function(pe){var ye=pe==="bottom";B.length>0&&ye&&W(),ve(ye)},messages:U,renderMessage:function(pe){var ye=pe.message,Ee=pe.index,Ue=sb({allMessages:U,stringSet:le,replyType:j??"NONE",isMessageGroupingEnabled:H??!1,currentIndex:Ee,currentMessage:ye,currentChannel:G}),Ye=Ue.chainTop,De=Ue.chainBottom,We=Ue.hasSeparator,Je=mc(ye)&&ye.sender.userId===ie.config.userId;return v.createElement(rc,{message:ye,key:tW(ye),isByMe:Je},d({handleScroll:me,message:ye,hasSeparator:We,chainTop:Ye,chainBottom:De,renderMessageContent:f,renderSuggestedReplies:m,renderCustomSeparator:p}))},typingIndicator:!L()&&((t=(n=ie==null?void 0:ie.config)===null||n===void 0?void 0:n.groupChannel)===null||t===void 0?void 0:t.enableTypingIndicator)&&((a=(i=(r=ie==null?void 0:ie.config)===null||r===void 0?void 0:r.groupChannel)===null||i===void 0?void 0:i.typingIndicatorTypes)===null||a===void 0?void 0:a.has(wf.Bubble))&&v.createElement(NZ,{channelUrl:O,handleScroll:me})}),v.createElement(v.Fragment,null,Be.frozenNotification()),v.createElement(v.Fragment,null,Be.unreadMessagesNotification()),v.createElement(v.Fragment,null,Be.scrollToBottomButton())))},NZ=function(e){var n=yt().state.stores,t=ao().state,r=t.isScrollBottomReached,i=t.scrollPubSub,a=M.useState([]),s=a[0],o=a[1];return jp(n.sdkStore.sdk,{onTypingStatusUpdated:function(l){l.url===e.channelUrl&&o(l.getTypingUsers()),r&&h3()&&setTimeout(function(){i.publish("scrollToBottom",{})},10)}}),v.createElement(SL,{typingMembers:s,handleScroll:e.handleScroll})},IZ=function(e){return v.createElement(SC,D({},e))},Mm="sendbird-quote_message_input__avatar";function AZ(e){var n,t=e.message;if(!Di(t)&&!Oi(t)||ja(t))return v.createElement(v.Fragment,null);var r=W3(t);return r||(r3(t)||Ys(t)?r=Td(t):Oi(t)&&pK((n=t.fileInfoList)===null||n===void 0?void 0:n[0])&&(r=t.fileInfoList[0].url)),Ys(t)&&r?v.createElement("div",{className:Mm},v.createElement("video",{style:{width:"44px",height:"44px"},src:r})):(io(t)||Oi(t))&&r?v.createElement(yr,{className:Mm,url:r,alt:Tp(t),width:"44px",height:"44px",fixedSize:!0}):mK(t)?v.createElement("div",{className:Mm},v.createElement(qe,{type:Se.FILE_AUDIO,fillColor:ze.ON_BACKGROUND_2,width:"24px",height:"24px"})):v.createElement("div",{className:Mm},v.createElement(qe,{type:Se.FILE_DOCUMENT,fillColor:ze.ON_BACKGROUND_2,width:"24px",height:"24px"}))}function wZ(e){var n=e.className,t=e.replyingMessage,r=e.onClose,i=M.useContext(On).stringSet,a=t,s=t==null?void 0:t.sender,o=(Di(t)||Oi(t))&&!ja(t);return v.createElement("div",{className:ai(["sendbird-quote_message_input",n??""])},o&&v.createElement(AZ,{message:a}),v.createElement("div",{className:"sendbird-quote_message_input__body",style:{width:"calc(100% - ".concat(o?"164px":"120px",")"),left:o?"92px":"40px"}},v.createElement(Me,{className:"sendbird-quote_message_input__body__sender-name",type:be.CAPTION_1,color:de.ONBACKGROUND_1},"".concat(i.QUOTE_MESSAGE_INPUT__REPLY_TO," ").concat(s&&s.nickname?s.nickname:i.NO_NAME)),v.createElement(Me,{className:"sendbird-quote_message_input__body__message-content",type:be.BODY_2,color:de.ONBACKGROUND_3},r3(a)&&!yp(a)&&i.QUOTE_MESSAGE_INPUT__FILE_TYPE_IMAGE,Ys(a)&&i.QUOTE_MESSAGE_INPUT__FILE_TYPE__VIDEO,yp(a)&&i.QUOTE_MESSAGE_INPUT__FILE_TYPE_GIF,Vi(t)&&t.message,If(t)===js.FILE&&gC(a),Oi(t)&&"".concat(a.fileInfoList.length," Photos"),ja(t)&&i.VOICE_MESSAGE)),v.createElement(qe,{className:"sendbird-quote_message_input__close-button",type:Se.CLOSE,fillColor:ze.ON_BACKGROUND_2,width:"24px",height:"24px",onClick:function(){return r==null?void 0:r(t)}}))}var Pu={PREPARING:"PREPARING",READY_TO_RECORD:"READY_TO_RECORD",RECORDING:"RECORDING",COMPLETED:"COMPLETED"},RZ=function(e){var n=e.onRecordingStarted,t=n===void 0?_n:n,r=e.onRecordingEnded,i=r===void 0?_n:r,a=yt().state,s=a.config,o=s.voiceRecord,l=o==null?void 0:o.maxRecordingTime,u=xO(),d=u.isRecordable,f=M.useState(null),m=f[0],p=f[1],E=M.useState(Pu.PREPARING),_=E[0],b=E[1];M.useEffect(function(){d&&_===Pu.PREPARING&&b(Pu.READY_TO_RECORD)},[d]);var C=M.useCallback(function(){u==null||u.start({onRecordingStarted:function(){b(Pu.RECORDING),t(),P()},onRecordingEnded:function(B){b(Pu.COMPLETED),i(B),p(B),U()}})},[t,i]),y=M.useCallback(function(){u==null||u.stop(),U()},[u]),T=M.useCallback(function(){y(),p(null)},[u]),N=M.useState(0),w=N[0],O=N[1],L=M.useRef(null);function P(){U(),O(0),L.current=setInterval(function(){O(function(B){var F=B+100;return F>l&&U(),F})},100)}function U(){L.current&&(clearInterval(L.current),L.current=null)}return M.useEffect(function(){w>l&&y()},[w,l,y]),{start:C,stop:y,cancel:T,recordingStatus:_,recordingTime:w,recordedFile:m,recordingLimit:l}},Pr={READY_TO_RECORD:"READY_TO_RECORD",RECORDING:"RECORDING",READY_TO_PLAY:"READY_TO_PLAY",PLAYING:"PLAYING"},OZ=function(e){var n=e.inputState;switch(n){case Pr.READY_TO_RECORD:return v.createElement("div",{className:"sendbird-controler-icon record-icon"});case Pr.RECORDING:return v.createElement("div",{className:"sendbird-controler-icon stop-icon"});case Pr.READY_TO_PLAY:return v.createElement(qe,{className:"sendbird-controler-icon play-icon",width:"20px",height:"20px",type:Se.PLAY,fillColor:ze.ON_BACKGROUND_1});case Pr.PLAYING:return v.createElement("div",{className:"sendbird-controler-icon pause-icon"},v.createElement("div",{className:"sendbird-controler-icon pause-icon-inner"}),v.createElement("div",{className:"sendbird-controler-icon pause-icon-inner"}));default:return v.createElement(v.Fragment,null)}},LZ=function(e){var n=e.minRecordTime,t=n===void 0?Fb:n,r=e.maximumValue,i=e.currentValue,a=i===void 0?0:i,s=e.currentType,o=e.onCancelClick,l=e.onControlClick,u=e.onSubmitClick,d=e.renderCancelButton,f=e.renderControlButton,m=e.renderSubmitButton,p=M.useState(0),E=p[0],_=p[1],b=M.useMemo(function(){return s===Pr.READY_TO_RECORD},[s]),C=M.useMemo(function(){return s===Pr.RECORDING},[s]),y=M.useMemo(function(){return s===Pr.READY_TO_RECORD||s===Pr.RECORDING?t>a:!1},[s,t,a]),T=M.useMemo(function(){return s===Pr.READY_TO_PLAY||s===Pr.PLAYING},[s]),N=Ut().stringSet,w=function(){var P=Date.now();P-E>S_&&(o==null||o(),_(P))},O=function(){var P=Date.now();P-E>S_&&(l==null||l(s),_(P))},L=function(){var P=Date.now();P-E>S_&&(y||u==null||u(),_(P))};return v.createElement("div",{className:"sendbird-voice-message-input"},v.createElement("div",{className:"sendbird-voice-message-input__indicator"},v.createElement("div",{className:"sendbird-voice-message-input__indicator__progress-bar"},v.createElement(X3,{className:"sendbird-voice-message-input__indicator__progress-bar__bar",disabled:b,maxSize:r,currentSize:a})),C?v.createElement("div",{className:"sendbird-voice-message-input__indicator__on-rec"}):null,v.createElement(J3,{className:"sendbird-voice-message-input__indicator__playback-time",time:T?r-a:a,labelColor:b?de.ONBACKGROUND_4:de.ONCONTENT_1})),v.createElement("div",{className:"sendbird-voice-message-input__controler"},(d==null?void 0:d())||v.createElement(so,{className:"sendbird-voice-message-input__controler__cancel",onClick:w,disableUnderline:!0},v.createElement(Me,{type:be.BUTTON_1,color:de.PRIMARY},N.BUTTON__CANCEL)),(f==null?void 0:f(s))||v.createElement("div",{className:"sendbird-voice-message-input__controler__main",onClick:O},v.createElement(OZ,{inputState:s})),(m==null?void 0:m())||v.createElement("div",{className:zt("sendbird-voice-message-input__controler__submit",y&&"voice-message--disabled"),onClick:L},v.createElement(qe,{width:"19px",height:"19px",type:Se.SEND,fillColor:y?ze.ON_BACKGROUND_4:ze.CONTENT}))))},UZ=function(e){var n=e.imageFile,t=e.compressionRate,r=e.resizingWidth,i=e.resizingHeight,a=e.outputFormat,s=document.createElement("img");return new Promise(function(o,l){s.src=URL.createObjectURL(n),s.onerror=l,s.onload=function(){URL.revokeObjectURL(s.src);var u=document.createElement("canvas"),d=s.width,f=s.height,m=!r||r>d?d:r,p=!i||i>f?f:i,E=d/m,_=f/p;E>_?p=f/(r?E:1):_>E&&(m=d/(i?_:1)),u.width=m,u.height=p;var b=u.getContext("2d");if(!b){l(new Error("Failed to get canvas 2d context"));return}b.drawImage(s,0,0,m,p);var C=a==="preserve"?n.type:"image/".concat(a),y=C.split("/").pop(),T=n.name.lastIndexOf("."),N="".concat(T===-1?n.name:n.name.substring(0,T),".").concat(y);b.canvas.toBlob(function(w){if(w){var O=new File([w],N,{type:C});o(O)}else l(new Error("Failed to compress image"))},C,t)}})},AL=function(e){return tn(void 0,[e],void 0,function(n){var t,r,i,a,s,o,l=n.files,u=n.logger,d=n.imageCompression;return nn(this,function(f){switch(f.label){case 0:return t=d.compressionRate,r=d.outputFormat,i=r===void 0?"preserve":r,a=d.resizingWidth?Sd(d.resizingWidth):void 0,s=d.resizingHeight?Sd(d.resizingHeight):void 0,o={failedIndexes:[],compressedFiles:[]},Array.isArray(l)&&l.length>0?!t||t<0||1<t?(u==null||u.warning("utils - compressImages: The compressionRate is not acceptable.",t),[2,o]):[4,Promise.all(l.map(function(m,p){return tn(void 0,void 0,void 0,function(){var E,_;return nn(this,function(b){switch(b.label){case 0:if(!(m.type==="image/jpg"||m.type==="image/png"||m.type==="image/jpeg"))return u==null||u.warning("utils - compressImages: The fileType is not compressible.",{file:m,index:p}),o.failedIndexes.push(p),o.compressedFiles.push(m),[2];b.label=1;case 1:return b.trys.push([1,3,,4]),[4,UZ({imageFile:m,compressionRate:t,resizingWidth:a,resizingHeight:s,outputFormat:i})];case 2:return E=b.sent(),o.compressedFiles.push(E),[3,4];case 3:return _=b.sent(),o.compressedFiles.push(m),o.failedIndexes.push(p),u==null||u.warning("utils - compressImages: Failed to compress image file",{file:m,err:_}),[3,4];case 4:return[2]}})})}))]:(u==null||u.warning("utils - compressImages: There are no files.",l),[2,o]);case 1:return f.sent(),u==null||u.info("utils - compressImages: Finished compressing images",o),[2,o]}})})},wL=function(e){var n=e.channel,t=e.onCancelClick,r=e.onSubmitClick,i=M.useRef(qr()).current,a=M.useState(null),s=a[0],o=a[1],l=M.useState(Pr.READY_TO_RECORD),u=l[0],d=l[1],f=M.useState(!1),m=f[0],p=f[1],E=M.useState(!1),_=E[0],b=E[1],C=M.useState(!1),y=C[0],T=C[1],N=Ut().stringSet,w=yt().state,O=w.config,L=RZ({onRecordingStarted:function(){d(Pr.RECORDING)},onRecordingEnded:function(J){o(J)}}),P=L.start,U=L.stop,B=L.cancel,F=L.recordingTime,H=L.recordingStatus,G=L.recordingLimit,j=Z3({channelUrl:n==null?void 0:n.url,key:i,audioFile:s??void 0}),x=j.play,V=j.pause,K=j.playbackTime,W=j.playingStatus,Q=j.stop;return M.useEffect(function(){Af(n)||Cd(n)?b(!0):b(!1)},[n==null?void 0:n.myRole,n==null?void 0:n.isFrozen,n==null?void 0:n.myMutedState]),M.useEffect(function(){m&&s&&(r==null||r(s,F),p(!1),o(null))},[m,s,F]),M.useEffect(function(){s&&(F<O.voiceRecord.minRecordingTime?(d(Pr.READY_TO_RECORD),o(null)):W===As.PLAYING?d(Pr.PLAYING):d(Pr.READY_TO_PLAY))},[s,F,W]),v.createElement("div",{className:"sendbird-voice-message-input-wrapper"},v.createElement(LZ,{currentValue:H===Pu.COMPLETED?K:F,maximumValue:H===Pu.COMPLETED?F:G,currentType:u,onCancelClick:function(){t==null||t(),B(),Q()},onSubmitClick:function(){_?(T(!0),d(Pr.READY_TO_RECORD)):(U(),V(),p(!0))},onControlClick:function(J){switch(J){case Pr.READY_TO_RECORD:{Q(),P();break}case Pr.RECORDING:{F>=O.voiceRecord.minRecordingTime&&!_?U():_?(B(),T(!0),d(Pr.READY_TO_RECORD)):(B(),d(Pr.READY_TO_RECORD));break}case Pr.READY_TO_PLAY:{x();break}case Pr.PLAYING:{V();break}}}}),y&&v.createElement(wr,{className:"sendbird-voice-message-input-wrapper-alert",titleText:Cd(n)?N.MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_MUTED:N.MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_FROZEN,hideFooter:!0,isCloseOnClickOutside:!0,onClose:function(){T(!1),t==null||t()}},v.createElement("div",{className:"sendbird-voice-message-input-wrapper-alert__body"},v.createElement(Ri,{className:"sendbird-voice-message-input-wrapper-alert__body__ok-button",type:Vn.PRIMARY,size:_a.BIG,onClick:function(){T(!1),t==null||t()}},N.BUTTON__OK))))},DZ=function(e,n){var t=e.sendFileMessage,r=e.sendMultipleFilesMessage,i=e.quoteMessage,a=n.logger,s=Ut().stringSet,o=yt().state,l=o.config,u=l.imageCompression,d=l==null?void 0:l.uikitUploadSizeLimit,f=l==null?void 0:l.uikitMultipleFilesMessageLimit,m=Wb().openModal;return M.useCallback(function(p){return tn(void 0,void 0,void 0,function(){var E,_,b,C,y,T;return nn(this,function(N){switch(N.label){case 0:return p.length===0?(a.warning("Channel|useHandleUploadFiles: given file list is empty.",{files:p}),[2]):p.length>f?(a.info("Channel|useHandleUploadFiles: Cannot upload files more than ".concat(f)),m({modalProps:{titleText:s.FILE_UPLOAD_NOTIFICATION__COUNT_LIMIT.replace("%d","".concat(d)),hideFooter:!0},childElement:function(w){var O=w.closeModal;return v.createElement(Ed,{type:Vn.PRIMARY,submitText:s.BUTTON__OK,hideCancelButton:!0,onCancel:O,onSubmit:O})}}),[2]):p.some(function(w){return w.size>d})?(a.info("Channel|useHandleUploadFiles: Cannot upload file size exceeding ".concat(d)),E=1024*1024,m({modalProps:{titleText:s.FILE_UPLOAD_NOTIFICATION__SIZE_LIMIT.replace("%d","".concat(Math.floor(d/E))),hideFooter:!0},childElement:function(w){var O=w.closeModal;return v.createElement(Ed,{type:Vn.PRIMARY,submitText:s.BUTTON__OK,hideCancelButton:!0,onCancel:O,onSubmit:O})}}),[2]):[4,AL({files:p,imageCompression:u,logger:a})];case 1:return _=N.sent().compressedFiles,b=_,b.length===1?(a.info("Channel|useHandleUploadFiles: sending one file."),C=b[0],[2,t({file:C,parentMessageId:i==null?void 0:i.messageId})]):b.length>1?(a.info("Channel|useHandleUploadFiles: sending multiple files."),y=[],T=[],b.forEach(function(w){Ds(w.type)?y.push(w):T.push(w)}),[2,T.reduce(function(w,O){return w.then(function(){return t({file:O,parentMessageId:i==null?void 0:i.messageId})})},function(){return y.length===0?Promise.resolve():y.length===1?t({file:y[0]}):r({fileInfoList:y.map(function(w){return{file:w,fileName:w.name,fileSize:w.size,mimeType:w.type}}),parentMessageId:i==null?void 0:i.messageId})}())]):[2]}})})},[t,r,i])},RL=v.forwardRef(function(e,n){var t,r=e.currentChannel,i=e.messages,a=e.loading,s=e.quoteMessage,o=e.setQuoteMessage,l=e.messageInputRef,u=e.sendUserMessage,d=e.sendFileMessage,f=e.sendVoiceMessage,m=e.sendMultipleFilesMessage,p=e.renderUserMentionItem,E=e.renderFileUploadIcon,_=e.renderVoiceMessageIcon,b=e.renderSendMessageIcon,C=e.acceptableMimeTypes,y=e.disabled,T=Ut().stringSet,N=pr().isMobile,w=yt().state,O=w.stores,L=w.config,P=L.isOnline,U=L.userMention,B=L.logger,F=L.groupChannel,H=O.sdkStore.sdk,G=U.maxMentionCount,j=U.maxSuggestionCount,x=r==null?void 0:r.isBroadcast,V=(r==null?void 0:r.myRole)==="operator",K=(t=e.isMultipleFilesMessageEnabled)!==null&&t!==void 0?t:L.isMultipleFilesMessageEnabled,W=F.enableMention,Q=F.enableVoiceMessage,J=M.useState(""),$=J[0],te=J[1],re=M.useState([]),ve=re[0],ie=re[1],le=M.useState([]),Ae=le[0],oe=le[1],he=M.useState(null),me=he[0],Be=he[1],pe=M.useState([]),ye=pe[0],Ee=pe[1],Ue=M.useState(null),Ye=Ue[0],De=Ue[1],We=M.useState(!1),Je=We[0],Le=We[1],He=a||!r||!H||!H.isCacheEnabled&&!P||Af(r)||Cd(r)||mA(r,L.groupChannel.enableSuggestedReplies)||pA(i,L.groupChannel.enableFormTypeMessage)||y,At=!He&&W&&$.length>0&&!x,Ve=jf({ref:n||l},{logger:B}),st=(Ve==null?void 0:Ve.length)<G;M.useEffect(function(){te(""),ie([]),oe([]),Be(null),Ee([]),De(null),Le(!1)},[r==null?void 0:r.url]),M.useEffect(function(){ie(ve.filter(function(et){var St=et.userId,Rt=Ae.indexOf(St);return Rt<0?!1:(Ae.splice(Rt,1),!0)}))},[Ae]);var mt=DZ({sendFileMessage:d,sendMultipleFilesMessage:m,quoteMessage:s??void 0},{logger:B});return x&&!V?null:v.createElement("div",{className:Je?"sendbird-message-input-wrapper--voice-message":"sendbird-message-input-wrapper"},At&&v.createElement(IZ,{currentChannel:r,targetNickname:$,inputEvent:Ye??void 0,renderUserMentionItem:p,onUserItemClick:function(et){et&&ie(Ne(Ne([],ve,!0),[et],!1)),te(""),Be(et),De(null)},onFocusItemChange:function(){De(null)},onFetchUsers:function(et){Ee(et)},ableAddMention:st,maxMentionCount:G,maxSuggestionCount:j}),s&&v.createElement("div",{className:"sendbird-message-input-wrapper__quote-message-input"},v.createElement(wZ,{replyingMessage:s,onClose:function(){return o(null)}})),Je?v.createElement(wL,{channel:r??void 0,onSubmitClick:function(et,St){f({file:et,parentMessageId:s==null?void 0:s.messageId},St),o(null),Le(!1)},onCancelClick:function(){Le(!1)}}):v.createElement(gc,{className:"sendbird-message-input-wrapper__message-input",channel:r,channelUrl:r==null?void 0:r.url,isMobile:N,acceptableMimeTypes:C,mentionSelectedUser:me,isMentionEnabled:W,isVoiceMessageEnabled:Q,isSelectingMultipleFilesEnabled:K,onVoiceMessageIconClick:function(){Le(!0)},setMentionedUsers:ie,placeholder:s&&T.MESSAGE_INPUT__QUOTE_REPLY__PLACE_HOLDER||Af(r)&&T.MESSAGE_INPUT__PLACE_HOLDER__FROZEN||Cd(r)&&(N?T.MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT:T.MESSAGE_INPUT__PLACE_HOLDER__MUTED)||mA(r,L.groupChannel.enableSuggestedReplies)&&T.MESSAGE_INPUT__PLACE_HOLDER__SUGGESTED_REPLIES||pA(i,L.groupChannel.enableFormTypeMessage)&&T.MESSAGE_INPUT__PLACE_HOLDER__MESSAGE_FORM||y&&T.MESSAGE_INPUT__PLACE_HOLDER__DISABLED||void 0,ref:n||l,disabled:He,renderFileUploadIcon:E,renderSendMessageIcon:b,renderVoiceMessageIcon:_,onStartTyping:function(){r==null||r.startTyping()},onSendMessage:function(et){var St,Rt=et.message,xe=et.mentionTemplate;u({message:Rt,mentionedUsers:ve,mentionedMessageTemplate:xe,parentMessageId:s==null?void 0:s.messageId}),te(""),ie([]),o(null),(St=r==null?void 0:r.endTyping)===null||St===void 0||St.call(r)},onFileUpload:function(et){mt(et),o(null)},onUserMentioned:function(et){(me==null?void 0:me.userId)===(et==null?void 0:et.userId)&&(Be(null),te(""))},onMentionStringChange:function(et){te(et)},onMentionedUserIdsUpdated:function(et){oe(et)},onKeyDown:function(et){return At&&(ye==null?void 0:ye.length)>0&&(et.key===ei.Enter&&st||et.key===ei.ArrowUp||et.key===ei.ArrowDown)?(De(et),!0):!1}}))}),kZ=function(e){var n=ao(),t=n.state,r=n.actions;return v.createElement(RL,D({},e,t,r))},PZ=function(e){var n=p3(),t=ao().state,r=t.channelUrl,i=t.fetchChannelError,a=sa(e),s=a.renderChannelHeader,o=s===void 0?function(m){return v.createElement(SW,D({},m))}:s,l=a.renderMessageList,u=l===void 0?function(m){return v.createElement(MZ,D({},m,{className:"sendbird-conversation__message-list"}))}:l,d=a.renderMessageInput,f=d===void 0?function(){return v.createElement(kZ,D({},e))}:d;return v.createElement(_3,D({},e,n,{isInvalid:i!==null,channelUrl:r,renderChannelHeader:o,renderMessageList:u,renderMessageInput:f}))},OL=function(e){return v.createElement(oW,D({},e),v.createElement(PZ,D({},e)))},l0=function(){var e=M.useContext(NC);if(!e)throw new Error("useGroupChannelList must be used within a GroupChannelListProvider");var n=M.useCallback(function(i){e.setState(function(a){return D(D({},a),{groupChannels:i})},!0)},[]),t=Ql.useSyncExternalStore(e.subscribe,e.getState),r=M.useMemo(function(){return{setGroupChannels:n}},[n]);return{state:t,actions:r}},NC=v.createContext(null),LL={className:"",selectedChannelUrl:"",disableAutoSelect:!1,allowProfileEdit:!1,isTypingIndicatorEnabled:!1,isMessageReceiptStatusEnabled:!1,onChannelSelect:function(){},onChannelCreated:function(){},onThemeChange:_n,onCreateChannelClick:_n,onBeforeCreateChannel:null,onUserProfileUpdated:_n,typingChannelUrls:[],refreshing:!1,initialized:!1,groupChannels:[],refresh:null,loadMore:null,scrollRef:{current:null}},xZ=function(){return dc(NC,function(e){return e},LL)},FZ=function(e){var n,t,r,i,a,s,o=e.className,l=o===void 0?"":o,u=e.selectedChannelUrl,d=u===void 0?"":u,f=e.disableAutoSelect,m=f===void 0?!1:f,p=e.channelListQueryParams,E=e.onThemeChange,_=e.onChannelSelect,b=e.onChannelCreated,C=e.onCreateChannelClick,y=e.onBeforeCreateChannel,T=e.onUserProfileUpdated,N=Rp(e,["className","selectedChannelUrl","disableAutoSelect","channelListQueryParams","onThemeChange","onChannelSelect","onChannelCreated","onCreateChannelClick","onBeforeCreateChannel","onUserProfileUpdated"]),w=yt().state,O=w.config,L=w.stores,P=l0(),U=P.state,B=P.actions,F=xZ().updateState,H=L.sdkStore,G=H.sdk,j=WO(G,O.logger),x=YO({isConnected:j},O),V=M.useRef(null),K=V5(G,{collectionCreator:zZ(G,p),markAsDelivered:function(he){return he.forEach(x.push)},onChannelsDeleted:function(he){he.forEach(function(me){me===d&&_(null)})},onChannelsUpdated:function(){B.setGroupChannels(J)}}),W=K.refreshing,Q=K.initialized,J=K.groupChannels,$=K.refresh,te=K.loadMore;M.useEffect(function(){var he;!m&&L.sdkStore.initialized&&Q&&(d||_((he=J[0])!==null&&he!==void 0?he:null))},[m,L.sdkStore.initialized,Q,d]),M.useEffect(function(){$==null||$()},[Object.keys(p??{}).sort().map(function(he){return"".concat(he,"=").concat(encodeURIComponent(JSON.stringify(p[he])))}).join("&")]);var re=U.typingChannelUrls;jp(G,{onTypingStatusUpdated:function(he){var me,Be=re.filter(function(pe){return pe!==he.url});((me=he.getTypingUsers())===null||me===void 0?void 0:me.length)>0?F({typingChannelUrls:Be.concat(he.url)}):F({typingChannelUrls:Be})}});var ve=(t=(n=N.allowProfileEdit)!==null&&n!==void 0?n:O.allowProfileEdit)!==null&&t!==void 0?t:!0,ie=(i=(r=N.isTypingIndicatorEnabled)!==null&&r!==void 0?r:O.groupChannelList.enableTypingIndicator)!==null&&i!==void 0?i:!1,le=(s=(a=N.isMessageReceiptStatusEnabled)!==null&&a!==void 0?a:O.groupChannelList.enableMessageReceiptStatus)!==null&&s!==void 0?s:!1,Ae=M.useMemo(function(){return{onChannelSelect:_,onChannelCreated:b,onThemeChange:E,onCreateChannelClick:C,onBeforeCreateChannel:y,onUserProfileUpdated:T}},[_,b,E,C,y,T]),oe=M.useMemo(function(){return{className:l,selectedChannelUrl:d,disableAutoSelect:m,allowProfileEdit:ve,isTypingIndicatorEnabled:ie,isMessageReceiptStatusEnabled:le,typingChannelUrls:re,refreshing:W,initialized:Q,refresh:$,loadMore:te}},[l,d,m,ve,ie,le,re,W,Q,V]);return e0(function(){F(D(D(D({},Ae),oe),{groupChannels:J}))},[oe,Ae,J.map(function(he){return he.serialize()})]),null},BZ=function(e){return cc(D(D({},LL),e))},HZ=function(e){var n=e.children,t=sa({onChannelSelect:e==null?void 0:e.onChannelSelect,onChannelCreated:e==null?void 0:e.onChannelCreated,className:e==null?void 0:e.className,selectedChannelUrl:e==null?void 0:e.selectedChannelUrl,allowProfileEdit:e==null?void 0:e.allowProfileEdit,disableAutoSelect:e==null?void 0:e.disableAutoSelect,isTypingIndicatorEnabled:e==null?void 0:e.isTypingIndicatorEnabled,isMessageReceiptStatusEnabled:e==null?void 0:e.isMessageReceiptStatusEnabled,channelListQueryParams:e==null?void 0:e.channelListQueryParams,onThemeChange:e==null?void 0:e.onThemeChange,onCreateChannelClick:e==null?void 0:e.onCreateChannelClick,onBeforeCreateChannel:e==null?void 0:e.onBeforeCreateChannel,onUserProfileUpdated:e==null?void 0:e.onUserProfileUpdated}),r=M.useRef(BZ(t));return v.createElement(NC.Provider,{value:r.current},n)},GZ=function(e){var n=e.children,t=e.className;return v.createElement(HZ,D({},e),v.createElement(FZ,D({},e)),v.createElement(xd,D({},e),v.createElement("div",{className:"sendbird-channel-list ".concat(t)},n)))};function zZ(e,n){return function(t){var r=D(D({},t),n);return e.groupChannel.createGroupChannelCollection(D(D({},r),{filter:new zp(r)}))}}var jZ=function(e){var n=e.renderTitle,t=e.renderIconButton,r=e.onEdit,i=e.allowProfileEdit,a=e.renderLeft,s=e.renderMiddle,o=e.renderRight,l=yt().state.stores.userStore.user,u=Ut().stringSet,d=s??n;return v.createElement(hi,{className:zt("sendbird-channel-header",i&&"sendbird-channel-header--allow-edit"),renderLeft:a,renderMiddle:function(){var f;return(f=d==null?void 0:d())!==null&&f!==void 0?f:v.createElement("div",{className:"sendbird-channel-header__title",role:"button",onClick:function(){r==null||r()},onKeyDown:function(){r==null||r()},tabIndex:0},v.createElement("div",{className:"sendbird-channel-header__title__left"},v.createElement(Fr,{width:"32px",height:"32px",src:l.profileUrl,alt:l.nickname})),v.createElement("div",{className:"sendbird-channel-header__title__right"},v.createElement(Me,{className:"sendbird-channel-header__title__right__name",type:be.SUBTITLE_2,color:de.ONBACKGROUND_1},l.nickname||u.NO_NAME),v.createElement(Me,{className:"sendbird-channel-header__title__right__user-id",type:be.BODY_2,color:de.ONBACKGROUND_2},l.userId)))},renderRight:o??t})},UL=v.createContext(null),VZ=function(e){var n=e.children,t=Rp(e,["children"]);return v.createElement(UL.Provider,{value:t},n)},$Z=function(){var e=v.useContext(UL);if(!e)throw new Error("EditUserProfileContext not found. Use within the EditUserProfile module.");return e},qZ=function(e){var n,t=e.formRef,r=e.inputRef,i=e.onThemeChange,a=e.setProfileImage,s=yt().state,o=s.stores,l=s.config,u=l.theme,d=l.setCurrentTheme,f=(n=o.userStore)===null||n===void 0?void 0:n.user,m=Ut().stringSet,p=M.useState(null),E=p[0],_=p[1],b=M.useRef(null);return v.createElement("form",{className:"sendbird-edit-user-profile",ref:t,onSubmit:function(C){C.preventDefault()}},v.createElement("section",{className:"sendbird-edit-user-profile__img"},v.createElement(od,null,m.EDIT_PROFILE__IMAGE_LABEL),v.createElement("div",{className:"sendbird-edit-user-profile__img__avatar"},v.createElement(Fr,{width:"80px",height:"80px",src:E||(f==null?void 0:f.profileUrl)})),v.createElement("input",{ref:b,type:"file",accept:"image/gif, image/jpeg, image/png",style:{display:"none"},onChange:function(C){C.target.files&&(_(URL.createObjectURL(C.target.files[0])),a(C.target.files[0])),b.current&&(b.current.value="")}}),v.createElement(so,{className:"sendbird-edit-user-profile__img__avatar-button",disableUnderline:!0,onClick:function(){var C;return(C=b.current)===null||C===void 0?void 0:C.click()}},v.createElement(Me,{type:be.BUTTON_1,color:de.PRIMARY},m.EDIT_PROFILE__IMAGE_UPLOAD))),v.createElement("section",{className:"sendbird-edit-user-profile__name"},v.createElement(od,null,m.EDIT_PROFILE__NICKNAME_LABEL),v.createElement(Ip,{required:(f==null?void 0:f.nickname)!=="",name:"sendbird-edit-user-profile__name__input",ref:r,value:f==null?void 0:f.nickname,placeHolder:m.EDIT_PROFILE__NICKNAME_PLACEHOLDER})),v.createElement("section",{className:"sendbird-edit-user-profile__userid"},v.createElement(od,null,m.EDIT_PROFILE__USERID_LABEL),v.createElement(Ip,{disabled:!0,name:"sendbird-edit-user-profile__userid__input",value:f==null?void 0:f.userId})),v.createElement("section",{className:"sendbird-edit-user-profile__theme"},v.createElement(od,null,m.EDIT_PROFILE__THEME_LABEL),v.createElement("div",{className:"sendbird-edit-user-profile__theme__theme-icon"},u==="dark"?v.createElement(qe,{onClick:function(){d("light"),i==null||i("light")},type:Se.TOGGLE_ON,width:44,height:24}):v.createElement(qe,{onClick:function(){d("dark"),i==null||i("dark")},type:Se.TOGGLE_OFF,width:44,height:24}))))},KZ=function(e){var n,t,r,i=e.globalContext,a=e.formRef,s=e.inputRef,o=e.profileImage,l=e.onEditProfile,u=e.updateUserInfo,d=i.stores,f=d.sdkStore.sdk,m=d.userStore.user;if((m==null?void 0:m.nickname)!==""&&!s.current.value){(t=(n=a.current).reportValidity)===null||t===void 0||t.call(n);return}f==null||f.updateCurrentUserInfo({nickname:(r=s==null?void 0:s.current)===null||r===void 0?void 0:r.value,profileImage:o??void 0}).then(function(p){u(p),l==null||l(p)})},WZ=function(e){var n=e.onEditProfile,t=yt(),r=t.state,i=t.actions,a=M.useRef(null),s=M.useRef(null),o=M.useState(null),l=o[0],u=o[1],d=function(){KZ({globalContext:r,formRef:s,inputRef:a,profileImage:l,onEditProfile:n,updateUserInfo:i.updateUserInfo})};return{formRef:s,inputRef:a,updateUserInfo:d,profileImage:l,setProfileImage:u}},QZ=function(){var e=$Z(),n=e.onEditProfile,t=e.onCancel,r=e.onThemeChange,i=M.useContext(On).stringSet,a=WZ({onEditProfile:n}),s=a.formRef,o=a.inputRef,l=a.updateUserInfo,u=a.setProfileImage;return v.createElement(wr,{titleText:i.EDIT_PROFILE__TITLE,submitText:i.BUTTON__SAVE,type:Vn.PRIMARY,onCancel:t,isFullScreenOnMobile:!0,onSubmit:l},v.createElement(qZ,{formRef:s,inputRef:o,setProfileImage:u,onThemeChange:r}))},YZ=function(e){var n=e.onEditProfile,t=e.onCancel,r=e.onThemeChange;return v.createElement(VZ,{onEditProfile:n,onCancel:t,onThemeChange:r},v.createElement(QZ,null))};function IC(e,n,t){t===void 0&&(t={leading:!0,trailing:!1});var r=M.useRef(null),i=M.useRef(null);return M.useEffect(function(){return function(){r.current&&clearTimeout(r.current)}},[]),mr(function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(r.current){i.current=a;return}t.leading?e.apply(void 0,a):i.current=a;var o=function(){t.trailing&&i.current?(e.apply(void 0,i.current),i.current=null,r.current=setTimeout(o,n)):r.current=null};r.current=setTimeout(o,n)})}var XZ=100;function Zl(e){var n=e.onReachedTop,t=e.onReachedBottom,r=e.onInBetween,i=mr(function(a){if(a!=null&&a.target){var s=a.target,o=s.scrollTop,l=s.scrollHeight,u=s.clientHeight,d={distanceFromBottom:l-o-u};n&&Fo(o,0,ws)?n(d):t&&Fo(l,u+o,ws)?t(d):r&&r(d)}});return IC(i,XZ,{trailing:!0})}var ZZ=function(e){var n=e.channel,t=e.onSubmit,r=e.onCancel,i=yt().state.config,a=i.logger,s=i.isOnline,o=Ut().stringSet;if(n)return v.createElement(wr,{disabled:!s,onCancel:r,onSubmit:function(){a.info("LeaveGroupChannel: Leaving channel",n),n.leave().then(function(){a.info("LeaveGroupChannel: Leaving channel successful!",n),t==null||t()})},submitText:o.MODAL__LEAVE_CHANNEL__FOOTER,titleText:o.MODAL__LEAVE_CHANNEL__TITLE})};function DL(e){var n=e.channel,t=e.disabled,r=t===void 0?!1:t,i=e.onLeaveChannel,a=M.useRef(null),s=M.useRef(null),o=M.useState(!1),l=o[0],u=o[1],d=M.useContext(On).stringSet;return v.createElement("div",{ref:s,tabIndex:0,role:"button",style:{display:"inline-block"},onKeyDown:function(f){return f.stopPropagation()},onClick:function(f){return f.stopPropagation()}},v.createElement($i,{menuTrigger:function(f){return v.createElement(ga,{ref:a,onClick:f,height:"32px",width:"32px"},v.createElement(qe,{type:Se.MORE,fillColor:ze.PRIMARY,width:"24px",height:"24px"}))},menuItems:function(f){return v.createElement(Li,{parentRef:a,parentContainRef:s,closeDropdown:f},v.createElement(vi,{onClick:function(){r||(u(!0),f())},testID:"channel_list_item_context_menu_leave_channel"},d.CHANNEL_SETTING__LEAVE_CHANNEL__TITLE))}}),l&&v.createElement(ZZ,{channel:n,onSubmit:function(){u(!1),i==null||i()},onCancel:function(){return u(!1)}}))}function ob(e){var n=e.count,t=e.maxLevel,r=t===void 0?2:t,i=e.className,a=i===void 0?"":i,s=M.useContext(On).stringSet,o=parseInt("9".repeat(r>6?6:r),10);return v.createElement("div",{className:Ne(Ne([],Array.isArray(a)?a:[a],!0),["sendbird-badge"],!1).join(" ")},v.createElement("div",{className:"sendbird-badge__text"},v.createElement(Me,{type:be.CAPTION_2,color:de.ONCONTENT_1},typeof n=="string"?n:n>o?"".concat(o).concat(s.BADGE__OVER):n)))}function JZ(e){var n=e.className,t=n===void 0?"":n,r=e.children,i=e.isReverse,a=i===void 0?!1:i,s=e.color,o=e.userId;return v.createElement("span",{className:zt(D3,t,a&&"reverse",s),contentEditable:!1,"data-userid":o,"data-sb-mention":!0},r)}var kL=function(e){var n=e.channel,t=e.tabIndex,r=e.isTyping,i=e.isSelected,a=e.channelName,s=e.isMessageStatusEnabled,o=s===void 0?!0:s,l=e.onClick,u=l===void 0?_n:l,d=e.onLeaveChannel,f=d===void 0?function(){return Promise.resolve()}:d,m=e.renderChannelAction,p=yt().state.config,E=p.theme,_=p.userId,b=Ut(),C=b.dateLocale,y=b.stringSet,T=pr().isMobile,N=p.groupChannel.enableMention,w=HQ(n,y),O=p.groupChannel.enableMarkdownForUserMessage?OQ(w):w,L=M.useState(!1),P=L[0],U=L[1],B=cs({onLongPress:function(){T&&U(!0)},onClick:u},{delay:1e3});return v.createElement(v.Fragment,null,v.createElement("div",D({className:["sendbird-channel-preview",i?"sendbird-channel-preview--active":""].join(" "),role:"link",tabIndex:t},T?D({},B):{onClick:u}),v.createElement("div",{className:"sendbird-channel-preview__avatar"},v.createElement(t0,{channel:n,userId:_,theme:E})),v.createElement("div",{className:"sendbird-channel-preview__content"},v.createElement("div",{className:"sendbird-channel-preview__content__upper"},v.createElement("div",{className:"sendbird-channel-preview__content__upper__header"},(n.isBroadcast||!1)&&v.createElement("div",{className:"sendbird-channel-preview__content__upper__header__broadcast-icon"},v.createElement(qe,{type:Se.BROADCAST,fillColor:ze.SECONDARY,height:"16px",width:"16px"})),v.createElement(Me,{className:"sendbird-channel-preview__content__upper__header__channel-name",testID:"sendbird-channel-preview__content__upper__header__channel-name",type:be.SUBTITLE_2,color:de.ONBACKGROUND_1},a),v.createElement(Me,{className:"sendbird-channel-preview__content__upper__header__total-members",type:be.CAPTION_2,color:de.ONBACKGROUND_2},FQ(n)),n.isFrozen&&v.createElement("div",{title:"Frozen",className:"sendbird-channel-preview__content__upper__header__frozen-icon"},v.createElement(qe,{type:Se.FREEZE,fillColor:ze.PRIMARY,height:12,width:12}))),!n.isEphemeral&&o&&v.createElement(hC,{className:"sendbird-channel-preview__content__upper__last-message-at",channel:n,message:n.lastMessage,isDateSeparatorConsidered:!1}),!n.isEphemeral&&!o&&v.createElement(Me,{className:"sendbird-channel-preview__content__upper__last-message-at",type:be.CAPTION_3,color:de.ONBACKGROUND_2},z3({channel:n,locale:C,stringSet:y}))),v.createElement("div",{className:"sendbird-channel-preview__content__lower"},v.createElement(Me,{className:"sendbird-channel-preview__content__lower__last-message",type:be.BODY_2,color:de.ONBACKGROUND_3},r&&v.createElement(g3,{members:n.getTypingUsers()}),!r&&!ja(n.lastMessage)&&O,!r&&ja(n.lastMessage)&&y.VOICE_MESSAGE),!i&&!n.isEphemeral&&v.createElement("div",{className:"sendbird-channel-preview__content__lower__unread-message-count"},N&&n.unreadMentionCount>0?v.createElement(JZ,{className:"sendbird-channel-preview__content__lower__unread-message-count__mention",color:"purple"},"@"):null,GA(n)?v.createElement(ob,{count:GA(n)}):null))),!T&&v.createElement("div",{className:"sendbird-channel-preview__action"},m({channel:n}))),P&&T&&v.createElement(wr,{className:"sendbird-channel-preview__leave--mobile",titleText:a,hideFooter:!0,isCloseOnClickOutside:!0,onCancel:function(){return U(!1)}},v.createElement(so,{onClick:function(){f(),U(!1)},className:"sendbird-channel-preview__leave-label--mobile"},v.createElement(Me,{type:be.SUBTITLE_1,color:de.ONBACKGROUND_1},y.CHANNEL_PREVIEW_MOBILE_LEAVE))))},eJ=function(e){var n,t,r,i=e.channel,a=e.isSelected,s=e.isTyping,o=e.renderChannelAction,l=e.onLeaveChannel,u=e.onClick,d=e.tabIndex,f=yt().state.config,m=Ut().stringSet,p=l0().state,E=p.isTypingIndicatorEnabled,_=p.isMessageReceiptStatusEnabled,b=f.userId,C=_&&!(!((n=i.lastMessage)===null||n===void 0)&&n.isAdminMessage())&&((r=(t=i.lastMessage)===null||t===void 0?void 0:t.sender)===null||r===void 0?void 0:r.userId)===b;return v.createElement(kL,{channel:i,tabIndex:d,channelName:G3(i,b,m),isTyping:E&&s,isSelected:a,isMessageStatusEnabled:C,onClick:u,onLeaveChannel:l,renderChannelAction:o})},u0=30,c0=15,AC="RESET_MESSAGES",d0="FETCH_INITIAL_MESSAGES_START",h0="FETCH_INITIAL_MESSAGES_SUCCESS",Uf="FETCH_INITIAL_MESSAGES_FAILURE",wC="FETCH_PREV_MESSAGES_SUCCESS",RC="FETCH_PREV_MESSAGES_FAILURE",OC="FETCH_NEXT_MESSAGES_SUCCESS",LC="FETCH_NEXT_MESSAGES_FAILURE",UC="SEND_MESSAGE_START",eo="SEND_MESSAGE_SUCCESS",Bo="SEND_MESSAGE_FAILURE",pf="RESEND_MESSAGE_START",DC="ON_MESSAGE_RECEIVED",qf="ON_MESSAGE_UPDATED",kC="ON_MESSAGE_THREAD_INFO_UPDATED",Kf="ON_MESSAGE_DELETED",PC="ON_MESSAGE_DELETED_BY_REQ_ID",Ra="SET_CURRENT_CHANNEL",xC="SET_CHANNEL_INVALID",PL="MARK_AS_READ",FC="ON_REACTION_UPDATED",BC="SET_EMOJI_CONTAINER",HC="MESSAGE_LIST_PARAMS_CHANGED",GC="ON_FILE_INFO_UPLOADED",zC="ON_TYPING_STATUS_UPDATED",tJ=Object.freeze({__proto__:null,FETCH_INITIAL_MESSAGES_FAILURE:Uf,FETCH_INITIAL_MESSAGES_START:d0,FETCH_INITIAL_MESSAGES_SUCCESS:h0,FETCH_NEXT_MESSAGES_FAILURE:LC,FETCH_NEXT_MESSAGES_SUCCESS:OC,FETCH_PREV_MESSAGES_FAILURE:RC,FETCH_PREV_MESSAGES_SUCCESS:wC,MARK_AS_READ:PL,MESSAGE_LIST_PARAMS_CHANGED:HC,ON_FILE_INFO_UPLOADED:GC,ON_MESSAGE_DELETED:Kf,ON_MESSAGE_DELETED_BY_REQ_ID:PC,ON_MESSAGE_RECEIVED:DC,ON_MESSAGE_THREAD_INFO_UPDATED:kC,ON_MESSAGE_UPDATED:qf,ON_REACTION_UPDATED:FC,ON_TYPING_STATUS_UPDATED:zC,RESEND_MESSAGE_START:pf,RESET_MESSAGES:AC,SEND_MESSAGE_FAILURE:Bo,SEND_MESSAGE_START:UC,SEND_MESSAGE_SUCCESS:eo,SET_CHANNEL_INVALID:xC,SET_CURRENT_CHANNEL:Ra,SET_EMOJI_CONTAINER:BC});function nJ(e,n){var t=e.currentGroupChannel,r=e.initialTimeStamp,i=e.userFilledMessageListQuery,a=e.replyType,s=e.setIsScrolled,o=n.logger,l=n.scrollRef,u=n.messagesDispatcher,d=t==null?void 0:t.url,f=M.useCallback(function(){if(o.info("Channel useInitialMessagesFetch: Setup started",t),s(!1),u({type:AC,payload:null}),t&&(t!=null&&t.getMessagesByTimestamp)){var m={prevResultSize:u0,isInclusive:!0,includeReactions:!0,includeMetaArray:!0};r&&(m.nextResultSize=c0),(a==="QUOTE_REPLY"||a==="THREAD")&&(m.includeThreadInfo=!0,m.includeParentMessageInfo=!0,m.replyType=Ir.ONLY_REPLY_TO_CHANNEL),i&&Object.keys(i).forEach(function(p){m[p]=i[p]}),(a&&(a==="QUOTE_REPLY"||a==="THREAD")||i)&&(o.info("Channel useInitialMessagesFetch: Setup messageListParams",m),u({type:HC,payload:m})),o.info("Channel: Fetching messages",{currentGroupChannel:t,userFilledMessageListQuery:i}),u({type:d0,payload:null}),t.getMessagesByTimestamp(r||new Date().getTime(),m).then(function(p){u({type:h0,payload:{currentGroupChannel:t,messages:p}})}).catch(function(p){o.error("Channel: Fetching messages failed",p),u({type:Uf,payload:{currentGroupChannel:t}})}).finally(function(){r?setTimeout(function(){TL(l,r,s)},500):setTimeout(function(){return no(0,l,s)},eO)})}},[d,i,r]);return M.useEffect(function(){f()},[f]),f}var Ow=function(e){return e==null};function $n(e,n){if(Ow(e)||Ow(n))return!1;var t=e.toString(),r=n.toString();return t===r}function xL(e,n,t){t===void 0&&(t=!0);var r=M.useState(!1),i=r[0],a=r[1],s=!e;M.useEffect(function(){var l=function(){t&&a(document.hidden)};return document.addEventListener("visibilitychange",l),function(){document.removeEventListener("visibilitychange",l)}},[t,document.hidden]);var o=s&&!!n&&!i;return{shouldReconnect:o}}var rJ=function(e){e===void 0&&(e=[]);for(var n=new Map,t=0;t<e.length;t+=1){var r=e[t],i=r.userId,a=r.nickname;n.set(i,a)}return n},iJ=function(e){return e?aJ(e)?e:sJ(e)&&(e==null?void 0:e.parentMessage)||null:null},aJ=function(e){return(e==null?void 0:e.parentMessage)===null&&typeof(e==null?void 0:e.parentMessageId)=="number"&&!(e!=null&&e.parentMessageId)},sJ=function(e){return(e==null?void 0:e.parentMessage)!==null&&typeof(e==null?void 0:e.parentMessageId)=="number"&&(e==null?void 0:e.parentMessageId)>0&&(e==null?void 0:e.threadInfo)===null},Lw=function(e,n,t){return Math.abs(e-n)<=t},Uw=function(e){return e==null};function Rl(e,n){if(Uw(e)||Uw(n))return!1;var t=e.toString(),r=n.toString();return t===r}var Oa=function(e){e===void 0&&(e=0);var n=10,t=e;if(!(t>n))try{var r=document.querySelector(".sendbird-thread-ui--scroll");r&&(r.scrollTop=r.scrollHeight)}catch{setTimeout(function(){Oa(t+1)},500*t)}},FL=function(e,n){var t=e.currentChannel,r=e.onBeforeSendMultipleFilesMessage,i=e.publishingModules,a=n.logger,s=n.pubSub,o=n.scrollRef,l=M.useCallback(function(u,d){return new Promise(function(f,m){t||(a.warning("Channel: Sending MFm failed, because currentChannel is null.",{currentChannel:t}),m()),u.length<=1&&(a.warning("Channel: Sending MFM failed, because there are no multiple files.",{files:u}),m());var p={fileInfoList:u.map(function(E){return{file:E,fileName:E.name,fileSize:E.size,mimeType:E.type}})};d&&(p.isReplyToChannel=!0,p.parentMessageId=d.messageId),typeof r=="function"&&(p=r(u,d)),a.info("Channel: Start sending MFM",{messageParams:p});try{t==null||t.sendMultipleFilesMessage(p).onFileUploaded(function(E,_,b,C){a.info("Channel: onFileUploaded during sending MFM",{requestId:E,index:_,error:C,uploadableFileInfo:b}),s.publish(Hn.ON_FILE_INFO_UPLOADED,{response:{channelUrl:t.url,requestId:E,index:_,uploadableFileInfo:b,error:C},publishingModules:i})}).onPending(function(E){a.info("Channel: in progress of sending MFM",{pendingMessage:E,fileInfoList:p.fileInfoList}),s.publish(Hn.SEND_MESSAGE_START,{message:E,channel:t,publishingModules:i}),setTimeout(function(){o&&Hm(i)&&no(0,o),qh(i)&&Oa(0)},$l)}).onFailed(function(E,_){a.error("Channel: Sending MFM failed.",{error:E,failedMessage:_}),s.publish(Hn.SEND_MESSAGE_FAILED,{channel:t,message:_,publishingModules:i}),m(E)}).onSucceeded(function(E){a.info("Channel: Sending voice message success!",{succeededMessage:E}),s.publish(Hn.SEND_FILE_MESSAGE,{channel:t,message:E,publishingModules:i}),f(E)})}catch(E){a.error("Channel: Sending MFM failed.",{error:E}),m(E)}})},[t,r,i]);return[l]},oJ={initialized:!1,loading:!0,allMessages:[],localMessages:[],currentGroupChannel:null,hasMorePrev:!1,oldestMessageTimeStamp:0,hasMoreNext:!1,latestMessageTimeStamp:0,emojiContainer:{emojiCategories:[],emojiHash:""},unreadSince:null,unreadSinceDate:null,isInvalid:!1,readStatus:null,messageListParams:null,typingMembers:[]},Dw=function(e){e===void 0&&(e=[]);var n=e[0];return n&&n.createdAt||null},kw=function(e){e===void 0&&(e=[]);var n=e[e.length-1];return n&&n.createdAt||null};function td(e){return"reqId"in e}function lJ(e,n){var t=Ut().stringSet;return ji(n).with({type:AC},function(){return D(D({},e),{hasMorePrev:!1,hasMoreNext:!1,allMessages:[],localMessages:[]})}).with({type:d0},function(){return D(D({},e),{loading:!0,allMessages:e.allMessages.filter(function(r){return mc(r)?r.sendingStatus!==gn.SUCCEEDED:!0}),localMessages:[]})}).with({type:h0},function(r){var i,a=r.payload,s=a.currentGroupChannel,o=a.messages;if((s==null?void 0:s.url)!==((i=e.currentGroupChannel)===null||i===void 0?void 0:i.url))return e;var l=Dw(o),u=kw(o);return D(D({},e),{loading:!1,initialized:!0,hasMorePrev:!0,hasMoreNext:!0,oldestMessageTimeStamp:l,latestMessageTimeStamp:u,allMessages:Ne([],o,!0)})}).with({type:wC},function(r){var i,a,s,o,l=r.payload,u=l.currentGroupChannel,d=l.messages;if((u==null?void 0:u.url)!==((i=e.currentGroupChannel)===null||i===void 0?void 0:i.url))return e;var f=((a=d==null?void 0:d.length)!==null&&a!==void 0?a:0)>=((o=(s=e==null?void 0:e.messageListParams)===null||s===void 0?void 0:s.prevResultSize)!==null&&o!==void 0?o:u0)+1,m=Dw(d),p=[],E=e.allMessages.map(function(b){var C=d.find(function(y){var T=y.messageId;return $n(T,b.messageId)});return C?(p.push(C.messageId),C.updatedAt>b.updatedAt?C:b):b}),_=p.length>0?d.filter(function(b){return!p.find(function(C){return $n(C,b.messageId)})}):d;return D(D({},e),{hasMorePrev:f,oldestMessageTimeStamp:m,allMessages:Ne(Ne([],_,!0),E,!0)})}).with({type:OC},function(r){var i,a,s,o,l=r.payload,u=l.currentGroupChannel,d=l.messages;if((u==null?void 0:u.url)!==((i=e.currentGroupChannel)===null||i===void 0?void 0:i.url))return e;var f=((a=d==null?void 0:d.length)!==null&&a!==void 0?a:0)===((o=(s=e==null?void 0:e.messageListParams)===null||s===void 0?void 0:s.nextResultSize)!==null&&o!==void 0?o:c0)+1,m=kw(d),p=CZ(e.allMessages,d);return D(D({},e),{hasMoreNext:f,latestMessageTimeStamp:m,allMessages:p})}).with({type:qy.union(Uf,RC,LC)},function(r){var i,a=r.payload.currentGroupChannel;if((a==null?void 0:a.url)!==((i=e==null?void 0:e.currentGroupChannel)===null||i===void 0?void 0:i.url))return e;var s=[Uf].includes(r.type);return D(D({},e),{loading:!1,isInvalid:s,initialized:!1,allMessages:[],hasMorePrev:!1,hasMoreNext:!1,oldestMessageTimeStamp:null,latestMessageTimeStamp:null})}).with({type:UC},function(r){return D(D({},e),{localMessages:Ne(Ne([],e.localMessages,!0),[r.payload],!1)})}).with({type:eo},function(r){var i=r.payload,a=e.allMessages.filter(function(s){return!td(s)||(s==null?void 0:s.reqId)!==(i==null?void 0:i.reqId)});return D(D({},e),{allMessages:Ne(Ne([],a,!0),[i],!1),localMessages:e.localMessages.filter(function(s){return td(s)&&(s==null?void 0:s.reqId)!==(i==null?void 0:i.reqId)})})}).with({type:Bo},function(r){return r.payload.failed=!0,D(D({},e),{localMessages:e.localMessages.map(function(i){return $n(td(i)&&i.reqId,r.payload.reqId)?r.payload:i})})}).with({type:Ra},function(r){return D(D({},e),{currentGroupChannel:r.payload,isInvalid:!1})}).with({type:xC},function(){return D(D({},e),{currentGroupChannel:null,allMessages:[],localMessages:[],isInvalid:!0})}).with({type:DC},function(r){var i,a,s=r.payload,o=s.channel,l=s.message,u=o.members,d=l.sender,f=e.currentGroupChannel,m=f==null?void 0:f.url;if(!$n(o==null?void 0:o.url,m)||e.allMessages.some(function(E){return E.messageId===l.messageId})||e.messageListParams&&!cA(e.messageListParams,l))return e;if(l.isAdminMessage&&l.isAdminMessage())return D(D({},e),{allMessages:Rw(e.allMessages,l)});var p=u==null?void 0:u.find(function(E){return(E==null?void 0:E.userId)===(d==null?void 0:d.userId)});return((p==null?void 0:p.profileUrl)!==(d==null?void 0:d.profileUrl)||(p==null?void 0:p.friendName)!==(d==null?void 0:d.friendName)||(p==null?void 0:p.nickname)!==(d==null?void 0:d.nickname))&&(o.members=u.map(function(E){return E.userId===d.userId?d:E})),D(D({},e),{currentGroupChannel:o,unreadSince:(i=e.unreadSince)!==null&&i!==void 0?i:Ar(new Date,t.DATE_FORMAT__UNREAD_SINCE),unreadSinceDate:(a=e.unreadSinceDate)!==null&&a!==void 0?a:new Date,allMessages:Rw(e.allMessages,l)})}).with({type:qf},function(r){var i,a=r.payload,s=a.channel,o=a.message,l=((i=e==null?void 0:e.currentGroupChannel)===null||i===void 0?void 0:i.url)||"";return $n(s==null?void 0:s.url,l)?e.messageListParams&&!cA(e.messageListParams,o)?D(D({},e),{allMessages:e.allMessages.filter(function(u){return!$n(u.messageId,o==null?void 0:o.messageId)})}):D(D({},e),{allMessages:e.allMessages.map(function(u){return $n(u.messageId,o.messageId)?o:($n(u.parentMessageId,o.messageId)&&(u.parentMessage=o),u)})}):e}).with({type:kC},function(r){var i,a=r.payload,s=a.channel,o=a.event,l=o.channelUrl,u=o.threadInfo,d=o.targetMessageId,f=((i=e==null?void 0:e.currentGroupChannel)===null||i===void 0?void 0:i.url)||"";return!$n(s==null?void 0:s.url,f)||!$n(s==null?void 0:s.url,l)?e:D(D({},e),{allMessages:e.allMessages.map(function(m){return $n(m.messageId,d)&&(m.threadInfo=u),m})})}).with({type:pf},function(r){return D(D({},e),{localMessages:e.localMessages.map(function(i){return $n(td(i)&&i.reqId,r.payload.reqId)?r.payload:i})})}).with({type:PL},function(r){var i,a,s;return((i=e.currentGroupChannel)===null||i===void 0?void 0:i.url)!==((s=(a=r.payload)===null||a===void 0?void 0:a.channel)===null||s===void 0?void 0:s.url)?e:D(D({},e),{unreadSince:null,unreadSinceDate:null})}).with({type:Kf},function(r){return D(D({},e),{allMessages:e.allMessages.filter(function(i){return!$n(i.messageId,r.payload)})})}).with({type:PC},function(r){return D(D({},e),{localMessages:e.localMessages.filter(function(i){return!$n(td(i)&&i.reqId,r.payload)})})}).with({type:BC},function(r){return D(D({},e),{emojiContainer:r.payload})}).with({type:FC},function(r){return D(D({},e),{allMessages:e.allMessages.map(function(i){return $n(i.messageId,r.payload.messageId)&&i.applyReactionEvent&&typeof i.applyReactionEvent=="function"&&i.applyReactionEvent(r.payload),i})})}).with({type:HC},function(r){return D(D({},e),{messageListParams:r.payload})}).with({type:GC},function(r){var i,a,s=r.payload,o=s.channelUrl,l=s.requestId,u=s.index,d=s.uploadableFileInfo,f=s.error;if(!$n(o,(i=e==null?void 0:e.currentGroupChannel)===null||i===void 0?void 0:i.url)||f)return e;var m=e.localMessages,p=m.find(function(_){return $n(td(_)&&_.reqId,l)}),E=(a=p.messageParams)===null||a===void 0?void 0:a.fileInfoList;return Array.isArray(E)&&(E[u]=d),D(D({},e),{localMessages:m})}).with({type:zC},function(r){var i,a=r.payload,s=a.channel,o=a.typingMembers;return $n(s.url,(i=e==null?void 0:e.currentGroupChannel)===null||i===void 0?void 0:i.url)?D(D({},e),{typingMembers:o}):e}).otherwise(function(){return e})}var uJ="delivery_receipt";function cJ(e,n){var t,r,i,a=e.sdkInit,s=e.currentGroupChannel,o=e.disableMarkAsRead,l=n.sdk,u=n.logger,d=n.scrollRef,f=n.setQuoteMessage,m=n.messagesDispatcher,p=yt().state,E=p.config,_=E.markAsReadScheduler,b=E.markAsDeliveredScheduler,C=E.disableMarkAsDelivered,y=(i=(r=(t=p.stores.sdkStore.sdk)===null||t===void 0?void 0:t.appInfo)===null||r===void 0?void 0:r.premiumFeatureList)===null||i===void 0?void 0:i.find(function(T){return T===uJ});M.useEffect(function(){var T,N=s==null?void 0:s.url,w=qr();if(N&&a){var O={onMessageReceived:function(L,P){var U,B;if(L.isGroupChannel()&&$n(L==null?void 0:L.url,N)){var F=!1;try{var H=d.current;H&&(F=H.offsetHeight+H.scrollTop>=H.scrollHeight-10)}catch{}if(u.info("Channel | useHandleChannelEvents: onMessageReceived",P),m({type:DC,payload:{channel:L,message:P}}),F&&((U=document.getElementById("sendbird-dropdown-portal"))===null||U===void 0?void 0:U.childElementCount)===0&&((B=document.getElementById("sendbird-emoji-list-portal"))===null||B===void 0?void 0:B.childElementCount)===0)try{setTimeout(function(){return no(0,d)}),o||_.push(s),y&&!C&&b.push(s)}catch{u.warning("Channel | onMessageReceived | scroll to end failed")}}},onUnreadMemberStatusUpdated:function(L){u.info("Channel | useHandleChannelEvents: onUnreadMemberStatusUpdated",L),$n(L==null?void 0:L.url,N)&&m({type:Ra,payload:L})},onUndeliveredMemberStatusUpdated:function(L){$n(L==null?void 0:L.url,N)&&(u.info("Channel | useHandleChannelEvents: onDeliveryReceiptUpdated",L),m({type:Ra,payload:L}))},onMessageUpdated:function(L,P){L.isGroupChannel()&&$n(L==null?void 0:L.url,N)&&(u.info("Channel | useHandleChannelEvents: onMessageUpdated",P),m({type:qf,payload:{channel:L,message:P}}))},onThreadInfoUpdated:function(L,P){L.isGroupChannel()&&$n(L==null?void 0:L.url,N)&&(u.info("Channel | useHandleChannelEvents: onThreadInfoUpdated",{channel:L,threadInfoUpdateEvent:P}),m({type:kC,payload:{channel:L,event:P}}))},onMessageDeleted:function(L,P){u.info("Channel | useHandleChannelEvents: onMessageDeleted",{channel:L,messageId:P}),f(null),m({type:Kf,payload:P})},onReactionUpdated:function(L,P){u.info("Channel | useHandleChannelEvents: onReactionUpdated",{channel:L,reactionEvent:P}),m({type:FC,payload:P})},onChannelChanged:function(L){L.isGroupChannel()&&$n(L==null?void 0:L.url,N)&&(u.info("Channel | useHandleChannelEvents: onChannelChanged",L),m({type:Ra,payload:L}))},onChannelFrozen:function(L){L.isGroupChannel()&&$n(L==null?void 0:L.url,N)&&(u.info("Channel | useHandleChannelEvents: onChannelFrozen",L),m({type:Ra,payload:L}))},onChannelUnfrozen:function(L){L.isGroupChannel()&&$n(L==null?void 0:L.url,N)&&(u.info("Channel | useHandleChannelEvents: onChannelUnFrozen",L),m({type:Ra,payload:L}))},onUserMuted:function(L,P){L.isGroupChannel()&&$n(L==null?void 0:L.url,N)&&(u.info("Channel | useHandleChannelEvents: onUserMuted",{channel:L,user:P}),m({type:Ra,payload:L}))},onUserUnmuted:function(L,P){L.isGroupChannel()&&$n(L==null?void 0:L.url,N)&&(u.info("Channel | useHandleChannelEvents: onUserUnmuted",{channel:L,user:P}),m({type:Ra,payload:L}))},onUserBanned:function(L,P){var U;if($n(L==null?void 0:L.url,N)&&L.isGroupChannel()){u.info("Channel | useHandleChannelEvents: onUserBanned",{channel:L,user:P});var B=(P==null?void 0:P.userId)===((U=l==null?void 0:l.currentUser)===null||U===void 0?void 0:U.userId);m({type:Ra,payload:B?null:L})}},onOperatorUpdated:function(L,P){L.isGroupChannel()&&$n(L==null?void 0:L.url,N)&&(u.info("Channel | useHandleChannelEvents: onOperatorUpdated",{channel:L,users:P}),m({type:Ra,payload:L}))},onUserLeft:function(L,P){var U;if($n(L==null?void 0:L.url,N)){u.info("Channel | useHandleChannelEvents: onUserLeft",{channel:L,user:P});var B=(P==null?void 0:P.userId)===((U=l==null?void 0:l.currentUser)===null||U===void 0?void 0:U.userId);m({type:Ra,payload:B?null:L})}},onTypingStatusUpdated:function(L){if($n(L==null?void 0:L.url,N)){u.info("Channel | onTypingStatusUpdated",{channel:L});var P=L.getTypingUsers();m({type:zC,payload:{channel:L,typingMembers:P}})}}};u.info("Channel | useHandleChannelEvents: Setup event handler",{channelHandlerId:w,channelHandler:O}),(T=l.groupChannel)===null||T===void 0||T.addGroupChannelHandler(w,new Qo(O))}return function(){var L;!((L=l==null?void 0:l.groupChannel)===null||L===void 0)&&L.removeGroupChannelHandler?(u.info("Channel | useHandleChannelEvents: Removing message reciver handler",w),l.groupChannel.removeGroupChannelHandler(w)):l!=null&&l.groupChannel&&u.error("Channel | useHandleChannelEvents: Not found the removeGroupChannelHandler")}},[s==null?void 0:s.url,a])}function dJ(e,n){var t=e.channelUrl,r=e.sdkInit,i=e.disableMarkAsRead,a=n.messagesDispatcher,s=n.sdk,o=n.logger,l=n.markAsReadScheduler;M.useEffect(function(){t&&r&&s&&s.groupChannel&&(o.info("Channel | useSetChannel fetching channel",t),s.groupChannel.getChannel(t).then(function(u){o.info("Channel | useSetChannel fetched channel",u),a({type:Ra,payload:u}),o.info("Channel: Mark as read",u),i||l.push(u)}).catch(function(u){o.warning("Channel | useSetChannel fetch channel failed",{channelUrl:t,e:u}),a({type:xC})}),s.getAllEmoji().then(function(u){o.info("Channel: Getting emojis success",u),a({type:BC,payload:u})}).catch(function(u){o.error("Channel: Getting emojis failed",u)}))},[t,r])}function hJ(e,n){var t=e.isOnline,r=e.replyType,i=e.disableMarkAsRead,a=e.reconnectOnIdle,s=n.logger,o=n.sdk,l=n.scrollRef,u=n.currentGroupChannel,d=n.messagesDispatcher,f=n.markAsReadScheduler,m=n.userFilledMessageListQuery,p=xL(t,u,a).shouldReconnect;M.useEffect(function(){return function(){var E,_,b;if(p){s.info("Refreshing conversation state");var C=((E=o==null?void 0:o.appInfo)===null||E===void 0?void 0:E.useReaction)||!1,y={prevResultSize:u0,isInclusive:!0,includeReactions:C,includeMetaArray:!0,nextResultSize:c0};r&&r==="QUOTE_REPLY"&&(y.includeThreadInfo=!0,y.includeParentMessageInfo=!0,y.replyType=Ir.ONLY_REPLY_TO_CHANNEL),m&&Object.keys(m).forEach(function(T){y[T]=m[T]}),s.info("Channel: Fetching messages",{currentGroupChannel:u,userFilledMessageListQuery:m}),d({type:d0,payload:null}),(_=o==null?void 0:o.groupChannel)===null||_===void 0||_.getChannel((b=u==null?void 0:u.url)!==null&&b!==void 0?b:"").then(function(T){var N=new Date().getTime();T.getMessagesByTimestamp(N,y).then(function(w){d({type:h0,payload:{currentGroupChannel:T,messages:w}}),setTimeout(function(){return no(0,l)},eO)}).catch(function(w){s.error("Channel: Fetching messages failed",w),d({type:Uf,payload:{currentGroupChannel:T}})}),i||f.push(T)})}}},[p,r])}function fJ(e,n){var t=e.currentGroupChannel,r=e.oldestMessageTimeStamp,i=e.userFilledMessageListQuery,a=e.replyType,s=n.hasMorePrev,o=n.logger,l=n.messagesDispatcher,u=n.sdk;return M.useCallback(function(d){var f,m;if(s){var p={prevResultSize:u0,isInclusive:!0,includeMetaArray:!0,includeReactions:(m=(f=u==null?void 0:u.appInfo)===null||f===void 0?void 0:f.useReaction)!==null&&m!==void 0?m:!1};(a==="QUOTE_REPLY"||a==="THREAD")&&(p.includeThreadInfo=!0,p.includeParentMessageInfo=!0,p.replyType=Ir.ONLY_REPLY_TO_CHANNEL),i&&Object.keys(i).forEach(function(E){p[E]=i[E]}),o.info("Channel: Fetching messages",{currentGroupChannel:t,userFilledMessageListQuery:i}),t==null||t.getMessagesByTimestamp(r||new Date().getTime(),p).then(function(E){l({type:wC,payload:{currentGroupChannel:t,messages:E}}),d&&setTimeout(function(){return d()})}).catch(function(){l({type:RC,payload:{currentGroupChannel:t}})})}},[t,r,a])}function vJ(e,n){var t=e.currentGroupChannel,r=e.latestMessageTimeStamp,i=e.userFilledMessageListQuery,a=e.hasMoreNext,s=e.replyType,o=n.logger,l=n.messagesDispatcher,u=n.sdk;return M.useCallback(function(d){var f,m;if(a){var p=(m=(f=u==null?void 0:u.appInfo)===null||f===void 0?void 0:f.useReaction)!==null&&m!==void 0?m:!1,E={nextResultSize:c0,isInclusive:!0,includeReactions:p,includeMetaArray:!0};s&&(s==="QUOTE_REPLY"||s==="THREAD")&&(E.includeThreadInfo=!0,E.includeParentMessageInfo=!0,E.replyType=Ir.ONLY_REPLY_TO_CHANNEL),i&&Object.keys(i).forEach(function(_){E[_]=i[_]}),o.info("Channel: Fetching later messages",{currentGroupChannel:t,userFilledMessageListQuery:i}),t==null||t.getMessagesByTimestamp(r||new Date().getTime(),E).then(function(_){l({type:OC,payload:{currentGroupChannel:t,messages:_}}),setTimeout(function(){return d([_,null])})}).catch(function(_){o.error("Channel: Fetching later messages failed",_),l({type:LC,payload:{currentGroupChannel:t}}),setTimeout(function(){return d([null,_])})})}},[t,r,a,s])}function mJ(e,n){var t=e.currentGroupChannel,r=e.messagesDispatcher,i=n.logger;return M.useCallback(function(a){i.info("Channel | useDeleteMessageCallback: Deleting message",a);var s=mc(a)?a.sendingStatus:void 0;return new Promise(function(o,l){i.info("Channel | useDeleteMessageCallback: Deleting message requestState:",s),(s===gn.FAILED||s===gn.PENDING)&&"reqId"in a?(i.info("Channel | useDeleteMessageCallback: Deleted message from local:",a),r({type:PC,payload:a.reqId}),o()):(i.info("Channel | useDeleteMessageCallback: Deleting message from remote:",s),t==null||t.deleteMessage(a).then(function(){i.info("Channel | useDeleteMessageCallback: Deleting message success!",a),r({type:Kf,payload:a.messageId}),o()}).catch(function(u){i.warning("Channel | useDeleteMessageCallback: Deleting message failed!",u),l(u)}))})},[t,r])}function pJ(e,n){var t=e.currentGroupChannel,r=e.messagesDispatcher,i=e.onBeforeUpdateUserMessage,a=e.isMentionEnabled,s=n.logger,o=n.pubSub;return M.useCallback(function(l,u){var d=l.messageId,f=l.message,m=l.mentionedUsers,p=l.mentionTemplate,E=function(C){var y={message:C};return a&&m&&m.length>0&&(y.mentionedUsers=m),a&&p?y.mentionedMessageTemplate=p:y.mentionedMessageTemplate=C,y},_=i&&typeof i=="function";_&&s.info("Channel: creating params using onBeforeUpdateUserMessage",i);var b=_?i(f):E(f);s.info("Channel: Updating message!",b),t==null||t.updateUserMessage(d,b).then(function(C){u&&u(null,C),s.info("Channel: Updating message success!",C),r({type:qf,payload:{channel:t,message:C}}),o.publish(Hn.UPDATE_USER_MESSAGE,{message:C,channel:t,publishingModules:[Jr.CHANNEL]})}).catch(function(C){u&&u(C,null)})},[t==null?void 0:t.url,r,i])}function gJ(e,n){var t=e.currentGroupChannel,r=e.messagesDispatcher,i=n.logger,a=n.pubSub;return M.useCallback(function(s){i.info("Channel: Resending message has started",s),s!=null&&s.isResendable?s.isUserMessage()?t==null||t.resendMessage(s).onPending(function(o){i.info("Channel: Resending message start!",o),r({type:pf,payload:o})}).onSucceeded(function(o){i.info("Channel: Resending message success!",o),r({type:eo,payload:o})}).onFailed(function(o,l){i.warning("Channel: Resending message failed!",o),r({type:Bo,payload:l})}):s.isFileMessage()?t==null||t.resendMessage(s).onPending(function(o){i.info("Channel: Resending file message start!",o),r({type:pf,payload:o})}).onSucceeded(function(o){i.info("Channel: Resending file message success!",o),r({type:eo,payload:o})}).onFailed(function(o,l){i.warning("Channel: Resending file message failed!",o),r({type:Bo,payload:l})}):s.isMultipleFilesMessage()&&(t==null||t.resendMessage(s).onPending(function(o){i.info("Channel: Resending multiple files message start!",o),r({type:pf,payload:o})}).onFileUploaded(function(o,l,u,d){var f;i.info("Channel: Resending multiple files message file uploaded!",{requestId:o,index:l,error:d,uploadableFileInfo:u}),a.publish(Hn.ON_FILE_INFO_UPLOADED,{response:{channelUrl:(f=t==null?void 0:t.url)!==null&&f!==void 0?f:"",requestId:o,index:l,uploadableFileInfo:u,error:d},publishingModules:[Jr.CHANNEL]})}).onSucceeded(function(o){i.info("Channel: Resending multiple files message success!",o),r({type:eo,payload:o})}).onFailed(function(o,l){i.warning("Channel: Resending multiple files message failed!",o),r({type:Bo,payload:l})})):i.error("Message is not resendable",s)},[t,r])}function _J(e,n){var t=e.isMentionEnabled,r=e.currentGroupChannel,i=e.onBeforeSendUserMessage,a=n.logger,s=n.pubSub,o=n.scrollRef,l=n.messagesDispatcher,u=M.useRef(null),d=M.useCallback(function(f){var m=f.quoteMessage,p=f.message,E=f.mentionTemplate,_=f.mentionedUsers,b=function(){var T={message:p};return t&&_&&_.length>0&&(T.mentionedUsers=_),t&&E&&_&&_.length>0&&(T.mentionedMessageTemplate=E),m&&(T.isReplyToChannel=!0,T.parentMessageId=m.messageId),T},C=i&&typeof i=="function";C&&a.info("Channel: creating params using onBeforeSendUserMessage",i);var y=C?i(p,m):b();a.info("Channel: Sending message has started",y),r==null||r.sendUserMessage(y).onPending(function(T){s.publish(Hn.SEND_MESSAGE_START,{message:T,channel:r,publishingModules:[Jr.CHANNEL]}),setTimeout(function(){return no(0,o)},$l)}).onFailed(function(T,N){a.warning("Channel: Sending message failed!",{message:N,error:T}),l({type:Bo,payload:N})}).onSucceeded(function(T){a.info("Channel: Sending message success!",T),l({type:eo,payload:T})})},[r,i]);return[u,d]}function EJ(e,n){var t=e.currentGroupChannel,r=e.onBeforeSendFileMessage,i=e.imageCompression,a=n.logger,s=n.pubSub,o=n.scrollRef,l=n.messagesDispatcher,u=M.useCallback(function(d,f){return new Promise(function(m,p){var E=r==null?void 0:r(d,f);E||(E={file:d},f&&(E.isReplyToChannel=!0,E.parentMessageId=f.messageId)),a.info("Channel: Uploading file message start!",E),t==null||t.sendFileMessage(E).onPending(function(_){s.publish(Hn.SEND_MESSAGE_START,{message:D(D({},_),{url:URL.createObjectURL(d),requestState:"pending",isUserMessage:_.isUserMessage,isFileMessage:_.isFileMessage,isAdminMessage:_.isAdminMessage,isMultipleFilesMessage:_.isMultipleFilesMessage}),channel:t,publishingModules:[Jr.CHANNEL]}),setTimeout(function(){return no(0,o)},$l)}).onFailed(function(_,b){a.error("Channel: Sending file message failed!",{failedMessage:b,err:_}),b.localUrl=URL.createObjectURL(d),b.file=d,l({type:Bo,payload:b}),p(_)}).onSucceeded(function(_){a.info("Channel: Sending file message success!",_),l({type:eo,payload:_}),m(_)})})},[t,r,i]);return[u]}var Ph="useToggleReactionCallback:";function yJ(e,n){return M.useCallback(function(t,r,i){if(!e){n==null||n.warning("".concat(Ph," currentChannel doesn't exist"),e);return}i?e.deleteReaction(t,r).then(function(a){n==null||n.info("".concat(Ph," Delete reaction success"),a)}).catch(function(a){n==null||n.warning("".concat(Ph," Delete reaction failed"),a)}):e.addReaction(t,r).then(function(a){n==null||n.info("".concat(Ph," Add reaction success"),a)}).catch(function(a){n==null||n.warning("".concat(Ph," Add reaction failed"),a)})},[e])}function bJ(e){var n=e.current,t=n==null?void 0:n.parentNode;n&&t&&(n.style.pointerEvents="none",t.style.cursor="wait")}function CJ(e){var n=e.current,t=n==null?void 0:n.parentNode;n&&t&&(n.style.pointerEvents="auto",t.style.cursor="auto")}function SJ(e,n){var t=e.setInitialTimeStamp,r=e.setAnimatedMessageId,i=e.allMessages,a=e.scrollRef,s=n.logger;return M.useCallback(function(o,l){var u=i.find(function(d){return d.messageId===l});r(null),setTimeout(function(){try{s.info("Channel: scroll to message - disabling mouse events"),bJ(a),u?(s.info("Channel: scroll to message - message is present"),r(l),TL(a,o)):(s.info("Channel: scroll to message - fetching older messages"),t(null),t(o),r(l))}finally{s.info("Channel: scroll to message - enabled mouse events"),CJ(a)}})},[t,r,i])}var TJ=function(e,n){var t=e.currentGroupChannel,r=e.onBeforeSendVoiceMessage,i=n.logger,a=n.pubSub,s=n.scrollRef,o=n.messagesDispatcher,l=M.useCallback(function(u,d,f){return new Promise(function(m,p){if(t){var E=r&&typeof r=="function"?r(u,f):{file:u,fileName:_d,mimeType:xo,metaArrays:[new $r({key:Bb,value:["".concat(d)]}),new $r({key:Hb,value:[Gb]})]};f&&(E.isReplyToChannel=!0,E.parentMessageId=f.messageId),i.info("Channel: Start sending voice message",E),t.sendFileMessage(E).onPending(function(_){a.publish(Hn.SEND_MESSAGE_START,{message:_,channel:t,publishingModules:[Jr.CHANNEL]}),setTimeout(function(){return no(0,s)},$l)}).onFailed(function(_,b){i.error("Channel: Sending voice message failed!",{failedMessage:b,err:_}),o({type:Bo,payload:b}),p(_)}).onSucceeded(function(_){i.info("Channel: Sending voice message success!",_),o({type:eo,payload:_}),m(_)})}})},[t,r]);return[l]},MJ=function(e){var n=e.channelUrl,t=e.sdkInit,r=e.pubSub,i=e.dispatcher,a=e.scrollRef;M.useEffect(function(){var s=new Map;return r!=null&&r.subscribe&&(s.set(Xr.SEND_USER_MESSAGE,r.subscribe(Xr.SEND_USER_MESSAGE,function(o){var l=o.channel,u=o.message;n===(l==null?void 0:l.url)&&(i({type:eo,payload:u}),setTimeout(function(){return no(0,a)},$l))})),s.set(Xr.SEND_MESSAGE_START,r.subscribe(Xr.SEND_MESSAGE_START,function(o){var l=o.channel,u=o.message,d=o.publishingModules;n===(l==null?void 0:l.url)&&Hm(d)&&i({type:UC,payload:u})})),s.set(Xr.ON_FILE_INFO_UPLOADED,r.subscribe(Xr.ON_FILE_INFO_UPLOADED,function(o){var l=o.response,u=o.publishingModules;n===l.channelUrl&&Hm(u)&&i({type:GC,payload:l})})),s.set(Xr.SEND_MESSAGE_FAILED,r.subscribe(Xr.SEND_MESSAGE_FAILED,function(o){var l=o.channel,u=o.message,d=o.publishingModules;n===(l==null?void 0:l.url)&&Hm(d)&&i({type:Bo,payload:u})})),s.set(Xr.SEND_FILE_MESSAGE,r.subscribe(Xr.SEND_FILE_MESSAGE,function(o){var l=o.channel,u=o.message;n===(l==null?void 0:l.url)&&(i({type:eo,payload:u}),setTimeout(function(){return no(0,a)},$l))})),s.set(Xr.UPDATE_USER_MESSAGE,r.subscribe(Xr.UPDATE_USER_MESSAGE,function(o){var l=o.channel,u=o.message,d=o.fromSelector;d&&n===(l==null?void 0:l.url)&&l.isGroupChannel()&&i({type:qf,payload:{channel:l,message:u}})})),s.set(Xr.DELETE_MESSAGE,r.subscribe(Xr.DELETE_MESSAGE,function(o){var l=o.channel,u=o.messageId;n===(l==null?void 0:l.url)&&i({type:Kf,payload:u})}))),function(){s.forEach(function(o){try{o.remove()}catch{}})}},[n,t])},BL=v.createContext(null),NJ=function(e){var n,t,r,i,a,s,o=e.channelUrl,l=e.children,u=e.isReactionEnabled,d=e.isMessageGroupingEnabled,f=d===void 0?!0:d,m=e.isMultipleFilesMessageEnabled,p=e.showSearchIcon,E=e.animatedMessage,_=e.highlightedMessage,b=e.startingPoint,C=e.onBeforeSendUserMessage,y=e.onBeforeSendFileMessage,T=e.onBeforeUpdateUserMessage,N=e.onBeforeSendVoiceMessage,w=e.onBeforeSendMultipleFilesMessage,O=e.onChatHeaderActionClick,L=e.onSearchClick,P=e.onBackClick,U=e.threadReplySelectType,B=e.queries,F=e.filterMessageList,H=e.disableMarkAsRead,G=H===void 0?!1:H,j=e.onReplyInThread,x=e.onQuoteMessageClick,V=e.onMessageAnimated,K=e.onMessageHighlighted,W=e.scrollBehavior,Q=W===void 0?"auto":W,J=e.reconnectOnIdle,$=J===void 0?!0:J,te=yt().state,re=te.config,ve=(n=e.replyType)!==null&&n!==void 0?n:zo(re.groupChannel.replyType).upperCase,ie=re.pubSub,le=re.logger,Ae=re.userId,oe=re.isOnline,he=re.imageCompression,me=re.markAsReadScheduler,Be=re.groupChannel,pe=(r=(t=te==null?void 0:te.stores)===null||t===void 0?void 0:t.sdkStore)===null||r===void 0?void 0:r.sdk,ye=(a=(i=te==null?void 0:te.stores)===null||i===void 0?void 0:i.sdkStore)===null||a===void 0?void 0:a.initialized,Ee=te==null?void 0:te.config,Ue=M.useState(b),Ye=Ue[0],De=Ue[1];M.useEffect(function(){De(b)},[b,o]);var We=M.useState(null),Je=We[0],Le=We[1],He=M.useState(_),At=He[0],Ve=He[1];M.useEffect(function(){Ve(_)},[_]);var st=B==null?void 0:B.messageListParams,mt=M.useState(null),et=mt[0],St=mt[1],Rt=M.useState(!1),xe=Rt[0],Ht=Rt[1],Xt=M.useReducer(lJ,oJ),Ke=Xt[0],Ct=Xt[1],Dt=M.useRef(null),Vt=Be.enableMention,rn=Ke.allMessages,Zt=Ke.localMessages,Mn=Ke.loading,cn=Ke.initialized,ht=Ke.unreadSince,ct=Ke.unreadSinceDate,dt=Ke.isInvalid,ke=Ke.currentGroupChannel,ge=Ke.hasMorePrev,Xe=Ke.oldestMessageTimeStamp,Et=Ke.hasMoreNext,Pt=Ke.latestMessageTimeStamp,Jt=Ke.emojiContainer,Tt=Ke.readStatus,vn=Ke.typingMembers,Sn=zf({channel:ke,config:re,moduleLevel:u}),pt=M.useMemo(function(){return Sn?gZ(Jt):new Map},[Jt]),Mt=M.useMemo(function(){return Sn&&ke?_Z(ke==null?void 0:ke.members):new Map},[ke==null?void 0:ke.members]);M.useEffect(function(){E&&Le(E)},[E]);var dn=fJ({currentGroupChannel:ke,oldestMessageTimeStamp:Xe,userFilledMessageListQuery:st,replyType:ve},{hasMorePrev:ge,logger:le,messagesDispatcher:Ct,sdk:pe}),In=SJ({setInitialTimeStamp:De,setAnimatedMessageId:Le,allMessages:rn,scrollRef:Dt},{logger:le}),Ze=vJ({currentGroupChannel:ke,latestMessageTimeStamp:Pt,userFilledMessageListQuery:st,hasMoreNext:Et,replyType:ve},{logger:le,messagesDispatcher:Ct,sdk:pe}),ot=yJ(ke,le);dJ({channelUrl:o,sdkInit:ye,disableMarkAsRead:G},{messagesDispatcher:Ct,sdk:pe,logger:le,markAsReadScheduler:me}),M.useEffect(function(){St(null)},[o]),cJ({currentGroupChannel:ke,sdkInit:ye,currentUserId:Ae,disableMarkAsRead:G},{messagesDispatcher:Ct,sdk:pe,logger:le,scrollRef:Dt,setQuoteMessage:St}),nJ({currentGroupChannel:ke,userFilledMessageListQuery:st,initialTimeStamp:Ye,replyType:ve,setIsScrolled:Ht},{logger:le,scrollRef:Dt,messagesDispatcher:Ct}),MJ({channelUrl:o,sdkInit:ye,pubSub:ie,dispatcher:Ct,scrollRef:Dt}),hJ({isOnline:oe,replyType:ve,disableMarkAsRead:G,reconnectOnIdle:$},{logger:le,sdk:pe,scrollRef:Dt,currentGroupChannel:ke,messagesDispatcher:Ct,userFilledMessageListQuery:st,markAsReadScheduler:me});var Fe=mJ({currentGroupChannel:ke,messagesDispatcher:Ct},{logger:le}),Ot=pJ({currentGroupChannel:ke,messagesDispatcher:Ct,onBeforeUpdateUserMessage:T,isMentionEnabled:Vt},{logger:le,pubSub:ie}),Lt=gJ({currentGroupChannel:ke,messagesDispatcher:Ct},{logger:le,pubSub:ie}),$t=_J({currentGroupChannel:ke,isMentionEnabled:Vt,onBeforeSendUserMessage:C},{logger:le,pubSub:ie,scrollRef:Dt,messagesDispatcher:Ct}),an=$t[0],Nn=$t[1],xn=EJ({currentGroupChannel:ke,imageCompression:he,onBeforeSendFileMessage:y},{logger:le,pubSub:ie,scrollRef:Dt,messagesDispatcher:Ct})[0],tt=TJ({currentGroupChannel:ke,onBeforeSendVoiceMessage:N},{logger:le,pubSub:ie,scrollRef:Dt,messagesDispatcher:Ct})[0],ae=FL({currentChannel:ke,onBeforeSendMultipleFilesMessage:w,publishingModules:[Jr.CHANNEL]},{logger:le,pubSub:ie,scrollRef:Dt})[0];return v.createElement(BL.Provider,{value:{channelUrl:o,isReactionEnabled:Sn,isMessageGroupingEnabled:f,isMultipleFilesMessageEnabled:m,showSearchIcon:p??Ee.groupChannelSettings.enableMessageSearch,highlightedMessage:_,startingPoint:b,onBeforeSendUserMessage:C,onBeforeSendFileMessage:y,onBeforeUpdateUserMessage:T,onChatHeaderActionClick:O,onSearchClick:L,onBackClick:P,replyType:ve,threadReplySelectType:(s=U??JR(Be.threadReplySelectType).upperCase)!==null&&s!==void 0?s:Ua.THREAD,queries:B,filterMessageList:F,disableMarkAsRead:G,onReplyInThread:j,onQuoteMessageClick:x,onMessageAnimated:V,onMessageHighlighted:K,allMessages:rn,localMessages:Zt,loading:Mn,initialized:cn,unreadSince:ht,unreadSinceDate:ct,isInvalid:dt,currentGroupChannel:ke,hasMorePrev:ge,hasMoreNext:Et,oldestMessageTimeStamp:Xe,latestMessageTimeStamp:Pt,emojiContainer:Jt,readStatus:Tt,typingMembers:vn,scrollToMessage:In,quoteMessage:et,setQuoteMessage:St,deleteMessage:Fe,updateMessage:Ot,resendMessage:Lt,messageInputRef:an,sendMessage:Nn,sendFileMessage:xn,sendVoiceMessage:tt,sendMultipleFilesMessage:ae,initialTimeStamp:Ye,messageActionTypes:tJ,messagesDispatcher:Ct,setInitialTimeStamp:De,setAnimatedMessageId:Le,setHighLightedMessageId:Ve,animatedMessageId:Je,highLightedMessageId:At,nicknamesMap:Mt,emojiAllMap:pt,onScrollCallback:dn,onScrollDownCallback:Ze,scrollRef:Dt,scrollBehavior:Q,toggleReaction:ot,isScrolled:xe,setIsScrolled:Ht}},v.createElement(xd,D({},e),l))},Jl=function(){var e=v.useContext(BL);if(!e)throw new Error("ChannelContext not found. Use within the Channel module.");return e},HL="RESET_CHANNEL_LIST",GL="CREATE_CHANNEL",jC="LEAVE_CHANNEL_SUCCESS",Ap="SET_CURRENT_CHANNEL",IJ="FETCH_CHANNELS_START",VC="FETCH_CHANNELS_SUCCESS",AJ="FETCH_CHANNELS_FAILURE",$C="INIT_CHANNELS_START",zL="INIT_CHANNELS_SUCCESS",jL="REFRESH_CHANNELS_SUCCESS",VL="INIT_CHANNELS_FAILURE",$L="ON_USER_JOINED",qL="ON_CHANNEL_DELETED",Ro="ON_LAST_MESSAGE_UPDATED",lb="ON_USER_LEFT",KL="ON_CHANNEL_CHANGED",WL="ON_CHANNEL_ARCHIVED",QL="ON_CHANNEL_FROZEN",YL="ON_CHANNEL_UNFROZEN",XL="ON_READ_RECEIPT_UPDATED",ZL="ON_DELIVERY_RECEIPT_UPDATED",qC="CHANNEL_LIST_PARAMS_UPDATED",wJ="delivery_receipt",RJ=function(e){var n=e.sdk,t=e.sdkChannelHandlerId,r=e.channelListDispatcher,i=e.logger,a=new Qo({onChannelChanged:function(s){s.isGroupChannel()&&(i.info("ChannelList: onChannelChanged",s),r({type:KL,payload:s}))},onChannelDeleted:function(s){i.info("ChannelList: onChannelDeleted",s),r({type:qL,payload:s})},onUserJoined:function(s){i.info("ChannelList: onUserJoined",s),r({type:$L,payload:s})},onUserBanned:function(s,o){var l;if(s.isGroupChannel()){i.info("Channel: onUserBanned",s);var u=o.userId===((l=n==null?void 0:n.currentUser)===null||l===void 0?void 0:l.userId);r({type:lb,payload:{channel:s,isMe:u}})}},onUserLeft:function(s,o){var l;i.info("ChannelList: onUserLeft",s);var u=o.userId===((l=n==null?void 0:n.currentUser)===null||l===void 0?void 0:l.userId);r({type:lb,payload:{channel:s,isMe:u}})},onUnreadMemberStatusUpdated:function(s){i.info("ChannelList: onUnreadMemberStatusUpdated",s),r({type:XL,payload:s})},onUndeliveredMemberStatusUpdated:function(s){i.info("ChannelList: onUndeliveredMemberStatusUpdated",s),s.lastMessage&&r({type:ZL,payload:s})},onMessageUpdated:function(s,o){var l;s.isGroupChannel()&&(!((l=s.lastMessage)===null||l===void 0)&&l.isEqual(o))&&(i.info("ChannelList: onMessageUpdated",s),r({type:Ro,payload:s}))},onChannelHidden:function(s){i.info("ChannelList: onChannelHidden",s),r({type:WL,payload:s})},onChannelFrozen:function(s){s.isGroupChannel()&&(i.info("ChannelList: onChannelFrozen",s),r({type:QL,payload:s}))},onChannelUnfrozen:function(s){s.isGroupChannel()&&(i.info("ChannelList: onChannelUnfrozen",s),r({type:YL,payload:s}))}});i.info("ChannelList: Added channelHandler"),n.groupChannel.addGroupChannelHandler(t,a)},JL=function(e){var n=e.sdk,t=e.userFilledChannelListQuery,r=t===void 0?{}:t,i={includeEmpty:!1,limit:20,order:rr.LATEST_LAST_MESSAGE};return r&&Object.keys(r).forEach(function(a){i[a]=r[a]}),n.groupChannel.createMyGroupChannelListQuery(i)};function OJ(e){var n,t,r,i,a=e.sdk,s=e.sdkChannelHandlerId,o=e.channelListDispatcher,l=e.setChannelSource,u=e.onChannelSelect,d=e.userFilledChannelListQuery,f=e.logger,m=e.sortChannelList,p=e.disableAutoSelect,E=e.markAsDeliveredScheduler,_=e.disableMarkAsDelivered;a!=null&&a.groupChannel?RJ({sdk:a,channelListDispatcher:o,sdkChannelHandlerId:s,logger:f}):f.warning("ChannelList - createEventHandler: sdk or sdk.ChannelHandler does not exist",a),f.info("ChannelList - creating query",{userFilledChannelListQuery:d});var b=JL({sdk:a,userFilledChannelListQuery:d});f.info("ChannelList - created query",b),l(b),o({type:$C,payload:{currentUserId:(t=(n=a==null?void 0:a.currentUser)===null||n===void 0?void 0:n.userId)!==null&&t!==void 0?t:""}}),d&&(f.info("ChannelList - setting up channelListQuery",b),o({type:qC,payload:{channelListQuery:b,currentUserId:(i=(r=a==null?void 0:a.currentUser)===null||r===void 0?void 0:r.userId)!==null&&i!==void 0?i:""}})),f.info("ChannelList - fetching channels"),b.hasNext?b.next().then(function(C){var y,T;f.info("ChannelList - fetched channels",C),f.info("ChannelList - highlight channel",C[0]);var N=C;m&&typeof m=="function"&&(N=m(C),f.info("ChannelList - channel list sorted",N)),p||u==null||u(N[0]),o({type:zL,payload:{channelList:N,disableAutoSelect:p}});var w=(T=(y=a==null?void 0:a.appInfo)===null||y===void 0?void 0:y.premiumFeatureList)===null||T===void 0?void 0:T.find(function(O){return O===wJ});w&&!_&&N.forEach(function(O){E.push(O)})}).catch(function(C){C&&(f.error("ChannelList - couldnt fetch channels",C),o({type:VL}))}):f.info("ChannelList - there are no more channels")}var LJ=function(e){e.forEach(function(n){try{n.remove()}catch{}})},UJ=function(e,n){var t=new Map;return e&&(t.set(Hn.CREATE_CHANNEL,e.subscribe(Hn.CREATE_CHANNEL,function(r){var i=r.channel;n({type:GL,payload:i})})),t.set(Hn.UPDATE_USER_MESSAGE,e.subscribe(Hn.UPDATE_USER_MESSAGE,function(r){var i,a=r.channel,s=r.message;a.isGroupChannel()&&((i=a==null?void 0:a.lastMessage)===null||i===void 0?void 0:i.messageId)===s.messageId&&(a.lastMessage=s,n({type:Ro,payload:a}))})),t.set(Hn.LEAVE_CHANNEL,e.subscribe(Hn.LEAVE_CHANNEL,function(r){var i=r.channel;n({type:jC,payload:i==null?void 0:i.url})}))),t},xh=function(e){var n=e.channel,t=e.currentChannel,r=e.allChannels,i=e.disableAutoSelect,a=null;if((t==null?void 0:t.url)===n.url){if(!i&&r.length>0){var s=r[0],o=r[1],l=o===void 0?null:o;a=s.url===n.url?l:s}}else a=t;return a},eU={initialized:!1,loading:!0,allChannels:[],currentChannel:null,channelListQuery:null,currentUserId:"",disableAutoSelect:!1};function DJ(e,n){return ji(n).with({type:$C},function(t){var r=t.payload;return D(D({},e),{loading:!0,currentUserId:r.currentUserId})}).with({type:HL},function(){return eU}).with({type:zL},function(t){var r=t.payload,i=r.channelList,a=r.disableAutoSelect;return D(D({},e),{initialized:!0,loading:!1,allChannels:i,disableAutoSelect:a,currentChannel:!a&&i&&i.length&&i.length>0?i[0]:e.currentChannel})}).with({type:jL},function(t){var r=t.payload,i=r.channelList,a=r.currentChannel;return D(D({},e),{loading:!1,allChannels:i,currentChannel:a})}).with({type:VC},function(t){var r=e.allChannels.map(function(a){return a.url}),i=t.payload.filter(function(a){var s=a.url;return!r.find(function(o){return o===s})});return D(D({},e),{allChannels:Ne(Ne([],e.allChannels,!0),i,!0)})}).with({type:GL},function(t){var r,i=t.payload,a=e.allChannels,s=e.currentUserId,o=e.channelListQuery;return o?Kc(o,i,s)?D(D({},e),{currentChannel:i,allChannels:Wc(a,i,(r=e.channelListQuery)===null||r===void 0?void 0:r.order)}):D(D({},e),{currentChannel:i}):D(D({},e),{currentChannel:i,allChannels:Ne([i],a.filter(function(l){return l.url!==(i==null?void 0:i.url)}),!0)})}).with({type:WL},function(t){var r,i=t.payload,a=e.allChannels,s=e.currentUserId,o=e.currentChannel,l=e.channelListQuery,u=e.disableAutoSelect;if(l&&Kc(l,i,s))return D(D({},e),{allChannels:Wc(a,i,(r=e.channelListQuery)===null||r===void 0?void 0:r.order)});var d=xh({channel:i,currentChannel:o,allChannels:a,disableAutoSelect:u});return D(D({},e),{currentChannel:d,allChannels:a.filter(function(f){var m=f.url;return m!==(i==null?void 0:i.url)})})}).with({type:qy.union(jC,qL)},function(t){var r,i=t.payload,a=e.allChannels.filter(function(s){var o=s.url;return o!==i});return D(D({},e),{currentChannel:i===((r=e.currentChannel)===null||r===void 0?void 0:r.url)?a[0]:e.currentChannel,allChannels:a})}).with({type:lb},function(t){var r,i=t.payload,a=i.channel,s=i.isMe,o=e.allChannels,l=e.currentUserId,u=e.currentChannel,d=e.channelListQuery,f=e.disableAutoSelect,m=Ne([],o,!0),p=a;if(s||d&&!Kc(d,a,l)){var E=o.findIndex(function(_){return _.url===a.url});E>-1&&(m.splice(E,1),p=xh({channel:a,currentChannel:u,allChannels:o,disableAutoSelect:f}))}else m=Wc(o,a,(r=e.channelListQuery)===null||r===void 0?void 0:r.order),(u==null?void 0:u.url)===a.url&&(p=a);return D(D({},e),{currentChannel:p,allChannels:m})}).with({type:qy.union($L,KL,XL,ZL)},function(t){var r,i,a,s=t.payload,o=e.allChannels,l=o===void 0?[]:o,u=e.currentUserId,d=e.currentChannel,f=e.channelListQuery,m=e.disableAutoSelect,p=s.unreadMessageCount;if(f){if(Kc(f,s,u))return D(D({},e),{allChannels:Wc(l,s,(r=e.channelListQuery)===null||r===void 0?void 0:r.order)});if(IK(s))return e;var E=xh({channel:s,currentChannel:d,allChannels:l,disableAutoSelect:m});return D(D({},e),{currentChannel:E,allChannels:l.filter(function(_){var b=_.url;return b!==(s==null?void 0:s.url)})})}return p===0&&((a=(i=s==null?void 0:s.lastMessage)===null||i===void 0?void 0:i.sender)===null||a===void 0?void 0:a.userId)!==u?D(D({},e),{allChannels:l.map(function(_){return _.url===(s==null?void 0:s.url)?s:_})}):D(D({},e),{allChannels:Ne([s],l.filter(function(_){var b=_.url;return b!==s.url}),!0)})}).with({type:Ap},function(t){return D(D({},e),{currentChannel:t.payload})}).with({type:Ro},function(t){return D(D({},e),{allChannels:e.allChannels.map(function(r){return(r==null?void 0:r.url)===t.payload.url?t.payload:r})})}).with({type:QL},function(t){var r,i=t.payload,a=e.allChannels,s=e.currentUserId,o=e.currentChannel,l=e.channelListQuery,u=e.disableAutoSelect;if(l){if(Kc(l,i,s))return D(D({},e),{allChannels:Wc(a,i,(r=e.channelListQuery)===null||r===void 0?void 0:r.order)});var d=xh({channel:i,currentChannel:o,allChannels:a,disableAutoSelect:u});return D(D({},e),{currentChannel:d,allChannels:a.filter(function(f){var m=f.url;return m!==(i==null?void 0:i.url)})})}return D(D({},e),{allChannels:a.map(function(f){return f.url===(i==null?void 0:i.url)&&(f.isFrozen=!0),f})})}).with({type:YL},function(t){var r,i=t.payload,a=e.allChannels,s=e.currentUserId,o=e.currentChannel,l=e.channelListQuery,u=e.disableAutoSelect;if(l){if(Kc(l,i,s))return D(D({},e),{allChannels:Wc(a,i,(r=e.channelListQuery)===null||r===void 0?void 0:r.order)});var d=xh({channel:i,currentChannel:o,allChannels:a,disableAutoSelect:u});return D(D({},e),{currentChannel:d,allChannels:a.filter(function(f){var m=f.url;return m!==(i==null?void 0:i.url)})})}return D(D({},e),{allChannels:a.map(function(f){return f.url===(i==null?void 0:i.url)&&(f.isFrozen=!1),f})})}).with({type:qC},function(t){return D(D({},e),{channelListQuery:t.payload.channelListQuery,currentUserId:t.payload.currentUserId})}).otherwise(function(){return e})}function kJ(e,n){var t=e.activeChannelUrl,r=e.channels,i=e.sdk,a=n.logger,s=n.channelListDispatcher;return M.useEffect(function(){var o;if(t){a.info("ChannelListProvider: looking for active channel",{activeChannelUrl:t});var l=r==null?void 0:r.find(function(u){return u.url===t});l?s({type:Ap,payload:l}):(a.info("ChannelListProvider: searching backend for active channel",{activeChannelUrl:t}),(o=i==null?void 0:i.groupChannel)===null||o===void 0||o.getChannel(t).then(function(u){s({type:VC,payload:[u]}),s({type:Ap,payload:u})}).catch(function(){a.warning("ChannelListProvider: Active channel not found")}))}},[t])}var PJ=function(e,n){var t=e.channelSource,r=e.disableMarkAsDelivered,i=n.channelListDispatcher,a=n.logger,s=n.markAsDeliveredScheduler;return M.useCallback(function(){return tn(void 0,void 0,void 0,function(){var o,l;return nn(this,function(u){switch(u.label){case 0:if(!(t!=null&&t.hasNext))return a.info("ChannelList: not able to fetch"),[2];a.info("ChannelList: starting fetch"),i({type:IJ,payload:null}),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,t.next()];case 2:return o=u.sent(),a.info("ChannelList: succeeded fetch",{channelList:o}),i({type:VC,payload:o}),r||(a.info("ChannelList: mark as delivered to fetched channels"),o==null||o.forEach(function(d){(d==null?void 0:d.unreadMessageCount)>0&&s.push(d)})),[3,4];case 3:return l=u.sent(),a.error("ChannelList: failed fetch",{error:l}),i({type:AJ,payload:l}),[3,4];case 4:return[2]}})})},[t,r])};function xJ(e){var n=e.isOnline,t=e.reconnectOnIdle,r=e.logger,i=e.sdk,a=e.currentGroupChannel,s=e.channelListDispatcher,o=e.setChannelSource,l=e.userFilledChannelListQuery,u=e.sortChannelList,d=e.disableAutoSelect,f=e.markAsDeliveredScheduler,m=e.disableMarkAsDelivered,p=xL(n,a,t).shouldReconnect;M.useEffect(function(){return function(){var E,_,b,C;if(p){r.info("ChannelList refresh - creating query",{userFilledChannelListQuery:l});var y=JL({sdk:i,userFilledChannelListQuery:l});r.info("ChannelList refresh - created query",y),o(y),s({type:$C,payload:{currentUserId:(_=(E=i==null?void 0:i.currentUser)===null||E===void 0?void 0:E.userId)!==null&&_!==void 0?_:""}}),l&&(r.info("ChannelList refresh - setting up channelListQuery",y),s({type:qC,payload:{channelListQuery:y,currentUserId:(C=(b=i==null?void 0:i.currentUser)===null||b===void 0?void 0:b.userId)!==null&&C!==void 0?C:""}})),r.info("ChannelList refresh - fetching channels"),y.hasNext?y.next().then(function(T){var N,w;r.info("ChannelList refresh - fetched channels",T);var O=T;u&&typeof u=="function"&&(O=u(T),r.info("ChannelList refresh - channel list sorted",O));var L=d?null:O[0];if(a!=null&&a.url){var P=O.find(function(B){return B.url===a.url});P&&(L=P)}r.info("ChannelList refresh - highlight channel",L),s({type:jL,payload:{channelList:O,currentChannel:L}});var U=(w=(N=i==null?void 0:i.appInfo)===null||N===void 0?void 0:N.premiumFeatureList)===null||w===void 0?void 0:w.find(function(B){return B===nO});U&&!m&&O.forEach(function(B){f.push(B)})}).catch(function(T){T&&(r.error("ChannelList refresh - could not fetch channels",T),s({type:VL}))}):r.info("ChannelList refresh - there are no more channels")}}},[p])}var tU=v.createContext(null),FJ=function(e){var n,t,r=e.children,i=e.className,a=e.disableUserProfile,s=e.allowProfileEdit,o=e.queries,l=e.onProfileEditSuccess,u=e.onThemeChange,d=e.onBeforeCreateChannel,f=e.sortChannelList,m=e.overrideInviteUser,p=e.activeChannelUrl,E=e.isTypingIndicatorEnabled,_=E===void 0?null:E,b=e.isMessageReceiptStatusEnabled,C=b===void 0?null:b,y=e.reconnectOnIdle,T=(e==null?void 0:e.disableAutoSelect)||!!p,N=(e==null?void 0:e.onChannelSelect)||_n,w=yt().state,O=w.config,L=w.stores,P=L.sdkStore,U=O.pubSub,B=O.logger,F=O.markAsDeliveredScheduler,H=O.disableMarkAsDelivered,G=H===void 0?!1:H,j=O.isOnline,x=P==null?void 0:P.sdk,V=((n=x==null?void 0:x.appInfo)!==null&&n!==void 0?n:{}).premiumFeatureList,K=V===void 0?[]:V,W=s||O.allowProfileEdit,Q=o==null?void 0:o.channelListQuery,J=o==null?void 0:o.applicationUserListQuery,$=P==null?void 0:P.initialized,te=M.useReducer(DJ,eU),re=te[0],ve=te[1],ie=re.currentChannel,le=M.useState(null),Ae=le[0],oe=le[1],he=M.useState([]),me=he[0],Be=he[1];M.useEffect(function(){var De=UJ(U,ve);return function(){LJ(De)}},[$]),M.useEffect(function(){var De,We=qr();return $?(B.info("ChannelList: Setup channelHandlers"),OJ({sdk:x,sdkChannelHandlerId:We,channelListDispatcher:ve,setChannelSource:oe,onChannelSelect:N,userFilledChannelListQuery:D({},Q),logger:B,sortChannelList:f,disableAutoSelect:T,markAsDeliveredScheduler:F,disableMarkAsDelivered:G})):(B.info("ChannelList: Removing channelHandlers"),!((De=x==null?void 0:x.groupChannel)===null||De===void 0)&&De.removeGroupChannelHandler&&x.groupChannel.removeGroupChannelHandler(We),oe(null),ve({type:HL,payload:null})),function(){var Je,Le;B.info("ChannelList: Removing channelHandlers"),!((Je=x==null?void 0:x.groupChannel)===null||Je===void 0)&&Je.removeGroupChannelHandler&&((Le=x==null?void 0:x.groupChannel)===null||Le===void 0||Le.removeGroupChannelHandler(We))}},[$,f,Object.entries(Q??{}).map(function(De){var We=De[0],Je=De[1];return We+Je}).join()]),M.useEffect(function(){var De,We,Je="";if(!((De=x==null?void 0:x.groupChannel)===null||De===void 0)&&De.addGroupChannelHandler){Je=qr();var Le=new Qo({onTypingStatusUpdated:function(He){var At,Ve=(At=He==null?void 0:He.getTypingUsers())===null||At===void 0?void 0:At.length,st=me.filter(function(mt){return mt.url!==He.url});Ve>0?Be(Ne(Ne([],st,!0),[He],!1)):Be(st)},onUnreadMemberStatusUpdated:function(He){ve({type:Ro,payload:He})},onUndeliveredMemberStatusUpdated:function(He){ve({type:Ro,payload:He})},onMessageUpdated:function(He){He.isGroupChannel()&&(ve({type:Ro,payload:He}),x.groupChannel.getChannelWithoutCache(He.url).then(function(At){ve({type:Ro,payload:At})}))},onMentionReceived:function(He){He.isGroupChannel()&&(ve({type:Ro,payload:He}),x.groupChannel.getChannelWithoutCache(He.url).then(function(At){ve({type:Ro,payload:At})}))}});(We=x==null?void 0:x.groupChannel)===null||We===void 0||We.addGroupChannelHandler(Je,Le)}return function(){var He;!((He=x==null?void 0:x.groupChannel)===null||He===void 0)&&He.removeGroupChannelHandler&&Je!==""&&x.groupChannel.removeGroupChannelHandler(Je)}},[(t=x==null?void 0:x.currentUser)===null||t===void 0?void 0:t.userId]);var pe=M.useMemo(function(){return{applicationUserListQuery:J,channelListQuery:Q}},[J,Q]),ye=re.allChannels,Ee=f&&typeof f=="function"?f(ye):ye;if(Ee.length!==ye.length){var Ue=`ChannelList: You have removed/added extra channels on sortChannelList
      this could cause unexpected problems`;console.warn(Ue,{before:ye,after:Ee}),B.warning(Ue,{before:ye,after:Ee})}M.useEffect(function(){if(!(!x||!x.groupChannel)){if(!(ie!=null&&ie.url)){N(null);return}x.groupChannel.getChannel(ie.url).then(function(De){N(De||null)})}},[ie==null?void 0:ie.url]),kJ({activeChannelUrl:p,channels:Ee,sdk:x},{logger:B,channelListDispatcher:ve}),xJ({isOnline:j,reconnectOnIdle:y,logger:B,sdk:x,currentGroupChannel:ie,channelListDispatcher:ve,setChannelSource:oe,userFilledChannelListQuery:Q,sortChannelList:f,disableAutoSelect:T,markAsDeliveredScheduler:F,disableMarkAsDelivered:G});var Ye=PJ({channelSource:Ae,disableMarkAsDelivered:G||!K.some(function(De){return De===nO})},{channelListDispatcher:ve,logger:B,markAsDeliveredScheduler:F});return v.createElement(tU.Provider,{value:D(D({className:i,disableUserProfile:a,queries:pe,onProfileEditSuccess:l,onThemeChange:u,onBeforeCreateChannel:d,overrideInviteUser:m,onChannelSelect:N,sortChannelList:f,allowProfileEdit:W,channelListDispatcher:ve,channelSource:Ae},re),{allChannels:Ee,typingChannels:me,isTypingIndicatorEnabled:_??O.groupChannelList.enableTypingIndicator,isMessageReceiptStatusEnabled:C??O.groupChannelList.enableMessageReceiptStatus,fetchChannelList:Ye})},v.createElement(xd,D({},e),v.createElement("div",{className:"sendbird-channel-list ".concat(i)},r)))};function KC(){var e=M.useContext(tU);if(!e)throw new Error("ChannelListContext not found. Use within the ChannelList module.");return e}function BJ(e){var n=this,t=e.channelUrl,r=e.sdk,i=e.logger,a=e.initialized,s=e.dependencies,o=s===void 0?[]:s,l=ki().actions,u=l.setChannel,d=l.setInvalid,f=l.setLoading;M.useEffect(function(){var m=new AbortController,p=m.signal,E=function(){return tn(n,void 0,void 0,function(){var _,b;return nn(this,function(C){switch(C.label){case 0:return C.trys.push([0,2,3,4]),t?!a||!r?(i.warning("ChannelSettings: SDK is not initialized"),f(!1),[2]):r.groupChannel?(f(!0),[4,r.groupChannel.getChannel(t)]):(i.warning("ChannelSettings: GroupChannelModule is not specified in the SDK"),f(!1),[2]):(i.warning("ChannelSettings: channel url is required"),f(!1),[2]);case 1:return _=C.sent(),p.aborted||(i.info("ChannelSettings | useSetChannel: fetched group channel",_),u(_)),[3,4];case 2:return b=C.sent(),p.aborted||(i.error("ChannelSettings | useSetChannel: failed fetching channel",b),d(!0)),[3,4];case 3:return p.aborted||f(!1),[7];case 4:return[2]}})})};return E(),function(){return m.abort()}},Ne([t,a,r],o,!0))}var HJ=function(e){var n=e.sdk,t=e.channelUrl,r=e.logger,i=e.forceUpdateUI,a=e.dependencies,s=a===void 0?[]:a;return M.useEffect(function(){if(!n||!n.groupChannel){r.warning("ChannelSettings: SDK or GroupChannelModule is not available");return}var o=qr(),l=new Qo({onUserLeft:function(u,d){$n(u==null?void 0:u.url,t)&&(r.info("ChannelSettings: onUserLeft",{channel:u,user:d}),i())},onUserBanned:function(u,d){$n(u==null?void 0:u.url,t)&&u.isGroupChannel()&&(r.info("ChannelSettings: onUserBanned",{channel:u,user:d}),i())}});return n.groupChannel.addGroupChannelHandler(o,l),function(){n.groupChannel&&o&&(r.info("ChannelSettings: Removing message receiver handler",o),n.groupChannel.removeGroupChannelHandler(o))}},Ne([n,t,r],s,!0)),null},WC=M.createContext(null),nU={channelUrl:"",onCloseClick:void 0,onLeaveChannel:void 0,onChannelModified:void 0,onBeforeUpdateChannel:void 0,renderUserListItem:void 0,queries:{},overrideInviteUser:void 0,channel:null,loading:!1,invalidChannel:!1,forceUpdateUI:function(){},setChannelUpdateId:function(){}},GJ=function(){return dc(WC,function(e){return e},nU)},zJ=function(e){var n,t=e.channelUrl,r=e.onCloseClick,i=e.onLeaveChannel,a=e.onChannelModified,s=e.overrideInviteUser,o=e.onBeforeUpdateChannel,l=e.queries,u=e.renderUserListItem,d=yt().state,f=d.config,m=d.stores,p=GJ().updateState,E=f.logger,_=(n=m==null?void 0:m.sdkStore)!==null&&n!==void 0?n:{},b=_.sdk,C=_.initialized,y=M.useState(function(){return qr()}),T=y[0],N=y[1],w=M.useCallback(function(){return N(qr())},[]),O=[T];return BJ({channelUrl:t,sdk:b,logger:E,initialized:C,dependencies:O}),HJ({sdk:b,channelUrl:t,logger:E,forceUpdateUI:w,dependencies:O}),M.useEffect(function(){p({channelUrl:t,onCloseClick:r,onLeaveChannel:i,onChannelModified:a,onBeforeUpdateChannel:o,renderUserListItem:u,queries:l,overrideInviteUser:s,forceUpdateUI:w,setChannelUpdateId:N})},[t,r,i,a,o,u,l,s,w]),null},jJ=function(e){return cc(D(D({},nU),e))},VJ=function(e){var n=e.children,t=sa({channelUrl:e==null?void 0:e.channelUrl,onCloseClick:e==null?void 0:e.onCloseClick,onLeaveChannel:e==null?void 0:e.onLeaveChannel,onChannelModified:e==null?void 0:e.onChannelModified,onBeforeUpdateChannel:e==null?void 0:e.onBeforeUpdateChannel,renderUserListItem:e==null?void 0:e.renderUserListItem,queries:e==null?void 0:e.queries,overrideInviteUser:e==null?void 0:e.overrideInviteUser}),r=M.useRef(jJ(t));return v.createElement(WC.Provider,{value:r.current},n)},$J=function(e){var n=e.children,t=e.className;return v.createElement(VJ,D({},e),v.createElement(zJ,D({},e)),v.createElement(xd,D({},e),v.createElement("div",{className:zt("sendbird-channel-settings",t)},n)))},ki=function(){var e=M.useContext(WC);if(!e)throw new Error("useChannelSettings must be used within a ChannelSettingsProvider");var n=Ql.useSyncExternalStore(e.subscribe,e.getState),t=M.useMemo(function(){return{setChannel:function(r){return e.setState(function(i){return D(D({},i),{channel:r})})},setLoading:function(r){return e.setState(function(i){return D(D({},i),{loading:r})})},setInvalid:function(r){return e.setState(function(i){return D(D({},i),{invalidChannel:r})})}}},[e]);return{state:n,actions:t}},QC=function(e,n,t){return tn(void 0,void 0,void 0,function(){var r;return nn(this,function(i){switch(i.label){case 0:if(e.current)return t==null||t(new Error("Processing in progress")),[2];e.current=!0,i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,n()];case 2:return i.sent(),[3,5];case 3:return r=i.sent(),t==null||t(r),[3,5];case 4:return e.current=!1,[7];case 5:return[2]}})})},qJ=function(e,n){return e?e instanceof ql?e.isOperator(n):(n==null?void 0:n.role)===Zr.OPERATOR:!1},KJ=function(e,n){return e?n==null?void 0:n.isMuted:!1},WJ=function(e){var n=e.channel,t=e.user,r=e.onToggleOperatorState,i=e.isOperator,a=M.useState(i??qJ(n,t)),s=a[0],o=a[1],l=M.useRef(!1),u=M.useCallback(function(){return n?QC(l,function(){return tn(void 0,void 0,void 0,function(){var d,f;return nn(this,function(m){switch(m.label){case 0:return d=s?n.removeOperators([t.userId]):n.addOperators([t.userId]),[4,d];case 1:return m.sent(),f=!s,o(f),r==null||r({user:t,newStatus:f}),[2]}})})},function(d){r==null||r({user:t,newStatus:s,error:d})}):Promise.resolve()},[s,n.url,t.userId,r]);return{isOperator:s,toggleOperator:u}},QJ=function(e){var n=e.channel,t=e.user,r=e.onToggleMuteState,i=e.isMuted,a=M.useState(i??KJ(n,t)),s=a[0],o=a[1],l=M.useRef(!1),u=M.useCallback(function(){return n?QC(l,function(){return tn(void 0,void 0,void 0,function(){var d,f;return nn(this,function(m){switch(m.label){case 0:return d=s?n.unmuteUser(t):n.muteUser(t),[4,d];case 1:return m.sent(),f=!s,o(f),r==null||r({user:t,newStatus:f}),[2]}})})},function(d){r==null||r({user:t,newStatus:s,error:d})}):Promise.resolve()},[s,n.url,t.userId,r]);return{isMuted:s,toggleMute:u}},YJ=function(e){var n=e.channel,t=e.user,r=e.onToggleBanState,i=e.isBanned,a=M.useState(i??!1),s=a[0],o=a[1],l=M.useRef(!1),u=M.useCallback(function(){return n?QC(l,function(){return tn(void 0,void 0,void 0,function(){var d,f;return nn(this,function(m){switch(m.label){case 0:return d=s?n.unbanUser(t):n.banUser(t),[4,d];case 1:return m.sent(),f=!s,o(f),r==null||r({user:t,newStatus:f}),[2]}})})},function(d){r==null||r({user:t,newStatus:s,error:d})}):Promise.resolve()},[s,n.url,t.userId,r]);return{isBanned:s,toggleBan:u}},rU=M.createContext(void 0),XJ=function(e){var n=e.children,t=Rp(e,["children"]),r=yt().state.config,i=r.userId,a=t.channel,s=t.user,o=s.userId===i,l=function(){return a?a instanceof ql?a.isOperator(i):a.myRole===Zr.OPERATOR:!1}(),u=WJ(t),d=QJ(t),f=YJ(t);return v.createElement(rU.Provider,{value:D(D(D(D(D({},t),u),d),f),{isCurrentUser:o,isCurrentUserOperator:l})},n)},YC=function(){var e=M.useContext(rU);if(!e)throw new Error("useUserListItemMenuContext must be used within a UserListItemMenuProvider.");return e},ZJ=function(e){var n,t=Ut().stringSet,r=YC(),i=r.isOperator,a=r.toggleOperator,s=r.isCurrentUser,o=r.isCurrentUserOperator,l=r.hideMenu;return o?v.createElement(Ei,D({},e,{onClick:function(u){var d;(d=e==null?void 0:e.onClick)===null||d===void 0||d.call(e,u),a(),l()},disabled:s}),(n=e==null?void 0:e.children)!==null&&n!==void 0?n:i?t.CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR:t.CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR):v.createElement(v.Fragment,null)},JJ=function(e){var n,t=Ut().stringSet,r=YC(),i=r.isMuted,a=r.toggleMute,s=r.isCurrentUserOperator,o=r.hideMenu,l=r.channel;return!s||l!=null&&l.isBroadcast?v.createElement(v.Fragment,null):v.createElement(Ei,D({},e,{onClick:function(u){var d;(d=e==null?void 0:e.onClick)===null||d===void 0||d.call(e,u),a(),o()}}),(n=e==null?void 0:e.children)!==null&&n!==void 0?n:i?t.CHANNEL_SETTING__MODERATION__UNMUTE:t.CHANNEL_SETTING__MODERATION__MUTE)},eee=function(e){var n,t=Ut().stringSet,r=YC(),i=r.isBanned,a=r.toggleBan,s=r.isCurrentUserOperator,o=r.hideMenu;return s?v.createElement(Ei,D({},e,{onClick:function(l){var u;(u=e==null?void 0:e.onClick)===null||u===void 0||u.call(e,l),a(),o()}}),(n=e==null?void 0:e.children)!==null&&n!==void 0?n:i?t.CHANNEL_SETTING__MODERATION__UNBAN:t.CHANNEL_SETTING__MODERATION__BAN):v.createElement(v.Fragment,null)},tee=function(e){var n=e.toggleMenu,t=e.ref;return v.createElement(ga,{ref:t,className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:n},v.createElement(qe,{width:"24px",height:"24px",type:Se.MORE,fillColor:ze.CONTENT_INVERSE}))},nee=function(e){var n=e.items,t=n.OperatorToggleMenuItem,r=n.MuteToggleMenuItem,i=n.BanToggleMenuItem;return v.createElement(v.Fragment,null,v.createElement(t,null),v.createElement(r,null),v.createElement(i,null))},eu=function(e){var n=e.user,t=e.className,r=e.renderTrigger,i=r===void 0?tee:r,a=e.renderMenuItems,s=a===void 0?nee:a,o=M.useState(!1),l=o[0],u=o[1],d=M.useRef(null),f=M.useRef(null),m=yt().state.config,p=m.userId,E=function(){u(function(b){return!b})},_=function(){u(!1)};return n.userId===p?null:v.createElement("div",{className:zt("sendbird-user-list-item-menu",t),ref:d},v.createElement(XJ,D({},e,{hideMenu:_,toggleMenu:E}),i({ref:f,toggleMenu:E}),l&&v.createElement(Li,{parentRef:f,parentContainRef:d,closeDropdown:_},s({items:{OperatorToggleMenuItem:ZJ,MuteToggleMenuItem:JJ,BanToggleMenuItem:eee}}))))};function ree(e){var n=this,t=e.onCancel,r=e.renderUserListItem,i=r===void 0?function(_){return v.createElement(ds,D({},_))}:r,a=e.operatorListQueryParams,s=a===void 0?{}:a,o=M.useState([]),l=o[0],u=o[1],d=M.useState(null),f=d[0],m=d[1],p=ki().state.channel,E=M.useContext(On).stringSet;return M.useEffect(function(){var _=p==null?void 0:p.createOperatorListQuery(D({limit:20},s));_==null||_.next().then(function(b){u(b)}),m(_??null)},[]),v.createElement("div",null,v.createElement(wr,{isFullScreenOnMobile:!0,hideFooter:!0,titleText:E.CHANNEL_SETTING__OPERATORS__TITLE_ALL,onCancel:t},v.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:Zl({onReachedBottom:function(){return tn(n,void 0,void 0,function(){return nn(this,function(_){return f&&f.hasNext&&f.next().then(function(b){u(Ne(Ne([],l,!0),b,!0))}),[2]})})}})},l.map(function(_){return v.createElement(v.Fragment,{key:_.userId},i({user:_,channel:p,renderListItemMenu:function(b){return v.createElement(eu,D({},b,{isOperator:!0,onToggleOperatorState:function(C){var y=C.user;u(l.filter(function(T){var N=T.userId;return N!==y.userId}))},renderMenuItems:function(C){var y=C.items;return v.createElement(y.OperatorToggleMenuItem,null)}}))}}))}))))}function iee(e){var n=this,t=e.onCancel,r=e.onSubmit,i=e.renderUserListItem,a=i===void 0?function(y){return v.createElement(ds,D({},y))}:i,s=M.useState([]),o=s[0],l=s[1],u=M.useState({}),d=u[0],f=u[1],m=M.useState(null),p=m[0],E=m[1],_=M.useContext(On).stringSet,b=ki().state.channel;M.useEffect(function(){var y=b==null?void 0:b.createMemberListQuery({operatorFilter:Sf.NONOPERATOR,limit:20});y==null||y.next().then(function(T){l(T)}),E(y??null)},[]);var C=Object.keys(d).filter(function(y){return d[y]}).length;return v.createElement("div",null,v.createElement(wr,{isFullScreenOnMobile:!0,type:Vn.PRIMARY,submitText:_.CHANNEL_SETTING__OPERATORS__ADD_BUTTON,onCancel:t,onSubmit:function(){var y=Object.keys(d).filter(function(T){return d[T]});b==null||b.addOperators(y).then(function(){r(y)})},titleText:_.CHANNEL_SETTING__MEMBERS__SELECT_TITLE},v.createElement(Me,{color:C>0?de.PRIMARY:de.ONBACKGROUND_3,type:be.CAPTION_1},"".concat(C," ").concat(_.MODAL__INVITE_MEMBER__SELECTED)),v.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:Zl({onReachedBottom:function(){return tn(n,void 0,void 0,function(){var y;return nn(this,function(T){return y=p.hasNext,y&&p.next().then(function(N){l(Ne(Ne([],o,!0),N,!0))}),[2]})})}})},o.map(function(y){return v.createElement(v.Fragment,{key:y.userId},a({user:y,checkBox:!0,checked:d[y.userId],disabled:(y==null?void 0:y.role)==="operator",onChange:function(T){var N,w=D(D({},d),(N={},N[T.target.id]=T.target.checked,N));T.target.checked||delete w[T.target.id],f(w)}}))}))))}var aee=function(e){var n=e.renderUserListItem,t=n===void 0?function(N){return v.createElement(ds,D({},N))}:n,r=e.operatorListQueryParams,i=r===void 0?{}:r,a=M.useState([]),s=a[0],o=a[1],l=M.useState(!1),u=l[0],d=l[1],f=M.useState(!1),m=f[0],p=f[1],E=M.useState(!1),_=E[0],b=E[1],C=Ut().stringSet,y=ki().state.channel,T=M.useCallback(function(){if(!y){o([]);return}var N=y==null?void 0:y.createOperatorListQuery(D({limit:10},i));N.next().then(function(w){o(w),b(N.hasNext)})},[y==null?void 0:y.url,y==null?void 0:y.createOperatorListQuery]);return M.useEffect(T,[y==null?void 0:y.url]),v.createElement(v.Fragment,null,s.map(function(N){return v.createElement(v.Fragment,{key:N.userId},t({user:N,channel:y,size:"small",avatarSize:"24px",renderListItemMenu:function(w){return v.createElement(eu,D({},w,{isOperator:!0,onToggleOperatorState:function(){setTimeout(function(){T()},500)},renderMenuItems:function(O){var L=O.items;return v.createElement(L.OperatorToggleMenuItem,null)}}))}}))}),v.createElement("div",{className:"sendbird-channel-settings-accordion__footer"},v.createElement(Ri,{type:Vn.SECONDARY,size:_a.SMALL,onClick:function(){p(!0)}},C.CHANNEL_SETTING__OPERATORS__TITLE_ADD),_&&v.createElement(Ri,{type:Vn.SECONDARY,size:_a.SMALL,onClick:function(){d(!0)}},C.CHANNEL_SETTING__OPERATORS__TITLE_ALL)),u&&v.createElement(ree,{onCancel:function(){d(!1),T()},renderUserListItem:t,operatorListQueryParams:i}),m&&v.createElement(iee,{onCancel:function(){return p(!1)},onSubmit:function(){setTimeout(function(){T()},500),p(!1)},renderUserListItem:t}))};function see(e){var n=this,t=e.onCancel,r=e.renderUserListItem,i=r===void 0?function(_){return v.createElement(ds,D({},_))}:r,a=e.bannedUserListQueryParams,s=a===void 0?{}:a,o=M.useState([]),l=o[0],u=o[1],d=M.useState(null),f=d[0],m=d[1],p=ki().state.channel,E=Ut().stringSet;return M.useEffect(function(){var _=p==null?void 0:p.createBannedUserListQuery(D({limit:20},s));_&&(_.next().then(function(b){u(b)}),m(_))},[]),v.createElement("div",null,v.createElement(wr,{isFullScreenOnMobile:!0,hideFooter:!0,onCancel:function(){return t()},onSubmit:_n,titleText:E.CHANNEL_SETTING__BANNED_MEMBERS__TITLE},v.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:Zl({onReachedBottom:function(){return tn(n,void 0,void 0,function(){var _;return nn(this,function(b){return f?(_=f.hasNext,_&&f.next().then(function(C){u(Ne(Ne([],l,!0),C,!0))}),[2]):[2]})})}})},l.map(function(_){return i({user:_,channel:p,renderListItemMenu:function(b){return v.createElement(eu,D({},b,{isBanned:!0,onToggleBanState:function(){u(l.filter(function(C){return C.userId!==_.userId}))},renderMenuItems:function(C){var y=C.items;return v.createElement(y.BanToggleMenuItem,null)}}))}})}))))}var oee=function(e){var n=e.renderUserListItem,t=n===void 0?function(C){return v.createElement(ds,D({},C))}:n,r=e.bannedUserListQueryParams,i=r===void 0?{}:r,a=M.useState([]),s=a[0],o=a[1],l=M.useState(!1),u=l[0],d=l[1],f=M.useState(!1),m=f[0],p=f[1],E=M.useContext(On).stringSet,_=ki().state.channel,b=M.useCallback(function(){if(!_){o([]);return}var C=_==null?void 0:_.createBannedUserListQuery(D({limit:10},i));C.next().then(function(y){o(y),d(C.hasNext)})},[_==null?void 0:_.url,_==null?void 0:_.createBannedUserListQuery]);return M.useEffect(b,[_==null?void 0:_.url]),v.createElement(v.Fragment,null,s.map(function(C){return v.createElement(v.Fragment,{key:C.userId},t({user:C,channel:_,size:"small",avatarSize:"24px",renderListItemMenu:function(y){return v.createElement(eu,D({},y,{isBanned:!0,onToggleBanState:function(){return b()},renderMenuItems:function(T){var N=T.items;return v.createElement(N.BanToggleMenuItem,null)}}))}}))}),s&&s.length===0&&v.createElement(Me,{className:"sendbird-channel-settings__empty-list",type:be.SUBTITLE_2,color:de.ONBACKGROUND_3},E.CHANNEL_SETTING__MODERATION__EMPTY_BAN),u&&v.createElement("div",{className:"sendbird-channel-settings-accordion__footer"},v.createElement(Ri,{type:Vn.SECONDARY,size:_a.SMALL,onClick:function(){p(!0)}},E.CHANNEL_SETTING__MODERATION__ALL_BAN)),m&&v.createElement(see,{onCancel:function(){p(!1),b()},renderUserListItem:t,bannedUserListQueryParams:i}))};function lee(e){var n=this,t=e.onCancel,r=e.renderUserListItem,i=r===void 0?function(_){return v.createElement(ds,D({},_))}:r,a=e.memberListQueryParams,s=a===void 0?{}:a,o=M.useState([]),l=o[0],u=o[1],d=M.useState(null),f=d[0],m=d[1],p=ki().state.channel,E=Ut().stringSet;return M.useEffect(function(){var _=p==null?void 0:p.createMemberListQuery(D(D({limit:20},s),{mutedMemberFilter:"muted"}));_==null||_.next().then(function(b){u(b)}),m(_??null)},[]),v.createElement("div",null,v.createElement(wr,{isFullScreenOnMobile:!0,hideFooter:!0,onCancel:function(){return t()},onSubmit:_n,titleText:E.CHANNEL_SETTING__MUTED_MEMBERS__TITLE},v.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:Zl({onReachedBottom:function(){return tn(n,void 0,void 0,function(){var _;return nn(this,function(b){return _=f.hasNext,_&&f.next().then(function(C){u(Ne(Ne([],l,!0),C,!0))}),[2]})})}})},l.map(function(_){return v.createElement(v.Fragment,{key:_.userId},i({user:_,channel:p,renderListItemMenu:function(b){return v.createElement(eu,D({},b,{onToggleMuteState:function(){u(l.filter(function(C){return C.userId!==_.userId}))},renderMenuItems:function(C){var y=C.items;return v.createElement(y.MuteToggleMenuItem,null)}}))}}))}))))}var uee=function(e){var n=e.renderUserListItem,t=n===void 0?function(C){return v.createElement(ds,D({},C))}:n,r=e.memberListQueryParams,i=r===void 0?{}:r,a=M.useState([]),s=a[0],o=a[1],l=M.useState(!1),u=l[0],d=l[1],f=M.useState(!1),m=f[0],p=f[1],E=Ut().stringSet,_=ki().state.channel,b=M.useCallback(function(){if(!_){o([]);return}var C=_==null?void 0:_.createMemberListQuery(D(D({limit:10},i),{mutedMemberFilter:"muted"}));C.next().then(function(y){o(y),d(C.hasNext)})},[_==null?void 0:_.url,_==null?void 0:_.createMemberListQuery]);return M.useEffect(b,[_==null?void 0:_.url]),v.createElement(v.Fragment,null,s.map(function(C){return v.createElement(v.Fragment,{key:C.userId},t({user:C,channel:_,size:"small",avatarSize:"24px",renderListItemMenu:function(y){return v.createElement(eu,D({},y,{onToggleMuteState:function(){setTimeout(function(){b()},500)},renderMenuItems:function(T){var N=T.items;return v.createElement(N.MuteToggleMenuItem,null)}}))}}))}),s&&s.length===0&&v.createElement(Me,{className:"sendbird-channel-settings__empty-list",type:be.SUBTITLE_2,color:de.ONBACKGROUND_3},E.CHANNEL_SETTING__NO_UNMUTED),u&&v.createElement("div",{className:"sendbird-channel-settings-accordion__footer"},v.createElement(Ri,{type:Vn.SECONDARY,size:_a.SMALL,onClick:function(){p(!0)}},E.CHANNEL_SETTING__MUTED_MEMBERS__TITLE_ALL)),m&&v.createElement(lee,{onCancel:function(){p(!1),b()},renderUserListItem:t,memberListQueryParams:i}))};function cee(e){var n=this,t=e.onCancel,r=e.renderUserListItem,i=r===void 0?function(_){return v.createElement(ds,D({},_))}:r,a=e.memberListQueryParams,s=a===void 0?{}:a,o=M.useState([]),l=o[0],u=o[1],d=M.useState(null),f=d[0],m=d[1],p=ki().state.channel,E=M.useContext(On).stringSet;return M.useEffect(function(){var _=p==null?void 0:p.createMemberListQuery(D({limit:20},s));_==null||_.next().then(function(b){u(b)}),m(_??null)},[]),v.createElement("div",null,v.createElement(wr,{isFullScreenOnMobile:!0,hideFooter:!0,onCancel:function(){return t()},onSubmit:_n,titleText:E.CHANNEL_SETTING__MEMBERS__SEE_ALL_MEMBERS},v.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:Zl({onReachedBottom:function(){return tn(n,void 0,void 0,function(){return nn(this,function(_){return f&&f.hasNext&&f.next().then(function(b){u(Ne(Ne([],l,!0),b,!0))}),[2]})})}})},l.map(function(_,b){return v.createElement(v.Fragment,{key:_.userId},i({index:b,user:_,channel:p,renderListItemMenu:function(C){return v.createElement(eu,D({},C,{onToggleOperatorState:function(y){for(var T=y.newStatus,N=Ne([],l,!0),w=0,O=N;w<O.length;w++){var L=O[w];if(L.userId===_.userId){L.role=T?Zr.OPERATOR:Zr.NONE;break}}u(N)},onToggleMuteState:function(y){for(var T=y.newStatus,N=Ne([],l,!0),w=0,O=N;w<O.length;w++){var L=O[w];if(L.userId===_.userId){L.isMuted=T;break}}u(N)},onToggleBanState:function(){u(l.filter(function(y){var T=y.userId;return T!==_.userId}))}}))}}))}))))}function dee(e){var n=this,t,r,i,a=e.onCancel,s=e.onSubmit,o=e.renderUserListItem,l=o===void 0?function(j){return v.createElement(ds,D({},j))}:o,u=M.useState([]),d=u[0],f=u[1],m=M.useState(null),p=m[0],E=m[1],_=M.useState({}),b=_[0],C=_[1],y=yt().state,T=(r=(t=y==null?void 0:y.stores)===null||t===void 0?void 0:t.sdkStore)===null||r===void 0?void 0:r.sdk,N=(i=y==null?void 0:y.config)===null||i===void 0?void 0:i.userListQuery,w=ki().state,O=w.channel,L=w.overrideInviteUser,P=w.queries,U=Ut().stringSet,B=Zl({onReachedBottom:function(){return tn(this,void 0,void 0,function(){var j;return nn(this,function(x){switch(x.label){case 0:return p!=null&&p.hasNext?[4,p.next()]:[3,2];case 1:j=x.sent(),f(function(V){return Ne(Ne([],V,!0),j,!0)}),x.label=2;case 2:return[2]}})})}}),F=function(){return tn(n,void 0,void 0,function(){var j;return nn(this,function(x){switch(x.label){case 0:return j=Object.keys(b),O&&typeof L=="function"?(L({users:j,onClose:a,channel:O}),[3,3]):[3,1];case 1:return[4,O==null?void 0:O.inviteWithUserIds(j)];case 2:x.sent(),s(j),x.label=3;case 3:return[2]}})})},H=function(j){C(function(x){var V=Rp(x,[]);return V[j.userId]?delete V[j.userId]:V[j.userId]=j,V})},G=M.useMemo(function(){var j,x,V;return O!=null&&O.isSuper||O!=null&&O.isBroadcast?(j={},j[(V=(x=T.currentUser)===null||x===void 0?void 0:x.userId)!==null&&V!==void 0?V:""]=T.currentUser,j):O==null?void 0:O.members.reduce(function(K,W){return K[W.userId]=W,K},{})},[O==null?void 0:O.members.length]);return M.useEffect(function(){var j=function(){return tn(n,void 0,void 0,function(){var x,V,K;return nn(this,function(W){switch(W.label){case 0:return x=(K=N==null?void 0:N())!==null&&K!==void 0?K:T==null?void 0:T.createApplicationUserListQuery(P==null?void 0:P.applicationUserListQuery),x?[4,x.next()]:[3,2];case 1:V=W.sent(),E(x),f(V),W.label=2;case 2:return[2]}})})};j()},[T]),v.createElement("div",null,v.createElement(wr,{isFullScreenOnMobile:!0,disabled:Object.keys(b).length===0,submitText:U.BUTTON__INVITE,type:Vn.PRIMARY,onCancel:function(){return a()},onSubmit:F,titleText:U.CHANNEL_SETTING__MEMBERS__SELECT_TITLE},v.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:B},v.createElement("div",{className:"sendbird-more-members__popup-scroll__inner"},d.map(function(j){var x=!!(G&&G[j.userId]),V=!!b[j.userId];return v.createElement(v.Fragment,{key:j.userId},l({user:j,checkBox:!0,checked:x||V,disabled:x,onChange:function(){return H(j)}}))})))))}var Pw=function(e){var n=e.renderUserListItem,t=n===void 0?function(L){return v.createElement(ds,D({},L))}:n,r=e.memberListQueryParams,i=r===void 0?{}:r,a=M.useState([]),s=a[0],o=a[1],l=M.useState(!1),u=l[0],d=l[1],f=M.useState(!1),m=f[0],p=f[1],E=M.useState(!1),_=E[0],b=E[1],C=ki().state,y=C.channel,T=C.forceUpdateUI,N=M.useContext(On).stringSet,w=y.myRole===Zr.OPERATOR,O=M.useCallback(function(){if(!y){o([]);return}var L=y==null?void 0:y.createMemberListQuery(D({limit:10},i));L.next().then(function(P){o(P),d(L.hasNext)})},[y==null?void 0:y.url,y==null?void 0:y.createMemberListQuery]);return M.useEffect(O,[y==null?void 0:y.url]),v.createElement("div",{className:"sendbird-channel-settings-member-list"},s.map(function(L,P){return v.createElement(v.Fragment,{key:L.userId},t({index:P,user:L,channel:y,size:"small",avatarSize:"24px",renderListItemMenu:w?function(U){return v.createElement(eu,D({},U,{onToggleOperatorState:function(B){for(var F=B.newStatus,H=Ne([],s,!0),G=0,j=H;G<j.length;G++){var x=j[G];if(x.userId===L.userId){x.role=F?Zr.OPERATOR:Zr.NONE;break}}o(H)},onToggleMuteState:function(B){for(var F=B.newStatus,H=Ne([],s,!0),G=0,j=H;G<j.length;G++){var x=j[G];if(x.userId===L.userId){x.isMuted=F;break}}o(H)},onToggleBanState:function(){o(s.filter(function(B){var F=B.userId;return F!==L.userId}))}}))}:function(){return v.createElement(v.Fragment,null)}}))}),v.createElement("div",{className:"sendbird-channel-settings-accordion__footer"},u&&v.createElement(Ri,{type:Vn.SECONDARY,size:_a.SMALL,onClick:function(){return p(!0)}},N.CHANNEL_SETTING__MEMBERS__SEE_ALL_MEMBERS),v.createElement(Ri,{type:Vn.SECONDARY,size:_a.SMALL,onClick:function(){return b(!0)}},N.CHANNEL_SETTING__MEMBERS__INVITE_MEMBER)),m&&v.createElement(cee,{onCancel:function(){p(!1),O(),T()},renderUserListItem:t,memberListQueryParams:i}),_&&v.createElement(dee,{onCancel:function(){return b(!1)},onSubmit:function(){b(!1),O(),T()},renderUserListItem:t}))},X_=function(){},Iu={checked:null,defaultChecked:!1,disabled:!1,onChange:X_,onFocus:X_,onBlur:X_},iU=v.createContext(Iu);function hee(){var e=v.useContext(iU);if(e===void 0)throw new Error("@sendbird/uikit-react/ui/Toggle: useToggleContext must be used within a ToggleContainer.");return e}function fee(e){var n=e.checked,t=n===void 0?Iu.checked:n,r=e.defaultChecked,i=r===void 0?Iu.defaultChecked:r,a=e.disabled,s=a===void 0?Iu.disabled:a,o=e.onChange,l=o===void 0?Iu.onChange:o,u=e.onFocus,d=u===void 0?Iu.onFocus:u,f=e.onBlur,m=f===void 0?Iu.onBlur:f,p=e.children,E=M.useState(i||!1),_=E[0],b=E[1],C=M.useCallback(function(y){s||(t===null&&b(y.currentTarget.checked),l(y))},[l,t]);return v.createElement(iU.Provider,{value:{checked:t!==null?t:_,disabled:s,onChange:C,onFocus:function(y){s||d(y)},onBlur:function(y){s||m(y)}}},p)}function vee(e){if(typeof e!="string"&&typeof e!="number"){try{var n=yt().state.config.logger;n.warning("@sendbird/uikit-react/ui/Toggle: TypeError - expected string or number.",e)}catch{}return[]}if(typeof e=="number")return[e];var t=/(-?\d+)(\.\d+)?/g,r=e.match(t)||[];return r.map(parseFloat)}function mee(e){var n,t=e.reversed,r=t===void 0?!1:t,i=e.width,a=i===void 0?"40px":i,s=e.animationDuration,o=s===void 0?"0.5s":s,l=e.style,u=l===void 0?{}:l,d=e.name,f=d===void 0?"":d,m=e.id,p=m===void 0?"":m,E=e.ariaLabel,_=E===void 0?"":E,b=e.ariaLabelledby,C=b===void 0?"":b,y=hee(),T=y.checked,N=y.disabled,w=y.onChange,O=y.onFocus,L=y.onBlur,P=M.useState(""),U=P[0],B=P[1],F=(n=vee(a))===null||n===void 0?void 0:n[0],H=F/2,G=H*.6;return v.createElement("label",{className:["sendbird-input-toggle-button",U,T?"sendbird-input-toggle-button--checked":"sendbird-input-toggle-button--unchecked",N?"sendbird-input-toggle-button--disabled":[],r?"sendbird-input-toggle-button--reversed":[]].flat().join(" "),"data-testid":"sendbird-input-toggle-button",style:D({width:"".concat(F,"px"),height:"".concat(H,"px"),borderRadius:"".concat(G,"px")},u)},v.createElement("div",{className:["sendbird-input-toggle-button__inner-dot",T?"sendbird-input-toggle-button__inner-dot--activate":"sendbird-input-toggle-button__inner-dot--inactivate"].join(" "),style:{width:"".concat(G,"px"),height:"".concat(G,"px"),animationDuration:o}}),v.createElement("input",{type:"checkbox","aria-label":_,"aria-labelledby":C,name:f,id:p,checked:T??void 0,disabled:N,onChange:function(j){w==null||w(j),B(j.currentTarget.checked?"sendbird-input-toggle-button--turned-on":"sendbird-input-toggle-button--turned-off")},onFocus:O,onBlur:L}))}function pee(e){var n=e.checked,t=e.defaultChecked,r=e.disabled,i=e.onChange,a=e.onFocus,s=e.onBlur,o=e.className,l=e.reversed,u=e.width,d=e.animationDuration,f=e.style,m=e.name,p=e.id,E=e.ariaLabel,_=e.ariaLabelledby;return v.createElement("div",{className:"sendbird-ui-toggle ".concat(o)},v.createElement(fee,{checked:n,defaultChecked:t,disabled:r,onChange:i,onFocus:a,onBlur:s},v.createElement(mee,{reversed:l,width:u,animationDuration:d,style:f,name:m,id:p,ariaLabel:E,ariaLabelledby:_})))}var aU=function(e){var n=e.renderLeft,t=e.renderMiddle,r=e.renderRight,i=r===void 0?function(m){return v.createElement(ub,D({},m))}:r,a=e.renderAccordion,s=e.className,o=e.onClick,l=e.onKeyDown,u=e.accordionOpened,d=e.setAccordionOpened,f=typeof a=="function";return v.createElement(v.Fragment,null,v.createElement("div",{className:zt("sendbird-channel-settings__panel-item",s),onClick:function(m){o==null||o(m),f&&d(!u)},onKeyDown:function(m){l==null||l(m),f&&d(!u)}},n(),t(),i({useAccordion:f,accordionOpened:u})),u&&(a==null?void 0:a()))},ub=function(e){var n=e.useAccordion,t=e.accordionOpened,r=e.children;return n?v.createElement(qe,{type:Se.CHEVRON_RIGHT,className:["sendbird-accordion__panel-icon-right","sendbird-accordion__panel-icon--chevron",t?"sendbird-accordion__panel-icon--open":""].join(" "),height:"24px",width:"24px"}):r||null},xw=function(e){return Math.abs(e)>999?"".concat((Math.abs(e)/1e3).toFixed(1),"K"):e},nd={fillColor:ze.PRIMARY,width:24,height:24,className:"sendbird-channel-settings__accordion-icon"},rd={type:be.SUBTITLE_1,color:de.ONBACKGROUND_1},gee=function(){var e=M.useState(!1),n=e[0],t=e[1],r=M.useContext(On).stringSet,i=ki().state,a=i.channel,s=i.renderUserListItem;return M.useEffect(function(){var o;t((o=a==null?void 0:a.isFrozen)!==null&&o!==void 0?o:!1)},[a==null?void 0:a.isFrozen]),M.useMemo(function(){return{operator:{operators:{icon:D(D({},nd),{type:Se.OPERATOR}),label:D(D({},rd),{children:r.CHANNEL_SETTING__OPERATORS__TITLE}),accordionComponent:function(){return v.createElement(aee,{renderUserListItem:s})}},allUsers:{icon:D(D({},nd),{type:Se.MEMBERS}),label:D(D({},rd),{children:r.CHANNEL_SETTING__MEMBERS__TITLE}),rightComponent:function(o){return v.createElement("div",{className:"sendbird-channel-settings__members"},v.createElement(ob,{count:a!=null&&a.memberCount?xw(a.memberCount):""}),v.createElement(ub,D({},o)))},accordionComponent:function(){return v.createElement(Pw,{renderUserListItem:s})}},mutedUsers:{icon:D(D({},nd),{type:Se.MUTE}),label:D(D({},rd),{children:r.CHANNEL_SETTING__MUTED_MEMBERS__TITLE}),accordionComponent:function(){return v.createElement(uee,{renderUserListItem:s})}},bannedUsers:{icon:D(D({},nd),{type:Se.BAN}),label:D(D({},rd),{children:r.CHANNEL_SETTING__BANNED_MEMBERS__TITLE}),accordionComponent:function(){return v.createElement(oee,{renderUserListItem:s})}},freezeChannel:{hideMenu:a==null?void 0:a.isBroadcast,icon:D(D({},nd),{type:Se.FREEZE}),label:D(D({},rd),{children:r.CHANNEL_SETTING__FREEZE_CHANNEL}),rightComponent:function(){return v.createElement(pee,{className:"sendbird-channel-settings__frozen-icon",checked:n,onChange:function(){n?a==null||a.unfreeze().then(function(){t(function(o){return!o})}):a==null||a.freeze().then(function(){t(function(o){return!o})})}})}}},nonOperator:{allUsers:{icon:D(D({},nd),{type:Se.MEMBERS}),label:D(D({},rd),{children:r.CHANNEL_SETTING__MEMBERS__TITLE}),rightComponent:function(o){return v.createElement("div",{className:"sendbird-channel-settings__members"},v.createElement(ob,{count:a!=null&&a.memberCount?xw(a.memberCount):""}),v.createElement(ub,D({},o)))},accordionComponent:function(){return v.createElement(Pw,{renderUserListItem:s})}}}}},[a==null?void 0:a.url,n])};function _ee(e,n){var t=e.channelUrl,r=e.sdkInit,i=n.sdk,a=n.logger,s=Wf().actions,o=s.setCurrentChannel,l=s.setChannelInvalid;M.useEffect(function(){t&&r&&(i!=null&&i.groupChannel)&&i.groupChannel.getChannel(t).then(function(u){a.info("MessageSearch | useSetChannel group channel",u),o(u)}).catch(function(){l()})},[t,r])}var cb;(function(e){e.SCORE="score",e.TIMESTAMP="ts"})(cb||(cb={}));function Eee(e,n){var t=e.currentChannel,r=e.channelUrl,i=e.requestString,a=e.messageSearchQuery,s=e.onResultLoaded,o=n.sdk,l=n.logger,u=Wf(),d=u.state.retryCount,f=u.actions,m=f.startMessageSearch,p=f.getSearchedMessages,E=f.setQueryInvalid,_=f.startGettingSearchedMessages,b=M.useCallback(function(C){l.warning("MessageSearch | useGetSearchedMessages: failed getting search messages.",C),E(),s&&typeof s=="function"&&s(void 0,C)},[l,E,s]);M.useEffect(function(){m(),o&&r&&o.createMessageSearchQuery&&t&&i?t.refresh().then(function(C){var y=D({order:cb.TIMESTAMP,channelUrl:r,messageTimestampFrom:C.invitedAt,keyword:i},a),T=o.createMessageSearchQuery(y);_(T),T.next().then(function(N){l.info("MessageSearch | useGetSearchedMessages: succeeded getting messages",N),p(N,T),s&&typeof s=="function"&&s(N,void 0)}).catch(b)}).catch(function(C){l.warning("MessageSearch | useGetSearchedMessages: failed getting channel.",C),b(C)}):i||l.info("MessageSearch | useGetSearchedMessages: search string is empty")},[r,a,i,t,d])}function yee(e,n){var t=e.onResultLoaded,r=n.logger,i=Wf(),a=i.state,s=a.currentMessageSearchQuery,o=a.hasMoreResult,l=i.actions.getNextSearchedMessages;return M.useCallback(function(u){o||r.warning("MessageSearch | useScrollCallback: no more searched results",o),s&&s.hasNext?s.next().then(function(d){r.info("MessageSearch | useScrollCallback: succeeded getting searched messages",d),l(d),u(d,null),t&&typeof t=="function"&&t(d,null)}).catch(function(d){r.warning("MessageSearch | useScrollCallback: failed getting searched messages",d),u(null,d),t&&typeof t=="function"&&t(null,d)}):r.warning("MessageSearch | useScrollCallback: no currentMessageSearchQuery")},[s,o])}var bee=500;function Cee(e){var n=e.searchString,t=M.useState(""),r=t[0],i=t[1],a=M.useState(null),s=a[0],o=a[1],l=Wf().actions.resetSearchString,u=M.useCallback(function(){n?i(n):(i(""),l())},[n,l]);return M.useEffect(function(){s&&clearTimeout(s);var d=setTimeout(u,bee);return o(d),function(){d&&clearTimeout(d)}},[n,u]),r}var sU={channelUrl:"",allMessages:[],loading:!1,isInvalid:!1,initialized:!1,currentChannel:null,currentMessageSearchQuery:null,messageSearchQuery:null,hasMoreResult:!1,retryCount:0,selectedMessageId:null,searchString:"",requestString:""},XC=M.createContext(null),See=function(e){var n,t,r=e.channelUrl,i=e.searchString,a=e.messageSearchQuery,s=e.onResultLoaded,o=e.onResultClick,l=Iee(),u=l.state,d=l.updateState,f=yt().state,m=f.config,p=f.stores,E=(n=p==null?void 0:p.sdkStore)===null||n===void 0?void 0:n.sdk,_=(t=p==null?void 0:p.sdkStore)===null||t===void 0?void 0:t.initialized,b=m.logger,C=M.useRef(null);_ee({channelUrl:r,sdkInit:_},{sdk:E,logger:b});var y=M.useMemo(function(){var O;return(O=i??(a==null?void 0:a.keyword))!==null&&O!==void 0?O:""},[i,a==null?void 0:a.keyword]),T=Cee({searchString:y});Eee({currentChannel:u.currentChannel,channelUrl:r,requestString:T,messageSearchQuery:a,onResultLoaded:s},{sdk:E,logger:b});var N=yee({onResultLoaded:s},{logger:b}),w=M.useCallback(function(O){var L=O.target,P=L.scrollTop,U=L.scrollHeight,B=L.clientHeight;u.hasMoreResult&&P+B>=U&&N(function(){})},[u.hasMoreResult,N]);return M.useEffect(function(){d({channelUrl:r,searchString:y,messageSearchQuery:a,onResultClick:o,onScroll:N,handleOnScroll:w,scrollRef:C,requestString:T})},[r,i,a,o,d,T]),null},Tee=function(e){return cc(D(D({},sU),e))},Mee=function(e){var n=e.children,t=sa({channelUrl:e==null?void 0:e.channelUrl,messageSearchQuery:e==null?void 0:e.messageSearchQuery,searchString:e==null?void 0:e.searchString,onResultLoaded:e==null?void 0:e.onResultLoaded,onResultClick:e==null?void 0:e.onResultClick}),r=M.useRef(Tee(t));return v.createElement(XC.Provider,{value:r.current},n)},Nee=function(e){var n=e.children,t=e.channelUrl,r=e.searchString,i=e.messageSearchQuery,a=e.onResultLoaded,s=e.onResultClick;return v.createElement(Mee,D({},e),v.createElement(See,{channelUrl:t,searchString:r,messageSearchQuery:i,onResultLoaded:a,onResultClick:s}),n)},Iee=function(){return dc(XC,function(e){return e},sU)},Wf=function(){var e=M.useContext(XC);if(!e)throw new Error("useMessageSearch must be used within a MessageSearchProvider");var n=Ql.useSyncExternalStore(e.subscribe,e.getState),t=M.useMemo(function(){return{setCurrentChannel:function(r){return e.setState(function(i){return D(D({},i),{currentChannel:r,initialized:!0})})},setChannelInvalid:function(){return e.setState(function(r){return D(D({},r),{currentChannel:null,initialized:!1})})},getSearchedMessages:function(r,i){e.setState(function(a){var s;return i&&i.channelUrl===((s=a.currentMessageSearchQuery)===null||s===void 0?void 0:s.channelUrl)&&i.key===a.currentMessageSearchQuery.key?D(D({},a),{loading:!1,isInvalid:!1,allMessages:r,hasMoreResult:a.currentMessageSearchQuery.hasNext}):a})},setQueryInvalid:function(){return e.setState(function(r){return D(D({},r),{isInvalid:!0})})},startMessageSearch:function(){return e.setState(function(r){return D(D({},r),{isInvalid:!1,loading:!1})})},startGettingSearchedMessages:function(r){return e.setState(function(i){return D(D({},i),{loading:!0,currentMessageSearchQuery:r})})},getNextSearchedMessages:function(r){return e.setState(function(i){var a;return D(D({},i),{allMessages:Ne(Ne([],i.allMessages,!0),r,!0),hasMoreResult:((a=i.currentMessageSearchQuery)===null||a===void 0?void 0:a.hasNext)||!1})})},resetSearchString:function(){return e.setState(function(r){return D(D({},r),{allMessages:[]})})},setSelectedMessageId:function(r){return e.setState(function(i){return D(D({},i),{selectedMessageId:r})})},handleRetryToConnect:function(){return e.setState(function(r){return D(D({},r),{retryCount:r.retryCount+1})})},setRetryCount:function(){return e.setState(function(r){return D(D({},r),{retryCount:r.retryCount+1})})}}},[e]);return{state:n,actions:t}},kl;(function(e){e.NIL="NIL",e.LOADING="LOADING",e.INVALID="INVALID",e.INITIALIZED="INITIALIZED"})(kl||(kl={}));var Gi;(function(e){e.NIL="NIL",e.LOADING="LOADING",e.INVALID="INVALID",e.INITIALIZED="INITIALIZED"})(Gi||(Gi={}));var Ii;(function(e){e.NIL="NIL",e.LOADING="LOADING",e.INVALID="INVALID",e.INITIALIZED="INITIALIZED"})(Ii||(Ii={}));var db=30,hb=30;function Aee(e,n){var t=e.currentChannel,r=n.logger;return M.useCallback(function(i,a,s){var o,l;if(s){(o=t==null?void 0:t.deleteReaction)===null||o===void 0||o.call(t,i,a).then(function(u){r.info("Thread | useToggleReactionsCallback: Delete reaction succeeded.",u)}).catch(function(u){r.warning("Thread | useToggleReactionsCallback: Delete reaction failed.",u)});return}(l=t==null?void 0:t.addReaction)===null||l===void 0||l.call(t,i,a).then(function(u){r.info("Thread | useToggleReactionsCallback: Add reaction succeeded.",u)}).catch(function(u){r.warning("Thread | useToggleReactionsCallback: Add reaction failed.",u)})},[t])}function wee(e,n){var t=e.isMentionEnabled,r=e.currentChannel,i=e.onBeforeSendUserMessage,a=e.sendMessageStart,s=e.sendMessageFailure,o=n.logger,l=n.pubSub,u=M.useCallback(function(d){var f,m=d.message,p=d.quoteMessage,E=d.mentionTemplate,_=d.mentionedUsers,b=function(){var y={};y.message=m;var T=(_==null?void 0:_.length)||0;return t&&T&&(y.mentionedUsers=_),t&&E&&T&&(y.mentionedMessageTemplate=E),p&&(y.isReplyToChannel=!0,y.parentMessageId=p.messageId),y},C=(f=i==null?void 0:i(m,p))!==null&&f!==void 0?f:b();o.info("Thread | useSendUserMessageCallback: Sending user message start.",C),r!=null&&r.sendUserMessage&&(r==null||r.sendUserMessage(C).onPending(function(y){a(y)}).onFailed(function(y,T){o.info("Thread | useSendUserMessageCallback: Sending user message failed.",{message:T,error:y}),s(T)}).onSucceeded(function(y){o.info("Thread | useSendUserMessageCallback: Sending user message succeeded.",y),l.publish(Hn.SEND_USER_MESSAGE,{channel:r,message:y,publishingModules:[Jr.THREAD]})}))},[t,r]);return u}function Ree(e,n){var t=e.currentChannel,r=e.onBeforeSendFileMessage,i=e.sendMessageStart,a=e.sendMessageFailure,s=n.logger,o=n.pubSub;return M.useCallback(function(l,u){return new Promise(function(d,f){var m,p=function(){var _={};return _.file=l,u&&(_.isReplyToChannel=!0,_.parentMessageId=u.messageId),_},E=(m=r==null?void 0:r(l,u))!==null&&m!==void 0?m:p();s.info("Thread | useSendFileMessageCallback: Sending file message start.",E),t==null?(s.warning("Thread | useSendFileMessageCallback: currentChannel is null. Skipping file message send."),d(null)):t.sendFileMessage(E).onPending(function(_){i(D(D({},_),{url:URL.createObjectURL(l),sendingStatus:gn.PENDING,isUserMessage:_.isUserMessage,isFileMessage:_.isFileMessage,isAdminMessage:_.isAdminMessage,isMultipleFilesMessage:_.isMultipleFilesMessage})),setTimeout(function(){return Oa()},$l)}).onFailed(function(_,b){b.localUrl=URL.createObjectURL(l),b.file=l,s.info("Thread | useSendFileMessageCallback: Sending file message failed.",{message:b,error:_}),a(b),f(_)}).onSucceeded(function(_){s.info("Thread | useSendFileMessageCallback: Sending file message succeeded.",_),o.publish(Hn.SEND_FILE_MESSAGE,{channel:t,message:_,publishingModules:[Jr.THREAD]}),d(_)})})},[t])}var Oee=function(e,n){var t=e.currentChannel,r=e.onBeforeSendVoiceMessage,i=e.sendMessageStart,a=e.sendMessageFailure,s=n.logger,o=n.pubSub,l=M.useCallback(function(u,d,f){var m=r&&typeof r=="function"?r(u,f):{file:u,fileName:_d,mimeType:xo,metaArrays:[new $r({key:Bb,value:["".concat(d)]}),new $r({key:Hb,value:[Gb]})]};f&&(m.isReplyToChannel=!0,m.parentMessageId=f.messageId),s.info("Thread | useSendVoiceMessageCallback:  Start sending voice message",m),t==null||t.sendFileMessage(m).onPending(function(p){i(D(D({},p),{url:URL.createObjectURL(u),sendingStatus:gn.PENDING,isUserMessage:p.isUserMessage,isFileMessage:p.isFileMessage,isAdminMessage:p.isAdminMessage,isMultipleFilesMessage:p.isMultipleFilesMessage})),setTimeout(function(){return Oa()},$l)}).onFailed(function(p,E){E.localUrl=URL.createObjectURL(u),E.file=u,s.info("Thread | useSendVoiceMessageCallback: Sending voice message failed.",{message:E,error:p}),a(E)}).onSucceeded(function(p){s.info("Thread | useSendVoiceMessageCallback: Sending voice message succeeded.",p),o.publish(Hn.SEND_FILE_MESSAGE,{channel:t,message:p,publishingModules:[Jr.THREAD]})})},[t,r]);return l};function Lee(e,n){var t=e.currentChannel,r=e.resendMessageStart,i=e.sendMessageSuccess,a=e.sendMessageFailure,s=n.logger,o=n.pubSub;return M.useCallback(function(l){var u,d,f,m,p;if(!(l!=null&&l.isResendable)){s.warning("Thread | useResendMessageCallback: Message is not resendable.",l);return}if(s.info("Thread | useResendMessageCallback: Resending failedMessage start.",l),!((u=l==null?void 0:l.isUserMessage)===null||u===void 0)&&u.call(l)||(l==null?void 0:l.messageType)===Zn.USER)try{t==null||t.resendMessage(l).onPending(function(E){s.info("Thread | useResendMessageCallback: Resending user message started.",E),r(E)}).onSucceeded(function(E){s.info("Thread | useResendMessageCallback: Resending user message succeeded.",E),i(E),o.publish(Hn.SEND_USER_MESSAGE,{channel:t,message:E,publishingModules:[Jr.THREAD]})}).onFailed(function(E){s.warning("Thread | useResendMessageCallback: Resending user message failed.",E),l.sendingStatus=gn.FAILED,a(l)})}catch(E){s.warning("Thread | useResendMessageCallback: Resending user message failed.",E),l.sendingStatus=gn.FAILED,a(l)}else if(!((d=l==null?void 0:l.isFileMessage)===null||d===void 0)&&d.call(l))try{(f=t==null?void 0:t.resendMessage)===null||f===void 0||f.call(t,l).onPending(function(E){s.info("Thread | useResendMessageCallback: Resending file message started.",E),r(E)}).onSucceeded(function(E){s.info("Thread | useResendMessageCallback: Resending file message succeeded.",E),i(E),o.publish(Hn.SEND_FILE_MESSAGE,{channel:t,message:l,publishingModules:[Jr.THREAD]})}).onFailed(function(E){s.warning("Thread | useResendMessageCallback: Resending file message failed.",E),l.sendingStatus=gn.FAILED,a(l)})}catch(E){s.warning("Thread | useResendMessageCallback: Resending file message failed.",E),l.sendingStatus=gn.FAILED,a(l)}else if(!((m=l==null?void 0:l.isMultipleFilesMessage)===null||m===void 0)&&m.call(l))try{(p=t==null?void 0:t.resendMessage)===null||p===void 0||p.call(t,l).onPending(function(E){s.info("Thread | useResendMessageCallback: Resending multiple files message started.",E),r(E)}).onFileUploaded(function(E,_,b,C){s.info("Thread | useResendMessageCallback: onFileUploaded during resending multiple files message.",{requestId:E,index:_,error:C,uploadableFileInfo:b}),o.publish(Hn.ON_FILE_INFO_UPLOADED,{response:{channelUrl:t.url,requestId:E,index:_,uploadableFileInfo:b,error:C},publishingModules:[Jr.THREAD]})}).onSucceeded(function(E){s.info("Thread | useResendMessageCallback: Resending MFM succeeded.",E),i(E),o.publish(Hn.SEND_FILE_MESSAGE,{channel:t,message:E,publishingModules:[Jr.THREAD]})}).onFailed(function(E,_){s.warning("Thread | useResendMessageCallback: Resending MFM failed.",E),a(_)})}catch(E){s.warning("Thread | useResendMessageCallback: Resending MFM failed.",E),a(l)}else s.warning("Thread | useResendMessageCallback: Message is not resendable.",l),l.sendingStatus=gn.FAILED,a(l)},[t])}function Uee(e,n){var t=e.currentChannel,r=e.isMentionEnabled,i=e.onMessageUpdated,a=n.logger,s=n.pubSub;return M.useCallback(function(o){var l,u=o.messageId,d=o.message,f=o.mentionedUsers,m=o.mentionTemplate,p=function(){var _={};return _.message=d,r&&f&&(f==null?void 0:f.length)>0&&(_.mentionedUsers=f),r&&m?_.mentionedMessageTemplate=m:_.mentionedMessageTemplate=d,_},E=p();if(a.info("Thread | useUpdateMessageCallback: Message update start.",E),t==null){a.warning("Thread | useUpdateMessageCallback: currentChannel is null.");return}(l=t.updateUserMessage)===null||l===void 0||l.call(t,u,E).then(function(_){a.info("Thread | useUpdateMessageCallback: Message update succeeded.",_),i(t,_),s.publish(Hn.UPDATE_USER_MESSAGE,{fromSelector:!0,channel:t,message:_,publishingModules:[Jr.THREAD]})})},[t,r])}function Dee(e,n){var t=e.currentChannel,r=e.onMessageDeletedByReqId,i=e.onMessageDeleted,a=n.logger;return M.useCallback(function(s){a.info("Thread | useDeleteMessageCallback: Deleting message.",s);var o=s.sendingStatus;return new Promise(function(l,u){var d;a.info("Thread | useDeleteMessageCallback: Deleting message requestState:",o),(o==="failed"||o==="pending")&&(a.info("Thread | useDeleteMessageCallback: Deleted message from local:",s),r(s.reqId),l()),t==null&&(a.info("Thread | useDeleteMessageCallback: No current channel"),l()),a.info("Thread | useDeleteMessageCallback: Deleting message from remote:",o),(d=t.deleteMessage)===null||d===void 0||d.call(t,s).then(function(){a.info("Thread | useDeleteMessageCallback: Deleting message success!",s),i(t,s.messageId),l()}).catch(function(f){a.warning("Thread | useDeleteMessageCallback: Deleting message failed!",f),u(f)})})},[t])}function Z_(e){return D({prevResultSize:db,nextResultSize:hb,includeMetaArray:!0},e)}var kee=function(e){var n=e.isReactionEnabled,t=e.anchorMessage,r=e.parentMessage,i=e.logger,a=e.oldestMessageTimeStamp,s=e.latestMessageTimeStamp,o=e.threadListState,l=e.initializeThreadListStart,u=e.initializeThreadListSuccess,d=e.initializeThreadListFailure,f=e.getPrevMessagesStart,m=e.getPrevMessagesSuccess,p=e.getPrevMessagesFailure,E=e.getNextMessagesStart,_=e.getNextMessagesSuccess,b=e.getNextMessagesFailure,C=yt().state.stores,y=(t==null?void 0:t.createdAt)||0,T=M.useCallback(function(O){return tn(void 0,void 0,void 0,function(){var L,P,U,B,F;return nn(this,function(H){switch(H.label){case 0:if(!C.sdkStore.initialized||!r)return[2];l(),H.label=1;case 1:return H.trys.push([1,3,,4]),L=Z_({includeReactions:n}),i.info("Thread | useGetThreadList: Initialize thread list start.",{timestamp:y,params:L}),[4,r.getThreadedMessagesByTimestamp(y,L)];case 2:return P=H.sent(),U=P.threadedMessages,B=P.parentMessage,i.info("Thread | useGetThreadList: Initialize thread list succeeded.",{staleParentMessage:r,threadedMessages:U}),u(B,t,U),setTimeout(function(){return O==null?void 0:O(U)}),[3,4];case 3:return F=H.sent(),i.info("Thread | useGetThreadList: Initialize thread list failed.",F),d(),[3,4];case 4:return[2]}})})},[C.sdkStore.initialized,r,t,n]),N=M.useCallback(function(O){return tn(void 0,void 0,void 0,function(){var L,P,U,B,F;return nn(this,function(H){switch(H.label){case 0:if(o!==Ii.INITIALIZED||a===0||!r)return[2];f(),H.label=1;case 1:return H.trys.push([1,3,,4]),L=Z_({nextResultSize:0,includeReactions:n}),[4,r.getThreadedMessagesByTimestamp(a,L)];case 2:return P=H.sent(),U=P.threadedMessages,B=P.parentMessage,i.info("Thread | useGetPrevThreadsCallback: Fetch prev threads succeeded.",{parentMessage:B,threadedMessages:U}),m(U),setTimeout(function(){return O==null?void 0:O(U)}),[3,4];case 3:return F=H.sent(),i.info("Thread | useGetPrevThreadsCallback: Fetch prev threads failed.",F),p(),[3,4];case 4:return[2]}})})},[o,a,n,r]),w=M.useCallback(function(O){return tn(void 0,void 0,void 0,function(){var L,P,U,B,F;return nn(this,function(H){switch(H.label){case 0:if(o!==Ii.INITIALIZED||s===0||!r)return[2];E(),H.label=1;case 1:return H.trys.push([1,3,,4]),L=Z_({prevResultSize:0,includeReactions:n}),[4,r.getThreadedMessagesByTimestamp(s,L)];case 2:return P=H.sent(),U=P.threadedMessages,B=P.parentMessage,i.info("Thread | useGetNextThreadsCallback: Fetch next threads succeeded.",{parentMessage:B,threadedMessages:U}),_(U),setTimeout(function(){return O==null?void 0:O(U)}),[3,4];case 3:return F=H.sent(),i.info("Thread | useGetNextThreadsCallback: Fetch next threads failed.",F),b(),[3,4];case 4:return[2]}})})},[o,s,n,r]);return{initializeThreadFetcher:T,fetchPrevThreads:N,fetchNextThreads:w}};function Pee(e){return"reqId"in e}var qi=function(){var e,n,t=M.useContext(ZC);if(!t)throw new Error("useThread must be used within a ThreadProvider");var r=yt().state,i=r.stores,a=r.config,s=a.logger,o=a.pubSub,l=a.groupChannel.enableMention,u=a.groupChannel.enableReactions,d=Ql.useSyncExternalStore(t.subscribe,t.getState),f=d.message,m=d.parentMessage,p=d.currentChannel,E=d.threadListState,_=d.allThreadMessages,b=d.onBeforeSendUserMessage,C=d.onBeforeSendFileMessage,y=d.onBeforeSendVoiceMessage,T=d.onBeforeSendMultipleFilesMessage,N={sendMessageStart:function(x){return t.setState(function(V){return D(D({},V),{localThreadMessages:Ne(Ne([],V.localThreadMessages,!0),[x],!1)})})},sendMessageSuccess:function(x){return t.setState(function(V){return D(D({},V),{allThreadMessages:Ne(Ne([],V.allThreadMessages.filter(function(K){return!Rl(K==null?void 0:K.reqId,x==null?void 0:x.reqId)}),!0),[x],!1),localThreadMessages:V.localThreadMessages.filter(function(K){return!Rl(K==null?void 0:K.reqId,x==null?void 0:x.reqId)})})})},sendMessageFailure:function(x){return t.setState(function(V){return D(D({},V),{localThreadMessages:V.localThreadMessages.map(function(K){return Rl(K==null?void 0:K.reqId,x==null?void 0:x.reqId)?x:K})})})},resendMessageStart:function(x){return t.setState(function(V){return D(D({},V),{localThreadMessages:V.localThreadMessages.map(function(K){return Rl(K==null?void 0:K.reqId,x==null?void 0:x.reqId)?x:K})})})}},w=Aee({currentChannel:p},{logger:s}),O={sendMessage:wee({isMentionEnabled:l,currentChannel:p,onBeforeSendUserMessage:b,sendMessageStart:N.sendMessageStart,sendMessageFailure:N.sendMessageFailure},{logger:s,pubSub:o}),sendFileMessage:Ree({currentChannel:p,onBeforeSendFileMessage:C,sendMessageStart:N.sendMessageStart,sendMessageFailure:N.sendMessageFailure},{logger:s,pubSub:o}),sendVoiceMessage:Oee({currentChannel:p,onBeforeSendVoiceMessage:y,sendMessageStart:N.sendMessageStart,sendMessageFailure:N.sendMessageFailure},{logger:s,pubSub:o}),sendMultipleFilesMessage:FL({currentChannel:p,onBeforeSendMultipleFilesMessage:T,publishingModules:[Jr.THREAD]},{logger:s,pubSub:o})[0],resendMessage:Lee({resendMessageStart:N.resendMessageStart,sendMessageSuccess:N.sendMessageSuccess,sendMessageFailure:N.sendMessageFailure,currentChannel:p},{logger:s,pubSub:o})},L={onMessageUpdated:function(x,V){return t.setState(function(K){var W,Q,J;return((W=K.currentChannel)===null||W===void 0?void 0:W.url)!==(x==null?void 0:x.url)?K:D(D({},K),{parentMessage:((Q=K.parentMessage)===null||Q===void 0?void 0:Q.messageId)===(V==null?void 0:V.messageId)?V:K.parentMessage,allThreadMessages:(J=K.allThreadMessages)===null||J===void 0?void 0:J.map(function($){return($==null?void 0:$.messageId)===(V==null?void 0:V.messageId)?V:$})})})},onMessageDeleted:function(x,V){return t.setState(function(K){var W,Q,J,$;return((W=K.currentChannel)===null||W===void 0?void 0:W.url)!==(x==null?void 0:x.url)?K:((Q=K==null?void 0:K.parentMessage)===null||Q===void 0?void 0:Q.messageId)===V?D(D({},K),{parentMessage:null,parentMessageState:Gi.NIL,allThreadMessages:[]}):D(D({},K),{allThreadMessages:(J=K.allThreadMessages)===null||J===void 0?void 0:J.filter(function(te){return(te==null?void 0:te.messageId)!==V}),localThreadMessages:($=K.localThreadMessages)===null||$===void 0?void 0:$.filter(function(te){return(te==null?void 0:te.messageId)!==V})})})},onMessageDeletedByReqId:function(x){return t.setState(function(V){return D(D({},V),{localThreadMessages:V.localThreadMessages.filter(function(K){return!Rl(K.reqId,x)})})})}},P={updateMessage:Uee({currentChannel:p,isMentionEnabled:l,onMessageUpdated:L.onMessageUpdated},{logger:s,pubSub:o}),deleteMessage:Dee({currentChannel:p,onMessageDeleted:L.onMessageDeleted,onMessageDeletedByReqId:L.onMessageDeletedByReqId},{logger:s})},U={initializeThreadListStart:function(){return t.setState(function(x){return D(D({},x),{threadListState:Ii.LOADING,allThreadMessages:[]})})},initializeThreadListSuccess:function(x,V,K){return t.setState(function(W){var Q=V!=null&&V.messageId?V==null?void 0:V.createdAt:x==null?void 0:x.createdAt,J=K.findIndex(function(ve){return(ve==null?void 0:ve.createdAt)>Q}),$=J>-1?K.slice(0,J):K,te=V!=null&&V.messageId?[V]:[],re=J>-1?K.slice(J):[];return D(D({},W),{threadListState:Ii.INITIALIZED,hasMorePrev:J===-1||J===db,hasMoreNext:K.length-J===hb,allThreadMessages:[$,te,re].flat()})})},initializeThreadListFailure:function(){return t.setState(function(x){return D(D({},x),{threadListState:Ii.LOADING,allThreadMessages:[]})})},getPrevMessagesStart:function(){return t.setState(function(x){return D({},x)})},getPrevMessagesSuccess:function(x){return t.setState(function(V){return D(D({},V),{hasMorePrev:x.length===db,allThreadMessages:Ne(Ne([],x,!0),V.allThreadMessages,!0)})})},getPrevMessagesFailure:function(){return t.setState(function(x){return D(D({},x),{hasMorePrev:!1})})},getNextMessagesStart:function(){return t.setState(function(x){return D({},x)})},getNextMessagesSuccess:function(x){return t.setState(function(V){return D(D({},V),{hasMoreNext:x.length===hb,allThreadMessages:Ne(Ne([],V.allThreadMessages,!0),x,!0)})})},getNextMessagesFailure:function(){return t.setState(function(x){return D(D({},x),{hasMoreNext:!1})})}},B=kee({parentMessage:m,anchorMessage:(f==null?void 0:f.messageId)!==(m==null?void 0:m.messageId)&&f||void 0,logger:s,isReactionEnabled:u,threadListState:E,oldestMessageTimeStamp:((e=_[0])===null||e===void 0?void 0:e.createdAt)||0,latestMessageTimeStamp:((n=_[_.length-1])===null||n===void 0?void 0:n.createdAt)||0,initializeThreadListStart:U.initializeThreadListStart,initializeThreadListSuccess:U.initializeThreadListSuccess,initializeThreadListFailure:U.initializeThreadListFailure,getPrevMessagesStart:U.getPrevMessagesStart,getPrevMessagesSuccess:U.getPrevMessagesSuccess,getPrevMessagesFailure:U.getPrevMessagesFailure,getNextMessagesStart:U.getNextMessagesStart,getNextMessagesSuccess:U.getNextMessagesSuccess,getNextMessagesFailure:U.getNextMessagesFailure}),F=B.initializeThreadFetcher,H=B.fetchPrevThreads,G=B.fetchNextThreads,j=M.useMemo(function(){return D(D(D(D(D(D({setCurrentUserId:function(x){return t.setState(function(V){return D(D({},V),{currentUserId:x})})},getChannelStart:function(){return t.setState(function(x){return D(D({},x),{channelState:kl.LOADING,currentChannel:null})})},getChannelSuccess:function(x){return t.setState(function(V){var K,W;return D(D({},V),{channelState:kl.INITIALIZED,currentChannel:x,isMuted:((W=(K=x==null?void 0:x.members)===null||K===void 0?void 0:K.find(function(Q){return(Q==null?void 0:Q.userId)===V.currentUserId}))===null||W===void 0?void 0:W.isMuted)||!1,isChannelFrozen:(x==null?void 0:x.isFrozen)||!1})})},getChannelFailure:function(){return t.setState(function(x){return D(D({},x),{channelState:kl.INVALID,currentChannel:null})})},getParentMessageStart:function(){return t.setState(function(x){return D(D({},x),{parentMessageState:Gi.LOADING,parentMessage:null})})},getParentMessageSuccess:function(x){return t.setState(function(V){return D(D({},V),{parentMessageState:Gi.INITIALIZED,parentMessage:x})})},getParentMessageFailure:function(){return t.setState(function(x){return D(D({},x),{parentMessageState:Gi.INVALID,parentMessage:null})})},setEmojiContainer:function(x){return t.setState(function(V){return D(D({},V),{emojiContainer:x})})},onMessageReceived:function(x,V){return t.setState(function(K){var W,Q,J,$;if(((W=K.currentChannel)===null||W===void 0?void 0:W.url)!==(x==null?void 0:x.url)||K.hasMoreNext||((Q=V==null?void 0:V.parentMessage)===null||Q===void 0?void 0:Q.messageId)!==((J=K==null?void 0:K.parentMessage)===null||J===void 0?void 0:J.messageId))return K;var te=K.allThreadMessages.findIndex(function(re){return re.messageId===V.messageId})>-1;return D(D({},K),{parentMessage:(($=K.parentMessage)===null||$===void 0?void 0:$.messageId)===(V==null?void 0:V.messageId)?V:K.parentMessage,allThreadMessages:te?K.allThreadMessages.map(function(re){return re.messageId===V.messageId?V:re}):Ne(Ne([],K.allThreadMessages.filter(function(re){return(re==null?void 0:re.reqId)!==(V==null?void 0:V.reqId)}),!0),[V],!1)})})},onReactionUpdated:function(x){return t.setState(function(V){var K,W,Q;return((K=V==null?void 0:V.parentMessage)===null||K===void 0?void 0:K.messageId)===(x==null?void 0:x.messageId)&&((Q=(W=V.parentMessage)===null||W===void 0?void 0:W.applyReactionEvent)===null||Q===void 0||Q.call(W,x)),D(D({},V),{allThreadMessages:V.allThreadMessages.map(function(J){var $;return(x==null?void 0:x.messageId)===(J==null?void 0:J.messageId)&&(($=J==null?void 0:J.applyReactionEvent)===null||$===void 0||$.call(J,x)),J})})})},onUserMuted:function(x,V){return t.setState(function(K){var W;return((W=K.currentChannel)===null||W===void 0?void 0:W.url)!==(x==null?void 0:x.url)||K.currentUserId!==(V==null?void 0:V.userId)?K:D(D({},K),{isMuted:!0})})},onUserUnmuted:function(x,V){return t.setState(function(K){var W;return((W=K.currentChannel)===null||W===void 0?void 0:W.url)!==(x==null?void 0:x.url)||K.currentUserId!==(V==null?void 0:V.userId)?K:D(D({},K),{isMuted:!1})})},onUserBanned:function(){return t.setState(function(x){return D(D({},x),{channelState:kl.NIL,threadListState:Ii.NIL,parentMessageState:Gi.NIL,currentChannel:null,parentMessage:null,allThreadMessages:[],hasMorePrev:!1,hasMoreNext:!1})})},onUserUnbanned:function(){return t.setState(function(x){return D({},x)})},onUserLeft:function(){return t.setState(function(x){return D(D({},x),{channelState:kl.NIL,threadListState:Ii.NIL,parentMessageState:Gi.NIL,currentChannel:null,parentMessage:null,allThreadMessages:[],hasMorePrev:!1,hasMoreNext:!1})})},onChannelFrozen:function(){return t.setState(function(x){return D(D({},x),{isChannelFrozen:!0})})},onChannelUnfrozen:function(){return t.setState(function(x){return D(D({},x),{isChannelFrozen:!1})})},onOperatorUpdated:function(x){return t.setState(function(V){var K;return(x==null?void 0:x.url)===((K=V.currentChannel)===null||K===void 0?void 0:K.url)?D(D({},V),{currentChannel:x}):V})},onTypingStatusUpdated:function(x,V){return t.setState(function(K){var W;return Rl(x.url,(W=K.currentChannel)===null||W===void 0?void 0:W.url)?D(D({},K),{typingMembers:V}):K})},onFileInfoUpdated:function(x){var V=x.channelUrl,K=x.requestId,W=x.index,Q=x.uploadableFileInfo,J=x.error;return t.setState(function($){var te,re;if(!Rl(V,(te=$.currentChannel)===null||te===void 0?void 0:te.url)||J)return $;var ve=$.localThreadMessages,ie=ve.find(function(Ae){return Rl(Pee(Ae)&&Ae.reqId,K)}),le=(re=ie.messageParams)===null||re===void 0?void 0:re.fileInfoList;return Array.isArray(le)&&(le[W]=Q),D(D({},$),{localThreadMessages:ve})})},toggleReaction:w},N),O),L),P),U),{initializeThreadFetcher:F,fetchPrevThreads:H,fetchNextThreads:G})},[t,p,i.sdkStore.initialized,m]);return{state:d,actions:j}};function xee(e,n){var t=e.channelUrl,r=e.sdkInit,i=e.message,a=n.sdk,s=n.logger,o=qi().actions,l=o.getChannelStart,u=o.getChannelSuccess,d=o.getChannelFailure;M.useEffect(function(){var f,m;r&&t&&(a!=null&&a.groupChannel)&&(s.info("Thread | useInitialize: Get channel started"),l(),(m=(f=a.groupChannel).getChannel)===null||m===void 0||m.call(f,t).then(function(p){s.info("Thread | useInitialize: Get channel succeeded",p),u(p)}).catch(function(p){s.info("Thread | useInitialize: Get channel failed",p),d()}))},[i,r])}function Fee(e,n){var t=e.sdk,r=n.logger,i=qi().actions.setEmojiContainer;M.useEffect(function(){t!=null&&t.getAllEmoji&&(t==null||t.getAllEmoji().then(function(a){r.info("Thread | useGetAllEmoji: Getting emojis succeeded.",a),i(a)}).catch(function(a){r.info("Thread | useGetAllEmoji: Getting emojis failed.",a)}))},[t])}function Bee(e,n){var t=e.channelUrl,r=e.sdkInit,i=e.parentMessage,a=n.sdk,s=n.logger,o=qi().actions,l=o.getParentMessageStart,u=o.getParentMessageSuccess,d=o.getParentMessageFailure;M.useEffect(function(){var f,m,p;if(r&&(!((f=a==null?void 0:a.message)===null||f===void 0)&&f.getMessage)&&i){l();var E={channelUrl:t,channelType:ln.GROUP,messageId:i.messageId,includeMetaArray:!0,includeReactions:!0,includeThreadInfo:!0,includeParentMessageInfo:!0};s.info("Thread | useGetParentMessage: Get parent message start.",E),(p=(m=a.message).getMessage)===null||p===void 0||p.call(m,E).then(function(_){s.info("Thread | useGetParentMessage: Get parent message succeeded.",i),_.ogMetaData=(i==null?void 0:i.ogMetaData)||null,u(_)}).catch(function(_){s.info("Thread | useGetParentMessage: Get parent message failed.",_),d()})}},[r,i==null?void 0:i.messageId])}function Hee(e,n){var t=e.sdkInit,r=e.currentChannel,i=e.parentMessage,a=n.pubSub,s=qi().actions,o=s.sendMessageStart,l=s.sendMessageSuccess,u=s.sendMessageFailure,d=s.onFileInfoUpdated,f=s.onMessageUpdated,m=s.onMessageDeleted;M.useEffect(function(){var p=new Map;return a!=null&&a.subscribe&&(p.set(Hn.SEND_MESSAGE_START,a.subscribe(Hn.SEND_MESSAGE_START,function(E){var _,b,C=E.channel,y=E.message,T=E.publishingModules;if((r==null?void 0:r.url)===(C==null?void 0:C.url)&&(y==null?void 0:y.parentMessageId)===(i==null?void 0:i.messageId)&&qh(T)){var N=D({},y);y.isMultipleFilesMessage()&&(N.fileInfoList=(b=(_=y==null?void 0:y.messageParams)===null||_===void 0?void 0:_.fileInfoList.map(function(w){return D(D({},w),{url:URL.createObjectURL(w.file)})}))!==null&&b!==void 0?b:[]),o(y)}Oa==null||Oa()})),p.set(Xr.ON_FILE_INFO_UPLOADED,a.subscribe(Xr.ON_FILE_INFO_UPLOADED,function(E){var _=E.response,b=E.publishingModules;(r==null?void 0:r.url)===_.channelUrl&&qh(b)&&d(_)})),p.set(Hn.SEND_USER_MESSAGE,a.subscribe(Hn.SEND_USER_MESSAGE,function(E){var _=E,b=_.channel,C=_.message;(r==null?void 0:r.url)===(b==null?void 0:b.url)&&(C==null?void 0:C.parentMessageId)===(i==null?void 0:i.messageId)&&l(C),Oa==null||Oa()})),p.set(Hn.SEND_MESSAGE_FAILED,a.subscribe(Hn.SEND_MESSAGE_FAILED,function(E){var _=E.channel,b=E.message,C=E.publishingModules;(r==null?void 0:r.url)===(_==null?void 0:_.url)&&(b==null?void 0:b.parentMessageId)===(i==null?void 0:i.messageId)&&qh(C)&&u(b)})),p.set(Hn.SEND_FILE_MESSAGE,a.subscribe(Hn.SEND_FILE_MESSAGE,function(E){var _=E.channel,b=E.message,C=E.publishingModules;(r==null?void 0:r.url)===(_==null?void 0:_.url)&&qh(C)&&l(b),Oa==null||Oa()})),p.set(Hn.UPDATE_USER_MESSAGE,a.subscribe(Hn.UPDATE_USER_MESSAGE,function(E){var _=E,b=_.channel,C=_.message;(r==null?void 0:r.url)===(b==null?void 0:b.url)&&f(b,C)})),p.set(Hn.DELETE_MESSAGE,a.subscribe(Hn.DELETE_MESSAGE,function(E){var _=E,b=_.channel,C=_.messageId;m(b,C)}))),function(){p==null||p.forEach(function(E){try{E==null||E.remove()}catch{}})}},[t,r,i==null?void 0:i.messageId])}function Gee(e,n){var t=e.sdk,r=e.currentChannel,i=n.logger,a=qi().actions,s=a.onMessageReceived,o=a.onMessageUpdated,l=a.onMessageDeleted,u=a.onReactionUpdated,d=a.onUserMuted,f=a.onUserUnmuted,m=a.onUserBanned,p=a.onUserUnbanned,E=a.onUserLeft,_=a.onChannelFrozen,b=a.onChannelUnfrozen,C=a.onOperatorUpdated,y=a.onTypingStatusUpdated;M.useEffect(function(){var T,N,w,O=qr();if(!((T=t==null?void 0:t.groupChannel)===null||T===void 0)&&T.addGroupChannelHandler&&r){var L={onMessageReceived:function(U,B){i.info("Thread | useHandleChannelEvents: onMessageReceived",{channel:U,message:B}),s(U,B)},onMessageUpdated:function(U,B){i.info("Thread | useHandleChannelEvents: onMessageUpdated",{channel:U,message:B}),o(U,B)},onMessageDeleted:function(U,B){i.info("Thread | useHandleChannelEvents: onMessageDeleted",{channel:U,messageId:B}),l(U,B)},onReactionUpdated:function(U,B){i.info("Thread | useHandleChannelEvents: onReactionUpdated",{channel:U,reactionEvent:B}),u(B)},onUserMuted:function(U,B){i.info("Thread | useHandleChannelEvents: onUserMuted",{channel:U,user:B}),d(U,B)},onUserUnmuted:function(U,B){i.info("Thread | useHandleChannelEvents: onUserUnmuted",{channel:U,user:B}),f(U,B)},onUserBanned:function(U,B){i.info("Thread | useHandleChannelEvents: onUserBanned",{channel:U,user:B}),m()},onUserUnbanned:function(U,B){i.info("Thread | useHandleChannelEvents: onUserUnbanned",{channel:U,user:B}),p()},onUserLeft:function(U,B){i.info("Thread | useHandleChannelEvents: onUserLeft",{channel:U,user:B}),E()},onChannelFrozen:function(U){i.info("Thread | useHandleChannelEvents: onChannelFrozen",{channel:U}),_()},onChannelUnfrozen:function(U){i.info("Thread | useHandleChannelEvents: onChannelUnfrozen",{channel:U}),b()},onOperatorUpdated:function(U,B){i.info("Thread | useHandleChannelEvents: onOperatorUpdated",{channel:U,users:B}),C(U)},onTypingStatusUpdated:function(U){if($n(U==null?void 0:U.url,r.url)){i.info("Channel | onTypingStatusUpdated",{channel:U});var B=U.getTypingUsers();y(U,B)}}},P=new Qo(L);(w=(N=t.groupChannel).addGroupChannelHandler)===null||w===void 0||w.call(N,O,P),i.info("Thread | useHandleChannelEvents: Added channelHandler in Thread",{handlerId:O,channelHandler:P})}return function(){var U,B,F;O&&(!((U=t==null?void 0:t.groupChannel)===null||U===void 0)&&U.removeGroupChannelHandler)&&((F=(B=t.groupChannel).removeGroupChannelHandler)===null||F===void 0||F.call(B,O),i.info("Thread | useHandleChannelEvents: Removed channelHandler in Thread.",O))}},[t==null?void 0:t.groupChannel,r])}function zee(e){var n=e.user,t=qi().actions.setCurrentUserId;M.useEffect(function(){t(n==null?void 0:n.userId)},[n==null?void 0:n.userId])}var oU={channelUrl:"",message:null,onHeaderActionClick:void 0,onMoveToParentMessage:void 0,onBeforeSendUserMessage:void 0,onBeforeSendFileMessage:void 0,onBeforeSendVoiceMessage:void 0,onBeforeSendMultipleFilesMessage:void 0,onBeforeDownloadFileMessage:void 0,isMultipleFilesMessageEnabled:void 0,filterEmojiCategoryIds:void 0,currentChannel:null,allThreadMessages:[],localThreadMessages:[],parentMessage:null,channelState:kl.NIL,parentMessageState:Gi.NIL,threadListState:Ii.NIL,hasMorePrev:!1,hasMoreNext:!1,emojiContainer:{},isMuted:!1,isChannelFrozen:!1,currentUserId:"",typingMembers:[],nicknamesMap:null},ZC=v.createContext(null),jee=function(e){return cc(D(D({},oU),e))},Vee=function(e){var n=e.children,t={channelUrl:e==null?void 0:e.channelUrl,message:e==null?void 0:e.message,onHeaderActionClick:e==null?void 0:e.onHeaderActionClick,onMoveToParentMessage:e==null?void 0:e.onMoveToParentMessage,onBeforeSendUserMessage:e==null?void 0:e.onBeforeSendUserMessage,onBeforeSendFileMessage:e==null?void 0:e.onBeforeSendFileMessage,onBeforeSendVoiceMessage:e==null?void 0:e.onBeforeSendVoiceMessage,onBeforeSendMultipleFilesMessage:e==null?void 0:e.onBeforeSendMultipleFilesMessage,onBeforeDownloadFileMessage:e==null?void 0:e.onBeforeDownloadFileMessage,isMultipleFilesMessageEnabled:e==null?void 0:e.isMultipleFilesMessageEnabled,filterEmojiCategoryIds:e==null?void 0:e.filterEmojiCategoryIds},r=M.useRef(jee(t));return v.createElement(ZC.Provider,{value:r.current},n)},$ee=function(e){var n=e.message,t=e.channelUrl,r=e.onHeaderActionClick,i=e.onMoveToParentMessage,a=e.onBeforeSendUserMessage,s=e.onBeforeSendFileMessage,o=e.onBeforeSendVoiceMessage,l=e.onBeforeSendMultipleFilesMessage,u=e.onBeforeDownloadFileMessage,d=e.isMultipleFilesMessageEnabled,f=e.filterEmojiCategoryIds,m=qi(),p=m.state,E=p.currentChannel,_=p.parentMessage,b=m.actions.initializeThreadFetcher,C=Kee().updateState,y=iJ(n),T=yt().state,N=T.stores,w=T.config,O=N.sdkStore,L=N.userStore,P=O.sdk,U=L.user,B=O==null?void 0:O.initialized,F=w.logger,H=w.pubSub;zee({user:U}),xee({channelUrl:t,sdkInit:B,message:n},{sdk:P,logger:F}),Bee({channelUrl:t,sdkInit:B,parentMessage:y},{sdk:P,logger:F}),Fee({sdk:P},{logger:F}),Gee({sdk:P,currentChannel:E},{logger:F}),Hee({sdkInit:B,currentChannel:E,parentMessage:_},{logger:F,pubSub:H}),M.useEffect(function(){N.sdkStore.initialized&&w.isOnline&&b()},[N.sdkStore.initialized,w.isOnline,b]);var G=M.useMemo(function(){return w.groupChannel.replyType!=="none"&&E?rJ(E==null?void 0:E.members):new Map},[E==null?void 0:E.members]);return e0(function(){C({channelUrl:t,message:n,onHeaderActionClick:r,onMoveToParentMessage:i,onBeforeSendUserMessage:a,onBeforeSendFileMessage:s,onBeforeSendVoiceMessage:o,onBeforeSendMultipleFilesMessage:l,onBeforeDownloadFileMessage:u,isMultipleFilesMessageEnabled:d,filterEmojiCategoryIds:f,nicknamesMap:G})},[t,n,r,i,a,s,o,l,u,d,f,G]),null},qee=function(e){var n=e.children;return v.createElement(Vee,D({},e),v.createElement($ee,D({},e)),v.createElement(xd,D({},e),n))},Kee=function(){return dc(ZC,function(e){return e},oU)};function fb(e){"@babel/helpers - typeof";return fb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},fb(e)}function JC(e,n){if(n.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+n.length+" present")}function Wee(e){JC(1,arguments);var n=Object.prototype.toString.call(e);return e instanceof Date||fb(e)==="object"&&n==="[object Date]"?new Date(e.getTime()):typeof e=="number"||n==="[object Number]"?new Date(e):((typeof e=="string"||n==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Fw(e){JC(1,arguments);var n=Wee(e);return n.setHours(0,0,0,0),n}function Qee(e,n){JC(2,arguments);var t=Fw(e),r=Fw(n);return t.getTime()===r.getTime()}var eS=function(e){var n=qi().state.currentChannel;return v.createElement(SC,D({},e,{currentChannel:n}))},cd={OPERATOR:"operator",NONE:"none"},Yee=function(e,n){var t=e.sendFileMessage,r=e.sendMultipleFilesMessage,i=e.quoteMessage,a=n.logger,s=Ut().stringSet,o=yt().state.config,l=o.imageCompression,u=o==null?void 0:o.uikitUploadSizeLimit,d=o==null?void 0:o.uikitMultipleFilesMessageLimit,f=Wb().openModal,m=M.useCallback(function(p){return tn(void 0,void 0,void 0,function(){var E,_,b,C,y;return nn(this,function(T){switch(T.label){case 0:return!t||!r?(a.warning("Channel|useHandleUploadFiles: required functions are undefined",{sendFileMessage:t,sendMultipleFilesMessage:r}),[2]):p.length===0?(a.warning("Channel|useHandleUploadFiles: given file list is empty.",{files:p}),[2]):p.length>d?(a.info("Channel|useHandleUploadFiles: Cannot upload files more than ".concat(d)),f({modalProps:{titleText:s.FILE_UPLOAD_NOTIFICATION__COUNT_LIMIT.replace("%d","".concat(d)),hideFooter:!0},childElement:function(N){var w=N.closeModal;return v.createElement(Ed,{type:Vn.PRIMARY,submitText:s.BUTTON__OK,hideCancelButton:!0,onCancel:w,onSubmit:w})}}),[2]):p.some(function(N){return N.size>u})?(a.info("Channel|useHandleUploadFiles: Cannot upload file size exceeding ".concat(u)),f({modalProps:{titleText:s.FILE_UPLOAD_NOTIFICATION__SIZE_LIMIT.replace("%d","".concat(Math.floor(u/IB))),hideFooter:!0},childElement:function(N){var w=N.closeModal;return v.createElement(Ed,{type:Vn.PRIMARY,submitText:s.BUTTON__OK,hideCancelButton:!0,onCancel:w,onSubmit:w})}}),[2]):[4,AL({files:p,imageCompression:l,logger:a})];case 1:if(E=T.sent().compressedFiles,_=E,_.length===1)a.info("Channel|useHandleUploadFiles: sending one file."),b=_[0],t(b,i);else if(_.length>1)return a.info("Channel|useHandleUploadFiles: sending multiple files."),C=[],y=[],_.forEach(function(N){Ds(N.type)?C.push(N):y.push(N)}),[2,y.reduce(function(N,w){return N.then(function(){return t(w,i)})},function(){return C.length===0?Promise.resolve():C.length===1?t(C[0],i):r(C,i)}())];return[2]}})})},[t,r,i]);return m},Xee=function(e,n){var t,r=e.className,i=e.renderFileUploadIcon,a=e.renderVoiceMessageIcon,s=e.renderSendMessageIcon,o=e.acceptableMimeTypes,l=yt().state.config,u=pr().isMobile,d=Ut().stringSet,f=l.isOnline,m=l.userMention,p=l.logger,E=l.groupChannel,_=qi(),b=_.state,C=b.currentChannel,y=b.parentMessage,T=b.isMuted,N=b.isChannelFrozen,w=b.allThreadMessages,O=_.actions,L=O.sendMessage,P=O.sendFileMessage,U=O.sendVoiceMessage,B=O.sendMultipleFilesMessage,F=M.useRef(),H=E.enableMention,G=E.enableVoiceMessage,j=(t=_.state.isMultipleFilesMessageEnabled)!==null&&t!==void 0?t:l.isMultipleFilesMessageEnabled,x=e.disabled||!f||T||(C==null?void 0:C.myRole)!==cd.OPERATOR&&N||y===null,V=Yee({sendFileMessage:P,sendMultipleFilesMessage:B,quoteMessage:y},{logger:p}),K=M.useState(""),W=K[0],Q=K[1],J=M.useState([]),$=J[0],te=J[1],re=M.useState([]),ve=re[0],ie=re[1],le=M.useState(null),Ae=le[0],oe=le[1],he=M.useState([]),me=he[0],Be=he[1],pe=M.useState(null),ye=pe[0],Ee=pe[1],Ue=M.useState(!1),Ye=Ue[0],De=Ue[1],We=f&&H&&W.length>0&&!NL(C)&&!IL(C)&&!(C!=null&&C.isBroadcast);M.useEffect(function(){De(!1)},[C==null?void 0:C.url]);var Je=jf({ref:n||F},{logger:p}),Le=(Je==null?void 0:Je.length)<(m==null?void 0:m.maxMentionCount);return M.useEffect(function(){te($.filter(function(He){var At=He.userId,Ve=ve.indexOf(At);return Ve<0?!1:(ve.splice(Ve,1),!0)}))},[ve]),C!=null&&C.isBroadcast&&(C==null?void 0:C.myRole)!==cd.OPERATOR?v.createElement(v.Fragment,null):v.createElement("div",{className:zt(Ye?"sendbird-thread-message-input--voice-message":"sendbird-thread-message-input",r)},We&&v.createElement(eS,{targetNickname:W,inputEvent:ye??void 0,onUserItemClick:function(He){He&&te(Ne(Ne([],$,!0),[He],!1)),Q(""),oe(He),Ee(null)},onFocusItemChange:function(){Ee(null)},onFetchUsers:function(He){Be(He)},ableAddMention:Le,maxMentionCount:m==null?void 0:m.maxMentionCount,maxSuggestionCount:m==null?void 0:m.maxSuggestionCount}),Ye?v.createElement(wL,{channel:C,onSubmitClick:function(He,At){U(He,At,y),De(!1)},onCancelClick:function(){De(!1)}}):v.createElement(gc,{className:"sendbird-thread-message-input__message-input",messageFieldId:"sendbird-message-input-text-field--thread",channel:C,channelUrl:C==null?void 0:C.url,isMobile:u,disabled:x,acceptableMimeTypes:o,setMentionedUsers:te,mentionSelectedUser:Ae,isMentionEnabled:H,isVoiceMessageEnabled:G,isSelectingMultipleFilesEnabled:j,onVoiceMessageIconClick:function(){De(!0)},renderFileUploadIcon:i,renderVoiceMessageIcon:a,renderSendMessageIcon:s,ref:n||F,placeholder:(C==null?void 0:C.isFrozen)&&(C==null?void 0:C.myRole)!==cd.OPERATOR&&d.MESSAGE_INPUT__PLACE_HOLDER__DISABLED||(C==null?void 0:C.myMutedState)===ns.MUTED&&d.MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT||(w.length>0?d.THREAD__INPUT__REPLY_TO_THREAD:d.THREAD__INPUT__REPLY_IN_THREAD),onStartTyping:function(){var He;(He=C==null?void 0:C.startTyping)===null||He===void 0||He.call(C)},onSendMessage:function(He){var At,Ve=He.message,st=He.mentionTemplate;L({message:Ve,mentionedUsers:$,mentionTemplate:st,quoteMessage:y}),Q(""),te([]),(At=C==null?void 0:C.endTyping)===null||At===void 0||At.call(C)},onFileUpload:V,onUserMentioned:function(He){(Ae==null?void 0:Ae.userId)===(He==null?void 0:He.userId)&&(oe(null),Q(""))},onMentionStringChange:function(He){Q(He)},onMentionedUserIdsUpdated:function(He){ie(He)},onKeyDown:function(He){return We&&(me==null?void 0:me.length)>0&&(He.key===ei.Enter&&Le||He.key===ei.ArrowUp||He.key===ei.ArrowDown)?(Ee(He),!0):!1}}))},Zee=v.forwardRef(Xee),Jee=function(e){var n=e.className,t=Jl();return v.createElement(T3,D({},t,{className:n,currentChannel:t.currentGroupChannel}))},ete=function(e){var n=Jl().deleteMessage;return v.createElement(_L,D({},e,{deleteMessage:n}))},tte=function(e){var n=Jl().deleteMessage;return v.createElement(EL,D({},e,{deleteMessage:n}))},Bw=function(e){var n,t,r=yt().state.config,i=Jl(),a=i.initialized,s=i.currentGroupChannel,o=i.animatedMessageId,l=i.setAnimatedMessageId,u=i.updateMessage,d=i.scrollToMessage,f=i.replyType,m=i.threadReplySelectType,p=i.isReactionEnabled,E=i.toggleReaction,_=i.emojiContainer,b=i.nicknamesMap,C=i.setQuoteMessage,y=i.resendMessage,T=i.deleteMessage,N=i.renderUserMentionItem,w=i.onReplyInThread,O=i.onQuoteMessageClick,L=i.onMessageAnimated,P=i.sendMessage,U=i.localMessages,B=i.allMessages,F=e.message;return s?v.createElement(gL,D({},e,{channel:s,emojiContainer:_,editInputDisabled:!a||NL(s)||IL(s)||!r.isOnline,shouldRenderSuggestedReplies:((n=r==null?void 0:r.groupChannel)===null||n===void 0?void 0:n.enableSuggestedReplies)&&(((t=r==null?void 0:r.groupChannel)===null||t===void 0?void 0:t.showSuggestedRepliesFor)==="all_messages"?!0:F.messageId===B[B.length-1].messageId)&&(U==null?void 0:U.length)===0&&Jb(F).length>0,isReactionEnabled:p,replyType:f,threadReplySelectType:m,nicknamesMap:b,renderUserMentionItem:N,scrollToMessage:d,toggleReaction:E,setQuoteMessage:C,onQuoteMessageClick:O,onReplyInThreadClick:w,sendUserMessage:function(H){P({message:H.message,mentionedUsers:H.mentionedUsers,mentionTemplate:H.mentionedMessageTemplate})},updateUserMessage:function(H,G){var j;u({messageId:H,message:(j=G.message)!==null&&j!==void 0?j:"",mentionedUsers:G.mentionedUsers,mentionTemplate:G.mentionedMessageTemplate})},resendMessage:y,deleteMessage:T,animatedMessageId:o,setAnimatedMessageId:l,onMessageAnimated:L,renderFileViewer:function(H){return v.createElement(ete,D({},H))},renderRemoveMessageModal:function(H){return v.createElement(tte,D({},H))}})):null},nte=100;function rte(e,n){return e-n}function lU(e){var n=e.hasMore,t=e.hasNext,r=e.onScroll,i=e.scrollRef,a=e.setShowScrollDownButton,s=mr(function(){var o=i==null?void 0:i.current;if(o!=null){var l=o.scrollTop,u=o.scrollHeight,d=o.clientHeight,f=rte(u,l);typeof a=="function"&&a(u>l+d+1),n&&Fo(l,0,ws)&&r(function(){var m=o.scrollHeight>u;m&&(o.scrollTop=o.scrollHeight-f)}),t&&Fo(d+l,u,ws)&&r(function(){var m=o.scrollHeight>u;m&&(o.scrollTop=l)})}});return IC(s,nte,{trailing:!0})}var ite=100;function ate(e){var n=e.loading,t=M.useState(0),r=t[0],i=t[1];M.useEffect(function(){n&&i(0)},[n]);var a=function(s){var o=s.target;try{i(o.scrollHeight-o.scrollTop-o.offsetHeight)}catch{}};return{scrollBottom:r,scrollToBottomHandler:IC(a,ite,{trailing:!0})}}function ste(){var e=Jl(),n=e.scrollRef,t=e.scrollBehavior,r=t===void 0?"auto":t;return M.useEffect(function(){n.current&&(n.current.style.scrollBehavior=r)},[n.current]),null}var ote=50,lte=function(e){var n,t,r,i,a,s,o,l=e.className,u=l===void 0?"":l,d=sa(e),f=d.renderMessage,m=d.renderMessageContent,p=d.renderSuggestedReplies,E=d.renderCustomSeparator,_=d.renderPlaceholderLoader,b=_===void 0?function(){return v.createElement(Nr,{type:Dn.LOADING})}:_,C=d.renderPlaceholderEmpty,y=C===void 0?function(){return v.createElement(Nr,{className:"sendbird-conversation__no-messages",type:Dn.NO_MESSAGES})}:C,T=d.renderFrozenNotification,N=T===void 0?function(){return v.createElement(bL,{className:"sendbird-conversation__messages__notification"})}:T,w=Jl(),O=w.allMessages,L=w.localMessages,P=w.hasMorePrev,U=w.hasMoreNext,B=w.setInitialTimeStamp,F=w.setAnimatedMessageId,H=w.setHighLightedMessageId,G=w.isMessageGroupingEnabled,j=w.scrollRef,x=w.onScrollCallback,V=w.onScrollDownCallback,K=w.messagesDispatcher,W=w.messageActionTypes,Q=w.currentGroupChannel,J=w.disableMarkAsRead,$=w.filterMessageList,te=w.replyType,re=w.loading,ve=w.isScrolled,ie=w.unreadSince,le=w.unreadSinceDate,Ae=w.typingMembers,oe=yt().state,he=Ut().stringSet,me=typeof $=="function"?O.filter($):O,Be=oe.config.markAsReadScheduler,pe=M.useState(!1),ye=pe[0],Ee=pe[1];ste();var Ue=function(Ve){var st=j==null?void 0:j.current;if(st!=null){var mt=st.scrollTop,et=st.clientHeight,St=st.scrollHeight;P&&Fo(mt,0,ws)&&x(Ve),U&&Fo(et+mt,St,ws)&&V(Ve),!J&&Fo(et+mt,St,ws)&&Q&&(K({type:W.MARK_AS_READ,payload:{channel:Q}}),Be.push(Q))}},Ye=function(){var Ve,st;B==null||B(null),F==null||F(null),H==null||H(null),j.current&&j.current.scrollTop>-1&&(j.current.scrollTop=((Ve=j.current.scrollHeight)!==null&&Ve!==void 0?Ve:0)-((st=j.current.offsetHeight)!==null&&st!==void 0?st:0))},De=function(Ve){Ve===void 0&&(Ve=!1);var st=j==null?void 0:j.current;if(st){var mt=st.scrollHeight-st.scrollTop-st.offsetHeight;At<mt&&(!Ve||At<ws)&&(st.scrollTop+=mt-At)}},We=lU({hasMore:P,hasNext:U,onScroll:Ue,scrollRef:j}),Je=Zl({onReachedBottom:function(){!U&&!J&&Q&&(K({type:W.MARK_AS_READ,payload:{channel:Q}}),Be.push(Q)),Ee(!0)},onReachedTop:function(){Ee(!1)},onInBetween:function(){Ee(!1)}}),Le=ate({loading:re}),He=Le.scrollToBottomHandler,At=Le.scrollBottom;return re?b():me.length<1?y():v.createElement(v.Fragment,null,!ve&&v.createElement(Nr,{type:Dn.LOADING}),v.createElement("div",{className:"sendbird-conversation__messages ".concat(u),dir:rC((n=oe==null?void 0:oe.config)===null||n===void 0?void 0:n.htmlTextDirection,(t=oe==null?void 0:oe.config)===null||t===void 0?void 0:t.forceLeftToRightMessageLayout)},v.createElement("div",{className:"sendbird-conversation__scroll-container"},v.createElement("div",{className:"sendbird-conversation__padding"}),v.createElement("div",{className:"sendbird-conversation__messages-padding","data-testid":"sendbird-message-list-container",ref:j,onScroll:function(Ve){We(),He(Ve),Je(Ve)}},me.map(function(Ve,st){var mt,et,St=sb({allMessages:me,stringSet:he,replyType:te,isMessageGroupingEnabled:G,currentIndex:st,currentMessage:Ve,currentChannel:Q}),Rt=St.chainTop,xe=St.chainBottom,Ht=St.hasSeparator,Xt=((mt=Ve==null?void 0:Ve.sender)===null||mt===void 0?void 0:mt.userId)===((et=oe==null?void 0:oe.config)===null||et===void 0?void 0:et.userId);return v.createElement(rc,{message:Ve,key:Ve==null?void 0:Ve.messageId,isByMe:Xt},v.createElement(Bw,{handleScroll:De,message:Ve,hasSeparator:Ht,chainTop:Rt,chainBottom:xe,renderMessageContent:m,renderSuggestedReplies:p,renderCustomSeparator:E,renderMessage:f}))}),L.map(function(Ve,st){var mt,et,St=sb({allMessages:me,stringSet:he,replyType:te,isMessageGroupingEnabled:G,currentIndex:st,currentMessage:Ve,currentChannel:Q}),Rt=St.chainTop,xe=St.chainBottom,Ht=((mt=Ve==null?void 0:Ve.sender)===null||mt===void 0?void 0:mt.userId)===((et=oe==null?void 0:oe.config)===null||et===void 0?void 0:et.userId);return v.createElement(rc,{message:Ve,key:Ve==null?void 0:Ve.messageId,isByMe:Ht},v.createElement(Bw,{handleScroll:De,message:Ve,chainTop:Rt,chainBottom:xe,renderMessageContent:m,renderSuggestedReplies:p,renderCustomSeparator:E,renderMessage:f}))}),!U&&((i=(r=oe==null?void 0:oe.config)===null||r===void 0?void 0:r.groupChannel)===null||i===void 0?void 0:i.enableTypingIndicator)&&((o=(s=(a=oe==null?void 0:oe.config)===null||a===void 0?void 0:a.groupChannel)===null||s===void 0?void 0:s.typingIndicatorTypes)===null||o===void 0?void 0:o.has(wf.Bubble))&&v.createElement(SL,{typingMembers:Ae,handleScroll:De}))),(Q==null?void 0:Q.isFrozen)&&N(),(!ye||U)&&(ie||le)&&v.createElement(yL,{className:"sendbird-conversation__messages__notification",count:Q==null?void 0:Q.unreadMessageCount,time:ie,lastReadAt:le,onClick:function(){j!=null&&j.current&&(j.current.scrollTop=j.current.scrollHeight),!J&&Q&&(Be.push(Q),K({type:W.MARK_AS_READ,payload:{channel:Q}})),B(null),F(null),H(null)}}),At>ote&&v.createElement("div",{className:"sendbird-conversation__scroll-bottom-button",onClick:Ye,onKeyDown:Ye,tabIndex:0,role:"button"},v.createElement(qe,{width:"24px",height:"24px",type:Se.CHEVRON_DOWN,fillColor:ze.PRIMARY}))))},ute=function(e){var n=Jl(),t=n.quoteMessage,r=n.currentGroupChannel,i=n.sendMessage,a=n.sendFileMessage,s=n.sendVoiceMessage,o=n.sendMultipleFilesMessage;return v.createElement(RL,D({},e,n,{currentChannel:r,messages:n.allMessages,sendUserMessage:function(l){return i({message:l.message,mentionTemplate:l.mentionedMessageTemplate,mentionedUsers:l.mentionedUsers,quoteMessage:t??void 0})},sendFileMessage:function(l){return a(l.file,t??void 0)},sendVoiceMessage:function(l,u){var d=l.file;return s(d,u,t??void 0)},sendMultipleFilesMessage:function(l){var u=l.fileInfoList;return o(u.map(function(d){return d.file}),t??void 0)}}))},cte=function(e){var n=Jl(),t=n.channelUrl,r=n.isInvalid,i=sa(e),a=i.renderChannelHeader,s=a===void 0?function(f){return v.createElement(Jee,D({},f))}:a,o=i.renderMessageList,l=o===void 0?function(f){return v.createElement(lte,D({},f,{className:"sendbird-conversation__message-list"}))}:o,u=i.renderMessageInput,d=u===void 0?function(){return v.createElement(ute,D({},e))}:u;return v.createElement(_3,D({},e,n,{isLoading:e==null?void 0:e.isLoading,isInvalid:r,channelUrl:t,renderChannelHeader:s,renderMessageList:l,renderMessageInput:d}))},uU=function(e){return v.createElement(NJ,D({},e),v.createElement(cte,D({},e)))},dte=function(e){var n,t,r,i,a=e.channel,s=e.isActive,o=s===void 0?!1:s,l=e.isSelected,u=l===void 0?!1:l,d=e.isTyping,f=d===void 0?!1:d,m=e.renderChannelAction,p=e.onLeaveChannel,E=e.onClick,_=e.tabIndex,b=yt().state,C=b.config,y=Ut().stringSet,T=KC(),N=T.isTypingIndicatorEnabled,w=N===void 0?!1:N,O=T.isMessageReceiptStatusEnabled,L=O===void 0?!1:O,P=C.userId,U=L&&(((n=a==null?void 0:a.lastMessage)===null||n===void 0?void 0:n.messageType)==="user"||((t=a==null?void 0:a.lastMessage)===null||t===void 0?void 0:t.messageType)==="file")&&((i=(r=a==null?void 0:a.lastMessage)===null||r===void 0?void 0:r.sender)===null||i===void 0?void 0:i.userId)===P;return v.createElement(kL,{channel:a,tabIndex:_,isTyping:w&&f,isSelected:u??o,channelName:G3(a,P,y),isMessageStatusEnabled:U,onClick:E,onLeaveChannel:p,renderChannelAction:m})},hte=function(e){var n=e.onCloseClick,t=e.renderLeft,r=e.renderMiddle,i=e.renderRight,a=Ut().stringSet,s=yt().state,o=s.config,l=o.logger;return v.createElement(hi,{className:"sendbird-channel-settings__header",renderLeft:t,renderMiddle:r??function(){return v.createElement(hi.Title,{title:a.CHANNEL_SETTING__HEADER__TITLE})},renderRight:i??function(){return v.createElement("div",{className:"sendbird-channel-settings__header-icon"},v.createElement(hi.IconButton,{type:Se.CLOSE,onClick:function(u){l.info("ChannelSettings: Click close"),n(u)}}))}})},fte=function(e){var n,t,r,i=e.onSubmit,a=e.onCancel,s=ki().state,o=s.channel,l=s.onChannelModified,u=s.onBeforeUpdateChannel,d=s.setChannelUpdateId,f=o==null?void 0:o.name,m=yt().state,p=(n=m==null?void 0:m.config)===null||n===void 0?void 0:n.userId,E=(t=m==null?void 0:m.config)===null||t===void 0?void 0:t.theme,_=(r=m==null?void 0:m.config)===null||r===void 0?void 0:r.logger,b=M.useRef(null),C=M.useRef(null),y=M.useRef(null),T=M.useState(null),N=T[0],w=T[1],O=M.useState(null),L=O[0],P=O[1],U=M.useContext(On).stringSet;return v.createElement(wr,{isFullScreenOnMobile:!0,titleText:U.MODAL__CHANNEL_INFORMATION__TITLE,submitText:U.BUTTON__SAVE,onCancel:a,onSubmit:function(){var B,F,H;if(f!==""&&!(!((B=b.current)===null||B===void 0)&&B.value)){!((F=C.current)===null||F===void 0)&&F.reportValidity&&C.current.reportValidity();return}var G=(H=b.current)===null||H===void 0?void 0:H.value,j=L;if(_.info("ChannelSettings: Channel information being updated",{currentTitle:G,currentImg:j}),u){_.info("ChannelSettings: onBeforeUpdateChannel");var x=u(G??"",j,o==null?void 0:o.data);o==null||o.updateChannel(x).then(function(V){l==null||l(V),d(qr()),i()})}else _.info("ChannelSettings: normal"),o==null||o.updateChannel({coverImage:j,name:G,data:(o==null?void 0:o.data)||""}).then(function(V){_.info("ChannelSettings: Channel information updated",V),l==null||l(V),d==null||d(qr()),i()})},type:Vn.PRIMARY},v.createElement("form",{className:"channel-profile-form",ref:C,onSubmit:function(B){B.preventDefault()}},v.createElement("div",{className:"channel-profile-form__img-section"},v.createElement(od,null,U.MODAL__CHANNEL_INFORMATION__CHANNEL_IMAGE),v.createElement("div",{className:"channel-profile-form__avatar"},N?v.createElement(Fr,{height:"80px",width:"80px",src:N}):v.createElement(t0,{height:80,width:80,channel:o,userId:p,theme:E})),v.createElement("input",{ref:y,type:"file",accept:"image/gif, image/jpeg, image/png",style:{display:"none"},onChange:function(B){B.target.files&&(w(URL.createObjectURL(B.target.files[0])),P(B.target.files[0])),y.current&&(y.current.value="")}}),v.createElement(so,{className:"channel-profile-form__avatar-button",onClick:function(){var B;return(B=y.current)===null||B===void 0?void 0:B.click()},disableUnderline:!0},v.createElement(Me,{type:be.BUTTON_1,color:de.PRIMARY},U.MODAL__CHANNEL_INFORMATION__UPLOAD))),v.createElement("div",{className:"channel-profile-form__name-section"},v.createElement(od,null,U.MODAL__CHANNEL_INFORMATION__CHANNEL_NAME),v.createElement(Ip,{required:f!=="",name:"channel-profile-form__name",ref:b,value:f,placeHolder:U.MODAL__CHANNEL_INFORMATION__INPUT__PLACE_HOLDER}))))},vte=function(){var e,n,t,r=yt().state,i=ki().state.channel,a=M.useContext(On).stringSet,s=M.useState(!1),o=s[0],l=s[1],u=(e=r==null?void 0:r.config)===null||e===void 0?void 0:e.userId,d=((n=r==null?void 0:r.config)===null||n===void 0?void 0:n.theme)||"light",f=(t=r==null?void 0:r.config)===null||t===void 0?void 0:t.isOnline,m=!f,p=M.useMemo(function(){return!(i!=null&&i.name)&&!(i!=null&&i.members)?a.NO_TITLE:Ff(i)?((i==null?void 0:i.members)||[]).map(function(E){return E.nickname||a.NO_NAME}).join(", "):i.name},[i==null?void 0:i.name,i==null?void 0:i.joinedMemberCount]);return v.createElement("div",{className:"sendbird-channel-profile"},v.createElement("div",{className:"sendbird-channel-profile--inner"},v.createElement("div",{className:"sendbird-channel-profile__avatar"},v.createElement(t0,{channel:i,userId:u,theme:d,width:80,height:80})),v.createElement(Me,{className:"sendbird-channel-profile__title",type:be.SUBTITLE_2,color:de.ONBACKGROUND_1},p),v.createElement(so,{disabled:m,className:"sendbird-channel-profile__edit",onClick:function(){m||l(!0)},disableUnderline:!0},v.createElement(Me,{type:be.BUTTON_1,color:m?de.ONBACKGROUND_2:de.PRIMARY},a.CHANNEL_SETTING__PROFILE__EDIT)),o&&v.createElement(fte,{onCancel:function(){return l(!1)},onSubmit:function(){return l(!1)}})))},mte=function(e){var n,t,r=e.onSubmit,i=r===void 0?_n:r,a=e.onCancel,s=a===void 0?_n:a,o=ki().state,l=o.channel,u=o.onLeaveChannel,d=Ut().stringSet,f=yt().state,m=(n=f==null?void 0:f.config)===null||n===void 0?void 0:n.logger,p=(t=f==null?void 0:f.config)===null||t===void 0?void 0:t.isOnline,E=pr().isMobile,_=function(b){return!(b!=null&&b.name)&&!(b!=null&&b.members)?d.NO_TITLE:Ff(b)?((b==null?void 0:b.members)||[]).map(function(C){return C.nickname||d.NO_NAME}).join(", "):b.name};return E?v.createElement(wr,{className:"sendbird-channel-settings__leave--mobile",titleText:_(l),hideFooter:!0,isCloseOnClickOutside:!0,onCancel:s},v.createElement(so,{onClick:function(){m.info("ChannelSettings: Leaving channel",l),l==null||l.leave().then(function(){m.info("ChannelSettings: Leaving channel successful!",l),u==null||u()})},className:"sendbird-channel-settings__leave-label--mobile"},v.createElement(Me,{type:be.SUBTITLE_1,color:de.ONBACKGROUND_1},d.CHANNEL_PREVIEW_MOBILE_LEAVE))):v.createElement(wr,{isFullScreenOnMobile:!0,disabled:!p,onCancel:s,onSubmit:function(){m.info("ChannelSettings: Leaving channel",l),l==null||l.leave().then(function(){m.info("ChannelSettings: Leaving channel successful!",l),u?u():i()})},submitText:d.MODAL__LEAVE_CHANNEL__FOOTER,titleText:d.MODAL__LEAVE_CHANNEL__TITLE})},pte=function(e){var n=e.menuItems,t=ki().state.channel,r=ML(t)?n.operator:n.nonOperator,i=M.useState(null),a=i[0],s=i[1];return v.createElement("div",{className:"sendbird-channel-settings__operator"},Object.entries(r).map(function(o){var l=o[0],u=o[1];return u.hideMenu?null:v.createElement(aU,{key:l,onClick:u.onClick,onKeyDown:u.onKeyDown,renderLeft:function(){return v.createElement(qe,D({},u.icon))},renderMiddle:function(){return v.createElement(Me,D({},u.label))},renderRight:u.rightComponent,renderAccordion:u.accordionComponent,accordionOpened:a===l,setAccordionOpened:function(){s(function(d){return d===l?null:l})}})}))},gte=function(e){var n=sa(e),t=n.renderHeader,r=t===void 0?function(L){return v.createElement(hte,D({},L))}:t,i=n.renderLeaveChannel,a=n.renderChannelProfile,s=n.renderModerationPanel,o=s===void 0?function(L){return v.createElement(pte,D({},L))}:s,l=n.renderPlaceholderError,u=n.renderPlaceholderLoading,d=yt().state,f=d.config.isOnline,m=ki().state,p=m.channel,E=m.invalidChannel,_=m.onCloseClick,b=m.loading,C=Ut().stringSet,y=gee(),T=M.useState(!1),N=T[0],w=T[1];if(b)return u?u():v.createElement(Nr,{type:Dn.LOADING});var O={onCloseClick:_};return E||!p?v.createElement("div",null,r(O),v.createElement("div",null,l?l():v.createElement(Nr,{type:Dn.WRONG}))):v.createElement(v.Fragment,null,r(O),v.createElement("div",{className:"sendbird-channel-settings__scroll-area"},(a==null?void 0:a())||v.createElement(vte,null),o==null?void 0:o({menuItems:y}),(i==null?void 0:i())||v.createElement(aU,{className:zt(f?"":"sendbird-channel-settings__panel-item__disabled","sendbird-channel-settings__panel-item__leave-channel"),onKeyDown:function(){f&&w(!0)},onClick:function(){f&&w(!0)},renderLeft:function(){return v.createElement(qe,{className:["sendbird-channel-settings__panel-icon-left","sendbird-channel-settings__panel-icon__leave"].join(" "),type:Se.LEAVE,fillColor:ze.ERROR,height:"24px",width:"24px"})},renderMiddle:function(){return v.createElement(Me,{type:be.SUBTITLE_1,color:de.ONBACKGROUND_1},C.CHANNEL_SETTING__LEAVE_CHANNEL__TITLE)}}),N&&v.createElement(mte,{onCancel:function(){w(!1)},onSubmit:function(){w(!1),_==null||_()}})))},cU=function(e){return v.createElement($J,D({},e),v.createElement(gte,D({},e)))};function _te(e){var n=e.createdAt,t=e.locale,r=e.stringSet,i={locale:t};return n?uC(n)?Ar(n,r.DATE_FORMAT__LAST_MESSAGE_CREATED_AT__TODAY,i):dC(n)?r.MESSAGE_STATUS__YESTERDAY:cC(n)?Ar(n,r.DATE_FORMAT__LAST_MESSAGE_CREATED_AT__THIS_YEAR,i):Ar(n,r.DATE_FORMAT__LAST_MESSAGE_CREATED_AT__PREVIOUS_YEAR,i):""}function Ete(e){var n=e.className,t=e.message,r=e.selected,i=e.onClick,a=t.createdAt,s=t.message,o=t.sender||t._sender,l=o.profileUrl,u=o.nickname,d=Ut(),f=d.stringSet,m=d.dateLocale;return v.createElement("div",{className:Ne(Ne([],Array.isArray(n)?n:[n],!0),["sendbird-message-search-item",r?"sendbird-message-search-item--selected":""],!1).join(" "),onClick:function(p){p.stopPropagation(),i==null||i(t)}},v.createElement("div",{className:"sendbird-message-search-item__left"},v.createElement(Fr,{className:"sendbird-message-search-item__left__sender-avatar",src:l,alt:"profile image",width:"56px",height:"56px"})),v.createElement("div",{className:"sendbird-message-search-item__right"},v.createElement(Me,{className:"sendbird-message-search-item__right__sender-name",type:be.SUBTITLE_2,color:de.ONBACKGROUND_1},u||f.NO_NAME),v.createElement(Me,{className:"sendbird-message-search-item__right__message-text",type:be.BODY_2,color:de.ONBACKGROUND_3},s),v.createElement(Me,{className:"sendbird-message-search-item__right__message-created-at",type:be.CAPTION_3,color:de.ONBACKGROUND_2},_te({createdAt:a,locale:m,stringSet:f}))),v.createElement("div",{className:"sendbird-message-search-item__right-footer"}))}function yte(e){var n=e.createdAt,t=e.locale,r=e.stringSet,i={locale:t};return n?uC(n)?Ar(n,r.DATE_FORMAT__LAST_MESSAGE_CREATED_AT__TODAY,i):dC(n)?r.MESSAGE_STATUS__YESTERDAY:cC(n)?Ar(n,r.DATE_FORMAT__LAST_MESSAGE_CREATED_AT__THIS_YEAR,i):Ar(n,r.DATE_FORMAT__LAST_MESSAGE_CREATED_AT__PREVIOUS_YEAR,i):""}function bte(e){var n,t,r,i=(n=Td(e))!==null&&n!==void 0?n:"",a=(r=(t=i.match(/\.([^.]*?)(?=\?|#|$)/))===null||t===void 0?void 0:t[1])!==null&&r!==void 0?r:"";return/(jpg|jpeg|png)$/i.test(a)?Se.PHOTO:/mp4$/i.test(a)||ja(e)?Se.PLAY:/mp3/i.test(a)?Se.FILE_AUDIO:/gif/i.test(a)?Se.GIF:Se.FILE_DOCUMENT}function Cte(e){var n=e.className,t=e.message,r=e.selected,i=e.onClick,a=t.createdAt,s=Td(t),o=gC(t),l=t.sender||t._sender,u=l.profileUrl,d=l.nickname,f=Ut(),m=f.stringSet,p=f.dateLocale,E=ja(t),_=E?m.VOICE_MESSAGE:o||s;return v.createElement("div",{className:Ne(Ne([],Array.isArray(n)?n:[n],!0),["sendbird-message-search-file-item",r?"sendbird-message-search-file-item--selected":""],!1).join(" "),onClick:function(b){b.stopPropagation(),i==null||i(t)}},v.createElement("div",{className:"sendbird-message-search-file-item__left"},v.createElement(Fr,{className:"sendbird-message-search-file-item__left__sender-avatar",src:u,alt:"profile image",width:"56px",height:"56px"})),v.createElement("div",{className:"sendbird-message-search-file-item__right"},v.createElement(Me,{className:"sendbird-message-search-file-item__right__sender-name",type:be.SUBTITLE_2,color:de.ONBACKGROUND_1},d||m.NO_NAME),v.createElement("div",{className:"sendbird-message-search-file-item__right__content"},!E&&v.createElement("div",{className:"sendbird-message-search-file-item__right__content__type-icon"},v.createElement(qe,{type:bte(t),fillColor:ze.PRIMARY,width:"18px",height:"18px"})),v.createElement(Me,{className:"sendbird-message-search-file-item__right__content__url",type:be.BODY_2,color:de.ONBACKGROUND_1},_))),v.createElement(Me,{className:"sendbird-message-search-file-item__message-created-at",type:be.CAPTION_3,color:de.ONBACKGROUND_2},yte({createdAt:a,locale:p,stringSet:m})),v.createElement("div",{className:"sendbird-message-search-file-item__right-footer"}))}var Ste=function(e){var n=e.renderPlaceHolderError,t=e.renderPlaceHolderLoading,r=e.renderPlaceHolderNoString,i=e.renderPlaceHolderEmptyList,a=e.renderSearchItem,s=Wf(),o=s.state,l=o.isInvalid,u=o.searchString,d=o.requestString,f=o.currentChannel,m=o.loading,p=o.scrollRef,E=o.hasMoreResult,_=o.onScroll,b=o.allMessages,C=o.onResultClick,y=o.selectedMessageId,T=s.actions,N=T.setSelectedMessageId,w=T.handleRetryToConnect,O=M.useContext(On).stringSet,L=function(U){var B=U.target,F=B.scrollTop,H=B.scrollHeight,G=B.clientHeight;E&&F+G>=H-1&&_(function(){})},P=function(){return!(f!=null&&f.name)&&!(f!=null&&f.members)?O.NO_TITLE:Ff(f)?f.members.map(function(U){return U.nickname||O.NO_NAME}).join(", "):f==null?void 0:f.name};return l&&u&&d?(n==null?void 0:n())||v.createElement("div",{className:"sendbird-message-search"},v.createElement(Nr,{type:Dn.WRONG,retryToConnect:w})):m&&u&&d?(t==null?void 0:t())||v.createElement("div",{className:"sendbird-message-search"},v.createElement(Nr,{type:Dn.SEARCHING})):u?v.createElement("div",{className:"sendbird-message-search",onScroll:L,ref:p},b.length>0?b.map(function(U){return a?a({message:U,onResultClick:C}):U.messageType==="file"?v.createElement(Cte,{className:"sendbird-message-search__message-search-item",message:U,key:U.messageId,selected:y===U.messageId,onClick:function(){C==null||C(U),N(U.messageId)}}):v.createElement(Ete,{className:"sendbird-message-search__message-search-item",message:U,key:U.messageId,selected:y===U.messageId,onClick:function(){C==null||C(U),N(U.messageId)}})}):(i==null?void 0:i())||v.createElement(Nr,{type:Dn.NO_RESULTS})):(r==null?void 0:r())||v.createElement("div",{className:"sendbird-message-search"},v.createElement(Nr,{type:Dn.SEARCH_IN,searchInString:P()}))};function dU(e){var n=e.channelUrl,t=e.onResultClick,r=e.onCloseClick,i=e.messageSearchQuery,a=e.renderPlaceHolderError,s=e.renderPlaceHolderLoading,o=e.renderPlaceHolderNoString,l=e.renderPlaceHolderEmptyList,u=e.renderSearchItem,d=M.useState(""),f=d[0],m=d[1],p=M.useState(""),E=p[0],_=p[1],b=M.useState(!1),C=b[0],y=b[1],T=M.useContext(On).stringSet,N=null;M.useEffect(function(){N&&clearTimeout(N),N=setTimeout(function(){m(E),y(!0),N=null},500)},[E]);var w=function(P){_(P.target.value)},O=function(){y(!1)},L=function(P){P.stopPropagation(),_(""),m("")};return v.createElement("div",{className:"sendbird-message-search-pannel"},v.createElement(hi,{className:"sendbird-message-search-pannel__header",renderMiddle:function(){return v.createElement(hi.Title,{title:T.SEARCH_IN_CHANNEL})},renderRight:function(){return v.createElement(hi.IconButton,{className:"sendbird-message-search-pannel__header__close-button",onClick:r,type:Se.CLOSE,color:ze.ON_BACKGROUND_1})}}),v.createElement("div",{className:"sendbird-message-search-pannel__input"},v.createElement("div",{className:"sendbird-message-search-pannel__input__container"},v.createElement(qe,{className:"sendbird-message-search-pannel__input__container__search-icon",type:Se.SEARCH,fillColor:ze.ON_BACKGROUND_3,width:"24px",height:"24px"}),v.createElement("input",{className:"sendbird-message-search-pannel__input__container__input-area",placeholder:T.SEARCH,value:E,onChange:w}),E&&C&&v.createElement(Xo,{className:"sendbird-message-search-pannel__input__container__spinner",width:"20px",height:"20px"},v.createElement(qe,{type:Se.SPINNER,fillColor:ze.PRIMARY,width:"20px",height:"20px"})),!C&&E&&v.createElement(qe,{className:"sendbird-message-search-pannel__input__container__reset-input-button",type:Se.REMOVE,fillColor:ze.ON_BACKGROUND_3,width:"20px",height:"20px",onClick:L}))),v.createElement("div",{className:"sendbird-message-search-pannel__message-search"},v.createElement(Nee,{channelUrl:n,searchString:f,onResultClick:t,onResultLoaded:O,messageSearchQuery:i},v.createElement(Ste,{renderPlaceHolderError:a,renderPlaceHolderLoading:s,renderPlaceHolderNoString:o,renderPlaceHolderEmptyList:l,renderSearchItem:u}))))}var hU=function(e){var n,t,r=e.onCancel,i=e.onSubmit,a=e.message,s=M.useContext(On).stringSet,o=qi().actions.deleteMessage;return v.createElement(wr,{type:Vn.DANGER,disabled:((t=(n=a.threadInfo)===null||n===void 0?void 0:n.replyCount)!==null&&t!==void 0?t:0)>0,onCancel:r,onSubmit:function(){o(a).then(function(){r==null||r(),i==null||i()})},submitText:s.MESSAGE_MENU__DELETE,titleText:TC(s,a)})};function Tte(e){var n=this,t,r,i,a,s,o,l,u,d=e.className,f=e.message,m=e.showFileViewer,p=e.onBeforeDownloadFileMessage,E=p===void 0?null:p,_=yt().state,b=_.stores,C=_.config,y=_.eventHandlers,T=C.logger,N=(t=y==null?void 0:y.reaction)===null||t===void 0?void 0:t.onPressUserProfile,w=(i=(r=b==null?void 0:b.userStore)===null||r===void 0?void 0:r.user)===null||i===void 0?void 0:i.userId,O=Ut().stringSet,L=qi(),P=L.state,U=P.currentChannel,B=P.emojiContainer,F=P.nicknamesMap,H=P.filterEmojiCategoryIds,G=L.actions.toggleReaction,j=pr().isMobile,x=C.groupChannel.enableReactions,V=C.groupChannel.enableMention,K=yC({threadMessageKind:Mp.PARENT,isMobile:j}),W=bC(f),Q=V&&(f==null?void 0:f.isUserMessage())&&((a=f==null?void 0:f.mentionedMessageTemplate)===null||a===void 0?void 0:a.length)>0&&(f==null?void 0:f.mentionedUsers)&&f.mentionedUsers.length>0,J=x&&C.groupChannel.replyType==="thread"&&((s=f==null?void 0:f.reactions)===null||s===void 0?void 0:s.length)>0,$=M.useMemo(function(){var oe;return Wl(Q?{mentionedUsers:(oe=f==null?void 0:f.mentionedUsers)!==null&&oe!==void 0?oe:void 0,messageText:f==null?void 0:f.mentionedMessageTemplate,includeMarkdown:C.groupChannel.enableMarkdownForUserMessage}:{messageText:f==null?void 0:f.message,includeMarkdown:C.groupChannel.enableMarkdownForUserMessage})},[f==null?void 0:f.updatedAt,f==null?void 0:f.message]),te=function(){Di(f)&&Pd(f.url)},re=E?function(){return tn(n,void 0,void 0,function(){var oe,he,me,Be;return nn(this,function(pe){switch(pe.label){case 0:if(f.messageType!=="file")return[3,4];pe.label=1;case 1:return pe.trys.push([1,3,,4]),[4,E({message:f})];case 2:return oe=pe.sent(),oe?te():(me=T==null?void 0:T.info)===null||me===void 0||me.call(T,"ParentMessageInfoItem: Not allowed to download."),[3,4];case 3:return he=pe.sent(),(Be=T==null?void 0:T.error)===null||Be===void 0||Be.call(T,"ParentMessageInfoItem: Error occurred while determining download continuation:",he),[3,4];case 4:return[2]}})})}:te,ve=M.useState(!1),ie=ve[0],le=ve[1],Ae=((o=f==null?void 0:f.thumbnails)===null||o===void 0?void 0:o.length)>0?(l=f==null?void 0:f.thumbnails[0])===null||l===void 0?void 0:l.url:"";return v.createElement("div",{className:"sendbird-parent-message-info-item ".concat(d)},Vi(f)&&v.createElement(Me,{className:"sendbird-parent-message-info-item__text-message",type:be.BODY_1,color:de.ONBACKGROUND_1},v.createElement(Md,{tokens:$}),Zp(f)&&v.createElement(Me,{className:"sendbird-parent-message-info-item__text-message edited",type:be.BODY_1,color:de.ONBACKGROUND_2}," ".concat(O.MESSAGE_EDITED," "))),If(f)===$h().FILE&&v.createElement("div",{className:"sendbird-parent-message-info-item__file-message"},v.createElement("div",{className:"sendbird-parent-message-info-item__file-message__file-icon"},v.createElement(qe,{className:"sendbird-parent-message-info-item__file-message__file-icon__icon",type:{IMAGE:Se.PHOTO,VIDEO:Se.PLAY,AUDIO:Se.FILE_AUDIO,GIF:Se.GIF,OTHERS:Se.FILE_DOCUMENT}[Zb(f==null?void 0:f.type)],fillColor:ze.PRIMARY,width:"24px",height:"24px"})),v.createElement(so,{className:"sendbird-parent-message-info-item__file-message__file-name",onClick:re,color:ma.ONBACKGROUND_1},v.createElement(Me,{className:"sendbird-parent-message-info-item__file-message__file-name__text",type:be.BODY_1,color:de.ONBACKGROUND_1},eC((f==null?void 0:f.name)||(f==null?void 0:f.url),30)))),Oi(f)&&v.createElement(Y3,{className:"sendbird-parent-message-info-item__multiple-files-message-wrapper",message:f,isByMe:!1,isReactionEnabled:x,threadMessageKindKey:K,statefulFileInfoList:W,onBeforeDownloadFileMessage:E}),ja(f)&&v.createElement("div",{className:"sendbird-parent-message-info-item__voice-message"},v.createElement(eL,{className:"sendbird-parent-message-info-item__voice-message__item",message:f,channelUrl:U==null?void 0:U.url,isByMe:!1,isReactionEnabled:x})),io(f)&&v.createElement("div",{className:"sendbird-parent-message-info-item__thumbnail-message",onClick:function(){yd(f)&&(m==null||m(!0))}},v.createElement(yr,{className:"sendbird-parent-message-info-item__thumbnail-message__thumbnail",url:Ae||(f==null?void 0:f.url)||(f==null?void 0:f.plainUrl),alt:f==null?void 0:f.type,width:"200px",height:"148px",onLoad:function(){le(!0)},placeHolder:function(oe){var he=oe.style;return v.createElement("div",{className:"sendbird-parent-message-info-item__thumbnail-message__placeholder",style:he},v.createElement("div",{className:"sendbird-parent-message-info-item__thumbnail-message__placeholder__icon"},v.createElement(qe,{type:Ys(f)?Se.PLAY:Se.PHOTO,fillColor:ze.ON_BACKGROUND_2,width:"34px",height:"34px"})))}}),Ys(f)&&!Ae&&!ie&&v.createElement("video",{className:"sendbird-parent-message-info-item__thumbnail-message__video"},v.createElement("source",{src:(f==null?void 0:f.url)||(f==null?void 0:f.plainUrl),type:f==null?void 0:f.type})),v.createElement("div",{className:"sendbird-parent-message-info-item__thumbnail-message__image-cover"}),(Ys(f)||yp(f))&&v.createElement("div",{className:"sendbird-parent-message-info-item__thumbnail-message__icon-wrapper"},v.createElement("div",{className:"sendbird-parent-message-info-item__thumbnail-message__icon-wrapper__icon"},v.createElement(qe,{type:Ys(f)?Se.PLAY:Se.GIF,fillColor:ze.ON_BACKGROUND_2,width:"34px",height:"34px"})))),If(f)===((u=$h==null?void 0:$h())===null||u===void 0?void 0:u.UNKNOWN)&&v.createElement("div",{className:"sendbird-parent-message-info-item__unknown-message"},v.createElement(Me,{className:"sendbird-parent-message-info-item__unknown-message__header",type:be.BODY_1,color:de.ONBACKGROUND_1},O.UNKNOWN__UNKNOWN_MESSAGE_TYPE),v.createElement(Me,{className:"sendbird-parent-message-info-item__unknown-message__description",type:be.BODY_1,color:de.ONBACKGROUND_2},O.UNKNOWN__CANNOT_READ_MESSAGE)),J&&v.createElement("div",{className:"sendbird-parent-message-info__reactions"},v.createElement(pC,{userId:w,message:f,channel:U,isByMe:!1,emojiContainer:B,memberNicknamesMap:F,toggleReaction:G,onPressUserProfile:N,filterEmojiCategoryIds:H})))}function Mte(e){var n=this,t,r,i,a,s,o,l=e.className,u=e.renderEmojiMenu,d=u===void 0?function(pt){return v.createElement(vC,D({},pt))}:u,f=e.renderMessageMenu,m=f===void 0?function(pt){return v.createElement(fC,D({},pt))}:f,p=yt().state,E=p.stores,_=p.config,b=_.isOnline,C=_.userMention,y=_.logger,T=_.groupChannel,N=(r=(t=E.userStore.user)===null||t===void 0?void 0:t.userId)!==null&&r!==void 0?r:"",w=Ut(),O=w.dateLocale,L=w.stringSet,P=qi(),U=P.state,B=U.currentChannel,F=U.parentMessage,H=U.allThreadMessages,G=U.emojiContainer,j=U.onMoveToParentMessage,x=U.onHeaderActionClick,V=U.isMuted,K=U.isChannelFrozen,W=U.onBeforeDownloadFileMessage,Q=U.filterEmojiCategoryIds,J=P.actions,$=J.toggleReaction,te=J.updateMessage,re=J.deleteMessage,ve=pr().isMobile,ie=CC("#".concat(Hf(F.messageId),".").concat(Bf),[document.getElementById(bd),document.getElementById(Gf)]),le=M.useState(!1),Ae=le[0],oe=le[1],he=M.useState(!1),me=he[0],Be=he[1],pe=zf({channel:B,config:_}),ye=T.enableMention,Ee=zo(T.replyType).upperCase,Ue=N===F.sender.userId,Ye=M.useRef(null),De=M.useState(!1),We=De[0],Je=De[1],Le=cs({onLongPress:function(){ve&&Je(!0)}},{shouldPreventDefault:!1}),He=M.useState(!1),At=He[0],Ve=He[1],st=!b||V||K&&(B==null?void 0:B.myRole)!==cd.OPERATOR,mt=M.useRef(null),et=M.useState(""),St=et[0],Rt=et[1],xe=M.useState([]),Ht=xe[0],Xt=xe[1],Ke=M.useState([]),Ct=Ke[0],Dt=Ke[1],Vt=M.useState(null),rn=Vt[0],Zt=Vt[1],Mn=M.useState(null),cn=Mn[0],ht=Mn[1],ct=M.useState([]),dt=ct[0],ke=ct[1],ge=b&&ye&&St.length>0&&!V&&!(K&&B.myRole!==cd.OPERATOR),Xe=jf({ref:mt},{logger:y}),Et=(Xe==null?void 0:Xe.length)<(C==null?void 0:C.maxMentionCount);M.useEffect(function(){Xt(Ht.filter(function(pt){var Mt=pt.userId,dn=Ct.indexOf(Mt);return dn<0?!1:(Ct.splice(dn,1),!0)}))},[Ct]);var Pt=function(pt){return tn(n,void 0,void 0,function(){var Mt,dn,In,Ze;return nn(this,function(ot){switch(ot.label){case 0:if(!W)return[2];ot.label=1;case 1:return ot.trys.push([1,3,,4]),[4,W({message:F})];case 2:return Mt=ot.sent(),Mt||(pt.preventDefault(),(In=y==null?void 0:y.info)===null||In===void 0||In.call(y,"ParentMessageInfo: Not allowed to download.")),[3,4];case 3:return dn=ot.sent(),(Ze=y==null?void 0:y.error)===null||Ze===void 0||Ze.call(y,"ParentMessageInfo: Error occurred while determining download continuation:",dn),[3,4];case 4:return[2]}})})},Jt=M.useRef(null),Tt=Yl(),vn=Tt.disableUserProfile,Sn=Tt.renderUserProfile;return At&&(!((i=F==null?void 0:F.isUserMessage)===null||i===void 0)&&i.call(F))?v.createElement(v.Fragment,null,ge&&v.createElement(eS,{className:"parent-message-info--suggested-mention-list",targetNickname:St,inputEvent:rn??void 0,onUserItemClick:function(pt){pt&&Xt(Ne(Ne([],Ht,!0),[pt],!1)),Rt(""),ht(pt),Zt(null)},onFocusItemChange:function(){Zt(null)},onFetchUsers:function(pt){ke(pt)},ableAddMention:Et,maxMentionCount:C==null?void 0:C.maxMentionCount,maxSuggestionCount:C==null?void 0:C.maxSuggestionCount}),v.createElement(gc,{channel:B,isEdit:!0,disabled:st,ref:mt,mentionSelectedUser:cn,isMentionEnabled:ye,message:F,onStartTyping:function(){var pt;(pt=B==null?void 0:B.startTyping)===null||pt===void 0||pt.call(B)},onUpdateMessage:function(pt){var Mt,dn=pt.messageId,In=pt.message,Ze=pt.mentionTemplate;te({messageId:dn,message:In,mentionedUsers:Ht,mentionTemplate:Ze}),Ve(!1),(Mt=B==null?void 0:B.endTyping)===null||Mt===void 0||Mt.call(B)},onCancelEdit:function(){var pt;Rt(""),Xt([]),Dt([]),ke([]),Ve(!1),(pt=B==null?void 0:B.endTyping)===null||pt===void 0||pt.call(B)},onUserMentioned:function(pt){(cn==null?void 0:cn.userId)===(pt==null?void 0:pt.userId)&&(ht(null),Rt(""))},onMentionStringChange:function(pt){Rt(pt)},onMentionedUserIdsUpdated:function(pt){Dt(pt)},onKeyDown:function(pt){return ge&&(dt==null?void 0:dt.length)>0&&(pt.key===ei.Enter&&Et||pt.key===ei.ArrowUp||pt.key===ei.ArrowDown)?(Zt(pt),!0):!1}})):v.createElement("div",D({className:"sendbird-parent-message-info ".concat(l)},ve?D({},Le):{},{ref:Ye}),v.createElement($i,{menuTrigger:function(pt){var Mt,dn,In;return v.createElement(Fr,{className:"sendbird-parent-message-info__sender",ref:Jt,src:((dn=(Mt=B==null?void 0:B.members)===null||Mt===void 0?void 0:Mt.find(function(Ze){var ot;return(Ze==null?void 0:Ze.userId)===((ot=F==null?void 0:F.sender)===null||ot===void 0?void 0:ot.userId)}))===null||dn===void 0?void 0:dn.profileUrl)||((In=F==null?void 0:F.sender)===null||In===void 0?void 0:In.profileUrl),alt:"thread message sender",width:"40px",height:"40px",onClick:function(){vn||pt()}})},menuItems:function(pt){return Sn?Sn({user:F==null?void 0:F.sender,close:pt,currentUserId:N,avatarRef:Jt}):v.createElement(Li,{parentRef:Jt,parentContainRef:Jt,closeDropdown:pt,style:{paddingTop:"0px",paddingBottom:"0px"}},v.createElement(Xl,{user:F==null?void 0:F.sender,currentUserId:N,onSuccess:pt}))}}),v.createElement("div",{className:"sendbird-parent-message-info__content"},v.createElement("div",{className:"sendbird-parent-message-info__content__info"},v.createElement(Me,{className:pe?"sendbird-parent-message-info__content__info__sender-name--use-reaction":"sendbird-parent-message-info__content__info__sender-name",type:be.CAPTION_2,color:de.ONBACKGROUND_2},((s=(a=B==null?void 0:B.members)===null||a===void 0?void 0:a.find(function(pt){var Mt;return(pt==null?void 0:pt.userId)===((Mt=F==null?void 0:F.sender)===null||Mt===void 0?void 0:Mt.userId)}))===null||s===void 0?void 0:s.nickname)||(Bm==null?void 0:Bm(F))),v.createElement(Me,{className:"sendbird-parent-message-info__content__info__sent-at",type:be.CAPTION_3,color:de.ONBACKGROUND_2},Ar((F==null?void 0:F.createdAt)||0,L.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:O}))),v.createElement(Tte,{message:F,showFileViewer:Be,onBeforeDownloadFileMessage:W})),!ve&&v.createElement("div",{className:"sendbird-parent-message-info__menu-container"},m({className:zt("sendbird-parent-message-info__context-menu",pe&&"use-reaction",ie&&"sendbird-mouse-hover"),channel:B,message:F,isByMe:N===((o=F==null?void 0:F.sender)===null||o===void 0?void 0:o.userId),disableDeleteMessage:H.length>0,replyType:Ee,showEdit:Ve,showRemove:oe,onMoveToParentMessage:function(){j==null||j({message:F,channel:B})},deleteMessage:re}),pe&&d({className:zt("sendbird-parent-message-info__reaction-menu",ie&&"sendbird-mouse-hover"),message:F,userId:N,emojiContainer:G,toggleReaction:$,filterEmojiCategoryIds:Q})),Ae&&v.createElement(hU,{onCancel:function(){return oe(!1)},onSubmit:function(){x==null||x()},message:F}),me&&v.createElement(s0,{message:F,onClose:function(){return Be(!1)},onDelete:function(){re(F).then(function(){Be(!1)})},onDownloadClick:Pt}),We&&v.createElement(_C,{parentRef:Ye,channel:B,message:F,userId:N,replyType:Ee,hideMenu:function(){Je(!1)},deleteMessage:re,deleteMenuState:(H==null?void 0:H.length)===0?"ACTIVE":"HIDE",isReactionEnabled:pe,isByMe:Ue,emojiContainer:G,showEdit:Ve,showRemove:oe,toggleReaction:$,isOpenedFromThread:!0,onDownloadClick:Pt}))}function Nte(e){var n=e.className,t=e.channelName,r=e.renderActionIcon,i=e.onActionIconClick,a=e.onChannelNameClick,s=Ut().stringSet,o=M.useMemo(function(){return typeof r=="function"&&i?r({onActionIconClick:i}):null},[r]);return v.createElement(hi,{className:"sendbird-thread-header ".concat(n),renderMiddle:function(){return v.createElement(hi.Title,{title:s.THREAD__HEADER_TITLE,subtitle:t,onClickSubtitle:a})},renderRight:function(){return o||v.createElement("div",{className:"sendbird-thread-header__action"},v.createElement(hi.IconButton,{onClick:function(l){return i(l)},type:Se.CLOSE,color:ze.ON_BACKGROUND_1}))}})}function Ite(e){var n=this,t,r,i,a=e.className,s=e.userId,o=e.channel,l=e.message,u=e.chainTop,d=u===void 0?!1:u,f=e.chainBottom,m=f===void 0?!1:f,p=e.isReactionEnabled,E=p===void 0?!1:p,_=e.disableQuoteMessage,b=_===void 0?!1:_,C=e.replyType,y=e.nicknamesMap,T=e.emojiContainer,N=e.showEdit,w=e.showRemove,O=e.showFileViewer,L=e.resendMessage,P=e.toggleReaction,U=e.onReplyInThread,B=sa(e),F=B.renderSenderProfile,H=F===void 0?function(Ke){return v.createElement(vL,D({},Ke))}:F,G=B.renderMessageBody,j=G===void 0?function(Ke){return v.createElement(mL,D({},Ke))}:G,x=B.renderMessageHeader,V=x===void 0?function(Ke){return v.createElement(pL,D({},Ke))}:x,K=B.renderMessageMenu,W=K===void 0?function(Ke){return v.createElement(fC,D({},Ke))}:K,Q=B.renderEmojiMenu,J=Q===void 0?function(){return v.createElement(vC,D({},e))}:Q,$=B.renderEmojiReactions,te=$===void 0?function(Ke){return v.createElement(pC,D({},Ke))}:$,re=B.renderMobileMenuOnLongPress,ve=re===void 0?function(Ke){return v.createElement(_C,D({},Ke))}:re,ie=pr().isMobile,le=Ut(),Ae=le.dateLocale,oe=le.stringSet,he=yt().state,me=he.config,Be=he.eventHandlers,pe=me.logger,ye=(t=Be==null?void 0:Be.reaction)===null||t===void 0?void 0:t.onPressUserProfile,Ee=CC("#".concat(Hf(l.messageId),".").concat(Bf),[document.getElementById(bd),document.getElementById(Gf)]),Ue=qi(),Ye=Ue.state,De=Ye.onBeforeDownloadFileMessage,We=Ye.filterEmojiCategoryIds,Je=Ue.actions.deleteMessage,Le=s===((r=l==null?void 0:l.sender)===null||r===void 0?void 0:r.userId)||(l==null?void 0:l.sendingStatus)==="pending"||(l==null?void 0:l.sendingStatus)==="failed",He=!!((C==="QUOTE_REPLY"||C==="THREAD")&&(l!=null&&l.parentMessageId)&&(l!=null&&l.parentMessage)&&!b),At=Ee?"sendbird-mouse-hover":"",Ve=E&&!(o!=null&&o.isEphemeral),st=(o==null?void 0:o.isGroupChannel())&&me.groupChannel.enableOgtag,mt=M.useRef(null),et=M.useState(!1),St=et[0],Rt=et[1],xe=cs({onLongPress:function(){ie&&Rt(!0)}},{shouldPreventDefault:!1}),Ht=yC({threadMessageKind:Mp.CHILD,isMobile:ie}),Xt=bC(l);return v.createElement("div",{className:zt("sendbird-thread-list-item-content",a,Le?"outgoing":"incoming"),ref:mt},v.createElement("div",{className:zt("sendbird-thread-list-item-content__left",Ve&&"use-reaction",Le?"outgoing":"incoming")},!Le&&!m&&H(D(D({},e),{className:"sendbird-thread-list-item-content__left__avatar",isByMe:Le,displayThreadReplies:!1})),Le&&!ie&&v.createElement("div",{className:zt("sendbird-thread-list-item-content-menu",Ve&&"use-reaction",Le?"outgoing":"incoming",At)},W({className:"sendbird-thread-list-item-content-menu__normal-menu",channel:o,message:l,isByMe:Le,replyType:C,showEdit:N,showRemove:w,resendMessage:L,onReplyInThread:U,deleteMessage:Je}),Ve&&v.createElement(v.Fragment,null,J({className:"sendbird-thread-list-item-content-menu__reaction-menu",message:l,userId:s,emojiContainer:T,toggleReaction:P,filterEmojiCategoryIds:We})))),v.createElement("div",D({className:"sendbird-thread-list-item-content__middle"},ie?D({},xe):{}),!Le&&!d&&!He&&V(e),v.createElement("div",{className:ai(["sendbird-thread-list-item-content__middle__body-container"])},Le&&!m&&v.createElement("div",{className:ai(["sendbird-thread-list-item-content__middle__body-container__created-at","left",At])},v.createElement("div",{className:"sendbird-thread-list-item-content__middle__body-container__created-at__component-container"},v.createElement(hC,{message:l,channel:o}))),j({className:"sendbird-thread-list-item-content__middle__message-item-body",message:l,channel:o,showFileViewer:O,mouseHover:!1,isMobile:ie,config:me,isReactionEnabledInChannel:Ve,isByMe:Le,onBeforeDownloadFileMessage:De,customSubcomponentsProps:{ThumbnailMessageItemBody:{style:{width:ie?"100%":"200px",height:"148px"}},MultipleFilesMessageItemBody:{threadMessageKindKey:Ht,statefulFileInfoList:Xt}}}),Ve&&((i=l==null?void 0:l.reactions)===null||i===void 0?void 0:i.length)>0&&v.createElement("div",{className:ai(["sendbird-thread-list-item-content-reactions",!Le||io(l)||st&&Xp(l)||Oi(l)?"":"primary"])},te({userId:s,message:l,channel:o,isByMe:Le,emojiContainer:T,memberNicknamesMap:y,toggleReaction:P,onPressUserProfile:ye,filterEmojiCategoryIds:We})),!Le&&!m&&v.createElement(Me,{className:ai(["sendbird-thread-list-item-content__middle__body-container__created-at","right",At]),type:be.CAPTION_3,color:de.ONBACKGROUND_2},Ar((l==null?void 0:l.createdAt)||0,oe.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:Ae})))),v.createElement("div",{className:zt("sendbird-thread-list-item-content__right",d&&"chain-top",Le?"outgoing":"incoming")},!Le&&!ie&&v.createElement("div",{className:"sendbird-thread-list-item-content-menu ".concat(At)},Ve&&J({className:"sendbird-thread-list-item-content-menu__reaction-menu",message:l,userId:s,emojiContainer:T,toggleReaction:P,filterEmojiCategoryIds:We}),W({className:"sendbird-thread-list-item-content-menu__normal-menu",channel:o,message:l,isByMe:Le,replyType:C,showRemove:w,resendMessage:L,onReplyInThread:U,deleteMessage:Je}))),St&&ve({parentRef:mt,channel:o,message:l,userId:s,replyType:C,hideMenu:function(){Rt(!1)},isReactionEnabled:E,isByMe:Le,emojiContainer:T,showEdit:N,showRemove:w,toggleReaction:P,isOpenedFromThread:!0,deleteMessage:Je,onDownloadClick:function(Ke){return tn(n,void 0,void 0,function(){var Ct,Dt,Vt,rn;return nn(this,function(Zt){switch(Zt.label){case 0:if(!De)return[2];Zt.label=1;case 1:return Zt.trys.push([1,3,,4]),[4,De({message:l})];case 2:return Ct=Zt.sent(),Ct||(Ke.preventDefault(),(Vt=pe==null?void 0:pe.info)===null||Vt===void 0||Vt.call(pe,"ThreadListItemContent: Not allowed to download.")),[3,4];case 3:return Dt=Zt.sent(),(rn=pe==null?void 0:pe.error)===null||rn===void 0||rn.call(pe,"ThreadListItemContent: Error occurred while determining download continuation:",Dt),[3,4];case 4:return[2]}})})}}))}function Ate(e){var n=this,t,r,i,a,s=e.className,o=e.message,l=e.chainTop,u=e.chainBottom,d=e.hasSeparator,f=e.renderCustomSeparator,m=e.handleScroll,p=yt().state,E=p.stores,_=p.config,b=_.isOnline,C=_.userMention,y=_.logger,T=_.groupChannel,N=(r=(t=E==null?void 0:E.userStore)===null||t===void 0?void 0:t.user)===null||r===void 0?void 0:r.userId,w=Ut(),O=w.dateLocale,L=w.stringSet,P=qi(),U=P.state,B=U.message,F=U.currentChannel,H=U.nicknamesMap,G=U.emojiContainer,j=U.threadListState,x=U.isMuted,V=U.isChannelFrozen,K=U.onBeforeDownloadFileMessage,W=P.actions,Q=W.toggleReaction,J=W.updateMessage,$=W.resendMessage,te=W.deleteMessage,re=M.useState(!1),ve=re[0],ie=re[1],le=M.useState(!1),Ae=le[0],oe=le[1],he=M.useState(!1),me=he[0],Be=he[1],pe=zf({channel:F,config:_}),ye=T.enableMention,Ee=zo(T.replyType).upperCase,Ue=M.useRef(null);M.useLayoutEffect(function(){var ht;(B==null?void 0:B.messageId)===(o==null?void 0:o.messageId)&&(Ue!=null&&Ue.current)&&((ht=Ue.current)===null||ht===void 0||ht.scrollIntoView({block:"center",inline:"center"}))},[B,Ue==null?void 0:Ue.current]),M.useLayoutEffect(function(){m==null||m()},[ve,(i=o==null?void 0:o.reactions)===null||i===void 0?void 0:i.length]);var Ye=M.useRef(null),De=M.useState(""),We=De[0],Je=De[1],Le=M.useState([]),He=Le[0],At=Le[1],Ve=M.useState([]),st=Ve[0],mt=Ve[1],et=M.useState(null),St=et[0],Rt=et[1],xe=M.useState(null),Ht=xe[0],Xt=xe[1],Ke=M.useState([]),Ct=Ke[0],Dt=Ke[1],Vt=b&&ye&&We.length>0&&!x&&!(V&&F.myRole!==cd.OPERATOR),rn=jf({ref:Ye},{logger:y}),Zt=(rn==null?void 0:rn.length)<(C==null?void 0:C.maxMentionCount);M.useEffect(function(){At(He.filter(function(ht){var ct=ht.userId,dt=st.indexOf(ct);return dt<0?!1:(st.splice(dt,1),!0)}))},[st]);var Mn=j!==Ii.INITIALIZED||!b||x||V,cn=M.useMemo(function(){if(typeof f=="function")return f==null?void 0:f({message:o})},[o,f]);return ve&&o.isUserMessage()?v.createElement(v.Fragment,null,Vt&&v.createElement(eS,{targetNickname:We,inputEvent:St??void 0,onUserItemClick:function(ht){ht&&At(Ne(Ne([],He,!0),[ht],!1)),Je(""),Xt(ht),Rt(null)},onFocusItemChange:function(){Rt(null)},onFetchUsers:function(ht){Dt(ht)},ableAddMention:Zt,maxMentionCount:C==null?void 0:C.maxMentionCount,maxSuggestionCount:C==null?void 0:C.maxSuggestionCount}),v.createElement(gc,{isEdit:!0,channel:F,disabled:Mn,ref:Ye,mentionSelectedUser:Ht,isMentionEnabled:ye,message:o,onStartTyping:function(){var ht;(ht=F==null?void 0:F.startTyping)===null||ht===void 0||ht.call(F)},onUpdateMessage:function(ht){var ct,dt=ht.messageId,ke=ht.message,ge=ht.mentionTemplate;J({messageId:dt,message:ke,mentionedUsers:He,mentionTemplate:ge}),ie(!1),(ct=F==null?void 0:F.endTyping)===null||ct===void 0||ct.call(F)},onCancelEdit:function(){var ht;Je(""),At([]),mt([]),Dt([]),ie(!1),(ht=F==null?void 0:F.endTyping)===null||ht===void 0||ht.call(F)},onUserMentioned:function(ht){(Ht==null?void 0:Ht.userId)===(ht==null?void 0:ht.userId)&&(Xt(null),Je(""))},onMentionStringChange:function(ht){Je(ht)},onMentionedUserIdsUpdated:function(ht){mt(ht)},onKeyDown:function(ht){return Vt&&(Ct==null?void 0:Ct.length)>0&&(ht.key===ei.Enter&&Zt||ht.key===ei.ArrowUp||ht.key===ei.ArrowDown)?(Rt(ht),!0):!1}})):v.createElement("div",{ref:Ue,className:zt("sendbird-thread-list-item",s),"data-testid":"sendbird-thread-list-item"},d&&(o==null?void 0:o.createdAt)&&(cn||v.createElement(sC,null,v.createElement(Me,{type:be.CAPTION_2,color:de.ONBACKGROUND_2},Ar(o==null?void 0:o.createdAt,L.DATE_FORMAT__THREAD_LIST__DATE_SEPARATOR,{locale:O})))),v.createElement(Ite,D({},e,{userId:N,channel:F,message:o,chainTop:l,chainBottom:u,isReactionEnabled:pe,disableQuoteMessage:!0,replyType:Ee,nicknamesMap:H,emojiContainer:G,resendMessage:$,showRemove:oe,showFileViewer:Be,toggleReaction:Q,showEdit:ie})),Ae&&v.createElement(hU,{message:o,onCancel:function(){return oe(!1)}}),me&&v.createElement(s0,{message:o,isByMe:((a=o==null?void 0:o.sender)===null||a===void 0?void 0:a.userId)===N,onClose:function(){return Be(!1)},onDelete:function(){te(o),Be(!1)},onDownloadClick:function(ht){return tn(n,void 0,void 0,function(){var ct,dt,ke,ge;return nn(this,function(Xe){switch(Xe.label){case 0:if(!K)return[2];Xe.label=1;case 1:return Xe.trys.push([1,3,,4]),[4,K({message:o})];case 2:return ct=Xe.sent(),ct||(ht.preventDefault(),(ke=y.info)===null||ke===void 0||ke.call(y,"ThreadListItem: Not allowed to download.")),[3,4];case 3:return dt=Xe.sent(),(ge=y.error)===null||ge===void 0||ge.call(y,"ThreadListItem: Error occurred while determining download continuation:",dt),[3,4];case 4:return[2]}})})}}))}function wte(e){var n=e.className,t=e.renderMessage,r=t===void 0?function(E){return v.createElement(Ate,D({},E))}:t,i=e.renderCustomSeparator,a=e.scrollRef,s=e.scrollBottom,o=yt().state.config,l=Ut().stringSet,u=o.userId,d=qi().state,f=d.currentChannel,m=d.allThreadMessages,p=d.localThreadMessages;return v.createElement("div",{className:"sendbird-thread-list ".concat(n)},m.map(function(E,_){var b,C=((b=E==null?void 0:E.sender)===null||b===void 0?void 0:b.userId)===u,y=m[_-1],T=m[_+1],N=MC(y,E,T,l,f,zo(o.groupChannel.replyType).upperCase),w=N[0],O=N[1],L=!((y==null?void 0:y.createdAt)>0&&Qee(E==null?void 0:E.createdAt,y==null?void 0:y.createdAt)),P=function(){var U=a==null?void 0:a.current;if(U&&s){var B=U.scrollHeight-U.scrollTop-U.offsetHeight;s<B&&(U.scrollTop+=B-s)}};return v.createElement(rc,{message:E,isByMe:C,key:E==null?void 0:E.messageId},r({message:E,chainTop:w,chainBottom:O,hasSeparator:L,renderCustomSeparator:i,handleScroll:P}))}),p.map(function(E){var _,b=((_=E==null?void 0:E.sender)===null||_===void 0?void 0:_.userId)===u,C=function(){var y=a==null?void 0:a.current;if(y){var T=y.scrollHeight-y.scrollTop-y.offsetHeight;s<T&&(y.scrollTop+=T-s)}};return v.createElement(rc,{message:E,isByMe:b,key:E==null?void 0:E.messageId},r({message:E,hasSeparator:!1,renderCustomSeparator:i,handleScroll:C}))}))}var Rte=function(e){var n=e.renderHeader;return M.useMemo(function(){return typeof n=="function"?n():null},[n])},Ote=function(e){var n=e.parentMessage,t=e.parentMessageState,r=e.renderParentMessageInfo,i=e.renderParentMessageInfoPlaceholder;return M.useMemo(function(){if(t===Gi.NIL||t===Gi.LOADING||t===Gi.INVALID){if(typeof i=="function")return i(t);switch(t){case Gi.NIL:return v.createElement(Nr,{className:"sendbird-thread-ui__parent-message-info placeholder-nil",type:Dn.NO_RESULTS,iconSize:"64px"});case Gi.LOADING:return v.createElement(Nr,{className:"sendbird-thread-ui__parent-message-info placeholder-loading",type:Dn.LOADING,iconSize:"64px"});case Gi.INVALID:return v.createElement(Nr,{className:"sendbird-thread-ui__parent-message-info placeholder-invalid",type:Dn.WRONG,iconSize:"64px"});default:return null}}else if(t===Gi.INITIALIZED&&typeof r=="function")return r();return null},[n,t,r,i])},Lte=function(e){var n=e.threadListState,t=e.renderThreadListPlaceHolder;return M.useMemo(function(){if(n===Ii.NIL||n===Ii.LOADING||n===Ii.INVALID){if(typeof t=="function")return t(n);switch(n){case Ii.LOADING:return v.createElement(Nr,{className:"sendbird-thread-ui__thread-list placeholder-loading",type:Dn.LOADING,iconSize:"64px"});case Ii.INVALID:return v.createElement(Nr,{className:"sendbird-thread-ui__thread-list placeholder-invalid",type:Dn.WRONG,iconSize:"64px"});case Ii.NIL:return v.createElement(v.Fragment,null);default:return null}}return null},[n,t])},Ute=function(e){var n,t,r,i,a=e.renderHeader,s=e.renderParentMessageInfo,o=s===void 0?function(){return v.createElement(Mte,{className:"sendbird-thread-ui__parent-message-info"})}:s,l=e.renderMessage,u=e.renderMessageInput,d=e.renderCustomSeparator,f=e.renderParentMessageInfoPlaceholder,m=e.renderThreadListPlaceHolder,p=e.renderFileUploadIcon,E=e.renderVoiceMessageIcon,_=e.renderSendMessageIcon,b=yt().state,C=b.stores,y=b.config,T=(r=(t=(n=C==null?void 0:C.sdkStore)===null||n===void 0?void 0:n.sdk)===null||t===void 0?void 0:t.currentUser)===null||r===void 0?void 0:r.userId,N=Ut().stringSet,w=qi(),O=w.state,L=O.currentChannel,P=O.allThreadMessages,U=O.parentMessage,B=O.parentMessageState,F=O.threadListState,H=O.hasMorePrev,G=O.hasMoreNext,j=O.onHeaderActionClick,x=O.onMoveToParentMessage,V=w.actions,K=V.fetchPrevThreads,W=V.fetchNextThreads,Q=P.length,J=T===((i=U==null?void 0:U.sender)===null||i===void 0?void 0:i.userId),$=Rte({renderHeader:a}),te=Ote({parentMessage:U,parentMessageState:B,renderParentMessageInfo:o,renderParentMessageInfoPlaceholder:f}),re=Lte({threadListState:F,renderThreadListPlaceHolder:m}),ve=M.useState(0),ie=ve[0],le=ve[1],Ae=M.useRef(null),oe=function(he){var me,Be=he.target,pe=Be.scrollTop,ye=Be.clientHeight,Ee=Be.scrollHeight,Ue=(me=Ae.current)===null||me===void 0?void 0:me.querySelectorAll(".sendbird-thread-list-item"),Ye=Ue==null?void 0:Ue[0];if(Lw(pe,0,10)&&H&&K(function(Je){var Le;if(Je)try{(Le=Ye==null?void 0:Ye.scrollIntoView)===null||Le===void 0||Le.call(Ye,{block:"start",inline:"nearest"})}catch{}}),Lw(ye+pe,Ee,10)&&G){var De=pe;W(function(Je){if(Je)try{Be.scrollTop=De,Ae.current&&(Ae.current.scrollTop=De)}catch{}})}if(Ae!=null&&Ae.current){var We=Ae==null?void 0:Ae.current;le(We.scrollHeight-We.scrollTop-We.offsetHeight)}};return v.createElement("div",{className:"sendbird-thread-ui"},$||v.createElement(Nte,{className:"sendbird-thread-ui__header",channelName:C3(L,T??"",N),onActionIconClick:j,onChannelNameClick:function(){x==null||x({message:U,channel:L})}}),v.createElement("div",{className:zt("sendbird-thread-ui--scroll","sendbird-conversation__messages"),ref:Ae,onScroll:oe,dir:rC(y==null?void 0:y.htmlTextDirection,y==null?void 0:y.forceLeftToRightMessageLayout)},v.createElement(rc,{message:U,isByMe:J},te),Q>0&&v.createElement("div",{className:"sendbird-thread-ui__reply-counts"},v.createElement(Me,{type:be.BODY_1,color:de.ONBACKGROUND_3},"".concat(Q," ").concat(Q>1?N.THREAD__THREAD_REPLIES:N.THREAD__THREAD_REPLY))),re||v.createElement(wte,{className:"sendbird-thread-ui__thread-list",renderMessage:l,renderCustomSeparator:d,scrollRef:Ae,scrollBottom:ie})),(u==null?void 0:u())||v.createElement(Zee,{className:"sendbird-thread-ui__message-input",renderFileUploadIcon:p,renderVoiceMessageIcon:E,renderSendMessageIcon:_}))},fU=function(e){var n;return v.createElement("div",{className:zt("sendbird-thread",(n=e==null?void 0:e.className)!==null&&n!==void 0?n:"")},v.createElement(qee,D({},e),v.createElement(Ute,D({},e))))},Dte=v.createContext(null),tS=function(){var e=v.useContext(Dte);if(!e)throw new Error("OpenChannelContext not found. Use within the OpenChannel module");return e};v.forwardRef(function(e,n){var t=tS(),r=t.currentOpenChannel,i=t.disabled,a=t.handleSendMessage,s=t.handleFileUpload,o=t.amIMuted,l=r,u=M.useContext(On).stringSet,d=e.value;function f(){return o?u.MESSAGE_INPUT__PLACE_HOLDER__MUTED:i?u.MESSAGE_INPUT__PLACE_HOLDER__DISABLED:""}return l?v.createElement("div",{className:"sendbird-openchannel-footer"},v.createElement(gc,{channel:r,ref:n,value:d,disabled:i,isVoiceMessageEnabled:!1,onSendMessage:a,onFileUpload:s,placeholder:f()})):null});var wp=function(e){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",e);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var n=document.createElement("textarea");n.textContent=e,n.style.position="fixed",document.body.appendChild(n),n.select();try{return document.execCommand("copy")}catch{return!1}finally{document.body.removeChild(n)}}return!1},nS={NONE:"none",PENDING:"pending",FAILED:"failed",CANCELED:"canceled",SUCCEEDED:"succeeded"},Qf=function(e){return e.sender||e._sender},rS=function(e){return e===nS.SUCCEEDED},f0=function(e){return e===nS.PENDING},Yf=function(e){return e===nS.FAILED},iS=function(e,n){return Qf(e).userId===n},v0=function(e){var n,t=e.message;return(t==null?void 0:t.messageType)==="user"&&((n=t==null?void 0:t.message)===null||n===void 0?void 0:n.length)>0},$o=function(e){var n=e.message,t=e.status,r=e.userId;return iS(n,r)&&Yf(t)&&(n==null?void 0:n.isResendable)},m0=function(e){var n,t=e.message,r=e.status,i=e.userId;return iS(t,i)&&rS(r)&&((n=t==null?void 0:t.isUserMessage)===null||n===void 0?void 0:n.call(t))},ic=function(e){var n=e.message,t=e.userId;return iS(n,t)},kte=function(e){var n,t=e.message,r=e.status;return!!(!((n=t==null?void 0:t.isFileMessage)===null||n===void 0)&&n.call(t)&&rS(r))},p0=function(e){var n=e.message,t=e.status,r=e.userId;return n.messageType==="user"?ic({message:n,status:t,userId:r})||m0({message:n,status:t,userId:r})||v0({message:n,status:t,userId:r})||$o({message:n,status:t,userId:r}):ic({message:n,status:t,userId:r})||$o({message:n,status:t,userId:r})},g0=function(e){var n=e.message,t=e.parentRef,r=e.resendMessage,i=e.showEdit,a=e.showRemove,s=e.copyToClipboard,o=e.hideMenu,l=e.isEphemeral,u=l===void 0?!1:l,d=n,f=n==null?void 0:n.sendingStatus,m=Ut().stringSet,p=yt().state.config.userId,E=n;return v.createElement($i,{isOpen:!0,menuItems:function(){return v.createElement(Li,{className:"sendbird-openchannel__mobile-menu",parentRef:t,parentContainRef:t,closeDropdown:o},v0({message:d,userId:p,status:f})&&v.createElement(vi,{className:"sendbird-openchannel-og-message__top__context-menu__copy",onClick:function(){s==null||s()},testID:"open_channel_mobile_context_menu_copy"},v.createElement(v.Fragment,null,m.CONTEXT_MENU_DROPDOWN__COPY)),!u&&m0({message:n,userId:p,status:f})&&v.createElement(vi,{className:"sendbird-openchannel-og-message__top__context-menu__edit",onClick:function(){i==null||i()},testID:"open_channel_mobile_context_menu_edit"},v.createElement(v.Fragment,null,m.CONTEXT_MENU_DROPDOWN__EDIT)),$o({message:n,userId:p,status:f})&&v.createElement(vi,{onClick:function(){r==null||r()},testID:"open_channel_mobile_context_menu_resend"},v.createElement(v.Fragment,null,m.CONTEXT_MENU_DROPDOWN__RESEND)),!u&&ic({message:n,userId:p,status:f})&&v.createElement(vi,{onClick:function(){a==null||a()},testID:"open_channel_mobile_context_menu_delete"},v.createElement(v.Fragment,null,m.CONTEXT_MENU_DROPDOWN__DELETE)),kte({message:n,status:f})&&v.createElement(vi,{onClick:function(){o()},testID:"open_channel_mobile_context_menu_download_file"},v.createElement("a",{className:"sendbird-openchannel__mobile-menu-hyperlink",rel:"noopener noreferrer",href:E==null?void 0:E.url,target:"_blank"},m.CONTEXT_MENU_DROPDOWN__SAVE)))}})};function Pte(e){var n=e.className,t=e.message,r=e.isOperator,i=e.isEphemeral,a=i===void 0?!1:i,s=e.userId,o=e.resendMessage,l=e.disabled,u=e.showEdit,d=e.showRemove,f=e.chainTop,m=Ut(),p=m.stringSet,E=m.dateLocale,_=Yl(),b=_.disableUserProfile,C=_.renderUserProfile,y=M.useRef(),T=M.useRef(),N=M.useRef(),w=M.useRef(),O=M.useState({}),L=O[0],P=O[1],U=M.useState(!1),B=U[0],F=U[1],H=t==null?void 0:t.sendingStatus,G=f0(H),j=Yf(H),x=Qf(t);M.useEffect(function(){var W;!((W=y==null?void 0:y.current)===null||W===void 0)&&W.clientHeight&&y.current.clientHeight>36?P({top:"8px "}):P({top:"2px"})},[window.innerWidth]);var V=cs({onLongPress:function(){F(!0)}}),K=pr().isMobile;return!t||t.messageType!=="user"?v.createElement(v.Fragment,null):v.createElement(v.Fragment,null,v.createElement("div",{className:Ne(Ne([],Array.isArray(n)?n:[n],!0),["sendbird-openchannel-user-message"],!1).join(" "),ref:y},v.createElement("div",{className:"sendbird-openchannel-user-message__left"},!f&&v.createElement($i,{menuTrigger:function(W){return v.createElement(Fr,{className:"sendbird-openchannel-user-message__left__avatar",src:x.profileUrl||"",ref:T,width:"28px",height:"28px",onClick:function(){b||W()}})},menuItems:function(W){return C?C({user:x,close:W,currentUserId:s,avatarRef:T}):v.createElement(Li,{parentRef:T,parentContainRef:T,closeDropdown:W,style:{paddingTop:"0px",paddingBottom:"0px"}},v.createElement(Xl,{user:x,onSuccess:W,disableMessaging:!0}))}})),v.createElement("div",{className:"sendbird-openchannel-user-message__right"},!f&&v.createElement("div",{className:"sendbird-openchannel-user-message__right__top"},v.createElement(Me,{className:"sendbird-openchannel-user-message__right__top__sender-name",type:be.CAPTION_2,color:r?de.SECONDARY_3:de.ONBACKGROUND_2},x&&(x.friendName||x.nickname||x.userId)),v.createElement(Me,{className:"sendbird-openchannel-user-message__right__top__sent-at",type:be.CAPTION_3,color:de.ONBACKGROUND_3},(t==null?void 0:t.createdAt)&&Ar(t==null?void 0:t.createdAt,p.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:E}))),v.createElement("div",D({},K?D({},V):{},{className:"sendbird-openchannel-user-message__right__bottom",ref:w}),v.createElement(Me,{className:"sendbird-openchannel-user-message__right__bottom__message",type:be.BODY_1,color:de.ONBACKGROUND_1},t==null?void 0:t.message,Zp(t)&&v.createElement(Me,{key:qr(),type:be.BODY_1,color:de.ONBACKGROUND_2,className:"sendbird-openchannel-user-message-word"}," ".concat(p.MESSAGE_EDITED," ")))),(G||j)&&v.createElement("div",{className:"sendbird-openchannel-user-message__right__tail"},G&&v.createElement(Xo,{width:"16px",height:"16px"},v.createElement(qe,{className:"sendbird-openchannel-user-message__right__tail__pending",type:Se.SPINNER,fillColor:ze.PRIMARY,width:"16px",height:"16px"})),j&&v.createElement(qe,{className:"sendbird-openchannel-user-message__right__tail__failed",type:Se.ERROR,fillColor:ze.ERROR,width:"16px",height:"16px"}))),!K&&v.createElement("div",{className:"sendbird-openchannel-user-message__context-menu",ref:N,style:L},v.createElement($i,{menuTrigger:function(W){return p0({message:t,userId:s,status:H})&&v.createElement(ga,{className:"sendbird-openchannel-user-message__context-menu--icon",width:"32px",height:"32px",onClick:function(){W()}},v.createElement(qe,{type:Se.MORE,fillColor:ze.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(W){return v.createElement(Li,{parentRef:N,parentContainRef:N,closeDropdown:W,openLeft:!0},v0({message:t,userId:s,status:H})&&v.createElement(vi,{className:"sendbird-openchannel-user-message__context-menu__copy",onClick:function(){wp(t.message),W()},testID:"open_channel_user_message_menu_copy"},p.CONTEXT_MENU_DROPDOWN__COPY),!a&&m0({message:t,userId:s,status:H})&&v.createElement(vi,{className:"sendbird-openchannel-user-message__context-menu__edit",onClick:function(){l||(u(!0),W())},testID:"open_channel_user_message_menu_edit"},p.CONTEXT_MENU_DROPDOWN__EDIT),$o({message:t,userId:s,status:H})&&v.createElement(vi,{className:"sendbird-openchannel-user-message__context-menu__resend",onClick:function(){o(t),W()},testID:"open_channel_user_message_menu_resend"},p.CONTEXT_MENU_DROPDOWN__RESEND),!a&&ic({message:t,userId:s,status:H})&&v.createElement(vi,{className:"sendbird-openchannel-user-message__context-menu__delete",onClick:function(){l||(d(!0),W())},testID:"open_channel_user_message_menu_delete"},p.CONTEXT_MENU_DROPDOWN__DELETE))}}))),B&&v.createElement(g0,{message:t,parentRef:w,hideMenu:function(){F(!1)},showRemove:function(){F(!1),d(!0)},showEdit:function(){F(!1),u(!0)},copyToClipboard:function(){F(!1),wp(t==null?void 0:t.message)},resendMessage:function(){F(!1),o(t)}}))}function xte(e){var n=e.className,t=e.message;return v.createElement("div",{className:Ne(Ne([],Array.isArray(n)?n:[n],!0),["sendbird-openchannel-admin-message"],!1).join(" ")},v.createElement(Me,{className:"sendbird-openchannel-admin-message__text",type:be.CAPTION_2,color:de.ONBACKGROUND_2},t.message||""))}function Fte(e){var n,t,r,i=e.message,a=e.isOperator,s=e.isEphemeral,o=s===void 0?!1:s,l=e.className,u=e.disabled,d=e.showEdit,f=e.showRemove,m=e.resendMessage,p=e.chainTop,E=e.userId,_=i==null?void 0:i.sendingStatus,b=(n=i.ogMetaData)!==null&&n!==void 0?n:null,C=b==null?void 0:b.defaultImage,y=Ut(),T=y.stringSet,N=y.dateLocale,w=pr().isMobile,O=Yl(),L=O.disableUserProfile,P=O.renderUserProfile,U=M.useState({}),B=U[0],F=U[1],H=M.useState(!1),G=H[0],j=H[1],x=function(){return Pd(b==null?void 0:b.url)},V=cs({onLongPress:function(){return j(!0)},onClick:x},{delay:300}),K=M.useRef(),W=M.useRef(),Q=M.useRef(),J=M.useRef(),$=f0(_),te=Yf(_),re=Qf(i),ve=M.useMemo(function(){return Wl({messageText:i.message})},[i==null?void 0:i.updatedAt,i==null?void 0:i.message]);return M.useEffect(function(){var ie,le;!((ie=K==null?void 0:K.current)===null||ie===void 0)&&ie.clientHeight&&((le=K==null?void 0:K.current)===null||le===void 0?void 0:le.clientHeight)>36?F({top:"8px "}):F({top:"2px"})},[window.innerWidth]),!i||i.messageType!=="user"?v.createElement(v.Fragment,null):v.createElement(v.Fragment,null,v.createElement("div",D({className:Ne(Ne([],Array.isArray(l)?l:[l],!0),["sendbird-openchannel-og-message"],!1).join(" "),ref:K},w?D({},V):{}),v.createElement("div",{className:"sendbird-openchannel-og-message__top"},v.createElement("div",{className:"sendbird-openchannel-og-message__top__left"},!p&&v.createElement($i,{menuTrigger:function(ie){return v.createElement(Fr,{className:"sendbird-openchannel-og-message__top__left__avatar",src:re.profileUrl||"",ref:J,width:"28px",height:"28px",onClick:function(){L||ie()}})},menuItems:function(ie){return P?P({user:re,close:ie,currentUserId:E,avatarRef:J}):v.createElement(Li,{parentRef:J,parentContainRef:J,closeDropdown:ie,style:{paddingTop:"0px",paddingBottom:"0px"}},v.createElement(Xl,{user:re,onSuccess:ie,disableMessaging:!0}))}})),v.createElement("div",{className:"sendbird-openchannel-og-message__top__right"},!p&&v.createElement("div",{className:"sendbird-openchannel-og-message__top__right__title"},v.createElement(Me,{className:"sendbird-openchannel-og-message__top__right__title__sender-name",type:be.CAPTION_2,color:a?de.SECONDARY_3:de.ONBACKGROUND_2},re&&(re.friendName||re.nickname||re.userId)),v.createElement(Me,{className:"sendbird-openchannel-og-message__top__right__title__sent-at",type:be.CAPTION_3,color:de.ONBACKGROUND_3},(i==null?void 0:i.createdAt)&&Ar(i==null?void 0:i.createdAt,T.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:N}))),v.createElement("div",{className:"sendbird-openchannel-og-message__top__right__description"},v.createElement(Me,{className:"sendbird-openchannel-og-message__top__right__description__message",type:be.BODY_1,color:de.ONBACKGROUND_1},v.createElement(Md,{tokens:ve}),((t=i==null?void 0:i.updatedAt)!==null&&t!==void 0?t:0)>0&&v.createElement(Me,{key:qr(),className:"sendbird-openchannel-og-message--word",type:be.BODY_1,color:de.ONBACKGROUND_2},T.MESSAGE_EDITED)))),!w&&v.createElement("div",{className:"sendbird-openchannel-og-message__top__context-menu",ref:W,style:B},v.createElement($i,{menuTrigger:function(ie){return p0({message:i,userId:E,status:_})&&v.createElement(ga,{className:"sendbird-openchannel-og-message__top__context-menu--icon",width:"32px",height:"32px",onClick:function(){ie()}},v.createElement(qe,{type:Se.MORE,fillColor:ze.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(ie){return v.createElement(Li,{parentRef:W,parentContainRef:W,closeDropdown:ie,openLeft:!0},v0({message:i,userId:E,status:_})&&v.createElement(vi,{className:"sendbird-openchannel-og-message__top__context-menu__copy",onClick:function(){wp(i.message),ie()},testID:"open_channel_og_message_menu_copy"},T.CONTEXT_MENU_DROPDOWN__COPY),!o&&m0({message:i,userId:E,status:_})&&v.createElement(vi,{className:"sendbird-openchannel-og-message__top__context-menu__edit",onClick:function(){u||(d(!0),ie())},testID:"open_channel_og_message_menu_edit"},T.CONTEXT_MENU_DROPDOWN__EDIT),$o({message:i,userId:E,status:_})&&v.createElement(vi,{className:"sendbird-openchannel-og-message__top__context-menu__resend",onClick:function(){m(i),ie()},testID:"open_channel_og_message_menu_resend"},T.CONTEXT_MENU_DROPDOWN__RESEND),!o&&ic({message:i,userId:E,status:_})&&v.createElement(vi,{className:"sendbird-openchannel-og-message__top__context-menu__delete",onClick:function(){u||(f(!0),ie())},testID:"open_channel_og_message_menu_delete"},T.CONTEXT_MENU_DROPDOWN__DELETE))}}))),v.createElement("div",{className:"sendbird-openchannel-og-message__bottom"},v.createElement("div",{className:"sendbird-openchannel-og-message__bottom__og-tag",ref:Q},(b==null?void 0:b.url)&&v.createElement(Me,{className:"sendbird-openchannel-og-message__bottom__og-tag__url",type:be.CAPTION_3,color:de.ONBACKGROUND_2},b.url),(b==null?void 0:b.title)&&v.createElement(Q3,{className:"sendbird-openchannel-og-message__bottom__og-tag__title",src:(r=b.url)!==null&&r!==void 0?r:"",type:be.SUBTITLE_2,color:de.PRIMARY},b.title),(b==null?void 0:b.description)&&v.createElement(Me,{className:"sendbird-openchannel-og-message__bottom__og-tag__description",type:be.BODY_2,color:de.ONBACKGROUND_1},b.description),(b==null?void 0:b.url)&&v.createElement("div",{className:"sendbird-openchannel-og-message__bottom__og-tag__thumbnail",role:"button",onClick:x,onKeyDown:x,tabIndex:0},C&&v.createElement(yr,{className:"sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image",url:C.url||"",alt:C.alt||"",width:"334px",height:"189px",defaultComponent:v.createElement("div",{className:"sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image--placeholder"},v.createElement(qe,{type:Se.THUMBNAIL_NONE,width:"56px",height:"56px"}))}))),($||te)&&v.createElement("div",{className:"sendbird-openchannel-og-message__top__right__tail"},$&&v.createElement(Xo,{width:"16px",height:"16px"},v.createElement(qe,{className:"sendbird-openchannel-og-message__top__right__tail__pending",type:Se.SPINNER,fillColor:ze.PRIMARY,width:"16px",height:"16px"})),te&&v.createElement(qe,{className:"sendbird-openchannel-og-message__top__right__tail__failed",type:Se.ERROR,fillColor:ze.ERROR,width:"16px",height:"16px"})))),G&&v.createElement(g0,{message:i,parentRef:Q,hideMenu:function(){j(!1)},showRemove:function(){j(!1),f(!0)},showEdit:function(){j(!1),d(!0)},copyToClipboard:function(){j(!1),wp(i==null?void 0:i.message)},resendMessage:function(){j(!1),m(i)}}))}var dd={IMAGE:"IMAGE",VIDEO:"VIDEO",UNSUPPORTED:"UNSUPPORTED"},Hw={IMAGE:["image/jpeg","image/jpg","image/png","image/gif","image/webp"],VIDEO:["video/mpeg","video/ogg","video/webm","video/mp4"]},Bte=function(e){return Hw.IMAGE.indexOf(e)>=0?dd.IMAGE:Hw.VIDEO.indexOf(e)>=0?dd.VIDEO:dd.UNSUPPORTED};function Hte(e){var n,t=e.className,r=e.message,i=e.isOperator,a=e.isEphemeral,s=a===void 0?!1:a,o=e.disabled,l=e.userId,u=e.chainTop,d=e.onClick,f=e.showRemove,m=e.resendMessage,p=r.type,E=r.url,_=r.thumbnails,b=r.localUrl,C=r==null?void 0:r.sendingStatus,y=_&&_.length>0&&_[0].url||null,T=Ut(),N=T.stringSet,w=T.dateLocale,O=Yl(),L=O.disableUserProfile,P=O.renderUserProfile,U=M.useState(360),B=U[0],F=U[1],H=M.useState(!1),G=H[0],j=H[1],x=M.useRef(null),V=M.useRef(null),K=M.useRef(null),W=M.useRef(null),Q=cs({onLongPress:function(){j(!0)},onClick:function(){d(!0)}}),J=pr().isMobile,$=M.useMemo(function(){return function(le){return function(Ae){var oe=Ae.style;return v.createElement("div",{style:oe},v.createElement(qe,{type:le,fillColor:ze.ON_BACKGROUND_2,width:"56px",height:"56px"}))}}},[]),te=rS(C),re=f0(C),ve=Yf(C),ie=Qf(r);return M.useEffect(function(){var le,Ae,oe=((Ae=(le=x==null?void 0:x.current)===null||le===void 0?void 0:le.clientWidth)!==null&&Ae!==void 0?Ae:0)-80;F(oe>360?360:oe)},[]),v.createElement(v.Fragment,null,v.createElement("div",{className:Ne(Ne([],Array.isArray(t)?t:[t],!0),["sendbird-openchannel-thumbnail-message"],!1).join(" "),ref:x},v.createElement("div",{className:"sendbird-openchannel-thumbnail-message__left"},!u&&v.createElement($i,{menuTrigger:function(le){return v.createElement(Fr,{className:"sendbird-openchannel-thumbnail-message__left__avatar",src:ie.profileUrl||"",ref:W,width:"28px",height:"28px",onClick:function(){L||le()}})},menuItems:function(le){return P?P({user:ie,close:le,currentUserId:l,avatarRef:W}):v.createElement(Li,{parentRef:W,parentContainRef:W,closeDropdown:le,style:{paddingTop:"0px",paddingBottom:"0px"}},v.createElement(Xl,{user:ie,onSuccess:le,disableMessaging:!0}))}})),v.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right"},!u&&v.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__title"},v.createElement(Me,{className:"sendbird-openchannel-thumbnail-message__right__title__sender-name",type:be.CAPTION_2,color:i?de.SECONDARY_3:de.ONBACKGROUND_2},ie&&(ie.friendName||ie.nickname||ie.userId)),v.createElement(Me,{className:"sendbird-openchannel-thumbnail-message__right__title__sent-at",type:be.CAPTION_3,color:de.ONBACKGROUND_3},(r==null?void 0:r.createdAt)&&Ar(r.createdAt,N.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:w}))),v.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__body",ref:V},v.createElement("div",D({className:"sendbird-openchannel-thumbnail-message__right__body__wrap",role:"button",onClick:function(){te&&d(!0)},onKeyDown:function(){te&&d(!0)},tabIndex:0},J?D({},Q):{}),v.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__overlay"}),(n={},n[dd.VIDEO]=E||b?v.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video"},y?v.createElement(yr,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video",url:y,width:B,height:"270px",alt:"image",placeHolder:$(Se.PLAY)}):v.createElement("video",{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video__video"},v.createElement("source",{src:E||b,type:p})),v.createElement(qe,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video__icon",type:Se.PLAY,fillColor:ze.ON_BACKGROUND_2,width:"56px",height:"56px"})):v.createElement(qe,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video--icon",type:Se.PHOTO,fillColor:ze.ON_BACKGROUND_2,width:"56px",height:"56px"}),n[dd.IMAGE]=E||b?v.createElement(yr,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__image",url:y||E||b||"",alt:"image",width:B,height:"270px",placeHolder:$(Se.PHOTO)}):v.createElement(qe,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__image--icon",type:Se.PHOTO,fillColor:ze.ON_BACKGROUND_2,width:"56px",height:"56px"}),n[dd.UNSUPPORTED]=v.createElement(qe,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__unknown",type:Se.PHOTO,fillColor:ze.ON_BACKGROUND_2,width:"56px",height:"56px"}),n)[Bte(p)])),(re||ve)&&v.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__tail"},re&&v.createElement(Xo,{width:"16px",height:"16px"},v.createElement(qe,{className:"sendbird-openchannel-thumbnail-message__right__tail__pending",type:Se.SPINNER,fillColor:ze.PRIMARY,width:"16px",height:"16px"})),ve&&v.createElement(qe,{className:"sendbird-openchannel-thumbnail-message__right__tail__failed",type:Se.ERROR,fillColor:ze.ERROR,width:"16px",height:"16px"}))),!J&&v.createElement("div",{className:"sendbird-openchannel-thumbnail-message__context-menu",ref:K},($o({message:r,userId:l,status:C})||!s)&&v.createElement($i,{menuTrigger:function(le){return p0({message:r,userId:l,status:C})&&v.createElement(ga,{className:"sendbird-openchannel-thumbnail-message__context-menu--icon",width:"32px",height:"32px",onClick:le},v.createElement(qe,{type:Se.MORE,fillColor:ze.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(le){return v.createElement(Li,{parentRef:K,parentContainRef:K,closeDropdown:le,openLeft:!0},$o({message:r,userId:l,status:C})&&v.createElement(vi,{onClick:function(){m(r),le()},testID:"open_channel_thumbnail_message_menu_resend"},N.CONTEXT_MENU_DROPDOWN__RESEND),!s&&ic({message:r,userId:l,status:C})&&v.createElement(vi,{onClick:function(){o||(f(!0),le())},testID:"open_channel_thumbnail_message_menu_delete"},N.CONTEXT_MENU_DROPDOWN__DELETE))}}))),G&&v.createElement(g0,{message:r,parentRef:V,hideMenu:function(){j(!1)},showRemove:function(){j(!1),f(!0)},resendMessage:function(){j(!1),m(r)}}))}var Gw=function(e){var n=/(\.mp3)$/i,t=/(\.gif)$/i;return n.test(e)?Se.FILE_AUDIO:t.test(e)?Se.GIF:Se.FILE_DOCUMENT},Gte=function(e,n){if(e==null)return"";if(e.length<=n)return e;var t="...",r=t.length,i=n-r,a=Math.ceil(i/2),s=Math.floor(i/2);return e.substr(0,a)+t+e.substr(e.length-s)};function zte(e){var n=e.className,t=e.message,r=e.isOperator,i=e.isEphemeral,a=i===void 0?!1:i,s=e.userId,o=e.disabled,l=e.chainTop,u=e.showRemove,d=e.resendMessage,f=t==null?void 0:t.sendingStatus,m=Ut(),p=m.dateLocale,E=m.stringSet,_=M.useRef(null),b=M.useRef(null),C=M.useRef(null),y=Yl(),T=y.disableUserProfile,N=y.renderUserProfile,w=pr().isMobile,O=function(){return Pd(t.url)},L=f0(f),P=Yf(f),U=Qf(t),B=M.useState(!1),F=B[0],H=B[1],G=cs({onLongPress:function(){w&&H(!0)},onClick:O},{delay:300});return v.createElement(v.Fragment,null,v.createElement("div",{className:Ne(Ne([],Array.isArray(n)?n:[n],!0),["sendbird-openchannel-file-message"],!1).join(" "),ref:b},v.createElement("div",{className:"sendbird-openchannel-file-message__left"},!l&&v.createElement($i,{menuTrigger:function(j){return v.createElement(Fr,{className:"sendbird-openchannel-file-message__left__avatar",src:U.profileUrl||"",ref:C,width:"28px",height:"28px",onClick:function(){T||j()}})},menuItems:function(j){return N?N({user:U,close:j,currentUserId:s,avatarRef:C}):v.createElement(Li,{parentRef:C,parentContainRef:C,closeDropdown:j,style:{paddingTop:"0px",paddingBottom:"0px"}},v.createElement(Xl,{user:U,onSuccess:j,disableMessaging:!0}))}})),v.createElement("div",{className:"sendbird-openchannel-file-message__right"},!l&&v.createElement("div",{className:"sendbird-openchannel-file-message__right__title"},v.createElement(Me,{className:"sendbird-openchannel-file-message__right__title__sender-name",type:be.CAPTION_2,color:r?de.SECONDARY_3:de.ONBACKGROUND_2},U&&(U.friendName||U.nickname||U.userId)),v.createElement(Me,{className:"sendbird-openchannel-file-message__right__title__sent-at",type:be.CAPTION_3,color:de.ONBACKGROUND_3},(t==null?void 0:t.createdAt)&&Ar(t.createdAt,E.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:p}))),v.createElement("div",D({className:"sendbird-openchannel-file-message__right__body"},w?D({},G):{}),Gw(t.url)&&v.createElement(qe,{className:"sendbird-openchannel-file-message__right__body__icon",type:Gw(t.url),fillColor:ze.PRIMARY,width:"48px",height:"48px"}),v.createElement(so,{className:"sendbird-openchannel-file-message__right__body__file-name",onClick:O},v.createElement(Me,{className:"sendbird-openchannel-file-message__right__body__file-name__label",type:be.BODY_1,color:de.ONBACKGROUND_1},Gte(t.name||t.url,40)))),(L||P)&&v.createElement("div",{className:"sendbird-openchannel-file-message__right__tail"},L&&v.createElement(Xo,{width:"16px",height:"16px"},v.createElement(qe,{className:"sendbird-openchannel-file-message__right__tail__pending",type:Se.SPINNER,fillColor:ze.PRIMARY,width:"16px",height:"16px"})),P&&v.createElement(qe,{className:"sendbird-openchannel-file-message__right__tail__failed",type:Se.ERROR,fillColor:ze.ERROR,width:"16px",height:"16px"}))),!w&&v.createElement("div",{className:"sendbird-openchannel-file-message__context-menu",ref:_},($o({message:t,userId:s,status:f})||!a)&&v.createElement($i,{menuTrigger:function(j){return p0({message:t,userId:s,status:f})&&v.createElement(ga,{className:"sendbird-openchannel-file-message__context-menu__icon",width:"32px",height:"32px",onClick:j},v.createElement(qe,{type:Se.MORE,width:"24px",height:"24px"}))},menuItems:function(j){return v.createElement(Li,{parentRef:_,parentContainRef:_,closeDropdown:j,openLeft:!0},$o({message:t,userId:s,status:f})&&v.createElement(vi,{onClick:function(){o||(d(t),j())},testID:"open_channel_file_message_context_menu_resend"},E.CONTEXT_MENU_DROPDOWN__RESEND),!a&&ic({message:t,userId:s,status:f})&&v.createElement(vi,{onClick:function(){o||(u(!0),j())},testID:"open_channel_file_message_context_menu_delete"},E.CONTEXT_MENU_DROPDOWN__DELETE))}}))),F&&v.createElement(g0,{message:t,hideMenu:function(){H(!1)},parentRef:b,showRemove:function(){H(!1),u(!0)}}))}function jte(e){var n=e.message,t=e.onCloseModal,r=e.onDeleteMessage,i=M.useContext(On).stringSet;return v.createElement(wr,{onCancel:t,onSubmit:r,submitText:i.MESSAGE_MENU__DELETE,titleText:TC(i,n)})}var ts={ADMIN:"ADMIN",USER:"USER",FILE:"FILE",THUMBNAIL:"THUMBNAIL",OG:"OG",UNKNOWN:"UNKNOWN"},zw={NONE:"none",SUCCEEDED:"succeeded",FAILED:"failed",PENDING:"pending"},Vte=function(e,n){var t,r,i=n==null?void 0:n.isOgMessageEnabledInOpenChannel;return!((t=e==null?void 0:e.isUserMessage)===null||t===void 0)&&t.call(e)||(e==null?void 0:e.messageType)==="user"?e!=null&&e.ogMetaData&&i?ts.OG:ts.USER:!((r=e==null?void 0:e.isAdminMessage)===null||r===void 0)&&r.call(e)?ts.ADMIN:(e==null?void 0:e.messageType)==="file"?Ds(e.type)||jo(e.type)?ts.THUMBNAIL:ts.FILE:ts.UNKNOWN};function $te(e){var n,t,r=e.message,i=e.chainTop,a=e.chainBottom,s=e.hasSeparator,o=e.renderMessage,l=tS(),u=l.currentOpenChannel,d=l.deleteMessage,f=l.updateMessage,m=l.resendMessage,p=Ut(),E=p.dateLocale,_=p.stringSet,b=u==null?void 0:u.isFrozen,C=yt().state,y=(t=C==null?void 0:C.config)===null||t===void 0?void 0:t.userId,T=C.config.openChannel.enableOgtag,N;(r==null?void 0:r.messageType)!=="admin"&&(N=r==null?void 0:r.sender);var w=M.useState(!1),O=w[0],L=w[1],P=M.useState(!1),U=P[0],B=P[1],F=M.useState(!1),H=F[0],G=F[1],j=M.useRef(null),x=!1;return N&&(r==null?void 0:r.messageType)!=="admin"&&(x=y===N.userId||(r==null?void 0:r.sendingStatus)===zw.PENDING||(r==null?void 0:r.sendingStatus)===zw.FAILED),o?v.createElement("div",{className:"sendbird-open-channel-msg-hoc sendbird-msg--scroll-ref","data-testid":"sendbird-message-hoc"},o({message:r,chainTop:i,chainBottom:a})):(r==null?void 0:r.messageType)==="user"&&O?v.createElement(gc,{isEdit:!0,channel:u,disabled:b,ref:j,message:r,onUpdateMessage:function(V){var K=V.messageId,W=V.message;f(K,W),L(!1)},onCancelEdit:function(){L(!1)}}):v.createElement("div",{className:"sendbird-open-channel-msg-hoc sendbird-msg--scroll-ref","data-testid":"sendbird-message-hoc"},v.createElement(v.Fragment,null,s&&(r==null?void 0:r.createdAt)&&v.createElement(sC,null,v.createElement(Me,{type:be.CAPTION_2,color:de.ONBACKGROUND_2},Ar(r==null?void 0:r.createdAt,_.DATE_FORMAT__MESSAGE_LIST__DATE_SEPARATOR,{locale:E}))),(n={},n[ts.ADMIN]=function(){if((r==null?void 0:r.messageType)==="admin")return v.createElement(xte,{message:r})}(),n[ts.FILE]=function(){var V;if((r==null?void 0:r.messageType)==="file")return v.createElement(zte,{message:r,isOperator:u==null?void 0:u.isOperator((V=r==null?void 0:r.sender)===null||V===void 0?void 0:V.userId),isEphemeral:u==null?void 0:u.isEphemeral,disabled:b,userId:y,showRemove:B,resendMessage:m,chainTop:i,chainBottom:a})}(),n[ts.OG]=function(){var V;if((r==null?void 0:r.messageType)==="user"&&T)return v.createElement(Fte,{message:r,isOperator:u==null?void 0:u.isOperator((V=r==null?void 0:r.sender)===null||V===void 0?void 0:V.userId),isEphemeral:u==null?void 0:u.isEphemeral,userId:y,showEdit:L,disabled:b,showRemove:B,resendMessage:m,chainTop:i,chainBottom:a})}(),n[ts.THUMBNAIL]=function(){var V;if((r==null?void 0:r.messageType)==="file")return v.createElement(Hte,{message:r,isOperator:u==null?void 0:u.isOperator((V=r==null?void 0:r.sender)===null||V===void 0?void 0:V.userId),isEphemeral:u==null?void 0:u.isEphemeral,disabled:b,userId:y,showRemove:B,resendMessage:m,onClick:G,chainTop:i,chainBottom:a})}(),n[ts.USER]=function(){var V;if((r==null?void 0:r.messageType)==="user")return v.createElement(Pte,{message:r,isOperator:u==null?void 0:u.isOperator((V=r==null?void 0:r.sender)===null||V===void 0?void 0:V.userId),isEphemeral:u==null?void 0:u.isEphemeral,userId:y,disabled:b,showEdit:L,showRemove:B,resendMessage:m,chainTop:i,chainBottom:a})}(),n[ts.UNKNOWN]=function(){}(),n)[Vte(r,{isOgMessageEnabledInOpenChannel:T})],U&&v.createElement(jte,{message:r,onCloseModal:function(){return B(!1)},onDeleteMessage:function(){(r==null?void 0:r.messageType)!=="admin"&&d(r)}}),H&&(r==null?void 0:r.messageType)==="file"&&v.createElement(s0,{onClose:function(){return G(!1)},message:r,onDelete:function(){return d(r)},isByMe:x})))}function qte(e,n){var t=tS(),r=t.isMessageGroupingEnabled,i=r===void 0?!0:r,a=t.allMessages,s=t.hasMore,o=t.onScroll,l=yt().state,u=Ut().stringSet,d=l.config.userId,f=M.useRef(null),m=n||f,p=M.useState(!1),E=p[0],_=p[1],b=function(){m&&"current"in m&&m.current&&(m.current.scrollTo(0,m.current.scrollHeight),_(!1))},C=lU({setShowScrollDownButton:_,hasMore:s,onScroll:o,scrollRef:m}),y=M.useMemo(function(){var T;return a.length>0?a.map(function(N,w){var O,L=a[w-1],P=a[w-1],U=L&&L.createdAt,B=N==null?void 0:N.createdAt,F=!(U&&r0(B,U)),H=i?MC(L,N,P,u):[!1,!1],G=H[0],j=H[1],x=((O=N==null?void 0:N.sender)===null||O===void 0?void 0:O.userId)===d,V=(N==null?void 0:N.messageId)||(N==null?void 0:N.reqId);return v.createElement(rc,{message:N,isByMe:x,key:V},v.createElement($te,{message:N,chainTop:G,chainBottom:j,hasSeparator:F,renderMessage:e==null?void 0:e.renderMessage}))}):((T=e==null?void 0:e.renderPlaceHolderEmptyList)===null||T===void 0?void 0:T.call(e))||v.createElement(Nr,{className:"sendbird-openchannel-conversation-scroll__container__place-holder",type:Dn.NO_MESSAGES})},[a]);return v.createElement("div",{className:"sendbird-openchannel-conversation-scroll"},v.createElement("div",{className:"sendbird-openchannel-conversation-scroll__container"},v.createElement("div",{className:"sendbird-openchannel-conversation-scroll__container__padding"}),v.createElement("div",{className:["sendbird-openchannel-conversation-scroll__container__item-container",a.length>0?"":"no-messages"].join(" "),onScroll:C,ref:m},y)),E&&v.createElement("div",{className:"sendbird-openchannel-conversation-scroll__container__scroll-bottom-button",onClick:b,onKeyDown:b,tabIndex:0,role:"button"},v.createElement(qe,{width:"24px",height:"24px",type:Se.CHEVRON_DOWN,fillColor:ze.CONTENT})))}v.forwardRef(qte);v.createContext(null);M.createContext({openedListKeys:[],addOpenedListKey:_n,removeOpenedListKey:_n,clearOpenedListKeys:_n,allowMultipleOpen:!1});function Kte(){var e=yt(),n=e.state,t=e.actions;return D(D({},n),t)}var vU=function(e){var n=e.renderHeader,t=e.renderPlaceHolderError,r=e.renderPlaceHolderLoading,i=e.renderPlaceHolderEmptyList,a=e.onChangeTheme,s=e.onUserProfileUpdated,o=e.allowProfileEdit,l=e.channels,u=e.onLoadMore,d=e.initialized,f=e.renderChannel,m=e.renderAddChannel,p=e.scrollRef,E=M.useState(!1),_=E[0],b=E[1],C=yt().state.stores,y={addChannel:m,channel:f,placeholder:{loading:function(){return d?null:r?r():v.createElement(Nr,{type:Dn.LOADING})},empty:function(){return d?i?i():v.createElement(Nr,{type:Dn.NO_CHANNELS}):null},error:function(){return!d||!C.sdkStore.error?null:t?t():v.createElement(Nr,{type:Dn.WRONG})}}};return v.createElement(v.Fragment,null,v.createElement("div",{className:"sendbird-channel-list__header"},(n==null?void 0:n())||v.createElement(jZ,{onEdit:function(){return o&&b(!0)},allowProfileEdit:o,renderIconButton:function(){return y.addChannel()}})),_&&v.createElement(YZ,{onThemeChange:a,onCancel:function(){return b(!1)},onEditProfile:function(T){b(!1),s(T)}}),v.createElement(Wte,{data:l,renderItem:y.channel,onLoadMore:u,placeholderLoading:y.placeholder.loading(),placeholderEmpty:y.placeholder.empty(),placeholderError:y.placeholder.error(),scrollRef:p}))},Wte=function(e){var n=e.data,t=e.renderItem,r=e.onLoadMore,i=e.placeholderLoading,a=e.placeholderError,s=e.placeholderEmpty,o=e.scrollRef,l=Zl({onReachedBottom:function(){return r==null?void 0:r()}});return v.createElement("div",{className:"sendbird-channel-list__body",onScroll:l,ref:o},a,v.createElement("div",null,n.map(function(u,d){return t({item:u,index:d})})),i,n.length===0&&s)},Qte=function(e){return function(n){return e==null?void 0:e.includes(n)}},jw=function(e,n){return n==="broadcast"&&(e.isBroadcast=!0),n==="supergroup"&&(e.isSuper=!0),e},Yte=function(e){var n=e.sdk,t=e.userFilledApplicationUserListQuery,r=n.createApplicationUserListQuery();return t&&Object.keys(t).forEach(function(i){r[i]=t[i]}),r},Oo;(function(e){e.GROUP="group",e.SUPERGROUP="supergroup",e.BROADCAST="broadcast"})(Oo||(Oo={}));var aS=v.createContext(null),mU={sdk:void 0,userListQuery:void 0,onCreateChannelClick:void 0,onChannelCreated:void 0,onBeforeCreateChannel:void 0,pageStep:0,type:Oo.GROUP,onCreateChannel:void 0,overrideInviteUser:void 0},Xte=function(e){var n=e.onCreateChannelClick,t=e.onBeforeCreateChannel,r=e.onChannelCreated,i=e.userListQuery,a=e.onCreateChannel,s=e.overrideInviteUser,o=tne().updateState,l=yt().state.config,u=i??(l==null?void 0:l.userListQuery);return M.useEffect(function(){o({onCreateChannelClick:n,onBeforeCreateChannel:t,onChannelCreated:r,userListQuery:u,onCreateChannel:a,overrideInviteUser:s})},[n,t,r,i,a,s,u]),null},Zte=function(e){var n=e.children;return v.createElement(ene,D({},e),v.createElement(Xte,D({},e)),n)},Jte=function(e){return cc(D(D({},mU),e))},ene=function(e){var n=e.children,t=sa({userListQuery:e==null?void 0:e.userListQuery,onCreateChannelClick:e==null?void 0:e.onCreateChannelClick,onChannelCreated:e==null?void 0:e.onChannelCreated,onBeforeCreateChannel:e==null?void 0:e.onBeforeCreateChannel,onCreateChannel:e==null?void 0:e.onCreateChannel,overrideInviteUser:e==null?void 0:e.overrideInviteUser}),r=M.useRef(Jte(t));return v.createElement(aS.Provider,{value:r.current},n)},tne=function(){return dc(aS,function(e){return e},mU)},sS=function(){var e=M.useContext(aS),n=Kte();if(!e)throw new Error("useCreateChannel must be used within a CreateChannelProvider");var t=Ql.useSyncExternalStore(e.subscribe,e.getState),r=M.useMemo(function(){return{setPageStep:function(i){return e.setState(function(a){return D(D({},a),{pageStep:i})})},setType:function(i){return e.setState(function(a){return D(D({},a),{type:i})})},createChannel:$3(n)}},[e]);return{state:t,actions:r}},nne=50,rne=function(e){var n=e.onCancel,t=e.userListQuery,r=sS(),i=r.state,a=i.onCreateChannelClick,s=i.onBeforeCreateChannel,o=i.onChannelCreated,l=i.onCreateChannel,u=i.overrideInviteUser,d=i.type,f=r.actions.createChannel,m=yt().state,p=m.config.userId,E=m.stores.sdkStore.sdk,_=[p],b=M.useState([]),C=b[0],y=b[1],T=M.useState({}),N=T[0],w=T[1],O=M.useContext(On).stringSet,L=M.useState(null),P=L[0],U=L[1],B=Object.keys(N).length,F=O.MODAL__CREATE_CHANNEL__TITLE,H=O.BUTTON__CREATE,G=pr().isMobile,j=M.useState(window.innerHeight),x=j[0],V=j[1];return M.useEffect(function(){var K=t?t():Yte({sdk:E});U(K),K!=null&&K.isLoading||K.next().then(function(W){y(W)})},[]),M.useEffect(function(){var K=function(){V(window.innerHeight)};return window.addEventListener("resize",K),function(){window.removeEventListener("resize",K)}},[]),v.createElement(wr,{isFullScreenOnMobile:!0,titleText:F,submitText:H,type:Vn.PRIMARY,disabled:C.length>1&&Object.keys(N).length===0,onCancel:n,onSubmit:function(){var K=Object.keys(N).length>0?Object.keys(N):[p],W=o??l,Q=a??u;if(typeof Q=="function"){Q({users:K,onClose:n??_n,channelType:d});return}if(s){var J=s(K);jw(J,d),f(J).then(function($){return W==null?void 0:W($)})}else{var J={};J.invitedUserIds=K,J.isDistinct=!1,p&&(J.operatorUserIds=[p]),jw(J,d),f(J).then(function(te){return W==null?void 0:W(te)})}n==null||n()}},v.createElement("div",null,v.createElement(Me,{color:B>0?de.PRIMARY:de.ONBACKGROUND_3,type:be.CAPTION_1},"".concat(B," ").concat(O.MODAL__INVITE_MEMBER__SELECTED)),v.createElement("div",{className:"sendbird-create-channel--scroll",style:G?{height:"calc(".concat(x,"px - 200px)")}:{},onScroll:function(K){if(P){var W=K.target,Q=P.hasNext,J=P.isLoading,$=W.clientHeight+W.scrollTop+nne>W.scrollHeight;Q&&$&&!J&&P.next().then(function(te){y(Ne(Ne([],C,!0),te,!0))})}}},C.map(function(K){return!Qte(_)(K.userId)&&v.createElement(ds,{key:K.userId,user:K,checkBox:!0,checked:N[K.userId],onChange:function(W){var Q,J=D(D({},N),(Q={},Q[W.target.id]=W.target.checked,Q));W.target.checked||delete J[W.target.id],w(J)}})}))))},ine=function(e){var n,t="allow_broadcast_channel",r=(n=e==null?void 0:e.appInfo)===null||n===void 0?void 0:n.applicationAttributes;return Array.isArray(r)?r.includes(t):!1},ane=function(e){var n,t="allow_super_group_channel",r=(n=e==null?void 0:e.appInfo)===null||n===void 0?void 0:n.applicationAttributes;return Array.isArray(r)?r.includes(t):!1},sne=function(e){var n=e.onCancel,t=yt().state,r=V3(t),i=sS().actions,a=i.setPageStep,s=i.setType,o=M.useContext(On).stringSet,l=ine(r),u=ane(r);return v.createElement(wr,{titleText:o==null?void 0:o.MODAL__CREATE_CHANNEL__TITLE,hideFooter:!0,onCancel:function(){n==null||n()},className:"sendbird-add-channel__modal"},v.createElement("div",{className:"sendbird-add-channel__rectangle-wrap"},v.createElement("div",{className:"sendbird-add-channel__rectangle",onClick:function(){s(Oo.GROUP),a(1)},role:"button",tabIndex:0,onKeyDown:function(){s(Oo.GROUP),a(1)}},v.createElement(qe,{className:"sendbird-add-channel__rectangle__chat-icon",type:Se.CHAT,fillColor:ze.PRIMARY,width:"28px",height:"28px"}),v.createElement(Me,{type:be.SUBTITLE_1,color:de.ONBACKGROUND_1},o.MODAL__CREATE_CHANNEL__GROUP)),u&&v.createElement("div",{className:"sendbird-add-channel__rectangle",onClick:function(){s(Oo.SUPERGROUP),a(1)},role:"button",tabIndex:0,onKeyDown:function(){s(Oo.SUPERGROUP),a(1)}},v.createElement(qe,{className:"sendbird-add-channel__rectangle__supergroup-icon",type:Se.SUPERGROUP,fillColor:ze.PRIMARY,width:"28px",height:"28px"}),v.createElement(Me,{type:be.SUBTITLE_1,color:de.ONBACKGROUND_1},o.MODAL__CREATE_CHANNEL__SUPER)),l&&v.createElement("div",{className:"sendbird-add-channel__rectangle",onClick:function(){s(Oo.BROADCAST),a(1)},role:"button",tabIndex:0,onKeyDown:function(){s(Oo.BROADCAST),a(1)}},v.createElement(qe,{className:"sendbird-add-channel__rectangle__broadcast-icon",type:Se.BROADCAST,fillColor:ze.PRIMARY,width:"28px",height:"28px"}),v.createElement(Me,{type:be.SUBTITLE_1,color:de.ONBACKGROUND_1},o.MODAL__CREATE_CHANNEL__BROADCAST))))},one=function(e){var n=e.onCancel,t=e.renderStepOne,r=sS(),i=r.state,a=i.pageStep,s=i.userListQuery,o=r.actions.setPageStep;return v.createElement(v.Fragment,null,a===0&&((t==null?void 0:t())||v.createElement(sne,{onCancel:n})),a===1&&v.createElement(rne,{userListQuery:s,onCancel:function(){o(0),n==null||n()}}))},lne=function(e){return v.createElement(Zte,D({},e),v.createElement(one,D({},e)))},pU=function(e){var n=e.createChannelVisible,t=e.onChangeCreateChannelVisible,r=e.onBeforeCreateChannel,i=e.onCreateChannelClick,a=e.onChannelCreated,s=yt().state.config;return v.createElement(v.Fragment,null,v.createElement(ga,{height:"32px",width:"32px",disabled:!s.isOnline,onClick:function(){return t(!0)}},v.createElement(qe,{type:Se.CREATE,fillColor:ze.PRIMARY,width:"24px",height:"24px"})),n&&v.createElement(lne,{onCancel:function(){return t(!1)},onChannelCreated:function(o){a==null||a(o),t(!1)},onBeforeCreateChannel:r,onCreateChannelClick:i}))},une=function(){var e=M.useState(!1),n=e[0],t=e[1],r=l0().state,i=r.onChannelCreated,a=r.onBeforeCreateChannel,s=r.onCreateChannelClick;return v.createElement(pU,{createChannelVisible:n,onChangeCreateChannelVisible:t,onCreateChannelClick:s,onBeforeCreateChannel:a,onChannelCreated:i})},cne=function(e){var n=e.renderHeader,t=e.renderChannelPreview,r=e.renderPlaceHolderError,i=e.renderPlaceHolderLoading,a=e.renderPlaceHolderEmptyList,s=l0().state,o=s.onChannelSelect,l=s.onThemeChange,u=s.allowProfileEdit,d=s.typingChannelUrls,f=s.groupChannels,m=s.initialized,p=s.selectedChannelUrl,E=s.loadMore,_=s.onUserProfileUpdated,b=s.scrollRef,C=yt().state,y=C.stores,T=C.config,N=T.logger,w=T.isOnline,O=y.sdkStore.sdk,L=function(P){var U=P.item,B=P.index,F={channel:U,tabIndex:B,isSelected:U.url===p,isTyping:d.includes(U.url),renderChannelAction:function(H){return v.createElement(DL,D({},H))},onClick:function(){w||O!=null&&O.isCacheEnabled?(N.info("ChannelList: Clicked on channel:",U),o(U)):N.warning("ChannelList: Inactivated clicking channel item during offline.")},onLeaveChannel:function(){return tn(this,void 0,void 0,function(){return nn(this,function(H){switch(H.label){case 0:return N.info("ChannelList: Leaving channel",U),[4,U.leave()];case 1:return H.sent(),N.info("ChannelList: Leaving channel success"),[2]}})})}};return t?v.createElement("div",{key:U.url,onClick:F.onClick},t(F)):v.createElement(eJ,D({key:U.url},F))};return v.createElement(vU,{renderHeader:n,renderChannel:L,renderPlaceHolderError:r,renderPlaceHolderLoading:i,renderPlaceHolderEmptyList:a,onChangeTheme:l??_n,allowProfileEdit:u,onUserProfileUpdated:_??_n,channels:f,onLoadMore:E,initialized:m,renderAddChannel:function(){return v.createElement(une,null)},scrollRef:b})},gU=function(e){return v.createElement(GZ,D({},e),v.createElement(cne,D({},e)))},dne=function(){var e=M.useState(!1),n=e[0],t=e[1],r=KC(),i=r.overrideInviteUser,a=r.onBeforeCreateChannel,s=r.onChannelSelect;return v.createElement(pU,{createChannelVisible:n,onChangeCreateChannelVisible:t,onCreateChannelClick:i,onBeforeCreateChannel:a,onChannelCreated:function(o){return s==null?void 0:s(o)}})},hne=function(e){var n=e.renderHeader,t=e.renderChannelPreview,r=e.renderPlaceHolderError,i=e.renderPlaceHolderLoading,a=e.renderPlaceHolderEmptyList,s=KC(),o=s.onThemeChange,l=s.allowProfileEdit,u=s.allChannels,d=s.currentChannel,f=s.channelListDispatcher,m=s.typingChannels,p=s.initialized,E=s.fetchChannelList,_=s.onProfileEditSuccess,b=yt().state,C=b.stores,y=b.config,T=y.logger,N=y.isOnline,w=N===void 0?!1:N,O=C.sdkStore.sdk,L=function(P){var U=P.item,B=P.index,F={channel:U,tabIndex:B,isSelected:(U==null?void 0:U.url)===(d==null?void 0:d.url),isTyping:m==null?void 0:m.some(function(H){var G=H.url;return G===(U==null?void 0:U.url)}),renderChannelAction:function(H){return v.createElement(DL,D({},H))},onClick:function(){if(!w&&!(O!=null&&O.isCacheEnabled)){T.warning("ChannelList: Inactivated clicking channel item during offline.");return}T.info("ChannelList: Clicked on channel:",U),f({type:Ap,payload:U})},onLeaveChannel:function(H,G){return tn(this,void 0,void 0,function(){var j,x;return nn(this,function(V){switch(V.label){case 0:if(T.info("ChannelList: Leaving channel",H),!H)return[3,4];V.label=1;case 1:return V.trys.push([1,3,,4]),[4,H.leave()];case 2:return j=V.sent(),T.info("ChannelList: Leaving channel success",j),G&&typeof G=="function"&&G(H,null),f({type:jC,payload:H.url}),[3,4];case 3:return x=V.sent(),T.error("ChannelList: Leaving channel failed",x),G&&typeof G=="function"&&G(H,x),[3,4];case 4:return[2]}})})}};return t?v.createElement("div",{key:U==null?void 0:U.url,onClick:F.onClick},t(F)):v.createElement(dte,D({key:U==null?void 0:U.url},F))};return v.createElement(vU,{renderHeader:n,renderChannel:L,renderPlaceHolderError:r,renderPlaceHolderLoading:i,renderPlaceHolderEmptyList:a,onChangeTheme:o??_n,allowProfileEdit:l,onUserProfileUpdated:_??_n,channels:u,onLoadMore:E,initialized:p,renderAddChannel:function(){return v.createElement(dne,null)}})},_U=function(e){return v.createElement(FJ,D({},e),v.createElement(hne,D({},e)))},or;(function(e){e.CHANNEL_LIST="CHANNEL_LIST",e.CHANNEL="CHANNEL",e.CHANNEL_SETTINGS="CHANNEL_SETTINGS",e.MESSAGE_SEARCH="MESSAGE_SEARCH",e.THREAD="THREAD"})(or||(or={}));var fne=function(e){var n,t,r,i=e.replyType,a=e.isMessageGroupingEnabled,s=e.isMultipleFilesMessageEnabled,o=e.allowProfileEdit,l=e.isReactionEnabled,u=e.showSearchIcon,d=e.onProfileEditSuccess,f=e.currentChannel,m=e.setCurrentChannel,p=e.startingPoint,E=e.setStartingPoint,_=e.threadTargetMessage,b=e.setThreadTargetMessage,C=e.highlightedMessage,y=e.setHighlightedMessage,T=e.enableLegacyChannelModules,N=M.useState(or.CHANNEL_LIST),w=N[0],O=N[1],L=yt().state,P=(t=(n=L==null?void 0:L.stores)===null||n===void 0?void 0:n.sdkStore)===null||t===void 0?void 0:t.sdk,U=(r=L==null?void 0:L.config)===null||r===void 0?void 0:r.userId,B=RO().pause,F=function(j,x){E==null||E((j==null?void 0:j.createdAt)||null),setTimeout(function(){x==null||x((j==null?void 0:j.messageId)||null)},500)};M.useEffect(function(){w!==or.CHANNEL&&F(null,function(){return y==null?void 0:y(null)})},[w]),M.useEffect(function(){var j,x,V=qr();if(!((j=P==null?void 0:P.groupChannel)===null||j===void 0)&&j.addGroupChannelHandler){var K=new Qo({onUserBanned:function(W,Q){W.url===(f==null?void 0:f.url)&&(Q==null?void 0:Q.userId)===U&&O(or.CHANNEL_LIST)},onChannelDeleted:function(W){W===(f==null?void 0:f.url)&&O(or.CHANNEL_LIST)},onUserLeft:function(W,Q){W.url===(f==null?void 0:f.url)&&(Q==null?void 0:Q.userId)===U&&O(or.CHANNEL_LIST)}});(x=P==null?void 0:P.groupChannel)===null||x===void 0||x.addGroupChannelHandler(V,K)}return function(){var W,Q;(Q=(W=P==null?void 0:P.groupChannel)===null||W===void 0?void 0:W.removeGroupChannelHandler)===null||Q===void 0||Q.call(W,V)}},[P,f==null?void 0:f.url]),M.useEffect(function(){w===or.THREAD&&O(or.CHANNEL)},[f==null?void 0:f.url]);var H={allowProfileEdit:o,onProfileEditSuccess:d,disableAutoSelect:!0,onChannelSelect:function(j){m(j??void 0),O(j?or.CHANNEL:or.CHANNEL_LIST)},onChannelCreated:function(j){m(j),O(or.CHANNEL)},onUserProfileUpdated:d},G={channelUrl:(f==null?void 0:f.url)||"",onChatHeaderActionClick:function(){O(or.CHANNEL_SETTINGS)},onBackClick:function(){O(or.CHANNEL_LIST),B(FE)},onSearchClick:function(){O(or.MESSAGE_SEARCH)},onReplyInThread:function(j){var x=j.message;i==="THREAD"&&(O(or.THREAD),b(x))},onQuoteMessageClick:function(j){var x=j.message;i==="THREAD"&&(b(x),O(or.THREAD))},animatedMessage:C,onMessageAnimated:function(){return y==null?void 0:y(null)},showSearchIcon:u,startingPoint:p??void 0,isReactionEnabled:l,replyType:i,isMessageGroupingEnabled:a,isMultipleFilesMessageEnabled:s,animatedMessageId:C,onReplyInThreadClick:function(j){var x=j.message;i==="THREAD"&&(O(or.THREAD),b(x))}};return v.createElement("div",{className:"sb_mobile",id:Jp},w===or.CHANNEL_LIST&&v.createElement("div",{className:"sb_mobile__panelwrap"},T?v.createElement(_U,D({},H)):v.createElement(gU,D({},H))),w===or.CHANNEL&&v.createElement("div",{className:"sb_mobile__panelwrap"},T?v.createElement(uU,D({},G)):v.createElement(OL,D({},G))),w===or.CHANNEL_SETTINGS&&v.createElement("div",{className:"sb_mobile__panelwrap"},v.createElement(cU,{channelUrl:(f==null?void 0:f.url)||"",onCloseClick:function(){O(or.CHANNEL)},onLeaveChannel:function(){O(or.CHANNEL_LIST)}})),w===or.MESSAGE_SEARCH&&v.createElement("div",{className:"sb_mobile__panelwrap"},v.createElement(dU,{channelUrl:(f==null?void 0:f.url)||"",onCloseClick:function(){O(or.CHANNEL)},onResultClick:function(j){O(or.CHANNEL),F(j,function(x){y==null||y(x)})}})),w===or.THREAD&&v.createElement("div",{className:"sb_mobile__panelwrap"},v.createElement(fU,{channelUrl:(f==null?void 0:f.url)||"",message:_,onHeaderActionClick:function(){O(or.CHANNEL),B(FE)},onMoveToParentMessage:function(j){var x=j.message,V=j.channel;m(V),F(x,function(K){O(or.CHANNEL),y==null||y(K)})}})))},vne=function(e){var n=e.isReactionEnabled,t=e.replyType,r=e.isMessageGroupingEnabled,i=e.isMultipleFilesMessageEnabled,a=e.allowProfileEdit,s=e.showSearchIcon,o=e.onProfileEditSuccess,l=e.disableAutoSelect,u=e.currentChannel,d=e.setCurrentChannel,f=e.showSettings,m=e.setShowSettings,p=e.showSearch,E=e.setShowSearch,_=e.highlightedMessage,b=e.setHighlightedMessage,C=e.startingPoint,y=e.setStartingPoint,T=e.showThread,N=e.setShowThread,w=e.threadTargetMessage,O=e.setThreadTargetMessage,L=e.enableLegacyChannelModules,P=function(H){y==null||y(null),b==null||b(null),d(H||void 0)},U=function(H){var G=H.message;m(!1),E(!1),t==="THREAD"&&(O(G),N(!0))},B={allowProfileEdit:a,activeChannelUrl:u==null?void 0:u.url,onProfileEditSuccess:o,disableAutoSelect:l,onChannelSelect:P,selectedChannelUrl:u==null?void 0:u.url,onChannelCreated:P,onUserProfileUpdated:o},F={channelUrl:(u==null?void 0:u.url)||"",onChatHeaderActionClick:function(){E(!1),N(!1),m(!f)},onSearchClick:function(){m(!1),N(!1),E(!p)},onReplyInThread:U,onQuoteMessageClick:function(H){var G=H.message;m(!1),E(!1),t==="THREAD"&&(O(G),N(!0))},animatedMessage:_,onMessageAnimated:function(){return b==null?void 0:b(null)},showSearchIcon:s,startingPoint:C??void 0,isReactionEnabled:n,replyType:t,isMessageGroupingEnabled:r,isMultipleFilesMessageEnabled:i,animatedMessageId:_,onReplyInThreadClick:U};return v.createElement("div",{className:"sendbird-app__wrap",id:Jp},v.createElement("div",{className:"sendbird-app__channellist-wrap"},L?v.createElement(_U,D({},B)):v.createElement(gU,D({},B))),v.createElement("div",{className:zt("sendbird-app__conversation-wrap",f&&"sendbird-app__conversation--settings-open",p&&"sendbird-app__conversation--search-open")},L?v.createElement(uU,D({},F)):v.createElement(OL,D({},F))),f&&v.createElement("div",{className:"sendbird-app__settingspanel-wrap"},v.createElement(cU,{className:"sendbird-channel-settings",channelUrl:(u==null?void 0:u.url)||"",onCloseClick:function(){m(!1)}})),p&&v.createElement("div",{className:"sendbird-app__searchpanel-wrap"},v.createElement(dU,{channelUrl:(u==null?void 0:u.url)||"",onResultClick:function(H){H.messageId===_?(b==null||b(null),setTimeout(function(){b==null||b(H.messageId)})):(y==null||y(H.createdAt),b==null||b(H.messageId))},onCloseClick:function(){E(!1)}})),T&&v.createElement(fU,{className:"sendbird-app__thread",channelUrl:(u==null?void 0:u.url)||"",message:w,onHeaderActionClick:function(){N(!1)},onMoveToParentMessage:function(H){var G=H.message,j=H.channel;(j==null?void 0:j.url)!==(u==null?void 0:u.url)&&d(j),setTimeout(function(){(G==null?void 0:G.messageId)!==_&&(y==null||y(G==null?void 0:G.createdAt))},200),setTimeout(function(){y==null||y(null),b==null||b(G==null?void 0:G.messageId)},500)}}))},mne=function(e){var n,t,r,i=e.isMessageGroupingEnabled,a=e.allowProfileEdit,s=e.onProfileEditSuccess,o=e.disableAutoSelect,l=e.currentChannel,u=e.setCurrentChannel,d=e.enableLegacyChannelModules,f=yt().state,m=f.config,p=M.useState(!1),E=p[0],_=p[1],b=M.useState(null),C=b[0],y=b[1],T=M.useState(!1),N=T[0],w=T[1],O=M.useState(!1),L=O[0],P=O[1],U=M.useState(null),B=U[0],F=U[1],H=M.useState(null),G=H[0],j=H[1],x=pr().isMobile,V=(n=e.replyType)!==null&&n!==void 0?n:zo(m.groupChannel.replyType).upperCase,K=(t=e.isReactionEnabled)!==null&&t!==void 0?t:m.groupChannel.enableReactions,W=(r=e.showSearchIcon)!==null&&r!==void 0?r:m.groupChannelSettings.enableMessageSearch;return v.createElement(v.Fragment,null,x?v.createElement(fne,{replyType:V,showSearchIcon:W,isReactionEnabled:K,isMessageGroupingEnabled:i,allowProfileEdit:a,onProfileEditSuccess:s,currentChannel:l,setCurrentChannel:u,highlightedMessage:B,setHighlightedMessage:F,startingPoint:G,setStartingPoint:j,threadTargetMessage:C,setThreadTargetMessage:y,enableLegacyChannelModules:d}):v.createElement(vne,{replyType:V,isReactionEnabled:K,showSearchIcon:W,isMessageGroupingEnabled:i,allowProfileEdit:a,onProfileEditSuccess:s,disableAutoSelect:o,currentChannel:l,setCurrentChannel:u,showThread:E,setShowThread:_,threadTargetMessage:C,setThreadTargetMessage:y,showSettings:N,setShowSettings:w,showSearch:L,setShowSearch:P,highlightedMessage:B,setHighlightedMessage:F,startingPoint:G,setStartingPoint:j,enableLegacyChannelModules:d}))};function pne(e){var n=e.appId,t=e.userId,r=e.accessToken,i=r===void 0?"":r,a=e.customApiHost,s=a===void 0?"":a,o=e.customWebSocketHost,l=o===void 0?"":o,u=e.breakpoint,d=e.theme,f=d===void 0?"light":d,m=e.userListQuery,p=e.nickname,E=p===void 0?"":p,_=e.profileUrl,b=_===void 0?"":_,C=e.dateLocale,y=e.config,T=y===void 0?{}:y,N=e.voiceRecord,w=e.isMessageGroupingEnabled,O=w===void 0?!0:w,L=e.colorSet,P=e.stringSet,U=e.allowProfileEdit,B=U===void 0?!1:U,F=e.disableMarkAsDelivered,H=F===void 0?!1:F,G=e.renderUserProfile,j=e.onProfileEditSuccess,x=e.imageCompression,V=x===void 0?{}:x,K=e.disableAutoSelect,W=K===void 0?!1:K,Q=e.sdkInitParams,J=e.customExtensionParams,$=e.eventHandlers,te=e.isMultipleFilesMessageEnabled,re=e.isUserIdUsedForNickname,ve=re===void 0?!0:re,ie=e.enableLegacyChannelModules,le=ie===void 0?!1:ie,Ae=e.uikitOptions,oe=e.htmlTextDirection,he=oe===void 0?"ltr":oe,me=e.forceLeftToRightMessageLayout,Be=me===void 0?!1:me,pe=e.showSearchIcon,ye=e.isMentionEnabled,Ee=e.isReactionEnabled,Ue=e.replyType,Ye=e.disableUserProfile,De=e.isVoiceMessageEnabled,We=e.isTypingIndicatorEnabledOnChannelList,Je=e.isMessageReceiptStatusEnabledOnChannelList,Le=M.useState(),He=Le[0],At=Le[1];return v.createElement(JK,{stringSet:P,appId:n,userId:t,accessToken:i,customApiHost:s,customWebSocketHost:l,breakpoint:u,theme:f,nickname:E,profileUrl:b,dateLocale:C,userListQuery:m,config:T,colorSet:L,disableMarkAsDelivered:H,renderUserProfile:G,imageCompression:V,isMultipleFilesMessageEnabled:te,voiceRecord:N,onStartDirectMessage:function(Ve){At(Ve)},uikitOptions:Ae,isUserIdUsedForNickname:ve,sdkInitParams:Q,customExtensionParams:J,eventHandlers:$,isTypingIndicatorEnabledOnChannelList:We,isMessageReceiptStatusEnabledOnChannelList:Je,replyType:Ue,showSearchIcon:pe,disableUserProfile:Ye,isReactionEnabled:Ee,isMentionEnabled:ye,isVoiceMessageEnabled:De,htmlTextDirection:he,forceLeftToRightMessageLayout:Be},v.createElement(mne,{isMessageGroupingEnabled:O,allowProfileEdit:B,onProfileEditSuccess:j,disableAutoSelect:W,currentChannel:He,setCurrentChannel:At,enableLegacyChannelModules:le,isReactionEnabled:Ee,replyType:Ue,showSearchIcon:pe}))}function gne(){const[e,n]=M.useState(!1),[t,r]=M.useState(""),[i,a]=M.useState(""),[s,o]=M.useState(""),[l,u]=M.useState(""),[d,f]=M.useState(""),[m,p]=M.useState(""),E=async _=>{_.preventDefault();try{const b=await fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,password:l,userType:d})});if(b.ok){const C=await b.json();n(!0),r(C.userId),a(C.accessToken)}else{const C=await b.json();p(C.error||"Login failed.")}}catch{p("An error occurred during login.")}};return e?ui.jsx("div",{style:{height:"100vh"},children:ui.jsx(pne,{appId:"C2699383-6270-4CEB-80D1-9E260947FB39",userId:t,accessToken:i})}):ui.jsxs("div",{children:[ui.jsx("h1",{children:"Login"}),ui.jsxs("form",{onSubmit:E,children:[ui.jsxs("label",{children:["Email: ",ui.jsx("input",{value:s,onChange:_=>o(_.target.value)})]}),ui.jsxs("label",{children:["Password: ",ui.jsx("input",{type:"password",value:l,onChange:_=>u(_.target.value)})]}),ui.jsxs("label",{children:["User Type:",ui.jsxs("select",{value:d,onChange:_=>f(_.target.value),children:[ui.jsx("option",{value:"school",children:"School"}),ui.jsx("option",{value:"company",children:"Company"}),ui.jsx("option",{value:"intern",children:"Intern"})]})]}),ui.jsx("button",{type:"submit",children:"Login"})]}),m&&ui.jsx("p",{children:m})]})}ek.createRoot(document.getElementById("root")).render(ui.jsx(M.StrictMode,{children:ui.jsx(gne,{})}));const _ne=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{vd as V,n2 as Z,yne as a,ee as b,Ene as c,qD as g,pb as j,Pe as q,zi as r,Km as s,X as u};
